/*! For license information please see main.1a4f7db9.js.LICENSE.txt */
(()=>{var e={9:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ServerStyleSheet:()=>Ve,StyleSheetConsumer:()=>se,StyleSheetContext:()=>ie,StyleSheetManager:()=>he,ThemeConsumer:()=>Le,ThemeContext:()=>Oe,ThemeProvider:()=>Pe,__PRIVATE__:()=>Ge,createGlobalStyle:()=>ze,css:()=>xe,default:()=>Ye,isStyledComponent:()=>x,keyframes:()=>je,useTheme:()=>He,version:()=>S,withTheme:()=>Ue});var r=n(86),i=n(43),s=n(324),a=n.n(s);const o=function(e){function t(e,r,l,u,d){for(var f,p,g,m,b,w=0,S=0,C=0,D=0,E=0,O=0,P=g=f=0,N=0,R=0,F=0,z=0,j=l.length,V=j-1,U="",H="",G="",Y="";N<j;){if(p=l.charCodeAt(N),N===V&&0!==S+D+C+w&&(0!==S&&(p=47===S?10:47),D=C=w=0,j++,V++),0===S+D+C+w){if(N===V&&(0<R&&(U=U.replace(h,"")),0<U.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:U+=l.charAt(N)}p=59}switch(p){case 123:for(f=(U=U.trim()).charCodeAt(0),g=1,z=++N;N<j;){switch(p=l.charCodeAt(N)){case 123:g++;break;case 125:g--;break;case 47:switch(p=l.charCodeAt(N+1)){case 42:case 47:e:{for(P=N+1;P<V;++P)switch(l.charCodeAt(P)){case 47:if(42===p&&42===l.charCodeAt(P-1)&&N+2!==P){N=P+1;break e}break;case 10:if(47===p){N=P+1;break e}}N=P}}break;case 91:p++;case 40:p++;case 34:case 39:for(;N++<V&&l.charCodeAt(N)!==p;);}if(0===g)break;N++}if(g=l.substring(z,N),0===f&&(f=(U=U.replace(c,"").trim()).charCodeAt(0)),64===f){switch(0<R&&(U=U.replace(h,"")),p=U.charCodeAt(1)){case 100:case 109:case 115:case 45:R=r;break;default:R=I}if(z=(g=t(r,R,g,p,d+1)).length,0<L&&(b=o(3,g,R=n(I,U,F),r,k,A,z,p,d,u),U=R.join(""),void 0!==b&&0===(z=(g=b.trim()).length)&&(p=0,g="")),0<z)switch(p){case 115:U=U.replace(x,a);case 100:case 109:case 45:g=U+"{"+g+"}";break;case 107:g=(U=U.replace(v,"$1 $2"))+"{"+g+"}",g=1===T||2===T&&s("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=U+g,112===u&&(H+=g,g="")}else g=""}else g=t(r,n(r,U,F),g,u,d+1);G+=g,g=F=R=P=f=0,U="",p=l.charCodeAt(++N);break;case 125:case 59:if(1<(z=(U=(0<R?U.replace(h,""):U).trim()).length))switch(0===P&&(f=U.charCodeAt(0),45===f||96<f&&123>f)&&(z=(U=U.replace(" ",":")).length),0<L&&void 0!==(b=o(1,U,r,e,k,A,H.length,u,d,u))&&0===(z=(U=b.trim()).length)&&(U="\0\0"),f=U.charCodeAt(0),p=U.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){Y+=U+l.charAt(N);break}default:58!==U.charCodeAt(z-1)&&(H+=i(U,f,p,U.charCodeAt(2)))}F=R=P=f=0,U="",p=l.charCodeAt(++N)}}switch(p){case 13:case 10:47===S?S=0:0===1+f&&107!==u&&0<U.length&&(R=1,U+="\0"),0<L*B&&o(0,U,r,e,k,A,H.length,u,d,u),A=1,k++;break;case 59:case 125:if(0===S+D+C+w){A++;break}default:switch(A++,m=l.charAt(N),p){case 9:case 32:if(0===D+w+S)switch(E){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===D+S+w&&(R=F=1,m="\f"+m);break;case 108:if(0===D+S+w+M&&0<P)switch(N-P){case 2:112===E&&58===l.charCodeAt(N-3)&&(M=E);case 8:111===O&&(M=O)}break;case 58:0===D+S+w&&(P=N);break;case 44:0===S+C+D+w&&(R=1,m+="\r");break;case 34:case 39:0===S&&(D=D===p?0:0===D?p:D);break;case 91:0===D+S+C&&w++;break;case 93:0===D+S+C&&w--;break;case 41:0===D+S+w&&C--;break;case 40:if(0===D+S+w){if(0===f)if(2*E+3*O===533);else f=1;C++}break;case 64:0===S+C+D+w+P+g&&(g=1);break;case 42:case 47:if(!(0<D+w+C))switch(S){case 0:switch(2*p+3*l.charCodeAt(N+1)){case 235:S=47;break;case 220:z=N,S=42}break;case 42:47===p&&42===E&&z+2!==N&&(33===l.charCodeAt(z+2)&&(H+=l.substring(z,N+1)),m="",S=0)}}0===S&&(U+=m)}O=E,E=p,N++}if(0<(z=H.length)){if(R=r,0<L&&(void 0!==(b=o(2,H,R,e,k,A,z,u,d,u))&&0===(H=b).length))return Y+H+G;if(H=R.join(",")+"{"+H+"}",0!==T*M){switch(2!==T||s(H,2)||(M=0),M){case 111:H=H.replace(y,":-moz-$1")+H;break;case 112:H=H.replace(_,"::-webkit-input-$1")+H.replace(_,"::-moz-$1")+H.replace(_,":-ms-input-$1")+H}M=0}}return Y+H+G}function n(e,t,n){var i=t.trim().split(g);t=i;var s=i.length,a=e.length;switch(a){case 0:case 1:var o=0;for(e=0===a?"":e[0]+" ";o<s;++o)t[o]=r(e,t[o],n).trim();break;default:var l=o=0;for(t=[];o<s;++o)for(var u=0;u<a;++u)t[l++]=r(e[u]+" ",i[o],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var a=e+";",o=2*t+3*n+4*r;if(944===o){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===T||2===T&&s(l,1)?"-webkit-"+l+l:l}if(0===T||2===T&&!s(a,1))return a;switch(o){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(E,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return f.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(b,"tb");break;case 232:l=a.replace(b,"tb-rl");break;case 220:l=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,o=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===D.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+a}return a}function s(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),P(2!==t?r:r.replace(C,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function o(e,t,n,r,i,s,a,o,l,c){for(var h,d=0,f=t;d<L;++d)switch(h=O[d].call(u,e,f,n,r,i,s,a,o,l,c)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function l(e){return void 0!==(e=e.prefix)&&(P=null,e?"function"!==typeof e?T=1:(T=2,P=e):T=0),l}function u(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<L){var i=o(-1,n,r,r,k,A,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var s=t(I,r,n,0,0);return 0<L&&(void 0!==(i=o(-2,s,r,r,k,A,s.length,0,0,0))&&(s=i)),M=0,A=k=1,s}var c=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,y=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,D=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,A=1,k=1,M=0,T=1,I=[],O=[],L=0,P=null,B=0;return u.use=function e(t){switch(t){case void 0:case null:L=O.length=0;break;default:if("function"===typeof t)O[L++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else B=0|!!t}return e},u.set=l,void 0!==e&&l(e),u};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var u=n(918),c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=(0,u.A)(function(e){return c.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),d=n(219),f=n.n(d);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},m=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,r.typeOf)(e)},v=Object.freeze([]),_=Object.freeze({});function y(e){return"function"==typeof e}function b(e){return e.displayName||e.name||"Component"}function x(e){return e&&"string"==typeof e.styledComponentId}var w="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",S="5.3.11",C="undefined"!=typeof window&&"HTMLElement"in window,D=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),E={};function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var k=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var a=this.indexOfGroup(e+1),o=0,l=t.length;o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+=this.tag.getRule(s)+"/*!sc*/\n";return t},e}(),M=new Map,T=new Map,I=1,O=function(e){if(M.has(e))return M.get(e);for(;T.has(I);)I++;var t=I++;return M.set(e,t),T.set(t,e),t},L=function(e){return T.get(e)},P=function(e,t){t>=I&&(I=t+1),M.set(e,t),T.set(t,e)},B="style["+w+'][data-styled-version="5.3.11"]',N=new RegExp("^"+w+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),R=function(e,t,n){for(var r,i=n.split(","),s=0,a=i.length;s<a;s++)(r=i[s])&&e.registerName(t,r)},F=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,s=n.length;i<s;i++){var a=n[i].trim();if(a){var o=a.match(N);if(o){var l=0|parseInt(o[1],10),u=o[2];0!==l&&(P(u,l),R(e,u,o[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},z=function(){return n.nc},j=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(w))return r}}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(w,"active"),r.setAttribute("data-styled-version","5.3.11");var a=z();return a&&r.setAttribute("nonce",a),n.insertBefore(r,s),r},V=function(){function e(e){var t=this.element=j(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}A(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),U=function(){function e(e){var t=this.element=j(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),H=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=C,Y={isServer:!C,useCSSOMInjection:!D},W=function(){function e(e,t,n){void 0===e&&(e=_),void 0===t&&(t={}),this.options=p({},Y,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&C&&G&&(G=!1,function(e){for(var t=document.querySelectorAll(B),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(w)&&(F(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return O(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(p({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new H(i):r?new V(i):new U(i),new k(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(O(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(O(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(O(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var s=L(i);if(void 0!==s){var a=e.names.get(s),o=t.getGroup(i);if(a&&o&&a.size){var l=w+".g"+i+'[id="'+s+'"]',u="";void 0!==a&&a.forEach(function(e){e.length>0&&(u+=e+",")}),r+=""+o+l+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),q=/(a)(d)/gi,Z=function(e){return String.fromCharCode(e+(e>25?39:97))};function K(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Z(t%52)+n;return(Z(t%52)+n).replace(q,"$1-$2")}var X=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},J=function(e){return X(5381,e)};function $(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(y(n)&&!x(n))return!1}return!0}var Q=J("5.3.11"),ee=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&$(e),this.componentId=t,this.baseHash=X(Q,t),this.baseStyle=n,W.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var s=ye(this.rules,e,t,n).join(""),a=K(X(this.baseHash,s)>>>0);if(!t.hasNameForId(r,a)){var o=n(s,"."+a,void 0,r);t.insertRules(r,a,o)}i.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,u=X(this.baseHash,n.hash),c="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)c+=d;else if(d){var f=ye(d,e,t,n),p=Array.isArray(f)?f.join(""):f;u=X(u,p+h),c+=p}}if(c){var g=K(u>>>0);if(!t.hasNameForId(r,g)){var m=n(c,"."+g,void 0,r);t.insertRules(r,g,m)}i.push(g)}}return i.join(" ")},e}(),te=/^\s*\/\/.*$/gm,ne=[":","[",".","#"];function re(e){var t,n,r,i,s=void 0===e?_:e,a=s.options,l=void 0===a?_:a,u=s.plugins,c=void 0===u?v:u,h=new o(l),d=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,s,a,o,l,u,c,h){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}(function(e){d.push(e)}),p=function(e,r,s){return 0===r&&-1!==ne.indexOf(s[n.length])||s.match(i)?e:"."+t};function g(e,s,a,o){void 0===o&&(o="&");var l=e.replace(te,""),u=s&&a?a+" "+s+" { "+l+" }":l;return t=o,n=s,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),h(a||!s?"":s,u)}return h.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,p))},f,function(e){if(-2===e){var t=d;return d=[],t}}])),g.hash=c.length?c.reduce(function(e,t){return t.name||A(15),X(e,t.name)},5381).toString():"",g}var ie=i.createContext(),se=ie.Consumer,ae=i.createContext(),oe=(ae.Consumer,new W),le=re();function ue(){return(0,i.useContext)(ie)||oe}function ce(){return(0,i.useContext)(ae)||le}function he(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],s=ue(),o=(0,i.useMemo)(function(){var t=s;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,i.useMemo)(function(){return re({options:{prefix:!e.disableVendorPrefixes},plugins:n})},[e.disableVendorPrefixes,n]);return(0,i.useEffect)(function(){a()(n,e.stylisPlugins)||r(e.stylisPlugins)},[e.stylisPlugins]),i.createElement(ie.Provider,{value:o},i.createElement(ae.Provider,{value:l},e.children))}var de=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=le);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return A(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=le),this.name+e.hash},e}(),fe=/([A-Z])/,pe=/([A-Z])/g,ge=/^ms-/,me=function(e){return"-"+e.toLowerCase()};function ve(e){return fe.test(e)?e.replace(pe,me).replace(ge,"-ms-"):e}var _e=function(e){return null==e||!1===e||""===e};function ye(e,t,n,r){if(Array.isArray(e)){for(var i,s=[],a=0,o=e.length;a<o;a+=1)""!==(i=ye(e[a],t,n,r))&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}return _e(e)?"":x(e)?"."+e.styledComponentId:y(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:ye(e(t),t,n,r):e instanceof de?n?(e.inject(n,r),e.getName(r)):e:m(e)?function e(t,n){var r,i,s=[];for(var a in t)t.hasOwnProperty(a)&&!_e(t[a])&&(Array.isArray(t[a])&&t[a].isCss||y(t[a])?s.push(ve(a)+":",t[a],";"):m(t[a])?s.push.apply(s,e(t[a],a)):s.push(ve(a)+": "+(r=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in l||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(s,["}"]):s}(e):e.toString();var u}var be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function xe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e)||m(e)?be(ye(g(v,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:be(ye(g(e,n)))}new Set;var we=function(e,t,n){return void 0===n&&(n=_),e.theme!==n.theme&&e.theme||t||n.theme},Se=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ce=/(^-|-$)/g;function De(e){return e.replace(Se,"-").replace(Ce,"")}var Ee=function(e){return K(J(e)>>>0)};function Ae(e){return"string"==typeof e&&!0}var ke=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Me=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Te(e,t,n){var r=e[n];ke(t)&&ke(r)?Ie(r,t):e[n]=t}function Ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var a=s[i];if(ke(a))for(var o in a)Me(o)&&Te(e,a[o],o)}return e}var Oe=i.createContext(),Le=Oe.Consumer;function Pe(e){var t=(0,i.useContext)(Oe),n=(0,i.useMemo)(function(){return function(e,t){return e?y(e)?e(t):Array.isArray(e)||"object"!=typeof e?A(8):t?p({},t,{},e):e:A(14)}(e.theme,t)},[e.theme,t]);return e.children?i.createElement(Oe.Provider,{value:n},e.children):null}var Be={};function Ne(e,t,n){var r=x(e),s=!Ae(e),a=t.attrs,o=void 0===a?v:a,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":De(e);Be[n]=(Be[n]||0)+1;var r=n+"-"+Ee("5.3.11"+n+Be[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):l,c=t.displayName,d=void 0===c?function(e){return Ae(e)?"styled."+e:"Styled("+b(e)+")"}(e):c,g=t.displayName&&t.componentId?De(t.displayName)+"-"+t.componentId:t.componentId||u,m=r&&e.attrs?Array.prototype.concat(e.attrs,o).filter(Boolean):o,w=t.shouldForwardProp;r&&e.shouldForwardProp&&(w=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var S,C=new ee(n,g,r?e.componentStyle:void 0),D=C.isStatic&&0===o.length,E=function(e,t){return function(e,t,n,r){var s=e.attrs,a=e.componentStyle,o=e.defaultProps,l=e.foldedComponentIds,u=e.shouldForwardProp,c=e.styledComponentId,d=e.target,f=function(e,t,n){void 0===e&&(e=_);var r=p({},t,{theme:e}),i={};return n.forEach(function(e){var t,n,s,a=e;for(t in y(a)&&(a=a(r)),a)r[t]=i[t]="className"===t?(n=i[t],s=a[t],n&&s?n+" "+s:n||s):a[t]}),[r,i]}(we(t,(0,i.useContext)(Oe),o)||_,t,s),g=f[0],m=f[1],v=function(e,t,n){var r=ue(),i=ce();return t?e.generateAndInjectStyles(_,r,i):e.generateAndInjectStyles(n,r,i)}(a,r,g),b=n,x=m.$as||t.$as||m.as||t.as||d,w=Ae(x),S=m!==t?p({},t,{},m):t,C={};for(var D in S)"$"!==D[0]&&"as"!==D&&("forwardedAs"===D?C.as=S[D]:(u?u(D,h,x):!w||h(D))&&(C[D]=S[D]));return t.style&&m.style!==t.style&&(C.style=p({},t.style,{},m.style)),C.className=Array.prototype.concat(l,c,v!==c?v:null,t.className,m.className).filter(Boolean).join(" "),C.ref=b,(0,i.createElement)(x,C)}(S,e,t,D)};return E.displayName=d,(S=i.forwardRef(E)).attrs=m,S.componentStyle=C,S.displayName=d,S.shouldForwardProp=w,S.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):v,S.styledComponentId=g,S.target=r?e.target:e,S.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),s=r&&r+"-"+(Ae(e)?e:De(b(e)));return Ne(e,p({},i,{attrs:m,componentId:s}),n)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ie({},e.defaultProps,t):t}}),Object.defineProperty(S,"toString",{value:function(){return"."+S.styledComponentId}}),s&&f()(S,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var Re=function(e){return function e(t,n,i){if(void 0===i&&(i=_),!(0,r.isValidElementType)(n))return A(1,String(n));var s=function(){return t(n,i,xe.apply(void 0,arguments))};return s.withConfig=function(r){return e(t,n,p({},i,{},r))},s.attrs=function(r){return e(t,n,p({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},s}(Ne,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Re[e]=Re(e)});var Fe=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=$(e),W.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(ye(this.rules,t,n,r).join(""),""),s=this.componentId+e;n.insertRules(s,s,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&W.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=xe.apply(void 0,[e].concat(n)),a="sc-global-"+Ee(JSON.stringify(s)),o=new Fe(s,a);function l(e){var t=ue(),n=ce(),r=(0,i.useContext)(Oe),s=(0,i.useRef)(t.allocateGSInstance(a)).current;return t.server&&u(s,e,t,r,n),(0,i.useLayoutEffect)(function(){if(!t.server)return u(s,e,t,r,n),function(){return o.removeStyles(s,t)}},[s,e,t,r,n]),null}function u(e,t,n,r,i){if(o.isStatic)o.renderStyles(e,E,n,i);else{var s=p({},t,{theme:we(t,r,l.defaultProps)});o.renderStyles(e,s,n,i)}}return i.memo(l)}function je(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=xe.apply(void 0,[e].concat(n)).join(""),s=Ee(i);return new de(s,i)}var Ve=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=z();return"<style "+[n&&'nonce="'+n+'"',w+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?A(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return A(2);var n=((t={})[w]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=z();return r&&(n.nonce=r),[i.createElement("style",p({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new W({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?A(2):i.createElement(he,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return A(3)},e}(),Ue=function(e){var t=i.forwardRef(function(t,n){var r=(0,i.useContext)(Oe),s=e.defaultProps,a=we(t,r,s);return i.createElement(e,p({},t,{theme:a,ref:n}))});return f()(t,e),t.displayName="WithTheme("+b(e)+")",t},He=function(){return(0,i.useContext)(Oe)},Ge={StyleSheet:W,masterSheet:oe};const Ye=Re},43:(e,t,n)=>{"use strict";e.exports=n(202)},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},82:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case s:case o:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case m:case g:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=o,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||x(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===s},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===g},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===o},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===o||e===a||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===_||e.$$typeof===y||e.$$typeof===b||e.$$typeof===v)},t.typeOf=x},86:(e,t,n)=>{"use strict";e.exports=n(82)},140:(e,t,n)=>{var r,i=n(897).default;self,r=(e,t)=>(()=>{var r={"./node_modules/call-bind/callBound.js":(e,t,n)=>{"use strict";var r=n("./node_modules/get-intrinsic/index.js"),i=n("./node_modules/call-bind/index.js"),s=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&s(e,".prototype.")>-1?i(n):n}},"./node_modules/call-bind/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/function-bind/index.js"),i=n("./node_modules/get-intrinsic/index.js"),s=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),o=i("%Reflect.apply%",!0)||r.call(a,s),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(d){u=null}e.exports=function(e){var t=o(r,a,arguments);return l&&u&&l(t,"length").configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t};var h=function(){return o(r,s,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},"./node_modules/function-bind/implementation.js":e=>{"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r=this;if("function"!==typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,s=t.call(arguments,1),a=Math.max(0,r.length-s.length),o=[],l=0;l<a;l++)o.push("$"+l);if(i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var n=r.apply(this,s.concat(t.call(arguments)));return Object(n)===n?n:this}return r.apply(e,s.concat(t.call(arguments)))}),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}},"./node_modules/function-bind/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/function-bind/implementation.js");e.exports=Function.prototype.bind||r},"./node_modules/get-intrinsic/index.js":(e,t,n)=>{"use strict";var r,i=SyntaxError,s=Function,a=TypeError,o=function(e){try{return s('"use strict"; return ('+e+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(M){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(t){return u}}}():u,h=n("./node_modules/has-symbols/index.js")(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"===typeof Uint8Array?r:d(Uint8Array),g={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":f,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};try{null.error}catch(M){var m=d(d(M));g["%Error.prototype%"]=m}var v=function e(t){var n;if("%AsyncFunction%"===t)n=o("async function () {}");else if("%GeneratorFunction%"===t)n=o("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=o("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=d(i.prototype))}return g[t]=n,n},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n("./node_modules/function-bind/index.js"),b=n("./node_modules/has/src/index.js"),x=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),S=y.call(Function.call,String.prototype.replace),C=y.call(Function.call,String.prototype.slice),D=y.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,k=function(e,t){var n,r=e;if(b(_,r)&&(r="%"+(n=_[r])[0]+"%"),b(g,r)){var s=g[r];if(s===f&&(s=v(r)),"undefined"===typeof s&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:s}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===D(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=C(e,0,1),n=C(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(e,E,function(e,t,n,i){r[r.length]=n?S(i,A,"$1"):t||e}),r}(e),r=n.length>0?n[0]:"",s=k("%"+r+"%",t),o=s.name,u=s.value,c=!1,h=s.alias;h&&(r=h[0],w(n,x([0,1],h)));for(var d=1,f=!0;d<n.length;d+=1){var p=n[d],m=C(p,0,1),v=C(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(c=!0),b(g,o="%"+(r+="."+p)+"%"))u=g[o];else if(null!=u){if(!(p in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var _=l(u,p);u=(f=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:u[p]}else f=b(u,p),u=u[p];f&&!c&&(g[o]=u)}}return u}},"./node_modules/has-symbols/index.js":(e,t,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n("./node_modules/has-symbols/shams.js");e.exports=function(){return"function"===typeof r&&"function"===typeof Symbol&&"symbol"===typeof r("foo")&&"symbol"===typeof Symbol("bar")&&i()}},"./node_modules/has-symbols/shams.js":e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},"./node_modules/has/src/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/function-bind/index.js");e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},"./node_modules/lodash/lodash.js":function(e,t,n){var r;e=n.nmd(e),function(){var i,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,f=1/0,p=9007199254740991,g=NaN,m=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],_="[object Arguments]",y="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",C="[object GeneratorFunction]",D="[object Map]",E="[object Number]",A="[object Object]",k="[object Promise]",M="[object RegExp]",T="[object Set]",I="[object String]",O="[object Symbol]",L="[object WeakMap]",P="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),J=RegExp(K.source),$=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ie.source),ae=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",De="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="['\u2019]",Oe="["+Ce+"]",Le="["+Te+"]",Pe="["+De+"]",Be="\\d+",Ne="["+Ee+"]",Re="["+Ae+"]",Fe="[^"+Ce+Te+Be+Ee+Ae+ke+"]",ze="\\ud83c[\\udffb-\\udfff]",je="[^"+Ce+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+ke+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+Fe+")",We="(?:"+He+"|"+Fe+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Pe+"|"+ze+")?",Xe="["+Me+"]?",Je=Xe+Ke+"(?:"+Ge+"(?:"+[je,Ve,Ue].join("|")+")"+Xe+Ke+")*",$e="(?:"+[Ne,Ve,Ue].join("|")+")"+Je,Qe="(?:"+[je+Pe+"?",Pe,Ve,Ue,Oe].join("|")+")",et=RegExp(Ie,"g"),tt=RegExp(Pe,"g"),nt=RegExp(ze+"(?="+ze+")|"+Qe+Je,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Le,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Le,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,$e].join("|"),"g"),it=RegExp("["+Ge+Ce+De+Me+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[N]=lt[R]=lt[F]=lt[z]=lt[j]=lt[V]=lt[U]=lt[H]=lt[G]=!0,lt[_]=lt[y]=lt[P]=lt[b]=lt[B]=lt[x]=lt[w]=lt[S]=lt[D]=lt[E]=lt[A]=lt[M]=lt[T]=lt[I]=lt[L]=!1;var ut={};ut[_]=ut[y]=ut[P]=ut[B]=ut[b]=ut[x]=ut[N]=ut[R]=ut[F]=ut[z]=ut[j]=ut[D]=ut[E]=ut[A]=ut[M]=ut[T]=ut[I]=ut[O]=ut[V]=ut[U]=ut[H]=ut[G]=!0,ut[w]=ut[S]=ut[L]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||pt||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,_t=vt&&vt.exports===mt,yt=_t&&ft.process,bt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,St=bt&&bt.isMap,Ct=bt&&bt.isRegExp,Dt=bt&&bt.isSet,Et=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Lt(e,t){return!(null==e||!e.length)&&Ht(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=qt("length");function Vt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ut(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Ht(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function qt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Xt(e,t){for(var n,r=-1,s=e.length;++r<s;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $t(e){return e?e.slice(0,mn(e)+1).replace(ae,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return Bt(t,function(t){return e[t]})}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var sn=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ct[e]}function ln(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function cn(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[i++]=n)}return s}function dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function pn(e){return ln(e)?function(e){for(var t=nt.lastIndex=0;nt.test(e);)++t;return t}(e):jt(e)}function gn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var vn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),_n=function e(t){var n=(t=null==t?gt:_n.defaults(gt.Object(),t,_n.pick(gt,at))).Array,r=t.Date,oe=t.Error,Ce=t.Function,De=t.Math,Ee=t.Object,Ae=t.RegExp,ke=t.String,Me=t.TypeError,Te=n.prototype,Ie=Ce.prototype,Oe=Ee.prototype,Le=t["__core-js_shared__"],Pe=Ie.toString,Be=Oe.hasOwnProperty,Ne=0,Re=function(){var e=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Oe.toString,ze=Pe.call(Ee),je=gt._,Ve=Ae("^"+Pe.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=_t?t.Buffer:i,He=t.Symbol,Ge=t.Uint8Array,Ye=Ue?Ue.allocUnsafe:i,We=cn(Ee.getPrototypeOf,Ee),qe=Ee.create,Ze=Oe.propertyIsEnumerable,Ke=Te.splice,Xe=He?He.isConcatSpreadable:i,Je=He?He.iterator:i,$e=He?He.toStringTag:i,Qe=function(){try{var e=hs(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,ct=t.setTimeout!==gt.setTimeout&&t.setTimeout,ft=De.ceil,pt=De.floor,mt=Ee.getOwnPropertySymbols,vt=Ue?Ue.isBuffer:i,yt=t.isFinite,bt=Te.join,jt=cn(Ee.keys,Ee),Zt=De.max,yn=De.min,bn=r.now,xn=t.parseInt,wn=De.random,Sn=Te.reverse,Cn=hs(t,"DataView"),Dn=hs(t,"Map"),En=hs(t,"Promise"),An=hs(t,"Set"),kn=hs(t,"WeakMap"),Mn=hs(Ee,"create"),Tn=kn&&new kn,In={},On=Rs(Cn),Ln=Rs(Dn),Pn=Rs(En),Bn=Rs(An),Nn=Rs(kn),Rn=He?He.prototype:i,Fn=Rn?Rn.valueOf:i,zn=Rn?Rn.toString:i;function jn(e){if(eo(e)&&!Ha(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Be.call(e,"__wrapped__"))return Fs(e)}return new Hn(e)}var Vn=function(){function e(){}return function(t){if(!Qa(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Un(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Ha(e),r=!n&&Ua(e),i=!n&&!r&&qa(e),s=!n&&!r&&!i&&lo(e),a=n||r||i||s,o=a?Jt(e.length,ke):[],l=o.length;for(var u in e)!t&&!Be.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_s(u,l))||o.push(u);return o}function Jn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function $n(e,t){return Ps(Mi(e),or(t,0,e.length))}function Qn(e){return Ps(Mi(e))}function er(e,t,n){(n!==i&&!za(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function tr(e,t,n){var r=e[t];Be.call(e,t)&&za(r,n)&&(n!==i||t in e)||sr(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function rr(e,t,n,r){return dr(e,function(e,i,s){t(r,e,n(e),s)}),r}function ir(e,t){return e&&Ti(t,Io(t),e)}function sr(e,t,n){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,s=t.length,a=n(s),o=null==e;++r<s;)a[r]=o?i:Eo(e,t[r]);return a}function or(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,s,a){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=s?n(e,r,s,a):n(e)),o!==i)return o;if(!Qa(e))return e;var h=Ha(e);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Mi(e,o)}else{var d=ps(e),f=d==S||d==C;if(qa(e))return Si(e,l);if(d==A||d==_||f&&!s){if(o=u||f?{}:ms(e),!l)return u?function(e,t){return Ti(e,fs(e),t)}(e,function(e,t){return e&&Ti(t,Oo(t),e)}(o,e)):function(e,t){return Ti(e,ds(e),t)}(e,ir(o,e))}else{if(!ut[d])return s?e:{};o=function(e,t,n){var r,i=e.constructor;switch(t){case P:return Ci(e);case b:case x:return new i(+e);case B:return function(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case F:case z:case j:case V:case U:case H:case G:return Di(e,n);case D:return new i;case E:case I:return new i(e);case M:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new i;case O:return r=e,Fn?Ee(Fn.call(r)):{}}}(e,d,l)}}a||(a=new Kn);var p=a.get(e);if(p)return p;a.set(e,o),so(e)?e.forEach(function(r){o.add(lr(r,t,n,r,e,a))}):to(e)&&e.forEach(function(r,i){o.set(i,lr(r,t,n,i,e,a))});var g=h?i:(c?u?is:rs:u?Oo:Io)(e);return Mt(g||e,function(r,i){g&&(r=e[i=r]),tr(o,i,lr(r,t,n,i,e,a))}),o}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var s=n[r],a=t[s],o=e[s];if(o===i&&!(s in e)||!a(o))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Me(s);return Ts(function(){e.apply(i,n)},t)}function hr(e,t,n,r){var i=-1,s=Lt,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;n&&(t=Bt(t,Qt(n))),r?(s=Pt,a=!1):t.length>=200&&(s=tn,a=!1,t=new Zn(t));e:for(;++i<o;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else s(t,h,r)||l.push(c)}return l}jn.templateSettings={escape:$,evaluate:Q,interpolate:ee,variable:"",imports:{_:jn}},jn.prototype=Un.prototype,jn.prototype.constructor=jn,Hn.prototype=Vn(Un.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Vn(Un.prototype),Gn.prototype.constructor=Gn,Yn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Mn){var n=t[e];return n===a?i:n}return Be.call(t,e)?t[e]:i},Yn.prototype.has=function(e){var t=this.__data__;return Mn?t[e]!==i:Be.call(t,e)},Yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mn&&t===i?a:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Dn||Wn),string:new Yn}},qn.prototype.delete=function(e){var t=us(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return us(this,e).get(e)},qn.prototype.has=function(e){return us(this,e).has(e)},qn.prototype.set=function(e,t){var n=us(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,a),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var dr=Li(br),fr=Li(xr,!0);function pr(e,t){var n=!0;return dr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function gr(e,t,n){for(var r=-1,s=e.length;++r<s;){var a=e[r],o=t(a);if(null!=o&&(l===i?o===o&&!oo(o):n(o,l)))var l=o,u=a}return u}function mr(e,t){var n=[];return dr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function vr(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=vs),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?vr(o,t-1,n,r,i):Nt(i,o):r||(i[i.length]=o)}return i}var _r=Pi(),yr=Pi(!0);function br(e,t){return e&&_r(e,t,Io)}function xr(e,t){return e&&yr(e,t,Io)}function wr(e,t){return Ot(t,function(t){return Xa(e[t])})}function Sr(e,t){for(var n=0,r=(t=yi(t,e)).length;null!=e&&n<r;)e=e[Ns(t[n++])];return n&&n==r?e:i}function Cr(e,t,n){var r=t(e);return Ha(e)?r:Nt(r,n(e))}function Dr(e){return null==e?e===i?"[object Undefined]":"[object Null]":$e&&$e in Ee(e)?function(e){var t=Be.call(e,$e),n=e[$e];try{e[$e]=i;var r=!0}catch(a){}var s=Fe.call(e);return r&&(t?e[$e]=n:delete e[$e]),s}(e):function(e){return Fe.call(e)}(e)}function Er(e,t){return e>t}function Ar(e,t){return null!=e&&Be.call(e,t)}function kr(e,t){return null!=e&&t in Ee(e)}function Mr(e,t,r){for(var s=r?Pt:Lt,a=e[0].length,o=e.length,l=o,u=n(o),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Bt(d,Qt(t))),c=yn(d.length,c),u[l]=!r&&(t||a>=120&&d.length>=120)?new Zn(l&&d):i}d=e[0];var f=-1,p=u[0];e:for(;++f<a&&h.length<c;){var g=d[f],m=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,m):s(h,m,r))){for(l=o;--l;){var v=u[l];if(!(v?tn(v,m):s(e[l],m,r)))continue e}p&&p.push(m),h.push(g)}}return h}function Tr(e,t,n){var r=null==(e=As(e,t=yi(t,e)))?e:e[Ns(Ks(t))];return null==r?i:At(r,e,n)}function Ir(e){return eo(e)&&Dr(e)==_}function Or(e,t,n,r,s){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:function(e,t,n,r,s,a){var o=Ha(e),l=Ha(t),u=o?y:ps(e),c=l?y:ps(t),h=(u=u==_?A:u)==A,d=(c=c==_?A:c)==A,f=u==c;if(f&&qa(e)){if(!qa(t))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new Kn),o||lo(e)?ts(e,t,n,r,s,a):function(e,t,n,r,i,s,a){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new Ge(e),new Ge(t)));case b:case x:case E:return za(+e,+t);case w:return e.name==t.name&&e.message==t.message;case M:case I:return e==t+"";case D:var o=un;case T:var l=1&r;if(o||(o=dn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=ts(o(e),o(t),r,i,s,a);return a.delete(e),c;case O:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,r,s,a);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=d&&Be.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,v=g?t.value():t;return a||(a=new Kn),s(m,v,n,r,a)}}return!!f&&(a||(a=new Kn),function(e,t,n,r,s,a){var o=1&n,l=rs(e),u=l.length,c=rs(t),h=c.length;if(u!=h&&!o)return!1;for(var d=u;d--;){var f=l[d];if(!(o?f in t:Be.call(t,f)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=o;++d<u;){var _=e[f=l[d]],y=t[f];if(r)var b=o?r(y,_,f,t,e,a):r(_,y,f,e,t,a);if(!(b===i?_===y||s(_,y,n,r,a):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,r,s,a))}(e,t,n,r,Or,s))}function Lr(e,t,n,r){var s=n.length,a=s,o=!r;if(null==e)return!a;for(e=Ee(e);s--;){var l=n[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var u=(l=n[s])[0],c=e[u],h=l[1];if(o&&l[2]){if(c===i&&!(u in e))return!1}else{var d=new Kn;if(r)var f=r(c,h,u,e,t,d);if(!(f===i?Or(h,c,3,r,d):f))return!1}}return!0}function Pr(e){return!(!Qa(e)||(t=e,Re&&Re in t))&&(Xa(e)?Ve:_e).test(Rs(e));var t}function Br(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ha(e)?Vr(e[0],e[1]):jr(e):dl(e)}function Nr(e){if(!Ss(e))return jt(e);var t=[];for(var n in Ee(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rr(e){if(!Qa(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=Ss(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function zr(e,t){var r=-1,i=Ya(e)?n(e.length):[];return dr(e,function(e,n,s){i[++r]=t(e,n,s)}),i}function jr(e){var t=cs(e);return 1==t.length&&t[0][2]?Ds(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function Vr(e,t){return bs(e)&&Cs(t)?Ds(Ns(e),t):function(n){var r=Eo(n,e);return r===i&&r===t?Ao(n,e):Or(t,r,3)}}function Ur(e,t,n,r,s){e!==t&&_r(t,function(a,o){if(s||(s=new Kn),Qa(a))!function(e,t,n,r,s,a,o){var l=ks(e,n),u=ks(t,n),c=o.get(u);if(c)er(e,n,c);else{var h=a?a(l,u,n+"",e,t,o):i,d=h===i;if(d){var f=Ha(u),p=!f&&qa(u),g=!f&&!p&&lo(u);h=u,f||p||g?Ha(l)?h=l:Wa(l)?h=Mi(l):p?(d=!1,h=Si(u,!0)):g?(d=!1,h=Di(u,!0)):h=[]:ro(u)||Ua(u)?(h=l,Ua(l)?h=vo(l):Qa(l)&&!Xa(l)||(h=ms(u))):d=!1}d&&(o.set(u,h),s(h,u,r,a,o),o.delete(u)),er(e,n,h)}}(e,t,o,n,Ur,r,s);else{var l=r?r(ks(e,o),a,o+"",e,t,s):i;l===i&&(l=a),er(e,o,l)}},Oo)}function Hr(e,t){var n=e.length;if(n)return _s(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Bt(t,function(e){return Ha(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e}):[rl];var r=-1;t=Bt(t,Qt(ls()));var i=zr(e,function(e,n,i){var s=Bt(t,function(t){return t(e)});return{criteria:s,index:++r,value:e}});return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,o=n.length;++r<a;){var l=Ei(i[r],s[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Yr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=Sr(e,a);n(o,a)&&Qr(s,yi(a,e),o)}return s}function Wr(e,t,n,r){var i=r?Gt:Ht,s=-1,a=t.length,o=e;for(e===t&&(t=Mi(t)),n&&(o=Bt(e,Qt(n)));++s<a;)for(var l=0,u=t[s],c=n?n(u):u;(l=i(o,c,l,r))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;_s(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+pt(wn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Is(Es(e,t,rl),e+"")}function Jr(e){return Jn(jo(e))}function $r(e,t){var n=jo(e);return Ps(n,or(t,0,n.length))}function Qr(e,t,n,r){if(!Qa(e))return e;for(var s=-1,a=(t=yi(t,e)).length,o=a-1,l=e;null!=l&&++s<a;){var u=Ns(t[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(s!=o){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=Qa(h)?h:_s(t[s+1])?[]:{})}tr(l,u,c),l=l[u]}return e}var ei=Tn?function(e,t){return Tn.set(e,t),e}:rl,ti=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Ps(jo(e))}function ri(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=n(s);++i<s;)a[i]=e[i+t];return a}function ii(e,t){var n;return dr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,a=e[s];null!==a&&!oo(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return ai(e,t,rl,n)}function ai(e,t,n,r){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=n(t))!==t,l=null===t,u=oo(t),c=t===i;s<a;){var h=pt((s+a)/2),d=n(e[h]),f=d!==i,p=null===d,g=d===d,m=oo(d);if(o)var v=r||g;else v=c?g&&(r||f):l?g&&f&&(r||!p):u?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?s=h+1:a=h}return yn(a,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],o=t?t(a):a;if(!n||!za(o,l)){var l=o;s[i++]=0===a?0:a}}return s}function li(e){return"number"==typeof e?e:oo(e)?g:+e}function ui(e){if("string"==typeof e)return e;if(Ha(e))return Bt(e,ui)+"";if(oo(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ci(e,t,n){var r=-1,i=Lt,s=e.length,a=!0,o=[],l=o;if(n)a=!1,i=Pt;else if(s>=200){var u=t?null:Ki(e);if(u)return dn(u);a=!1,i=tn,l=new Zn}else l=t?[]:o;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(c)}else i(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function hi(e,t){return null==(e=As(e,t=yi(t,e)))||delete e[Ns(Ks(t))]}function di(e,t,n,r){return Qr(e,t,n(Sr(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ri(e,r?0:s,r?s+1:i):ri(e,r?s+1:0,r?i:s)}function pi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Rt(t,function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))},n)}function gi(e,t,r){var i=e.length;if(i<2)return i?ci(e[0]):[];for(var s=-1,a=n(i);++s<i;)for(var o=e[s],l=-1;++l<i;)l!=s&&(a[s]=hr(a[s]||o,e[l],t,r));return ci(vr(a,1),t,r)}function mi(e,t,n){for(var r=-1,s=e.length,a=t.length,o={};++r<s;){var l=r<a?t[r]:i;n(o,e[r],l)}return o}function vi(e){return Wa(e)?e:[]}function _i(e){return"function"==typeof e?e:rl}function yi(e,t){return Ha(e)?e:bs(e,t)?[e]:Bs(_o(e))}var bi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return gt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var n=e.length,r=Ye?Ye(n):new e.constructor(n);return e.copy(r),r}function Ci(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Di(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==i,r=null===e,s=e===e,a=oo(e),o=t!==i,l=null===t,u=t===t,c=oo(t);if(!l&&!c&&!a&&e>t||a&&o&&u&&!l&&!c||r&&o&&u||!n&&u||!s)return 1;if(!r&&!a&&!c&&e<t||c&&n&&s&&!r&&!a||l&&n&&s||!o&&s||!u)return-1}return 0}function Ai(e,t,r,i){for(var s=-1,a=e.length,o=r.length,l=-1,u=t.length,c=Zt(a-o,0),h=n(u+c),d=!i;++l<u;)h[l]=t[l];for(;++s<o;)(d||s<a)&&(h[r[s]]=e[s]);for(;c--;)h[l++]=e[s++];return h}function ki(e,t,r,i){for(var s=-1,a=e.length,o=-1,l=r.length,u=-1,c=t.length,h=Zt(a-l,0),d=n(h+c),f=!i;++s<h;)d[s]=e[s];for(var p=s;++u<c;)d[p+u]=t[u];for(;++o<l;)(f||s<a)&&(d[p+r[o]]=e[s++]);return d}function Mi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ti(e,t,n,r){var s=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var l=t[a],u=r?r(n[l],e[l],l,n,e):i;u===i&&(u=e[l]),s?sr(n,l,u):tr(n,l,u)}return n}function Ii(e,t){return function(n,r){var i=Ha(n)?kt:rr,s=t?t():{};return i(n,e,ls(r,2),s)}}function Oi(e){return Xr(function(t,n){var r=-1,s=n.length,a=s>1?n[s-1]:i,o=s>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(s--,a):i,o&&ys(n[0],n[1],o)&&(a=s<3?i:a,s=1),t=Ee(t);++r<s;){var l=n[r];l&&e(t,l,r,a)}return t})}function Li(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Ee(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}function Pi(e){return function(t,n,r){for(var i=-1,s=Ee(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function Bi(e){return function(t){var n=ln(t=_o(t))?gn(t):i,r=n?n[0]:t.charAt(0),s=n?xi(n,1).join(""):t.slice(1);return r[e]()+s}}function Ni(e){return function(t){return Rt(Jo(Ho(t).replace(et,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return Qa(r)?r:n}}function Fi(e){return function(t,n,r){var s=Ee(t);if(!Ya(t)){var a=ls(n,3);t=Io(t),n=function(e){return a(s[e],e,s)}}var o=e(t,n,r);return o>-1?s[a?t[o]:o]:i}}function zi(e){return ns(function(t){var n=t.length,r=n,a=Hn.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Me(s);if(a&&!l&&"wrapper"==as(o))var l=new Hn([],!0)}for(r=l?r:n;++r<n;){var u=as(o=t[r]),c="wrapper"==u?ss(o):i;l=c&&xs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[as(c[0])].apply(l,c[3]):1==o.length&&xs(o)?l[u]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ha(r))return l.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}})}function ji(e,t,r,s,a,o,l,u,c,d){var f=t&h,p=1&t,g=2&t,m=24&t,v=512&t,_=g?i:Ri(e);return function h(){for(var y=arguments.length,b=n(y),x=y;x--;)b[x]=arguments[x];if(m)var w=os(h),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(s&&(b=Ai(b,s,a,m)),o&&(b=ki(b,o,l,m)),y-=S,m&&y<d){var C=hn(b,w);return qi(e,t,ji,h.placeholder,r,b,C,u,c,d-y)}var D=p?r:this,E=g?D[e]:e;return y=b.length,u?b=function(e,t){for(var n=e.length,r=yn(t.length,n),s=Mi(e);r--;){var a=t[r];e[r]=_s(a,n)?s[a]:i}return e}(b,u):v&&y>1&&b.reverse(),f&&c<y&&(b.length=c),this&&this!==gt&&this instanceof h&&(E=_||Ri(E)),E.apply(D,b)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return br(e,function(e,i,s){t(r,n(e),i,s)}),r}(n,e,t(r),{})}}function Ui(e,t){return function(n,r){var s;if(n===i&&r===i)return t;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=li(n),r=li(r)),s=e(n,r)}return s}}function Hi(e){return ns(function(t){return t=Bt(t,Qt(ls())),Xr(function(n){var r=this;return e(t,function(e){return At(e,r,n)})})})}function Gi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,ft(e/pn(t)));return ln(t)?xi(gn(r),0,e).join(""):r.slice(0,e)}function Yi(e){return function(t,r,s){return s&&"number"!=typeof s&&ys(t,r,s)&&(r=s=i),t=fo(t),r===i?(r=t,t=0):r=fo(r),function(e,t,r,i){for(var s=-1,a=Zt(ft((t-e)/(r||1)),0),o=n(a);a--;)o[i?a:++s]=e,e+=r;return o}(t,r,s=s===i?t<r?1:-1:fo(s),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=mo(t),n=mo(n)),e(t,n)}}function qi(e,t,n,r,s,a,o,l,h,d){var f=8&t;t|=f?u:c,4&(t&=~(f?c:u))||(t&=-4);var p=[e,t,s,f?a:i,f?o:i,f?i:a,f?i:o,l,h,d],g=n.apply(i,p);return xs(e)&&Ms(g,p),g.placeholder=r,Os(g,e,t)}function Zi(e){var t=De[e];return function(e,n){if(e=mo(e),(n=null==n?0:yn(po(n),292))&&yt(e)){var r=(_o(e)+"e").split("e");return+((r=(_o(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=An&&1/dn(new An([,-0]))[1]==f?function(e){return new An(e)}:ll;function Xi(e){return function(t){var n=ps(t);return n==D?un(t):n==T?fn(t):function(e,t){return Bt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ji(e,t,r,a,f,p,g,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Me(s);var _=a?a.length:0;if(_||(t&=-97,a=f=i),g=g===i?g:Zt(po(g),0),m=m===i?m:po(m),_-=f?f.length:0,t&c){var y=a,b=f;a=f=i}var x=v?i:ss(e),w=[e,t,r,a,f,y,b,p,g,m];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Ai(u,l,t[4]):l,e[4]=u?hn(e[3],o):t[4]}(l=t[5])&&(u=e[5],e[5]=u?ki(u,l,t[6]):l,e[6]=u?hn(e[5],o):t[6]),(l=t[7])&&(e[7]=l),r&h&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],a=w[3],f=w[4],!(m=w[9]=w[9]===i?v?0:e.length:Zt(w[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==l?function(e,t,r){var s=Ri(e);return function a(){for(var o=arguments.length,l=n(o),u=o,c=os(a);u--;)l[u]=arguments[u];var h=o<3&&l[0]!==c&&l[o-1]!==c?[]:hn(l,c);return(o-=h.length)<r?qi(e,t,ji,a.placeholder,i,l,h,i,i,r-o):At(this&&this!==gt&&this instanceof a?s:e,this,l)}}(e,t,m):t!=u&&33!=t||f.length?ji.apply(i,w):function(e,t,r,i){var s=1&t,a=Ri(e);return function t(){for(var o=-1,l=arguments.length,u=-1,c=i.length,h=n(c+l),d=this&&this!==gt&&this instanceof t?a:e;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++o];return At(d,s?r:this,h)}}(e,t,r,a);else var S=function(e,t,n){var r=1&t,i=Ri(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Os((x?ei:Ms)(S,w),e,t)}function $i(e,t,n,r){return e===i||za(e,Oe[n])&&!Be.call(r,n)?t:e}function Qi(e,t,n,r,s,a){return Qa(e)&&Qa(t)&&(a.set(t,e),Ur(e,t,i,Qi,a),a.delete(t)),e}function es(e){return ro(e)?i:e}function ts(e,t,n,r,s,a){var o=1&n,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var d=-1,f=!0,p=2&n?new Zn:i;for(a.set(e,t),a.set(t,e);++d<l;){var g=e[d],m=t[d];if(r)var v=o?r(m,g,d,t,e,a):r(g,m,d,e,t,a);if(v!==i){if(v)continue;f=!1;break}if(p){if(!zt(t,function(e,t){if(!tn(p,t)&&(g===e||s(g,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(g!==m&&!s(g,m,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ns(e){return Is(Es(e,i,Gs),e+"")}function rs(e){return Cr(e,Io,ds)}function is(e){return Cr(e,Oo,fs)}var ss=Tn?function(e){return Tn.get(e)}:ll;function as(e){for(var t=e.name+"",n=In[t],r=Be.call(In,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function os(e){return(Be.call(jn,"placeholder")?jn:e).placeholder}function ls(){var e=jn.iteratee||il;return e=e===il?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function us(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function cs(e){for(var t=Io(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Cs(i)]}return t}function hs(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Pr(n)?n:i}var ds=mt?function(e){return null==e?[]:(e=Ee(e),Ot(mt(e),function(t){return Ze.call(e,t)}))}:gl,fs=mt?function(e){for(var t=[];e;)Nt(t,ds(e)),e=We(e);return t}:gl,ps=Dr;function gs(e,t,n){for(var r=-1,i=(t=yi(t,e)).length,s=!1;++r<i;){var a=Ns(t[r]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&$a(i)&&_s(a,i)&&(Ha(e)||Ua(e))}function ms(e){return"function"!=typeof e.constructor||Ss(e)?{}:Vn(We(e))}function vs(e){return Ha(e)||Ua(e)||!!(Xe&&e&&e[Xe])}function _s(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function ys(e,t,n){if(!Qa(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&_s(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function bs(e,t){if(Ha(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oo(e))||ne.test(e)||!te.test(e)||null!=t&&e in Ee(t)}function xs(e){var t=as(e),n=jn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=ss(n);return!!r&&e===r[0]}(Cn&&ps(new Cn(new ArrayBuffer(1)))!=B||Dn&&ps(new Dn)!=D||En&&ps(En.resolve())!=k||An&&ps(new An)!=T||kn&&ps(new kn)!=L)&&(ps=function(e){var t=Dr(e),n=t==A?e.constructor:i,r=n?Rs(n):"";if(r)switch(r){case On:return B;case Ln:return D;case Pn:return k;case Bn:return T;case Nn:return L}return t});var ws=Le?Xa:ml;function Ss(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Cs(e){return e===e&&!Qa(e)}function Ds(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Ee(n))}}function Es(e,t,r){return t=Zt(t===i?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=Zt(i.length-t,0),o=n(a);++s<a;)o[s]=i[t+s];s=-1;for(var l=n(t+1);++s<t;)l[s]=i[s];return l[t]=r(o),At(e,this,l)}}function As(e,t){return t.length<2?e:Sr(e,ri(t,0,-1))}function ks(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ms=Ls(ei),Ts=ct||function(e,t){return gt.setTimeout(e,t)},Is=Ls(ti);function Os(e,t,n){var r=t+"";return Is(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Mt(v,function(n){var r="_."+n[0];t&n[1]&&!Lt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Ls(e){var t=0,n=0;return function(){var r=bn(),s=16-(r-n);if(n=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ps(e,t){var n=-1,r=e.length,s=r-1;for(t=t===i?r:t;++n<t;){var a=Zr(n,s),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}var Bs=function(e){var t=La(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)}),t});function Ns(e){if("string"==typeof e||oo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Rs(e){if(null!=e){try{return Pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zs=Xr(function(e,t){return Wa(e)?hr(e,vr(t,1,Wa,!0)):[]}),js=Xr(function(e,t){var n=Ks(t);return Wa(n)&&(n=i),Wa(e)?hr(e,vr(t,1,Wa,!0),ls(n,2)):[]}),Vs=Xr(function(e,t){var n=Ks(t);return Wa(n)&&(n=i),Wa(e)?hr(e,vr(t,1,Wa,!0),i,n):[]});function Us(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=Zt(r+i,0)),Ut(e,ls(t,3),i)}function Hs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r-1;return n!==i&&(s=po(n),s=n<0?Zt(r+s,0):yn(s,r-1)),Ut(e,ls(t,3),s,!0)}function Gs(e){return null!=e&&e.length?vr(e,1):[]}function Ys(e){return e&&e.length?e[0]:i}var Ws=Xr(function(e){var t=Bt(e,vi);return t.length&&t[0]===e[0]?Mr(t):[]}),qs=Xr(function(e){var t=Ks(e),n=Bt(e,vi);return t===Ks(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Mr(n,ls(t,2)):[]}),Zs=Xr(function(e){var t=Ks(e),n=Bt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Mr(n,i,t):[]});function Ks(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xs=Xr(Js);function Js(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var $s=ns(function(e,t){var n=null==e?0:e.length,r=ar(e,t);return qr(e,Bt(t,function(e){return _s(e,n)?+e:e}).sort(Ei)),r});function Qs(e){return null==e?e:Sn.call(e)}var ea=Xr(function(e){return ci(vr(e,1,Wa,!0))}),ta=Xr(function(e){var t=Ks(e);return Wa(t)&&(t=i),ci(vr(e,1,Wa,!0),ls(t,2))}),na=Xr(function(e){var t=Ks(e);return t="function"==typeof t?t:i,ci(vr(e,1,Wa,!0),i,t)});function ra(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,function(e){if(Wa(e))return t=Zt(e.length,t),!0}),Jt(t,function(t){return Bt(e,qt(t))})}function ia(e,t){if(!e||!e.length)return[];var n=ra(e);return null==t?n:Bt(n,function(e){return At(t,i,e)})}var sa=Xr(function(e,t){return Wa(e)?hr(e,t):[]}),aa=Xr(function(e){return gi(Ot(e,Wa))}),oa=Xr(function(e){var t=Ks(e);return Wa(t)&&(t=i),gi(Ot(e,Wa),ls(t,2))}),la=Xr(function(e){var t=Ks(e);return t="function"==typeof t?t:i,gi(Ot(e,Wa),i,t)}),ua=Xr(ra),ca=Xr(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ia(e,n)});function ha(e){var t=jn(e);return t.__chain__=!0,t}function da(e,t){return t(e)}var fa=ns(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,s=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&_s(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:da,args:[s],thisArg:i}),new Hn(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(s)}),pa=Ii(function(e,t,n){Be.call(e,n)?++e[n]:sr(e,n,1)}),ga=Fi(Us),ma=Fi(Hs);function va(e,t){return(Ha(e)?Mt:dr)(e,ls(t,3))}function _a(e,t){return(Ha(e)?Tt:fr)(e,ls(t,3))}var ya=Ii(function(e,t,n){Be.call(e,n)?e[n].push(t):sr(e,n,[t])}),ba=Xr(function(e,t,r){var i=-1,s="function"==typeof t,a=Ya(e)?n(e.length):[];return dr(e,function(e){a[++i]=s?At(t,e,r):Tr(e,t,r)}),a}),xa=Ii(function(e,t,n){sr(e,n,t)});function wa(e,t){return(Ha(e)?Bt:zr)(e,ls(t,3))}var Sa=Ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ca=Xr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ys(e,t[0],t[1])?t=[]:n>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,vr(t,1),[])}),Da=it||function(){return gt.Date.now()};function Ea(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Me(s);return e=po(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var ka=Xr(function(e,t,n){var r=1;if(n.length){var i=hn(n,os(ka));r|=u}return Ji(e,r,t,n,i)}),Ma=Xr(function(e,t,n){var r=3;if(n.length){var i=hn(n,os(Ma));r|=u}return Ji(t,r,e,n,i)});function Ta(e,t,n){var r,a,o,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Me(s);function g(t){var n=r,s=a;return r=a=i,h=t,l=e.apply(s,n)}function m(e){var n=e-c;return c===i||n>=t||n<0||f&&e-h>=o}function v(){var e=Da();if(m(e))return _(e);u=Ts(v,function(e){var n=t-(e-c);return f?yn(n,o-(e-h)):n}(e))}function _(e){return u=i,p&&r?g(e):(r=a=i,l)}function y(){var e=Da(),n=m(e);if(r=arguments,a=this,c=e,n){if(u===i)return function(e){return h=e,u=Ts(v,t),d?g(e):l}(c);if(f)return wi(u),u=Ts(v,t),g(c)}return u===i&&(u=Ts(v,t)),l}return t=mo(t)||0,Qa(n)&&(d=!!n.leading,o=(f="maxWait"in n)?Zt(mo(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){u!==i&&wi(u),h=0,r=c=a=u=i},y.flush=function(){return u===i?l:_(Da())},y}var Ia=Xr(function(e,t){return cr(e,1,t)}),Oa=Xr(function(e,t,n){return cr(e,mo(t)||0,n)});function La(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(La.Cache||qn),n}function Pa(e){if("function"!=typeof e)throw new Me(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}La.Cache=qn;var Ba=bi(function(e,t){var n=(t=1==t.length&&Ha(t[0])?Bt(t[0],Qt(ls())):Bt(vr(t,1),Qt(ls()))).length;return Xr(function(r){for(var i=-1,s=yn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return At(e,this,r)})}),Na=Xr(function(e,t){var n=hn(t,os(Na));return Ji(e,u,i,t,n)}),Ra=Xr(function(e,t){var n=hn(t,os(Ra));return Ji(e,c,i,t,n)}),Fa=ns(function(e,t){return Ji(e,d,i,i,i,t)});function za(e,t){return e===t||e!==e&&t!==t}var ja=Wi(Er),Va=Wi(function(e,t){return e>=t}),Ua=Ir(function(){return arguments}())?Ir:function(e){return eo(e)&&Be.call(e,"callee")&&!Ze.call(e,"callee")},Ha=n.isArray,Ga=xt?Qt(xt):function(e){return eo(e)&&Dr(e)==P};function Ya(e){return null!=e&&$a(e.length)&&!Xa(e)}function Wa(e){return eo(e)&&Ya(e)}var qa=vt||ml,Za=wt?Qt(wt):function(e){return eo(e)&&Dr(e)==x};function Ka(e){if(!eo(e))return!1;var t=Dr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ro(e)}function Xa(e){if(!Qa(e))return!1;var t=Dr(e);return t==S||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ja(e){return"number"==typeof e&&e==po(e)}function $a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function Qa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}var to=St?Qt(St):function(e){return eo(e)&&ps(e)==D};function no(e){return"number"==typeof e||eo(e)&&Dr(e)==E}function ro(e){if(!eo(e)||Dr(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==ze}var io=Ct?Qt(Ct):function(e){return eo(e)&&Dr(e)==M},so=Dt?Qt(Dt):function(e){return eo(e)&&ps(e)==T};function ao(e){return"string"==typeof e||!Ha(e)&&eo(e)&&Dr(e)==I}function oo(e){return"symbol"==typeof e||eo(e)&&Dr(e)==O}var lo=Et?Qt(Et):function(e){return eo(e)&&$a(e.length)&&!!lt[Dr(e)]},uo=Wi(Fr),co=Wi(function(e,t){return e<=t});function ho(e){if(!e)return[];if(Ya(e))return ao(e)?gn(e):Mi(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=ps(e);return(t==D?un:t==T?dn:jo)(e)}function fo(e){return e?(e=mo(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function po(e){var t=fo(e),n=t%1;return t===t?n?t-n:t:0}function go(e){return e?or(po(e),0,m):0}function mo(e){if("number"==typeof e)return e;if(oo(e))return g;if(Qa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ve.test(e);return n||ye.test(e)?dt(e.slice(2),n?2:8):me.test(e)?g:+e}function vo(e){return Ti(e,Oo(e))}function _o(e){return null==e?"":ui(e)}var yo=Oi(function(e,t){if(Ss(t)||Ya(t))Ti(t,Io(t),e);else for(var n in t)Be.call(t,n)&&tr(e,n,t[n])}),bo=Oi(function(e,t){Ti(t,Oo(t),e)}),xo=Oi(function(e,t,n,r){Ti(t,Oo(t),e,r)}),wo=Oi(function(e,t,n,r){Ti(t,Io(t),e,r)}),So=ns(ar),Co=Xr(function(e,t){e=Ee(e);var n=-1,r=t.length,s=r>2?t[2]:i;for(s&&ys(t[0],t[1],s)&&(r=1);++n<r;)for(var a=t[n],o=Oo(a),l=-1,u=o.length;++l<u;){var c=o[l],h=e[c];(h===i||za(h,Oe[c])&&!Be.call(e,c))&&(e[c]=a[c])}return e}),Do=Xr(function(e){return e.push(i,Qi),At(Po,i,e)});function Eo(e,t,n){var r=null==e?i:Sr(e,t);return r===i?n:r}function Ao(e,t){return null!=e&&gs(e,t,kr)}var ko=Vi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n},el(rl)),Mo=Vi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]},ls),To=Xr(Tr);function Io(e){return Ya(e)?Xn(e):Nr(e)}function Oo(e){return Ya(e)?Xn(e,!0):Rr(e)}var Lo=Oi(function(e,t,n){Ur(e,t,n)}),Po=Oi(function(e,t,n,r){Ur(e,t,n,r)}),Bo=ns(function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,function(t){return t=yi(t,e),r||(r=t.length>1),t}),Ti(e,is(e),n),r&&(n=lr(n,7,es));for(var i=t.length;i--;)hi(n,t[i]);return n}),No=ns(function(e,t){return null==e?{}:function(e,t){return Yr(e,t,function(t,n){return Ao(e,n)})}(e,t)});function Ro(e,t){if(null==e)return{};var n=Bt(is(e),function(e){return[e]});return t=ls(t),Yr(e,n,function(e,n){return t(e,n[0])})}var Fo=Xi(Io),zo=Xi(Oo);function jo(e){return null==e?[]:en(e,Io(e))}var Vo=Ni(function(e,t,n){return t=t.toLowerCase(),e+(n?Uo(t):t)});function Uo(e){return Xo(_o(e).toLowerCase())}function Ho(e){return(e=_o(e))&&e.replace(xe,sn).replace(tt,"")}var Go=Ni(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yo=Ni(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wo=Bi("toLowerCase"),qo=Ni(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Zo=Ni(function(e,t,n){return e+(n?" ":"")+Xo(t)}),Ko=Ni(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Xo=Bi("toUpperCase");function Jo(e,t,n){return e=_o(e),(t=n?i:t)===i?function(e){return st.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var $o=Xr(function(e,t){try{return At(e,i,t)}catch(n){return Ka(n)?n:new oe(n)}}),Qo=ns(function(e,t){return Mt(t,function(t){t=Ns(t),sr(e,t,ka(e[t],e))}),e});function el(e){return function(){return e}}var tl=zi(),nl=zi(!0);function rl(e){return e}function il(e){return Br("function"==typeof e?e:lr(e,1))}var sl=Xr(function(e,t){return function(n){return Tr(n,e,t)}}),al=Xr(function(e,t){return function(n){return Tr(e,n,t)}});function ol(e,t,n){var r=Io(t),i=wr(t,r);null!=n||Qa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Io(t)));var s=!(Qa(n)&&"chain"in n)||!!n.chain,a=Xa(e);return Mt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Mi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})}),e}function ll(){}var ul=Hi(Bt),cl=Hi(It),hl=Hi(zt);function dl(e){return bs(e)?qt(Ns(e)):function(e){return function(t){return Sr(t,e)}}(e)}var fl=Yi(),pl=Yi(!0);function gl(){return[]}function ml(){return!1}var vl=Ui(function(e,t){return e+t},0),_l=Zi("ceil"),yl=Ui(function(e,t){return e/t},1),bl=Zi("floor"),xl=Ui(function(e,t){return e*t},1),wl=Zi("round"),Sl=Ui(function(e,t){return e-t},0);return jn.after=function(e,t){if("function"!=typeof t)throw new Me(s);return e=po(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Ea,jn.assign=yo,jn.assignIn=bo,jn.assignInWith=xo,jn.assignWith=wo,jn.at=So,jn.before=Aa,jn.bind=ka,jn.bindAll=Qo,jn.bindKey=Ma,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ha(e)?e:[e]},jn.chain=ha,jn.chunk=function(e,t,r){t=(r?ys(e,t,r):t===i)?1:Zt(po(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var a=0,o=0,l=n(ft(s/t));a<s;)l[o++]=ri(e,a,a+=t);return l},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Ha(r)?Mi(r):[r],vr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=ls();return e=t?Bt(e,function(e){if("function"!=typeof e[1])throw new Me(s);return[n(e[0]),e[1]]}):[],Xr(function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}})},jn.conforms=function(e){return function(e){var t=Io(e);return function(n){return ur(n,e,t)}}(lr(e,1))},jn.constant=el,jn.countBy=pa,jn.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},jn.curry=function e(t,n,r){var s=Ji(t,8,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},jn.curryRight=function e(t,n,r){var s=Ji(t,l,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},jn.debounce=Ta,jn.defaults=Co,jn.defaultsDeep=Do,jn.defer=Ia,jn.delay=Oa,jn.difference=zs,jn.differenceBy=js,jn.differenceWith=Vs,jn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:po(t))<0?0:t,r):[]},jn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:po(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0):[]},jn.fill=function(e,t,n,r){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&ys(e,t,n)&&(n=0,r=s),function(e,t,n,r){var s=e.length;for((n=po(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:po(r))<0&&(r+=s),r=n>r?0:go(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},jn.filter=function(e,t){return(Ha(e)?Ot:mr)(e,ls(t,3))},jn.flatMap=function(e,t){return vr(wa(e,t),1)},jn.flatMapDeep=function(e,t){return vr(wa(e,t),f)},jn.flatMapDepth=function(e,t,n){return n=n===i?1:po(n),vr(wa(e,t),n)},jn.flatten=Gs,jn.flattenDeep=function(e){return null!=e&&e.length?vr(e,f):[]},jn.flattenDepth=function(e,t){return null!=e&&e.length?vr(e,t=t===i?1:po(t)):[]},jn.flip=function(e){return Ji(e,512)},jn.flow=tl,jn.flowRight=nl,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:wr(e,Io(e))},jn.functionsIn=function(e){return null==e?[]:wr(e,Oo(e))},jn.groupBy=ya,jn.initial=function(e){return null!=e&&e.length?ri(e,0,-1):[]},jn.intersection=Ws,jn.intersectionBy=qs,jn.intersectionWith=Zs,jn.invert=ko,jn.invertBy=Mo,jn.invokeMap=ba,jn.iteratee=il,jn.keyBy=xa,jn.keys=Io,jn.keysIn=Oo,jn.map=wa,jn.mapKeys=function(e,t){var n={};return t=ls(t,3),br(e,function(e,r,i){sr(n,t(e,r,i),e)}),n},jn.mapValues=function(e,t){var n={};return t=ls(t,3),br(e,function(e,r,i){sr(n,r,t(e,r,i))}),n},jn.matches=function(e){return jr(lr(e,1))},jn.matchesProperty=function(e,t){return Vr(e,lr(t,1))},jn.memoize=La,jn.merge=Lo,jn.mergeWith=Po,jn.method=sl,jn.methodOf=al,jn.mixin=ol,jn.negate=Pa,jn.nthArg=function(e){return e=po(e),Xr(function(t){return Hr(t,e)})},jn.omit=Bo,jn.omitBy=function(e,t){return Ro(e,Pa(ls(t)))},jn.once=function(e){return Aa(2,e)},jn.orderBy=function(e,t,n,r){return null==e?[]:(Ha(t)||(t=null==t?[]:[t]),Ha(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},jn.over=ul,jn.overArgs=Ba,jn.overEvery=cl,jn.overSome=hl,jn.partial=Na,jn.partialRight=Ra,jn.partition=Sa,jn.pick=No,jn.pickBy=Ro,jn.property=dl,jn.propertyOf=function(e){return function(t){return null==e?i:Sr(e,t)}},jn.pull=Xs,jn.pullAll=Js,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,ls(n,2)):e},jn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},jn.pullAt=$s,jn.range=fl,jn.rangeRight=pl,jn.rearg=Fa,jn.reject=function(e,t){return(Ha(e)?Ot:mr)(e,Pa(ls(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=ls(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return qr(e,i),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Me(s);return Xr(e,t=t===i?t:po(t))},jn.reverse=Qs,jn.sampleSize=function(e,t,n){return t=(n?ys(e,t,n):t===i)?1:po(t),(Ha(e)?$n:$r)(e,t)},jn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},jn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Qr(e,t,n,r)},jn.shuffle=function(e){return(Ha(e)?Qn:ni)(e)},jn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ys(e,t,n)?(t=0,n=r):(t=null==t?0:po(t),n=n===i?r:po(n)),ri(e,t,n)):[]},jn.sortBy=Ca,jn.sortedUniq=function(e){return e&&e.length?oi(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?oi(e,ls(t,2)):[]},jn.split=function(e,t,n){return n&&"number"!=typeof n&&ys(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=_o(e))&&("string"==typeof t||null!=t&&!io(t))&&!(t=ui(t))&&ln(e)?xi(gn(e),0,n):e.split(t,n):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Me(s);return t=null==t?0:Zt(po(t),0),Xr(function(n){var r=n[t],i=xi(n,0,t);return r&&Nt(i,r),At(e,this,i)})},jn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},jn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:po(t))<0?0:t):[]},jn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:po(t)))<0?0:t,r):[]},jn.takeRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?fi(e,ls(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Me(s);return Qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ta(e,t,{leading:r,maxWait:t,trailing:i})},jn.thru=da,jn.toArray=ho,jn.toPairs=Fo,jn.toPairsIn=zo,jn.toPath=function(e){return Ha(e)?Bt(e,Ns):oo(e)?[e]:Mi(Bs(_o(e)))},jn.toPlainObject=vo,jn.transform=function(e,t,n){var r=Ha(e),i=r||qa(e)||lo(e);if(t=ls(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:Qa(e)&&Xa(s)?Vn(We(e)):{}}return(i?Mt:br)(e,function(e,r,i){return t(n,e,r,i)}),n},jn.unary=function(e){return Ea(e,1)},jn.union=ea,jn.unionBy=ta,jn.unionWith=na,jn.uniq=function(e){return e&&e.length?ci(e):[]},jn.uniqBy=function(e,t){return e&&e.length?ci(e,ls(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ci(e,i,t):[]},jn.unset=function(e,t){return null==e||hi(e,t)},jn.unzip=ra,jn.unzipWith=ia,jn.update=function(e,t,n){return null==e?e:di(e,t,_i(n))},jn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,_i(n),r)},jn.values=jo,jn.valuesIn=function(e){return null==e?[]:en(e,Oo(e))},jn.without=sa,jn.words=Jo,jn.wrap=function(e,t){return Na(_i(t),e)},jn.xor=aa,jn.xorBy=oa,jn.xorWith=la,jn.zip=ua,jn.zipObject=function(e,t){return mi(e||[],t||[],tr)},jn.zipObjectDeep=function(e,t){return mi(e||[],t||[],Qr)},jn.zipWith=ca,jn.entries=Fo,jn.entriesIn=zo,jn.extend=bo,jn.extendWith=xo,ol(jn,jn),jn.add=vl,jn.attempt=$o,jn.camelCase=Vo,jn.capitalize=Uo,jn.ceil=_l,jn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=mo(n))===n?n:0),t!==i&&(t=(t=mo(t))===t?t:0),or(mo(e),t,n)},jn.clone=function(e){return lr(e,4)},jn.cloneDeep=function(e){return lr(e,5)},jn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},jn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},jn.conformsTo=function(e,t){return null==t||ur(e,t,Io(t))},jn.deburr=Ho,jn.defaultTo=function(e,t){return null==e||e!==e?t:e},jn.divide=yl,jn.endsWith=function(e,t,n){e=_o(e),t=ui(t);var r=e.length,s=n=n===i?r:or(po(n),0,r);return(n-=t.length)>=0&&e.slice(n,s)==t},jn.eq=za,jn.escape=function(e){return(e=_o(e))&&J.test(e)?e.replace(K,an):e},jn.escapeRegExp=function(e){return(e=_o(e))&&se.test(e)?e.replace(ie,"\\$&"):e},jn.every=function(e,t,n){var r=Ha(e)?It:pr;return n&&ys(e,t,n)&&(t=i),r(e,ls(t,3))},jn.find=ga,jn.findIndex=Us,jn.findKey=function(e,t){return Vt(e,ls(t,3),br)},jn.findLast=ma,jn.findLastIndex=Hs,jn.findLastKey=function(e,t){return Vt(e,ls(t,3),xr)},jn.floor=bl,jn.forEach=va,jn.forEachRight=_a,jn.forIn=function(e,t){return null==e?e:_r(e,ls(t,3),Oo)},jn.forInRight=function(e,t){return null==e?e:yr(e,ls(t,3),Oo)},jn.forOwn=function(e,t){return e&&br(e,ls(t,3))},jn.forOwnRight=function(e,t){return e&&xr(e,ls(t,3))},jn.get=Eo,jn.gt=ja,jn.gte=Va,jn.has=function(e,t){return null!=e&&gs(e,t,Ar)},jn.hasIn=Ao,jn.head=Ys,jn.identity=rl,jn.includes=function(e,t,n,r){e=Ya(e)?e:jo(e),n=n&&!r?po(n):0;var i=e.length;return n<0&&(n=Zt(i+n,0)),ao(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=Zt(r+i,0)),Ht(e,t,i)},jn.inRange=function(e,t,n){return t=fo(t),n===i?(n=t,t=0):n=fo(n),function(e,t,n){return e>=yn(t,n)&&e<Zt(t,n)}(e=mo(e),t,n)},jn.invoke=To,jn.isArguments=Ua,jn.isArray=Ha,jn.isArrayBuffer=Ga,jn.isArrayLike=Ya,jn.isArrayLikeObject=Wa,jn.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Dr(e)==b},jn.isBuffer=qa,jn.isDate=Za,jn.isElement=function(e){return eo(e)&&1===e.nodeType&&!ro(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Ha(e)||"string"==typeof e||"function"==typeof e.splice||qa(e)||lo(e)||Ua(e)))return!e.length;var t=ps(e);if(t==D||t==T)return!e.size;if(Ss(e))return!Nr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Or(e,t)},jn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},jn.isError=Ka,jn.isFinite=function(e){return"number"==typeof e&&yt(e)},jn.isFunction=Xa,jn.isInteger=Ja,jn.isLength=$a,jn.isMap=to,jn.isMatch=function(e,t){return e===t||Lr(e,t,cs(t))},jn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,cs(t),n)},jn.isNaN=function(e){return no(e)&&e!=+e},jn.isNative=function(e){if(ws(e))throw new oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=no,jn.isObject=Qa,jn.isObjectLike=eo,jn.isPlainObject=ro,jn.isRegExp=io,jn.isSafeInteger=function(e){return Ja(e)&&e>=-9007199254740991&&e<=p},jn.isSet=so,jn.isString=ao,jn.isSymbol=oo,jn.isTypedArray=lo,jn.isUndefined=function(e){return e===i},jn.isWeakMap=function(e){return eo(e)&&ps(e)==L},jn.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==Dr(e)},jn.join=function(e,t){return null==e?"":bt.call(e,t)},jn.kebabCase=Go,jn.last=Ks,jn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=po(n))<0?Zt(r+s,0):yn(s,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,s):Ut(e,Yt,s,!0)},jn.lowerCase=Yo,jn.lowerFirst=Wo,jn.lt=uo,jn.lte=co,jn.max=function(e){return e&&e.length?gr(e,rl,Er):i},jn.maxBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Er):i},jn.mean=function(e){return Wt(e,rl)},jn.meanBy=function(e,t){return Wt(e,ls(t,2))},jn.min=function(e){return e&&e.length?gr(e,rl,Fr):i},jn.minBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Fr):i},jn.stubArray=gl,jn.stubFalse=ml,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=xl,jn.nth=function(e,t){return e&&e.length?Hr(e,po(t)):i},jn.noConflict=function(){return gt._===this&&(gt._=je),this},jn.noop=ll,jn.now=Da,jn.pad=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(pt(i),n)+e+Gi(ft(i),n)},jn.padEnd=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;return t&&r<t?e+Gi(t-r,n):e},jn.padStart=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;return t&&r<t?Gi(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(_o(e).replace(ae,""),t||0)},jn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ys(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fo(e),t===i?(t=e,e=0):t=fo(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var s=wn();return yn(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Zr(e,t)},jn.reduce=function(e,t,n){var r=Ha(e)?Rt:Kt,i=arguments.length<3;return r(e,ls(t,4),n,i,dr)},jn.reduceRight=function(e,t,n){var r=Ha(e)?Ft:Kt,i=arguments.length<3;return r(e,ls(t,4),n,i,fr)},jn.repeat=function(e,t,n){return t=(n?ys(e,t,n):t===i)?1:po(t),Kr(_o(e),t)},jn.replace=function(){var e=arguments,t=_o(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,n){var r=-1,s=(t=yi(t,e)).length;for(s||(s=1,e=i);++r<s;){var a=null==e?i:e[Ns(t[r])];a===i&&(r=s,a=n),e=Xa(a)?a.call(e):a}return e},jn.round=wl,jn.runInContext=e,jn.sample=function(e){return(Ha(e)?Jn:Jr)(e)},jn.size=function(e){if(null==e)return 0;if(Ya(e))return ao(e)?pn(e):e.length;var t=ps(e);return t==D||t==T?e.size:Nr(e).length},jn.snakeCase=qo,jn.some=function(e,t,n){var r=Ha(e)?zt:ii;return n&&ys(e,t,n)&&(t=i),r(e,ls(t,3))},jn.sortedIndex=function(e,t){return si(e,t)},jn.sortedIndexBy=function(e,t,n){return ai(e,t,ls(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&za(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return si(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return ai(e,t,ls(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=si(e,t,!0)-1;if(za(e[n],t))return n}return-1},jn.startCase=Zo,jn.startsWith=function(e,t,n){return e=_o(e),n=null==n?0:or(po(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},jn.subtract=Sl,jn.sum=function(e){return e&&e.length?Xt(e,rl):0},jn.sumBy=function(e,t){return e&&e.length?Xt(e,ls(t,2)):0},jn.template=function(e,t,n){var r=jn.templateSettings;n&&ys(e,t,n)&&(t=i),e=_o(e),t=xo({},t,r,$i);var s,a,o=xo({},t.imports,r.imports,$i),l=Io(o),u=en(o,l),c=0,h=t.interpolate||we,d="__p += '",f=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,function(t,n,r,i,o,l){return r||(r=i),d+=e.slice(c,l).replace(Se,on),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new oe("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(Y,""):d).replace(W,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=$o(function(){return Ce(l,p+"return "+d).apply(i,u)});if(m.source=d,Ka(m))throw m;return m},jn.times=function(e,t){if((e=po(e))<1||e>p)return[];var n=m,r=yn(e,m);t=ls(t),e-=m;for(var i=Jt(r,t);++n<e;)t(n);return i},jn.toFinite=fo,jn.toInteger=po,jn.toLength=go,jn.toLower=function(e){return _o(e).toLowerCase()},jn.toNumber=mo,jn.toSafeInteger=function(e){return e?or(po(e),-9007199254740991,p):0===e?e:0},jn.toString=_o,jn.toUpper=function(e){return _o(e).toUpperCase()},jn.trim=function(e,t,n){if((e=_o(e))&&(n||t===i))return $t(e);if(!e||!(t=ui(t)))return e;var r=gn(e),s=gn(t);return xi(r,nn(r,s),rn(r,s)+1).join("")},jn.trimEnd=function(e,t,n){if((e=_o(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=ui(t)))return e;var r=gn(e);return xi(r,0,rn(r,gn(t))+1).join("")},jn.trimStart=function(e,t,n){if((e=_o(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=ui(t)))return e;var r=gn(e);return xi(r,nn(r,gn(t))).join("")},jn.truncate=function(e,t){var n=30,r="...";if(Qa(t)){var s="separator"in t?t.separator:s;n="length"in t?po(t.length):n,r="omission"in t?ui(t.omission):r}var a=(e=_o(e)).length;if(ln(e)){var o=gn(e);a=o.length}if(n>=a)return e;var l=n-pn(r);if(l<1)return r;var u=o?xi(o,0,l).join(""):e.slice(0,l);if(s===i)return u+r;if(o&&(l+=u.length-l),io(s)){if(e.slice(l).search(s)){var c,h=u;for(s.global||(s=Ae(s.source,_o(ge.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===i?l:d)}}else if(e.indexOf(ui(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+r},jn.unescape=function(e){return(e=_o(e))&&X.test(e)?e.replace(Z,vn):e},jn.uniqueId=function(e){var t=++Ne;return _o(e)+t},jn.upperCase=Ko,jn.upperFirst=Xo,jn.each=va,jn.eachRight=_a,jn.first=Ys,ol(jn,function(){var e={};return br(jn,function(t,n){Be.call(jn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),jn.VERSION="4.17.21",Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){jn[e].placeholder=jn}),Mt(["drop","take"],function(e,t){Gn.prototype[e]=function(n){n=n===i?1:Zt(po(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Mt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Mt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}}),Mt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}}),Gn.prototype.compact=function(){return this.filter(rl)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr(function(e,t){return"function"==typeof e?new Gn(this):this.map(function(n){return Tr(n,e,t)})}),Gn.prototype.reject=function(e){return this.filter(Pa(ls(e)))},Gn.prototype.slice=function(e,t){e=po(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=po(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(m)},br(Gn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=jn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);s&&(jn.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,l=t instanceof Gn,u=o[0],c=l||Ha(t),h=function(e){var t=s.apply(jn,Nt([e],o));return r&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&c){t=g?t:new Gn(this);var m=e.apply(t,o);return m.__actions__.push({func:da,args:[h],thisArg:i}),new Hn(m,d)}return p&&g?e.apply(this,o):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ha(i)?i:[],e)}return this[n](function(n){return t.apply(Ha(n)?n:[],e)})}}),br(Gn.prototype,function(e,t){var n=jn[t];if(n){var r=n.name+"";Be.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}}),In[ji(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ha(e),r=t<0,i=n?e.length:0,s=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=Zt(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=s.start,o=s.end,l=o-a,u=r?o:a-1,c=this.__iteratees__,h=c.length,d=0,f=yn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var g=-1,m=e[u+=t];++g<h;){var v=c[g],_=v.iteratee,y=v.type,b=_(m);if(2==y)m=b;else if(!b){if(1==y)continue e;break e}}p[d++]=m}return p},jn.prototype.at=fa,jn.prototype.chain=function(){return ha(this)},jn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=ho(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,n=this;n instanceof Un;){var r=Fs(n);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;n=n.__wrapped__}return s.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:da,args:[Qs],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(Qs)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Je&&(jn.prototype[Je]=function(){return this}),jn}();gt._=_n,(r=function(){return _n}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},"./node_modules/object-inspect/index.js":(e,t,n)=>{var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=r&&i&&"function"===typeof i.get?i.get:null,a=r&&Map.prototype.forEach,o="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=o&&l&&"function"===typeof l.get?l.get:null,c=o&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,m=Function.prototype.toString,v=String.prototype.match,_=String.prototype.slice,y=String.prototype.replace,b=String.prototype.toUpperCase,x=String.prototype.toLowerCase,w=RegExp.prototype.test,S=Array.prototype.concat,C=Array.prototype.join,D=Array.prototype.slice,E=Math.floor,A="function"===typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"===typeof Symbol&&"object"===typeof Symbol.iterator,I="function"===typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,L=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function P(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-E(-e):E(e);if(r!==e){var i=String(r),s=_.call(t,i.length+1);return y.call(i,n,"$&_")+"."+y.call(y.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return y.call(t,n,"$&_")}var B=n("?4f7e"),N=B.custom,R=U(N)?N:null;function F(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function z(e){return y.call(String(e),/"/g,"&quot;")}function j(e){return"[object Array]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}function V(e){return"[object RegExp]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}function U(e){if(T)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!M)return!1;try{return M.call(e),!0}catch(t){}return!1}e.exports=function e(t,n,r,i){var o=n||{};if(G(o,"quoteStyle")&&"single"!==o.quoteStyle&&"double"!==o.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(G(o,"maxStringLength")&&("number"===typeof o.maxStringLength?o.maxStringLength<0&&o.maxStringLength!==1/0:null!==o.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!G(o,"customInspect")||o.customInspect;if("boolean"!==typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(o,"indent")&&null!==o.indent&&"\t"!==o.indent&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(o,"numericSeparator")&&"boolean"!==typeof o.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=o.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return q(t,o);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var b=String(t);return g?P(t,b):b}if("bigint"===typeof t){var w=String(t)+"n";return g?P(t,w):w}var E="undefined"===typeof o.depth?5:o.depth;if("undefined"===typeof r&&(r=0),r>=E&&E>0&&"object"===typeof t)return j(t)?"[Array]":"[Object]";var k,N=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=C.call(Array(e.indent+1)," ")}return{base:n,prev:C.call(Array(t+1),n)}}(o,r);if("undefined"===typeof i)i=[];else if(W(i,t)>=0)return"[Circular]";function H(t,n,s){if(n&&(i=D.call(i)).push(n),s){var a={depth:o.depth};return G(o,"quoteStyle")&&(a.quoteStyle=o.quoteStyle),e(t,a,r+1,i)}return e(t,o,r+1,i)}if("function"===typeof t&&!V(t)){var Z=function(e){if(e.name)return e.name;var t=v.call(m.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=Q(t,H);return"[Function"+(Z?": "+Z:" (anonymous)")+"]"+(ee.length>0?" { "+C.call(ee,", ")+" }":"")}if(U(t)){var te=T?y.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):M.call(t);return"object"!==typeof t||T?te:K(te)}if((k=t)&&"object"===typeof k&&("undefined"!==typeof HTMLElement&&k instanceof HTMLElement||"string"===typeof k.nodeName&&"function"===typeof k.getAttribute)){for(var ne="<"+x.call(String(t.nodeName)),re=t.attributes||[],ie=0;ie<re.length;ie++)ne+=" "+re[ie].name+"="+F(z(re[ie].value),"double",o);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+x.call(String(t.nodeName))+">"}if(j(t)){if(0===t.length)return"[]";var se=Q(t,H);return N&&!function(e){for(var t=0;t<e.length;t++)if(W(e[t],"\n")>=0)return!1;return!0}(se)?"["+$(se,N)+"]":"[ "+C.call(se,", ")+" ]"}if(function(e){return"[object Error]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}(t)){var ae=Q(t,H);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+C.call(ae,", ")+" }":"{ ["+String(t)+"] "+C.call(S.call("[cause]: "+H(t.cause),ae),", ")+" }"}if("object"===typeof t&&l){if(R&&"function"===typeof t[R]&&B)return B(t,{depth:E-r});if("symbol"!==l&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!s||!e||"object"!==typeof e)return!1;try{s.call(e);try{u.call(e)}catch(ne){return!0}return e instanceof Map}catch(t){}return!1}(t)){var oe=[];return a&&a.call(t,function(e,n){oe.push(H(n,t,!0)+" => "+H(e,t))}),J("Map",s.call(t),oe,N)}if(function(e){if(!u||!e||"object"!==typeof e)return!1;try{u.call(e);try{s.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var le=[];return c&&c.call(t,function(e){le.push(H(e,t))}),J("Set",u.call(t),le,N)}if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(ne){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return X("WeakMap");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(ne){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return X("WeakSet");if(function(e){if(!f||!e||"object"!==typeof e)return!1;try{return f.call(e),!0}catch(t){}return!1}(t))return X("WeakRef");if(function(e){return"[object Number]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}(t))return K(H(Number(t)));if(function(e){if(!e||"object"!==typeof e||!A)return!1;try{return A.call(e),!0}catch(t){}return!1}(t))return K(H(A.call(t)));if(function(e){return"[object Boolean]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}(t))return K(p.call(t));if(function(e){return"[object String]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}(t))return K(H(String(t)));if(!function(e){return"[object Date]"===Y(e)&&(!I||!("object"===typeof e&&I in e))}(t)&&!V(t)){var ue=Q(t,H),ce=L?L(t)===Object.prototype:t instanceof Object||t.constructor===Object,he=t instanceof Object?"":"null prototype",de=!ce&&I&&Object(t)===t&&I in t?_.call(Y(t),8,-1):he?"Object":"",fe=(ce||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||he?"["+C.call(S.call([],de||[],he||[]),": ")+"] ":"");return 0===ue.length?fe+"{}":N?fe+"{"+$(ue,N)+"}":fe+"{ "+C.call(ue,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return H.call(e,t)}function Y(e){return g.call(e)}function W(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function q(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return q(_.call(e,0,t.maxStringLength),t)+r}return F(y.call(y.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Z),"single",t)}function Z(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function K(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function J(e,t,n,r){return e+" ("+t+") {"+(r?$(n,r):C.call(n,", "))+"}"}function $(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+C.call(e,","+n)+"\n"+t.prev}function Q(e,t){var n=j(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=G(e,i)?t(e[i],e):""}var s,a="function"===typeof k?k(e):[];if(T){s={};for(var o=0;o<a.length;o++)s["$"+a[o]]=a[o]}for(var l in e)G(e,l)&&(n&&String(Number(l))===l&&l<e.length||T&&s["$"+l]instanceof Symbol||(w.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"===typeof k)for(var u=0;u<a.length;u++)O.call(e,a[u])&&r.push("["+t(a[u])+"]: "+t(e[a[u]],e));return r}},"./node_modules/qs/lib/formats.js":e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:i}},"./node_modules/qs/lib/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/qs/lib/stringify.js"),i=n("./node_modules/qs/lib/parse.js"),s=n("./node_modules/qs/lib/formats.js");e.exports={formats:s,parse:i,stringify:r}},"./node_modules/qs/lib/parse.js":(e,t,n)=>{"use strict";var r=n("./node_modules/qs/lib/utils.js"),i=Object.prototype.hasOwnProperty,s=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},l=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,n,r){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=n.depth>0&&/(\[[^[\]]*])/.exec(s),u=o?s.slice(0,o.index):s,c=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var h=0;n.depth>0&&null!==(o=a.exec(s))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+s.slice(o.index)+"]"),function(e,t,n,r){for(var i=r?t:l(t,n),s=e.length-1;s>=0;--s){var a,o=e[s];if("[]"===o&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var u="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(u,10);n.parseArrays||""!==u?!isNaN(c)&&o!==u&&String(c)===u&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(a=[])[c]=i:"__proto__"!==u&&(a[u]=i):a={0:i}}i=a}return i}(c,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var c="string"===typeof e?function(e,t){var n,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,d=c.split(t.delimiter,h),f=-1,p=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[n]?p="utf-8":"utf8=%26%2310003%3B"===d[n]&&(p="iso-8859-1"),f=n,n=d.length);for(n=0;n<d.length;++n)if(n!==f){var g,m,v=d[n],_=v.indexOf("]="),y=-1===_?v.indexOf("="):_+1;-1===y?(g=t.decoder(v,a.decoder,p,"key"),m=t.strictNullHandling?null:""):(g=t.decoder(v.slice(0,y),a.decoder,p,"key"),m=r.maybeMap(l(v.slice(y+1),t),function(e){return t.decoder(e,a.decoder,p,"value")})),m&&t.interpretNumericEntities&&"iso-8859-1"===p&&(m=o(m)),v.indexOf("[]=")>-1&&(m=s(m)?[m]:m),i.call(u,g)?u[g]=r.combine(u[g],m):u[g]=m}return u}(e,n):e,h=n.plainObjects?Object.create(null):{},d=Object.keys(c),f=0;f<d.length;++f){var p=d[f],g=u(p,c[p],n,"string"===typeof e);h=r.merge(h,g,n)}return!0===n.allowSparse?h:r.compact(h)}},"./node_modules/qs/lib/stringify.js":(e,t,n)=>{"use strict";var r=n("./node_modules/side-channel/index.js"),i=n("./node_modules/qs/lib/utils.js"),s=n("./node_modules/qs/lib/formats.js"),a=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,l(t)?t:[t])},h=Date.prototype.toISOString,d=s.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},p={},g=function e(t,n,s,a,o,u,h,d,g,m,v,_,y,b,x,w){for(var S,C=t,D=w,E=0,A=!1;void 0!==(D=D.get(p))&&!A;){var k=D.get(t);if(E+=1,"undefined"!==typeof k){if(k===E)throw new RangeError("Cyclic object value");A=!0}"undefined"===typeof D.get(p)&&(E=0)}if("function"===typeof d?C=d(n,C):C instanceof Date?C=v(C):"comma"===s&&l(C)&&(C=i.maybeMap(C,function(e){return e instanceof Date?v(e):e})),null===C){if(o)return h&&!b?h(n,f.encoder,x,"key",_):n;C=""}if("string"===typeof(S=C)||"number"===typeof S||"boolean"===typeof S||"symbol"===typeof S||"bigint"===typeof S||i.isBuffer(C))return h?[y(b?n:h(n,f.encoder,x,"key",_))+"="+y(h(C,f.encoder,x,"value",_))]:[y(n)+"="+y(String(C))];var M,T=[];if("undefined"===typeof C)return T;if("comma"===s&&l(C))b&&h&&(C=i.maybeMap(C,h)),M=[{value:C.length>0?C.join(",")||null:void 0}];else if(l(d))M=d;else{var I=Object.keys(C);M=g?I.sort(g):I}for(var O=a&&l(C)&&1===C.length?n+"[]":n,L=0;L<M.length;++L){var P=M[L],B="object"===typeof P&&"undefined"!==typeof P.value?P.value:C[P];if(!u||null!==B){var N=l(C)?"function"===typeof s?s(O,P):O:O+(m?"."+P:"["+P+"]");w.set(t,E);var R=r();R.set(p,w),c(T,e(B,N,s,a,o,u,"comma"===s&&b&&l(C)?null:h,d,g,m,v,_,y,b,x,R))}}return T};e.exports=function(e,t){var n,i=e,u=function(e){if(!e)return f;if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=s.default;if("undefined"!==typeof e.format){if(!a.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=s.formatters[n],i=f.filter;return("function"===typeof e.filter||l(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?f.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:f.encode,encoder:"function"===typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"===typeof u.filter?i=(0,u.filter)("",i):l(u.filter)&&(n=u.filter);var h,d=[];if("object"!==typeof i||null===i)return"";h=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=o[h];if(t&&"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===p&&t&&t.commaRoundTrip;n||(n=Object.keys(i)),u.sort&&n.sort(u.sort);for(var v=r(),_=0;_<n.length;++_){var y=n[_];u.skipNulls&&null===i[y]||c(d,g(i[y],y,p,m,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,v))}var b=d.join(u.delimiter),x=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),b.length>0?x+b:""}},"./node_modules/qs/lib/utils.js":(e,t,n)=>{"use strict";var r=n("./node_modules/qs/lib/formats.js"),i=Object.prototype.hasOwnProperty,s=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],o=Object.keys(a),l=0;l<o.length;++l){var u=o[l],c=a[u];"object"===typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:a,prop:u}),n.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(s(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(e,t,n,i,s){if(0===e.length)return e;var o=e;if("symbol"===typeof e?o=Symbol.prototype.toString.call(e):"string"!==typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var l="",u=0;u<o.length;++u){var c=o.charCodeAt(u);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===r.RFC1738&&(40===c||41===c)?l+=o.charAt(u):c<128?l+=a[c]:c<2048?l+=a[192|c>>6]+a[128|63&c]:c<55296||c>=57344?l+=a[224|c>>12]+a[128|c>>6&63]+a[128|63&c]:(u+=1,c=65536+((1023&c)<<10|1023&o.charCodeAt(u)),l+=a[240|c>>18]+a[128|c>>12&63]+a[128|c>>6&63]+a[128|63&c])}return l},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(s(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==typeof n){if(s(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var a=t;return s(t)&&!s(n)&&(a=o(t,r)),s(t)&&s(n)?(n.forEach(function(n,s){if(i.call(t,s)){var a=t[s];a&&"object"===typeof a&&n&&"object"===typeof n?t[s]=e(a,n,r):t.push(n)}else t[s]=n}),t):Object.keys(n).reduce(function(t,s){var a=n[s];return i.call(t,s)?t[s]=e(t[s],a,r):t[s]=a,t},a)}}},"./node_modules/side-channel/index.js":(e,t,n)=>{"use strict";var r=n("./node_modules/get-intrinsic/index.js"),i=n("./node_modules/call-bind/callBound.js"),s=n("./node_modules/object-inspect/index.js"),a=r("%TypeError%"),o=r("%WeakMap%",!0),l=r("%Map%",!0),u=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),g=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+s(e))},get:function(r){if(o&&r&&("object"===typeof r||"function"===typeof r)){if(e)return u(e,r)}else if(l){if(t)return d(t,r)}else if(n)return function(e,t){var n=g(e,t);return n&&n.value}(n,r)},has:function(r){if(o&&r&&("object"===typeof r||"function"===typeof r)){if(e)return h(e,r)}else if(l){if(t)return p(t,r)}else if(n)return function(e,t){return!!g(e,t)}(n,r);return!1},set:function(r,i){o&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new o),c(e,r,i)):l?(t||(t=new l),f(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=g(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},"../../../node_modules/axios/index.js":(e,t,n)=>{e.exports=n("../../../node_modules/axios/lib/axios.js")},"../../../node_modules/axios/lib/adapters/xhr.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/core/settle.js"),s=n("../../../node_modules/axios/lib/helpers/buildURL.js"),a=n("../../../node_modules/axios/lib/helpers/parseHeaders.js"),o=n("../../../node_modules/axios/lib/helpers/isURLSameOrigin.js"),l=n("../../../node_modules/axios/lib/core/createError.js");e.exports=function(e){return new Promise(function(t,u){var c=e.data,h=e.headers;r.isFormData(c)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",p=e.auth.password||"";h.Authorization="Basic "+btoa(f+":"+p)}if(d.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};i(t,u,r),d=null}},d.onerror=function(){u(l("Network Error",e,null,d)),d=null},d.ontimeout=function(){u(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var g=n("../../../node_modules/axios/lib/helpers/cookies.js"),m=(e.withCredentials||o(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;m&&(h[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&r.forEach(h,function(e,t){"undefined"===typeof c&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(v){if("json"!==e.responseType)throw v}"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),u(e),d=null)}),void 0===c&&(c=null),d.send(c)})}},"../../../node_modules/axios/lib/axios.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/helpers/bind.js"),s=n("../../../node_modules/axios/lib/core/Axios.js"),a=n("../../../node_modules/axios/lib/defaults.js");function o(e){var t=new s(e),n=i(s.prototype.request,t);return r.extend(n,s.prototype,t),r.extend(n,t),n}var l=o(a);l.Axios=s,l.create=function(e){return o(r.merge(a,e))},l.Cancel=n("../../../node_modules/axios/lib/cancel/Cancel.js"),l.CancelToken=n("../../../node_modules/axios/lib/cancel/CancelToken.js"),l.isCancel=n("../../../node_modules/axios/lib/cancel/isCancel.js"),l.all=function(e){return Promise.all(e)},l.spread=n("../../../node_modules/axios/lib/helpers/spread.js"),e.exports=l,e.exports.default=l},"../../../node_modules/axios/lib/cancel/Cancel.js":e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},"../../../node_modules/axios/lib/cancel/CancelToken.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/cancel/Cancel.js");function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},"../../../node_modules/axios/lib/cancel/isCancel.js":e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"../../../node_modules/axios/lib/core/Axios.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/defaults.js"),i=n("../../../node_modules/axios/lib/utils.js"),s=n("../../../node_modules/axios/lib/core/InterceptorManager.js"),a=n("../../../node_modules/axios/lib/core/dispatchRequest.js");function o(e){this.defaults=e,this.interceptors={request:new s,response:new s}}o.prototype.request=function(e){"string"===typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){o.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){o.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=o},"../../../node_modules/axios/lib/core/InterceptorManager.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js");function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},"../../../node_modules/axios/lib/core/createError.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/core/enhanceError.js");e.exports=function(e,t,n,i,s){var a=new Error(e);return r(a,t,n,i,s)}},"../../../node_modules/axios/lib/core/dispatchRequest.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/core/transformData.js"),s=n("../../../node_modules/axios/lib/cancel/isCancel.js"),a=n("../../../node_modules/axios/lib/defaults.js"),o=n("../../../node_modules/axios/lib/helpers/isAbsoluteURL.js"),l=n("../../../node_modules/axios/lib/helpers/combineURLs.js");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!o(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},"../../../node_modules/axios/lib/core/enhanceError.js":e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},"../../../node_modules/axios/lib/core/settle.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/core/createError.js");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},"../../../node_modules/axios/lib/core/transformData.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},"../../../node_modules/axios/lib/defaults.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=n("../../../node_modules/axios/lib/helpers/normalizeHeaderName.js"),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process)&&(e=n("../../../node_modules/axios/lib/adapters/xhr.js")),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){o.headers[e]={}}),r.forEach(["post","put","patch"],function(e){o.headers[e]=r.merge(s)}),e.exports=o},"../../../node_modules/axios/lib/helpers/bind.js":e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"../../../node_modules/axios/lib/helpers/buildURL.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js");function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(r.isURLSearchParams(t))s=t.toString();else{var a=[];r.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),s=a.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}},"../../../node_modules/axios/lib/helpers/combineURLs.js":e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"../../../node_modules/axios/lib/helpers/cookies.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,s,a){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(i)&&o.push("path="+i),r.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"../../../node_modules/axios/lib/helpers/isAbsoluteURL.js":e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},"../../../node_modules/axios/lib/helpers/isURLSameOrigin.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},"../../../node_modules/axios/lib/helpers/normalizeHeaderName.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js");e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},"../../../node_modules/axios/lib/helpers/parseHeaders.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/utils.js"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,a={};return e?(r.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),n=r.trim(e.substr(s+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},"../../../node_modules/axios/lib/helpers/spread.js":e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"../../../node_modules/axios/lib/utils.js":(e,t,n)=>{"use strict";var r=n("../../../node_modules/axios/lib/helpers/bind.js"),i=n("../../../node_modules/is-buffer/index.js"),s=Object.prototype.toString;function a(e){return"[object Array]"===s.call(e)}function o(e){return null!==e&&"object"===typeof e}function l(e){return"[object Function]"===s.call(e)}function u(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:o,isUndefined:function(e){return"undefined"===typeof e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:l,isStream:function(e){return o(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:u,merge:function e(){var t={};function n(n,r){"object"===typeof t[r]&&"object"===typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},"./src/api.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{axiosApi:()=>r,setupApi:()=>l});var r,i=n("./node_modules/axios/lib/axios.js"),s=n("./node_modules/lodash/lodash.js"),a=n.n(s),o=n("./src/helpers.tsx");function l(e,t){console.log(Zakeke.config),r=i.default.create({baseURL:Zakeke.config.cloudFlareApiUrl||Zakeke.config.baseApiUrl,timeout:12e4,withCredentials:!0,headers:{Authorization:"Bearer "+t,"Accept-Language":e}}),$.ajaxSetup({xhrFields:{withCredentials:!0},headers:{Authorization:"Bearer "+t,"Accept-Language":e}}),r.interceptors.response.use(function(e){return e.data&&(a().isObject(e.data)||a().isArray(e.data))&&(e.data=o.StringHelper.pascalToCamel(e.data)),e},function(e){return e.response&&e.response.data&&(e.response.data=o.StringHelper.pascalToCamel(e.response.data)),Promise.reject(e)})}},"./src/components/customizer.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ZakekeDesigner:()=>f});var r,i=n("react"),s=n("styled-components"),a=n.n(s),o=n("./src/helpers.tsx"),l=n("./src/hooks/useZakeke.ts"),u=n("./src/state/provider.tsx");function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=a().div(r||(r=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n\toutline: none !important;\n\n\tcanvas {\n\t\toutline: none !important;\n\t}\n"]))),f=i.forwardRef(function(e,t){var n=(0,u.useInternalState)(),r=(0,i.useRef)(n);r.current=n;var s=r.current.state.environment,a=(0,l.useZakeke)().designUpdate,h=c(i.useState((0,o.uuid)()),1)[0],f=c(i.useState(null),2),p=f[0],g=f[1];(0,i.useEffect)(function(){var e=document.getElementById("zakeke-designer-container-"+h),t=new MPlaza.Customizer(!1,!1,null,!0);t.showSideImage=!1,t.addItemChangedListener(m),t.addItemRemovedListener(v),t.setCustomizedMessages([{Description:"",EventID:MPlaza.EventMessages.DPIWarning,Visible:!1}]),t.appendTo(e),g(t)},[]),(0,i.useEffect)(function(){if(s.internalProduct){var t=s.internalProduct.get("colors").at(0).get("sides").find(function(t){return t.get("sideID")==e.areaId});t&&p&&s.internalCurrentTemplate&&(p.model=s.internalProduct,p.setDesign(s.internalCurrentTemplate),p.setSide(t).then(function(){p.adaptZoomToSideAreas(!1)}))}},[e.areaId,s.currentTemplate,!!p]);var m=function(){a()},v=function(){a()},_=function(){p&&p.zoomIn()},y=function(){p&&p.zoomOut()};return(0,i.useImperativeHandle)(t,function(){return{zoomIn:_,zoomOut:y}},[]),i.createElement(d,{id:"zakeke-designer-container-"+h})})},"./src/components/debugs/debugPanel.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DebugPanel:()=>k});var r,i,s,a,o,l,u,c=n("react"),h=n("styled-components"),d=n.n(h),f=n("./src/state/provider.tsx");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function g(){g=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,a=Object.create(s.prototype),o=new O(r||[]);return i(a,"_invoke",{value:k(e,n,o)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};u(w,a,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,a)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,s,a,o){var l=h(e[i],e,s);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==p(c)&&r.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(c).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,o)})}o(l.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return s=s?s.then(i,i):i()}})}function k(t,n,r){var i=d;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=h(t,n,r);if("normal"===u.type){if(i=r.done?v:f,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(p(t)+" is not iterable")}return b.prototype=x,i(D,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=u(x,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,l,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),u(A.prototype,o,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(c(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),u(D,l,"Generator"),u(D,a,function(){return this}),u(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function m(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(e){m(s,r,i,a,o,"next",e)}function o(e){m(s,r,i,a,o,"throw",e)}a(void 0)})}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=d().div(r||(r=b(["\n\tposition: fixed;\n\tmin-width: 120px;\n\tbottom: 0;\n\tright: 0;\n\tbackground: #fff;\n\tpadding: 10px 20px;\n\tborder: 1px solid #ccc;\n\tz-index: 10000;\n\tcursor: ",";\n"])),function(e){return e.$hideCursor?"auto":"pointer"}),w=d().div(i||(i=b(["\n\tposition: relative;\n\tpadding: 25px 10px 10px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10px;\n"]))),S=d().h3(s||(s=b(["\n\tposition: absolute;\n\ttop: 5px;\n\tleft: 10px;\n\tmargin: 0;\n"]))),C=d().button(a||(a=b(["\n\tposition: absolute;\n\ttop: 5px;\n\tright: 10px;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground: none;\n\tborder: none;\n\tcursor: pointer;\n\tz-index: 10002;\n"]))),D=d().h4(o||(o=b(["\n\tmargin: 0;\n"]))),E=d().ul(l||(l=b(["\n\tlist-style: none;\n\tpadding: 0;\n\toverflow: auto;\n\tmax-height: 200px;\n"]))),A=d().textarea(u||(u=b(["\n\tmin-width: 400px;\n\theight: 200px;\n"]))),k=function(e){var t;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e);var n=_(c.useState(!1),2),r=n[0],i=n[1],s=(0,f.useInternalState)(),a=c.useRef(s),o=a.current.state.environment,l=a.current.state.sceneViewer,u=_(c.useState(""),2),h=u[0],d=u[1],p=function(e,t){var n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,r.click()},m=function(){var e=v(g().mark(function e(){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Download Scene"),e.next=3,o.exportSceneToGlb();case 3:t=e.sent,p(t,"scene.glb"),console.log("Scene downloaded");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=v(g().mark(function e(){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Download TryOn GLB"),e.next=3,o.exportTryOnMesh();case 3:t=e.sent,p(t,"tryon.glb"),console.log("TryOn GLB downloaded");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return c.useEffect(function(){var e,t,n=null===l||void 0===l||null===(e=l.zkScene)||void 0===e||null===(t=e.getSceneConfig())||void 0===t?void 0:t.toJSON();n&&d(JSON.stringify(n,null,2))},[l]),c.createElement(x,{$hideCursor:r,onClick:function(){r||i(!0)}},c.createElement(S,null,"Debug Panel"),r&&c.createElement(C,{onClick:function(){i(!r)}},"X"),r&&c.createElement(w,null,c.createElement("button",{onClick:m},"Download Scene"),c.createElement("button",{onClick:y},"Download TryOn GLB"),c.createElement(w,null,c.createElement(D,null,"Mesh list"),c.createElement(E,null,null===l||void 0===l||null===(t=l.scene)||void 0===t?void 0:t.meshes.map(function(e){return c.createElement("li",{key:e.id},c.createElement("button",{onClick:function(){e.visibility=1}},"Show"),c.createElement("button",{onClick:function(){e.visibility=0}},"Hide"),c.createElement("span",null,e.name))})),c.createElement("button",{onClick:function(){var e;console.log(null===l||void 0===l||null===(e=l.scene)||void 0===e?void 0:e.meshes)}},"Log Meshes"),c.createElement("button",{onClick:function(){var e;console.log(null===l||void 0===l||null===(e=l.scene)||void 0===e?void 0:e.materials)}},"Log Materials"),c.createElement("button",{onClick:function(){var e;console.log(null===l||void 0===l||null===(e=l.scene)||void 0===e?void 0:e.textures)}},"Log Textures")),c.createElement(w,null,c.createElement(D,null,"Scene config"),c.createElement(A,{value:h,onChange:function(e){return d(e.target.value)}}),c.createElement("button",{onClick:function(){var e,t;console.log(null===l||void 0===l||null===(e=l.zkScene)||void 0===e||null===(t=e.getSceneConfig())||void 0===t?void 0:t.toJSON())}},"Log Scene Config"),c.createElement("button",{onClick:function(){null===l||void 0===l||l.loadSceneConfig(JSON.parse(h)),null===l||void 0===l||l.setRenderingNeeded(),null===l||void 0===l||l.refreshRendering()}},"Apply Scene Config"))))}},"./src/components/sceneViewer.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ZakekeViewer:()=>p});var r,i=n("react"),s=n("styled-components"),a=n.n(s),o=n("./src/helpers.tsx"),l=n("./src/hooks/useZakeke.ts"),u=n("./src/state/provider.tsx"),c=n("./src/components/debugs/debugPanel.tsx");function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=a().div(r||(r=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n\toutline: none !important;\n\n\tcanvas {\n\t\toutline: none !important;\n\t\tbackground-color: ",";\n\t}\n"])),function(e){return e.backgroundColor?e.backgroundColor:"transparent"}),p=function(e){var t=e.className,n=e.bgColor,r=h(i.useState((0,o.uuid)()),1)[0],s=(0,l.useZakeke)(),a=s.isViewerReady,d=s.internalAppendViewer,p=s.backgroundColor,g=s.removeBackground,m=(0,u.useInternalState)(),v=i.useRef(m);return(0,i.useEffect)(function(){a&&d(document.getElementById("zakeke-viewer-container-"+r))},[a]),i.createElement(f,{backgroundColor:n&&!g?n:p&&!g?p:p?null:"#f2f2f2",id:"zakeke-viewer-container-"+r,className:"zakeke-viewer-container ".concat(t)},(null===v||void 0===v?void 0:v.current.state.isDebug)&&i.createElement(c.DebugPanel,null))}},"./src/components/tryon/tryOnFrame.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TryOnFrame:()=>c});var r,i=n("react"),s=n.n(i),a=n("styled-components");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=n.n(a)().iframe(r||(r=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\twidth: 100%;\n\theight: 100%;\n\tborder: none;\n\toutline: none;\n"]))),c=function(e){var t=(0,i.useRef)(null),n=o((0,i.useState)(!1),2),r=n[0],a=n[1],l=o((0,i.useState)(null),2),c=l[0],h=l[1],d=o((0,i.useState)(!1),2),f=(d[0],d[1]),p=null===t||void 0===t?void 0:t.current,g=null===p||void 0===p?void 0:p.contentWindow;return(0,i.useEffect)(function(){p&&g&&(e.onReady&&e.onReady(g),c&&clearTimeout(c),f(!0),null===p||void 0===p||p.setAttribute("src","about:blank"),h(setTimeout(function(){f(!1),null===p||void 0===p||p.setAttribute("src",e.providerUrl)},1500)))},[g]),(0,i.useEffect)(function(){return r||(a(!0),window.addEventListener("message",e.outMessageHandler)),function(){r&&(window.removeEventListener("message",e.outMessageHandler),a(!1))}},[]),s().createElement(u,{ref:t,className:e.className?e.className:" tryon-"+e.providerTitle+"-frame",src:"about:blank",scrolling:"no",allowFullScreen:!0,allow:"accelerometer; magnetometer; autoplay; encrypted-media; gyroscope; picture-in-picture; camera *; xr-spatial-tracking;"})}},"./src/components/tryon/tryOnModels.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{PupillaryDistanceBaseProviderReceivedMessage:()=>a,PupillaryDistanceBaseProviderResponseMessage:()=>o,TryOnBaseProviderReceivedMessage:()=>i,TryOnBaseProviderResponseMessage:()=>s,TryOnMode:()=>r,parseJSON:()=>l});var r=function(e){return e[e.TryOn=1]="TryOn",e[e.PDTool=2]="PDTool",e}({}),i={Start:"",WaitingAuthentication:"WAITING_AUTH",AuthSuccessful:"AUTH_SUCCESS",AuthError:"AUTH_ERROR",WebcamError:"WEBCAM_ERROR"},s={},a={Start:"",WaitingAuthentication:"WAITING_AUTH",AuthSuccessful:"AUTH_SUCCESS",AuthError:"AUTH_ERROR"},o={};function l(e){try{return JSON.parse(e)}catch(t){return null}}},"./src/components/tryon/tryOnProviders/tryOnBanuba.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{BanubaTryOn:()=>w,BanubaTryOnReceivedMessage:()=>_,BanubaTryOnResponseMessage:()=>b});var r,i=n("react"),s=n.n(i),a=n("styled-components"),o=n.n(a),l=n("./src/components/tryon/tryOnModels.ts"),u=n("./src/hooks/tryonContext.ts"),c=n("./src/components/tryon/tryOnFrame.tsx"),h=n("./src/state/provider.tsx");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=m(m({},l.TryOnBaseProviderReceivedMessage),{WaitingAuthentication:"WAITING_AUTH",TryOnLoaded:"MODEL_LOADED",ScreenShotTaken:"SCREENSHOT_TAKEN",WebcamStopped:"WEBCAM_STOPPED"}),y=[],b=m(m({},l.TryOnBaseProviderResponseMessage),{StartAuthenticationTryOn:"AUTH",LoadTryOn:"LOAD_MODEL",LoadHands:"LOAD_HANDS",TakeScreenshot:"TAKE_SCREENSHOT",StopWebcam:"STOP_WEBCAM"}),x=o().div(r||(r=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\t& .tryon-banuba-frame {\n\t\twidth: 77%;\n\t\theight: 100%;\n\t\tborder: none;\n\t\toutline: none;\n\t\tmargin: auto;\n\t}\n"]))),w=function(e){var t=(0,h.useInternalState)(),n=(0,i.useRef)(t);n.current=t,n.current.state.environment;var r=f((0,i.useState)({}),2),a=r[0],o=r[1],l=(0,u.useZakekeTryOn)(),d=l.tryon,p=l.setTryon,g=f((0,i.useState)(null),2),v=g[0],w=g[1],S=(0,i.useRef)();S.current=v,(0,i.useEffect)(function(){p(m(m({},d),{},{closeFrame:function(){var e;return null===d||void 0===d||null===(e=d.setVisible)||void 0===e?void 0:e.call(d,!1)},takeScreenshot:function(){return C(S.current,b.TakeScreenshot,null)},switchToPDTool:function(){console.log("switchToPDTool")},switchToTryOn:function(){console.log("switchToTryOn")},startPupillaryDistance:function(e){console.log("startPupillaryDistance")}}))},[]),(0,i.useEffect)(function(){var t,n;switch(a.type){case _.Start:break;case _.WaitingAuthentication:C(v,b.StartAuthenticationTryOn,{token:Zakeke.config.banubaSettings.token});break;case _.AuthSuccessful:if(y.includes(e.product.typeID))return C(v,b.LoadHands,null),void setTimeout(function(){C(v,b.LoadTryOn,{glb:e.obj,settings:e.fineTuningSettings})},1500);C(v,b.LoadTryOn,{glb:e.obj,settings:e.fineTuningSettings});break;case _.TryOnLoaded:null===(t=e.onLoaded)||void 0===t||t.call(e);break;case _.WebcamError:e.onWebcamError();break;case _.WebcamStopped:null===(n=e.onClose)||void 0===n||n.call(e)}},[a]);var C=function(e,t,n){e.postMessage(m({type:t},n),"*")};return s().createElement(x,{className:"Banuba-tryon ".concat(e.className?e.className:"")},s().createElement(c.TryOnFrame,{providerTitle:"banuba",providerUrl:Zakeke.config.banubaSettings.url,onReady:function(t){var n;w(t),null===(n=e.onReady)||void 0===n||n.call(e)},outMessageHandler:function(e){o(e.data)}.bind(void 0)}))}},"./src/components/tryon/tryOnProviders/tryOnMazing.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{MazingPupillaryDistance:()=>D,MazingPupillaryDistanceResponseMessage:()=>w,MazingPupillaryDistanceStateReceivedMessage:()=>x,MazingTryOn:()=>C,MazingTryOnReceivedMessage:()=>y,MazingTryOnResponseMessage:()=>b});var r,i=n("react"),s=n.n(i),a=n("styled-components"),o=n.n(a),l=n("./src/components/tryon/tryOnModels.ts"),u=n("./src/hooks/tryonContext.ts"),c=n("./src/components/tryon/tryOnFrame.tsx"),h=n("./src/state/provider.tsx"),d=void 0;function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=v(v({},l.TryOnBaseProviderReceivedMessage),{WaitingAuthentication:"WAITING_AUTH",TryOnLoaded:"MODEL_LOADED",ScreenShotTaken:"SCREENSHOT_TAKEN",WebcamStopped:"WEBCAM_STOPPED"}),b=v(v({},l.TryOnBaseProviderResponseMessage),{StartAuthenticationTryOn:"AUTH_TRY_ON",LoadTryOn:"LOAD_MODEL",TakeScreenshot:"TAKE_SCREENSHOT",StopWebcam:"STOP_WEBCAM"}),x=v(v({},l.PupillaryDistanceBaseProviderReceivedMessage),{PDLoaded:"PD_LOADED",PDUpdated:"NEW_PD",PDDataNotFoundError:"PD_ERROR",WebcamError:"WEBCAM_ERROR",PDCountdown:"PD_COUNTDOWN",WebcamStopped:"WEBCAM_STOPPED"}),w=v(v({},l.PupillaryDistanceBaseProviderResponseMessage),{StartAuthenticationPD:"AUTH_TRY_ON",LoadPD:"LOAD_PD",StartPD:"START_PD",StopWebcam:"STOP_WEBCAM"}),S=o().div(r||(r=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n"]))),C=function(e){var t=(0,h.useInternalState)(),n=(0,i.useRef)(t);n.current=t;var r=n.current.state.environment,a=p((0,i.useState)({}),2),o=a[0],f=a[1],g=(0,u.useZakekeTryOn)(),m=g.tryon,_=g.setTryon,C=(g.tryOnPickedMode,g.setTryOnPickedMode,p((0,i.useState)(null),2)),D=C[0],E=C[1],A=(0,i.useRef)();A.current=D;var k=(0,l.parseJSON)(e.customer.settings).uid,M=(0,l.parseJSON)(e.product.settings).uid,T=p((0,i.useState)(!1),2),I=(T[0],T[1]);(0,i.useEffect)(function(){_(v(v({},m),{},{closeFrame:function(){return O(A.current,b.StopWebcam,null)},takeScreenshot:function(){return O(A.current,b.TakeScreenshot,null)},switchToPDTool:function(){var e;I(!0),O(A.current,w.LoadPD,null),null===(e=m.changeMode)||void 0===e||e.call(m,l.TryOnMode.PDTool)},switchToTryOn:function(){var t;I(!1),O(A.current,b.LoadTryOn,{glb:e.obj,settings:e.fineTuningSettings}),null===(t=m.changeMode)||void 0===t||t.call(m,l.TryOnMode.TryOn)},startPupillaryDistance:function(e){O(A.current,w.StartPD,{seconds:e})}}))},[]),(0,i.useEffect)(function(){var t,n,i,s,a,l;switch(o.type){case y.Start:break;case y.WaitingAuthentication:O(D,b.StartAuthenticationTryOn,{customer_uid:k,product_uid:M});break;case y.AuthSuccessful:O(D,b.LoadTryOn,{glb:e.obj,settings:e.fineTuningSettings});break;case y.TryOnLoaded:null===(t=e.onLoaded)||void 0===t||t.call(e);break;case x.PDLoaded:null===(n=e.onLoaded)||void 0===n||n.call(e);break;case x.PDUpdated:r.setPDDistance(null===(i=o.value)||void 0===i?void 0:i.pd),null===(s=e.onPDUpdated)||void 0===s||s.call(e,null===(a=o.value)||void 0===a?void 0:a.pd);break;case x.PDDataNotFoundError:break;case y.WebcamError:e.onWebcamError();break;case y.WebcamStopped:null===(l=e.onClose)||void 0===l||l.call(e)}},[o]);var O=function(e,t,n){e.postMessage({type:t,value:n},"*")};return s().createElement(S,{className:"mazing-tryon ".concat(e.className?e.className:"")},s().createElement(c.TryOnFrame,{providerTitle:"Mazing",providerUrl:Zakeke.config.mazingSettings.url,onReady:function(t){var n;E(t),null===(n=e.onReady)||void 0===n||n.call(e)},outMessageHandler:function(e){f(e.data)}.bind(d)}))},D=function(e){var t=p((0,i.useState)({}),2),n=t[0],r=t[1],a=(0,u.useZakekeTryOn)(),o=a.tryon,f=a.setTryon,g=(0,h.useInternalState)(),m=(0,i.useRef)(g);m.current=g;var _=m.current.state.environment,y=p((0,i.useState)(null),2),b=y[0],C=y[1],D=(0,i.useRef)();D.current=b;var E=(0,l.parseJSON)(e.customer.settings).uid,A=(0,l.parseJSON)(e.product.settings).uid;(0,i.useEffect)(function(){f(v(v({},o),{},{closeFrame:function(){return k(D.current,w.StopWebcam,null)},switchToPDTool:function(){console.log("switchToPDTool not active")},switchToTryOn:function(){console.log("switchToTryOn not active")},takeScreenshot:function(){return console.log("takeScreenshot not active")},startPupillaryDistance:function(e){return k(D.current,w.StartPD,{seconds:e})}}))},[]),(0,i.useEffect)(function(){var t,r,i;switch(n.type){case x.Start:break;case x.WaitingAuthentication:k(b,w.StartAuthenticationPD,{customer_uid:E,product_uid:A});break;case x.AuthSuccessful:k(b,w.LoadPD,{});break;case x.PDLoaded:null===(t=e.onLoaded)||void 0===t||t.call(e);break;case x.PDUpdated:_.setPDDistance(n.value.pd),null===(r=e.onPDUpdated)||void 0===r||r.call(e,n.value.pd);break;case x.PDDataNotFoundError:break;case x.WebcamError:e.onWebcamError();break;case x.WebcamStopped:null===(i=e.onClose)||void 0===i||i.call(e)}},[n]);var k=function(e,t,n){e.postMessage({type:t,value:n},"*")};return s().createElement(S,{className:"mazing-pd ".concat(e.className?e.className:"")},s().createElement(c.TryOnFrame,{providerTitle:"mazing",providerUrl:Zakeke.config.mazingSettings.url,onReady:function(t){var n;C(t),null===(n=e.onReady)||void 0===n||n.call(e)},outMessageHandler:function(e){var t;null!==(t=e.data)&&void 0!==t&&t.type&&r(e.data)}.bind(d)}))}},"./src/components/tryon/tryOnViewer.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{PupillaryDistanceView:()=>k,TryOnView:()=>A,ZakekeTryOnViewer:()=>E});var r,i,s,a=n("react"),o=n.n(a),l=n("styled-components"),u=n.n(l),c=n("./src/models.ts"),h=n("./src/state/provider.tsx"),d=n("./src/hooks/tryonContext.ts"),f=n("./src/components/tryon/tryOnModels.ts"),p=n("./src/components/tryon/tryOnProviders/tryOnMazing.tsx"),g=n("./src/components/tryon/tryOnProviders/tryOnBanuba.tsx");function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=u().div(r||(r=w(["\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: black;\n\topacity: 0.5;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 3;\n"]))),C=u().div(i||(i=w(["\n\twidth: 100%;\n\theight: 100%;\n\tposition: fixed;\n\tbackground-color: white;\n\tz-index: 6;\n\tleft: 0%;\n\ttop: 0%;\n"]))),D=u().div(s||(s=w(["\n\twidth: 100%;\n\theight: 100%;\n\tposition: fixed;\n\tbackground-color: white;\n\tz-index: 6;\n\tleft: 0%;\n\ttop: 0%;\n"]))),E=(0,a.forwardRef)(function(e,t){var n,r=(0,h.useInternalState)(),i=(0,a.useRef)(r);i.current=r;var s=null===(n=i.current)||void 0===n?void 0:n.state.environment,l=b((0,a.useState)({}),2),u=l[0],c=l[1],p=b((0,a.useState)(f.TryOnMode.TryOn),2),g=p[0],m=p[1],v=b((0,a.useState)(!1),2),y=v[0],x=v[1],w={tryon:u,setTryon:c,tryOnPickedMode:g,setTryOnPickedMode:m,tryOnVisibility:y,setTryOnVisibility:x},C=b((0,a.useState)({}),2),D=C[0],E=C[1],M=b((0,a.useState)(!1),2),T=M[0],I=M[1],O=b((0,a.useState)(!1),2),L=O[0],P=O[1],B=function(t,n){var r;s.tryOnCountView(t,n,g),null===(r=e.onReady)||void 0===r||r.call(e)};return(0,a.useEffect)(function(){c(_(_({},u),{},{mode:g,changeMode:function(e){m(e)},visible:y,setVisible:function(e){x(e)}}))},[]),(0,a.useEffect)(function(){I(!!e.switchable)},[e.switchable]),(0,a.useMemo)(function(){c(_(_({},u),{},{mode:g}))},[g]),(0,a.useEffect)(function(){y&&(L&&!T&&P(!1),console.log("fetching data"),s.exportTryOnMesh().then(function(e){if(s.tryOnSellerSettings){var t=s.tryOnProductSettings,n=s.tryOnSellerSettings;E({product:t,customer:n,provider:t.providerID,mode:g,obj:e,settings:s.tryOnMeshVisibleSettings}),setTimeout(function(){P(!0)},500)}}))},[g,y]),(0,a.useImperativeHandle)(t,function(){return{closeFrame:u.closeFrame,takeScreenshot:u.takeScreenshot,switchToPDTool:u.switchToPDTool,switchToTryOn:u.switchToTryOn,startPupillaryDistance:u.startPupillaryDistance,mode:u.mode,changeMode:u.changeMode,visible:u.visible,setVisible:u.setVisible}},[u]),o().createElement(d.TryOnContext.Provider,{value:w},y&&o().createElement(o().Fragment,null,L&&g===f.TryOnMode.PDTool&&!T&&o().createElement(k,{className:"tryon-pd-tool"+(e.className?" "+e.className:""),provider:D.provider,product:D.product,customer:D.customer,onReady:function(){return B(D.customer.sellerID,D.product.providerID)},onLoaded:e.onLoaded,onPDUpdated:e.onPDUpdated,onClose:e.onClose,onWebcamError:e.onWebcamError}),L&&(g===f.TryOnMode.TryOn||T)&&o().createElement(A,{className:"tryon-view-tool"+(e.className?" "+e.className:""),provider:D.product.providerID,type:D.product.typeID,obj:D.obj,settings:s.tryOnMeshVisibleSettings,product:D.product,customer:D.customer,onPDUpdated:e.onPDUpdated,onReady:function(){return B(D.customer.sellerID,D.product.providerID)},onLoaded:e.onLoaded,onClose:e.onClose,onWebcamError:e.onWebcamError}),e.children,o().createElement(S,null)))}),A=function(e){var t,n=(0,h.useInternalState)(),r=(0,a.useRef)(n);r.current=n;var i=null===(t=r.current)||void 0===t?void 0:t.state.environment;return o().createElement(C,{className:e.className?e.className:" tryon-viewer"},function(){var t,n=null!==(t=i.tryOnProvidersSettings)&&void 0!==t?t:{list:{}},r=c.TryOnProvider.NotSelected;switch(n&&n.list&&e.type.toString()in n.list&&(r=n.list[e.type.toString()]),r){case c.TryOnProvider.Mazing:return o().createElement(p.MazingTryOn,{obj:e.obj,className:e.className,product:e.product,customer:e.customer,fineTuningSettings:e.settings?e.settings:c.DefaultMazingFineTuningSettings,onReady:e.onReady,onLoaded:e.onLoaded,onClose:e.onClose,onPDUpdated:e.onPDUpdated,onWebcamError:e.onWebcamError});case c.TryOnProvider.Banuba:return o().createElement(g.BanubaTryOn,{obj:e.obj,className:e.className,product:e.product,customer:e.customer,fineTuningSettings:e.settings?e.settings:c.DefaultBanubaFineTuningSettings,onReady:e.onReady,onLoaded:e.onLoaded,onClose:e.onClose,onPDUpdated:e.onPDUpdated,onWebcamError:e.onWebcamError});default:return o().createElement("div",null,"Unsupported Type")}}())},k=function(e){return o().createElement(D,{className:e.className},e.provider===c.TryOnProvider.Mazing?o().createElement(p.MazingPupillaryDistance,{product:e.product,customer:e.customer,onPDUpdated:e.onPDUpdated,onReady:e.onReady,onLoaded:e.onLoaded,className:e.className,onClose:e.onClose,onWebcamError:e.onWebcamError}):o().createElement("div",null,"Unsupported Provider"))}},"./src/environment.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ZakekeEnvironment:()=>I});var r=n("./node_modules/@zakeke/zakeke-3d-core/dist/index.js"),i=n("./node_modules/lodash/lodash.js"),s=n.n(i),a=n("./src/index.tsx"),o=n("../../libs/pricingRuleBase/DesignPriceCalculatorRuleBased.tsx"),l=n("./src/api.ts"),u=n("./src/exceptions.tsx"),c=n("./src/fontsManager.ts"),h=n("./src/helpers.tsx"),d=n("./src/imageUploadTask.ts"),f=n("./src/integrations/Integration.ts"),p=n("./src/integrations/helpers.ts"),g=n("./src/models.ts"),m=n("./node_modules/axios/lib/axios.js");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){M(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){w=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var s=t&&t.prototype instanceof v?t:v,a=Object.create(s.prototype),o=new O(r||[]);return i(a,"_invoke",{value:k(e,n,o)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",m={};function v(){}function _(){}function y(){}var x={};u(x,a,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,a)&&(x=C);var D=y.prototype=v.prototype=Object.create(x);function E(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,s,a,o){var l=h(e[i],e,s);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==b(c)&&r.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(c).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,o)})}o(l.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return s=s?s.then(i,i):i()}})}function k(t,n,r){var i=d;return function(s,a){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=h(t,n,r);if("normal"===u.type){if(i=r.done?g:f,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var s=h(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(b(t)+" is not iterable")}return _.prototype=y,i(D,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:_,configurable:!0}),_.displayName=u(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,l,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),u(A.prototype,o,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(c(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),u(D,l,"Generator"),u(D,a,function(){return this}),u(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function S(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function C(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(e){S(s,r,i,a,o,"next",e)}function o(e){S(s,r,i,a,o,"throw",e)}a(void 0)})}}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=E(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function E(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function M(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var I=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,"booted",!1),M(this,"platformAttributesSelection",[]),M(this,"previewWidth",1024),M(this,"previewHeight",1024),M(this,"clientPreviewWidth",1024),M(this,"clientPreviewHeight",1024),M(this,"shareUrlPrefix",null),M(this,"events",[]),M(this,"zkProduct",null),M(this,"zkScene",null),M(this,"zkCurrentTemplate",null),M(this,"zkTemplates",[]),M(this,"internalIsFullscreen",!1),M(this,"highlightSettings",null),M(this,"previousMeshesVisibleStates",{}),M(this,"lastCameraLocation",null),M(this,"enableShareCompositionUrl",!1),M(this,"sharedCompositionDocId",null),M(this,"templateId",null),M(this,"loadedComposition",null),M(this,"savedCompositions",null),M(this,"isDraftEditor",!1),M(this,"isViewerMode",!1),M(this,"isTemplateEditor",!1),M(this,"debugMode",!1),M(this,"draftCompositionDocId",null),M(this,"undoStack",[]),M(this,"redoStack",[]),M(this,"currentAttributesSelection",null),M(this,"currentCompositionInfo",null),M(this,"copyrightMessageLocalStorageKey",""),M(this,"isPupillaryDistanceMandatory",!1),M(this,"isAIEnabled",!1),M(this,"sellerSettings",null),M(this,"themeCompositions",null),M(this,"currency","EUR"),M(this,"groups",[]),M(this,"fonts",[]),M(this,"disableTextColors",!1),M(this,"textColors",[]),M(this,"defaultColor",""),M(this,"quantity",1),M(this,"quantityRule",null),M(this,"culture","en-US"),M(this,"price",0),M(this,"isOutOfStock",!1),M(this,"compositionId",null),M(this,"templates",[]),M(this,"currentTemplate",null),M(this,"product",null),M(this,"templateMacroCategories",null),M(this,"selectedTemplateCategory",null),M(this,"cameras",[]),M(this,"isExplodedMode",!1),M(this,"isAssetsLoading",!1),M(this,"additionalCustomProperties",[]),M(this,"nftSettings",null),M(this,"eventMessages",null),M(this,"personalizedMessages",null),M(this,"visibleEventMessages",[]),M(this,"tryOnProvidersSettings",null),M(this,"tryOnProductSettings",null),M(this,"tryOnSellerSettings",null),M(this,"pdSettings",-1),M(this,"isInfoPointContentVisible",!1),M(this,"internalTranslations",{statics:[],dynamics:[]}),M(this,"integrationVersion",1),M(this,"translations",null),M(this,"useLegacyScreenshot",!1),M(this,"uiConfig",null),M(this,"backgroundColor",null),M(this,"removeBackground",!1),M(this,"parseParameters",function(e){console.info("Parameters",e);var n=function(e){return decodeURIComponent(e.toString().replaceAll("%","").replace(/\+/g,"%20"))},r=function(e,r){var i;if(r)switch(e){case"name":t.productName=n(r);break;case"ecommerce":t.platform=decodeURIComponent(r);break;case"qty":t.quantity=parseFloat(decodeURIComponent(r));break;case"culture":t.culture=decodeURIComponent(r);break;case"currency":t.currency=decodeURIComponent(r);break;case"token":t.token=decodeURIComponent(r);break;case"compositionId":t.compositionId=decodeURIComponent(r);break;case"modelCode":t.productCode=n(r);break;case"previewWidth":t.previewWidth=parseInt(n(r));break;case"previewHeight":t.previewHeight=parseInt(n(r));break;case"shareUrlPrefix":t.shareUrlPrefix=n(r);break;case"sharedCompositionDocId":t.sharedCompositionDocId=n(r);break;case"templateId":t.templateId=n(r);break;case"isDraftEditor":t.isDraftEditor=!0;break;case"enableShareCompositionUrl":t.enableShareCompositionUrl=!0;break;case"draftCompositionDocId":t.draftCompositionDocId=r;break;case"viewerMode":t.isViewerMode=!0;break;case"isTemplateEditor":t.isTemplateEditor=!0;break;case"selectedTemplateCategory":t.selectedTemplateCategory=n(r);case"legacyScreenshot":t.useLegacyScreenshot="1"==r;break;case"integrationVersion":t.integrationVersion=null!==(i=parseInt(r))&&void 0!==i?i:1;case"debugMode":t.debugMode="1"==r||"true"==r}};if(e)for(var i in e){var s=e[i];if(r(i,s),0==i.indexOf("attributes")){var a,o=D(s);try{for(o.s();!(a=o.n()).done;){var l=a.value;""!==l[0].id&&""!==l[1].id&&t.platformAttributesSelection.push(new f.PlatformAttributeSelection(JSON.stringify(l[0]),JSON.stringify(l[1]),"","",!0,!0))}}catch(w){o.e(w)}finally{o.f()}}}else for(var c=window.location.href.substring(window.location.href.lastIndexOf("?")+1).split("&"),h=0;h<c.length;h++){var d=c[h].indexOf("=");if(-1==d)throw new u.ParametersParseFailException(c[h]);var p=decodeURIComponent(c[h].substring(0,d)),g=c[h].substring(d+1);if(r(p,g),0==p.indexOf("attributes")){var m=decodeURIComponent(g.replace(/\+/g,"%20"));if(m&&""!=m){var v,_=D(JSON.parse(m));try{for(_.s();!(v=_.n()).done;){var y=v.value;""!==y[0].id&&""!==y[1].id&&t.platformAttributesSelection.push(new f.PlatformAttributeSelection(JSON.stringify(y[0]),JSON.stringify(y[1]),"","",!0,!0))}}catch(w){_.e(w)}finally{_.f()}}}}var b={"culture (in xx_XX format)":t.culture,currency:t.currency,"name (product name)":t.productName,ecommerce:t.platform,"qty (product quantity)":t.quantity,token:t.token,modelCode:t.productCode};for(var x in b)if(!b[x])throw new u.Exception("Missing parameter: "+x);return window.token=t.token,window.isOwin=!0,!0}),M(this,"getProduct",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.productCode&&""!=t.productCode){e.next=2;break}throw new u.Exception("Loading product but no SKU found");case 2:return e.abrupt("return",new Promise(function(e,n){var r=new MPlaza.Model;r.set("modelID",1),r.fetch({success:function(){e(r)},error:function(){n(new u.Exception("Failed loading product"))},data:{c:t.productCode}})}));case 3:case"end":return e.stop()}},e)}))),M(this,"getScene",function(){var e=C(w().mark(function e(t){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new u.Exception("Loading scene but no product found");case 2:if(0!=t.get("scenes").length){e.next=4;break}throw new u.Exception("The product don't have any scene configured");case 4:return(n=new Zakeke.Scene).set("sceneID",t.get("scenes").at(0).get("sceneID")),e.abrupt("return",new Promise(function(e,t){n.fetch({success:function(t){e(t)},error:function(){t(new u.Exception("Failed loading scene"))}})}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getComposerModels",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.productCode&&""!=t.productCode){e.next=2;break}throw new u.Exception("Loading product but no SKU found");case 2:return e.abrupt("return",new Promise(function(e,n){var r=new Zakeke.ComposerModels;r.set("modelID",1),r.fetch({success:function(){e(r)},error:function(){n(new u.Exception("Failed loading product"))},data:{c:t.productCode}})}));case 3:case"end":return e.stop()}},e)}))),M(this,"getFonts",C(w().mark(function e(){var n,r,i,s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("fontfamilies/");case 2:return i=e.sent.data,(s=null!==(n=null===(r=t.zkProduct)||void 0===r?void 0:r.get("printTypes").at(0).get("fonts").map(function(e){return e.get("fontFamilyID")}))&&void 0!==n?n:[]).length>0&&(i=i.filter(function(e){return-1!=s.indexOf(e.fontFamilyID)})),e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}))),M(this,"getSettings",C(w().mark(function e(){var t;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("customizerinfo/");case 2:return t=e.sent.data,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))),M(this,"getSellerSetting",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=C(w().mark(function e(t,n){var r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("sellerSetting/");case 2:r=e.sent.data,t(r);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))),M(this,"createQuote",function(){var e=C(w().mark(function e(n){var r,i,s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new g.Quote).formData=JSON.stringify(n),i.quantity=t.quantity,i.compositionDocID=t.composition.get("docID"),e.next=6,t.getPrice();case 6:return i.modelPrice=e.sent.price,i.variantName=null!==(r=t.product.name)&&void 0!==r?r:"",e.next=10,l.axiosApi.post(Zakeke.config.baseApiUrl+"quotes",i);case 10:return s=e.sent.data,e.abrupt("return",s);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getPrice",C(w().mark(function e(){var n,r,i,s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,r=!1,console.log("Get price from store (integration version "+t.integrationVersion+")..."),e.next=5,t.integration.getPrice(t.composition,t.zkCurrentTemplate,t.zkProduct,t.platformAttributesSelection,t.composition.getPrice(t.zkProduct,t.quantity),t.settings.additionalFeatures.prices3dConfigurator,t.settings.isPricingAdvancedEnabled,t.quantity,0);case 5:return i=e.sent,1===t.integrationVersion?n=i:2===t.integrationVersion&&(n=(s=i).price,r=s.isOutOfStock),console.log("Price from store: "+n),e.abrupt("return",{price:n,isOutOfStock:r});case 9:case"end":return e.stop()}},e)}))),M(this,"getTranslations",C(w().mark(function e(){var t;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.axiosApi.get("sellerLocalizations/customizer-localizations");case 3:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",t.data);case 8:console.log("getTranslations response is empty");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}))),M(this,"loadLocalization",C(w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.culture,-1==Zakeke.config.avaibleLanguages.indexOf(n)&&(n=t.culture.substring(0,2)),-1==Zakeke.config.avaibleLanguages.lastIndexOf(n)&&(n="en"),e.next=5,t.loadScript(Zakeke.config.baseUrl+"Scripts/localizations/".concat(n.toLowerCase(),"/composer.js"));case 5:case"end":return e.stop()}},e)}))),M(this,"getTemplateMacroCategories",C(w().mark(function e(){var t,n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("compositionmacrocategories");case 2:return t=e.sent,n=t.data.map(function(e){var t=e.category.map(function(e){return{categoryName:e.name,categoryID:e.categoryID}});return{macroCategoryName:e.name,macroCategoryID:e.macroCategoryID,categories:t}}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))),M(this,"loadScript",function(){var e=C(w().mark(function e(t){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=document.createElement("script");r.onload=e,r.src=t,document.body.appendChild(r)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"validationNFTEmail",function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}),M(this,"validationNFTWalletAddress",function(e){return/^0x[a-fA-F0-9]{40}$/.test(e)}),M(this,"saveCustomerWalletInfo",function(){var e=C(w().mark(function e(t,n,r){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.post(Zakeke.config.baseApiUrl+"customerwalletdocs",{email:n,walletAddress:r,zakekeEnvironment:2,compositionDocID:t});case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),M(this,"setCopyrightMessageAccepted",function(e){try{e?window.localStorage.setItem(t.copyrightMessageLocalStorageKey,e.toString()):window.localStorage.removeItem(t.copyrightMessageLocalStorageKey)}catch(n){}}),M(this,"getCopyrightMessageAccepted",function(){var e=!1;try{e=!!window.localStorage.getItem(t.copyrightMessageLocalStorageKey)}catch(n){}return e}),M(this,"boot",function(){var e=C(w().mark(function e(n){var i,s,u,c,d,f,m,v,_,y,b,S,C,D,E,A,k,M,T,I,O,L,P,B,N;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.booted){e.next=2;break}return e.abrupt("return");case 2:return t.booted=!0,t.parseParameters(n),(0,l.setupApi)(t.culture,t.token),e.next=7,t.loadLocalization();case 7:return e.next=9,t.getSettings();case 9:return t.settings=e.sent,t.copyrightMessageLocalStorageKey=t.settings.userID+"_copyright_accepted",t.eventMessages=t.settings.eventMessages.map(function(e){return a.EventMessage.fromMessage(e)}),console.log(t.eventMessages,"eventMessages"),t.nftSettings=t.settings.nftSettings,t.isAIEnabled=t.settings.additionalFeatures.aiPoweredTools,t.trigger("change"),e.next=18,t.getTranslations();case 18:return t.internalTranslations=e.sent,O=new Map(t.internalTranslations.statics.map(function(e){return[e.original,e.localization]})),L=new Map(t.internalTranslations.dynamics.map(function(e){return[e.original,e.localization]})),t.translations={statics:O,dynamics:L},h.T.translations=t.translations,t.trigger("change"),e.next=26,t.getComposerModels();case 26:return(P=e.sent).get("scene").get("config")||P.set("config",P.get("model").get("sceneConfig")),t.zkScene=P.get("scene"),t.zkProduct=P.get("model"),null!==(i=t.zkScene)&&void 0!==i&&i.get("config")&&null!==(s=t.zkScene)&&void 0!==s&&null!==(u=s.get("config"))&&void 0!==u&&u.get("uiConfig")&&(t.uiConfig={urlLoader:null!==(c=null===(d=t.zkScene.get("config"))||void 0===d||null===(f=d.get("uiConfig"))||void 0===f?void 0:f.get("urlLoader"))&&void 0!==c?c:"",urlARIcon:null!==(m=null===(v=t.zkScene.get("config"))||void 0===v?void 0:v.get("uiConfig").get("urlARIcon"))&&void 0!==m?m:""}),t.backgroundColor=null!==(_=null===(y=t.zkScene)||void 0===y||null===(b=y.get("config"))||void 0===b||null===(S=b.get("general"))||void 0===S?void 0:S.get("backgroundColor"))&&void 0!==_?_:null,t.removeBackground=null!==(C=null===(D=t.zkScene)||void 0===D||null===(E=D.get("config"))||void 0===E||null===(A=E.get("general"))||void 0===A?void 0:A.get("removeDefaultBackground"))&&void 0!==C&&C,null!==(k=t.zkScene)&&void 0!==k&&k.get("config")&&(t.product=g.Product.fromProduct(t.zkProduct)),t.quantityRule=t.zkProduct.get("quantityRule")?g.ProductQuantityRule.fromQuantityRule(t.zkProduct.get("quantityRule")):null,B=[t.getSettings(),t.getTranslations(),(0,p.integrationFor)(t.platform),t.getSellerSetting(),t.getTemplateMacroCategories(),o.DesignPriceCalculatorRuleFactory.create(t.zkProduct,Zakeke.config.baseApiUrl,t.token,!0,Zakeke.config.cloudFlareApiUrl),t.getFonts(),t.getTemplates(),t.getMessagesByProductCode(t.productCode),t.getTryOnProvidersList(),t.getTryOnProductInfo()],e.next=38,Promise.all(B).then(function(e){var n,r,i=x(e,9),s=i[0],o=i[1],l=i[2],u=i[3],c=i[4],d=i[5],f=i[6],p=i[7],m=i[8];t.settings=s,t.copyrightMessageLocalStorageKey=t.settings.userID+"_copyright_accepted",t.eventMessages=t.settings.eventMessages.map(function(e){return a.EventMessage.fromMessage(e)}),t.nftSettings=t.settings.nftSettings,t.internalTranslations=o,console.log(m,"personalizedMessages"),t.personalizedMessages=m;var v=new Map(t.internalTranslations.statics.map(function(e){return[e.original,e.localization]})),_=new Map(t.internalTranslations.dynamics.map(function(e){return[e.original,e.localization]}));t.translations={statics:v,dynamics:_},h.T.translations=t.translations,t.integration=l,t.sellerSettings=u?g.SellerSettings.fromSellerSettings(u):null,t.templateMacroCategories=c,t.pricingCalculator=d,t.zkProduct.get("colors").length>0&&(t.pricingCalculator.colorID=t.zkProduct.get("colors").at(0).get("colorID")),t.integration.setPricingCalculator(t.pricingCalculator),t.fonts=f;var y=t.getPrintingMethodsRestrictions();t.defaultColor=y.defaultColor,t.disableTextColors=y.disableTextColors,t.textColors=y.textColors,t.zkTemplates=p,t.templates=t.zkTemplates.map(function(e){return g.Template.fromTemplate(e)}),t.cameras=null!==(n=null===(r=t.zkScene)||void 0===r?void 0:r.get("cameraLocations").map(function(e){return g.Camera.fromZkCamera(e)}))&&void 0!==n?n:[],t.tryOnProductSettings&&t.getTryOnSellerInfo(t.tryOnProductSettings.typeID,t.tryOnProductSettings.providerID)});case 38:if(t.zkScene){e.next=40;break}throw new Error("Product has no 3D scene.");case 40:return t.debugMode&&t.trigger("debugMode"),t.trigger("change"),e.next=44,r.SceneViewer.createSceneViewerAsync();case 44:return t.viewer=e.sent,t.trigger("viewer",t.viewer),t.viewer.isHologramSource=!0,t.viewer.addInfoPointPickedListener(function(){t.isInfoPointContentVisible=!0,t.trigger("change")}),t.viewer.addInfoPointContentHiddenListener(function(){t.isInfoPointContentVisible=!1,t.trigger("change")}),t.viewer.addBeginAssetsLoadingListener(function(){t.isAssetsLoading=!0,t.trigger("change")}),t.viewer.addEndAssetsLoadingListener(function(){t.isAssetsLoading=!1,t.trigger("change")}),t.highlightSettings&&(t.viewer.highlightColor=t.highlightSettings.color,t.viewer.highlightSize=t.highlightSettings.size),t.viewer.setLoadingScreen({displayLoadingUI:function(){return null},hideLoadingUI:function(){return null},loadingUIBackgroundColor:"black",loadingUIText:"black"}),t.viewer.infoPointsManagerStyle={imagePanelStyle:{backgroundColor:"white",loadingTextColor:"#cccccc",buttonsBorderColor:"#dddddd",buttonsBorderHighlightColor:"#eeeeee",buttonsColor:"#888888",buttonsHighlightColor:"#555555",buttonsIconColor:"white"}},e.next=56,o.DesignPriceCalculatorRuleFactory.create(t.zkProduct,Zakeke.config.baseApiUrl,t.token,!0,Zakeke.config.cloudFlareApiUrl);case 56:if(t.pricingCalculator=e.sent,t.zkProduct.get("colors").length>0&&(t.pricingCalculator.colorID=t.zkProduct.get("colors").at(0).get("colorID"),t.integration.setPricingCalculator(t.pricingCalculator)),!(t.zkScene&&t.zkScene.get("url")&&t.zkScene.get("url").endsWith(".glb"))){e.next=63;break}return e.next=61,t.loadSceneFromGlbUrl(t.zkScene.get("url"),t.zkScene.get("config"));case 61:e.next=65;break;case 63:return e.next=65,t.viewer.loadSceneFromModelAsync(t.zkProduct,t.zkScene);case 65:return t.settings.brand&&t.viewer.createBrandLogoButton(),null!==(N=null===(M=t.zkScene)||void 0===M||null===(T=M.getTryOnSettings)||void 0===T?void 0:T.call(M))&&void 0!==N&&null!==(I=N.typeSettings)&&void 0!==I&&I.mandatoryPD&&(t.isPupillaryDistanceMandatory=!0),t.trigger("change"),e.next=71,t.handleSceneLoaded();case 71:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"loadSceneFromGlbUrl",function(){var e=C(w().mark(function e(n,r){var i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.toJSON(),console.log(i,"config"),e.next=4,t.viewer.loadFromGlbUrl(n,i);case 4:(0,h.isDAMViewer)()&&t.makeDAMAnalyticsView(g.DAMViewerAnalyticsEventType.ViewProduct);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"appendViewer",function(e){t.viewer&&t.viewer.appendTo(e),t.viewer.updateView(!0,!0)}),M(this,"setHighlightSettings",function(e){t.highlightSettings=e,t.viewer&&(t.viewer.highlightColor=e.color,t.viewer.highlightSize=e.size)}),M(this,"renderDesign",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer||!t.zkCurrentTemplate){e.next=4;break}return e.next=3,t.viewer.renderDesignAsync(t.zkCurrentTemplate);case 3:t.debouncedChange();case 4:case"end":return e.stop()}},e)}))),M(this,"debouncedChange",(0,i.debounce)(function(){return t.trigger("change")},300)),M(this,"restoreLastCameraLocation",function(){t.viewer&&(t.lastCameraLocation&&t.lastCameraLocation!==Zakeke.getEmptyUUID()?(console.log("Restoring last camera location "+t.lastCameraLocation+" ..."),t.setCamera(t.lastCameraLocation,!1,!1)):t.viewer.adjustCamera(!1))}),M(this,"buildRecapProps",s().debounce(function(e){if(t.sellerSettings&&t.sellerSettings.isCompositionRecapEnabled){var n=t.zkProduct.get("attributes"),r=t.zkProduct.get("attributeGroups"),i=t.zkProduct.get("attributeSteps"),s={};e.forEach(function(e){var a,o=n.find(function(t){return t.get("attributeID")==e.attributeID}),l=o.get("options").find(function(t){return t.get("optionID")==e.optionID}),u=r.find(function(e){return e.get("groupID")==o.get("groupID")}),c=i.find(function(e){return e.get("stepID")==o.get("stepID")}),d="";null===(a=t.selection)||void 0===a||a.get("groups").each(function(e){e.get("attributes").each(function(n){var r,i,a,f;n.get("options").find(function(e){return e.get("optionID")==l.get("optionID")})&&n.get("enabled")&&(t.isOptionEnabled(l.get("optionID")),d=-1!==e.get("groupID")?h.T._d(e.get("name"))+" "+h.T._d(o.get("name")):h.T._d(o.get("name")),s["".concat(d)]={groupDisplayOrder:null!==(r=null===u||void 0===u?void 0:u.get("displayOrder"))&&void 0!==r?r:0,stepDisplayOrder:null!==(i=null===c||void 0===c?void 0:c.get("displayOrder"))&&void 0!==i?i:0,attributeDisplayOrder:null!==(a=null===o||void 0===o?void 0:o.get("displayOrder"))&&void 0!==a?a:0,optionDisplayOrder:null!==(f=null===l||void 0===l?void 0:l.get("displayOrder"))&&void 0!==f?f:0,value:h.T._d(l.get("name"))})})})}),t.currentAttributesSelection=s}},200)),M(this,"updateRecapAndExtensionField",function(){var e,n=[];null===(e=t.selection)||void 0===e||e.getAllAttributeSelections().forEach(function(e){e.get("options").forEach(function(e){e.get("selected")&&n.push({attributeID:e.get("attributeID"),optionID:e.get("optionID")})})}),t.getCurrentExtensionFields(n),t.buildRecapProps(n),t.trigger("change")}),M(this,"getCurrentExtensionFields",function(e){var n=[],r={},i=t.zkProduct.get("attributes");e.forEach(function(e){var t=i.find(function(t){return t.get("attributeID")==e.attributeID}).get("options").find(function(t){return t.get("optionID")==e.optionID});t.get("extensionFields").length&&t.get("extensionFields").forEach(function(e){var t;0!==n.length&&-1!=n.indexOf(e.name)||(n.push(e.name),r[e.name]={value:0,label:e.label,formatString:e.formatString}),t=e.dataTypeID===g.ExtensionFieldDataType.Integer?parseInt(e.value):parseFloat(e.value),r[e.name].value+=t})});var s=Object.keys(r).map(function(e){return r[e]});t.additionalCustomProperties=s}),M(this,"handleSceneLoaded",C(w().mark(function e(){var n,r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Scene loaded"),t.selection=Zakeke.ComposerSelection.CreateComposerSelection(t.zkProduct),n=t.templateId||t.draftCompositionDocId||t.sharedCompositionDocId||t.compositionId,void 0==t.initialSelection&&(t.initialSelection=t.cloneSelection(t.selection)),e.next=6,t.internalLoadComposition(n);case 6:if(t.trigger("change"),t.buildStructure(),t.setQuantity(t.quantity),t.renderDesign(),t.viewer.addNotifyMessageListener(function(e,n,r,i,s,a,o,l,u){t.visibleEventMessages.push({areaID:e,itemGuid:n,type:r,title:i,message:s,closabled:a,requiredWidth:o,requiredHeight:l,addToCartDisabledIfVisible:u}),t.trigger("change")}),t.viewer.addRemoveMessageListener(function(e,n){t.visibleEventMessages=t.visibleEventMessages.filter(function(t){return t.areaID!==e&&t.itemGuid!==n}),t.trigger("change")}),t.viewer.setEventMessages(t.settings.eventMessages.map(function(e){return{AddToCartDisabledIfVisible:e.addToCartDisabledIfVisible,AdditionalData:e.additionalData,Closeable:e.closeable,Description:e.description,EnableCheckForSellerImages:e.enableCheckForSellerImages,EventID:e.eventID,Visible:e.visible}})),t.sellerSettings&&(t.addHotjarScript(null===(r=t.sellerSettings)||void 0===r?void 0:r.hotjarSiteID),t.addGoogleTagManagerID(null===(i=t.sellerSettings)||void 0===i?void 0:i.googleTagManagerID)),t.sharedCompositionDocId&&(t.composition.set("docID",null),t.composition.set("designDocID",null)),t.registerView(),t.isTemplateEditor){e.next=19;break}return e.next=19,t.updateSavedCompositions();case 19:setTimeout(function(){return t.updateRecapAndExtensionField()},1e3);case 20:case"end":return e.stop()}},e)}))),M(this,"getComposition",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var i=new MPlaza.Composition;i.set("docID",n),i.fetch({success:function(t){e(t)},error:function(){r()},data:{frombackoffice:!!t.isDraftEditor}})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getDesign",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var i=new MPlaza.Design;i.set("docID",n),i.fetch({success:function(t){e(t)},error:function(){r()},data:{frombackoffice:!!t.isDraftEditor}}),i.addEventListener("change",t.updatePrice)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"internalLoadDesign",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDesign(t.composition.get("designDocID"));case 2:return t.zkCurrentTemplate=e.sent,e.next=5,(0,c.downloadFontsOfDesign)(t.zkCurrentTemplate,t.fonts);case 5:t.renderDesign();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"loadComposition",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.internalLoadComposition(n);case 2:t.buildStructure();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"internalLoadComposition",function(){var e=C(w().mark(function e(n){var r,i,s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=16;break}return e.next=3,t.getComposition(n);case 3:if(t.composition=e.sent,t.templateId&&(t.loadedComposition={templateName:t.composition.get("name"),attributesOptions:t.composition.get("compositionItems").map(function(e){return{attributeID:e.get("attributeID"),optionID:e.get("selectedOptionID")}}),selectedCategoryID:t.composition.get("categories").length>0?t.composition.get("categories").at(0).get("categoryID"):null}),t.selection.setupOnComposition(t.composition),!t.composition.get("designDocID")){e.next=11;break}return e.next=9,t.internalLoadDesign(t.composition.get("designDocID"));case 9:e.next=14;break;case 11:if(!(t.templates.length>0)){e.next=14;break}return e.next=14,t.setTemplate(t.templates[0].id);case 14:e.next=36;break;case 16:t.composition=t.selection.buildComposition(),r=D(t.platformAttributesSelection),e.prev=18,s=w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=i.value,t.zkProduct.get("attributes").each(function(e){if((0,h.isPlatformCode)(e.get("attributeCode")))try{if((0,h.compare)(JSON.parse(e.get("attributeCode")),JSON.parse(n.attributeCode))){var r=e.get("options").find(function(e){return(0,h.compare)(JSON.parse(e.get("optionCode")),JSON.parse(n.optionCode))});r&&(t.selection.selectAttributeValue(e.get("attributeID"),r.get("optionID").toString()),n.attributeLabel=e.get("name"),n.optionLabel=r.get("name"))}}catch(i){console.error("Failed parsing attribute from data:",n),console.error(i)}});case 2:case"end":return e.stop()}},e)}),r.s();case 21:if((i=r.n()).done){e.next=25;break}return e.delegateYield(s(),"t0",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(18),r.e(e.t1);case 30:return e.prev=30,r.f(),e.finish(30);case 33:if(!(t.templates.length>0)){e.next=36;break}return e.next=36,t.setTemplate(t.templates[0].id);case 36:return e.next=38,t.sync3DAndPlatformSelectionWithCurrentSelection();case 38:t.updateComposition(),t.updateRecapAndExtensionField();case 40:case"end":return e.stop()}},e,null,[[18,27,30,33]])}));return function(t){return e.apply(this,arguments)}}()),M(this,"sync3DAndPlatformSelectionWithCurrentSelection",C(w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.selection.get("groups").each(function(e){e.get("attributes").each(function(e){if(!t.platformAttributesSelection.find(function(t){return(0,h.matchCodes)(t.attributeCode,e.get("attributeCode"))})){var n=e.get("options").findWhere({selected:!0});n&&t.platformAttributesSelection.push(new f.PlatformAttributeSelection(e.get("attributeCode"),n.get("optionCode"),e.get("name"),n.get("name"),e.get("enabled"),n.get("enabled")))}})}),n=t.selection.getAllAttributeTransformationScript(),t.viewer.adjustCamera(!1),e.next=5,t.viewer.executeScriptAsync(n);case 5:t.selection.on("attributeSelectionChanged",function(e){t.handleAttributeSelectionChanged(e)}),t.selection.on("attributeEnabled",function(e){t.handleAttributeEnabled(e.attributeID)}),t.selection.on("attributeDisabled",function(e){t.handleAttributeDisabled(e.attributeID)}),t.selection.on("attributeOptionEnabled",function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)}),t.selection.on("attributeOptionDisabled",function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)});case 10:case"end":return e.stop()}},e)}))),M(this,"cloneSelection",function(e){var n=new Zakeke.ComposerSelection;n.set("zkModel",t.zkProduct),n.set("attributeDependencies",e.get("attributeDependencies")),n.set("optionDependencies",e.get("optionDependencies")),n.get("groups").reset(),e.get("groups").each(function(e){var t=new Zakeke.AttributeGroupSelection;for(var r in e.attributes)t.set(r,e.attributes[r]);n.get("groups").add(t)});var r=0;return n.get("groups").each(function(t){t.set("attributes",e.get("groups").at(r).get("attributes").clone()),t.get("attributes").reset(),e.get("groups").at(r).get("attributes").each(function(e){var n=new Zakeke.AttributeSelection;for(var r in e.attributes)n.set(r,e.attributes[r]);t.get("attributes").add(n)});var n=0;t.get("attributes").each(function(t){t.set("options",e.get("groups").at(r).get("attributes").at(n).get("options").clone()),t.get("options").reset(),e.get("groups").at(r).get("attributes").at(n).get("options").each(function(e){var n=new Zakeke.OptionSelection;for(var r in e.attributes)n.set(r,e.attributes[r]);t.get("options").add(n)}),n++}),r++}),n}),M(this,"undo",C(w().mark(function e(){var n,r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.undoStack&&t.undoStack.length>0?t.undoStack.pop():null){e.next=3;break}return e.abrupt("return");case 3:return t.redoStack.push(t.selection),t.selection=n,t.selection.on("attributeSelectionChanged",function(e){t.handleAttributeSelectionChanged(e)}),t.selection.on("attributeEnabled",function(e){t.handleAttributeEnabled(e.attributeID)}),t.selection.on("attributeDisabled",function(e){t.handleAttributeDisabled(e.attributeID)}),t.selection.on("attributeOptionEnabled",function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)}),t.selection.on("attributeOptionDisabled",function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)}),t.selection.attachEvents(),r=t.selection.getAllAttributeTransformationScript(),e.next=14,t.viewer.executeScriptAsync(r);case 14:t.buildStructure(),t.resetPlatformAttributesSelection(),t.updateComposition(),t.updateRecapAndExtensionField();case 18:case"end":return e.stop()}},e)}))),M(this,"redo",C(w().mark(function e(){var n,r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.redoStack&&t.redoStack.length>0?t.redoStack.pop():null){e.next=3;break}return e.abrupt("return");case 3:return t.undoStack.push(t.selection),t.selection=n,t.selection.on("attributeSelectionChanged",function(e){t.handleAttributeSelectionChanged(e)}),t.selection.on("attributeEnabled",function(e){t.handleAttributeEnabled(e.attributeID)}),t.selection.on("attributeDisabled",function(e){t.handleAttributeDisabled(e.attributeID)}),t.selection.on("attributeOptionEnabled",function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)}),t.selection.on("attributeOptionDisabled",function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)}),t.selection.attachEvents(),r=t.selection.getAllAttributeTransformationScript(),e.next=14,t.viewer.executeScriptAsync(r);case 14:t.buildStructure(),t.resetPlatformAttributesSelection(),t.updateComposition(),t.updateRecapAndExtensionField();case 18:case"end":return e.stop()}},e)}))),M(this,"resetPlatformAttributesSelection",function(){t.selection.get("groups").each(function(e){e.get("attributes").each(function(e){var n=t.platformAttributesSelection.find(function(t){return(0,h.matchCodes)(t.attributeCode,e.get("attributeCode"))});if(n){var r=e.get("options").findWhere({selected:!0});n.attributeCode=e.get("attributeCode"),n.attributeIsEnabled=e.get("enabled"),n.attributeLabel=e.get("name"),n.optionCode=r.get("optionCode"),n.optionLabel=r.get("name"),n.optionIsEnabled=r.get("enabled")}})})}),M(this,"reset",C(w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.initialSelection){e.next=2;break}return e.abrupt("return");case 2:return t.undoStack=[],t.redoStack=[],t.selection=t.cloneSelection(t.initialSelection),t.selection.attachEvents(),t.selection.on("attributeSelectionChanged",function(e){t.handleAttributeSelectionChanged(e)}),t.selection.on("attributeEnabled",function(e){t.handleAttributeEnabled(e.attributeID)}),t.selection.on("attributeDisabled",function(e){t.handleAttributeDisabled(e.attributeID)}),t.selection.on("attributeOptionEnabled",function(e){t.handleAttributeOptionEnabled(e.attributeID,e.optionID)}),t.selection.on("attributeOptionDisabled",function(e){t.handleAttributeOptionDisabled(e.attributeID,e.optionID)}),n=t.selection.getAllAttributeTransformationScript(),e.next=14,t.viewer.executeScriptAsync(n);case 14:t.buildStructure(),t.resetPlatformAttributesSelection(),t.updateComposition(),t.updateRecapAndExtensionField();case 18:case"end":return e.stop()}},e)}))),M(this,"handleAttributeSelectionChanged",function(){var e=C(w().mark(function e(n){var r,i,s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.viewer.executeActionsAsync(n.attributeID,n.selectedValue,n.actions);case 2:t.updateComposition(),(r=t.zkProduct.get("attributes").find(function(e){return e.get("attributeID")==n.attributeID}))&&(i=r.get("options").find(function(e){return e.get("optionID")==n.selectedValue}))&&((s=t.platformAttributesSelection.find(function(e){return(0,h.matchCodes)(e.attributeCode,r.get("attributeCode"))}))&&(s.optionCode=i.get("optionCode"),s.optionLabel=i.get("name")),t.setOptionSelectionEnabled(r.get("attributeID"),i.get("optionID"),t.isOptionEnabled(i.get("optionID")))),t.buildStructure(),t.renderDesign();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"handleAttributeEnabled",function(e){t.updateComposition(),t.setAttributeSelectionEnabled(e,!0),t.buildStructure(),t.renderDesign()}),M(this,"handleAttributeDisabled",function(e){t.updateComposition(),t.setAttributeSelectionEnabled(e,!1),t.buildStructure(),t.renderDesign()}),M(this,"handleAttributeOptionEnabled",function(e,n){t.updateComposition(),t.setOptionSelectionEnabled(e,n,!0),t.buildStructure(),t.renderDesign()}),M(this,"handleAttributeOptionDisabled",function(e,n){t.updateComposition(),t.setOptionSelectionEnabled(e,n,!1),t.buildStructure(),t.renderDesign()}),M(this,"setAttributeSelectionEnabled",function(e,n){var r=t.zkProduct.get("attributes").find(function(t){return t.get("attributeID")==e});if(r){var i=t.platformAttributesSelection.find(function(e){return(0,h.matchCodes)(e.attributeCode,r.get("attributeCode"))});i&&(i.attributeIsEnabled=n),r.get("options").each(function(r){t.setOptionSelectionEnabled(e,r.get("optionID"),n)})}}),M(this,"setOptionSelectionEnabled",function(e,n,r){var i=t.zkProduct.get("attributes").find(function(t){return t.get("attributeID")==e});if(i){var s=i.get("options").find(function(e){return e.get("optionID")==n});if(s){var a=t.platformAttributesSelection.find(function(e){return(0,h.matchCodes)(e.attributeCode,i.get("attributeCode"))});a&&(0,h.matchCodes)(a.optionCode,s.get("optionCode"))&&(a.optionIsEnabled=r)}}t.updateRecapAndExtensionField()}),M(this,"isOptionEnabled",function(e){var n=!1;return t.selection.get("groups").each(function(t){t.get("attributes").each(function(t){var r=t.get("options").find(function(t){return t.get("optionID")==e});r&&(n=r.get("enabled"))})}),n}),M(this,"updateComposition",function(){t.selection.updateComposition(t.composition),t.updatePrice()}),M(this,"_updatePrice",C(w().mark(function e(){var n,r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,r=!1,!t.composition||!t.zkProduct){e.next=8;break}return e.next=5,t.getPrice();case 5:i=e.sent,n=i.price,r=i.isOutOfStock;case 8:t.price=n,t.isOutOfStock=r,t.trigger("change");case 11:case"end":return e.stop()}},e)}))),M(this,"updatePrice",s().debounce(this._updatePrice,300)),M(this,"buildStructure",function(){var e=[];if(t.selection){for(var n=0;n<t.selection.get("groups").length;n++){var r=t.selection.get("groups").at(n),i=t.createGroupFromSelection(r);e.push(i)}e.sort(function(e,t){return e.displayOrder-t.displayOrder})}t.groups=e,t.trigger("change")}),M(this,"createGroupFromSelection",function(e){var n=t.zkProduct.get("attributeGroups").get(e.get("groupID")),r=n?n.get("imageUrl"):null,i=new g.Group;i.id=n?n.get("groupID"):-1,i.guid=n?n.get("groupGuid"):"-1",i.name=n?n.get("name"):"Other",i.imageUrl=r,i.enabled=!0,i.cameraLocationId=n?n.get("sceneCameraLocationID"):null,i.steps=t.zkProduct.get("attributeSteps").filter(function(e){return e.get("groupID")==i.id}).map(function(n){return t.createStep(n,e)}),n&&(i.displayOrder=n.get("displayOrder"),i.direction=n.get("direction"),i.attributesAlwaysOpened=n.get("attributesAlwaysOpened"));for(var s=function(){var n=e.get("attributes").at(a),r=t.zkProduct.get("attributes").find(function(e){return e.get("attributeID")==n.get("attributeID")});if(-1==r.get("stepID")){var s=t.createAttributeFromSelection(n);i.attributes.push(s)}},a=0;a<e.get("attributes").length;a++)s();i.attributes.sort(function(e,t){return e.displayOrder-t.displayOrder});var o=null===e||void 0===e?void 0:e.get("templateGroups");if(o)for(var l=function(){var e=t.zkProduct.get("templateGroups").at(u),n=o.find(function(t){return t.get("templateGroupID")==e.get("templateGroupID")});if(n&&null==e.get("stepID")){var r=t.createTemplateGroupFromSelection(n);i.templateGroups.push(r)}},u=0;u<t.zkProduct.get("templateGroups").length;u++)l();return i.templateGroups.sort(function(e,t){return e.displayOrder-t.displayOrder}),i}),M(this,"createAttributeFromSelection",function(e){var n=t.zkProduct.get("attributes").get(e.get("attributeID")),r=new g.Attribute;r.id=n.get("attributeID"),r.guid=n.get("attributeGuid"),r.code=n.get("attributeCode"),r.name=n.get("name")||"",r.description=n.get("description")||"",r.optionShapeType=1==n.get("optionPreviewShapeID")?g.AttributeOptionShapeType.Round:g.AttributeOptionShapeType.Square,r.displayOrder=n.get("displayOrder"),r.enabled=e.get("enabled"),r.groupId=n.get("groupID"),r.stepId=n.get("stepID"),r.hideOptionsLabel=n.get("hideOptionsLabel"),r.cameraLocationId=n?n.get("sceneCameraLocationID"):null;for(var i=0;i<e.get("options").length;i++){var s=e.get("options").at(i),a=t.createOptionFromSelection(s);a.attribute=r,r.options.push(a)}return e.get("attributeTypeID")==MPlaza.AttributeType.Options?r.type=g.AttributeType.Select:e.get("attributeTypeID")==MPlaza.AttributeType.Color?(r.type=g.AttributeType.Colorpicker,r.value=e.get("selectedValue")):(e.get("attributeTypeID")==MPlaza.AttributeType.Number||e.get("attributeTypeID")==MPlaza.AttributeType.String)&&(r.type=g.AttributeType.Colorpicker,r.value=e.get("selectedValue"),r.numberFormat=""),r.options.sort(function(e,t){return e.displayOrder-t.displayOrder}),r}),M(this,"createOptionFromSelection",function(e){var n=t.zkProduct.get("attributes").get(e.get("attributeID")).get("options").get(e.get("optionID")),r=new g.Option,i=t.zkProduct.get("attributes").get(e.get("attributeID")).get("pricings");if(i.length>0){var s,a=null===(s=i.find(function(t){return t.get("selectedOptionID")===e.get("optionID")}))||void 0===s?void 0:s.get("price");a&&(r.pricings=[{fromQuantity:0,price:a}])}return r.id=n.get("optionID"),r.guid=n.get("optionGuid"),r.code=n.get("optionCode"),r.name=n.get("name")||"",r.description=n.get("description")||"",r.imageUrl=n.get("imageUrl"),r.displayOrder=n.get("displayOrder"),r.selected=e.get("selected"),r.enabled=e.get("enabled"),r}),M(this,"createTemplateGroupFromSelection",function(e){var n,r=t.zkProduct.get("templateGroups").find(function(t){return t.get("templateGroupID")===e.get("templateGroupID")});if(!r)return new a.ThemeTemplateGroup;var i=new a.ThemeTemplateGroup;i.templateGroupID=r.get("templateGroupID"),i.name=null!==(n=r.get("name"))&&void 0!==n?n:"",i.groupID=r.get("groupID"),i.stepID=r.get("stepID"),i.displayOrder=r.get("displayOrder");for(var s=function(){var t=e.get("macrocategory").at(o),n=r.get("macrocategory").find(function(e){return e.get("macroCategoryID")===t.get("macroCategoryID")});if(!n)return{v:i};var s=new a.ThemeMacroCategory;s.id=n.get("macroCategoryID"),s.name=n.get("name");var c=function(){var e=t.get("category").at(l),r=n.get("category").find(function(t){return t.get("categoryID")===e.get("categoryID")});if(!r)return{v:{v:i}};var o=new a.ThemeCategory;o.id=r.get("categoryID"),o.name=r.get("name");var c=function(){var t=e.get("composition").at(u),n=r.get("composition").find(function(e){return e.get("compositionID")===t.get("compositionID")});if(!n)return{v:{v:{v:i}}};var s=new a.TemplateComposition;s.name=n.get("name"),s.previewImageUrl=n.get("previewImageUrl"),s.compositionID=n.get("compositionID"),o.composition.push(s)};for(u=0;u<e.get("composition").length;u++){var h=c();if("object"===b(h))return h.v}s.category.push(o)};for(l=0;l<t.get("category").length;l++){var h=c();if("object"===b(h))return h.v}i.macroCategory.push(s)},o=0;o<e.get("macrocategory").length;o++){var l,u,c=s();if("object"===b(c))return c.v}return i}),M(this,"saveDesignBackbone",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var i=t.zkCurrentTemplate;i?i.save(null,{success:function(n){t.composition.set("designDocID",n.get("docID")),e()},error:function(){r()},headers:{fromBackOffice:!!t.isDraftEditor,isSharing:!!n}}):e()}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"saveCompositionBackbone",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.composition.save(null,{success:function(){e()},error:function(){n()},headers:{fromBackOffice:!!t.isDraftEditor}})}));case 1:case"end":return e.stop()}},e)}))),M(this,"trigger",function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s,a=D(t.events.filter(function(t){return t.event==e}));try{for(a.s();!(s=a.n()).done;){var o=s.value;o.callback?o.callback.apply(t,r):console.error("Event handler can't be null or undefined")}}catch(l){a.e(l)}finally{a.f()}}),M(this,"on",function(e,n){t.events.push(new g.ZakekeEvent(e,n))}),M(this,"off",function(e,n){t.events=t.events.filter(function(t){return t.event==e&&t.callback==n})}),M(this,"setTemplate",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.zkCurrentTemplate=t.zkTemplates.find(function(e){return e.get("templateDesignID")==n}),t.currentTemplate=t.templates.find(function(e){return e.id==n})||null,e.next=4,(0,c.downloadFontsOfDesign)(t.zkCurrentTemplate,t.fonts);case 4:t.renderDesign();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getTemplateUploadRestrictictions",function(e,n){var r,i,s,a,o,l,u,c,h,d=t.zkTemplates.find(function(t){return t.get("templateDesignID")==e});if(!d)throw"Template does not exists with id "+e;var f=d.getDesignSide(t.zkProduct.get("colors").at(0).get("sides").get(n)),p=function(e){var t,n;return f&&f.get("uploadRestrictions")?null===(t=f.get("uploadRestrictions"))||void 0===t?void 0:t[e]:d.get("uploadRestrictions")?void(null===(n=d.get("uploadRestrictions"))||void 0===n||n[e]):null},g=null!==(r=t.settings.addons.find(function(e){return"PDF"===e.addonName||"PDF_EPS"===e.addonName})||t.settings.isPdfEpsEnabled)&&void 0!==r&&r,m=null!==(i=t.settings.addons.find(function(e){return"EPS"===e.addonName||"PDF_EPS"===e.addonName})||t.settings.isPdfEpsEnabled)&&void 0!==i&&i;return{isUserImageAllowed:null===(s=p("isUserImageAllowed"))||void 0===s||s,isJpgAllowed:null===(a=p("isJpgAllowed"))||void 0===a||a,isPngAllowed:null===(o=p("isPngAllowed"))||void 0===o||o,isSvgAllowed:null===(l=p("isSvgAllowed"))||void 0===l||l,isPdfAllowed:(null===(u=p("isPdfAllowed"))||void 0===u||u)&&!!g,isEpsAllowed:(null===(c=p("isEpsAllowed"))||void 0===c||c)&&!!m,isPdfWithRasterAllowed:(null===(h=p("isPdfWithRasterAllowed"))||void 0===h||h)&&!!g}}),M(this,"getTemplates",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=C(w().mark(function e(n,r){var i,s,a,o,u,c;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("designs/templates/"+t.zkProduct.get("modelID"));case 2:if(i=e.sent.data,s=[],!(i.length>0)){e.next=24;break}a=D(i[0].categories[0].templates),e.prev=6,a.s();case 8:if((o=a.n()).done){e.next=16;break}return u=o.value,e.next=12,t.getTemplate(u.designID);case 12:c=e.sent,s.push(c);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),a.e(e.t0);case 21:return e.prev=21,a.f(),e.finish(21);case 24:n(s);case 25:case"end":return e.stop()}},e,null,[[6,18,21,24]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))),M(this,"saveProduct",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.zkProduct&&t.zkProduct.save(null,{success:function(t,n,r){e()},error:function(e,t,r){n(t)}})}));case 1:case"end":return e.stop()}},e)}))),M(this,"getTemplate",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var i=new MPlaza.Design;i.set("docID",n),i.fetch({success:function(){var t=C(w().mark(function t(){return w().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e(i);case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),error:function(){return null},data:{template:!0}}),i.addEventListener("change",t.updatePrice)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"updateView",function(){t.viewer.updateView()}),M(this,"selectOption",function(e){var n,r,i=t.cloneSelection(t.selection);if(t.undoStack.push(i),t.zkProduct.get("attributes").each(function(t){var i=t.get("options").find(function(t){return t.get("optionID")==e});i&&(n=i,r=t)}),!n)throw new u.Exception("Invalid option with id "+e);n.selected||t.selection.selectAttributeValue(r.get("attributeID"),e.toString())}),M(this,"focusGroup",function(e){var n=t.groups.find(function(t){return t.id==e});n&&n.cameraLocationId&&(t.viewer.setCameraLocation(n.cameraLocationId),t.lastCameraLocation=n.cameraLocationId)}),M(this,"focusAttribute",function(){var e=C(w().mark(function e(n){var r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selection.getAttributeUnselectedOptionsSceneActions(n),e.next=3,t.viewer.prefetchDataForUnselectedOptionsAsync(r);case 3:(i=t.zkProduct.get("attributes").find(function(e){return e.get("attributeID")==n}))&&i.get("sceneCameraLocationID")&&i.get("sceneCameraLocationID")!=Zakeke.getEmptyUUID()&&(t.viewer.setCameraLocation(i.get("sceneCameraLocationID")),t.lastCameraLocation=i.get("sceneCameraLocationID"));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"base64StringToFile",function(e,t){for(var n,r,i,s=e.split(","),a=null!==(n=null===(r=s[0])||void 0===r||null===(i=r.match(/:(.*?);/))||void 0===i?void 0:i[1])&&void 0!==n?n:"",o=atob(s[1]),l=o.length,u=new Uint8Array(l);l--;)u[l]=o.charCodeAt(l);return new File([u],t,{type:a})}),M(this,"saveTemplate",function(){var e=C(w().mark(function e(n,r,i){var s,a,o,l,u,c,d,f,p,g;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Array.from(i.keys()),(a=t.composition.get("compositionItems")).toArray().forEach(function(e){s.includes(e.get("attributeID"))||a.remove(e)}),t.composition.set("name",n),t.composition.set("compositionItems",a),t.composition.set("isTemplate",!0),o=new MPlaza.CompositionCategoriesMapping,r)(l=new MPlaza.CompositionCategoryMapping).set("categoryID",r),l.set("name"," "),o.add(l);else if(t.selectedTemplateCategory)try{u=new MPlaza.CompositionCategoryMapping,c=t.selectedTemplateCategory.split(";"),u.set("categoryID",Number.parseInt(c[0])),u.set("name",c[1]),o.add(u)}catch(m){console.error("Error while parsing associated category for template",m,t.selectedTemplateCategory)}if(t.composition.set("categories",o),0!==t.zkProduct.get("templateGroups").length){e.next=16;break}return(d=new MPlaza.TemplateGroup).set("name","Pre-set configurations"),t.zkProduct.get("attributeGroups").length>0?((f=new MPlaza.AttributeGroup).set("name","Pre-set configurations"),f.set("displayOrder",t.zkProduct.get("attributeGroups").at(0).get("displayOrder")-1),t.zkProduct.get("attributeGroups").unshift(f),d.set("groupGuid",f.get("groupGuid"))):t.zkProduct.get("attributeSteps")&&t.zkProduct.get("attributeSteps").length>0?((p=new MPlaza.AttributeStep).set("name","Pre-set configurations"),p.set("groupGuid",Zakeke.generateUUID()),p.set("displayOrder",t.zkProduct.get("attributeSteps").at(0).get("displayOrder")-1),t.zkProduct.get("attributeSteps").unshift(p),d.set("stepGuid",p.get("stepGuid"))):(g=t.zkProduct.get("attributes").filter(function(e){return-1===e.get("groupID")}).sort((0,h.ascComparator)(function(e){return e.get("displayOrder")}))).length>0&&d.set("displayOrder",g[0].get("displayOrder")-1),t.zkProduct.get("templateGroups").add(d),e.next=16,t.saveProduct();case 16:return e.next=18,t.addToCart([],void 0,void 0,void 0);case 18:return e.next=20,t.reset();case 20:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),M(this,"addToCart",function(){var e=C(w().mark(function e(n,r,s,a){var o,u,c,d,f,p,g,m,v,_,y,b,x;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setExplodedMode(!1);case 2:if(t.pdSettings&&t.composition.set("pdSettings",t.pdSettings),t.composition.set("compositionClientPreviews",[]),u=[],c=[],d=[],(f=null===(o=t.zkScene)||void 0===o?void 0:o.get("cameraLocations").filter(function(e){var t;return-1!==(null===(t=e.get("name"))||void 0===t?void 0:t.toLowerCase().indexOf("buy_screenshot_camera_"))}))&&(c=(0,i.sortBy)(f,function(e){return e.get("name")})),!(c&&c.length>0)){e.next=42;break}p=D(c),e.prev=11,p.s();case 13:if((g=p.n()).done){e.next=33;break}return m=g.value,e.next=17,t.viewer.getSceneContentScreenshotAsync(t.clientPreviewWidth,t.clientPreviewHeight,0,t.zkCurrentTemplate,s,m);case 17:if(v=e.sent,_=new FormData,v){e.next=21;break}return e.abrupt("return");case 21:return y=t.base64StringToFile(v,m+".png"),_.set("file",y),e.next=25,l.axiosApi.post(Zakeke.config.baseApiUrl+"compositions/upload-client-preview",_);case 25:return b=e.sent.data,u.push({fileObjectID:b.id,cameraName:m.get("name"),url:b.url}),x={url:b.url,cameraName:m.get("name")},d.push(x),e.next=31,(0,h.sleep)(1);case 31:e.next=13;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(11),p.e(e.t0);case 38:return e.prev=38,p.f(),e.finish(38);case 41:t.composition.set("compositionClientPreviews",u);case 42:return t.composition.get("isDraft")&&!t.isDraftEditor&&(t.composition.set("docID",null),t.composition.set("designDocID",null),t.composition.set("isDraft",!1),t.zkCurrentTemplate&&t.zkCurrentTemplate.set("docID",null)),console.log("previewFiles",d),e.next=46,t.saveComposition(void 0,s);case 46:if(!a){e.next=49;break}return e.next=49,t.saveCustomerWalletInfo(t.composition.get("docID"),a.email,a.walletAddress);case 49:if(!r){e.next=53;break}return e.next=52,r({composition:t.composition.id,preview:t.composition.get("previewImageUrl"),attributes:t.platformAttributesSelection,designItems:t.getDesignItemsInfo(),quantity:t.quantity,previewFiles:d,additionalProperties:n});case 52:n=e.sent;case 53:t.integration.addToCart(t.composition,t.zkCurrentTemplate,t.zkProduct,t.platformAttributesSelection,t.getDesignItemsInfo(),t.quantity,n,a&&3===t.settings.ecommerceID&&t.nftSettings?t.nftSettings.priceToAdd:0);case 54:case"end":return e.stop()}},e,null,[[11,35,38,41]])}));return function(t,n,r,i){return e.apply(this,arguments)}}()),M(this,"zoomIn",function(){t.viewer&&t.viewer.zoomIn()}),M(this,"zoomOut",function(){t.viewer&&t.viewer.zoomOut()}),M(this,"isFullscreenEnabled",function(){return!h.iOS}),M(this,"switchFullscreen",function(){var e=null;t.viewer.switchFullScreen(document.querySelector(".zakeke-viewer-container")),e||(e=setInterval(function(){t.isFullscreenMode&&0==t.internalIsFullscreen&&setTimeout(function(){t.viewer.updateView(),t.viewer.updateView(),t.internalIsFullscreen=!0,console.info("Fullscreen enabled")},10),t.isFullscreenMode||1!=t.internalIsFullscreen||(clearInterval(e),e=null,setTimeout(C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.internalIsFullscreen=!1,e.next=3,t.extendedUpdate();case 3:t.viewer.updateView(),t.viewer.updateView(),console.info("Fullscreen disabled");case 6:case"end":return e.stop()}},e)})),10))},100))}),M(this,"openSecondScreen",function(){var e=Zakeke.config.baseUrl+"en/SecondScreen?token="+t.token+"&modelID="+t.zkProduct.get("modelID");window.open(e)}),M(this,"extendedUpdate",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=0,i=setInterval(function(){t.viewer.updateView(),++r>20&&(clearInterval(i),e())},100)}));case 1:case"end":return e.stop()}},e)}))),M(this,"exportSceneToUsdz",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer||!t.viewer.zkScene){e.next=2;break}return e.abrupt("return",t.viewer.exportSceneToUsdzAsync(t.viewer.zkScene.get("sceneID"),n));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"exportSceneToGlb",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.viewer.exportSceneToLocalGLBAsync());case 1:case"end":return e.stop()}},e)}))),M(this,"setExplodedMode",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=8;break}if(!n){e.next=6;break}return e.next=4,t.viewer.explodeMeshes();case 4:e.next=8;break;case 6:return e.next=8,t.viewer.collapseMeshes();case 8:t.isExplodedMode=n;case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"hasExplodedMode",function(){var e=t.zkScene;return!!e&&!!e.getFirstExplodedMeshLocation()}),M(this,"setBackgroundColor",function(e,n){var r=t.zkScene;if(0==e.indexOf("rgb")){var i=e.replace("rgb(","").replace(")","").split(",");e=(0,h.rgb2hex)(i[0],i[1],i[2])}t.viewer&&r&&(r.getOrCreateEnvironmentConfig().set("mainColor",e),r.getOrCreateGeneralConfig().set("backgroundColor",e),r.getOrCreateGeneralConfig().set("backgroundAlpha",n),t.viewer.refreshEnvironment())}),M(this,"getCurrentSelection",function(){return s().cloneDeep(t.platformAttributesSelection)}),M(this,"getScreenshot",C(w().mark(function e(){var n,r,i,s,a,o,l,u=arguments;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:1024,r=u.length>1&&void 0!==u[1]?u[1]:1024,i=u.length>2?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:null,a=u.length>4&&void 0!==u[4]?u[4]:0,o=u.length>5&&void 0!==u[5]?u[5]:null,e.next=8,t.viewer.getSceneContentScreenshotAsync(n,r,a,t.zkCurrentTemplate,i,o);case 8:if(l=e.sent){e.next=11;break}throw new Error("Failed generating screenshot");case 11:if(!s){e.next=14;break}return e.next=14,new Promise(function(e){var t=new Image;t.onload=function(){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");r&&(r.fillStyle=s,r.fillRect(0,0,t.width,t.height),r.drawImage(t,0,0),l=n.toDataURL(),e())},t.src=l});case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}},e)}))),M(this,"fireItemsChange",function(){t.trigger("change")}),M(this,"removeItem",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){t.viewer?(t.viewer.removeDesignItem(n),t.fireItemsChange(),e()):r("Called remove item but no viewer or viewer not ready")}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"setItemText",function(e,n){if(!t.viewer)throw"Called set item text but no viewer or viewer not ready";t.viewer.setDesignItemText(e,n)}),M(this,"setItemItalic",function(e,n){if(!t.viewer)throw"Called set item italic but no viewer or viewer not ready";t.viewer.setDesignItemItalic(e,n)}),M(this,"setItemBold",function(e,n){if(!t.viewer)throw"Called set item bold but no viewer or viewer not ready";t.viewer.setDesignItemBold(e,n)}),M(this,"setItemColor",function(e,n){if(!t.viewer)throw"Called set item color but no viewer or viewer not ready";t.viewer.setDesignItemColor(e,n)}),M(this,"setItemFontFamily",function(){var e=C(w().mark(function e(n,r){var i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=12;break}if(!(i=t.fonts.find(function(e){return e.name===r}))){e.next=9;break}return e.next=5,(0,c.loadFonts)([i]).catch(function(e){console.error("Error loading font",e,i)});case 5:t.viewer.setDesignItemFontFamily(n,r),t.fireItemsChange(),e.next=10;break;case 9:console.warn("No font found for ".concat(r));case 10:e.next=13;break;case 12:throw"Called set item font family but no viewer or viewer not ready";case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"setItemTextOnPath",function(e,n,r){if(!t.viewer)throw"Called toggleItemTextOnPath but no viewer or viewer not ready";t.viewer.setItemTextOnPath(e,n,r),t.fireItemsChange()}),M(this,"sanitizeString",function(e,t){var n,r=null!==(n=e.faces[0])&&void 0!==n?n:null;return r?(0,c.sanitizeString)(r,t):t}),M(this,"getSanitationText",function(e,t){var n,r=null!==(n=e.faces[0])&&void 0!==n?n:null;return r?(0,c.sanitizeText)(r,t):{dirtyChars:[],sanitizedText:t}}),M(this,"createImage",function(){var e=C(w().mark(function e(n,r){var i,s,a,o,l;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=11;break}return s=new d.default(t.culture,t.token),a=null===(i=t.zkProduct)||void 0===i?void 0:i.get("printTypes"),s.addPrintingOptions(a),e.next=6,s.upload(n,r);case 6:return o=e.sent,l=o?o[0]:null,e.abrupt("return",l);case 11:throw"Called create image but no viewer or viewer not ready";case 12:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"createImageFromUrl",function(){var e=C(w().mark(function e(n){var r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=7;break}return e.next=3,l.axiosApi.post(Zakeke.config.baseApiUrl+"images/import/url",{url:n});case 3:return r=e.sent.data,e.abrupt("return",r);case 7:throw"Called create image from url but no viewer or viewer not ready";case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"addItemImage",function(){var e=C(w().mark(function e(n,r){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=8;break}return e.next=3,t.viewer.addDesignItemImage(n,r);case 3:return e.next=5,t.renderDesign();case 5:t.fireItemsChange(),e.next=9;break;case 8:throw"Called add item text but no viewer or viewer not ready";case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"setItemImageFromFile",function(){var e=C(w().mark(function e(n,r,i){var s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=9;break}return e.next=3,t.createImage(r,i);case 3:return s=e.sent,e.next=6,t.setItemImage(n,s.imageID);case 6:t.fireItemsChange(),e.next=10;break;case 9:throw"Called set item image but no viewer or viewer not ready";case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),M(this,"setItemImageFromBase64",function(){var e=C(w().mark(function e(n,r){var i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=9;break}return(i=new MPlaza.Image).set("imageID",-1),i.set("previewUrl",r),e.next=6,t.viewer.setDesignItemImage(n,i);case 6:t.fireItemsChange(),e.next=10;break;case 9:throw"Called set item image but no viewer or viewer not ready";case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"setItemImage",function(){var e=C(w().mark(function e(n,r){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=C(w().mark(function e(i,s){var a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.viewer){e.next=6;break}(a=new MPlaza.Image).set("imageID",r),a.fetch({success:function(){var e=C(w().mark(function e(r,s,o){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.viewer.setDesignItemImage(n,a);case 2:t.fireItemsChange(),i();case 4:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),error:function(e,t,n){return null}}),e.next=7;break;case 6:throw"Called set item image but no viewer or viewer not ready";case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"getMacroCategories",C(w().mark(function e(){var n,r,i,s,a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("imagemacrocategories/",{params:{productID:null===(n=t.product)||void 0===n?void 0:n.id}});case 2:r=(r=e.sent.data).filter(function(e){return e.hasImages}),i=D(r);try{for(i.s();!(s=i.n()).done;)(a=s.value).categories=a.categories.filter(function(e){return e.hasImages})}catch(o){i.e(o)}finally{i.f()}return e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))),M(this,"getImages",function(){var e=C(w().mark(function e(n){var r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get("images/",{params:{type:"lib",c:n,productID:null===(r=t.product)||void 0===r?void 0:r.id}});case 2:return i=e.sent.data,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getPDF",C(w().mark(function e(){var n,r,i,s,o,u,c,d,f;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null===(n=t.zkScene)||void 0===n?void 0:n.get("cameraLocations").find(function(e){var t;return"pdf_screenshot_camera"===(null===(t=e.get("name"))||void 0===t?void 0:t.toLowerCase())}),e.next=3,t.getScreenshot(2048,2048,!1,null,0,i);case 3:return s=e.sent,o=t.getDesignItemsInfo(),u=null===(r=t.product)||void 0===r?void 0:r.areas.filter(function(e){return t.isAreaVisible(e.id)}).map(function(e){return{name:e.name,textItems:o.filter(function(t){return t.areaId==e.id&&t.type===a.ItemType.Text})}}).filter(function(e){return e.textItems.length>0}),c=t.platformAttributesSelection.filter(function(e){return e.attributeIsEnabled&&e.attributeIsEnabled}).map(function(e){var t=e.attributeLabel,n=e.attributeCode,r=e.optionCode,i=e.optionLabel;return{attributeLabel:t,attributeCode:(0,h.isPlatformCode)(n)?"":n,optionLabel:i,optionCode:(0,h.isPlatformCode)(r)?"":r}}),d={environment:2,productName:t.zkProduct.get("name"),previewImage:s,sides:[],areas:u,selectedOptions:c},e.next=10,l.axiosApi.post(Zakeke.config.baseApiUrl+"previewdesigns/pdf",d,{transformResponse:function(e){return e},responseType:"text"});case 10:return f=e.sent.data.replace(/"/g,""),e.abrupt("return",f);case 12:case"end":return e.stop()}},e)}))),M(this,"rewriteShareUrl",function(e){var n=e.split("/SharedPreview")[1];if(t.shareUrlPrefix)return t.shareUrlPrefix+n;if(!t.isShoppingPreview&&document.referrer&&2===t.settings.referrerID){var r=document.referrer.replace(/(apps\/configurator\/)([\s\S]*)/gm,"$1");return r.endsWith("/")||(r+="/"),r+n}return e}),M(this,"getShareCompositionUrl",C(w().mark(function e(){var n,r,i,s;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(n=t.composition.get("isDraft"))&&void 0!==n&&n,t.composition.set("isDraft",!1),e.next=4,t.saveCompositionCopy(!0);case 4:return i=e.sent,t.composition.set("isDraft",r),e.next=8,t.integration.getSharedCompositionUrl(i);case 8:return s=e.sent,e.abrupt("return",s.url);case 10:case"end":return e.stop()}},e)}))),M(this,"saveCompositionCopy",function(){var e=C(w().mark(function e(n){var r,i,s,a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,i=null,(s=t.zkCurrentTemplate)&&(i=s.get("docID"),s.set("docID",null)),r=t.composition.get("docID"),t.composition.set("docID",null),t.composition.set("designDocID",null),e.next=9,t.saveComposition(void 0,void 0,n);case 9:return a=t.composition.get("docID"),t.composition.set("docID",r),t.composition.set("designDocID",i),s&&s.set("docID",i),e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getOnlineScreenshot",function(){var e=C(w().mark(function e(n,r,i,s){var a,o,u,c,h=arguments;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>4&&void 0!==h[4]?h[4]:30,e.next=3,t.getScreenshot(n,r,i,s,a);case 3:return o=e.sent,e.next=6,l.axiosApi.post(Zakeke.config.baseApiUrl+"designs/save-share-preview",{preview:o});case 6:return u=e.sent.data.url,c=t.rewriteShareUrl(u),e.abrupt("return",{originalUrl:u,rewrittenUrl:c});case 9:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()),M(this,"isSceneArOnTheFly",function(){var e;return!t.isAndroid&&!!t.viewer&&(null===(e=t.zkScene)||void 0===e?void 0:e.getAROnTheFly())}),M(this,"isArDeviceCompliant",function(){return h.IS_AR_DEVICE_COMPLIANT}),M(this,"isAndroidOrIOS",function(){return h.IS_ANDROID||h.IS_IOS}),M(this,"isAndroid",h.IS_ANDROID),M(this,"isIOS",h.IS_IOS),M(this,"buildModelViewerUrl",function(e){var n,r,i=Zakeke.config.baseUrl+"ModelViewer",s=new URL(i),a="",o=D(e);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l.format&&l.arFileUrl){var u=encodeURIComponent(l.arFileUrl),c="";switch(l.format){case"gltf":case"glb":c="gltf="+u;break;case"usdz":c="usdz="+u;break;case"png":c="poster="+u}c&&(a+=(a?"&":"")+c)}}}catch(h){o.e(h)}finally{o.f()}return a+="&arScale="+(t.zkScene.getARScale()?1:0),a+="&arAnchor="+(null!==(n=t.zkScene.getARAnchor())&&void 0!==n?n:""),s.search+=a,s.toString()}),M(this,"isSceneArEnabled",function(){return t.zkScene&&t.zkScene.getAREnabled()||!1}),M(this,"getPregeneratedARUrl",function(e){var n,r,i;return null===(n=t.zkScene)||void 0===n||null===(r=n.get("arFiles"))||void 0===r||null===(i=r.find(function(t){return t.get("fileType")==e}))||void 0===i?void 0:i.get("url")}),M(this,"getQrCodeArUrl",function(){var e=C(w().mark(function e(n){var r,i,s,a,o,l,u,c;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],a=(0,h.isDAMViewer)(),o=a?null!==(r=null===(i=t.zkProduct)||void 0===i?void 0:i.get("code"))&&void 0!==r?r:void 0:t.selection.getCompositionHashCode(),"Android"!=n){e.next=13;break}if(e.t0=t.getPregeneratedARUrl("glb"),e.t0){e.next=9;break}return e.next=8,t.viewer.exportSceneToRemoteGLBAsync(t.zkScene.get("sceneID"),o,!0);case 8:e.t0=e.sent;case 9:(l=e.t0)&&(s=[{format:"gltf",arFileUrl:l}]),e.next=22;break;case 13:if(u=t.getPregeneratedARUrl("glb"),c=t.getPregeneratedARUrl("usdz"),!u||!c){e.next=19;break}s=[{format:"glb",arFileUrl:u},{format:"usdz",arFileUrl:c}],e.next=22;break;case 19:return e.next=21,t.viewer.exportSceneToARAsync(t.zkScene.get("sceneID"),o);case 21:s=e.sent;case 22:if(0!=s.length){e.next=24;break}return e.abrupt("return","");case 24:return a&&t.makeDAMAnalyticsView(g.DAMViewerAnalyticsEventType.ViewArProdutc),e.abrupt("return",t.buildModelViewerUrl(s));case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getMobileArUrl",function(){var e=C(w().mark(function e(n){var r,i,s,a,o;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,h.isDAMViewer)(),a=s?null!==(r=null===(i=t.zkProduct)||void 0===i?void 0:i.get("code"))&&void 0!==r?r:void 0:t.selection.getCompositionHashCode(),e.prev=2,e.next=5,document.requestStorageAccess();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Storage access denied");case 10:if(o=null,!t.isSceneArOnTheFly()){e.next=17;break}return e.next=14,t.getMobileLocalArUrl(n);case 14:o=e.sent,e.next=26;break;case 17:if(!h.IS_IOS){e.next=23;break}return e.next=20,t.viewer.exportSceneToUsdzAsync(t.zkScene.get("sceneID"),a,!0);case 20:o=e.sent,e.next=26;break;case 23:return e.next=25,t.viewer.exportSceneToRemoteGLBAsync(t.zkScene.get("sceneID"),a,!0);case 25:o=e.sent;case 26:return s&&t.makeDAMAnalyticsView(g.DAMViewerAnalyticsEventType.ViewArProdutc),e.abrupt("return",o);case 28:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()),M(this,"getMobileLocalArUrl",function(e){return new Promise(function(n,r){if(t.zkScene&&t.viewer){var i=t.zkScene.getSceneID();t.viewer.getSceneRootUrl().then(function(){var s=C(w().mark(function s(a){var o;return w().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return");case 2:if(!h.IS_IOS){s.next=9;break}return s.next=5,t.viewer.exportSceneToLocalUSDZAsync().catch(function(e){return console.error("Failed exporting scene to usdz",e),null});case 5:(o=s.sent)?n(o):r(o),s.next=12;break;case 9:if(e){s.next=11;break}throw new Error("no url defined for the ar on fly");case 11:t.viewer.saveGlbOnDatabaseAsync(i).then(function(){var r=new URL(e),s="id="+i;s+="&rootUrl="+encodeURIComponent(a),s+="&productId="+t.product.id,s+="&environment="+t.product.environment,s+="&token="+t.token,t.zkScene.getARAnchor()&&(s+="&arAnchor"+t.zkScene.getARAnchor()),r.search+=s;var o=r.toString();n(o)}).catch(function(e){console.error("Failed saving glb on database",e),r(e)});case 12:case"end":return s.stop()}},s)}));return function(e){return s.apply(this,arguments)}}())}})}),M(this,"openArMobile",function(e){if(t.viewer&&t.zkScene)if(t.isSceneArOnTheFly()&&h.IS_ANDROID)window.open(e);else if(h.IS_IOS){e&&!t.zkScene.getARScale()&&(e+="#allowsContentScaling=0");var n=document.createElement("a");n.setAttribute("rel","ar"),n.setAttribute("href",e),n.appendChild(document.createElement("img")),n.click()}else h.IS_ANDROID&&r.AndroidAR.openSceneViewer(e,function(){alert("Device not supported.")},t.zkScene.getARScale(),t.zkScene.getARAnchor())}),M(this,"registerView",C(w().mark(function e(){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.zkProduct&&!t.isShoppingPreview){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,l.axiosApi.post(Zakeke.config.baseApiUrl+"viewscount/addview",{productID:t.zkProduct.get("modelID"),environment:t.zkProduct.get("environment"),ecommerceID:t.settings.ecommerceID});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Failed registering view",e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}))),M(this,"getMeshIDbyName",function(e){var n,r;return null===(n=t.viewer)||void 0===n||null===(r=n.getMeshByName(e))||void 0===r?void 0:r.id}),M(this,"hideMeshAndSaveState",function(e){if(t.viewer.scene){var n=t.viewer.getMeshByID(e);if(n){var r,i=D([n].concat(y(n.getChildMeshes())));try{for(i.s();!(r=i.n()).done;){var s=r.value;t.previousMeshesVisibleStates[s.id]=s.isVisible,s.isVisible=!1}}catch(a){i.e(a)}finally{i.f()}t.viewer.setRenderingNeeded()}}}),M(this,"restoreMeshVisibility",function(e){if(t.viewer.scene){var n=t.viewer.getMeshByID(e);if(n&&void 0!==t.previousMeshesVisibleStates[n.id]){var r,i=D([n].concat(y(n.getChildMeshes())));try{for(i.s();!(r=i.n()).done;){var s=r.value;s.isVisible=t.previousMeshesVisibleStates[s.id],delete t.previousMeshesVisibleStates[s.id]}}catch(a){i.e(a)}finally{i.f()}t.viewer.setRenderingNeeded()}}}),M(this,"setMeshDesignVisibility",function(e,n){t.viewer&&(t.viewer.setDesignVisibility(e,n),t.viewer.setRenderingNeeded())}),M(this,"addFocusAttributesListener",function(e){t.viewer&&t.viewer.addFocusAttributesListener(e)}),M(this,"clearListeners",function(){t.viewer&&t.viewer.clearListeners()}),M(this,"setCameraLocked",function(e){return t.viewer.setCameraLocked(e)}),M(this,"isSceneTryOnEnabled",function(){var e;return t.viewer&&t.zkScene&&console.log(t.zkScene.getTryOnEnabled()),!(!t.viewer||!t.zkScene)&&null!==(e=t.zkScene.getTryOnEnabled())&&void 0!==e&&e}),M(this,"getTryOnUrl",function(e){return new Promise(function(n){if(t.zkScene&&t.viewer){var r=t.zkScene.getSceneID();t.viewer.getSceneRootUrl().then(function(i){i&&t.viewer.saveVisibleMeshesOnDatabaseAsync(r).then(function(){var s=new URL(null!==e&&void 0!==e?e:"https://zakekecdn.blob.core.windows.net/cdn/c/tryon/index.html"),a="id="+r;a+="&rootUrl="+encodeURIComponent(i),a+="&attachmentPoint=noseBridge",a+="&productId="+t.zkProduct.get("modelID"),a+="&environment="+t.zkProduct.get("environment"),a+="&token="+t.token,s.search+=a;var o=s.toString();n(o)})})}})}),M(this,"saveComposition",function(){var e=C(w().mark(function e(n,r,i){var s,a,o,l,u,c,d;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving..."),(l=null===(s=t.zkScene)||void 0===s?void 0:s.get("cameraLocations").find(function(e){var t;return"buy_screenshot_camera"===(null===(t=e.get("name"))||void 0===t?void 0:t.toLowerCase())}))||t.viewer.restoreCameraState(),e.next=5,(0,h.sleep)(1);case 5:return e.next=7,t.viewer.getSceneContentScreenshotAsync(null!==(a=null===n||void 0===n?void 0:n.customCartPreviewHeight)&&void 0!==a?a:t.previewWidth,null!==(o=null===n||void 0===n?void 0:n.customCartPreviewWidth)&&void 0!==o?o:t.previewHeight,0,t.zkCurrentTemplate,r,l);case 7:if(u=e.sent,t.pdSettings&&t.composition.set("pdSettings",t.pdSettings),t.composition.set("previewImageData",u),t.composition.get("isTemplate")||!t.zkCurrentTemplate){e.next=24;break}if(c=t.zkCurrentTemplate,(d=c.get("designItems")).filter(function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement}).forEach(function(e){e.get("areas").length>0&&!t.isAreaVisible(e.get("areas").at(0).get("sideID"))&&d.remove(e)}),!((null===d||void 0===d?void 0:d.toArray().map(function(e){return!e.get("constraints")||e.get("constraints").get("canResize")||e.get("constraints").get("canMove")||e.get("constraints").get("canDelete")||e.get("constraints").get("canRotate")||e.get("constraints").get("canEdit")||e.get("constraints").get("isPrintable")}).filter(function(e){return e}).length)>0)){e.next=21;break}return e.next=19,t.saveDesignBackbone(i);case 19:e.next=22;break;case 21:t.composition.set("designDocID",null);case 22:e.next=25;break;case 24:t.composition.set("designDocID",null);case 25:return e.next=27,t.saveCompositionBackbone();case 27:console.log("Composition saved!");case 28:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),M(this,"bootstrapComposition",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.selection=Zakeke.ComposerSelection.CreateComposerSelection(t.zkProduct),t.composition=n,e.next=4,t.internalLoadComposition(t.composition.id);case 4:t.currentCompositionInfo||(t.currentCompositionInfo={compositionId:"",compositionName:"",compositionTags:[]}),t.currentCompositionInfo.compositionId=t.compositionId,t.currentCompositionInfo.compositionName=t.composition.get("name"),t.currentCompositionInfo.compositionTags=t.composition.get("tags");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"loadSavedComposition",function(){var e=C(w().mark(function e(n){var r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=null===(r=t.savedCompositions)||void 0===r?void 0:r.find(function(e){return e.docID==n}))){e.next=4;break}return e.next=4,t.bootstrapComposition(new MPlaza.Composition(i));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"updateSavedCompositions",C(w().mark(function e(){var n,r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.get(Zakeke.config.baseApiUrl+"compositiondocs/product/".concat(t.zkProduct.get("modelID")),{params:{draft:!0}});case 2:n=e.sent.data,t.savedCompositions=n,n&&(r=t.themeCompositionsFromSavedCompositions(n),t.themeCompositions=r),t.trigger("change");case 6:case"end":return e.stop()}},e)}))),M(this,"themeCompositionsFromSavedCompositions",function(e){return e.map(function(e){return{name:e.name,docID:e.docID,previewImageUrl:e.previewImageUrl,tags:e.tags}})}),M(this,"saveDraftsComposition",function(){var e=C(w().mark(function e(n,r,i){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.composition.set("name",n),t.composition.set("tags",r),t.composition.set("isDraft",!0),!i){e.next=8;break}return e.next=6,t.saveCompositionCopy();case 6:e.next=10;break;case 8:return e.next=10,t.saveComposition(void 0);case 10:return e.abrupt("return",t.updateSavedCompositions());case 11:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),M(this,"deleteSavedComposition",function(){var e=C(w().mark(function e(n){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.delete(Zakeke.config.baseApiUrl+"compositiondocs/".concat(n));case 2:t.updateSavedCompositions();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"applyTemplate",function(){var e=C(w().mark(function e(n){var r,i,s,a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.axiosApi.get("proxycompositions/"+n,{params:{template:!0}});case 3:return e.next=5,e.sent.data;case 5:return r=e.sent,i=t.composition.get("compositionItems"),s=new MPlaza.CompositionItems(r.compositionItems),a=new MPlaza.CompositionItems,i.toArray().forEach(function(e){var t=s.find(function(t){return t.get("attributeID")===e.get("attributeID")});a.add(null!==t&&void 0!==t?t:e)}),t.composition.set("compositionItems",a),t.selection.setupOnComposition(t.composition),e.next=14,t.sync3DAndPlatformSelectionWithCurrentSelection();case 14:t.buildStructure(),t.updatePrice(),t.selection.getAllAttributeSelections().forEach(function(e){var n=e.get("options").find(function(e){return e.get("selected")}),r=t.platformAttributesSelection.find(function(t){return(0,h.matchCodes)(t.attributeCode,e.get("attributeCode"))});r&&n&&(r.optionCode=n.get("optionCode"),r.optionLabel=n.get("name")),console.log({platformSelection:r})}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}},e,null,[[0,19]])}));return function(t){return e.apply(this,arguments)}}()),M(this,"configureByAI",function(){var e=C(w().mark(function e(n){var r,i,s,a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.axiosApi.get("ai/configuration-by-prompt",{params:{productId:t.zkProduct.get("modelID"),prompt:n}});case 3:r=e.sent.data,i=D(r),e.prev=5,a=w().mark(function e(){var n,r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s.value,(r=t.zkProduct.get("attributes").find(function(e){return e.get("name")==n.attributeName}))&&(i=r.get("options").find(function(e){return e.get("name")==n.optionName}))&&t.selectOption(i.get("optionID"));case 3:case"end":return e.stop()}},e)}),i.s();case 8:if((s=i.n()).done){e.next=12;break}return e.delegateYield(a(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(0),console.error(e.t2);case 25:case"end":return e.stop()}},e,null,[[0,22],[5,14,17,20]])}));return function(t){return e.apply(this,arguments)}}()),M(this,"getTryOnProvidersList",C(w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.tryOnProvidersSettings){e.next=2;break}return e.abrupt("return",t.tryOnProvidersSettings);case 2:return e.next=4,l.axiosApi.get(Zakeke.config.tryOnApiUrl+"tryonprovider/list");case 4:return n=e.sent,e.abrupt("return",t.tryOnProvidersSettings=n.data);case 6:case"end":return e.stop()}},e)}))),M(this,"getTryOnProductInfo",C(w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.zkProduct){e.next=2;break}return e.abrupt("return",null);case 2:if(!t.tryOnProductSettings){e.next=4;break}return e.abrupt("return",t.tryOnProductSettings);case 4:return e.next=6,l.axiosApi.get(Zakeke.config.tryOnApiUrl+"tryonproduct/".concat(t.internalProduct.get("modelID")));case 6:return n=e.sent,t.tryOnProductSettings=n.data,e.abrupt("return",t.tryOnProductSettings);case 9:case"end":return e.stop()}},e)}))),M(this,"getMessagesByProductCode",function(){var e=C(w().mark(function e(t){var n,r,i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("query",t),n={name:"messagesByProduct",query:"query getEventMessagesByProduct($productGlobalCode: String!){\n\t\t\t\t\t\t\tmessagesByProduct(productGlobalCode: $productGlobalCode){\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\teventGlobalID\n\t\t\t\t\t\t\t\tmessageId\n\t\t\t\t\t\t\t\tmessageText\n\t\t\t\t\t\t\t\teventName\n\t\t\t\t\t\t\t\teventId\n\t\t\t\t\t\t\t\tcloseable\n\t\t\t\t\t\t\t\tvisible\n\t\t\t\t\t\t\t\taddToCartDisabledValue\n\t\t\t\t\t\t\t\tenableCheckForSellerImagesValue\n\t\t\t\t\t\t\t\tenableAdditionalMessage\n\t\t\t\t\t\t\t\tadditionalMessage\n\t\t\t\t\t\t\t\teventMessageId\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\ttitleSingleMessage\n\t\t\t\t\t\t\t\tinfoLink\n\t\t\t\t\t\t\t\tdefaultMessage\n\t\t\t\t\t\t\t\tvisibleOnlyOnApi\n\t\t\t\t\t\t\t\taddToCartLabel\n\t\t\t\t\t\t\t\tvisibleLowQualityInfoText\n\t\t\t\t\t\t\t\tdefaultAdditionalMessageText\n\t\t\t\t\t\t\t\twarningText\n\t\t\t\t\t\t\t\tonDeleteWarningText\n\t\t\t\t\t\t\t\tisDefault\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}",variables:{productGlobalCode:"guid://Zakeke/Model/"+t}},e.next=4,l.axiosApi.post(Zakeke.config.baseApiUrl+"graphql",n);case 4:return r=e.sent,i=null,r&&r.data&&r.data.data.messagesByProduct&&(i=r.data.data.messagesByProduct.map(function(e){return{eventID:e.eventId,description:e.messageText,closeable:e.closeable,visible:e.visible,addToCartDisabledIfVisible:e.addToCartDisabledValue,additionalData:e.additionalMessage,enableCheckForSellerImages:e.enableCheckForSellerImagesValue,isDefault:e.isDefault}}).map(function(e){return a.EventMessage.fromMessage(e)})),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(this,"getTryOnSellerInfo",function(){var e=C(w().mark(function e(n,r){var i;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.settings){e.next=2;break}return e.abrupt("return",null);case 2:if(!t.tryOnSellerSettings){e.next=4;break}return e.abrupt("return",t.tryOnSellerSettings);case 4:return e.next=6,l.axiosApi.get(Zakeke.config.tryOnApiUrl+"tryoncustomer/?typeID="+n.toString()+"&providerID="+r.toString());case 6:return i=e.sent,t.tryOnSellerSettings=i.data,e.abrupt("return",t.tryOnSellerSettings);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),M(this,"setPDDistance",function(e){t.pdSettings=e}),M(this,"pdDistance",function(){return t.pdSettings}),M(this,"exportTryOnMesh",C(w().mark(function e(){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.zkScene){e.next=2;break}return e.abrupt("return",null);case 2:if(t.viewer){e.next=4;break}return e.abrupt("return",null);case 4:if(n=t.viewer.getTryOnMeshVisible()){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",t.viewer.exportMeshToGLBBlob(n.id));case 8:case"end":return e.stop()}},e)}))),M(this,"getTryOnSettings",function(){if(t.zkScene)return t.zkScene.getTryOnSettings()}),M(this,"tryOnCountView",function(){var e=C(w().mark(function e(t,n,r){return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.axiosApi.post(Zakeke.config.tryOnApiUrl+"tryoncount/view",{sellerID:t,providerID:n,mode:r});case 2:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),M(this,"getPrintingMethodsRestrictions",function(){var e={colorCode:"#000000",isDefault:!0},n={allowedBold:!0,allowedItalic:!0,allowedCurved:!0,disableTextColors:!1,textColors:[e],defaultColor:"#000000"};if(t.zkProduct&&t.zkProduct.get("printTypes").length>0){var r=t.zkProduct.get("printTypes").at(0).get("printTypeRestrictions");if(r){var i,s,a,o,l,u,c;e=_(_({},e),{},{colorCode:null!==(i=r.get("defaultColor"))&&void 0!==i?i:"#000000"});var h=null!==(s=r.get("textColors"))&&void 0!==s?s:[];h.find(function(t){return t.colorCode===e.colorCode})||h.push(e),n={allowedBold:null===(a=r.get("allowBold"))||void 0===a||a,allowedItalic:null===(o=r.get("allowItalic"))||void 0===o||o,allowedCurved:null===(l=r.get("curvedText"))||void 0===l||l,disableTextColors:null!==(u=r.get("disableTextColors"))&&void 0!==u&&u,textColors:h,defaultColor:null!==(c=r.get("defaultColor"))&&void 0!==c?c:"#000000"}}}return n}),h.IS_IOS&&(this.previewHeight=512,this.previewWidth=512)}return function(e,t,n){t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"internalProduct",get:function(){return this.zkProduct}},{key:"internalScene",get:function(){return this.zkScene}},{key:"internalCurrentTemplate",get:function(){return this.zkCurrentTemplate}},{key:"isFullscreenMode",get:function(){var e=document;return Boolean(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)}},{key:"isViewerReady",get:function(){return!!this.viewer}},{key:"isShoppingPreview",get:function(){return this.isViewerMode||"preview"==this.platform.toLowerCase()}},{key:"makeDAMAnalyticsView",value:function(){var e=C(w().mark(function e(t){var n,r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={modelCode:this.productCode||"",userId:(null===(n=this.settings)||void 0===n?void 0:n.userID)||0,eventType:t},e.abrupt("return",m.default.post(Zakeke.config.damSettings.analyticsUrl,r));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addHotjarScript",value:function(e){if(e&&e.length>0&&this.platform&&"preview"!==this.platform.toLowerCase()){var t=document.createElement("script");t.type="text/javascript",t.innerHTML="(function(h,o,t,j,a,r){\n                    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};\n                    h._hjSettings={hjid:".concat(e,",hjsv:6};\n                    a=o.getElementsByTagName('head')[0];\n                    r=o.createElement('script');r.async=1;\n                    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;\n                    a.appendChild(r);\n                })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');"),document.getElementsByTagName("head")[0].appendChild(t)}}},{key:"addGoogleTagManagerID",value:function(e){if(e&&e.length>0&&this.platform&&"preview"!==this.platform.toLowerCase()){var t=document.querySelector("head");t&&t.append("<script>"+"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n\t\t\t\tnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n\t\t\t\tj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n\t\t\t\t'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n\t\t\t\t})(window,document,'script','dataLayer','".concat(e,"')")+"<\/script>");var n=document.createElement("noscript"),r=document.createElement("iframe");r.src="https://www.googletagmanager.com/ns.html?id=".concat(e),r.height="0",r.width="0",r.style.cssText="display:none;visibility:hidden",n.appendChild(r),document.body.insertBefore(n,document.body.firstChild)}}},{key:"setQuantity",value:function(e){var t=this.zkProduct.get("quantityRule");if(t){var n=t.get("minQuantity"),r=t.get("maxQuantity"),i=t.get("step");n&&e<n&&(e=n),r&&e>r&&(e=r),i&&(e=Math.round(e/i)*i)<i&&(e=i)}this.quantity=e,this.trigger("change"),this.updatePrice()}},{key:"createStep",value:function(e,t){var n,r,i=this,s=new g.Step;s.id=e.get("stepID"),s.guid=e.get("stepGuid"),s.name=null!==(n=e.get("name"))&&void 0!==n?n:"",s.cameraLocationID=null!==(r=e.get("cameraLocationID"))&&void 0!==r?r:null,s.displayOrder=e.get("displayOrder");for(var a=function(){var n=i.zkProduct.get("attributes").at(o),r=t.get("attributes").find(function(e){return e.get("attributeID")==n.get("attributeID")});if(r&&n.get("stepID")==e.get("stepID")){var a=i.createAttributeFromSelection(r);s.attributes.push(a)}},o=0;o<this.zkProduct.get("attributes").length;o++)a();s.attributes.sort(function(e,t){return e.displayOrder-t.displayOrder});for(var l=function(){var n=i.zkProduct.get("templateGroups").at(u),r=t.get("templateGroups").find(function(e){return e.get("templateGroupID")==n.get("templateGroupID")});if(r&&n.get("stepID")==e.get("stepID")){var a=i.createTemplateGroupFromSelection(r);s.templateGroups.push(a)}},u=0;u<this.zkProduct.get("templateGroups").length;u++)l();return s.templateGroups.sort(function(e,t){return e.displayOrder-t.displayOrder}),s}},{key:"selectOptionsbyPrompt",value:function(){var e=C(w().mark(function e(t){var n,r,i,s,a,o=this;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Invalid prompt");case 2:return e.next=4,l.axiosApi.get(Zakeke.config.baseApiUrl+"ai/configuration-by-prompt",{params:{productId:null===(n=this.product)||void 0===n?void 0:n.id}});case 4:r=e.sent.data,i=D(r),e.prev=6,a=w().mark(function e(){var t,n,r,i,a;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=x(s.value,2),r=n[0],i=n[1],(a=null===(t=o.groups.flatMap(function(e){return e.attributes}).find(function(e){return e.name===r}))||void 0===t?void 0:t.options.find(function(e){return e.name===i}))&&o.selectOption(a.id);case 3:case"end":return e.stop()}},e)}),i.s();case 9:if((s=i.n()).done){e.next=13;break}return e.delegateYield(a(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),i.e(e.t1);case 18:return e.prev=18,i.f(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[6,15,18,21]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setCamera",value:function(e,t,n){this.viewer.setCameraLocation(e,t,n),this.lastCameraLocation=e}},{key:"getCameraByName",value:function(e){var t;return null===(t=this.zkScene)||void 0===t?void 0:t.get("cameraLocations").find(function(t){return t.get("name")==e})}},{key:"setCameraLocation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getCameraByName(e);if(!n)throw new Error("Camera with name ".concat(e," does not exists."));this.viewer.setCameraLocation(n.get("locationID"),!1,t),this.lastCameraLocation=n.get("locationID")}},{key:"getDesignItemsInfo",value:function(){var e,t,n=[];return this.viewer&&(n=null!==(e=null===(t=this.viewer.getDesignItemsInfo())||void 0===t?void 0:t.map(function(e){return e instanceof MPlaza.ImageItemInfo?new g.ImageItem(e):new g.TextItem(e)}))&&void 0!==e?e:[]),n}},{key:"isAreaVisible",value:function(e){var t,n=D(this.zkProduct.get("scenes").at(0).get("meshSides").filter(function(t){return t.get("sideID")==e}));try{for(n.s();!(t=n.n()).done;){var r=t.value.get("meshID");if(r){var i=this.viewer.scene.getMeshByID(r);if(i&&i.isVisible)return!0}}}catch(s){n.e(s)}finally{n.f()}return!1}},{key:"addItemText",value:function(){var e=C(w().mark(function e(t,n){var r;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.viewer){e.next=12;break}if(!(r=this.fonts.find(function(e){return e.name===t.fontFamily}))){e.next=9;break}return e.next=5,(0,c.loadFonts)([r]).catch(function(e){console.error("Error loading font",e,r)});case 5:this.viewer.addDesignItemText(_(_({},t),{},{content:t.text}),n),this.renderDesign(),e.next=10;break;case 9:console.warn("No font found for ".concat(t.fontFamily));case 10:e.next=13;break;case 12:throw"Called add item text but no viewer or viewer not ready";case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fullyLoadFont",value:function(){var e=C(w().mark(function e(t){var n;return w().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=12;break}if(!(n=this.fonts.find(function(e){return e.name===t}))){e.next=9;break}if(n.fullLoaded){e.next=6;break}return e.next=6,(0,c.loadFonts)([n]);case 6:return e.abrupt("return",n);case 9:return e.abrupt("return",this.fonts[0]);case 10:e.next=16;break;case 12:if(t.fullLoaded){e.next=15;break}return e.next=15,(0,c.loadFonts)([t]);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setCameraPivot",value:function(e){this.viewer.setCameraPivot(e)}},{key:"resetCameraPivot",value:function(){this.viewer.setCameraPivot(null)}},{key:"setCameraZoomEnabled",value:function(e){this.viewer.setCameraZoomEnabled(e)}},{key:"setCameraByName",value:function(e,t,n){if(this.zkScene){var r=this.zkScene.get("cameraLocations").find(function(t){return t.get("name")==e});r&&this.viewer.setCameraLocation(r.get("locationID"),t,n)}}},{key:"findObjectByName",value:function(e){return this.viewer&&this.viewer.scene?this.viewer.scene.meshes.find(function(t){return t.name==e}):null}},{key:"hightlightGroup",value:function(e){var t;null===(t=this.viewer)||void 0===t||t.highlightGroupByID(e)}},{key:"highlightAttribute",value:function(e){var t;null===(t=this.viewer)||void 0===t||t.highlightAttributeByID(e)}},{key:"hasVTryOnEnabled",get:function(){return!!this.zkScene&&!!this.tryOnSellerSettings&&this.tryOnSellerSettings.vtoState!==a.SellerTryOnState.NotActive&&!!this.tryOnProductSettings&&!!JSON.parse(this.tryOnProductSettings.settings).active&&!!this.zkScene.getTryOnEnabled()&&!!this.zkScene.getTryOnSettings()&&!!this.zkScene.getTryOnSettings().typeSettings.active}},{key:"canUseTryOn",get:function(){return!!this.tryOnSellerSettings&&this.tryOnSellerSettings.vtoState!==a.SellerTryOnState.NotActive&&!!this.tryOnProductSettings&&!!JSON.parse(this.tryOnProductSettings.settings).try_on&&!!this.tryOnSellerSettings&&(!this.zkScene.getTryOnSettings()||!this.zkScene.getTryOnSettings().typeSettings.try_on)}},{key:"canUsePD",get:function(){return!!this.tryOnSellerSettings&&this.tryOnSellerSettings.vtoState!==a.SellerTryOnState.NotActive&&!!this.tryOnProductSettings&&!!JSON.parse(this.tryOnProductSettings.settings).pd&&!!this.tryOnSellerSettings&&!this.zkScene.getTryOnSettings().typeSettings.pd}},{key:"isVisibleMeshShownForTryOn",get:function(){var e;return null===(e=this.viewer)||void 0===e?void 0:e.isTryOnMeshVisibleEnabledToShow()}},{key:"isMandatoryPD",get:function(){return this.isPupillaryDistanceMandatory}},{key:"isTryOnMeshVisible",get:function(){var e;return null!=(null===(e=this.viewer)||void 0===e?void 0:e.getTryOnMeshVisible())}},{key:"tryOnMeshVisibleSettings",get:function(){if(this.isTryOnMeshVisible){var e;try{var t,n=(null===this||void 0===this||null===(t=this.viewer)||void 0===t?void 0:t.getDAMFineTuningData())||void 0;if(n)return n}catch(i){console.error("Error parsing DAM fine tuning data",i)}var r=null===this||void 0===this||null===(e=this.viewer)||void 0===e?void 0:e.getTryOnFineTuningMeshVisible();if(r)return this.viewer.getMeshFineTuningData(r)||void 0}}}]),e}()},"./src/exceptions.tsx":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e){var t=o();return function(){var n,i=l(e);if(t){var s=l(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,{Exception:()=>f,NonSquarePixelException:()=>v,ParametersParseFailException:()=>p,UnsupportedPlatformException:()=>g,UploadFailedExpection:()=>m});var f=c(function e(t){d(this,e),this.message=t}),p=function(e){i(n,e);var t=a(n);function n(e){var r;return d(this,n),(r=t.call(this,"Failed parsing parameters: "+e)).parameter=e,r}return c(n)}(f),g=function(e){i(n,e);var t=a(n);function n(e){var r;return d(this,n),(r=t.call(this,"Platform "+e.toString()+" not supported.")).platform=e,r}return c(n)}(f),m=function(e){i(n,e);var t=a(n);function n(){return d(this,n),t.call(this,"Upload failed.")}return c(n)}(f),v=function(e){i(n,e);var t=a(n);function n(){return d(this,n),t.call(this,"The image is not supported (non-square pixels)")}return c(n)}(f)},"./src/fontsManager.ts":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return t};var e,t={},n=Object.prototype,s=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),o=new O(r||[]);return a(s,"_invoke",{value:k(e,n,o)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};h(w,l,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&s.call(C,l)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,a,o,l){var u=f(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==r(h)&&s.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,o,l)},function(e){n("throw",e,o,l)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return n("throw",e,o,l)})}l(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function s(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(s,s):s()}})}function k(t,n,r){var i=p;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=f(t,n,r);if("normal"===u.type){if(i=r.done?v:g,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=f(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(s.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=x,a(D,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,c,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),h(A.prototype,u,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(d(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),h(D,c,"Generator"),h(D,l,function(){return this}),h(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),u=s.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw s}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,l,"next",e)}function l(e){o(s,r,i,a,l,"throw",e)}a(void 0)})}}function u(e){return c.apply(this,arguments)}function c(){return c=l(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){WebFont.load({timeout:2e5,custom:{families:t.map(function(e){return e.name+(e.variations&&""!=e.variations?":"+e.variations:"")}),urls:t.map(function(e){return e.cssUrl})},active:function(){var n=l(i().mark(function n(){var r,a,o,l,u,c,h;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=s(t),n.prev=1,r.s();case 3:if((a=r.n()).done){n.next=30;break}o=a.value,l=[],u=s(o.faces),n.prev=7,h=i().mark(function e(){var t,n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=c.value).parsedFiles){e.next=3;break}return e.abrupt("return","continue");case 3:n=s(t.filesUrls),e.prev=4,a=i().mark(function e(){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:((n=r.value).toLowerCase().endsWith(".ttf")||n.toLowerCase().endsWith(".otf"))&&(t.parsedFiles=t.parsedFiles||[],l.push(opentype.load(n).then(function(e){t.parsedFiles.push({url:n,file:e})})));case 2:case"end":return e.stop()}},e)}),n.s();case 7:if((r=n.n()).done){e.next=11;break}return e.delegateYield(a(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,13,16,19]])}),u.s();case 10:if((c=u.n()).done){n.next=17;break}return n.delegateYield(h(),"t0",12);case 12:if("continue"!==n.t0){n.next=15;break}return n.abrupt("continue",15);case 15:n.next=10;break;case 17:n.next=22;break;case 19:n.prev=19,n.t1=n.catch(7),u.e(n.t1);case 22:return n.prev=22,u.f(),n.finish(22);case 25:return n.next=27,Promise.allSettled(l);case 27:o.fullLoaded=!0;case 28:n.next=3;break;case 30:n.next=35;break;case 32:n.prev=32,n.t2=n.catch(1),r.e(n.t2);case 35:return n.prev=35,r.f(),n.finish(35);case 38:e();case 39:case"end":return n.stop()}},n,null,[[1,32,35,38],[7,19,22,25]])}));return function(){return n.apply(this,arguments)}}(),inactive:function(){n()}})}));case 1:case"end":return e.stop()}},e)})),c.apply(this,arguments)}function h(e,t){return d.apply(this,arguments)}function d(){return(d=l(i().mark(function e(t,n){var r,a,o,l,c,h,d,f;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=s(t.get("designItems").models);try{for(a.s();!(o=a.n()).done;)l=o.value,c=JSON.parse(l.get("json")),h=c[1],(d=h.fontFamily||(h.children&&h.children.length>0&&h.children[0].length>1?h.children[0][1].fontFamily:null))&&r.push(d.replace(/"/g,""))}catch(i){a.e(i)}finally{a.f()}if(f=r.map(function(e){return n.find(function(t){return t.name==e})||null}).filter(function(e){return null!=e}),!(f.length>0)){e.next=7;break}return e.next=7,u(f).catch(function(e){console.error("Error loading fonts",e,f)});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function f(e){return e.replace(/\x08|\u0000/g,"")}function p(e,t){return _(b(y(f(t))),e)}function g(e,t){for(var n=[],r=p(e,t),i=0;i<t.length;i++)t[i]!==r[i]&&n.push(t[i]);return{sanitizedText:r,dirtyChars:n}}function m(e,t){return e.split("").filter(function(e){return e.match(/\s/)||t.charToGlyph(e).unicode}).join("")}function v(e){return e.parsedFiles.find(function(e){return e.url.toLowerCase().endsWith(".ttf")||e.url.toLowerCase().endsWith(".otf")})}function _(e,t){if(!e||!t.parsedFiles)return e;var n=v(t);return n&&n.file?m(e,n.file):e}function y(e){var t=e;return(e.match(/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g)||[]).forEach(function(e){/[0-9*#]/.test(e)||(t=t.replace(e,""))}),t}function b(e){var t=e;return(e.match(/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g)||[]).forEach(function(e){/[0-9*#]/.test(e)||(t=t.replace(e,""))}),t}n.r(t),n.d(t,{downloadFontsOfDesign:()=>h,getParsedFileFromFont:()=>v,loadFonts:()=>u,removeEmojisFromText:()=>b,removeInvalidCharacters:()=>m,removeInvalidCharactersFromText:()=>f,removeTextualEmojisFromText:()=>y,removeUnsupportedCharacters:()=>_,sanitizeString:()=>p,sanitizeText:()=>g})},"./src/helpers.tsx":(e,t,n)=>{"use strict";function r(){r=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),o=new O(r||[]);return a(s,"_invoke",{value:k(e,n,o)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};h(w,l,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&i.call(C,l)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(r,a,o,l){var u=f(e[r],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==s(h)&&i.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,o,l)},function(e){n("throw",e,o,l)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return n("throw",e,o,l)})}l(u.arg)}var r;a(this,"_invoke",{value:function(e,i){function s(){return new t(function(t,r){n(e,i,t,r)})}return r=r?r.then(s,s):s()}})}function k(t,n,r){var i=p;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=f(t,n,r);if("normal"===u.type){if(i=r.done?v:g,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=f(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return b.prototype=x,a(D,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,c,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),h(A.prototype,u,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(d(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),h(D,c,"Generator"),h(D,l,function(){return this}),h(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function i(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}n.r(t),n.d(t,{Browser:()=>f,IS_ANDROID:()=>M,IS_AR_DEVICE_COMPLIANT:()=>I,IS_IOS:()=>T,Pagination:()=>p,StringHelper:()=>d,T:()=>c,ascComparator:()=>B,compare:()=>C,copy:()=>S,dataURLtoFile:()=>h,getNavigatorQueryParams:()=>N,getPlatformSettings:()=>k,hex2rgb:()=>g,hslToRgb:()=>_,hsvToRgb:()=>x,hue2rgb:()=>y,iOS:()=>w,isDAMViewer:()=>R,isPlatformCode:()=>E,isValidJSON:()=>D,matchCodes:()=>A,rgb2hex:()=>m,rgbToHsl:()=>v,rgbToHsv:()=>b,sleep:()=>L,uuid:()=>O});var c=function(){function e(){a(this,e)}return l(e,null,[{key:"_",value:function(e,t){var n;if(null!==(n=this.translations)&&void 0!==n&&n.statics)for(var r,i=0,s=Array.from(null===(r=this.translations)||void 0===r?void 0:r.statics.keys());i<s.length;i++){var a=s[i];if(a.toLowerCase()===e.toLowerCase())return this.translations.statics.get(a)}var o=window.gt;return o?o.dgettext(t,e):e}},{key:"_d",value:function(e){var t,n=e;if(null!==(t=this.translations)&&void 0!==t&&t.dynamics)for(var r,i=0,s=Array.from(null===(r=this.translations)||void 0===r?void 0:r.dynamics.keys());i<s.length;i++){var a=s[i];a.toLowerCase()===e.toLowerCase()&&this.translations.dynamics.get(a)&&(n=this.translations.dynamics.get(a))}return n}}]),e}();function h(e,t){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),s=i.length,a=new Uint8Array(s);s--;)a[s]=i.charCodeAt(s);return new File([a],t,{type:r})}!function(e,t,n){(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c,"translations",null);var d=function(){function e(){a(this,e)}return l(e,null,[{key:"padLeft",value:function(e,t,n){for(var r=e.toString(),i=0;i<t-r.length;i++)r=n+r;return r}},{key:"padRight",value:function(e,t,n){for(var r=e.toString(),i=0;i<t-r.length;i++)r+=n;return r}},{key:"format",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(e,t,n){return e.replace("{".concat(n,"}"),t)},e)}},{key:"camelToSnake",value:function(t){var n,r,i,a={};if(t instanceof Array)for(n in a=[],t)"object"===s(i=t[n])&&(i=e.camelToSnake(i)),a.push(i);else for(n in a={},t)t.hasOwnProperty(n)&&(r=n.replace(/\.?([A-Z]+)/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,""),(i=t[n])&&(i&&i instanceof Array||null!==i&&i.constructor===Object)&&(i=e.camelToSnake(i)),a[r]=i);return a}},{key:"pascalToCamel",value:function(t){var n,r,i,a={};if(t instanceof Array)for(n in a=[],t)"object"===s(i=t[n])&&(i=e.pascalToCamel(i)),a.push(i);else for(n in a={},t)t.hasOwnProperty(n)&&(r=n.replace(/^([A-Z])/g,function(e,t){return t.toLowerCase()}),(i=t[n])&&(i&&i instanceof Array||null!==i&&i.constructor===Object)&&(i=e.pascalToCamel(i)),a[r]=i);return a}}]),e}(),f=function(){function e(){a(this,e)}return l(e,null,[{key:"openWindow",value:function(e,t,n){return window.open(e,"width="+t+",height="+n+";menubar=no,location=no,status=no,toolbar=no")}}]),e}(),p=function(){function e(){a(this,e)}return l(e,null,[{key:"nextPage",value:function(e){var t=/.*<(.*)>; rel="next".*/.exec(e);return t?t[1]:null}}]),e}();function g(e){e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}}function m(e,t,n){return"#"+("0"+parseInt(e).toString(16)).slice(-2)+("0"+parseInt(t).toString(16)).slice(-2)+("0"+parseInt(n).toString(16)).slice(-2)}function v(e,t,n){e/=255,t/=255,n/=255;var r,i,s=Math.max(e,t,n),a=Math.min(e,t,n),o=(s+a)/2;if(s==a)r=i=0;else{var l=s-a;switch(i=o>.5?l/(2-s-a):l/(s+a),s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return[r,i,o]}function _(e,t,n){var r,i,s;if(0==t)r=i=s=n;else{var a=n<.5?n*(1+t):n+t-n*t,o=2*n-a;r=y(o,a,e+1/3),i=y(o,a,e),s=y(o,a,e-1/3)}return[255*r,255*i,255*s]}function y(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function b(e,t,n){e/=255,t/=255,n/=255;var r,i,s=Math.max(e,t,n),a=Math.min(e,t,n),o=s,l=s-a;if(i=0==s?0:l/s,s==a)r=0;else{switch(s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return[r,i,o]}function x(e,t,n){var r,i,s,a=Math.floor(6*e),o=6*e-a,l=n*(1-t),u=n*(1-o*t),c=n*(1-(1-o)*t);switch(a%6){case 0:r=n,i=c,s=l;break;case 1:r=u,i=n,s=l;break;case 2:r=l,i=n,s=c;break;case 3:r=l,i=u,s=n;break;case 4:r=c,i=l,s=n;break;case 5:r=n,i=l,s=u}return[255*r,255*i,255*s]}var w=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);function S(e){if(!e)return e;var t,n,r;for(r in t=Array.isArray(e)?[]:{},e)n=e[r],t[r]="object"===s(n)?S(n):n;return t}function C(e,t){if(!e||!t)return!1;var n,r,i=S(e),a=S(t);try{var o=JSON.parse(i.id);"object"===s(o)&&o.id&&(i=o,console.log("Code is a valid json with Id for obj1, use json instead",i,a));var l=JSON.parse(a.id);"object"===s(l)&&l.id&&(a=l,console.log("Code is a valid json with Id for obj2, use json instead",i,a))}catch(d){}if(delete i.zakekePlatform,delete a.zakekePlatform,delete i.label,delete a.label,delete i.isGlobal,delete a.isGlobal,Object.keys(i).length!=Object.keys(a).length)return!1;var u=!0;for(r in i){if(n=i[r],"undefined"===typeof a[r]&&(u=!1),n!=a[r]&&(u=!1),"object"===s(n)&&"object"===s(a[r])&&(u=C(n,a[r])),D(n)||D(a[r]))try{var c="object"===s(n)?n:JSON.parse(n),h="object"===s(a[r])?a[r]:JSON.parse(a[r]);"object"==s(c)&&"object"==s(h)&&(u=C(c,h))}catch(f){}if(!u)break}return u}function D(e){try{return JSON.parse(e),!0}catch(t){}return!1}function E(e){try{return JSON.parse(e).zakekePlatform}catch(t){}return!1}function A(e,t){return E(e)&&E(t)?C(JSON.parse(e),JSON.parse(t)):e==t}function k(){return CURRENT_REDUX_STORE.getState().platformSettings}var M=/android/i.test(navigator.userAgent),T=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,I=function(){var e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}();function O(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}function L(e){return P.apply(this,arguments)}function P(){var e;return e=r().mark(function e(t){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}),P=function(){var t=this,n=arguments;return new Promise(function(r,s){var a=e.apply(t,n);function o(e){i(a,r,s,o,l,"next",e)}function l(e){i(a,r,s,o,l,"throw",e)}o(void 0)})},P.apply(this,arguments)}function B(e){return function(t,n){var r=e(t),i=e(n);return r<i?-1:i<r?1:0}}function N(){var e=new URL(window.location.href);return new URLSearchParams(e.search)}function R(){var e=N();return e.has("dam")&&"true"===e.get("dam")}},"./src/hooks/tryonContext.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TryOnContext:()=>s,useZakekeTryOn:()=>a});var r=n("react"),i=n("./src/components/tryon/tryOnModels.ts"),s=(0,r.createContext)({tryon:{},setTryon:function(e){},tryOnPickedMode:i.TryOnMode.TryOn,setTryOnPickedMode:function(e){},tryOnVisibility:!1,setTryOnVisibility:function(e){}}),a=function(){var e=(0,r.useContext)(s);if(!e)throw new Error("Invalid Zakeke TryOn state. Ensure you have wrapped your component with the ZakekeProvider component and you are not calling useZakekeTryOn outside of it.");return e}},"./src/hooks/useZakeke.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{useZakeke:()=>s});var r=n("react"),i=n("./src/state/provider.tsx"),s=function(){var e=(0,r.useContext)(i.context);if(!e)throw new Error("Invalid Zakeke state. Ensure you have wrapped your component with the ZakekeProvider component and you are not calling useZakeke outside of it.");return e}},"./src/imageUploadTask.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n("./src/api.ts"),i=n("./src/exceptions.tsx");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,a=Object.create(s.prototype),o=new O(r||[]);return i(a,"_invoke",{value:k(e,n,o)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};h(w,o,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,o)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,a,o,l){var u=f(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==s(h)&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,o,l)},function(e){n("throw",e,o,l)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return n("throw",e,o,l)})}l(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return a=a?a.then(i,i):i()}})}function k(t,n,r){var i=p;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=f(t,n,r);if("normal"===u.type){if(i=r.done?v:g,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=f(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return b.prototype=x,i(D,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,c,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),h(A.prototype,u,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(d(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),h(D,c,"Generator"),h(D,o,function(){return this}),h(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function u(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(e){u(s,r,i,a,o,"next",e)}function o(e){u(s,r,i,a,o,"throw",e)}a(void 0)})}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var g={convertEpsToSvg:!1,convertPdfToSvg:!1,convertAiToSvg:!1,IsPdfWithRasterAllowed:!1},m=d(function e(t,n){var s=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"upload",function(){var e=c(l().mark(function e(t,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.uploadFileChunked(t,t.type,Zakeke.generateUUID(),s.options,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),f(this,"addPrintingOptions",function(e){var t=s.options;if(e){var n,r=a(e.toArray());try{for(r.s();!(n=r.n()).done;){var i=n.value;s.options.convertEpsToSvg=!(!1===i.get("convertEpsToSvg")),s.options.convertPdfToSvg=!(!1===i.get("convertPdfToSvg")),s.options.convertAiToSvg=!(!1===i.get("convertAiToSvg")),s.options.IsPdfWithRasterAllowed=!(!1===i.get("isPdfWithRasterAllowed"))}}catch(o){r.e(o)}finally{r.f()}s.options=t}}),f(this,"uploadFileChunked",function(){var e=c(l().mark(function e(t,n,r,a,o){var u,c;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.resumableUpload(t,n,r,o);case 2:if("OK"!==e.sent){e.next=21;break}return e.next=6,s.createImageTask(r,a);case 6:if(-1===(u=e.sent)){e.next=20;break}return e.next=10,s.getImageFromTask(u);case 10:if(c=e.sent,!a.IsPreview){e.next=16;break}if(!c){e.next=14;break}return e.abrupt("return",c.previewUrls);case 14:e.next=18;break;case 16:if(!c||!c.images){e.next=18;break}return e.abrupt("return",c.images);case 18:e.next=21;break;case 20:throw new i.UploadFailedExpection;case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}},e)}));return function(t,n,r,i,s){return e.apply(this,arguments)}}()),f(this,"resumableUpload",function(){var e=c(l().mark(function e(t,n,r,i){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){var o={Authorization:"Bearer "+s.token,"Accept-Language":s.culture},l=new Resumable({target:Zakeke.config.baseImagesUploadApiUrl+"filechunks/upload",generateUniqueIdentifier:function(){return r},maxFiles:1,testChunks:!1,headers:o,query:{resumableType:n},simultaneousUploads:3});l.addFile(t),l.on("fileError",function(t,n){e("KO"),console.error("fileError",t,n)}),l.on("error",function(t,n){e("KO"),console.error("error",t,n)}),l.on("progress",function(){var e=100*l.progress();i&&i(e)}),l.on("fileAdded",function(e,t){l.upload()}),l.on("complete",function(){e("OK")})}));case 1:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()),f(this,"createImageTask",function(){var e=c(l().mark(function e(t,n){var i,s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={fileID:t,options:n},e.next=3,r.axiosApi.post(Zakeke.config.baseImagesUploadApiUrl+"imagetasks",i);case 3:return s=e.sent,e.abrupt("return",s?s.data.taskID:-1);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),f(this,"getImageFromTask",function(){var e=c(l().mark(function e(t){var n,s,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=1,e.next=4,r.axiosApi.get(Zakeke.config.baseImagesUploadApiUrl+"imagetasks/results/"+t);case 4:if(!(s=e.sent)||2!==s.data.state){e.next=9;break}return e.abrupt("return",s.data);case 9:if(!s||3!==s.data.state){e.next=11;break}return e.abrupt("return",null);case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(1),406!=(null===(a=e.t0.response)||void 0===a?void 0:a.status)){e.next=19;break}throw new i.NonSquarePixelException;case 19:return e.abrupt("return",null);case 20:if(!(++n>100)){e.next=23;break}return e.abrupt("return",null);case 23:return e.next=25,new Promise(function(e){return setTimeout(e,1e3)});case 25:e.next=1;break;case 27:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}()),this.culture=t,this.token=n,this.options=o})},"./src/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Attribute:()=>c.Attribute,AttributeOptionShapeType:()=>c.AttributeOptionShapeType,AttributeType:()=>c.AttributeType,Camera:()=>c.Camera,Composition:()=>c.Composition,CompositionItem:()=>c.CompositionItem,DAMViewerAnalyticsEventType:()=>c.DAMViewerAnalyticsEventType,DefaultBanubaFineTuningSettings:()=>c.DefaultBanubaFineTuningSettings,DefaultMazingFineTuningSettings:()=>c.DefaultMazingFineTuningSettings,EventMessage:()=>c.EventMessage,EventMessageType:()=>c.EventMessageType,ExtensionFieldDataType:()=>c.ExtensionFieldDataType,Group:()=>c.Group,ImageItem:()=>c.ImageItem,ItemType:()=>c.ItemType,Option:()=>c.Option,Platform:()=>c.Platform,PlatformPriceType:()=>c.PlatformPriceType,PlatformSettings:()=>c.PlatformSettings,Product:()=>c.Product,ProductArea:()=>c.ProductArea,ProductQuantityRule:()=>c.ProductQuantityRule,PupillaryDistanceBaseProviderReceivedMessage:()=>s.PupillaryDistanceBaseProviderReceivedMessage,PupillaryDistanceBaseProviderResponseMessage:()=>s.PupillaryDistanceBaseProviderResponseMessage,PupillaryDistanceView:()=>a.PupillaryDistanceView,Quote:()=>c.Quote,QuoteRule:()=>c.QuoteRule,SellerSettings:()=>c.SellerSettings,SellerTryOnState:()=>c.SellerTryOnState,Step:()=>c.Step,Template:()=>c.Template,TemplateArea:()=>c.TemplateArea,TemplateComposition:()=>c.TemplateComposition,TemplateConstraints:()=>c.TemplateConstraints,TextItem:()=>c.TextItem,ThemeCategory:()=>c.ThemeCategory,ThemeMacroCategory:()=>c.ThemeMacroCategory,ThemeTemplateGroup:()=>c.ThemeTemplateGroup,TryOnBaseProviderReceivedMessage:()=>s.TryOnBaseProviderReceivedMessage,TryOnBaseProviderResponseMessage:()=>s.TryOnBaseProviderResponseMessage,TryOnContext:()=>u.TryOnContext,TryOnFineTuningMazingEnvironment:()=>c.TryOnFineTuningMazingEnvironment,TryOnMode:()=>s.TryOnMode,TryOnProvider:()=>c.TryOnProvider,TryOnSettingsType:()=>c.TryOnSettingsType,TryOnType:()=>c.TryOnType,TryOnView:()=>a.TryOnView,User:()=>c.User,Variant:()=>c.Variant,ZakekeDesigner:()=>r.ZakekeDesigner,ZakekeEnvironment:()=>o.ZakekeEnvironment,ZakekeEvent:()=>c.ZakekeEvent,ZakekeProvider:()=>h.ZakekeProvider,ZakekeTryOnViewer:()=>a.ZakekeTryOnViewer,ZakekeViewer:()=>i.ZakekeViewer,context:()=>h.context,parseJSON:()=>s.parseJSON,useInternalState:()=>h.useInternalState,useZakeke:()=>l.useZakeke,useZakekeTryOn:()=>u.useZakekeTryOn});var r=n("./src/components/customizer.tsx"),i=n("./src/components/sceneViewer.tsx"),s=n("./src/components/tryon/tryOnModels.ts"),a=n("./src/components/tryon/tryOnViewer.tsx"),o=n("./src/environment.tsx"),l=n("./src/hooks/useZakeke.ts"),u=n("./src/hooks/tryonContext.ts"),c=n("./src/models.ts"),h=n("./src/state/provider.tsx")},"./src/integrations/Integration.ts":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{PlatformAttributeSelection:()=>o});var o=s(function e(t,n,r,i,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeCode=t,this.optionCode=n,this.attributeLabel=r,this.optionLabel=i,this.attributeIsEnabled=s,this.optionIsEnabled=a})},"./src/integrations/generic.ts":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>l});var o=function(e){return e.AddToCart="AddToCart",e.Price="Price",e.Close="Close",e.SharedComposition="SharedComposition",e}(o||{}),l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"callbacks",new Map),s(this,"messageIds",0),s(this,"pricingCalculator",null),window.addEventListener("message",function(e){var n=e.data.zakekeMessageType;if(n===o.Price||n===o.SharedComposition){var r=e.data.messageId;if(!t.callbacks.has(r))return;var i=t.callbacks.get(r);t.callbacks.delete(r),i(e.data.message)}})}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"addToCart",value:function(e,t,n,r,i,s,a,l){var u=this.pricingCalculator&&t?this.pricingCalculator.calculate(t,s):0;0!==u&&s>1&&(u/=s),u+=l,window.parent.postMessage({zakekeMessageType:o.AddToCart,message:{composition:e.id,design:null===t||void 0===t?void 0:t.id,preview:e.get("previewImageUrl"),designPrice:u,attributes:r,designItems:i,quantity:s,additionalProperties:a}},"*")}},{key:"getPrice",value:function(e,t,n,r,i,s,a,l){var u=this;return new Promise(function(e,n){var c=u.messageIds++;u.callbacks.set(c,e),console.log("Calculating price...");var h=u.pricingCalculator&&t?u.pricingCalculator.calculate(t,l):0,d=u.pricingCalculator&&t?u.pricingCalculator.getMatchedConditions(t,l,!0):[];a||(h=0,d=[]),s||(i=0),console.log("Calculated Zakeke price:"),console.log("- Composition price: "+i),0!==i&&l>1&&(i/=l),0!==h&&l>1&&(h/=l),console.log("- Design price: "+h),window.parent.postMessage({zakekeMessageType:o.Price,messageId:c,message:{attributes:r,compositionPrice:i+h,designPrice:h,conditions:d,quantity:l}},"*")})}},{key:"getSharedCompositionUrl",value:function(e){var t=this;return new Promise(function(n,r){var i=t.messageIds++;t.callbacks.set(i,n),window.parent.postMessage({zakekeMessageType:o.SharedComposition,messageId:i,message:{compositionDocID:e}},"*")})}},{key:"close",value:function(){window.parent.postMessage({zakekeMessageType:o.Close},"*")}},{key:"setPricingCalculator",value:function(e){this.pricingCalculator=e}}]),e}()},"./src/integrations/helpers.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{integrationFor:()=>s});var r=n("./src/integrations/preview.ts"),i=n("./src/integrations/generic.ts");function s(e){return new Promise(function(t,n){t("preview"===e?new r.default:new i.default)})}},"./src/integrations/preview.ts":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>o});var a=function(e){return e.Close="Close",e}(a||{}),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"addToCart",value:function(e,t,n,r,i,s,a){}},{key:"getPrice",value:function(e,t,n,r,i,s,a,o){return new Promise(function(e,t){e({price:s?i:0,isOutOfStock:!1})})}},{key:"getSharedCompositionUrl",value:function(e){return new Promise(function(e,t){})}},{key:"setPricingCalculator",value:function(e){}},{key:"close",value:function(){window.parent.postMessage({zakekeMessageType:a.Close},"*")}}]),e}()},"./src/models.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Attribute:()=>H,AttributeOptionShapeType:()=>U,AttributeType:()=>V,Camera:()=>F,Composition:()=>J,CompositionItem:()=>X,DAMViewerAnalyticsEventType:()=>Q,DefaultBanubaFineTuningSettings:()=>x,DefaultMazingFineTuningSettings:()=>b,EventMessage:()=>N,EventMessageType:()=>R,ExtensionFieldDataType:()=>$,Group:()=>z,ImageItem:()=>P,ItemType:()=>O,Option:()=>G,Platform:()=>d,PlatformPriceType:()=>f,PlatformSettings:()=>B,Product:()=>w,ProductArea:()=>D,ProductQuantityRule:()=>E,Quote:()=>C,QuoteRule:()=>S,SellerSettings:()=>K,SellerTryOnState:()=>m,Step:()=>j,Template:()=>I,TemplateArea:()=>T,TemplateComposition:()=>Y,TemplateConstraints:()=>M,TextItem:()=>L,ThemeCategory:()=>W,ThemeMacroCategory:()=>q,ThemeTemplateGroup:()=>Z,TryOnFineTuningMazingEnvironment:()=>y,TryOnProvider:()=>v,TryOnSettingsType:()=>_,TryOnType:()=>g,User:()=>p,Variant:()=>A,ZakekeEvent:()=>k});var r=n("./node_modules/lodash/lodash.js"),i=n.n(r),s=n("./src/exceptions.tsx");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(e){return e[e.Magento1=5]="Magento1",e[e.Magento2=1]="Magento2",e[e.Shopify=3]="Shopify",e[e.WooCommerce=2]="WooCommerce",e}({}),f=function(e){return e[e.Standard=0]="Standard",e[e.Inline=1]="Inline",e}({}),p=u(function e(t,n,r){h(this,e),this.id=t,this.username=n,this.name=r}),g=function(e){return e[e.NotSelected=0]="NotSelected",e[e.Eyewear=1]="Eyewear",e[e.Scarves=2]="Scarves",e[e.Earrings=3]="Earrings",e[e.Headwear=4]="Headwear",e[e.Necklace=5]="Necklace",e[e.Shoes=6]="Shoes",e[e.Watches=7]="Watches",e[e.Bracelet=8]="Bracelet",e}({}),m=function(e){return e[e.NotActive=0]="NotActive",e[e.Active=1]="Active",e}({}),v=function(e){return e[e.NotSelected=0]="NotSelected",e[e.Mazing=1]="Mazing",e[e.Banuba=2]="Banuba",e}({}),_=function(e){return e.VirtualTryOn="try_on",e.GlassPupillaryDistanceTool="pd",e.StyleButton="styleButton",e}({}),y=function(e){return e.Neutral="neutral.hdr",e.Light="light.hdr",e.Bright="bright.hdr",e.Studio="studio.hdr",e.Court="court.hdr",e.Blurred_Studio="startup.hdr",e}({}),b={temple:!1,environment:y.Neutral,position:{x:0,y:0,z:0},scale:0},x={rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},scale:1},w=function(){function e(){h(this,e),o(this,"areas",[]),o(this,"quantityRule",null),o(this,"quoteRule",null),o(this,"environment",null),o(this,"isShowSecondScreenEnabled",!1),o(this,"isAiConfigurationEnabled",!1),o(this,"isOldViewer",!1)}return u(e,null,[{key:"fromProduct",value:function(t){var n=new e;return n.id=t.id,n.sku=t.get("code"),n.name=t.get("name"),n.previewUrl=t.get("largeImageUrl"),n.quantityRule=t.get("quantityRule")?E.fromQuantityRule(t.get("quantityRule")):null,n.areas=t.get("colors").length>0?t.get("colors").at(0).get("sides").map(function(e){return D.fromSide(e)}):[],n.quoteRule=t.get("quoteRule")?new S(t.get("quoteRule")):null,n.environment=t.get("environment"),n.isShowSecondScreenEnabled=t.get("isShowSecondScreenEnabled"),n.isAiConfigurationEnabled=t.get("isAiConfigurationEnabled"),n.isOldViewer=t.get("isOldViewer"),n}}]),e}(),S=u(function e(t){h(this,e),this.quoteRuleID=t.quoteRuleID,this.name=t.name,this.sellerID=t.sellerID,this.formControlsData=t.formControlsData,this.isValidForAllProducts=t.isValidForAllProducts,this.allowAddToCart=t.allowAddToCart,this.products=t.products}),C=u(function e(){h(this,e),o(this,"statusID",1),o(this,"quantity",1),o(this,"modelPrice",0)}),D=function(){function e(){h(this,e)}return u(e,null,[{key:"fromSide",value:function(t){var n=new e;return n.id=t.id,n.name=t.get("name"),n.cameraLocationID=t.get("cameraLocationID"),n}}]),e}(),E=function(){function e(){h(this,e),o(this,"minQuantity",null),o(this,"maxQuantity",null),o(this,"step",null)}return u(e,null,[{key:"fromQuantityRule",value:function(t){if(!t)throw"Invalid quantity rule";var n=new e;return n.minQuantity=t.get("minQuantity"),n.maxQuantity=t.get("maxQuantity"),n.step=t.get("step"),n}}]),e}(),A=u(function e(t,n,r,i,s){h(this,e),this.id=t,this.sku=n,this.name=r,this.price=i,this.metadata=s}),k=u(function e(t,n){h(this,e),this.event=t,this.callback=n}),M=u(function e(){h(this,e),o(this,"isUserImageAllowed",!0)}),T=function(){function e(){h(this,e),o(this,"id",-1),o(this,"uploadRestrictions",new M),o(this,"disableSellerImages",!1),o(this,"canAddImage",!0),o(this,"canAddText",!0)}return u(e,null,[{key:"fromTemplateArea",value:function(t){var n=new e;return n.id=t.get("sideID"),n.disableSellerImages=t.get("disableSellerImages"),n.canAddImage=t.get("canAddImage"),n.canAddText=t.get("canAddText"),t.get("uploadRestrictions")&&(n.uploadRestrictions=i().mergeWith(new M,t.get("uploadRestrictions"),function(e,t){return void 0!=t?t:e})),n}}]),e}(),I=function(){function e(){h(this,e),o(this,"id",-1),o(this,"name",""),o(this,"areas",[])}return u(e,null,[{key:"fromTemplate",value:function(t){var n=new e;return n.id=t.get("templateDesignID"),n.name=t.get("name"),n.areas=t.get("sides").map(function(e){return T.fromTemplateArea(e)}),n}}]),e}(),O=function(e){return e[e.Text=0]="Text",e[e.Image=1]="Image",e}({}),L=u(function e(t){var n;h(this,e),o(this,"constraints",null),this.type=O.Text,this.areaId=t.sideID,this.guid=t.itemGuid,this.name=t.designItem.get("name"),this.text=t.text,this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth,this.fillColor=t.fillColor,this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontWeight=t.fontWeight,this.fontStyle=t.fontStyle,this.fontStretch=t.fontStretch,this.justification=t.justification,this.isTextOnPath=t.isTextOnPath,this.isTemplateElement=null!==(n=t.item.data.isTemplateElement)&&void 0!==n&&n,this.constraints=t.constraints}),P=u(function e(t){h(this,e),o(this,"constraints",null),this.type=O.Image,this.imageID=t.imageID,this.areaId=t.sideID,this.guid=t.itemGuid,this.name=t.designItem.get("name"),this.url=t.url,this.deleted=!t.visible,this.constraints=t.constraints}),B=function(){function e(t,n,r,i,s,a,o,l,u,c){h(this,e),this.ecommerceId=t,this.currencyId=n,this.apiKey=r,this.apiSecret=i,this.accessKey=s,this.accessSecret=a,this.remoteUrl=o,this.username=l,this.password=u,this.adminPath=c}return u(e,[{key:"platform",get:function(){return this.ecommerceId}}],[{key:"fromData",value:function(t){if(!t)throw new s.Exception("Cannot create platform settings from null");return new e(t.ecommerceId,t.currencyId,t.apiKey,t.accessSecret,t.accessKey,t.accessSecret,t.remoteUrl,t.username,t.password,t.adminPath)}}]),e}();o(B,"Empty",new B(-1,-1,"","","","","","","",""));var N=function(){function e(){h(this,e),o(this,"eventID",-1),o(this,"description",""),o(this,"closeable",!1),o(this,"visible",!1),o(this,"addToCartDisabledIfVisible",!1),o(this,"enableCheckForSellerImages",!1),o(this,"isDefault",!1)}return u(e,null,[{key:"fromMessage",value:function(t){var n=new e;return n.eventID=t.eventID,n.description=t.description,n.closeable=t.closeable,n.visible=t.visible,n.addToCartDisabledIfVisible=t.addToCartDisabledIfVisible,n.additionalData=""!==t.additionalData&&null!==t.additionalData?JSON.parse(t.additionalData):"",n.enableCheckForSellerImages=t.enableCheckForSellerImages,n.isDefault=t.isDefault,n}}]),e}(),R=function(e){return e[e.Undefined=-1]="Undefined",e[e.ImageQualityWarning=1]="ImageQualityWarning",e[e.Welcome=3]="Welcome",e[e.AddToCart=4]="AddToCart",e[e.Copyright=8]="Copyright",e}({}),F=function(){function e(){h(this,e),o(this,"id",""),o(this,"name","")}return u(e,null,[{key:"fromZkCamera",value:function(t){var n=new e;return n.id=t.get("locationID"),n.name=t.get("name"),n}}]),e}(),z=u(function e(){h(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"name","Group"),o(this,"enabled",!1),o(this,"imageUrl",null),o(this,"icon",null),o(this,"attributes",[]),o(this,"steps",[]),o(this,"templateGroups",[]),o(this,"cameraLocationId",null),o(this,"displayOrder",1),o(this,"direction",0),o(this,"attributesAlwaysOpened",!1)}),j=u(function e(){h(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"name","Step"),o(this,"cameraLocationID",null),o(this,"displayOrder",1),o(this,"attributes",[]),o(this,"templateGroups",[])}),V=function(e){return e[e.Select=0]="Select",e[e.Input=1]="Input",e[e.Colorpicker=2]="Colorpicker",e}({}),U=function(e){return e[e.Round=1]="Round",e[e.Square=2]="Square",e}({}),H=u(function e(){h(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"code",""),o(this,"name","Attribute"),o(this,"description",""),o(this,"enabled",!1),o(this,"imageUrl",null),o(this,"groupId",-1),o(this,"stepId",-1),o(this,"options",[]),o(this,"value",null),o(this,"numberFormat",""),o(this,"type",V.Select),o(this,"optionShapeType",U.Round),o(this,"displayOrder",1),o(this,"hideOptionsLabel",!1),o(this,"cameraLocationId",null)}),G=u(function e(){h(this,e),o(this,"id",-1),o(this,"guid",""),o(this,"code",""),o(this,"name","Option"),o(this,"description",""),o(this,"enabled",!1),o(this,"selected",!1),o(this,"imageUrl",null),o(this,"displayOrder",1),o(this,"pricings",[])}),Y=u(function e(){h(this,e),o(this,"compositionID",-1),o(this,"name",""),o(this,"previewImageUrl","")}),W=u(function e(){h(this,e),o(this,"id",-1),o(this,"name",""),o(this,"composition",[])}),q=u(function e(){h(this,e),o(this,"id",-1),o(this,"name",""),o(this,"category",[])}),Z=u(function e(){h(this,e),o(this,"templateGroupID",-1),o(this,"name",""),o(this,"groupID",-1),o(this,"stepID",-1),o(this,"displayOrder",-1),o(this,"macroCategory",[])}),K=function(){function e(){h(this,e),o(this,"customizeButtonLabel",""),o(this,"customizeButtonIconUrl",""),o(this,"isCompositionRecapEnabled",!1),o(this,"isCompositionRecapVisibleFromStart",!1),o(this,"canUserCloseCompositionRecap",!0),o(this,"minimumFractionDigits",1),o(this,"priceInfoText",""),o(this,"hidePrice",!1),o(this,"hotjarSiteID",null),o(this,"googleTagManagerID",null),o(this,"canSaveDraftComposition",!1),o(this,"canUndoRedo",!1),o(this,"shareType",null)}return u(e,null,[{key:"fromSellerSettings",value:function(t){var n=new e;return n.customizeButtonLabel=t.customizeButtonLabel,n.customizeButtonIconUrl=t.customizeButtonIconUrl,n.isCompositionRecapEnabled=t.isCompositionRecapEnabled,n.isCompositionRecapVisibleFromStart=t.isCompositionRecapVisibleFromStart,n.canUserCloseCompositionRecap=t.canUserCloseCompositionRecap,n.minimumFractionDigits=t.minimumFractionDigits,n.priceInfoText=t.priceInfoText,n.hidePrice=t.hidePrice,n.hotjarSiteID=t.hotjarSiteID,n.googleTagManagerID=t.googleTagManagerID,n.canSaveDraftComposition=t.canSaveDraftComposition,n.canUndoRedo=t.canUndoRedo,n.shareType=t.shareType,n}}]),e}(),X=u(function e(){h(this,e),o(this,"attributeID",-1),o(this,"attributeName",""),o(this,"attributeCode",""),o(this,"selectedOptionName",""),o(this,"selectedOptionCode","")}),J=function(){function e(){h(this,e),o(this,"name",""),o(this,"docID",""),o(this,"compositionID",-1),o(this,"compositionItems",[]),o(this,"previewImageUrl",""),o(this,"designID",null),o(this,"pdSettings",null),o(this,"tags",[])}return u(e,null,[{key:"fromJSON",value:function(t){var n=new e;return i().assign(n,t),n}}]),e}(),$=function(e){return e[e.Money=1]="Money",e[e.Integer=2]="Integer",e[e.Decimal=3]="Decimal",e}({}),Q=function(e){return e.ViewProduct="VIEW_PRODUCT",e.ViewArProdutc="VIEW_AR_PRODUCT",e}({})},"./src/state/boot.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n("./node_modules/qs/lib/index.js"),i=n.n(r),s=n("react"),a=n.n(s),o=n("./src/index.tsx");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,a=Object.create(s.prototype),o=new O(r||[]);return i(a,"_invoke",{value:k(e,n,o)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};h(w,a,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,a)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,s,a,o){var u=f(e[i],e,s);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==l(h)&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(h).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,o)})}o(u.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return s=s?s.then(i,i):i()}})}function k(t,n,r){var i=p;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=f(t,n,r);if("normal"===u.type){if(i=r.done?v:g,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=f(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(l(t)+" is not iterable")}return b.prototype=x,i(D,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,c,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),h(A.prototype,o,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(d(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),h(D,c,"Generator"),h(D,a,function(){return this}),h(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function c(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(e){c(s,r,i,a,o,"next",e)}function o(e){c(s,r,i,a,o,"throw",e)}a(void 0)})}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const p=function(e){var t=e.parameters,n=e.children,r=(0,o.useInternalState)(),l=(0,s.useRef)(r);l.current=r;var c=d(a().useState(!1),2),f=(c[0],c[1],(0,s.useCallback)(function(){var e=h(u().mark(function e(t){var n,r,i,s,a,o;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=l.current)||void 0===n||n.dispatch({type:"IS_SCENE_LOADING",isLoading:!0}),null===(r=l.current)||void 0===r||r.state.environment.on("change",function(){var e;return null===(e=l.current)||void 0===e?void 0:e.dispatch({type:"UPDATE"})}),null===(i=l.current)||void 0===i||i.state.environment.on("debugMode",function(){var e;return null===(e=l.current)||void 0===e?void 0:e.dispatch({type:"DEBUG_MODE"})}),null===(s=l.current)||void 0===s||s.state.environment.on("viewer",function(e){var t;return null===(t=l.current)||void 0===t?void 0:t.dispatch({type:"VIEWER",value:e})}),e.next=6,null===(a=l.current)||void 0===a?void 0:a.state.environment.boot(t);case 6:null===(o=l.current)||void 0===o||o.dispatch({type:"IS_SCENE_LOADING",isLoading:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[])),p=(0,s.useCallback)(function(){var e=h(u().mark(function e(t){var n,r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"load"!=t.data.type||null!==(n=l.current)&&void 0!==n&&n.state.parametersReceived||(null===(r=l.current)||void 0===r||r.dispatch({type:"PARAMETERS_RECEIVED"}),f(t.data.parameters),window.parent.postMessage({zakekeType:"loaded",message:{integrationVersion:2}},"*"));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[]);return(0,s.useEffect)(function(){var e=i().parse(window.location.search);return t?(console.log("Loading parameters from boot parameters prop..."),f(t)):e&&e.ecommerce&&"preview"==e.ecommerce?(console.log("Loading parameters from query string..."),f(null)):(console.log("Loading parameters from post message..."),window.addEventListener("message",p)),function(){return window.removeEventListener("message",p)}},[]),a().createElement(a().Fragment,null,n)}},"./src/state/createProviderValue.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{createProviderValue:()=>l});var r=n("./src/helpers.tsx");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),o=new O(r||[]);return a(s,"_invoke",{value:k(e,n,o)}),s}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};h(w,l,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,l)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(s,a,o,l){var u=f(e[s],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==i(h)&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,o,l)},function(e){n("throw",e,o,l)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return n("throw",e,o,l)})}l(u.arg)}var s;a(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return s=s?s.then(i,i):i()}})}function k(t,n,r){var i=p;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=f(t,n,r);if("normal"===u.type){if(i=r.done?v:g,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=f(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,a=function n(){for(;++s<t.length;)if(r.call(t,s))return n.value=t[s],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return b.prototype=x,a(D,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,c,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),h(A.prototype,u,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(d(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),h(D,c,"Generator"),h(D,l,function(){return this}),h(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function a(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(e){a(s,r,i,o,l,"next",e)}function l(e){a(s,r,i,o,l,"throw",e)}o(void 0)})}}var l=function(e,t){if(!e.environment)throw new Error("Invalid Zakeke environment.");return{price:e.environment.price,isOutOfStock:e.environment.isOutOfStock,currency:e.environment.currency,culture:e.environment.culture,quantity:e.environment.quantity,quantityRule:e.environment.quantityRule,internalProduct:e.environment.internalProduct,internalScene:e.environment.internalScene,internalCurrentTemplate:e.environment.internalCurrentTemplate,draftCompositions:e.environment.themeCompositions,currentAttributesSelection:e.environment.currentAttributesSelection,isSceneLoading:e.isSceneLoading,isAddToCartLoading:e.isAddToCartLoading,isInfoPointContentVisible:e.environment.isInfoPointContentVisible,fonts:e.environment.fonts,disableTextColors:e.environment.disableTextColors,defaultColor:e.environment.defaultColor,textColors:e.environment.textColors,groups:e.environment.groups,templates:e.environment.templates,loadedComposition:e.environment.loadedComposition,currentTemplate:e.environment.currentTemplate,isViewerReady:e.environment.isViewerReady,translations:e.environment.translations,items:e.environment.getDesignItemsInfo(),productName:e.environment.productName,productCode:e.environment.productCode,product:e.environment.product,cameras:e.environment.cameras,sellerSettings:e.environment.sellerSettings,eventMessages:e.environment.eventMessages,personalizedMessages:e.environment.personalizedMessages,visibleEventMessages:e.environment.visibleEventMessages,isAssetsLoading:e.environment.isAssetsLoading,additionalCustomProperties:e.environment.additionalCustomProperties,currentCompositionInfo:e.environment.currentCompositionInfo,nftSettings:e.environment.nftSettings,isAIEnabled:e.environment.isAIEnabled,useLegacyScreenshot:e.environment.useLegacyScreenshot,uiConfig:e.environment.uiConfig,backgroundColor:e.environment.backgroundColor||"#f2f2f2",removeBackground:e.environment.removeBackground,saveComposition:e.environment.saveComposition,loadComposition:e.environment.loadComposition,getPDF:e.environment.getPDF.bind(e.environment),fullyLoadFont:e.environment.fullyLoadFont.bind(e.environment),sanitizeString:e.environment.sanitizeString.bind(e.environment),getSanitationText:e.environment.getSanitationText.bind(e.environment),getOnlineScreenshot:e.environment.getOnlineScreenshot.bind(e.environment),reset:e.environment.reset.bind(e.environment),undo:e.environment.undo.bind(e.environment),redo:e.environment.redo.bind(e.environment),setCamera:e.environment.setCamera.bind(e.environment),setCameraByName:e.environment.setCameraByName.bind(e.environment),setCameraZoomEnabled:e.environment.setCameraZoomEnabled.bind(e.environment),resetCameraPivot:e.environment.resetCameraPivot.bind(e.environment),setCameraPivot:e.environment.setCameraPivot.bind(e.environment),setQuantity:e.environment.setQuantity.bind(e.environment),getImages:e.environment.getImages.bind(e.environment),openSecondScreen:e.environment.openSecondScreen.bind(e.environment),getMacroCategories:e.environment.getMacroCategories.bind(e.environment),createQuote:e.environment.createQuote,previewOnly__setItemImageFromBase64:function(){var e=o(s().mark(function e(n,r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_ITEM_IMAGE_FROM_BASE64",guid:n,base64:r}));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),setItemImageFromFile:function(){var e=o(s().mark(function e(n,r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_ITEM_IMAGE_FROM_FILE",guid:n,file:r}));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),addItemImage:function(){var e=o(s().mark(function e(n,r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"ADD_ITEM_IMAGE",imageId:n,areaId:r}));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),createImage:e.environment.createImage.bind(e.environment),createImageFromUrl:e.environment.createImageFromUrl.bind(e.environment),setItemImage:function(){var e=o(s().mark(function e(n,r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_ITEM_IMAGE",guid:n,imageId:r}));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),setItemFontFamily:function(e,n){return t({type:"SET_ITEM_FONT_FAMILY",guid:e,fontFamily:n})},setItemColor:function(e,n){return t({type:"SET_ITEM_COLOR",guid:e,color:n})},setItemBold:function(e,n){return t({type:"SET_ITEM_BOLD",guid:e,bold:n})},setItemItalic:function(e,n){return t({type:"SET_ITEM_ITALIC",guid:e,italic:n})},setItemTextOnPath:function(e,n,r){return t({type:"SET_ITEM_TEXT_PATH",guid:e,areaId:n,value:r})},setItemText:function(e,n){return t({type:"SET_ITEM_TEXT",guid:e,text:n})},addItemText:function(){var e=o(s().mark(function e(n,r){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"ADD_ITEM_TEXT",settings:n,areaId:r}));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),removeItem:function(){var e=o(s().mark(function e(n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"REMOVE_ITEM",guid:n}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),isFullscreenMode:e.environment.isFullscreenMode,switchFullscreen:function(){return t({type:"SWITCH_FULLSCREEN"})},zoomIn:function(){return t({type:"ZOOM_IN"})},zoomOut:function(){return t({type:"ZOOM_OUT"})},setHighlightSettings:function(e){return t({type:"SET_HIGHLIGHT_SETTINGS",settings:e})},updateView:function(e){return t({type:"UPDATE_VIEW",adjustCamera:e})},hasExplodedMode:e.environment.hasExplodedMode,isExplodedMode:e.environment.isExplodedMode,setExplodedMode:function(e){return t({type:"SET_EXPLODED_MODE",exploded:e})},internalAppendViewer:function(e){return t({type:"APPEND_VIEWER",container:e})},getPrintingMethodsRestrictions:e.environment.getPrintingMethodsRestrictions.bind(e.environment),designUpdate:function(){return t({type:"DESIGN_UPDATE"})},selectOption:function(e){return t({type:"SELECT_OPTION",optionId:e})},isAreaVisible:e.environment.isAreaVisible.bind(e.environment),setTemplate:function(){var e=o(s().mark(function e(n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({type:"SET_TEMPLATE",templateId:n}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),saveTemplate:e.environment.saveTemplate,addToCart:function(){var n=o(s().mark(function n(){var r,i=arguments;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"IS_ADD_TO_CART_LOADING",isLoading:!0}),n.next=3,(r=e.environment).addToCart.apply(r,i);case 3:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),loadSavedComposition:e.environment.loadSavedComposition,saveDraftsComposition:e.environment.saveDraftsComposition,deleteSavedComposition:e.environment.deleteSavedComposition,getMeshIDbyName:e.environment.getMeshIDbyName.bind(e.environment),hideMeshAndSaveState:e.environment.hideMeshAndSaveState.bind(e.environment),restoreMeshVisibility:e.environment.restoreMeshVisibility.bind(e.environment),setMeshDesignVisibility:e.environment.setMeshDesignVisibility.bind(e.environment),exportSceneToGlb:e.environment.exportSceneToGlb,clearListeners:e.environment.clearListeners,addFocusAttributesListener:e.environment.addFocusAttributesListener,focusAttribute:e.environment.focusAttribute,highlightGroup:e.environment.hightlightGroup.bind(e.environment),highlightAttribute:e.environment.highlightAttribute.bind(e.environment),getQrCodeArUrl:e.environment.getQrCodeArUrl,getMobileArUrl:e.environment.getMobileArUrl,openArMobile:e.environment.openArMobile,isSceneArEnabled:e.environment.isSceneArEnabled,isArDeviceCompliant:e.environment.isArDeviceCompliant,IS_ANDROID:r.IS_ANDROID,IS_IOS:r.IS_IOS,setBackgroundColor:e.environment.setBackgroundColor.bind(e.environment),getTryOnUrl:e.environment.getTryOnUrl.bind(e.environment),isSceneTryOnEnabled:e.environment.isSceneTryOnEnabled.bind(e.environment),isVisibleMeshShownForTryOn:e.environment.isVisibleMeshShownForTryOn,hasVTryOnEnabled:e.environment.hasVTryOnEnabled,canUseTryOn:e.environment.canUseTryOn,canUsePD:e.environment.canUsePD,isTryOnMeshVisible:e.environment.isTryOnMeshVisible,isMandatoryPD:e.environment.isMandatoryPD,getTryOnSettings:e.environment.getTryOnSettings.bind(e.environment),setPDDistance:e.environment.setPDDistance.bind(e.environment),pdDistance:e.environment.pdDistance,exportTryOnMeshToGlb:e.environment.exportTryOnMesh.bind(e.environment),setCameraLocked:e.environment.setCameraLocked.bind(e.environment),getTemplateUploadRestrictictions:e.environment.getTemplateUploadRestrictictions.bind(e.environment),getShareCompositionUrl:e.environment.getShareCompositionUrl.bind(e.environment),getCopyrightMessageAccepted:e.environment.getCopyrightMessageAccepted.bind(e.environment),setCopyrightMessageAccepted:e.environment.setCopyrightMessageAccepted.bind(e.environment),validationNFTEmail:e.environment.validationNFTEmail.bind(e.environment),validationNFTWalletAddress:e.environment.validationNFTWalletAddress.bind(e.environment),configureByAI:e.environment.configureByAI.bind(e.environment),templateMacroCategories:e.environment.templateMacroCategories,applyTemplate:e.environment.applyTemplate.bind(e.environment)}}},"./src/state/provider.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ZakekeProvider:()=>f,context:()=>c,useInternalState:()=>d});var r=n("react"),i=n.n(r),s=n("./src/state/boot.tsx"),a=n("./src/state/createProviderValue.ts"),o=n("./src/state/reducer.ts");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=i().createContext(null),h=i().createContext(null),d=function(){var e=(0,r.useContext)(h);if(!e)throw"Corrupted Zakeke state";return e},f=function(e){var t=e.environment,n=e.parameters,u=e.children,d=l((0,r.useReducer)(o.reducer,{environment:t,sceneViewer:null,isAddToCartLoading:!1,isSceneLoading:!1,parametersReceived:!1,isDebug:!1}),2),f=d[0],p=d[1],g=(0,a.createProviderValue)(f,p);return i().createElement(c.Provider,{value:g},i().createElement(h.Provider,{value:{state:f,dispatch:p}},i().createElement(s.default,{parameters:n},u)))}},"./src/state/reducer.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{reducer:()=>s});var r=n("./node_modules/lodash/lodash.js"),i=n.n(r);function s(e,t){var n=i().clone(e);switch(t.type){case"BOOT_COMPLETED":case"UPDATE":break;case"DESIGN_UPDATE":n.environment.renderDesign();break;case"PARAMETERS_RECEIVED":n.parametersReceived=!0;break;case"UPDATE_VIEW":n.environment.updateView();break;case"SWITCH_FULLSCREEN":n.environment.switchFullscreen();break;case"SELECT_OPTION":n.environment.selectOption(t.optionId);break;case"APPEND_VIEWER":n.environment.appendViewer(t.container);break;case"SET_HIGHLIGHT_SETTINGS":n.environment.setHighlightSettings(t.settings);case"IS_SCENE_LOADING":n.isSceneLoading=t.isLoading;break;case"IS_ADD_TO_CART_LOADING":n.isAddToCartLoading=t.isLoading;break;case"SET_TEMPLATE":n.environment.setTemplate(t.templateId);break;case"SET_ITEM_IMAGE_FROM_BASE64":n.environment.setItemImageFromBase64(t.guid,t.base64);break;case"SET_ITEM_IMAGE_FROM_FILE":n.environment.setItemImageFromFile(t.guid,t.file);break;case"ADD_ITEM_IMAGE":n.environment.addItemImage(t.imageId,t.areaId);break;case"SET_ITEM_IMAGE":n.environment.setItemImage(t.guid,t.imageId);break;case"SET_ITEM_FONT_FAMILY":n.environment.setItemFontFamily(t.guid,t.fontFamily);break;case"SET_ITEM_COLOR":n.environment.setItemColor(t.guid,t.color);break;case"SET_ITEM_BOLD":n.environment.setItemBold(t.guid,t.bold);break;case"SET_ITEM_ITALIC":n.environment.setItemItalic(t.guid,t.italic);break;case"SET_ITEM_TEXT_PATH":n.environment.setItemTextOnPath(t.guid,t.areaId,t.value);break;case"SET_ITEM_TEXT":n.environment.setItemText(t.guid,t.text);break;case"ADD_ITEM_TEXT":n.environment.addItemText(t.settings,t.areaId);break;case"REMOVE_ITEM":n.environment.removeItem(t.guid);break;case"ZOOM_IN":n.environment.zoomIn();break;case"ZOOM_OUT":n.environment.zoomOut();break;case"SET_EXPLODED_MODE":n.environment.setExplodedMode(t.exploded);break;case"DEBUG_MODE":console.log("Debug mode ",n.isDebug?"disabled":"enabled"),n.isDebug=!n.isDebug;break;case"VIEWER":console.log(t),n.sceneViewer=t.value;break;default:throw new Error("Invalid reducer action ".concat(t.type,"."))}return n}},"../../libs/pricingRuleBase/DesignPriceCalculatorRuleBased.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DesignPriceCalculatorRuleBased:()=>C,DesignPriceCalculatorRuleFactory:()=>S});var r=n("../../../node_modules/axios/index.js"),i=n.n(r),s=n("../../../node_modules/lodash/lodash.js"),a=n.n(s),o=n("../../utils/rectangle.ts");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(){f=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var s=t&&t.prototype instanceof y?t:y,a=Object.create(s.prototype),o=new O(r||[]);return i(a,"_invoke",{value:k(e,n,o)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",_={};function y(){}function b(){}function x(){}var w={};c(w,a,function(){return this});var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,a)&&(w=C);var D=x.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function n(i,s,a,o){var u=d(e[i],e,s);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==l(h)&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(h).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,o)})}o(u.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return s=s?s.then(i,i):i()}})}function k(t,n,r){var i=p;return function(s,a){if(i===m)throw Error("Generator is already running");if(i===v){if("throw"===s)throw a;return{value:e,done:!0}}for(r.method=s,r.arg=a;;){var o=r.delegate;if(o){var l=M(o,r);if(l){if(l===_)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?v:g,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=v,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var s=d(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(l(t)+" is not iterable")}return b.prototype=x,i(D,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=c(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c(e,u,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},E(A.prototype),c(A.prototype,o,function(){return this}),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var a=new A(h(e,n,r,i),s);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(D),c(D,u,"Generator"),c(D,a,function(){return this}),c(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function p(e,t,n,r,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(e){p(s,r,i,a,o,"next",e)}function o(e){p(s,r,i,a,o,"throw",e)}a(void 0)})}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var x=function(e){return e[e.Tutti=1]="Tutti",e[e.AllElementsNoTemplateItems=18]="AllElementsNoTemplateItems",e[e.AllTexts=8]="AllTexts",e[e.AllCustomText=9]="AllCustomText",e[e.SingleElement=10]="SingleElement",e[e.AllImages=11]="AllImages",e[e.UploadedImages=12]="UploadedImages",e[e.AllTextArt=13]="AllTextArt",e[e.AllCustomTextArt=14]="AllCustomTextArt",e[e.AllCustomElements=15]="AllCustomElements",e[e.ClipartImages=16]="ClipartImages",e[e.TemplatesImages=17]="TemplatesImages",e[e.OnlyVectorImages=19]="OnlyVectorImages",e[e.OnlyRasterImages=20]="OnlyRasterImages",e}(x||{}),w=function(e){var t,n=null===(t=[{operator:">",func:function(e,t){return e>t}},{operator:"<",func:function(e,t){return e<t}},{operator:"=",func:function(e,t){return e==t}},{operator:">=",func:function(e,t){return e>=t}},{operator:"<=",func:function(e,t){return e<=t}},{operator:"!=",func:function(e,t){return e!=t}}].find(function(t){return t.operator==e}))||void 0===t?void 0:t.func;if(null==n)throw new Error("Function  for operator ".concat(e," not found"));return n},S=v(function e(){_(this,e)});y(S,"create",function(){var e=g(f().mark(function e(t,n,r,i,s,a){var o;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new C(n,r,i,s,a),e.next=3,o.init(t).catch(function(e){return console.log(e)});case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}},e)}));return function(t,n,r,i,s,a){return e.apply(this,arguments)}}());var C=v(function e(t,n,r,l,d){var p=this;_(this,e),y(this,"colorID",-1),y(this,"config",{isOwin:!0,apiUrl:"https://test-api.zakeke.com/api/graphql",cloudFlareApiUrl:null,token:"Gw6IL2Q7e66r3osC16_T6XSlsrnuUAHmw59Y3-qJv2LaPPV-nuzDkC0eOGAU8ef_i94HLlu8vDVXpk9MAWBtwrXWN7_XizPAeIfKXArfol19Ek7wmZMR3zRQWwHChqPmYDJMrI3WeCIQGRJxsR7q8hh5xywTqdOwVi6LT7_8-qP9jkc_tdBUPiMUrT6HI1i1ygnEGEk6Eoa97zvbVGRE3NRt-W5nXKGv4_INB_VBdpOihHVXIzl7PtchqPyBr7AaW5Hdrbh_KoFwEhLTcTixXpxfzOcjecbyqFHw20fNFlg2ny6Cb375i7hpnFWD7Q4lj9xI3R6jbkpFHsQEFfBK-UF1f9vli0liCWQ3WdAYGQEmUYx7QjCy240GuR_cK6c28JHoabSGQdW91K7KEAug4o19nokKfzbWoZM7WD4T4RVXNB_ob_gjeYKsK7EJIt6qGiPpnJEbSeFCjz1EhE31Jw6MO-oawNSASxgYk1D6Z3XkLw1G",clientLang:null}),y(this,"init",function(e){return p.product=e,new Promise(function(t,n){try{p.getPricings(e,function(e,n){p.pricings=e,p.properties=n,t()})}catch(r){n(r)}})}),y(this,"getPricings",function(){var e=g(f().mark(function e(t,n){var r,s,a,o,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.pricings){e.next=4;break}n(p.pricings,p.properties),e.next=30;break;case 4:if(r={name:"pricingsConfigurationQuery",query:"query pricingsQuery($first: Int!, $productID: Long!, $languageCulture: String) {\n                                    pricingProperties { propertyID functionName }\n                                    pricingsDetailed(first: $first, productID: $productID, isForFrontEnd: true, languageCulture: $languageCulture) {\n                                        edges {\n                                            node {\n                                                id\n                                                description\n                                                infoPricingText\n                                                priceDescriptionEnabled\n                                                priceStructure\n                                                products {\n                                                    productID\n                                                }\n                                                printTypes {\n                                                    printTypeID\n                                                }\n                                                rules {\n                                                    ruleID\n                                                    propertyID\n                                                    allMatchType\n                                                    elementID\n                                                    elementTitle\n                                                    isSetupPrice\n                                                    priceType\n                                                    targets {\n                                                        area\n                                                        color\n                                                        side\n                                                        targetID\n                                                    }\n                                                    conditions {\n                                                        conditionID\n                                                        formula\n                                                        position\n                                                        priceToAdd\n                                                        quantity\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }",variables:{first:50,productID:t.get("modelID"),languageCulture:p.config.clientLang}},s={headers:{"Content-Type":"application/json",Accept:"application/json"}},p.config.isOwin?s.headers.Authorization="Bearer "+p.config.token:s.headers["X-Auth-Token"]=p.config.token,a={type:"POST",url:p.config.apiUrl,data:JSON.stringify(r),contentType:"application/json",dataType:"json"},p.config.isOwin?a.Authorization="Bearer "+p.config.token:a["X-Auth-Token"]=p.config.token,e.prev=9,"undefined"===typeof p.config.cloudFlareApiUrl||null===p.config.cloudFlareApiUrl||""===p.config.cloudFlareApiUrl){e.next=16;break}return e.next=13,i().post(p.config.cloudFlareApiUrl,r,s);case 13:return o=e.sent,n(o.data.data.pricingsDetailed.edges.map(function(e){return e.node}),o.data.data.pricingProperties),e.abrupt("return");case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(9);case 20:return e.prev=20,e.next=23,i().post(p.config.apiUrl,r,s);case 23:l=e.sent,n(l.data.data.pricingsDetailed.edges.map(function(e){return e.node}),l.data.data.pricingProperties),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(20),console.log(e.t1);case 30:case"end":return e.stop()}},e,null,[[9,18],[20,27]])}));return function(t,n){return e.apply(this,arguments)}}()),y(this,"getPricing",function(e){if(p.pricings){var t,n=p.pricings.find(function(e){return e.products.find(function(e){return e.productID==p.product.get("modelID")})});if(n&&-1!==p.colorID&&(t=[[n,p.product.get("colors").find(function(e){return e.get("colorID")===p.colorID}).get("sides").map(function(e){return e.get("sideID")})]]),!n&&-1!==p.colorID){var r=p.product.get("colors").find(function(e){return e.get("colorID")===p.colorID}).get("sides").map(function(e){return e.get("sideID")}).map(function(t){var n=e.get("sidesPrintTypes").find(function(e){return e.get("sideID")===t});return[t,n?n.get("printTypeID"):e.get("printTypeID")]}),i=new Map,s=[r.map(function(e){var t;return[e[0],(null===(t=p.pricings)||void 0===t?void 0:t.find(function(t){return t.printTypes.find(function(t){return t.printTypeID===e[1]})}))||null]})];s[0].forEach(function(e){var t=c(e,2),n=t[0],r=t[1];if(i.get(r)){var s=i.get(r);s.push(n),i.set(r,s)}else i.set(r,[n])}),t=Array.from(i)}return t}}),y(this,"distinct",function(e,t,n){return n.indexOf(e)===t}),y(this,"ElementSizeFunction",function(e,t){var n={result:!1,multiplier:0,items:e.items};if(!t.values||0==t.values.length)throw"values missing in formula";if(null==t.values||0==t.values.length)throw"ElementSize invalid value";return e.items.forEach(function(r){var i=JSON.parse(r.get("json"))[1],s=i.data.transformsData.dimensions.width,a=i.data.transformsData.dimensions.height,o=r.get("areas").at(0).get("sideID"),l=e.sides.find(function(e){return e.get("sideID")==o});if(null!=s&&null!=a&&null!=l&&l.get("ppcm")>0){var u=s/l.get("ppcm"),c=a/l.get("ppcm")*u;w(t.operator)(c,t.values[0])&&(n.result=!0,n.multiplier+=1,n.items=n.items.filter(function(e){return e!=r}))}}),n}),y(this,"NumberOfElementsSimplifiedFunction",function(e,t){return{result:e.items.length>0,multiplier:e.items.length,items:e.items}}),y(this,"LinesLengthFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";return e.items.forEach(function(e){var r=JSON.parse(e.get("json"))[1],i=r.data.isText,a=r.data.isTextArea,o=r.data.isTextOnPath,l=r.data.isTextArt,u="";if(null!=i&&i?u=r.content.toString():(null!=a&&a||null!=o&&o)&&(u=r.data.text.toString()),null!=l&&l&&(u=e.get("textArt").get("text")),!(0,s.isEmpty)(u)){var c=u.split("\n").length;w(t.operator)(c,t.values[0])&&(n.result=!0,n.multiplier+=1)}}),n}),y(this,"AmountOfElementsFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";return w(t.operator)(e.items.length,t.values[0])&&(n.result=!0,n.multiplier=1),n}),y(this,"AmountOfUsedColorsFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";var r=(0,s.uniq)(e.items.filter(function(e){return e.get("itemColors")&&!(0,s.isEmpty)(e.get("itemColors"))}).flatMap(function(e){return e.get("itemColors")}));return w(t.operator)(r.filter(p.distinct).length,t.values[0])&&(n.result=!0,n.multiplier=1),n}),y(this,"CanvasSizeFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";if(e.sides&&!(0,s.isEmpty)(e.sides)){var r=e.sides.flatMap(function(e){return e.get("areas").models}),i=[];r.forEach(function(t){e.items.filter(function(e){return e.get("areas").filter(function(e){return e.get("colorID")==t.getColorID()&&e.get("sideID")==t.getSideID()&&e.get("areaID")==t.get("areaID")}).length>0}).length>0&&(i=[].concat(u(i),[t]))}),i.forEach(function(r){var i,s,a=r.get("boundsWidth"),o=r.get("boundsHeight"),l=null===(i=e.design)||void 0===i||null===(s=i.get("options"))||void 0===s?void 0:s.find(function(e){return e.get("colorID")==r.getColorID()&&(e.get("sideID")===r.getSideID()||null===e.get("sideID"))});l&&l.get("width")&&l.get("height")&&(a=l.get("width"),o=l.get("height"));var u=e.sides.find(function(e){return e.get("sideID")==r.getSideID()});if(null!=u&&u.get("ppcm")>0){var c=a/u.get("ppcm"),h=o/u.get("ppcm");c=Math.round(100*c)/100,h=Math.round(100*h)/100,w(t.operator)(c,t.values[0])&&w(t.operator)(h,t.values[1])&&(n.result=!0,n.multiplier+=1)}})}return n}),y(this,"DesignSizeFunction",function(e,t){var n={result:!1,multiplier:0},r=0;if(!t.values||0==t.values.length)throw"values missing in formula";return e.sides&&!(0,s.isEmpty)(e.sides)&&e.sides.flatMap(function(e){return e.get("areas").models}).forEach(function(t){var n=e.items.filter(function(e){return e.get("areas").filter(function(e){return e.get("colorID")==t.getColorID()&&e.get("sideID")==t.getSideID()&&e.get("areaID")==t.get("areaID")}).length>0}),i=e.sides.find(function(e){return e.get("sideID")==t.getSideID()});if(null!=i&&i.get("ppcm")>0){var s=n.map(function(e){var t=JSON.parse(e.get("json"))[1],n=t.data.transformsData.dimensions.width,r=t.data.transformsData.dimensions.height,i=t.data.transformsData.position.x,s=t.data.transformsData.position.y;return new o.Rectangle(n,r,i-n/2,s-r/2)});r+=(0,o.rectanglesDistinctArea)(s,i.get("ppcm")),console.log("itemsArea",r)}}),r>0&&w(t.operator)(r,t.values[0])&&(n.result=!0,n.multiplier+=1),n}),y(this,"DesignTextLengthFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";var r=0;return e.items.forEach(function(e){var t=JSON.parse(e.get("json"))[1],n=t.data.isText,i=t.data.isTextArea,a=t.data.isTextOnPath,o=t.data.isTextArt,l="";null!=n&&n?l=t.content.toString():null!=i&&i||null!=a&&a?l=t.data.text.toString():null!=o&&o&&(l=e.get("textArt").get("text")),(0,s.isEmpty)(l)||(r+=l.trim().split(" ").join("").replace(/(\r\n|\n|\r)/gm,"").length)}),w(t.operator)(r,t.values[0])&&(n.result=!0,n.multiplier=1),n}),y(this,"CustomizedSidesFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";var r=0;return e.sides.forEach(function(t){e.items.filter(function(e){return e.get("areas").filter(function(e){return e.get("sideID")==t.get("sideID")}).length>0}).length>0&&r++}),e.sides.length>0&&w(t.operator)(r,t.values[0])&&(n.result=!0,n.multiplier=1),n}),y(this,"TextLengthFunction",function(e,t){var n={result:!1,multiplier:0};if(!t.values||0==t.values.length)throw"values missing in formula";return e.items.forEach(function(e){var r=JSON.parse(e.get("json"))[1],i=r.data.isText,a=r.data.isTextArea,o=r.data.isTextOnPath,l=r.data.isTextArt,u="";null!=i&&i?u=r.content.toString():null!=a&&a||null!=o&&o?u=r.data.text.toString():null!=l&&l&&(u=e.get("textArt").get("text")),!(0,s.isEmpty)(u)&&w(t.operator)(u.trim().split(" ").join("").length,t.values[0])&&(n.result=!0,n.multiplier+=1)}),n}),y(this,"conditionsToConditionsGroupByFormula",function(e){var t=a().groupBy(e,function(e){return null!==e&&void 0!==e&&e.formula?null===e||void 0===e?void 0:e.formula:""});return Object.keys(t).map(function(e){var n;return{formula:e,position:null===(n=t[e][0])||void 0===n?void 0:n.position,conditions:t[e]}})}),y(this,"getFunctionName",function(e,t){try{return null===e||void 0===e?void 0:e.filter(function(e){return e.propertyID==t.propertyID}).map(function(e){return e.functionName})[0]}catch(n){throw"function or operator don't exist in dictionaries"}}),y(this,"GetContextForRule",function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o={sides:[],items:[],design:n},l=n.get("designItems").toArray(),c=[],d="",f=i?t.get("colors").find(function(e){return e.get("colorID")==i}):null,g=t.get("colors").find(function(e){return e.get("colorID")==p.colorID});if(null==g||void 0==g)return o;d=f?f.get("name"):g.get("name");var m=g.get("sides");o.sides=[],0==e.targets.length?(c=l,o.sides=m.toArray()):e.targets.forEach(function(e){var n=!1,r=null,i=l;if((0,s.isEmpty)(e.color)||e.color.toLowerCase()==d.toLowerCase()){var a,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}(m.toArray());try{for(f.s();!(a=f.n()).done;){var p=a.value;-1===o.sides.indexOf(p)&&o.sides.push(p)}}catch(y){f.e(y)}finally{f.f()}}else n=!0;if(!(0,s.isEmpty)(e.side))if(null!=(r=m.find(function(t){return t.get("name").toLowerCase()==e.side.toLowerCase()}))&&r.get("areas")){var g=[];r.get("areas").forEach(function(e){g=g.concat(l.filter(function(n){return function(e,n){return e.get("areas").filter(function(e){return e.get("modelID")==t.get("modelID")&&e.get("colorID")==n.getSide().getColor().get("colorID")&&e.get("sideID")==n.getSide().get("sideID")&&e.get("areaID")==n.get("areaID")}).length>0}(n,e)}))}),i=g}else n=!0;if(!(0,s.isEmpty)(e.area)){var v=[],_=[];m.forEach(function(t){_=_.concat(t.get("areas").filter(function(t){return t.get("name").toLowerCase()==e.area.toLowerCase()}))}),_.forEach(function(e){v=u(i.filter(function(n){return n.get("areas").filter(function(n){return n.get("modelID")==t.get("modelID")&&n.get("colorID")==e.getSide().getColor().get("colorID")&&n.get("sideID")==e.getSide().get("sideID")&&n.get("areaID")==e.get("areaID")}).length>0}))}),i=v}n||(c=[].concat(u(c),u(i)))}),e.elementID==x.AllTexts?c=c.filter(function(e){var t=JSON.parse(e.get("json"))[1];return null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt}):e.elementID==x.AllElementsNoTemplateItems?c=c.filter(function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement}):e.elementID==x.AllCustomText?c=c.filter(function(e){var t=JSON.parse(e.get("json"))[1];return null!=t.data.isTemplateElement&&!t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)||null==t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)}):e.elementID==x.AllImages?c=c.filter(function(e){return e.get("imageID")>0}).filter(function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement}):e.elementID==x.UploadedImages?c=c.filter(function(e){if(e.get("imageID")>0){if(e.get("imageVisitorCode")||e.get("imageCustomerCode"))return!0;if(e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)return!0}return!1}).filter(function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement}):e.elementID==x.ClipartImages?c=c.filter(function(e){return e.get("imageID")>0&&!e.get("imageVisitorCode")&&!e.get("imageCustomerCode")&&!(e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)}).filter(function(e){return!JSON.parse(e.get("json"))[1].data.isTemplateElement}):e.elementID==x.TemplatesImages?c=c.filter(function(e){return e.get("imageID")>0}).filter(function(e){return JSON.parse(e.get("json"))[1].data.isTemplateElement}):e.elementID==x.SingleElement?c=c.filter(function(t){return t.get("name").toLowerCase()==e.elementTitle.toLowerCase()}):e.elementID==x.AllTextArt?c=c.filter(function(e){var t=JSON.parse(e.get("json"))[1];return null!=t.data.isTextArt&&t.data.isTextArt}):e.elementID==x.AllCustomTextArt||(e.elementID==x.AllCustomElements?c=c.filter(function(e){var t=JSON.parse(e.get("json"))[1];return e.get("imageID")>0&&!t.data.isTemplateElement&&(e.get("imageVisitorCode")||e.get("imageCustomerCode")||e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)||null!=t.data.isTemplateElement&&!t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)||null==t.data.isTemplateElement&&(null!=t.data.isText&&t.data.isText||null!=t.data.isTextArea&&t.data.isTextArea||null!=t.data.isTextOnPath&&t.data.isTextOnPath||null!=t.data.isTextArt&&t.data.isTextArt)}):e.elementID==x.UploadedImages?c=c.filter(function(e){if(e.get("imageID")>0){if(e.get("imageVisitorCode")||e.get("imageCustomerCode"))return!0;if(e.get("imageVisitorID")>0||e.get("imageCustomerID")>0)return!0}return!1}):e.elementID===x.OnlyVectorImages?c=c.filter(function(e){return e.get("imageID")>0&&"Vector"===e.get("imageType")}):e.elementID===x.OnlyRasterImages&&(c=c.filter(function(e){return e.get("imageID")>0&&"Raster"===e.get("imageType")||"Vector+Raster"===e.get("imageType")})));var v=a().groupBy(c,function(e){return e.get("itemGuid")});return o.items=Object.keys(v).map(function(e){return v[e][0]}),o.items=o.items.filter(function(e){if(0===e.get("areas").length)return!1;var t=e.get("areas").at(0).get("sideID");return r.includes(t)}),o}),y(this,"isUsingAmountOfColors",function(e){if(p.pricings){var t=p.pricings.find(function(e){return e.products.find(function(e){return e.productID==p.product.get("modelID")})});if(t)return void 0!=t.rules.find(function(e){return 10==e.propertyID});var n=p.pricings.find(function(t){return t.printTypes.find(function(t){return t.printTypeID===e})});if(n)return void 0!=n.rules.find(function(e){return 10==e.propertyID})}return!1}),y(this,"getPremiumPhotosPrice",function(e,t){for(var n=[],r=0,i=function(){var i,a=e.get("designItems").at(s);if(a.get("imageID")>0&&a.get("imagePrice")>0&&null!=a.get("providerImageID")&&(null===(i=a.get("providerImageID"))||void 0===i?void 0:i.length)>0&&!n.find(function(e){return e.get("providerImageID")===a.get("providerImageID")})){n.push(a);var o=a.get("imagePrice");o=p.product.get("hasAdditionalFeeOnImagesProvider")||null===a.get("applyImagePriceForQuantity")||a.get("applyImagePriceForQuantity")?a.get("imagePrice")*t:a.get("imagePrice"),r+=o}},s=0;s<e.get("designItems").length;s++)i();return Logger.info("Premium photo price: ",r),r}),y(this,"getImagePrice",function(e,t){for(var n=0,r=0;r<e.get("designItems").length;r++){var i=e.get("designItems").at(r);i.get("imageID")>0&&i.get("imagePrice")>0&&!i.get("providerImageID")&&(i.get("imagePrice"),n+=i.get("imagePrice")*t)}return Logger.info("Image price: ",n),n}),y(this,"getMatchedConditions",function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=p.getPricing(e);if(!i)return[];var s=[];return i.forEach(function(i){if(i[0]){var a=i[1];i[0].rules.forEach(function(i){if(n||1!=i.priceType){var o=p.GetContextForRule(i,p.product,e,a,r);if(0!==o.sides.length){var l=p.conditionsToConditionsGroupByFormula(i.conditions),u={};try{l.sort(function(e,t){return e&&t&&e.position>t.position?1:-1}).forEach(function(e){var n=JSON.parse(e.formula);if(!n.operator)throw"operator missing in formula";var r=p.getFunctionName(p.properties,i)+"Function",a=p[r](o,n);if(a.result){var l=e.conditions.filter(function(e){return e.quantity<=t}).sort(function(e,t){return t.quantity-e.quantity})[0];if(null!=l){var c=l.priceToAdd,h=i.isSetupPrice,d=a.multiplier,f=i.priceType;s.push({priceToAdd:c,isSetupPrice:h,multiplier:d,priceType:f});var g=!a.items||0==a.items.length;if(!i.allMatchType&&a.items&&(o.items=a.items),!i.allMatchType&&g)throw u}}})}catch(c){if(c!==u)throw c}}}})}}),s}),y(this,"calculate",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=p.getPremiumPhotosPrice(e,t);return i+=p.getImagePrice(e,t),r&&p.getMatchedConditions(e,t,!1,n).forEach(function(e){var n=e.priceToAdd*e.multiplier;e.isSetupPrice||(n*=t),i+=n}),Logger.info("Total custom price: ",i),i}),y(this,"getPricingAdditionalInfo",function(e){var t;if(p.pricings&&((t=p.pricings.find(function(e){return e.products.find(function(e){return e.productID==p.product.get("modelID")})}))||(t=p.pricings.find(function(t){return t.printTypes.find(function(t){return t.printTypeID===e})}))),t)return{description:t.description,priceDescriptionEnabled:t.priceDescriptionEnabled,infoPricingText:t.infoPricingText,priceStructure:t.priceStructure}}),void 0!==t&&(this.config.apiUrl=t+"graphql"),void 0!==n&&(this.config.token=n),void 0!==r&&(this.config.isOwin=r),l&&(this.config.cloudFlareApiUrl=l+"graphql"),d&&(this.config.clientLang=d)})},"../../utils/rectangle.ts":(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{Rectangle:()=>c,rectangleArea:()=>d,rectanglesDistinctArea:()=>f});var c=o(function e(t,n,r,i){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"maxX",function(){return s.x+s.width}),l(this,"maxY",function(){return s.y+s.height}),l(this,"area",function(){return s.width*s.height}),l(this,"areaPPCM",function(e){return s.width/e*(s.height/e)}),l(this,"equals",function(e){return s.width.toFixed(4)==e.width.toFixed(4)&&s.height.toFixed(4)==e.height.toFixed(4)&&s.x==e.x&&s.y==e.y}),this.width=t,this.height=n,this.x=r,this.y=i}),h=function(e,t,n){return n.indexOf(e)===t},d=function(e){return e.width*e.height},f=function(e,t){var n=e.reduce(function(e,t){return[].concat(i(e),[t.x,t.maxX()])},[]).filter(h).sort(function(e,t){return e-t}),r=i(e);n.forEach(function(e){var t=r.filter(function(t){return function(e,t){return e.x<t&&e.maxX()>t}(t,e)}),n=r.filter(function(t){return function(e,t){return e.x>=t||e.maxX()<=t}(t,e)}),s=t.map(function(t){return function(e,t){return t<=e.x||t>=e.x+e.width?[e]:[new c(t-e.x,e.height,e.x,e.y),new c(e.maxX()-t,e.height,t,e.y)]}(t,e)}).reduce(function(e,t){return e.concat(t)},[]);r=[].concat(i(n),i(s))});var s=r.reduce(function(e,t){return[].concat(i(e),[t.y,t.maxY()])},[]).filter(h).sort(function(e,t){return e-t}),a=i(r);return s.forEach(function(e){var t=a.filter(function(t){return function(e,t){return e.y<t&&e.maxY()>t}(t,e)}),n=a.filter(function(t){return function(e,t){return e.y>=t||e.maxY()<=t}(t,e)}),r=t.map(function(t){return function(e,t){return t<=e.y||t>=e.y+e.height?[e]:[new c(e.width,t-e.y,e.x,e.y),new c(e.width,e.maxY()-t,e.x,t)]}(t,e)}).reduce(function(e,t){return e.concat(t)},[]);a=[].concat(i(n),i(r))}),a.filter(function(e,t,n){return n.findIndex(function(t){return t.equals(e)})==t}).reduce(function(e,n){return t?e+n.areaPPCM(t):e+n.area()},0)}},"../../../node_modules/is-buffer/index.js":e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},"../../../node_modules/lodash/lodash.js":function(e,t,n){var r;e=n.nmd(e),function(){var i,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,f=1/0,p=9007199254740991,g=NaN,m=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],_="[object Arguments]",y="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",C="[object GeneratorFunction]",D="[object Map]",E="[object Number]",A="[object Object]",k="[object Promise]",M="[object RegExp]",T="[object Set]",I="[object String]",O="[object Symbol]",L="[object WeakMap]",P="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),J=RegExp(K.source),$=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ie.source),ae=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",De="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="['\u2019]",Oe="["+Ce+"]",Le="["+Te+"]",Pe="["+De+"]",Be="\\d+",Ne="["+Ee+"]",Re="["+Ae+"]",Fe="[^"+Ce+Te+Be+Ee+Ae+ke+"]",ze="\\ud83c[\\udffb-\\udfff]",je="[^"+Ce+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+ke+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+Fe+")",We="(?:"+He+"|"+Fe+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Pe+"|"+ze+")?",Xe="["+Me+"]?",Je=Xe+Ke+"(?:"+Ge+"(?:"+[je,Ve,Ue].join("|")+")"+Xe+Ke+")*",$e="(?:"+[Ne,Ve,Ue].join("|")+")"+Je,Qe="(?:"+[je+Pe+"?",Pe,Ve,Ue,Oe].join("|")+")",et=RegExp(Ie,"g"),tt=RegExp(Pe,"g"),nt=RegExp(ze+"(?="+ze+")|"+Qe+Je,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Le,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Le,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,$e].join("|"),"g"),it=RegExp("["+Ge+Ce+De+Me+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[N]=lt[R]=lt[F]=lt[z]=lt[j]=lt[V]=lt[U]=lt[H]=lt[G]=!0,lt[_]=lt[y]=lt[P]=lt[b]=lt[B]=lt[x]=lt[w]=lt[S]=lt[D]=lt[E]=lt[A]=lt[M]=lt[T]=lt[I]=lt[L]=!1;var ut={};ut[_]=ut[y]=ut[P]=ut[B]=ut[b]=ut[x]=ut[N]=ut[R]=ut[F]=ut[z]=ut[j]=ut[D]=ut[E]=ut[A]=ut[M]=ut[T]=ut[I]=ut[O]=ut[V]=ut[U]=ut[H]=ut[G]=!0,ut[w]=ut[S]=ut[L]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||pt||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,_t=vt&&vt.exports===mt,yt=_t&&ft.process,bt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,St=bt&&bt.isMap,Ct=bt&&bt.isRegExp,Dt=bt&&bt.isSet,Et=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Lt(e,t){return!(null==e||!e.length)&&Ht(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=qt("length");function Vt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ut(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Ht(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function qt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Xt(e,t){for(var n,r=-1,s=e.length;++r<s;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $t(e){return e?e.slice(0,mn(e)+1).replace(ae,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return Bt(t,function(t){return e[t]})}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var sn=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ct[e]}function ln(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function cn(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[i++]=n)}return s}function dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function pn(e){return ln(e)?function(e){for(var t=nt.lastIndex=0;nt.test(e);)++t;return t}(e):jt(e)}function gn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var vn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),_n=function e(t){var n=(t=null==t?gt:_n.defaults(gt.Object(),t,_n.pick(gt,at))).Array,r=t.Date,oe=t.Error,Ce=t.Function,De=t.Math,Ee=t.Object,Ae=t.RegExp,ke=t.String,Me=t.TypeError,Te=n.prototype,Ie=Ce.prototype,Oe=Ee.prototype,Le=t["__core-js_shared__"],Pe=Ie.toString,Be=Oe.hasOwnProperty,Ne=0,Re=function(){var e=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Oe.toString,ze=Pe.call(Ee),je=gt._,Ve=Ae("^"+Pe.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=_t?t.Buffer:i,He=t.Symbol,Ge=t.Uint8Array,Ye=Ue?Ue.allocUnsafe:i,We=cn(Ee.getPrototypeOf,Ee),qe=Ee.create,Ze=Oe.propertyIsEnumerable,Ke=Te.splice,Xe=He?He.isConcatSpreadable:i,Je=He?He.iterator:i,$e=He?He.toStringTag:i,Qe=function(){try{var e=hs(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,ct=t.setTimeout!==gt.setTimeout&&t.setTimeout,ft=De.ceil,pt=De.floor,mt=Ee.getOwnPropertySymbols,vt=Ue?Ue.isBuffer:i,yt=t.isFinite,bt=Te.join,jt=cn(Ee.keys,Ee),Zt=De.max,yn=De.min,bn=r.now,xn=t.parseInt,wn=De.random,Sn=Te.reverse,Cn=hs(t,"DataView"),Dn=hs(t,"Map"),En=hs(t,"Promise"),An=hs(t,"Set"),kn=hs(t,"WeakMap"),Mn=hs(Ee,"create"),Tn=kn&&new kn,In={},On=Rs(Cn),Ln=Rs(Dn),Pn=Rs(En),Bn=Rs(An),Nn=Rs(kn),Rn=He?He.prototype:i,Fn=Rn?Rn.valueOf:i,zn=Rn?Rn.toString:i;function jn(e){if(eo(e)&&!Ha(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Be.call(e,"__wrapped__"))return Fs(e)}return new Hn(e)}var Vn=function(){function e(){}return function(t){if(!Qa(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Un(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Ha(e),r=!n&&Ua(e),i=!n&&!r&&qa(e),s=!n&&!r&&!i&&lo(e),a=n||r||i||s,o=a?Jt(e.length,ke):[],l=o.length;for(var u in e)!t&&!Be.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_s(u,l))||o.push(u);return o}function Jn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function $n(e,t){return Ps(Mi(e),or(t,0,e.length))}function Qn(e){return Ps(Mi(e))}function er(e,t,n){(n!==i&&!za(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function tr(e,t,n){var r=e[t];Be.call(e,t)&&za(r,n)&&(n!==i||t in e)||sr(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function rr(e,t,n,r){return dr(e,function(e,i,s){t(r,e,n(e),s)}),r}function ir(e,t){return e&&Ti(t,Io(t),e)}function sr(e,t,n){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,s=t.length,a=n(s),o=null==e;++r<s;)a[r]=o?i:Eo(e,t[r]);return a}function or(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,s,a){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=s?n(e,r,s,a):n(e)),o!==i)return o;if(!Qa(e))return e;var h=Ha(e);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Mi(e,o)}else{var d=ps(e),f=d==S||d==C;if(qa(e))return Si(e,l);if(d==A||d==_||f&&!s){if(o=u||f?{}:ms(e),!l)return u?function(e,t){return Ti(e,fs(e),t)}(e,function(e,t){return e&&Ti(t,Oo(t),e)}(o,e)):function(e,t){return Ti(e,ds(e),t)}(e,ir(o,e))}else{if(!ut[d])return s?e:{};o=function(e,t,n){var r,i=e.constructor;switch(t){case P:return Ci(e);case b:case x:return new i(+e);case B:return function(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case F:case z:case j:case V:case U:case H:case G:return Di(e,n);case D:return new i;case E:case I:return new i(e);case M:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new i;case O:return r=e,Fn?Ee(Fn.call(r)):{}}}(e,d,l)}}a||(a=new Kn);var p=a.get(e);if(p)return p;a.set(e,o),so(e)?e.forEach(function(r){o.add(lr(r,t,n,r,e,a))}):to(e)&&e.forEach(function(r,i){o.set(i,lr(r,t,n,i,e,a))});var g=h?i:(c?u?is:rs:u?Oo:Io)(e);return Mt(g||e,function(r,i){g&&(r=e[i=r]),tr(o,i,lr(r,t,n,i,e,a))}),o}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var s=n[r],a=t[s],o=e[s];if(o===i&&!(s in e)||!a(o))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Me(s);return Ts(function(){e.apply(i,n)},t)}function hr(e,t,n,r){var i=-1,s=Lt,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;n&&(t=Bt(t,Qt(n))),r?(s=Pt,a=!1):t.length>=200&&(s=tn,a=!1,t=new Zn(t));e:for(;++i<o;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else s(t,h,r)||l.push(c)}return l}jn.templateSettings={escape:$,evaluate:Q,interpolate:ee,variable:"",imports:{_:jn}},jn.prototype=Un.prototype,jn.prototype.constructor=jn,Hn.prototype=Vn(Un.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Vn(Un.prototype),Gn.prototype.constructor=Gn,Yn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Mn){var n=t[e];return n===a?i:n}return Be.call(t,e)?t[e]:i},Yn.prototype.has=function(e){var t=this.__data__;return Mn?t[e]!==i:Be.call(t,e)},Yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mn&&t===i?a:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Dn||Wn),string:new Yn}},qn.prototype.delete=function(e){var t=us(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return us(this,e).get(e)},qn.prototype.has=function(e){return us(this,e).has(e)},qn.prototype.set=function(e,t){var n=us(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,a),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var dr=Li(br),fr=Li(xr,!0);function pr(e,t){var n=!0;return dr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function gr(e,t,n){for(var r=-1,s=e.length;++r<s;){var a=e[r],o=t(a);if(null!=o&&(l===i?o===o&&!oo(o):n(o,l)))var l=o,u=a}return u}function mr(e,t){var n=[];return dr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function vr(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=vs),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?vr(o,t-1,n,r,i):Nt(i,o):r||(i[i.length]=o)}return i}var _r=Pi(),yr=Pi(!0);function br(e,t){return e&&_r(e,t,Io)}function xr(e,t){return e&&yr(e,t,Io)}function wr(e,t){return Ot(t,function(t){return Xa(e[t])})}function Sr(e,t){for(var n=0,r=(t=yi(t,e)).length;null!=e&&n<r;)e=e[Ns(t[n++])];return n&&n==r?e:i}function Cr(e,t,n){var r=t(e);return Ha(e)?r:Nt(r,n(e))}function Dr(e){return null==e?e===i?"[object Undefined]":"[object Null]":$e&&$e in Ee(e)?function(e){var t=Be.call(e,$e),n=e[$e];try{e[$e]=i;var r=!0}catch(a){}var s=Fe.call(e);return r&&(t?e[$e]=n:delete e[$e]),s}(e):function(e){return Fe.call(e)}(e)}function Er(e,t){return e>t}function Ar(e,t){return null!=e&&Be.call(e,t)}function kr(e,t){return null!=e&&t in Ee(e)}function Mr(e,t,r){for(var s=r?Pt:Lt,a=e[0].length,o=e.length,l=o,u=n(o),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Bt(d,Qt(t))),c=yn(d.length,c),u[l]=!r&&(t||a>=120&&d.length>=120)?new Zn(l&&d):i}d=e[0];var f=-1,p=u[0];e:for(;++f<a&&h.length<c;){var g=d[f],m=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,m):s(h,m,r))){for(l=o;--l;){var v=u[l];if(!(v?tn(v,m):s(e[l],m,r)))continue e}p&&p.push(m),h.push(g)}}return h}function Tr(e,t,n){var r=null==(e=As(e,t=yi(t,e)))?e:e[Ns(Ks(t))];return null==r?i:At(r,e,n)}function Ir(e){return eo(e)&&Dr(e)==_}function Or(e,t,n,r,s){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:function(e,t,n,r,s,a){var o=Ha(e),l=Ha(t),u=o?y:ps(e),c=l?y:ps(t),h=(u=u==_?A:u)==A,d=(c=c==_?A:c)==A,f=u==c;if(f&&qa(e)){if(!qa(t))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new Kn),o||lo(e)?ts(e,t,n,r,s,a):function(e,t,n,r,i,s,a){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new Ge(e),new Ge(t)));case b:case x:case E:return za(+e,+t);case w:return e.name==t.name&&e.message==t.message;case M:case I:return e==t+"";case D:var o=un;case T:var l=1&r;if(o||(o=dn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=ts(o(e),o(t),r,i,s,a);return a.delete(e),c;case O:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,r,s,a);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=d&&Be.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,v=g?t.value():t;return a||(a=new Kn),s(m,v,n,r,a)}}return!!f&&(a||(a=new Kn),function(e,t,n,r,s,a){var o=1&n,l=rs(e),u=l.length,c=rs(t),h=c.length;if(u!=h&&!o)return!1;for(var d=u;d--;){var f=l[d];if(!(o?f in t:Be.call(t,f)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=o;++d<u;){var _=e[f=l[d]],y=t[f];if(r)var b=o?r(y,_,f,t,e,a):r(_,y,f,e,t,a);if(!(b===i?_===y||s(_,y,n,r,a):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,r,s,a))}(e,t,n,r,Or,s))}function Lr(e,t,n,r){var s=n.length,a=s,o=!r;if(null==e)return!a;for(e=Ee(e);s--;){var l=n[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var u=(l=n[s])[0],c=e[u],h=l[1];if(o&&l[2]){if(c===i&&!(u in e))return!1}else{var d=new Kn;if(r)var f=r(c,h,u,e,t,d);if(!(f===i?Or(h,c,3,r,d):f))return!1}}return!0}function Pr(e){return!(!Qa(e)||(t=e,Re&&Re in t))&&(Xa(e)?Ve:_e).test(Rs(e));var t}function Br(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ha(e)?Vr(e[0],e[1]):jr(e):dl(e)}function Nr(e){if(!Ss(e))return jt(e);var t=[];for(var n in Ee(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rr(e){if(!Qa(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=Ss(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function zr(e,t){var r=-1,i=Ya(e)?n(e.length):[];return dr(e,function(e,n,s){i[++r]=t(e,n,s)}),i}function jr(e){var t=cs(e);return 1==t.length&&t[0][2]?Ds(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function Vr(e,t){return bs(e)&&Cs(t)?Ds(Ns(e),t):function(n){var r=Eo(n,e);return r===i&&r===t?Ao(n,e):Or(t,r,3)}}function Ur(e,t,n,r,s){e!==t&&_r(t,function(a,o){if(s||(s=new Kn),Qa(a))!function(e,t,n,r,s,a,o){var l=ks(e,n),u=ks(t,n),c=o.get(u);if(c)er(e,n,c);else{var h=a?a(l,u,n+"",e,t,o):i,d=h===i;if(d){var f=Ha(u),p=!f&&qa(u),g=!f&&!p&&lo(u);h=u,f||p||g?Ha(l)?h=l:Wa(l)?h=Mi(l):p?(d=!1,h=Si(u,!0)):g?(d=!1,h=Di(u,!0)):h=[]:ro(u)||Ua(u)?(h=l,Ua(l)?h=vo(l):Qa(l)&&!Xa(l)||(h=ms(u))):d=!1}d&&(o.set(u,h),s(h,u,r,a,o),o.delete(u)),er(e,n,h)}}(e,t,o,n,Ur,r,s);else{var l=r?r(ks(e,o),a,o+"",e,t,s):i;l===i&&(l=a),er(e,o,l)}},Oo)}function Hr(e,t){var n=e.length;if(n)return _s(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Bt(t,function(e){return Ha(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e}):[rl];var r=-1;t=Bt(t,Qt(ls()));var i=zr(e,function(e,n,i){var s=Bt(t,function(t){return t(e)});return{criteria:s,index:++r,value:e}});return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,o=n.length;++r<a;){var l=Ei(i[r],s[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Yr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=Sr(e,a);n(o,a)&&Qr(s,yi(a,e),o)}return s}function Wr(e,t,n,r){var i=r?Gt:Ht,s=-1,a=t.length,o=e;for(e===t&&(t=Mi(t)),n&&(o=Bt(e,Qt(n)));++s<a;)for(var l=0,u=t[s],c=n?n(u):u;(l=i(o,c,l,r))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;_s(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+pt(wn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Is(Es(e,t,rl),e+"")}function Jr(e){return Jn(jo(e))}function $r(e,t){var n=jo(e);return Ps(n,or(t,0,n.length))}function Qr(e,t,n,r){if(!Qa(e))return e;for(var s=-1,a=(t=yi(t,e)).length,o=a-1,l=e;null!=l&&++s<a;){var u=Ns(t[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(s!=o){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=Qa(h)?h:_s(t[s+1])?[]:{})}tr(l,u,c),l=l[u]}return e}var ei=Tn?function(e,t){return Tn.set(e,t),e}:rl,ti=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Ps(jo(e))}function ri(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=n(s);++i<s;)a[i]=e[i+t];return a}function ii(e,t){var n;return dr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,a=e[s];null!==a&&!oo(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return ai(e,t,rl,n)}function ai(e,t,n,r){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=n(t))!==t,l=null===t,u=oo(t),c=t===i;s<a;){var h=pt((s+a)/2),d=n(e[h]),f=d!==i,p=null===d,g=d===d,m=oo(d);if(o)var v=r||g;else v=c?g&&(r||f):l?g&&f&&(r||!p):u?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?s=h+1:a=h}return yn(a,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],o=t?t(a):a;if(!n||!za(o,l)){var l=o;s[i++]=0===a?0:a}}return s}function li(e){return"number"==typeof e?e:oo(e)?g:+e}function ui(e){if("string"==typeof e)return e;if(Ha(e))return Bt(e,ui)+"";if(oo(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ci(e,t,n){var r=-1,i=Lt,s=e.length,a=!0,o=[],l=o;if(n)a=!1,i=Pt;else if(s>=200){var u=t?null:Ki(e);if(u)return dn(u);a=!1,i=tn,l=new Zn}else l=t?[]:o;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(c)}else i(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function hi(e,t){return null==(e=As(e,t=yi(t,e)))||delete e[Ns(Ks(t))]}function di(e,t,n,r){return Qr(e,t,n(Sr(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ri(e,r?0:s,r?s+1:i):ri(e,r?s+1:0,r?i:s)}function pi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Rt(t,function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))},n)}function gi(e,t,r){var i=e.length;if(i<2)return i?ci(e[0]):[];for(var s=-1,a=n(i);++s<i;)for(var o=e[s],l=-1;++l<i;)l!=s&&(a[s]=hr(a[s]||o,e[l],t,r));return ci(vr(a,1),t,r)}function mi(e,t,n){for(var r=-1,s=e.length,a=t.length,o={};++r<s;){var l=r<a?t[r]:i;n(o,e[r],l)}return o}function vi(e){return Wa(e)?e:[]}function _i(e){return"function"==typeof e?e:rl}function yi(e,t){return Ha(e)?e:bs(e,t)?[e]:Bs(_o(e))}var bi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return gt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var n=e.length,r=Ye?Ye(n):new e.constructor(n);return e.copy(r),r}function Ci(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Di(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==i,r=null===e,s=e===e,a=oo(e),o=t!==i,l=null===t,u=t===t,c=oo(t);if(!l&&!c&&!a&&e>t||a&&o&&u&&!l&&!c||r&&o&&u||!n&&u||!s)return 1;if(!r&&!a&&!c&&e<t||c&&n&&s&&!r&&!a||l&&n&&s||!o&&s||!u)return-1}return 0}function Ai(e,t,r,i){for(var s=-1,a=e.length,o=r.length,l=-1,u=t.length,c=Zt(a-o,0),h=n(u+c),d=!i;++l<u;)h[l]=t[l];for(;++s<o;)(d||s<a)&&(h[r[s]]=e[s]);for(;c--;)h[l++]=e[s++];return h}function ki(e,t,r,i){for(var s=-1,a=e.length,o=-1,l=r.length,u=-1,c=t.length,h=Zt(a-l,0),d=n(h+c),f=!i;++s<h;)d[s]=e[s];for(var p=s;++u<c;)d[p+u]=t[u];for(;++o<l;)(f||s<a)&&(d[p+r[o]]=e[s++]);return d}function Mi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ti(e,t,n,r){var s=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var l=t[a],u=r?r(n[l],e[l],l,n,e):i;u===i&&(u=e[l]),s?sr(n,l,u):tr(n,l,u)}return n}function Ii(e,t){return function(n,r){var i=Ha(n)?kt:rr,s=t?t():{};return i(n,e,ls(r,2),s)}}function Oi(e){return Xr(function(t,n){var r=-1,s=n.length,a=s>1?n[s-1]:i,o=s>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(s--,a):i,o&&ys(n[0],n[1],o)&&(a=s<3?i:a,s=1),t=Ee(t);++r<s;){var l=n[r];l&&e(t,l,r,a)}return t})}function Li(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Ee(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}function Pi(e){return function(t,n,r){for(var i=-1,s=Ee(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function Bi(e){return function(t){var n=ln(t=_o(t))?gn(t):i,r=n?n[0]:t.charAt(0),s=n?xi(n,1).join(""):t.slice(1);return r[e]()+s}}function Ni(e){return function(t){return Rt(Jo(Ho(t).replace(et,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return Qa(r)?r:n}}function Fi(e){return function(t,n,r){var s=Ee(t);if(!Ya(t)){var a=ls(n,3);t=Io(t),n=function(e){return a(s[e],e,s)}}var o=e(t,n,r);return o>-1?s[a?t[o]:o]:i}}function zi(e){return ns(function(t){var n=t.length,r=n,a=Hn.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Me(s);if(a&&!l&&"wrapper"==as(o))var l=new Hn([],!0)}for(r=l?r:n;++r<n;){var u=as(o=t[r]),c="wrapper"==u?ss(o):i;l=c&&xs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[as(c[0])].apply(l,c[3]):1==o.length&&xs(o)?l[u]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ha(r))return l.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}})}function ji(e,t,r,s,a,o,l,u,c,d){var f=t&h,p=1&t,g=2&t,m=24&t,v=512&t,_=g?i:Ri(e);return function h(){for(var y=arguments.length,b=n(y),x=y;x--;)b[x]=arguments[x];if(m)var w=os(h),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(s&&(b=Ai(b,s,a,m)),o&&(b=ki(b,o,l,m)),y-=S,m&&y<d){var C=hn(b,w);return qi(e,t,ji,h.placeholder,r,b,C,u,c,d-y)}var D=p?r:this,E=g?D[e]:e;return y=b.length,u?b=function(e,t){for(var n=e.length,r=yn(t.length,n),s=Mi(e);r--;){var a=t[r];e[r]=_s(a,n)?s[a]:i}return e}(b,u):v&&y>1&&b.reverse(),f&&c<y&&(b.length=c),this&&this!==gt&&this instanceof h&&(E=_||Ri(E)),E.apply(D,b)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return br(e,function(e,i,s){t(r,n(e),i,s)}),r}(n,e,t(r),{})}}function Ui(e,t){return function(n,r){var s;if(n===i&&r===i)return t;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=li(n),r=li(r)),s=e(n,r)}return s}}function Hi(e){return ns(function(t){return t=Bt(t,Qt(ls())),Xr(function(n){var r=this;return e(t,function(e){return At(e,r,n)})})})}function Gi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,ft(e/pn(t)));return ln(t)?xi(gn(r),0,e).join(""):r.slice(0,e)}function Yi(e){return function(t,r,s){return s&&"number"!=typeof s&&ys(t,r,s)&&(r=s=i),t=fo(t),r===i?(r=t,t=0):r=fo(r),function(e,t,r,i){for(var s=-1,a=Zt(ft((t-e)/(r||1)),0),o=n(a);a--;)o[i?a:++s]=e,e+=r;return o}(t,r,s=s===i?t<r?1:-1:fo(s),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=mo(t),n=mo(n)),e(t,n)}}function qi(e,t,n,r,s,a,o,l,h,d){var f=8&t;t|=f?u:c,4&(t&=~(f?c:u))||(t&=-4);var p=[e,t,s,f?a:i,f?o:i,f?i:a,f?i:o,l,h,d],g=n.apply(i,p);return xs(e)&&Ms(g,p),g.placeholder=r,Os(g,e,t)}function Zi(e){var t=De[e];return function(e,n){if(e=mo(e),(n=null==n?0:yn(po(n),292))&&yt(e)){var r=(_o(e)+"e").split("e");return+((r=(_o(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=An&&1/dn(new An([,-0]))[1]==f?function(e){return new An(e)}:ll;function Xi(e){return function(t){var n=ps(t);return n==D?un(t):n==T?fn(t):function(e,t){return Bt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ji(e,t,r,a,f,p,g,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Me(s);var _=a?a.length:0;if(_||(t&=-97,a=f=i),g=g===i?g:Zt(po(g),0),m=m===i?m:po(m),_-=f?f.length:0,t&c){var y=a,b=f;a=f=i}var x=v?i:ss(e),w=[e,t,r,a,f,y,b,p,g,m];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Ai(u,l,t[4]):l,e[4]=u?hn(e[3],o):t[4]}(l=t[5])&&(u=e[5],e[5]=u?ki(u,l,t[6]):l,e[6]=u?hn(e[5],o):t[6]),(l=t[7])&&(e[7]=l),r&h&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],a=w[3],f=w[4],!(m=w[9]=w[9]===i?v?0:e.length:Zt(w[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==l?function(e,t,r){var s=Ri(e);return function a(){for(var o=arguments.length,l=n(o),u=o,c=os(a);u--;)l[u]=arguments[u];var h=o<3&&l[0]!==c&&l[o-1]!==c?[]:hn(l,c);return(o-=h.length)<r?qi(e,t,ji,a.placeholder,i,l,h,i,i,r-o):At(this&&this!==gt&&this instanceof a?s:e,this,l)}}(e,t,m):t!=u&&33!=t||f.length?ji.apply(i,w):function(e,t,r,i){var s=1&t,a=Ri(e);return function t(){for(var o=-1,l=arguments.length,u=-1,c=i.length,h=n(c+l),d=this&&this!==gt&&this instanceof t?a:e;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++o];return At(d,s?r:this,h)}}(e,t,r,a);else var S=function(e,t,n){var r=1&t,i=Ri(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Os((x?ei:Ms)(S,w),e,t)}function $i(e,t,n,r){return e===i||za(e,Oe[n])&&!Be.call(r,n)?t:e}function Qi(e,t,n,r,s,a){return Qa(e)&&Qa(t)&&(a.set(t,e),Ur(e,t,i,Qi,a),a.delete(t)),e}function es(e){return ro(e)?i:e}function ts(e,t,n,r,s,a){var o=1&n,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var d=-1,f=!0,p=2&n?new Zn:i;for(a.set(e,t),a.set(t,e);++d<l;){var g=e[d],m=t[d];if(r)var v=o?r(m,g,d,t,e,a):r(g,m,d,e,t,a);if(v!==i){if(v)continue;f=!1;break}if(p){if(!zt(t,function(e,t){if(!tn(p,t)&&(g===e||s(g,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(g!==m&&!s(g,m,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ns(e){return Is(Es(e,i,Gs),e+"")}function rs(e){return Cr(e,Io,ds)}function is(e){return Cr(e,Oo,fs)}var ss=Tn?function(e){return Tn.get(e)}:ll;function as(e){for(var t=e.name+"",n=In[t],r=Be.call(In,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function os(e){return(Be.call(jn,"placeholder")?jn:e).placeholder}function ls(){var e=jn.iteratee||il;return e=e===il?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function us(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function cs(e){for(var t=Io(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Cs(i)]}return t}function hs(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Pr(n)?n:i}var ds=mt?function(e){return null==e?[]:(e=Ee(e),Ot(mt(e),function(t){return Ze.call(e,t)}))}:gl,fs=mt?function(e){for(var t=[];e;)Nt(t,ds(e)),e=We(e);return t}:gl,ps=Dr;function gs(e,t,n){for(var r=-1,i=(t=yi(t,e)).length,s=!1;++r<i;){var a=Ns(t[r]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&$a(i)&&_s(a,i)&&(Ha(e)||Ua(e))}function ms(e){return"function"!=typeof e.constructor||Ss(e)?{}:Vn(We(e))}function vs(e){return Ha(e)||Ua(e)||!!(Xe&&e&&e[Xe])}function _s(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function ys(e,t,n){if(!Qa(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&_s(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function bs(e,t){if(Ha(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oo(e))||ne.test(e)||!te.test(e)||null!=t&&e in Ee(t)}function xs(e){var t=as(e),n=jn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=ss(n);return!!r&&e===r[0]}(Cn&&ps(new Cn(new ArrayBuffer(1)))!=B||Dn&&ps(new Dn)!=D||En&&ps(En.resolve())!=k||An&&ps(new An)!=T||kn&&ps(new kn)!=L)&&(ps=function(e){var t=Dr(e),n=t==A?e.constructor:i,r=n?Rs(n):"";if(r)switch(r){case On:return B;case Ln:return D;case Pn:return k;case Bn:return T;case Nn:return L}return t});var ws=Le?Xa:ml;function Ss(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Cs(e){return e===e&&!Qa(e)}function Ds(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Ee(n))}}function Es(e,t,r){return t=Zt(t===i?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=Zt(i.length-t,0),o=n(a);++s<a;)o[s]=i[t+s];s=-1;for(var l=n(t+1);++s<t;)l[s]=i[s];return l[t]=r(o),At(e,this,l)}}function As(e,t){return t.length<2?e:Sr(e,ri(t,0,-1))}function ks(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ms=Ls(ei),Ts=ct||function(e,t){return gt.setTimeout(e,t)},Is=Ls(ti);function Os(e,t,n){var r=t+"";return Is(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Mt(v,function(n){var r="_."+n[0];t&n[1]&&!Lt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Ls(e){var t=0,n=0;return function(){var r=bn(),s=16-(r-n);if(n=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ps(e,t){var n=-1,r=e.length,s=r-1;for(t=t===i?r:t;++n<t;){var a=Zr(n,s),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}var Bs=function(e){var t=La(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)}),t});function Ns(e){if("string"==typeof e||oo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Rs(e){if(null!=e){try{return Pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zs=Xr(function(e,t){return Wa(e)?hr(e,vr(t,1,Wa,!0)):[]}),js=Xr(function(e,t){var n=Ks(t);return Wa(n)&&(n=i),Wa(e)?hr(e,vr(t,1,Wa,!0),ls(n,2)):[]}),Vs=Xr(function(e,t){var n=Ks(t);return Wa(n)&&(n=i),Wa(e)?hr(e,vr(t,1,Wa,!0),i,n):[]});function Us(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=Zt(r+i,0)),Ut(e,ls(t,3),i)}function Hs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r-1;return n!==i&&(s=po(n),s=n<0?Zt(r+s,0):yn(s,r-1)),Ut(e,ls(t,3),s,!0)}function Gs(e){return null!=e&&e.length?vr(e,1):[]}function Ys(e){return e&&e.length?e[0]:i}var Ws=Xr(function(e){var t=Bt(e,vi);return t.length&&t[0]===e[0]?Mr(t):[]}),qs=Xr(function(e){var t=Ks(e),n=Bt(e,vi);return t===Ks(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Mr(n,ls(t,2)):[]}),Zs=Xr(function(e){var t=Ks(e),n=Bt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Mr(n,i,t):[]});function Ks(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xs=Xr(Js);function Js(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var $s=ns(function(e,t){var n=null==e?0:e.length,r=ar(e,t);return qr(e,Bt(t,function(e){return _s(e,n)?+e:e}).sort(Ei)),r});function Qs(e){return null==e?e:Sn.call(e)}var ea=Xr(function(e){return ci(vr(e,1,Wa,!0))}),ta=Xr(function(e){var t=Ks(e);return Wa(t)&&(t=i),ci(vr(e,1,Wa,!0),ls(t,2))}),na=Xr(function(e){var t=Ks(e);return t="function"==typeof t?t:i,ci(vr(e,1,Wa,!0),i,t)});function ra(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,function(e){if(Wa(e))return t=Zt(e.length,t),!0}),Jt(t,function(t){return Bt(e,qt(t))})}function ia(e,t){if(!e||!e.length)return[];var n=ra(e);return null==t?n:Bt(n,function(e){return At(t,i,e)})}var sa=Xr(function(e,t){return Wa(e)?hr(e,t):[]}),aa=Xr(function(e){return gi(Ot(e,Wa))}),oa=Xr(function(e){var t=Ks(e);return Wa(t)&&(t=i),gi(Ot(e,Wa),ls(t,2))}),la=Xr(function(e){var t=Ks(e);return t="function"==typeof t?t:i,gi(Ot(e,Wa),i,t)}),ua=Xr(ra),ca=Xr(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ia(e,n)});function ha(e){var t=jn(e);return t.__chain__=!0,t}function da(e,t){return t(e)}var fa=ns(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,s=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&_s(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:da,args:[s],thisArg:i}),new Hn(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(s)}),pa=Ii(function(e,t,n){Be.call(e,n)?++e[n]:sr(e,n,1)}),ga=Fi(Us),ma=Fi(Hs);function va(e,t){return(Ha(e)?Mt:dr)(e,ls(t,3))}function _a(e,t){return(Ha(e)?Tt:fr)(e,ls(t,3))}var ya=Ii(function(e,t,n){Be.call(e,n)?e[n].push(t):sr(e,n,[t])}),ba=Xr(function(e,t,r){var i=-1,s="function"==typeof t,a=Ya(e)?n(e.length):[];return dr(e,function(e){a[++i]=s?At(t,e,r):Tr(e,t,r)}),a}),xa=Ii(function(e,t,n){sr(e,n,t)});function wa(e,t){return(Ha(e)?Bt:zr)(e,ls(t,3))}var Sa=Ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ca=Xr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ys(e,t[0],t[1])?t=[]:n>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,vr(t,1),[])}),Da=it||function(){return gt.Date.now()};function Ea(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Me(s);return e=po(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var ka=Xr(function(e,t,n){var r=1;if(n.length){var i=hn(n,os(ka));r|=u}return Ji(e,r,t,n,i)}),Ma=Xr(function(e,t,n){var r=3;if(n.length){var i=hn(n,os(Ma));r|=u}return Ji(t,r,e,n,i)});function Ta(e,t,n){var r,a,o,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Me(s);function g(t){var n=r,s=a;return r=a=i,h=t,l=e.apply(s,n)}function m(e){var n=e-c;return c===i||n>=t||n<0||f&&e-h>=o}function v(){var e=Da();if(m(e))return _(e);u=Ts(v,function(e){var n=t-(e-c);return f?yn(n,o-(e-h)):n}(e))}function _(e){return u=i,p&&r?g(e):(r=a=i,l)}function y(){var e=Da(),n=m(e);if(r=arguments,a=this,c=e,n){if(u===i)return function(e){return h=e,u=Ts(v,t),d?g(e):l}(c);if(f)return wi(u),u=Ts(v,t),g(c)}return u===i&&(u=Ts(v,t)),l}return t=mo(t)||0,Qa(n)&&(d=!!n.leading,o=(f="maxWait"in n)?Zt(mo(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){u!==i&&wi(u),h=0,r=c=a=u=i},y.flush=function(){return u===i?l:_(Da())},y}var Ia=Xr(function(e,t){return cr(e,1,t)}),Oa=Xr(function(e,t,n){return cr(e,mo(t)||0,n)});function La(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(La.Cache||qn),n}function Pa(e){if("function"!=typeof e)throw new Me(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}La.Cache=qn;var Ba=bi(function(e,t){var n=(t=1==t.length&&Ha(t[0])?Bt(t[0],Qt(ls())):Bt(vr(t,1),Qt(ls()))).length;return Xr(function(r){for(var i=-1,s=yn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return At(e,this,r)})}),Na=Xr(function(e,t){var n=hn(t,os(Na));return Ji(e,u,i,t,n)}),Ra=Xr(function(e,t){var n=hn(t,os(Ra));return Ji(e,c,i,t,n)}),Fa=ns(function(e,t){return Ji(e,d,i,i,i,t)});function za(e,t){return e===t||e!==e&&t!==t}var ja=Wi(Er),Va=Wi(function(e,t){return e>=t}),Ua=Ir(function(){return arguments}())?Ir:function(e){return eo(e)&&Be.call(e,"callee")&&!Ze.call(e,"callee")},Ha=n.isArray,Ga=xt?Qt(xt):function(e){return eo(e)&&Dr(e)==P};function Ya(e){return null!=e&&$a(e.length)&&!Xa(e)}function Wa(e){return eo(e)&&Ya(e)}var qa=vt||ml,Za=wt?Qt(wt):function(e){return eo(e)&&Dr(e)==x};function Ka(e){if(!eo(e))return!1;var t=Dr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ro(e)}function Xa(e){if(!Qa(e))return!1;var t=Dr(e);return t==S||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ja(e){return"number"==typeof e&&e==po(e)}function $a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function Qa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}var to=St?Qt(St):function(e){return eo(e)&&ps(e)==D};function no(e){return"number"==typeof e||eo(e)&&Dr(e)==E}function ro(e){if(!eo(e)||Dr(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==ze}var io=Ct?Qt(Ct):function(e){return eo(e)&&Dr(e)==M},so=Dt?Qt(Dt):function(e){return eo(e)&&ps(e)==T};function ao(e){return"string"==typeof e||!Ha(e)&&eo(e)&&Dr(e)==I}function oo(e){return"symbol"==typeof e||eo(e)&&Dr(e)==O}var lo=Et?Qt(Et):function(e){return eo(e)&&$a(e.length)&&!!lt[Dr(e)]},uo=Wi(Fr),co=Wi(function(e,t){return e<=t});function ho(e){if(!e)return[];if(Ya(e))return ao(e)?gn(e):Mi(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=ps(e);return(t==D?un:t==T?dn:jo)(e)}function fo(e){return e?(e=mo(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function po(e){var t=fo(e),n=t%1;return t===t?n?t-n:t:0}function go(e){return e?or(po(e),0,m):0}function mo(e){if("number"==typeof e)return e;if(oo(e))return g;if(Qa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ve.test(e);return n||ye.test(e)?dt(e.slice(2),n?2:8):me.test(e)?g:+e}function vo(e){return Ti(e,Oo(e))}function _o(e){return null==e?"":ui(e)}var yo=Oi(function(e,t){if(Ss(t)||Ya(t))Ti(t,Io(t),e);else for(var n in t)Be.call(t,n)&&tr(e,n,t[n])}),bo=Oi(function(e,t){Ti(t,Oo(t),e)}),xo=Oi(function(e,t,n,r){Ti(t,Oo(t),e,r)}),wo=Oi(function(e,t,n,r){Ti(t,Io(t),e,r)}),So=ns(ar),Co=Xr(function(e,t){e=Ee(e);var n=-1,r=t.length,s=r>2?t[2]:i;for(s&&ys(t[0],t[1],s)&&(r=1);++n<r;)for(var a=t[n],o=Oo(a),l=-1,u=o.length;++l<u;){var c=o[l],h=e[c];(h===i||za(h,Oe[c])&&!Be.call(e,c))&&(e[c]=a[c])}return e}),Do=Xr(function(e){return e.push(i,Qi),At(Po,i,e)});function Eo(e,t,n){var r=null==e?i:Sr(e,t);return r===i?n:r}function Ao(e,t){return null!=e&&gs(e,t,kr)}var ko=Vi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n},el(rl)),Mo=Vi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]},ls),To=Xr(Tr);function Io(e){return Ya(e)?Xn(e):Nr(e)}function Oo(e){return Ya(e)?Xn(e,!0):Rr(e)}var Lo=Oi(function(e,t,n){Ur(e,t,n)}),Po=Oi(function(e,t,n,r){Ur(e,t,n,r)}),Bo=ns(function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,function(t){return t=yi(t,e),r||(r=t.length>1),t}),Ti(e,is(e),n),r&&(n=lr(n,7,es));for(var i=t.length;i--;)hi(n,t[i]);return n}),No=ns(function(e,t){return null==e?{}:function(e,t){return Yr(e,t,function(t,n){return Ao(e,n)})}(e,t)});function Ro(e,t){if(null==e)return{};var n=Bt(is(e),function(e){return[e]});return t=ls(t),Yr(e,n,function(e,n){return t(e,n[0])})}var Fo=Xi(Io),zo=Xi(Oo);function jo(e){return null==e?[]:en(e,Io(e))}var Vo=Ni(function(e,t,n){return t=t.toLowerCase(),e+(n?Uo(t):t)});function Uo(e){return Xo(_o(e).toLowerCase())}function Ho(e){return(e=_o(e))&&e.replace(xe,sn).replace(tt,"")}var Go=Ni(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yo=Ni(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wo=Bi("toLowerCase"),qo=Ni(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Zo=Ni(function(e,t,n){return e+(n?" ":"")+Xo(t)}),Ko=Ni(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Xo=Bi("toUpperCase");function Jo(e,t,n){return e=_o(e),(t=n?i:t)===i?function(e){return st.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var $o=Xr(function(e,t){try{return At(e,i,t)}catch(n){return Ka(n)?n:new oe(n)}}),Qo=ns(function(e,t){return Mt(t,function(t){t=Ns(t),sr(e,t,ka(e[t],e))}),e});function el(e){return function(){return e}}var tl=zi(),nl=zi(!0);function rl(e){return e}function il(e){return Br("function"==typeof e?e:lr(e,1))}var sl=Xr(function(e,t){return function(n){return Tr(n,e,t)}}),al=Xr(function(e,t){return function(n){return Tr(e,n,t)}});function ol(e,t,n){var r=Io(t),i=wr(t,r);null!=n||Qa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Io(t)));var s=!(Qa(n)&&"chain"in n)||!!n.chain,a=Xa(e);return Mt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Mi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})}),e}function ll(){}var ul=Hi(Bt),cl=Hi(It),hl=Hi(zt);function dl(e){return bs(e)?qt(Ns(e)):function(e){return function(t){return Sr(t,e)}}(e)}var fl=Yi(),pl=Yi(!0);function gl(){return[]}function ml(){return!1}var vl=Ui(function(e,t){return e+t},0),_l=Zi("ceil"),yl=Ui(function(e,t){return e/t},1),bl=Zi("floor"),xl=Ui(function(e,t){return e*t},1),wl=Zi("round"),Sl=Ui(function(e,t){return e-t},0);return jn.after=function(e,t){if("function"!=typeof t)throw new Me(s);return e=po(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Ea,jn.assign=yo,jn.assignIn=bo,jn.assignInWith=xo,jn.assignWith=wo,jn.at=So,jn.before=Aa,jn.bind=ka,jn.bindAll=Qo,jn.bindKey=Ma,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ha(e)?e:[e]},jn.chain=ha,jn.chunk=function(e,t,r){t=(r?ys(e,t,r):t===i)?1:Zt(po(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var a=0,o=0,l=n(ft(s/t));a<s;)l[o++]=ri(e,a,a+=t);return l},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Ha(r)?Mi(r):[r],vr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=ls();return e=t?Bt(e,function(e){if("function"!=typeof e[1])throw new Me(s);return[n(e[0]),e[1]]}):[],Xr(function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}})},jn.conforms=function(e){return function(e){var t=Io(e);return function(n){return ur(n,e,t)}}(lr(e,1))},jn.constant=el,jn.countBy=pa,jn.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},jn.curry=function e(t,n,r){var s=Ji(t,8,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},jn.curryRight=function e(t,n,r){var s=Ji(t,l,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},jn.debounce=Ta,jn.defaults=Co,jn.defaultsDeep=Do,jn.defer=Ia,jn.delay=Oa,jn.difference=zs,jn.differenceBy=js,jn.differenceWith=Vs,jn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:po(t))<0?0:t,r):[]},jn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:po(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0):[]},jn.fill=function(e,t,n,r){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&ys(e,t,n)&&(n=0,r=s),function(e,t,n,r){var s=e.length;for((n=po(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:po(r))<0&&(r+=s),r=n>r?0:go(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},jn.filter=function(e,t){return(Ha(e)?Ot:mr)(e,ls(t,3))},jn.flatMap=function(e,t){return vr(wa(e,t),1)},jn.flatMapDeep=function(e,t){return vr(wa(e,t),f)},jn.flatMapDepth=function(e,t,n){return n=n===i?1:po(n),vr(wa(e,t),n)},jn.flatten=Gs,jn.flattenDeep=function(e){return null!=e&&e.length?vr(e,f):[]},jn.flattenDepth=function(e,t){return null!=e&&e.length?vr(e,t=t===i?1:po(t)):[]},jn.flip=function(e){return Ji(e,512)},jn.flow=tl,jn.flowRight=nl,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:wr(e,Io(e))},jn.functionsIn=function(e){return null==e?[]:wr(e,Oo(e))},jn.groupBy=ya,jn.initial=function(e){return null!=e&&e.length?ri(e,0,-1):[]},jn.intersection=Ws,jn.intersectionBy=qs,jn.intersectionWith=Zs,jn.invert=ko,jn.invertBy=Mo,jn.invokeMap=ba,jn.iteratee=il,jn.keyBy=xa,jn.keys=Io,jn.keysIn=Oo,jn.map=wa,jn.mapKeys=function(e,t){var n={};return t=ls(t,3),br(e,function(e,r,i){sr(n,t(e,r,i),e)}),n},jn.mapValues=function(e,t){var n={};return t=ls(t,3),br(e,function(e,r,i){sr(n,r,t(e,r,i))}),n},jn.matches=function(e){return jr(lr(e,1))},jn.matchesProperty=function(e,t){return Vr(e,lr(t,1))},jn.memoize=La,jn.merge=Lo,jn.mergeWith=Po,jn.method=sl,jn.methodOf=al,jn.mixin=ol,jn.negate=Pa,jn.nthArg=function(e){return e=po(e),Xr(function(t){return Hr(t,e)})},jn.omit=Bo,jn.omitBy=function(e,t){return Ro(e,Pa(ls(t)))},jn.once=function(e){return Aa(2,e)},jn.orderBy=function(e,t,n,r){return null==e?[]:(Ha(t)||(t=null==t?[]:[t]),Ha(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},jn.over=ul,jn.overArgs=Ba,jn.overEvery=cl,jn.overSome=hl,jn.partial=Na,jn.partialRight=Ra,jn.partition=Sa,jn.pick=No,jn.pickBy=Ro,jn.property=dl,jn.propertyOf=function(e){return function(t){return null==e?i:Sr(e,t)}},jn.pull=Xs,jn.pullAll=Js,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,ls(n,2)):e},jn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},jn.pullAt=$s,jn.range=fl,jn.rangeRight=pl,jn.rearg=Fa,jn.reject=function(e,t){return(Ha(e)?Ot:mr)(e,Pa(ls(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=ls(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return qr(e,i),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Me(s);return Xr(e,t=t===i?t:po(t))},jn.reverse=Qs,jn.sampleSize=function(e,t,n){return t=(n?ys(e,t,n):t===i)?1:po(t),(Ha(e)?$n:$r)(e,t)},jn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},jn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Qr(e,t,n,r)},jn.shuffle=function(e){return(Ha(e)?Qn:ni)(e)},jn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ys(e,t,n)?(t=0,n=r):(t=null==t?0:po(t),n=n===i?r:po(n)),ri(e,t,n)):[]},jn.sortBy=Ca,jn.sortedUniq=function(e){return e&&e.length?oi(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?oi(e,ls(t,2)):[]},jn.split=function(e,t,n){return n&&"number"!=typeof n&&ys(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=_o(e))&&("string"==typeof t||null!=t&&!io(t))&&!(t=ui(t))&&ln(e)?xi(gn(e),0,n):e.split(t,n):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Me(s);return t=null==t?0:Zt(po(t),0),Xr(function(n){var r=n[t],i=xi(n,0,t);return r&&Nt(i,r),At(e,this,i)})},jn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},jn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:po(t))<0?0:t):[]},jn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:po(t)))<0?0:t,r):[]},jn.takeRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?fi(e,ls(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Me(s);return Qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ta(e,t,{leading:r,maxWait:t,trailing:i})},jn.thru=da,jn.toArray=ho,jn.toPairs=Fo,jn.toPairsIn=zo,jn.toPath=function(e){return Ha(e)?Bt(e,Ns):oo(e)?[e]:Mi(Bs(_o(e)))},jn.toPlainObject=vo,jn.transform=function(e,t,n){var r=Ha(e),i=r||qa(e)||lo(e);if(t=ls(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:Qa(e)&&Xa(s)?Vn(We(e)):{}}return(i?Mt:br)(e,function(e,r,i){return t(n,e,r,i)}),n},jn.unary=function(e){return Ea(e,1)},jn.union=ea,jn.unionBy=ta,jn.unionWith=na,jn.uniq=function(e){return e&&e.length?ci(e):[]},jn.uniqBy=function(e,t){return e&&e.length?ci(e,ls(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ci(e,i,t):[]},jn.unset=function(e,t){return null==e||hi(e,t)},jn.unzip=ra,jn.unzipWith=ia,jn.update=function(e,t,n){return null==e?e:di(e,t,_i(n))},jn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,_i(n),r)},jn.values=jo,jn.valuesIn=function(e){return null==e?[]:en(e,Oo(e))},jn.without=sa,jn.words=Jo,jn.wrap=function(e,t){return Na(_i(t),e)},jn.xor=aa,jn.xorBy=oa,jn.xorWith=la,jn.zip=ua,jn.zipObject=function(e,t){return mi(e||[],t||[],tr)},jn.zipObjectDeep=function(e,t){return mi(e||[],t||[],Qr)},jn.zipWith=ca,jn.entries=Fo,jn.entriesIn=zo,jn.extend=bo,jn.extendWith=xo,ol(jn,jn),jn.add=vl,jn.attempt=$o,jn.camelCase=Vo,jn.capitalize=Uo,jn.ceil=_l,jn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=mo(n))===n?n:0),t!==i&&(t=(t=mo(t))===t?t:0),or(mo(e),t,n)},jn.clone=function(e){return lr(e,4)},jn.cloneDeep=function(e){return lr(e,5)},jn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},jn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},jn.conformsTo=function(e,t){return null==t||ur(e,t,Io(t))},jn.deburr=Ho,jn.defaultTo=function(e,t){return null==e||e!==e?t:e},jn.divide=yl,jn.endsWith=function(e,t,n){e=_o(e),t=ui(t);var r=e.length,s=n=n===i?r:or(po(n),0,r);return(n-=t.length)>=0&&e.slice(n,s)==t},jn.eq=za,jn.escape=function(e){return(e=_o(e))&&J.test(e)?e.replace(K,an):e},jn.escapeRegExp=function(e){return(e=_o(e))&&se.test(e)?e.replace(ie,"\\$&"):e},jn.every=function(e,t,n){var r=Ha(e)?It:pr;return n&&ys(e,t,n)&&(t=i),r(e,ls(t,3))},jn.find=ga,jn.findIndex=Us,jn.findKey=function(e,t){return Vt(e,ls(t,3),br)},jn.findLast=ma,jn.findLastIndex=Hs,jn.findLastKey=function(e,t){return Vt(e,ls(t,3),xr)},jn.floor=bl,jn.forEach=va,jn.forEachRight=_a,jn.forIn=function(e,t){return null==e?e:_r(e,ls(t,3),Oo)},jn.forInRight=function(e,t){return null==e?e:yr(e,ls(t,3),Oo)},jn.forOwn=function(e,t){return e&&br(e,ls(t,3))},jn.forOwnRight=function(e,t){return e&&xr(e,ls(t,3))},jn.get=Eo,jn.gt=ja,jn.gte=Va,jn.has=function(e,t){return null!=e&&gs(e,t,Ar)},jn.hasIn=Ao,jn.head=Ys,jn.identity=rl,jn.includes=function(e,t,n,r){e=Ya(e)?e:jo(e),n=n&&!r?po(n):0;var i=e.length;return n<0&&(n=Zt(i+n,0)),ao(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=Zt(r+i,0)),Ht(e,t,i)},jn.inRange=function(e,t,n){return t=fo(t),n===i?(n=t,t=0):n=fo(n),function(e,t,n){return e>=yn(t,n)&&e<Zt(t,n)}(e=mo(e),t,n)},jn.invoke=To,jn.isArguments=Ua,jn.isArray=Ha,jn.isArrayBuffer=Ga,jn.isArrayLike=Ya,jn.isArrayLikeObject=Wa,jn.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Dr(e)==b},jn.isBuffer=qa,jn.isDate=Za,jn.isElement=function(e){return eo(e)&&1===e.nodeType&&!ro(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Ha(e)||"string"==typeof e||"function"==typeof e.splice||qa(e)||lo(e)||Ua(e)))return!e.length;var t=ps(e);if(t==D||t==T)return!e.size;if(Ss(e))return!Nr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Or(e,t)},jn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},jn.isError=Ka,jn.isFinite=function(e){return"number"==typeof e&&yt(e)},jn.isFunction=Xa,jn.isInteger=Ja,jn.isLength=$a,jn.isMap=to,jn.isMatch=function(e,t){return e===t||Lr(e,t,cs(t))},jn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,cs(t),n)},jn.isNaN=function(e){return no(e)&&e!=+e},jn.isNative=function(e){if(ws(e))throw new oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=no,jn.isObject=Qa,jn.isObjectLike=eo,jn.isPlainObject=ro,jn.isRegExp=io,jn.isSafeInteger=function(e){return Ja(e)&&e>=-9007199254740991&&e<=p},jn.isSet=so,jn.isString=ao,jn.isSymbol=oo,jn.isTypedArray=lo,jn.isUndefined=function(e){return e===i},jn.isWeakMap=function(e){return eo(e)&&ps(e)==L},jn.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==Dr(e)},jn.join=function(e,t){return null==e?"":bt.call(e,t)},jn.kebabCase=Go,jn.last=Ks,jn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=po(n))<0?Zt(r+s,0):yn(s,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,s):Ut(e,Yt,s,!0)},jn.lowerCase=Yo,jn.lowerFirst=Wo,jn.lt=uo,jn.lte=co,jn.max=function(e){return e&&e.length?gr(e,rl,Er):i},jn.maxBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Er):i},jn.mean=function(e){return Wt(e,rl)},jn.meanBy=function(e,t){return Wt(e,ls(t,2))},jn.min=function(e){return e&&e.length?gr(e,rl,Fr):i},jn.minBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Fr):i},jn.stubArray=gl,jn.stubFalse=ml,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=xl,jn.nth=function(e,t){return e&&e.length?Hr(e,po(t)):i},jn.noConflict=function(){return gt._===this&&(gt._=je),this},jn.noop=ll,jn.now=Da,jn.pad=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(pt(i),n)+e+Gi(ft(i),n)},jn.padEnd=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;return t&&r<t?e+Gi(t-r,n):e},jn.padStart=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;return t&&r<t?Gi(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(_o(e).replace(ae,""),t||0)},jn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ys(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fo(e),t===i?(t=e,e=0):t=fo(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var s=wn();return yn(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Zr(e,t)},jn.reduce=function(e,t,n){var r=Ha(e)?Rt:Kt,i=arguments.length<3;return r(e,ls(t,4),n,i,dr)},jn.reduceRight=function(e,t,n){var r=Ha(e)?Ft:Kt,i=arguments.length<3;return r(e,ls(t,4),n,i,fr)},jn.repeat=function(e,t,n){return t=(n?ys(e,t,n):t===i)?1:po(t),Kr(_o(e),t)},jn.replace=function(){var e=arguments,t=_o(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,n){var r=-1,s=(t=yi(t,e)).length;for(s||(s=1,e=i);++r<s;){var a=null==e?i:e[Ns(t[r])];a===i&&(r=s,a=n),e=Xa(a)?a.call(e):a}return e},jn.round=wl,jn.runInContext=e,jn.sample=function(e){return(Ha(e)?Jn:Jr)(e)},jn.size=function(e){if(null==e)return 0;if(Ya(e))return ao(e)?pn(e):e.length;var t=ps(e);return t==D||t==T?e.size:Nr(e).length},jn.snakeCase=qo,jn.some=function(e,t,n){var r=Ha(e)?zt:ii;return n&&ys(e,t,n)&&(t=i),r(e,ls(t,3))},jn.sortedIndex=function(e,t){return si(e,t)},jn.sortedIndexBy=function(e,t,n){return ai(e,t,ls(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&za(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return si(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return ai(e,t,ls(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=si(e,t,!0)-1;if(za(e[n],t))return n}return-1},jn.startCase=Zo,jn.startsWith=function(e,t,n){return e=_o(e),n=null==n?0:or(po(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},jn.subtract=Sl,jn.sum=function(e){return e&&e.length?Xt(e,rl):0},jn.sumBy=function(e,t){return e&&e.length?Xt(e,ls(t,2)):0},jn.template=function(e,t,n){var r=jn.templateSettings;n&&ys(e,t,n)&&(t=i),e=_o(e),t=xo({},t,r,$i);var s,a,o=xo({},t.imports,r.imports,$i),l=Io(o),u=en(o,l),c=0,h=t.interpolate||we,d="__p += '",f=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,function(t,n,r,i,o,l){return r||(r=i),d+=e.slice(c,l).replace(Se,on),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new oe("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(Y,""):d).replace(W,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=$o(function(){return Ce(l,p+"return "+d).apply(i,u)});if(m.source=d,Ka(m))throw m;return m},jn.times=function(e,t){if((e=po(e))<1||e>p)return[];var n=m,r=yn(e,m);t=ls(t),e-=m;for(var i=Jt(r,t);++n<e;)t(n);return i},jn.toFinite=fo,jn.toInteger=po,jn.toLength=go,jn.toLower=function(e){return _o(e).toLowerCase()},jn.toNumber=mo,jn.toSafeInteger=function(e){return e?or(po(e),-9007199254740991,p):0===e?e:0},jn.toString=_o,jn.toUpper=function(e){return _o(e).toUpperCase()},jn.trim=function(e,t,n){if((e=_o(e))&&(n||t===i))return $t(e);if(!e||!(t=ui(t)))return e;var r=gn(e),s=gn(t);return xi(r,nn(r,s),rn(r,s)+1).join("")},jn.trimEnd=function(e,t,n){if((e=_o(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=ui(t)))return e;var r=gn(e);return xi(r,0,rn(r,gn(t))+1).join("")},jn.trimStart=function(e,t,n){if((e=_o(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=ui(t)))return e;var r=gn(e);return xi(r,nn(r,gn(t))).join("")},jn.truncate=function(e,t){var n=30,r="...";if(Qa(t)){var s="separator"in t?t.separator:s;n="length"in t?po(t.length):n,r="omission"in t?ui(t.omission):r}var a=(e=_o(e)).length;if(ln(e)){var o=gn(e);a=o.length}if(n>=a)return e;var l=n-pn(r);if(l<1)return r;var u=o?xi(o,0,l).join(""):e.slice(0,l);if(s===i)return u+r;if(o&&(l+=u.length-l),io(s)){if(e.slice(l).search(s)){var c,h=u;for(s.global||(s=Ae(s.source,_o(ge.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===i?l:d)}}else if(e.indexOf(ui(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+r},jn.unescape=function(e){return(e=_o(e))&&X.test(e)?e.replace(Z,vn):e},jn.uniqueId=function(e){var t=++Ne;return _o(e)+t},jn.upperCase=Ko,jn.upperFirst=Xo,jn.each=va,jn.eachRight=_a,jn.first=Ys,ol(jn,function(){var e={};return br(jn,function(t,n){Be.call(jn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),jn.VERSION="4.17.21",Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){jn[e].placeholder=jn}),Mt(["drop","take"],function(e,t){Gn.prototype[e]=function(n){n=n===i?1:Zt(po(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Mt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Mt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}}),Mt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}}),Gn.prototype.compact=function(){return this.filter(rl)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr(function(e,t){return"function"==typeof e?new Gn(this):this.map(function(n){return Tr(n,e,t)})}),Gn.prototype.reject=function(e){return this.filter(Pa(ls(e)))},Gn.prototype.slice=function(e,t){e=po(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=po(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(m)},br(Gn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=jn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);s&&(jn.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,l=t instanceof Gn,u=o[0],c=l||Ha(t),h=function(e){var t=s.apply(jn,Nt([e],o));return r&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&c){t=g?t:new Gn(this);var m=e.apply(t,o);return m.__actions__.push({func:da,args:[h],thisArg:i}),new Hn(m,d)}return p&&g?e.apply(this,o):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ha(i)?i:[],e)}return this[n](function(n){return t.apply(Ha(n)?n:[],e)})}}),br(Gn.prototype,function(e,t){var n=jn[t];if(n){var r=n.name+"";Be.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}}),In[ji(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ha(e),r=t<0,i=n?e.length:0,s=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=Zt(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=s.start,o=s.end,l=o-a,u=r?o:a-1,c=this.__iteratees__,h=c.length,d=0,f=yn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var g=-1,m=e[u+=t];++g<h;){var v=c[g],_=v.iteratee,y=v.type,b=_(m);if(2==y)m=b;else if(!b){if(1==y)continue e;break e}}p[d++]=m}return p},jn.prototype.at=fa,jn.prototype.chain=function(){return ha(this)},jn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=ho(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,n=this;n instanceof Un;){var r=Fs(n);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;n=n.__wrapped__}return s.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:da,args:[Qs],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(Qs)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Je&&(jn.prototype[Je]=function(){return this}),jn}();gt._=_n,(r=function(){return _n}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},react:t=>{"use strict";t.exports=e},"styled-components":e=>{"use strict";e.exports=t},"?4f7e":()=>{},"./node_modules/@zakeke/zakeke-3d-core/dist/index.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AndroidAR:()=>wi,AxesLayer:()=>Mi,BlendProceduralTexture:()=>tr,BlurXProceduralTexture:()=>In,BlurYProceduralTexture:()=>Pn,BroadcastChannelEventType:()=>ea,DAMViewerAnalyticsEventType:()=>ki,Database:()=>Bi,DefaultAssetUrls:()=>Sn,DracoCompression:()=>fi,EditingMode:()=>h,EditorMeshType:()=>aa,ElementSelector:()=>rr,EnvironmentManager:()=>pi,EnvironmentMode:()=>c,EventState:()=>Ii,ForegroundBackgroundProceduralTexture:()=>Rn,GlowManager:()=>lr,IS_ANDROID:()=>ti,IS_IOS:()=>ni,IncrementalFiles:()=>mr,InfoPointsManager:()=>Si,InnerShadow:()=>$r,LightsLayer:()=>Ti,MakeIncremental:()=>ur,MaterialEditor:()=>oa,MaterialGroup:()=>na,MaterialPreviewData:()=>Zr,MaterialsPreview:()=>Kr,MeshDesignManager:()=>ii,MeshExpander:()=>Dn,MeshLocationsManager:()=>or,MoveProceduralTexture:()=>jn,MultiObserver:()=>Li,MultiplyProceduralTexture:()=>Hn,NormalMapProceduralTexture:()=>Wn,Observable:()=>Pi,Observer:()=>Oi,OpacityProceduralTexture:()=>Kn,OuterShadow:()=>Qr,OverlayProceduralTexture:()=>$n,Preview3DConfigurationManager:()=>oi,ProceduralNormalMap:()=>Jr,SceneActionsExecutor:()=>ar,SceneDesignManager:()=>si,SceneEditor:()=>sa,SceneHelper:()=>kn,SceneToBlobs:()=>xi,SceneViewer:()=>ta,SourceTaskStatus:()=>ra,StringTools:()=>Cn,TryOnFineTuningMazingEnvironment:()=>Ai,TryOnProvider:()=>Di,TryOnSettingsType:()=>Ei,TryOnType:()=>Ci,UsdzHelper:()=>En,WorkerPool:()=>cr,ZakekeEnvironment:()=>d,arrayContains:()=>Mr,changeColorLuminosity:()=>Or,chunkString:()=>jr,cropImageTransparency:()=>Lr,cropImageTransparencyAsync:()=>Nr,dataURItoBlob:()=>Hr,debounce:()=>ei,defaultSceneConfig:()=>la,flipImage:()=>Yr,getAbsoluteUrl:()=>Ur,getColorBrightness:()=>Tr,getColorImage:()=>zr,getContrastYIQ:()=>Ar,getContrastYIQHex:()=>kr,getNavigatorQueryParams:()=>qr,getRandomString:()=>Gr,getStringHashCode:()=>Vr,getViewport:()=>Er,isAndroid:()=>Sr,isColorDark:()=>Ir,isIPhoneX:()=>wr,isMobile:()=>Dr,isPBRMaterial:()=>Wr,isiOS:()=>Cr,removeBlanks:()=>Rr,resizeImageFromDataUri:()=>Fr,trimCanvas:()=>Br,trimImageAsync:()=>Pr}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=0;i!==n;i++)if(e.call(r,this[i],i,t))return this[i]}}),Array.prototype.includes||(Array.prototype.includes=function(e){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var r,i,s=parseInt(arguments[1],10)||0;for(s>=0?r=s:(r=n+s)<0&&(r=0);r<n;){if(e===(i=t[r])||e!==e&&i!==i)return!0;r++}return!1}),Array.prototype.map||(Array.prototype.map=function(e){var t,n,r;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),s=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=new Array(s),r=0;r<s;){var a,o;r in i&&(a=i[r],o=e.call(t,a,r,i),n[r]=o),r++}return n}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=t>0?0|t:0;return this.substring(n,n+e.length)===e}}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});var s,a,o,l,u,c=(e=>(e[e.Editor=1]="Editor",e[e.Viewer=2]="Viewer",e))(c||{}),h=(e=>(e.None="None",e.Translate="Translate",e.Rotate="Rotate",e.Scaling="Scaling",e))(h||{}),d=(e=>(e[e.Customizer=1]="Customizer",e[e.Composer=2]="Composer",e[e.Viewer=3]="Viewer",e))(d||{}),f=typeof Float32Array<"u"?Float32Array:Array;function p(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function g(e,t,n){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],g=t[12],m=t[13],v=t[14],_=t[15],y=n[0],b=n[1],x=n[2],w=n[3];return e[0]=y*r+b*o+x*h+w*g,e[1]=y*i+b*l+x*d+w*m,e[2]=y*s+b*u+x*f+w*v,e[3]=y*a+b*c+x*p+w*_,y=n[4],b=n[5],x=n[6],w=n[7],e[4]=y*r+b*o+x*h+w*g,e[5]=y*i+b*l+x*d+w*m,e[6]=y*s+b*u+x*f+w*v,e[7]=y*a+b*c+x*p+w*_,y=n[8],b=n[9],x=n[10],w=n[11],e[8]=y*r+b*o+x*h+w*g,e[9]=y*i+b*l+x*d+w*m,e[10]=y*s+b*u+x*f+w*v,e[11]=y*a+b*c+x*p+w*_,y=n[12],b=n[13],x=n[14],w=n[15],e[12]=y*r+b*o+x*h+w*g,e[13]=y*i+b*l+x*d+w*m,e[14]=y*s+b*u+x*f+w*v,e[15]=y*a+b*c+x*p+w*_,e}function m(e,t){var n=new f(3);!function(e,t){var n=t[0],r=t[1],i=t[2],s=t[4],a=t[5],o=t[6],l=t[8],u=t[9],c=t[10];e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,u,c)}(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],a=t[0]*r,o=t[1]*i,l=t[2]*s,u=t[4]*r,c=t[5]*i,h=t[6]*s,d=t[8]*r,p=t[9]*i,g=t[10]*s,m=a+c+g,v=0;return m>0?(v=2*Math.sqrt(m+1),e[3]=.25*v,e[0]=(h-p)/v,e[1]=(d-l)/v,e[2]=(o-u)/v):a>c&&a>g?(v=2*Math.sqrt(1+a-c-g),e[3]=(h-p)/v,e[0]=.25*v,e[1]=(o+u)/v,e[2]=(d+l)/v):c>g?(v=2*Math.sqrt(1+c-a-g),e[3]=(d-l)/v,e[0]=(o+u)/v,e[1]=.25*v,e[2]=(h+p)/v):(v=2*Math.sqrt(1+g-a-c),e[3]=(o-u)/v,e[0]=(d+l)/v,e[1]=(h+p)/v,e[2]=.25*v),e}function v(e,t,n,r){var i,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),function(){var e=new f(3);f!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0)}(),(u=s||(s={})).ACCESSOR="Accessor",u.ANIMATION="Animation",u.ANIMATION_CHANNEL="AnimationChannel",u.ANIMATION_SAMPLER="AnimationSampler",u.BUFFER="Buffer",u.CAMERA="Camera",u.MATERIAL="Material",u.MESH="Mesh",u.PRIMITIVE="Primitive",u.PRIMITIVE_TARGET="PrimitiveTarget",u.NODE="Node",u.ROOT="Root",u.SCENE="Scene",u.SKIN="Skin",u.TEXTURE="Texture",u.TEXTURE_INFO="TextureInfo",function(e){e.INTERLEAVED="interleaved",e.SEPARATE="separate"}(a||(a={})),function(e){e[e.R=4096]="R",e[e.G=256]="G",e[e.B=16]="B",e[e.A=1]="A"}(o||(o={})),function(e){e.GLTF="GLTF",e.GLB="GLB"}(l||(l={}));class _{constructor(e,t,n){if(this.t=void 0,this.i=void 0,this.h=void 0,this.o=!1,this.u=[],this.t=e,this.i=t,this.h=n,!t.canLink(n))throw new Error("Cannot link disconnected graphs/documents.")}getName(){return this.t}getParent(){return this.i}getChild(){return this.h}setChild(e){return this.h=e,this}dispose(){this.o||(this.o=!0,this.u.forEach(e=>e()),this.u.length=0)}onDispose(e){return this.u.push(e),this}isDisposed(){return this.o}}class y{constructor(){this.l=new Set,this.p=new Set,this.g=new Map,this.v=new Map,this.u={}}on(e,t){return this.u[e]=this.u[e]||[],this.u[e].push(t),this}emit(e,t){for(const n of this.u[e]||[])n(t);return this}getLinks(){return Array.from(this.p)}listParentLinks(e){return Array.from(this.v.get(e)||this.l)}listParents(e){return this.listParentLinks(e).map(e=>e.getParent())}listChildLinks(e){return Array.from(this.g.get(e)||this.l)}listChildren(e){return this.listChildLinks(e).map(e=>e.getChild())}disconnectChildren(e){return(this.g.get(e)||this.l).forEach(e=>e.dispose()),this}disconnectParents(e,t){let n=Array.from(this.v.get(e)||this.l);return t&&(n=n.filter(e=>t(e.getParent()))),n.forEach(e=>e.dispose()),this}swapChild(e,t,n){const r=this.g.get(e)||this.l;return Array.from(r).filter(e=>e.getChild()===t).forEach(e=>{this.v.get(t).delete(e),e.setChild(n),this.v.has(n)||this.v.set(n,new Set),this.v.get(n).add(e)}),this}link(e,t,n){if(!n)return null;const r=new _(e,t,n);return this.registerLink(r),r}registerLink(e){this.p.add(e);const t=e.getParent();this.g.has(t)||this.g.set(t,new Set),this.g.get(t).add(e);const n=e.getChild();return this.v.has(n)||this.v.set(n,new Set),this.v.get(n).add(e),e.onDispose(()=>this.unlink(e)),e}unlink(e){return this.p.delete(e),this.g.get(e.getParent()).delete(e),this.v.get(e.getChild()).delete(e),this}}function b(e,t){Object.defineProperty(e,t,{get:function(){return this["__"+t]},set:function(e){const n=this["__"+t];n&&!Array.isArray(n)&&n.dispose(),e&&!Array.isArray(e)&&e.onDispose(()=>{this["__"+t]=null}),this["__"+t]=e},enumerable:!0})}function x(e,t){}class w{static createBufferFromDataURI(e){if(typeof Buffer>"u"){const t=atob(e.split(",")[1]),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}{const t=e.split(",")[1],n=e.indexOf("base64")>=0;return this.trim(Buffer.from(t,n?"base64":"utf8"))}}static encodeText(e){return typeof TextEncoder<"u"?(new TextEncoder).encode(e).buffer:this.trim(Buffer.from(e))}static decodeText(e){return typeof TextDecoder<"u"?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}static trim(e){const{byteOffset:t,byteLength:n}=e;return e.buffer.slice(t,t+n)}static concat(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(new Uint8Array(i),r),r+=i.byteLength;return n.buffer}static pad(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.padNumber(e.byteLength);if(n!==e.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(let i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const n=new DataView(e),r=new DataView(t);let i=e.byteLength;for(;i--;)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}}class S{static hexToFactor(e,t){e=Math.floor(e);const n=t;return n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[n,r,i]=this.convertLinearToSRGB(e,t);return 255*n<<16^255*r<<8^255*i}static convertSRGBToLinear(e,t){const n=e,r=t;for(let i=0;i<3;i++)r[i]=n[i]<.04045?.0773993808*n[i]:Math.pow(.9478672986*n[i]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const n=e,r=t;for(let i=0;i<3;i++)r[i]=n[i]<.0031308?12.92*n[i]:1.055*Math.pow(n[i],.41666)-.055;return t}}class C{static basename(e){const t=e.split(/[\\/]/).pop();return t.substr(0,t.lastIndexOf("."))}static extension(e){return 0!==e.indexOf("data:")?e.split(/[\\/]/).pop().split(/[.]/).pop():0===e.indexOf("data:image/png")?"png":0===e.indexOf("data:image/jpeg")?"jpeg":"bin"}}class D{match(e){const t=new Uint8Array(e);return t.length>=8&&137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}getSize(e){const t=new DataView(e);return w.decodeText(e.slice(12,16))===D.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}}D.PNG_FRIED_CHUNK_NAME="CgBI";class E{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let n=0;const r=this.getSize(e,t);if(!r)return null;for(;r[0]>1||r[1]>1;)n+=r[0]*r[1]*4,r[0]=Math.max(Math.floor(r[0]/2),1),r[1]=Math.max(Math.floor(r[1]/2),1);return n+=4,n}static mimeTypeToExtension(e){return"image/jpeg"===e?"jpg":e.split("/").pop()}static extensionToMimeType(e){return"jpg"===e?"image/jpeg":"image/".concat(e)}}function A(e,t){if(t>e.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==e.getUint8(t))throw new TypeError("Invalid JPG, marker table corrupted");return e}E.impls={"image/jpeg":new class{match(e){const t=new Uint8Array(e);return t.length>=3&&255===t[0]&&216===t[1]&&255===t[2]}getSize(e){let t,n,r=new DataView(e,4);for(;r.byteLength;){if(t=r.getUint16(0,!1),A(r,t),n=r.getUint8(t+1),192===n||193===n||194===n)return[r.getUint16(t+7,!1),r.getUint16(t+5,!1)];r=new DataView(e,r.byteOffset+t+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}},"image/png":new D};class k{static identity(e){return e}static eq(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(Math.abs(e[n]-t[n])>1e-5)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,n,r){let i=p([e[0],e[1],e[2]]);const s=p([e[4],e[5],e[6]]),a=p([e[8],e[9],e[10]]);(function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],g=e[14],m=e[15];return(t*a-n*s)*(h*m-d*g)-(t*o-r*s)*(c*m-d*p)+(t*l-i*s)*(c*g-h*p)+(n*o-r*a)*(u*m-d*f)-(n*l-i*a)*(u*g-h*f)+(r*l-i*o)*(u*p-c*f)})(e)<0&&(i=-i),t[0]=e[12],t[1]=e[13],t[2]=e[14];const o=e.slice(),l=1/i,u=1/s,c=1/a;o[0]*=l,o[1]*=l,o[2]*=l,o[4]*=u,o[5]*=u,o[6]*=u,o[8]*=c,o[9]*=c,o[10]*=c,m(n,o),r[0]=i,r[1]=s,r[2]=a}static compose(e,t,n,r){const i=r,s=t[0],a=t[1],o=t[2],l=t[3],u=s+s,c=a+a,h=o+o,d=s*u,f=s*c,p=s*h,g=a*c,m=a*h,v=o*h,_=l*u,y=l*c,b=l*h,x=n[0],w=n[1],S=n[2];return i[0]=(1-(g+v))*x,i[1]=(f+b)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(f-b)*w,i[5]=(1-(d+v))*w,i[6]=(m+_)*w,i[7]=0,i[8]=(p+y)*S,i[9]=(m-_)*S,i[10]=(1-(d+g))*S,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}class M{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=M.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=M.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=M.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=M.Verbosity.ERROR&&console.error(e)}}M.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},M.DEFAULT_INSTANCE=new M(M.Verbosity.INFO);const T="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",I=new Set,O=function(){let e="";for(let t=0;t<6;t++)e+=T.charAt(Math.floor(42*Math.random()));return e},L=e=>e;class P extends class{constructor(e){this.graph=void 0,this.o=!1,this.graph=e,this.graph=e}canLink(e){return this.graph===e.graph}isDisposed(){return this.o}dispose(){this.graph.disconnectChildren(this),this.graph.disconnectParents(this),this.o=!0,this.graph.emit("dispose",this)}detach(){return this.graph.disconnectParents(this),this}swap(e,t){return this.graph.swapChild(this,e,t),this}addGraphChild(e,t){return e.push(t),t.onDispose(()=>{const n=e.filter(e=>e!==t);e.length=0;for(const t of n)e.push(t)}),this}removeGraphChild(e,t){return e.filter(e=>e.getChild()===t).forEach(e=>e.dispose()),this}clearGraphChildList(e){for(;e.length>0;)e[0].dispose();return this}listGraphParents(){return this.graph.listParents(this)}}{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";super(e),this.graph=void 0,this.m={},this.t="",this.graph=e,this.t=t}getName(){return this.t}setName(e){return this.t=e,this}getExtras(){return this.m}setExtras(e){return this.m=e,this}clone(){const e=new this.constructor(this.graph).copy(this,L);return this.graph.emit("clone",e),e}copy(e){return this.t=e.t,this.m=JSON.parse(JSON.stringify(e.m)),this}detach(){return this.graph.disconnectParents(this,e=>"Root"!==e.propertyType),this}listParents(){return this.listGraphParents()}}const B="Pass extension name (string) as lookup token, not a constructor.";class N extends P{constructor(){super(...arguments),this.extensions=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.clearGraphChildList(this.extensions),e.extensions.forEach(e=>{const n=e.getChild();this.setExtension(n.extensionName,t(n))}),this}getExtension(e){if("string"!=typeof e)throw new Error(B);const t=this.extensions.find(t=>t.getChild().extensionName===e);return t?t.getChild():null}setExtension(e,t){if("string"!=typeof e)throw new Error(B);const n=this.getExtension(e);return n&&this.removeGraphChild(this.extensions,n),t?(t.T(this),this.addGraphChild(this.extensions,this.graph.link(e,this,t))):this}listExtensions(){return this.extensions.map(e=>e.getChild())}}v([x],N.prototype,"extensions",void 0);class R extends N{constructor(){super(...arguments),this.propertyType=s.ACCESSOR,this.S=null,this.M=R.Type.SCALAR,this.I=R.ComponentType.FLOAT,this.N=!1,this.C=k.identity,this.O=k.identity,this.buffer=null}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.M=e.M,this.I=e.I,this.N=e.N,this.C=e.C,this.O=e.O,e.S&&(this.S=e.S.slice()),this.setBuffer(e.buffer?t(e.buffer.getChild()):null),this}static getElementSize(e){switch(e){case R.Type.SCALAR:return 1;case R.Type.VEC2:return 2;case R.Type.VEC3:return 3;case R.Type.VEC4:case R.Type.MAT2:return 4;case R.Type.MAT3:return 9;case R.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case R.ComponentType.BYTE:case R.ComponentType.UNSIGNED_BYTE:return 1;case R.ComponentType.SHORT:case R.ComponentType.UNSIGNED_SHORT:return 2;case R.ComponentType.UNSIGNED_INT:case R.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let n=0;n<t;n++)e[n]=this.O(e[n]);return e}getMin(e){const t=this.getCount(),n=this.getElementSize();for(let r=0;r<n;r++)e[r]=1/0;for(let r=0;r<t*n;r+=n)for(let t=0;t<n;t++){const n=this.S[r+t];Number.isFinite(n)&&(e[t]=Math.min(e[t],n))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let n=0;n<t;n++)e[n]=this.O(e[n]);return e}getMax(e){const t=this.getCount(),n=this.getElementSize();for(let r=0;r<n;r++)e[r]=-1/0;for(let r=0;r<t*n;r+=n)for(let t=0;t<n;t++){const n=this.S[r+t];Number.isFinite(n)&&(e[t]=Math.max(e[t],n))}return e}getCount(){return this.S?this.S.length/this.getElementSize():0}getType(){return this.M}setType(e){return this.M=e,this}getElementSize(){return R.getElementSize(this.M)}getComponentSize(){return this.S.BYTES_PER_ELEMENT}getComponentType(){return this.I}getNormalized(){return this.N}setNormalized(e){return this.N=e,e?(this.O=e=>k.denormalize(e,this.I),this.C=e=>k.normalize(e,this.I)):(this.O=k.identity,this.C=k.identity),this}getScalar(e){const t=this.getElementSize();return this.O(this.S[e*t])}setScalar(e,t){return this.S[e*this.getElementSize()]=this.C(t),this}getElement(e,t){const n=this.getElementSize();for(let r=0;r<n;r++)t[r]=this.O(this.S[e*n+r]);return t}setElement(e,t){const n=this.getElementSize();for(let r=0;r<n;r++)this.S[e*n+r]=this.C(t[r]);return this}getBuffer(){return this.buffer?this.buffer.getChild():null}setBuffer(e){return this.buffer=this.graph.link("buffer",this,e),this}getArray(){return this.S}setArray(e){return this.I=e?function(e){switch(e.constructor){case Float32Array:return R.ComponentType.FLOAT;case Uint32Array:return R.ComponentType.UNSIGNED_INT;case Uint16Array:return R.ComponentType.UNSIGNED_SHORT;case Uint8Array:return R.ComponentType.UNSIGNED_BYTE;case Int16Array:return R.ComponentType.SHORT;case Int8Array:return R.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):R.ComponentType.FLOAT,this.S=e,this}getByteLength(){return this.S?this.S.byteLength:0}}R.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},R.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},v([b],R.prototype,"buffer",void 0);class F extends N{constructor(){super(...arguments),this.propertyType=s.ANIMATION,this.channels=[],this.samplers=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.clearGraphChildList(this.channels),this.clearGraphChildList(this.samplers),e.channels.forEach(e=>this.addChannel(t(e.getChild()))),e.samplers.forEach(e=>this.addSampler(t(e.getChild()))),this}addChannel(e){const t=this.graph.link("channel",this,e);return this.addGraphChild(this.channels,t)}removeChannel(e){return this.removeGraphChild(this.channels,e)}listChannels(){return this.channels.map(e=>e.getChild())}addSampler(e){const t=this.graph.link("sampler",this,e);return this.addGraphChild(this.samplers,t)}removeSampler(e){return this.removeGraphChild(this.samplers,e)}listSamplers(){return this.samplers.map(e=>e.getChild())}}v([x],F.prototype,"channels",void 0),v([x],F.prototype,"samplers",void 0);class z extends P{constructor(){super(...arguments),this.propertyType=s.ANIMATION_CHANNEL,this._=null,this.targetNode=null,this.sampler=null}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this._=e._,this.setTargetNode(e.targetNode?t(e.targetNode.getChild()):null),this.setSampler(e.sampler?t(e.sampler.getChild()):null),this}getTargetPath(){return this._}setTargetPath(e){return this._=e,this}getTargetNode(){return this.targetNode?this.targetNode.getChild():null}setTargetNode(e){return this.targetNode=this.graph.link("target.node",this,e),this}getSampler(){return this.sampler?this.sampler.getChild():null}setSampler(e){return this.sampler=this.graph.link("sampler",this,e),this}}z.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"},v([b],z.prototype,"targetNode",void 0),v([b],z.prototype,"sampler",void 0);class j extends P{constructor(){super(...arguments),this.propertyType=s.ANIMATION_SAMPLER,this.L=j.Interpolation.LINEAR,this.input=null,this.output=null}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.L=e.L,this.setInput(e.input?t(e.input.getChild()):null),this.setOutput(e.output?t(e.output.getChild()):null),this}getInterpolation(){return this.L}setInterpolation(e){return this.L=e,this}getInput(){return this.input?this.input.getChild():null}setInput(e){return this.input=this.graph.link("input",this,e),this}getOutput(){return this.output?this.output.getChild():null}setOutput(e){return this.output=this.graph.link("output",this,e),this}}j.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"},v([b],j.prototype,"input",void 0),v([b],j.prototype,"output",void 0);class V extends N{constructor(){super(...arguments),this.propertyType=s.BUFFER,this.P=""}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.P=e.P,this}getURI(){return this.P}setURI(e){return this.P=e,this}}class U extends N{constructor(){super(...arguments),this.propertyType=s.CAMERA,this.M=U.Type.PERSPECTIVE,this.U=.1,this.k=100,this.F=null,this.j=2*Math.PI*50/360,this.D=1,this.J=1}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.M=e.M,this.U=e.U,this.k=e.k,this.F=e.F,this.j=e.j,this.D=e.D,this.J=e.J,this}getType(){return this.M}setType(e){return this.M=e,this}getZNear(){return this.U}setZNear(e){return this.U=e,this}getZFar(){return this.k}setZFar(e){return this.k=e,this}getAspectRatio(){return this.F}setAspectRatio(e){return this.F=e,this}getYFov(){return this.j}setYFov(e){return this.j=e,this}getXMag(){return this.D}setXMag(e){return this.D=e,this}getYMag(){return this.J}setYMag(e){return this.J=e,this}}U.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class H extends P{constructor(e,t){super(e),this.$=void 0,this.$=t,this.$.addExtensionProperty(this)}clone(){const e=new this.constructor(this.graph,this.$).copy(this,L);return this.graph.emit("clone",e),e}dispose(){this.$.removeExtensionProperty(this),super.dispose()}T(e){if(!this.parentTypes.includes(e.propertyType))throw new Error('Parent "'.concat(e.propertyType,'" invalid for child "').concat(this.propertyType,'".'))}}H.EXTENSION_NAME=void 0;class G extends _{constructor(){super(...arguments),this.semantic=""}copy(e){return this.semantic=e.semantic,this}}class Y extends _{copy(e){return this}}let W=class extends _{constructor(){super(...arguments),this.channels=0}copy(e){return this.channels=e.channels,this}};class q extends y{linkAttribute(e,t,n){if(!n)return null;const r=new G(e,t,n);return r.semantic=e,this.registerLink(r),r}linkIndex(e,t,n){if(!n)return null;const r=new Y(e,t,n);return this.registerLink(r),r}linkTexture(e,t,n,r){if(!r)return null;const i=new W(e,n,r);return i.channels=t,this.registerLink(i),i}}class Z extends N{constructor(){super(...arguments),this.propertyType=s.TEXTURE_INFO,this.V=0,this.W=null,this.q=null,this.Y=Z.WrapMode.REPEAT,this.H=Z.WrapMode.REPEAT}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.V=e.V,this.W=e.W,this.q=e.q,this.Y=e.Y,this.H=e.H,this}equals(e){return this.getTexCoord()===e.getTexCoord()&&this.getMagFilter()===e.getMagFilter()&&this.getMinFilter()===e.getMinFilter()&&this.getWrapS()===e.getWrapS()&&this.getWrapT()===e.getWrapT()}getTexCoord(){return this.V}setTexCoord(e){return this.V=e,this}getMagFilter(){return this.W}setMagFilter(e){return this.W=e,this}getMinFilter(){return this.q}setMinFilter(e){return this.q=e,this}getWrapS(){return this.Y}setWrapS(e){return this.Y=e,this}getWrapT(){return this.H}setWrapT(e){return this.H=e,this}}Z.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Z.MagFilter={NEAREST:9728,LINEAR:9729},Z.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:K,G:X,B:J,A:Q}=o;class ee extends N{constructor(){super(...arguments),this.propertyType=s.MATERIAL,this.Z=ee.AlphaMode.OPAQUE,this.K=.5,this.X=!1,this.tt=[1,1,1,1],this.st=[0,0,0],this.et=1,this.it=1,this.rt=1,this.nt=1,this.baseColorTexture=null,this.baseColorTextureInfo=this.graph.link("baseColorTextureInfo",this,new Z(this.graph)),this.emissiveTexture=null,this.emissiveTextureInfo=this.graph.link("emissiveTextureInfo",this,new Z(this.graph)),this.normalTexture=null,this.normalTextureInfo=this.graph.link("normalTextureInfo",this,new Z(this.graph)),this.occlusionTexture=null,this.occlusionTextureInfo=this.graph.link("occlusionTextureInfo",this,new Z(this.graph)),this.metallicRoughnessTexture=null,this.metallicRoughnessTextureInfo=this.graph.link("metallicRoughnessTextureInfo",this,new Z(this.graph))}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.Z=e.Z,this.K=e.K,this.X=e.X,this.tt=[...e.tt],this.st=[...e.st],this.et=e.et,this.it=e.it,this.rt=e.rt,this.nt=e.nt,this.setBaseColorTexture(e.baseColorTexture?t(e.baseColorTexture.getChild()):null),this.baseColorTextureInfo.getChild().copy(t(e.baseColorTextureInfo.getChild()),t),this.setEmissiveTexture(e.emissiveTexture?t(e.emissiveTexture.getChild()):null),this.emissiveTextureInfo.getChild().copy(t(e.emissiveTextureInfo.getChild()),t),this.setNormalTexture(e.normalTexture?t(e.normalTexture.getChild()):null),this.normalTextureInfo.getChild().copy(t(e.normalTextureInfo.getChild()),t),this.setOcclusionTexture(e.occlusionTexture?t(e.occlusionTexture.getChild()):null),this.occlusionTextureInfo.getChild().copy(t(e.occlusionTextureInfo.getChild()),t),this.setMetallicRoughnessTexture(e.metallicRoughnessTexture?t(e.metallicRoughnessTexture.getChild()):null),this.metallicRoughnessTextureInfo.getChild().copy(t(e.metallicRoughnessTextureInfo.getChild()),t),this}equals(e){if(this.getAlphaMode()!==e.getAlphaMode()||this.getAlphaCutoff()!==e.getAlphaCutoff()||this.getDoubleSided()!==e.getDoubleSided()||!k.eq(this.getBaseColorFactor(),e.getBaseColorFactor())||!k.eq(this.getEmissiveFactor(),e.getEmissiveFactor())||this.getNormalScale()!==e.getNormalScale()||this.getOcclusionStrength()!==e.getOcclusionStrength()||this.getRoughnessFactor()!==e.getRoughnessFactor()||this.getMetallicFactor()!==e.getMetallicFactor()||(this.getBaseColorTexture()||e.getBaseColorTexture())&&(this.getBaseColorTexture()!==e.getBaseColorTexture()||this.getBaseColorTexture()&&!this.getBaseColorTextureInfo().equals(e.getBaseColorTextureInfo()))||(this.getEmissiveTexture()||e.getEmissiveTexture())&&(this.getEmissiveTexture()!==e.getEmissiveTexture()||this.getEmissiveTexture()&&!this.getEmissiveTextureInfo().equals(e.getEmissiveTextureInfo()))||(this.getNormalTexture()||e.getNormalTexture())&&(this.getNormalTexture()!==e.getNormalTexture()||this.getNormalTexture()&&!this.getNormalTextureInfo().equals(e.getNormalTextureInfo()))||(this.getOcclusionTexture()||e.getOcclusionTexture())&&(this.getOcclusionTexture()!==e.getOcclusionTexture()||this.getOcclusionTexture()&&!this.getOcclusionTextureInfo().equals(e.getOcclusionTextureInfo()))||(this.getMetallicRoughnessTexture()||e.getMetallicRoughnessTexture())&&(this.getMetallicRoughnessTexture()!==e.getMetallicRoughnessTexture()||this.getMetallicRoughnessTexture()&&!this.getMetallicRoughnessTextureInfo().equals(e.getMetallicRoughnessTextureInfo())))return!1;const t=this.listExtensions(),n=e.listExtensions();if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}dispose(){this.baseColorTextureInfo.getChild().dispose(),this.emissiveTextureInfo.getChild().dispose(),this.normalTextureInfo.getChild().dispose(),this.occlusionTextureInfo.getChild().dispose(),this.metallicRoughnessTextureInfo.getChild().dispose(),super.dispose()}getDoubleSided(){return this.X}setDoubleSided(e){return this.X=e,this}getAlpha(){return this.tt[3]}setAlpha(e){return this.tt[3]=e,this}getAlphaMode(){return this.Z}setAlphaMode(e){return this.Z=e,this}getAlphaCutoff(){return this.K}setAlphaCutoff(e){return this.K=e,this}getBaseColorFactor(){return this.tt}setBaseColorFactor(e){return this.tt=e,this}getBaseColorHex(){return S.factorToHex(this.tt)}setBaseColorHex(e){return S.hexToFactor(e,this.tt),this}getBaseColorTexture(){return this.baseColorTexture?this.baseColorTexture.getChild():null}getBaseColorTextureInfo(){return this.baseColorTexture?this.baseColorTextureInfo.getChild():null}setBaseColorTexture(e){return this.baseColorTexture=this.graph.linkTexture("baseColorTexture",K|X|J|Q,this,e),this}getEmissiveFactor(){return this.st}setEmissiveFactor(e){return this.st=e,this}getEmissiveHex(){return S.factorToHex(this.st)}setEmissiveHex(e){return S.hexToFactor(e,this.st),this}getEmissiveTexture(){return this.emissiveTexture?this.emissiveTexture.getChild():null}getEmissiveTextureInfo(){return this.emissiveTexture?this.emissiveTextureInfo.getChild():null}setEmissiveTexture(e){return this.emissiveTexture=this.graph.linkTexture("emissiveTexture",K|X|J,this,e),this}getNormalScale(){return this.et}setNormalScale(e){return this.et=e,this}getNormalTexture(){return this.normalTexture?this.normalTexture.getChild():null}getNormalTextureInfo(){return this.normalTexture?this.normalTextureInfo.getChild():null}setNormalTexture(e){return this.normalTexture=this.graph.linkTexture("normalTexture",K|X|J,this,e),this}getOcclusionStrength(){return this.it}setOcclusionStrength(e){return this.it=e,this}getOcclusionTexture(){return this.occlusionTexture?this.occlusionTexture.getChild():null}getOcclusionTextureInfo(){return this.occlusionTexture?this.occlusionTextureInfo.getChild():null}setOcclusionTexture(e){return this.occlusionTexture=this.graph.linkTexture("occlusionTexture",K,this,e),this}getRoughnessFactor(){return this.rt}setRoughnessFactor(e){return this.rt=e,this}getMetallicFactor(){return this.nt}setMetallicFactor(e){return this.nt=e,this}getMetallicRoughnessTexture(){return this.metallicRoughnessTexture?this.metallicRoughnessTexture.getChild():null}getMetallicRoughnessTextureInfo(){return this.metallicRoughnessTexture?this.metallicRoughnessTextureInfo.getChild():null}setMetallicRoughnessTexture(e){return this.metallicRoughnessTexture=this.graph.linkTexture("metallicRoughnessTexture",X|J,this,e),this}}ee.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},v([b],ee.prototype,"baseColorTexture",void 0),v([b],ee.prototype,"baseColorTextureInfo",void 0),v([b],ee.prototype,"emissiveTexture",void 0),v([b],ee.prototype,"emissiveTextureInfo",void 0),v([b],ee.prototype,"normalTexture",void 0),v([b],ee.prototype,"normalTextureInfo",void 0),v([b],ee.prototype,"occlusionTexture",void 0),v([b],ee.prototype,"occlusionTextureInfo",void 0),v([b],ee.prototype,"metallicRoughnessTexture",void 0),v([b],ee.prototype,"metallicRoughnessTextureInfo",void 0);class te extends N{constructor(){super(...arguments),this.propertyType=s.MESH,this.ht=[],this.primitives=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.ht=[...e.ht],this.clearGraphChildList(this.primitives),e.primitives.forEach(e=>this.addPrimitive(t(e.getChild()))),this}addPrimitive(e){return this.addGraphChild(this.primitives,this.graph.link("primitive",this,e))}removePrimitive(e){return this.removeGraphChild(this.primitives,e)}listPrimitives(){return this.primitives.map(e=>e.getChild())}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}}v([x],te.prototype,"primitives",void 0);class ne extends N{constructor(){super(...arguments),this.propertyType=s.NODE,this.ot=[0,0,0],this.ut=[0,0,0,1],this.ct=[1,1,1],this.ht=[],this.i=null,this.camera=null,this.mesh=null,this.skin=null,this.children=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.ot=[...e.ot],this.ut=[...e.ut],this.ct=[...e.ct],this.ht=[...e.ht],this.setCamera(e.camera?t(e.camera.getChild()):null),this.setMesh(e.mesh?t(e.mesh.getChild()):null),this.setSkin(e.skin?t(e.skin.getChild()):null),t!==L&&(this.clearGraphChildList(this.children),e.children.forEach(e=>this.addChild(t(e.getChild())))),this}getTranslation(){return this.ot}getRotation(){return this.ut}getScale(){return this.ct}setTranslation(e){return this.ot=e,this}setRotation(e){return this.ut=e,this}setScale(e){return this.ct=e,this}getMatrix(){return k.compose(this.ot,this.ut,this.ct,[])}setMatrix(e){return k.decompose(e,this.ot,this.ut,this.ct),this}getWorldTranslation(){const e=[0,0,0];return k.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return k.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return k.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let r=this;r instanceof ne;r=r.i)e.push(r);let t;const n=e.pop().getMatrix();for(;t=e.pop();)g(n,n,t.getMatrix());return n}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}getParent(){return this.i}getMesh(){return this.mesh?this.mesh.getChild():null}setMesh(e){return this.mesh=this.graph.link("mesh",this,e),this}getCamera(){return this.camera?this.camera.getChild():null}setCamera(e){return this.camera=this.graph.link("camera",this,e),this}getSkin(){return this.skin?this.skin.getChild():null}setSkin(e){return this.skin=this.graph.link("skin",this,e),this}getWeights(){return this.ht}setWeights(e){return this.ht=e,this}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}}v([b],ne.prototype,"camera",void 0),v([b],ne.prototype,"mesh",void 0),v([b],ne.prototype,"skin",void 0),v([x],ne.prototype,"children",void 0);class re extends N{constructor(){super(...arguments),this.propertyType=s.PRIMITIVE,this.at=re.Mode.TRIANGLES,this.material=null,this.indices=null,this.attributes=[],this.targets=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.at=e.at,this.setIndices(e.indices?t(e.indices.getChild()):null),this.setMaterial(e.material?t(e.material.getChild()):null),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(n=>{this.setAttribute(n,t(e.getAttribute(n)))}),this.clearGraphChildList(this.targets),e.targets.forEach(e=>this.addTarget(t(e.getChild()))),this}getIndices(){return this.indices?this.indices.getChild():null}setIndices(e){return this.indices=this.graph.linkIndex("indices",this,e),this}getAttribute(e){const t=this.attributes.find(t=>t.semantic===e);return t?t.getChild():null}setAttribute(e,t){const n=this.getAttribute(e);if(n&&this.removeGraphChild(this.attributes,n),!t)return this;const r=this.graph.linkAttribute(e,this,t);return this.addGraphChild(this.attributes,r)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}getMaterial(){return this.material?this.material.getChild():null}setMaterial(e){return this.material=this.graph.link("material",this,e),this}getMode(){return this.at}setMode(e){return this.at=e,this}listTargets(){return this.targets.map(e=>e.getChild())}addTarget(e){return this.addGraphChild(this.targets,this.graph.link("target",this,e)),this}removeTarget(e){return this.removeGraphChild(this.targets,e)}}re.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},v([b],re.prototype,"material",void 0),v([b],re.prototype,"indices",void 0),v([x],re.prototype,"attributes",void 0),v([x],re.prototype,"targets",void 0);class ie extends P{constructor(){super(...arguments),this.propertyType=s.PRIMITIVE_TARGET,this.attributes=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.clearGraphChildList(this.attributes),e.listSemantics().forEach(n=>{this.setAttribute(n,t(e.getAttribute(n)))}),this}getAttribute(e){const t=this.attributes.find(t=>t.semantic===e);return t?t.getChild():null}setAttribute(e,t){const n=this.getAttribute(e);if(n&&this.removeGraphChild(this.attributes,n),!t)return this;const r=this.graph.linkAttribute(e,this,t);return r.semantic=e,this.addGraphChild(this.attributes,r)}listAttributes(){return this.attributes.map(e=>e.getChild())}listSemantics(){return this.attributes.map(e=>e.semantic)}}v([x],ie.prototype,"attributes",void 0);class se extends N{constructor(){super(...arguments),this.propertyType=s.SCENE,this.children=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),t!==L&&(this.clearGraphChildList(this.children),e.children.forEach(e=>this.addChild(t(e.getChild())))),this}addChild(e){e.i&&e.i.removeChild(e);const t=this.graph.link("child",this,e);return this.addGraphChild(this.children,t),e.i=this,t.onDispose(()=>e.i=null),this}removeChild(e){return this.removeGraphChild(this.children,e)}listChildren(){return this.children.map(e=>e.getChild())}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}}v([x],se.prototype,"children",void 0);class ae extends N{constructor(){super(...arguments),this.propertyType=s.SKIN,this.skeleton=null,this.inverseBindMatrices=null,this.joints=[]}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.setSkeleton(e.skeleton?t(e.skeleton.getChild()):null),this.setInverseBindMatrices(e.inverseBindMatrices?t(e.inverseBindMatrices.getChild()):null),this.clearGraphChildList(this.joints),e.joints.forEach(e=>this.addJoint(t(e.getChild()))),this}getSkeleton(){return this.skeleton?this.skeleton.getChild():null}setSkeleton(e){return this.skeleton=this.graph.link("skeleton",this,e),this}getInverseBindMatrices(){return this.inverseBindMatrices?this.inverseBindMatrices.getChild():null}setInverseBindMatrices(e){return this.inverseBindMatrices=this.graph.link("inverseBindMatrices",this,e),this}addJoint(e){const t=this.graph.link("joint",this,e);return this.addGraphChild(this.joints,t)}removeJoint(e){return this.removeGraphChild(this.joints,e)}listJoints(){return this.joints.map(e=>e.getChild())}}v([b],ae.prototype,"skeleton",void 0),v([b],ae.prototype,"inverseBindMatrices",void 0),v([x],ae.prototype,"joints",void 0);class oe extends N{constructor(){super(...arguments),this.propertyType=s.TEXTURE,this.lt=null,this.ft="",this.P=""}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return super.copy(e,t),this.ft=e.ft,this.P=e.P,e.lt&&(this.lt=e.lt.slice(0)),this}getMimeType(){return this.ft||E.extensionToMimeType(C.extension(this.P))}setMimeType(e){return this.ft=e,this}getURI(){return this.P}setURI(e){return this.P=e,this.ft=E.extensionToMimeType(C.extension(e)),this}getImage(){return this.lt}setImage(e){return this.lt=e,this}getSize(){return this.lt?E.getSize(this.lt,this.getMimeType()):null}}class le extends P{constructor(e){super(e),this.propertyType=s.ROOT,this.dt={generator:"glTF-Transform v1.2.4",version:"2.0"},this.gt=new Set,this.defaultScene=null,this.accessors=[],this.animations=[],this.buffers=[],this.cameras=[],this.materials=[],this.meshes=[],this.nodes=[],this.scenes=[],this.skins=[],this.textures=[],e.on("clone",e=>this.wt(e))}clone(){throw new Error("Root cannot be cloned.")}copy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;if(super.copy(e,t),t===L)throw new Error("Root cannot be copied.");return Object.assign(this.dt,e.dt),e.accessors.forEach(e=>this.vt(t(e.getChild()))),e.animations.forEach(e=>this.Tt(t(e.getChild()))),e.buffers.forEach(e=>this.yt(t(e.getChild()))),e.cameras.forEach(e=>this.At(t(e.getChild()))),e.materials.forEach(e=>this.Et(t(e.getChild()))),e.meshes.forEach(e=>this.xt(t(e.getChild()))),e.nodes.forEach(e=>this.St(t(e.getChild()))),e.scenes.forEach(e=>this.Mt(t(e.getChild()))),e.skins.forEach(e=>this.It(t(e.getChild()))),e.textures.forEach(e=>this.bt(t(e.getChild()))),this.setDefaultScene(e.defaultScene?t(e.defaultScene.getChild()):null),this}wt(e){return e instanceof se?this.Mt(e):e instanceof ne?this.St(e):e instanceof U?this.At(e):e instanceof ae?this.It(e):e instanceof te?this.xt(e):e instanceof ee?this.Et(e):e instanceof oe?this.bt(e):e instanceof F?this.Tt(e):e instanceof R?this.vt(e):e instanceof V&&this.yt(e),this}getAsset(){return this.dt}listExtensionsUsed(){return Array.from(this.gt)}listExtensionsRequired(){return this.listExtensionsUsed().filter(e=>e.isRequired())}Rt(e){return this.gt.add(e),this}Nt(e){return this.gt.delete(e),this}Mt(e){return this.addGraphChild(this.scenes,this.graph.link("scene",this,e))}listScenes(){return this.scenes.map(e=>e.getChild())}setDefaultScene(e){return this.defaultScene=this.graph.link("scene",this,e),this}getDefaultScene(){return this.defaultScene?this.defaultScene.getChild():null}St(e){return this.addGraphChild(this.nodes,this.graph.link("node",this,e))}listNodes(){return this.nodes.map(e=>e.getChild())}At(e){return this.addGraphChild(this.cameras,this.graph.link("camera",this,e))}listCameras(){return this.cameras.map(e=>e.getChild())}It(e){return this.addGraphChild(this.skins,this.graph.link("skin",this,e))}listSkins(){return this.skins.map(e=>e.getChild())}xt(e){return this.addGraphChild(this.meshes,this.graph.link("mesh",this,e))}listMeshes(){return this.meshes.map(e=>e.getChild())}Et(e){return this.addGraphChild(this.materials,this.graph.link("material",this,e))}listMaterials(){return this.materials.map(e=>e.getChild())}bt(e){return this.addGraphChild(this.textures,this.graph.link("texture",this,e))}listTextures(){return this.textures.map(e=>e.getChild())}Tt(e){return this.addGraphChild(this.animations,this.graph.link("animation",this,e))}listAnimations(){return this.animations.map(e=>e.getChild())}vt(e){return this.addGraphChild(this.accessors,this.graph.link("accessor",this,e))}listAccessors(){return this.accessors.map(e=>e.getChild())}yt(e){return this.addGraphChild(this.buffers,this.graph.link("buffer",this,e))}listBuffers(){return this.buffers.map(e=>e.getChild())}}v([b],le.prototype,"defaultScene",void 0),v([x],le.prototype,"accessors",void 0),v([x],le.prototype,"animations",void 0),v([x],le.prototype,"buffers",void 0),v([x],le.prototype,"cameras",void 0),v([x],le.prototype,"materials",void 0),v([x],le.prototype,"meshes",void 0),v([x],le.prototype,"nodes",void 0),v([x],le.prototype,"scenes",void 0),v([x],le.prototype,"skins",void 0),v([x],le.prototype,"textures",void 0);class ue{constructor(){this.Ct=new q,this.Ot=new le(this.Ct),this._t=M.DEFAULT_INSTANCE}getRoot(){return this.Ot}getGraph(){return this.Ct}getLogger(){return this._t}setLogger(e){return this._t=e,this}clone(){return(new ue).merge(this).setLogger(this._t)}merge(e){const t={};for(const s of e.getRoot().listExtensionsUsed()){const e=this.createExtension(s.constructor);s.isRequired()&&e.setRequired(!0),t[e.extensionName]=e}const n=new Set,r=new Map;n.add(e.Ot),r.set(e.Ot,this.Ot);for(const a of e.Ct.getLinks())for(const e of[a.getParent(),a.getChild()]){if(n.has(e))continue;let i;if(e.propertyType===s.TEXTURE_INFO)i=e;else{const n=e.constructor;i=e instanceof H?new n(this.Ct,t[e.extensionName]):new n(this.Ct)}r.set(e,i),n.add(e)}const i=e=>{const t=r.get(e);if(!t)throw new Error("Could resolve property.");return t};for(const s of n){const e=r.get(s);if(!e)throw new Error("Could resolve property.");e.copy(s,i)}return this}async transform(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.map(e=>e.name);for(const i of t)await i(this,{stack:r});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find(e=>e.extensionName===t)||new e(this)}createScene(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new se(this.Ct,e);return this.Ot.Mt(t),t}createNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new ne(this.Ct,e);return this.Ot.St(t),t}createCamera(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new U(this.Ct,e);return this.Ot.At(t),t}createSkin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new ae(this.Ct,e);return this.Ot.It(t),t}createMesh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new te(this.Ct,e);return this.Ot.xt(t),t}createPrimitive(){return new re(this.Ct)}createPrimitiveTarget(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new ie(this.Ct,e)}createMaterial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new ee(this.Ct,e);return this.Ot.Et(t),t}createTexture(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new oe(this.Ct,e);return this.Ot.bt(t),t}createAnimation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new F(this.Ct,e);return this.Ot.Tt(t),t}createAnimationChannel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new z(this.Ct,e)}createAnimationSampler(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new j(this.Ct,e)}createAccessor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=this.getRoot().listBuffers()[0]);const n=new R(this.Ct,e).setBuffer(t);return this.Ot.vt(n),n}createBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new V(this.Ct,e);return this.Ot.yt(t),t}}function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class he{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),void 0!==t.texCoord&&e.setTexCoord(t.texCoord);const n=this.jsonDoc.json.textures[t.index];if(void 0===n.sampler)return;const r=this.jsonDoc.json.samplers[n.sampler];void 0!==r.magFilter&&e.setMagFilter(r.magFilter),void 0!==r.minFilter&&e.setMinFilter(r.minFilter),void 0!==r.wrapS&&e.setWrapS(r.wrapS),void 0!==r.wrapT&&e.setWrapT(r.wrapT)}}const de={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fe={logger:M.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function pe(e,t){const n=t.bufferViews[e.bufferView],r=t.jsonDoc.json.bufferViews[e.bufferView],i=de[e.componentType],s=R.getElementSize(e.type),a=i.BYTES_PER_ELEMENT;if(void 0!==r.byteStride&&r.byteStride!==s*a)return function(e,t){const n=t.bufferViews[e.bufferView],r=t.jsonDoc.json.bufferViews[e.bufferView],i=de[e.componentType],s=R.getElementSize(e.type),a=i.BYTES_PER_ELEMENT,o=e.byteOffset||0,l=new i(e.count*s),u=new DataView(n.buffer,n.byteOffset,n.byteLength),c=r.byteStride;for(let h=0;h<e.count;h++)for(let t=0;t<s;t++){const n=o+h*c+t*a;let r;switch(e.componentType){case R.ComponentType.FLOAT:r=u.getFloat32(n,!0);break;case R.ComponentType.UNSIGNED_INT:r=u.getUint32(n,!0);break;case R.ComponentType.UNSIGNED_SHORT:r=u.getUint16(n,!0);break;case R.ComponentType.UNSIGNED_BYTE:r=u.getUint8(n);break;case R.ComponentType.SHORT:r=u.getInt16(n,!0);break;case R.ComponentType.BYTE:r=u.getInt8(n);break;default:throw new Error('Unexpected componentType "'.concat(e.componentType,'".'))}l[h*s+t]=r}return l}(e,t);const o=n.byteOffset+(e.byteOffset||0);return new i(n.buffer.slice(o,o+e.count*s*a))}var ge,me;(function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"})(ge||(ge={})),function(e){e.ARRAY_BUFFER="ARRAY_BUFFER",e.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",e.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",e.OTHER="OTHER"}(me||(me={}));class ve{constructor(e,t,n){this.Bt=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.Lt=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.Bt=e,this.jsonDoc=t,this.options=n;const r=e.getRoot(),i=r.listBuffers().length,s=r.listTextures().length;this.bufferURIGenerator=new _e(i>1,n.basename),this.imageURIGenerator=new _e(s>1,n.basename),this.logger=e.getLogger()}createTextureInfoDef(e,t){const n={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},r=JSON.stringify(n);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(n));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},s=JSON.stringify(i);this.textureDefIndexMap.has(s)||(this.textureDefIndexMap.set(s,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const a={index:this.textureDefIndexMap.get(s)};return 0!==t.getTexCoord()&&(a.texCoord=t.getTexCoord()),this.textureInfoDefMap.set(t,a),a}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.Bt.getGraph().listParentLinks(e).some(e=>"POSITION"===e.getName()||"input"===e.getName())&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,n){if(this.options.format===l.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const r=E.mimeTypeToExtension(n.getMimeType());e.uri=this.imageURIGenerator.createURI(n,r),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.Lt.get(e);if(t)return t;for(const n of this.Bt.getGraph().listParentLinks(e)){if("inverseBindMatrices"===n.getName())return ve.BufferViewUsage.INVERSE_BIND_MATRICES;if(n instanceof G)return ve.BufferViewUsage.ARRAY_BUFFER;if(n instanceof Y)return ve.BufferViewUsage.ELEMENT_ARRAY_BUFFER}return ve.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const n=this.Lt.get(e);if(n&&n!==t)throw new Error('Accessor with usage "'.concat(n,'" cannot be reused as "').concat(t,'".'));return this.Lt.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,n]of Array.from(this.Lt.entries()))e[n]=e[n]||[],e[n].push(t);return e}}ve.BufferViewTarget=ge,ve.BufferViewUsage=me,ve.USAGE_TO_TARGET={[me.ARRAY_BUFFER]:ge.ARRAY_BUFFER,[me.ELEMENT_ARRAY_BUFFER]:ge.ELEMENT_ARRAY_BUFFER};class _e{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=e,this.basename=t}createURI(e,t){return e.getURI()?e.getURI():this.multiple?"".concat(this.basename,"_").concat(this.counter++,".").concat(t):"".concat(this.basename,".").concat(t)}}const{BufferViewUsage:ye}=ve;var be;!function(e){e[e.JSON=1313821514]="JSON",e[e.BIN=5130562]="BIN"}(be||(be={}));class xe{constructor(){this._t=M.DEFAULT_INSTANCE,this.gt=new Set,this.Pt={},this.Ut=a.INTERLEAVED}setLogger(e){return this._t=e,this}registerExtensions(e){for(const t of e)this.gt.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.Pt,e),this}setVertexLayout(e){return this.Ut=e,this}kt(e){function t(t){if(t.uri&&!(t.uri in e.resources)&&t.uri.match(/data:/)){const n="__".concat(function(){for(let e=0;e<999;e++){const e=O();if(!I.has(e))return I.add(e),e}return""}(),".").concat(C.extension(t.uri));e.resources[n]=w.createBufferFromDataURI(t.uri),t.uri=n}}(e.json.images||[]).forEach(e=>{if(void 0===e.bufferView&&void 0===e.uri)throw new Error("Missing resource URI or buffer view.");t(e)}),(e.json.buffers||[]).forEach(t)}readJSON(e){return e=this.Ft(e),this.kt(e),class{static read(e){const t=ce({},fe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe),{json:n}=e,r=new ue;this.validate(e,t);const i=new he(e),a=n.asset,o=r.getRoot().getAsset();a.copyright&&(o.copyright=a.copyright),a.extras&&(o.extras=a.extras),void 0!==n.extras&&r.getRoot().setExtras(ce({},n.extras));const l=n.extensionsUsed||[],u=n.extensionsRequired||[];for(const s of t.extensions)if(l.includes(s.EXTENSION_NAME)){const e=r.createExtension(s).setRequired(u.includes(s.EXTENSION_NAME));for(const n of e.readDependencies)e.install(n,t.dependencies[n])}const c=n.buffers||[];r.getRoot().listExtensionsUsed().filter(e=>e.prereadTypes.includes(s.BUFFER)).forEach(e=>e.preread(i,s.BUFFER)),i.buffers=c.map(e=>{const t=r.createBuffer(e.name);return e.extras&&t.setExtras(e.extras),e.uri&&0!==e.uri.indexOf("__")&&t.setURI(e.uri),t}),i.bufferViewBuffers=(n.bufferViews||[]).map((t,n)=>{if(!i.bufferViews[n]){const r=e.json.buffers[t.buffer],s=new Uint8Array(r.uri?e.resources[r.uri]:e.resources["@glb.bin"],t.byteOffset||0,t.byteLength);i.bufferViews[n]=s}return i.buffers[t.buffer]}),i.accessors=(n.accessors||[]).map(e=>{const t=r.createAccessor(e.name,i.bufferViewBuffers[e.bufferView]).setType(e.type);if(e.extras&&t.setExtras(e.extras),void 0!==e.normalized&&t.setNormalized(e.normalized),void 0===e.bufferView&&!e.sparse)return t;let n;return n=void 0!==e.sparse?function(e,t){const n=de[e.componentType],r=R.getElementSize(e.type);let i;i=void 0!==e.bufferView?pe(e,t):new n(e.count*r);const s=e.sparse,a=s.count,o=ce({},e,s.indices,{count:a,type:"SCALAR"}),l=ce({},e,s.values,{count:a}),u=pe(o,t),c=pe(l,t);for(let h=0;h<o.count;h++)for(let e=0;e<r;e++)i[u[h]*r+e]=c[h*r+e];return i}(e,i):pe(e,i),t.setArray(n),t});const h=n.images||[],d=n.textures||[];r.getRoot().listExtensionsUsed().filter(e=>e.prereadTypes.includes(s.TEXTURE)).forEach(e=>e.preread(i,s.TEXTURE)),i.textures=h.map(t=>{const i=r.createTexture(t.name);if(t.extras&&i.setExtras(t.extras),void 0!==t.bufferView){const r=n.bufferViews[t.bufferView],s=e.json.buffers[r.buffer],a=r.byteOffset||0,o=(s.uri?e.resources[s.uri]:e.resources["@glb.bin"]).slice(a,a+r.byteLength);i.setImage(o)}else void 0!==t.uri&&(i.setImage(e.resources[t.uri]),0!==t.uri.indexOf("__")&&i.setURI(t.uri));if(void 0!==t.mimeType)i.setMimeType(t.mimeType);else if(t.uri){const e=C.extension(t.uri);i.setMimeType(E.extensionToMimeType(e))}return i}),i.materials=(n.materials||[]).map(e=>{const t=r.createMaterial(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.alphaMode&&t.setAlphaMode(e.alphaMode),void 0!==e.alphaCutoff&&t.setAlphaCutoff(e.alphaCutoff),void 0!==e.doubleSided&&t.setDoubleSided(e.doubleSided);const n=e.pbrMetallicRoughness||{};if(void 0!==n.baseColorFactor&&t.setBaseColorFactor(n.baseColorFactor),void 0!==e.emissiveFactor&&t.setEmissiveFactor(e.emissiveFactor),void 0!==n.metallicFactor&&t.setMetallicFactor(n.metallicFactor),void 0!==n.roughnessFactor&&t.setRoughnessFactor(n.roughnessFactor),void 0!==n.baseColorTexture){const e=n.baseColorTexture;t.setBaseColorTexture(i.textures[d[e.index].source]),i.setTextureInfo(t.getBaseColorTextureInfo(),e)}if(void 0!==e.emissiveTexture){const n=e.emissiveTexture;t.setEmissiveTexture(i.textures[d[n.index].source]),i.setTextureInfo(t.getEmissiveTextureInfo(),n)}if(void 0!==e.normalTexture){const n=e.normalTexture;t.setNormalTexture(i.textures[d[n.index].source]),i.setTextureInfo(t.getNormalTextureInfo(),n),void 0!==e.normalTexture.scale&&t.setNormalScale(e.normalTexture.scale)}if(void 0!==e.occlusionTexture){const n=e.occlusionTexture;t.setOcclusionTexture(i.textures[d[n.index].source]),i.setTextureInfo(t.getOcclusionTextureInfo(),n),void 0!==e.occlusionTexture.strength&&t.setOcclusionStrength(e.occlusionTexture.strength)}if(void 0!==n.metallicRoughnessTexture){const e=n.metallicRoughnessTexture;t.setMetallicRoughnessTexture(i.textures[d[e.index].source]),i.setTextureInfo(t.getMetallicRoughnessTextureInfo(),e)}return t});const f=n.meshes||[];r.getRoot().listExtensionsUsed().filter(e=>e.prereadTypes.includes(s.PRIMITIVE)).forEach(e=>e.preread(i,s.PRIMITIVE)),i.meshes=f.map(e=>{const t=r.createMesh(e.name);return e.extras&&t.setExtras(e.extras),void 0!==e.weights&&t.setWeights(e.weights),(e.primitives||[]).forEach(n=>{const s=r.createPrimitive();n.extras&&s.setExtras(n.extras),void 0!==n.material&&s.setMaterial(i.materials[n.material]),void 0!==n.mode&&s.setMode(n.mode);for(const[e,t]of Object.entries(n.attributes||{}))s.setAttribute(e,i.accessors[t]);void 0!==n.indices&&s.setIndices(i.accessors[n.indices]);const a=e.extras&&e.extras.targetNames||[];(n.targets||[]).forEach((e,t)=>{const n=a[t]||t.toString(),o=r.createPrimitiveTarget(n);for(const[r,s]of Object.entries(e))o.setAttribute(r,i.accessors[s]);s.addTarget(o)}),t.addPrimitive(s)}),t}),i.cameras=(n.cameras||[]).map(e=>{const t=r.createCamera(e.name).setType(e.type);if(e.extras&&t.setExtras(e.extras),e.type===U.Type.PERSPECTIVE){const n=e.perspective;t.setYFov(n.yfov),t.setZNear(n.znear),void 0!==n.zfar&&t.setZFar(n.zfar),void 0!==n.aspectRatio&&t.setAspectRatio(n.aspectRatio)}else{const n=e.orthographic;t.setZNear(n.znear).setZFar(n.zfar).setXMag(n.xmag).setYMag(n.ymag)}return t});const p=n.nodes||[];r.getRoot().listExtensionsUsed().filter(e=>e.prereadTypes.includes(s.NODE)).forEach(e=>e.preread(i,s.NODE)),i.nodes=p.map(e=>{const t=r.createNode(e.name);if(e.extras&&t.setExtras(e.extras),void 0!==e.translation&&t.setTranslation(e.translation),void 0!==e.rotation&&t.setRotation(e.rotation),void 0!==e.scale&&t.setScale(e.scale),void 0!==e.matrix){const n=[0,0,0],r=[0,0,0,1],i=[1,1,1];k.decompose(e.matrix,n,r,i),t.setTranslation(n),t.setRotation(r),t.setScale(i)}return void 0!==e.weights&&t.setWeights(e.weights),t}),i.skins=(n.skins||[]).map(e=>{const t=r.createSkin(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.inverseBindMatrices&&t.setInverseBindMatrices(i.accessors[e.inverseBindMatrices]),void 0!==e.skeleton&&t.setSkeleton(i.nodes[e.skeleton]);for(const n of e.joints)t.addJoint(i.nodes[n]);return t}),p.map((e,t)=>{const n=i.nodes[t];(e.children||[]).forEach(e=>n.addChild(i.nodes[e])),void 0!==e.mesh&&n.setMesh(i.meshes[e.mesh]),void 0!==e.camera&&n.setCamera(i.cameras[e.camera]),void 0!==e.skin&&n.setSkin(i.skins[e.skin])}),i.animations=(n.animations||[]).map(e=>{const t=r.createAnimation(e.name);e.extras&&t.setExtras(e.extras);const n=(e.samplers||[]).map(e=>{const n=r.createAnimationSampler().setInput(i.accessors[e.input]).setOutput(i.accessors[e.output]).setInterpolation(e.interpolation||j.Interpolation.LINEAR);return e.extras&&n.setExtras(e.extras),t.addSampler(n),n});return(e.channels||[]).forEach(e=>{const s=r.createAnimationChannel().setSampler(n[e.sampler]).setTargetNode(i.nodes[e.target.node]).setTargetPath(e.target.path);e.extras&&s.setExtras(e.extras),t.addChannel(s)}),t});const g=n.scenes||[];return r.getRoot().listExtensionsUsed().filter(e=>e.prereadTypes.includes(s.SCENE)).forEach(e=>e.preread(i,s.SCENE)),i.scenes=g.map(e=>{const t=r.createScene(e.name);return e.extras&&t.setExtras(e.extras),(e.nodes||[]).map(e=>i.nodes[e]).forEach(e=>t.addChild(e)),t}),void 0!==n.scene&&r.getRoot().setDefaultScene(i.scenes[n.scene]),r.getRoot().listExtensionsUsed().forEach(e=>e.read(i)),r}static validate(e,t){const n=e.json;if("2.0"!==n.asset.version)throw new Error('Unsupported glTF version, "'.concat(n.asset.version,'".'));if(n.extensionsRequired)for(const r of n.extensionsRequired)if(!t.extensions.find(e=>e.EXTENSION_NAME===r))throw new Error('Missing required extension, "'.concat(r,'".'));if(n.extensionsUsed)for(const r of n.extensionsUsed)t.extensions.find(e=>e.EXTENSION_NAME===r)||t.logger.warn('Missing optional extension, "'.concat(r,'".'))}}.read(e,{extensions:Array.from(this.gt),dependencies:this.Pt,logger:this._t})}writeJSON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.format===l.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0\u20131 buffers.");return class{static write(e,t){const n=e.getRoot(),r={asset:ce({generator:"glTF-Transform v1.2.4"},n.getAsset()),extras:ce({},n.getExtras())},i={json:r,resources:{}},o=new ve(e,i,t),u=t.logger||M.DEFAULT_INSTANCE,c=new Set(t.extensions.map(e=>e.EXTENSION_NAME)),h=e.getRoot().listExtensionsUsed().filter(e=>c.has(e.extensionName)),d=e.getRoot().listExtensionsRequired().filter(e=>c.has(e.extensionName));h.length<e.getRoot().listExtensionsUsed().length&&u.debug("Some extensions were not registered for I/O, and will not be written.");for(const s of h)for(const e of s.writeDependencies)s.install(e,t.dependencies[e]);function f(e,t,n,i){const s=[];let a=0;for(const u of e){const e=o.createAccessorDef(u);e.bufferView=r.bufferViews.length;const t=w.pad(u.getArray().buffer);e.byteOffset=a,a+=t.byteLength,s.push(t),o.accessorIndexMap.set(u,r.accessors.length),r.accessors.push(e)}const l={buffer:t,byteOffset:n,byteLength:w.concat(s).byteLength};return i&&(l.target=i),r.bufferViews.push(l),{buffers:s,byteLength:a}}function p(e,t,n){const i=e[0].getCount();let s=0;for(const c of e){const e=o.createAccessorDef(c);e.bufferView=r.bufferViews.length,e.byteOffset=s;const t=c.getElementSize(),n=c.getComponentSize();s+=w.padNumber(t*n),o.accessorIndexMap.set(c,r.accessors.length),r.accessors.push(e)}const a=i*s,l=new ArrayBuffer(a),u=new DataView(l);for(let r=0;r<i;r++){let t=0;for(const n of e){const e=n.getElementSize(),i=n.getComponentSize(),a=n.getComponentType(),o=n.getArray();for(let n=0;n<e;n++){const l=r*s+t+n*i,c=o[r*e+n];switch(a){case R.ComponentType.FLOAT:u.setFloat32(l,c,!0);break;case R.ComponentType.BYTE:u.setInt8(l,c);break;case R.ComponentType.SHORT:u.setInt16(l,c,!0);break;case R.ComponentType.UNSIGNED_BYTE:u.setUint8(l,c);break;case R.ComponentType.UNSIGNED_SHORT:u.setUint16(l,c,!0);break;case R.ComponentType.UNSIGNED_INT:u.setUint32(l,c,!0);break;default:throw new Error("Unexpected component type: "+a)}}t+=w.padNumber(e*i)}}return r.bufferViews.push({buffer:t,byteOffset:n,byteLength:a,byteStride:s,target:ve.BufferViewTarget.ARRAY_BUFFER}),{byteLength:a,buffers:[l]}}const g=new Map;for(const s of e.getGraph().getLinks()){if(s.getParent()===n)continue;const e=s.getChild();if(e instanceof R){const t=g.get(e)||[];t.push(s),g.set(e,t)}}if(r.accessors=[],r.bufferViews=[],r.samplers=[],r.textures=[],r.images=n.listTextures().map((e,t)=>{const n=o.createPropertyDef(e);e.getMimeType()&&(n.mimeType=e.getMimeType());const r=e.getImage();return r&&o.createImageData(n,r,e),o.imageIndexMap.set(e,t),n}),h.filter(e=>e.prewriteTypes.includes(s.ACCESSOR)).forEach(e=>e.prewrite(o,s.ACCESSOR)),n.listAccessors().forEach(e=>{const t=o.accessorUsageGroupedByParent,n=o.accessorParents;if(o.accessorIndexMap.has(e))return;const r=g.get(e)||[],i=o.getAccessorUsage(e);if(o.addAccessorToUsageGroup(e,i),t.has(i)){const t=r[0].getParent(),i=n.get(t)||new Set;i.add(e),n.set(t,i)}}),h.filter(e=>e.prewriteTypes.includes(s.BUFFER)).forEach(e=>e.prewrite(o,s.BUFFER)),(n.listAccessors().length>0||n.listTextures().length>0||o.otherBufferViews.size>0)&&0===n.listBuffers().length)throw new Error("Buffer required for Document resources, but none was found.");r.buffers=[],n.listBuffers().forEach((e,n)=>{const s=o.createPropertyDef(e),u=o.accessorUsageGroupedByParent,c=o.accessorParents,h=e.listParents().filter(e=>e instanceof R),d=new Set(h),g=[],m=r.buffers.length;let v=0;const _=o.listAccessorUsageGroups();for(const r in _)if(u.has(r))for(const e of Array.from(c.values())){const n=Array.from(e).filter(e=>d.has(e)).filter(e=>o.getAccessorUsage(e)===r);if(n.length)if(r!==ye.ARRAY_BUFFER||t.vertexLayout===a.INTERLEAVED){const e=r===ye.ARRAY_BUFFER?p(n,m,v):f(n,m,v);v+=e.byteLength,g.push(...e.buffers)}else for(const e of n){const t=p([e],m,v);v+=t.byteLength,g.push(...t.buffers)}}else{const e=_[r].filter(e=>d.has(e));if(!e.length)continue;const t=f(e,m,v,r===ye.ELEMENT_ARRAY_BUFFER?ve.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);v+=t.byteLength,g.push(...t.buffers)}if(o.imageBufferViews.length&&0===n)for(let t=0;t<o.imageBufferViews.length;t++)if(r.bufferViews[r.images[t].bufferView].byteOffset=v,v+=o.imageBufferViews[t].byteLength,g.push(o.imageBufferViews[t]),v%8){const e=8-v%8;v+=e,g.push(new ArrayBuffer(e))}if(o.otherBufferViews.has(e))for(const t of o.otherBufferViews.get(e))r.bufferViews.push({buffer:m,byteOffset:v,byteLength:t.byteLength}),o.otherBufferViewsIndexMap.set(t,r.bufferViews.length-1),v+=t.byteLength,g.push(t);if(v){let n;t.format===l.GLB?n="@glb.bin":(n=o.bufferURIGenerator.createURI(e,"bin"),s.uri=n),s.byteLength=v,i.resources[n]=w.concat(g)}r.buffers.push(s),o.bufferIndexMap.set(e,n)}),n.listAccessors().find(e=>!e.getBuffer())&&u.warn("Skipped writing one or more Accessors: no Buffer assigned."),r.materials=n.listMaterials().map((e,t)=>{const n=o.createPropertyDef(e);if(e.getAlphaMode()!==ee.AlphaMode.OPAQUE&&(n.alphaMode=e.getAlphaMode()),e.getAlphaMode()===ee.AlphaMode.MASK&&(n.alphaCutoff=e.getAlphaCutoff()),e.getDoubleSided()&&(n.doubleSided=!0),n.pbrMetallicRoughness={},k.eq(e.getBaseColorFactor(),[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=e.getBaseColorFactor()),k.eq(e.getEmissiveFactor(),[0,0,0])||(n.emissiveFactor=e.getEmissiveFactor()),1!==e.getRoughnessFactor()&&(n.pbrMetallicRoughness.roughnessFactor=e.getRoughnessFactor()),1!==e.getMetallicFactor()&&(n.pbrMetallicRoughness.metallicFactor=e.getMetallicFactor()),e.getBaseColorTexture()){const t=e.getBaseColorTexture(),r=e.getBaseColorTextureInfo();n.pbrMetallicRoughness.baseColorTexture=o.createTextureInfoDef(t,r)}if(e.getEmissiveTexture()){const t=e.getEmissiveTexture(),r=e.getEmissiveTextureInfo();n.emissiveTexture=o.createTextureInfoDef(t,r)}if(e.getNormalTexture()){const t=e.getNormalTexture(),r=e.getNormalTextureInfo(),i=o.createTextureInfoDef(t,r);1!==e.getNormalScale()&&(i.scale=e.getNormalScale()),n.normalTexture=i}if(e.getOcclusionTexture()){const t=e.getOcclusionTexture(),r=e.getOcclusionTextureInfo(),i=o.createTextureInfoDef(t,r);1!==e.getOcclusionStrength()&&(i.strength=e.getOcclusionStrength()),n.occlusionTexture=i}if(e.getMetallicRoughnessTexture()){const t=e.getMetallicRoughnessTexture(),r=e.getMetallicRoughnessTextureInfo();n.pbrMetallicRoughness.metallicRoughnessTexture=o.createTextureInfoDef(t,r)}return o.materialIndexMap.set(e,t),n}),r.meshes=n.listMeshes().map((e,t)=>{const n=o.createPropertyDef(e);let r=null;return n.primitives=e.listPrimitives().map(e=>{const t={attributes:{}};t.mode=e.getMode();const n=e.getMaterial();n&&(t.material=o.materialIndexMap.get(n)),Object.keys(e.getExtras()).length&&(t.extras=e.getExtras());const i=e.getIndices();i&&(t.indices=o.accessorIndexMap.get(i));for(const r of e.listSemantics())t.attributes[r]=o.accessorIndexMap.get(e.getAttribute(r));for(const r of e.listTargets()){const e={};for(const t of r.listSemantics())e[t]=o.accessorIndexMap.get(r.getAttribute(t));t.targets=t.targets||[],t.targets.push(e)}return e.listTargets().length&&!r&&(r=e.listTargets().map(e=>e.getName())),t}),e.getWeights().length&&(n.weights=e.getWeights()),r&&(n.extras=n.extras||{},n.extras.targetNames=r),o.meshIndexMap.set(e,t),n}),r.cameras=n.listCameras().map((e,t)=>{const n=o.createPropertyDef(e);if(n.type=e.getType(),n.type===U.Type.PERSPECTIVE){n.perspective={znear:e.getZNear(),zfar:e.getZFar(),yfov:e.getYFov()};const t=e.getAspectRatio();null!==t&&(n.perspective.aspectRatio=t)}else n.orthographic={znear:e.getZNear(),zfar:e.getZFar(),xmag:e.getXMag(),ymag:e.getYMag()};return o.cameraIndexMap.set(e,t),n}),r.nodes=n.listNodes().map((e,t)=>{const n=o.createPropertyDef(e);return k.eq(e.getTranslation(),[0,0,0])||(n.translation=e.getTranslation()),k.eq(e.getRotation(),[0,0,0,1])||(n.rotation=e.getRotation()),k.eq(e.getScale(),[1,1,1])||(n.scale=e.getScale()),e.getWeights().length&&(n.weights=e.getWeights()),o.nodeIndexMap.set(e,t),n}),r.skins=n.listSkins().map((e,t)=>{const n=o.createPropertyDef(e),r=e.getInverseBindMatrices();r&&(n.inverseBindMatrices=o.accessorIndexMap.get(r));const i=e.getSkeleton();return i&&(n.skeleton=o.nodeIndexMap.get(i)),n.joints=e.listJoints().map(e=>o.nodeIndexMap.get(e)),o.skinIndexMap.set(e,t),n}),n.listNodes().forEach((e,t)=>{const n=r.nodes[t],i=e.getMesh();i&&(n.mesh=o.meshIndexMap.get(i));const s=e.getCamera();s&&(n.camera=o.cameraIndexMap.get(s));const a=e.getSkin();a&&(n.skin=o.skinIndexMap.get(a)),e.listChildren().length>0&&(n.children=e.listChildren().map(e=>o.nodeIndexMap.get(e)))}),r.animations=n.listAnimations().map(e=>{const t=o.createPropertyDef(e),n=new Map;return t.samplers=e.listSamplers().map((e,t)=>{const r=o.createPropertyDef(e);return r.input=o.accessorIndexMap.get(e.getInput()),r.output=o.accessorIndexMap.get(e.getOutput()),r.interpolation=e.getInterpolation(),n.set(e,t),r}),t.channels=e.listChannels().map(e=>{const t=o.createPropertyDef(e);return t.sampler=n.get(e.getSampler()),t.target={node:o.nodeIndexMap.get(e.getTargetNode()),path:e.getTargetPath()},t}),t}),r.scenes=n.listScenes().map(e=>{const t=o.createPropertyDef(e);return t.nodes=e.listChildren().map(e=>o.nodeIndexMap.get(e)),t});const m=n.getDefaultScene();return m&&(r.scene=n.listScenes().indexOf(m)),r.extensionsUsed=h.map(e=>e.extensionName),r.extensionsRequired=d.map(e=>e.extensionName),h.forEach(e=>e.write(o)),function(e){const t=[];for(const n in e){const r=e[n];(Array.isArray(r)&&0===r.length||null===r||""===r||r&&"object"==typeof r&&0===Object.keys(r).length)&&t.push(n)}for(const n of t)delete e[n]}(r),i}}.write(e,{format:t.format||l.GLTF,basename:t.basename||"",logger:this._t,vertexLayout:this.Ut,dependencies:ce({},this.Pt),extensions:Array.from(this.gt)})}Ft(e){const{images:t,buffers:n}=e.json;return e={json:ce({},e.json),resources:ce({},e.resources)},t&&(e.json.images=t.map(e=>ce({},e))),n&&(e.json.buffers=n.map(e=>ce({},e))),e}binaryToJSON(e){const t=this.Gt(e);this.kt(t);const n=t.json;if(n.buffers&&n.buffers.some(e=>{return n=t,void 0!==(r=e).uri&&!(r.uri in n.resources);var n,r}))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(n.images&&n.images.some(e=>{return n=t,void 0!==(r=e).uri&&!(r.uri in n.resources)&&void 0===r.bufferView;var n,r}))throw new Error("Cannot resolve external images with binaryToJSON().");return t}Gt(e){const t=new Uint32Array(e,0,3);if(1179937895!==t[0])throw new Error("Invalid glTF asset.");if(2!==t[1])throw new Error('Unsupported glTF binary version, "'.concat(t[1],'".'));const n=new Uint32Array(e,12,2);if(n[1]!==be.JSON)throw new Error("Missing required GLB JSON chunk.");const r=n[0],i=w.decodeText(e.slice(20,20+r)),s=JSON.parse(i),a=20+r;if(e.byteLength<=a)return{json:s,resources:{}};const o=new Uint32Array(e,a,2);if(o[1]!==be.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:s,resources:{"@glb.bin":e.slice(a+8,a+8+o[0])}}}readBinary(e){return this.readJSON(this.binaryToJSON(e))}writeBinary(e){const{json:t,resources:n}=this.writeJSON(e,{format:l.GLB}),r=new Uint32Array([1179937895,2,12]),i=JSON.stringify(t),s=w.pad(w.encodeText(i),32),a=new Uint32Array([s.byteLength,1313821514]).buffer,o=w.concat([a,s]);r[r.length-1]+=o.byteLength;const u=Object.values(n)[0];if(!u||!u.byteLength)return w.concat([r.buffer,o]);const c=w.pad(u,0),h=new Uint32Array([c.byteLength,5130562]).buffer,d=w.concat([h,c]);return r[r.length-1]+=d.byteLength,w.concat([r.buffer,o,d])}}const we={};let Se=class extends xe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we;super(),this.qt=void 0,this.qt=e}read(e){return this.readAsJSON(e).then(e=>this.readJSON(e))}readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||new URL(e,window.location.href).pathname.match(/\.glb$/)?this.Jt(e):this.zt(e)}Wt(e,t){const n=[...e.json.images||[],...e.json.buffers||[]].map(n=>{const r=n.uri;return!r||r.match(/data:/)?Promise.resolve():fetch(function(e,t){if(/^(?:[a-zA-Z]+:)?\//.test(t))return t;const n=e.split("/"),r=t.split("/");n.pop();for(let i=0;i<r.length;i++)"."!==r[i]&&(".."===r[i]?n.pop():n.push(r[i]));return n.join("/")}(t,r),this.qt).then(e=>e.arrayBuffer()).then(t=>{e.resources[r]=t})});return Promise.all(n).then(()=>{})}zt(e){var t=this;const n={json:{},resources:{}};return fetch(e,this.qt).then(e=>e.json()).then(async function(r){return n.json=r,await t.Wt(n,Ce(e)),t.kt(n),n})}Jt(e){var t=this;return fetch(e,this.qt).then(e=>e.arrayBuffer()).then(async function(n){const r=t.Gt(n);return await t.Wt(r,Ce(e)),t.kt(r),r})}};function Ce(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}var De=Object.defineProperty,Ee=(e,t,n)=>(((e,t,n)=>{t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function ke(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Me(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var Te={exports:{}};const Ie=Me(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));!function(e){(function(t,r){var i=(t=t||Ie).window,s=t.document,a=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,i=Object.create,s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=t.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},l=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},u=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},c=function(e,t,n){if(e){var r=s(e,"length");(r&&"number"==typeof r.value?o:l).call(e,t,n=n||e)}return n};function h(t,n,r,i,o){var l={};function u(e,u){"string"==typeof(u=u||(u=s(n,e))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var c,h="function"==typeof u,f=u,p=o||h&&!u.base?u&&u.get?e in t:t[e]:null;(!o||!p)&&(h&&p&&(u.base=p),h&&!1!==i&&(c=e.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),(!f||h||!f.get||"function"!=typeof f.get||!d.isPlainObject(f))&&(f={value:f,writable:!0}),(s(t,e)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!==r&&void 0!==r?r:!c),a(t,e,f))}if(n){for(var c in n)n.hasOwnProperty(c)&&!e.test(c)&&u(c);for(var c in l){var h=l[c],f=t["set"+h],p=t["get"+h]||f&&t["is"+h];p&&(!0===i||0===p.length)&&u(c,{get:p,set:f})}}return t}function d(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&u(this,n)}return this}return h(d,{inject:function(e){if(e){var t=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;t!==e&&h(this.prototype,e,e.enumerable,n,r),h(this,t,null,n,r)}for(var i=1,s=arguments.length;i<s;i++)this.inject(arguments[i]);return this},extend:function(){for(var e,t,n,r=this,s=0,o=arguments.length;s<o&&(!e||!t);s++)n=arguments[s],e=e||n.initialize,t=t||n.prototype;return e=e||function(){r.apply(this,arguments)},t=e.prototype=t||i(this.prototype),a(t,"constructor",{value:e,writable:!0,configurable:!0}),h(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:d,set:d,inject:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var e=i(this);return e.inject.apply(e,arguments)},each:function(e,t){return c(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:i,define:a,describe:s,clone:function(e){return u(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===d||"Object"===t.name)},pick:function(e,t){return e!==r?e:t},slice:function(e,t,r){return n.call(e,t,r)}}})};e.exports=a,a.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+a.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?h.instance.number(e):"string"===n?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return a.importJSON(e,this)},exportJSON:function(e){return a.exportJSON(this,e)},toJSON:function(){return a.serialize(this)},set:function(e,t){return e&&a.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!a.exports[n]&&(a.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((n=e.length)!==t.length)return!1;for(;n--;)if(!a.equals(e[n],t[n]))return!1}else{var n,r=Object.keys(e);if((n=r.length)!==Object.keys(t).length)return!1;for(;n--;){var i=r[n];if(!t.hasOwnProperty(i)||!a.equals(e[i],t[i]))return!1}}return!0}return!1},read:function(e,t,n,i){if(this===a){var s=this.peek(e,t);return e.__index++,s}var o=this.prototype,l=o._readIndex,u=t||l&&e.__index||0,c=e.length,h=e[u];if(i=i||c-u,h instanceof this||n&&n.readNull&&null==h&&i<=1)return l&&(e.__index=u+1),h&&n&&n.clone?h.clone():h;if(h=a.create(o),l&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+i<c?a.slice(e,u,u+i):e)||h,l){e.__index=u+h.__read;var d=h.__filtered;d&&(e.__filtered=d,h.__filtered=r),h.__read=r}return h},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var i,s=[],a=t||0,o=r?a+r:e.length,l=a;l<o;l++)s.push(Array.isArray(i=e[l])?this.read(i,0,n):this.read(e,l,n,1));return s},readNamed:function(e,t,n,i,s){var o=this.getNamed(e,t),l=o!==r;if(l){var u=e.__filtered;if(!u){var c=this.getSource(e);(u=e.__filtered=a.create(c)).__unfiltered=c}u[t]=r}return this.read(l?[o]:e,n,i,s)},readSupported:function(e,t){var n=this.getSource(e),i=this,s=!1;return n&&Object.keys(n).forEach(function(n){if(n in t){var a=i.readNamed(e,n);a!==r&&(t[n]=a),s=!0}}),s},getSource:function(e){var t=e.__source;if(t===r){var n=1===e.length&&e[0];t=e.__source=n&&a.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,i){var s;function a(i){if((!n||!(i in n))&&(!s||!(i in s))){var a=t[i];a!==r&&(e[i]=a)}}if(i){for(var o,l={},u=0,c=i.length;u<c;u++)(o=i[u])in t&&(a(o),l[o]=!0);s=l}return Object.keys(t.__unfiltered||t).forEach(a),e},isPlainValue:function(e,t){return a.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,r){t=t||{};var i,s=!r;if(s&&(t.formatter=new h(t.precision),r={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,r=this.references[n];if(!r){this.length++;var i=t.call(e),s=e._class;s&&i[0]!==s&&i.unshift(s),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),e&&e._serialize){i=e._serialize(t,r);var o=e._class;o&&!e._compactSerialize&&(s||!n)&&i[0]!==o&&i.unshift(o)}else if(Array.isArray(e)){i=[];for(var l=0,u=e.length;l<u;l++)i[l]=a.serialize(e[l],t,n,r)}else if(a.isPlainObject(e)){i={};var c=Object.keys(e);for(l=0,u=c.length;l<u;l++){var d=c[l];i[d]=a.serialize(e[d],t,n,r)}}else i="number"==typeof e?t.formatter.number(e,t.precision):e;return s&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(e,t,n,r,i){var s=e,o=!n,l=o&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var u=e[0],c="dictionary"===u;if(1==e.length&&/^#/.test(u))return n.dictionary[u];s=[];for(var h=(u=a.exports[u])?1:0,d=e.length;h<d;h++)s.push(a.deserialize(e[h],t,n,c,l));if(u){var f=s;s=t?t(u,f,o||i):new u(f)}}else if(a.isPlainObject(e))for(var p in s={},r&&(n.dictionary=s),e)s[p]=a.deserialize(e[p],t,n);return l?s[1]:s},exportJSON:function(e,t){var n=a.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return a.deserialize("string"==typeof e?JSON.parse(e):e,function(e,n,r){var i=r&&t&&t.constructor===e,s=i?t:a.create(e.prototype);if(1===n.length&&s instanceof S&&(i||!(s instanceof D))){var o=n[0];a.isPlainObject(o)&&(o.insert=!1,i&&(n=n.concat([S.INSERT])))}return(i?s.set:e).apply(s,n),i&&(t=null),s})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var i=0;i<n;i++)e[r+i]=t[i]}return e},splice:function(e,t,n,i){var s=t&&t.length,o=n===r;(n=o?e.length:n)>e.length&&(n=e.length);for(var l=0;l<s;l++)t[l]._index=n+l;if(o)return a.push(e,t),[];var u=[n,i];t&&a.push(u,t);for(var c=e.splice.apply(e,u),h=(l=0,c.length);l<h;l++)c[l]._index=r;for(l=n+s,h=e.length;l<h;l++)e[l]._index=l;return c},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var o={on:function(e,t){if("string"!=typeof e)a.each(e,function(e,t){this.on(t,e)},this);else{var n=this._eventTypes,r=n&&n[e],i=this._callbacks=this._callbacks||{};-1===(i=i[e]=i[e]||[]).indexOf(t)&&(i.push(t),r&&r.install&&1===i.length&&r.install.call(this,e))}return this},off:function(e,t){if("string"==typeof e){var n,r=this._eventTypes,i=r&&r[e],s=this._callbacks&&this._callbacks[e];return s&&(!t||-1!==(n=s.indexOf(t))&&1===s.length?(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e]):-1!==n&&s.splice(n,1)),this}a.each(e,function(e,t){this.off(t,e)},this)},once:function(e,t){return this.on(e,function n(){t.apply(this,arguments),this.off(e,n)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=a.slice(arguments,1),i=t&&t.target&&!t.currentTarget;n=n.slice(),i&&(t.currentTarget=this);for(var s=0,o=n.length;s<o;s++)if(0==n[s].apply(this,r)){t&&t.stop&&t.stop();break}return i&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t)for(var i in n)if(n[i].length>0){var s=t[i],a=s&&s[r];a&&a.call(this,i)}},statics:{inject:function e(t){var n=t._events;if(n){var r={};a.each(n,function(e,n){var i="string"==typeof e,s=i?e:n,o=a.capitalize(s),l=s.substring(2).toLowerCase();r[l]=i?{}:e,s="_"+s,t["get"+o]=function(){return this[s]},t["set"+o]=function(e){var t=this[s];t&&this.off(l,t),e&&this.on(l,e),this[s]=e}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},l=a.extend({_class:"PaperScope",initialize:function e(){le=this,this.settings=new a({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var n=e.prototype;if(!this.support){var r=ie.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:se.nativeModes},ie.release(r)}if(!this.agent){var i=t.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],o="darwin"===s?"mac":s,l=n.agent=n.browser={platform:o};o&&(l[o]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(e,t,n,r,i){if(!l.chrome){var s="opera"===t?r:/^(node|trident)$/.test(t)?i:n;l.version=s,l.versionNumber=parseFloat(s),t={trident:"msie",jsdom:"node"}[t]||t,l.name=t,l[t]=!0}}),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=le.PaperScript.execute(e,this,t);return Z.updateFocus(),n},install:function(e){var t=this;for(var n in a.each(["project","view","tool"],function(n){a.define(e,n,{configurable:!0,get:function(){return t[n]}})}),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return le=this,this.project=new w(e),this},createCanvas:function(e,t){return ie.getCanvas(e,t)},activate:function(){le=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete l._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),u=a.extend(o,{initialize:function(e){this._scope=le,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(a.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),c={findItemBoundsCollisions:function(e,t,n){function r(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n].getBounds();t[n]=[r.left,r.top,r.right,r.bottom]}return t}var i=r(e),s=t&&t!==e?r(t):i;return this.findBoundsCollisions(i,s,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function i(e){for(var t=Math.min,n=Math.max,r=new Array(e.length),i=0;i<e.length;i++){var s=e[i];r[i]=[t(s[0],s[2],s[4],s[6]),t(s[1],s[3],s[5],s[7]),n(s[0],s[2],s[4],s[6]),n(s[1],s[3],s[5],s[7])]}return r}var s=i(e),a=t&&t!==e?i(t):s;if(r){for(var o=this.findBoundsCollisions(s,a,n||0,!1,!0),l=this.findBoundsCollisions(s,a,n||0,!0,!0),u=[],c=0,h=o.length;c<h;c++)u[c]={hor:o[c],ver:l[c]};return u}return this.findBoundsCollisions(s,a,n||0)},findBoundsCollisions:function(e,t,n,r,i){var s=!t||e===t,a=s?e:e.concat(t),o=e.length,l=a.length;function u(e,t,n){for(var r=0,i=e.length;r<i;){var s=i+r>>>1;a[e[s]][t]<n?r=s+1:i=s}return r-1}for(var c=r?1:0,h=c+2,d=r?0:1,f=d+2,p=new Array(l),g=0;g<l;g++)p[g]=g;p.sort(function(e,t){return a[e][c]-a[t][c]});var m=[],v=new Array(o);for(g=0;g<l;g++){var _=p[g],y=a[_],b=s?_:_-o,x=_<o,w=s||!x,S=x?[]:null;if(m.length){var C=u(m,h,y[c]-n)+1;if(m.splice(0,C),s&&i){S=S.concat(m);for(var D=0;D<m.length;D++)v[k=m[D]].push(b)}else{var E=y[f],A=y[d];for(D=0;D<m.length;D++){var k=m[D],M=a[k],T=k<o,I=s||k>=o;(i||(x&&I||w&&T)&&E>=M[d]-n&&A<=M[f]+n)&&(x&&I&&S.push(s?k:k-o),w&&T&&v[k].push(b))}}}if(x&&(e===t&&S.push(_),v[_]=S),m.length){var O=u(m,h,y[h]);m.splice(O+1,0,_)}else m.push(_)}for(g=0;g<v.length;g++){var L=v[g];L&&L.sort(function(e,t){return e-t})}return v}},h=a.extend({initialize:function(e){this.precision=a.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});h.instance=new h;var d=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,s=Math.log2||function(e){return Math.log(e)*Math.LOG2E},a=1e-12,o=112e-18;function l(e,t,n){return e<t?t:e>n?n:e}function u(e,t,r){function i(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var s=t*t-e*r,a=t*t+e*r;if(3*n(s)<a){var o=i(e),l=i(t),u=i(r),c=t*t,h=e*r;s=c-h+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(o[0]*u[0]-h+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return s}function c(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?i(2,-Math.round(s(e))):0}return{EPSILON:a,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(e){return e>=-a&&e<=a},isMachineZero:function(e){return e>=-o&&e<=o},clamp:l,integrate:function(n,r,i,s){for(var a=e[s-2],o=t[s-2],l=.5*(i-r),u=l+r,c=0,h=s+1>>1,d=1&s?o[c++]*n(u):0;c<h;){var f=l*a[c];d+=o[c++]*(n(u+f)+n(u-f))}return l*d},findRoot:function(e,t,r,i,s,a,o){for(var u=0;u<a;u++){var c=e(r),h=c/t(r),d=r-h;if(n(h)<o){r=d;break}c>0?(s=r,r=d<=i?.5*(i+s):d):(i=r,r=d>=s?.5*(i+s):d)}return l(r,i,s)},solveQuadratic:function(e,t,i,s,h,d){var f,p=1/0;if(n(e)<a){if(n(t)<a)return n(i)<a?-1:0;f=-i/t}else{var g=u(e,t*=-.5,i);if(g&&n(g)<o){var m=c(n(e),n(t),n(i));m&&(g=u(e*=m,t*=m,i*=m))}if(g>=-o){var v=g<0?0:r(g),_=t+(t<0?-v:v);0===_?p=-(f=i/e):(f=_/e,p=i/_)}}var y=0,b=null==h,x=h-a,w=d+a;return isFinite(f)&&(b||f>x&&f<w)&&(s[y++]=b?f:l(f,h,d)),p!==f&&isFinite(p)&&(b||p>x&&p<w)&&(s[y++]=b?p:l(p,h,d)),y},solveCubic:function(e,t,s,u,h,f,p){var g,m,v,_,y,b=c(n(e),n(t),n(s),n(u));function x(n){var r=e*(g=n);_=(r+(m=r+t))*g+(v=m*g+s),y=v*g+u}if(b&&(e*=b,t*=b,s*=b,u*=b),n(e)<a)e=t,m=s,v=u,g=1/0;else if(n(u)<a)m=t,v=s,g=0;else{x(-t/e/3);var w=y/e,S=i(n(w),1/3),C=w<0?-1:1,D=-_/e,E=D>0?1.324717957244746*Math.max(S,r(D)):S,A=g-C*E;if(A!==g){do{x(A),A=0===_?g:g-y/_/(1+o)}while(C*A>C*g);n(e)*g*g>n(u/g)&&(m=((v=-u/g)-s)/g)}}var k=d.solveQuadratic(e,m,v,h,f,p),M=null==f;return isFinite(g)&&(0===k||k>0&&g!==h[0]&&g!==h[1])&&(M||g>f-a&&g<p+a)&&(h[k++]=M?g:l(g,f,p)),k}}},f={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},p=a.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var s="number"==typeof t;this._set(e,s?t:e),r&&(i=s?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var a="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new p(this.x,this.y)},toString:function(){var e=h.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();d.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=p.read(arguments),t=this.getLength()*e.getLength();if(d.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=p.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=p.read(e),n=t.x-this.x,r=t.y-this.y,i=n*n+r*r;return a.read(e)?i:Math.sqrt(i)},normalize:function(e){e===r&&(e=1);var t=this.getLength(),n=0!==t?e/t:0,i=new p(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=new p(n.x*i-n.y*r,n.x*r+n.y*i),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=p.read(arguments);return new p(this.x+e.x,this.y+e.y)},subtract:function(){var e=p.read(arguments);return new p(this.x-e.x,this.y-e.y)},multiply:function(){var e=p.read(arguments);return new p(this.x*e.x,this.y*e.y)},divide:function(){var e=p.read(arguments);return new p(this.x/e.x,this.y/e.y)},modulo:function(){var e=p.read(arguments);return new p(this.x%e.x,this.y%e.y)},negate:function(){return new p(-this.x,-this.y)},isInside:function(){return _.read(arguments).contains(this)},isClose:function(){var e=arguments,t=p.read(e),n=a.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=p.read(arguments);return p.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=p.read(arguments);return p.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=d.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=p.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=p.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=p.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new p(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=p.read(e),n=p.read(e);return new p(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=p.read(e),n=p.read(e);return new p(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new p(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))}}},a.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new p(t(this.x),t(this.y))}},{})),g=p.extend({initialize:function(e,t,n,r){this._x=e,this._y=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),m=a.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var s="number"==typeof t;this._set(e,s?t:e),r&&(i=s?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var a="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new m(this.width,this.height)},toString:function(){var e=h.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=m.read(arguments);return new m(this.width+e.width,this.height+e.height)},subtract:function(){var e=m.read(arguments);return new m(this.width-e.width,this.height-e.height)},multiply:function(){var e=m.read(arguments);return new m(this.width*e.width,this.height*e.height)},divide:function(){var e=m.read(arguments);return new m(this.width/e.width,this.height/e.height)},modulo:function(){var e=m.read(arguments);return new m(this.width%e.width,this.height%e.height)},negate:function(){return new m(-this.width,-this.height)},isZero:function(){var e=d.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new m(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new m(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new m(Math.random(),Math.random())}}},a.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new m(t(this.width),t(this.height))}},{})),v=m.extend({initialize:function(e,t,n,r){this._width=e,this._height=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),_=a.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,n,i){var s,o=arguments,l=typeof e;if("number"===l?(this._set(e,t,n,i),s=4):"undefined"===l||null===e?(this._set(0,0,0,0),s=null===e?1:0):1===o.length&&(Array.isArray(e)?(this._set.apply(this,e),s=1):e.x!==r||e.width!==r?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),s=1):e.from===r&&e.to===r&&(this._set(0,0,0,0),a.readSupported(o,this)&&(s=1))),s===r){var u,c,h=p.readNamed(o,"from"),d=a.peek(o),f=h.x,g=h.y;if(d&&d.x!==r||a.hasNamed(o,"to")){var v=p.readNamed(o,"to");u=v.x-f,c=v.y-g,u<0&&(f=v.x,u=-u),c<0&&(g=v.y,c=-c)}else{var _=m.read(o);u=_.width,c=_.height}this._set(f,g,u,c),s=o.__index}var y=o.__filtered;return y&&(this.__filtered=y),this.__read&&(this.__read=s),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new _(this.x,this.y,this.width,this.height)},equals:function(e){var t=a.isPlainValue(e)?_.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=h.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?p:g)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=p.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?m:v)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=m.read(arguments),t=this._sx,n=this._sy,r=e.width,i=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?p:g)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=p.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==r||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(_.read(arguments)):this._containsPoint(p.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=_.read(arguments),t=a.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=_.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return new _(t,n,r-t,i-n)},unite:function(){var e=_.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return new _(t,n,r-t,i-n)},include:function(){var e=p.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return new _(t,n,r-t,i-n)},expand:function(){var e=m.read(arguments),t=e.width,n=e.height;return new _(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===r?e:t)-this.height)}},a.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],s=e[r?1:0],a="get"+i,o="get"+s,l="set"+i,u="set"+s,c="set"+n;this["get"+n]=function(e){return new(e?p:g)(this[a](),this[o](),this,c)},this[c]=function(){var e=p.read(arguments);this[l](e.x),this[u](e.y)}},{beans:!0})),y=_.extend({initialize:function(e,t,n,r,i,s){this._set(e,t,n,r,!0),this._owner=i,this._setter=s},_set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var e=_.prototype;return a.each(["x","y","width","height"],function(e){var t=a.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}},a.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),b=a.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,i=r.length,s=!0;if(i>=6?this._set.apply(this,r):1===i||2===i?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):s=!1:i?s=!1:this.reset(),!s)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,i,s,a){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=i,this._ty=s,a||this._changed(),this},_serialize:function(e,t){return a.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new b(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=h.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,a.pick(e,!0),t),this.isIdentity())},translate:function(){var e=p.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=p.read(e),n=p.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=p.read(arguments,1),n=t.x,r=t.y,i=Math.cos(e),s=Math.sin(e),a=n-n*i+r*s,o=r-n*s-r*i,l=this._a,u=this._b,c=this._c,h=this._d;return this._a=i*l+s*c,this._b=i*u+s*h,this._c=-s*l+i*c,this._d=-s*u+i*h,this._tx+=a*l+o*c,this._ty+=a*u+o*h,this._changed(),this},shear:function(){var e=arguments,t=p.read(e),n=p.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*i,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=p.read(e),n=p.read(e,0,{readNull:!0}),r=Math.PI/180,i=new p(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(i,n)},append:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,s=this._d,a=e._a,o=e._c,l=e._b,u=e._d,c=e._tx,h=e._ty;this._a=a*n+l*i,this._c=o*n+u*i,this._b=a*r+l*s,this._d=o*r+u*s,this._tx+=c*n+h*i,this._ty+=c*r+h*s,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,s=this._d,a=this._tx,o=this._ty,l=e._a,u=e._c,c=e._b,h=e._d,d=e._tx,f=e._ty;this._a=l*n+u*r,this._c=l*i+u*s,this._b=c*n+h*r,this._d=c*i+h*s,this._tx=l*a+u*o+d,this._ty=c*a+h*o+f,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,i=this._tx,s=this._ty,a=e*r-t*n,o=null;return a&&!isNaN(a)&&isFinite(i)&&isFinite(s)&&(this._a=r/a,this._b=-t/a,this._c=-n/a,this._d=e/a,this._tx=(n*s-r*i)/a,this._ty=(t*i-e*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new b(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(p.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new p),t._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,i=2*n;r<i;r+=2){var s=e[r],a=e[r+1];t[r]=s*this._a+a*this._c+this._tx,t[r+1]=s*this._b+a*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,s=[t,n,r,n,r,i,t,i];return this._transformCoordinates(s,s,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),i=r.slice(0,2),s=i.slice(),a=2;a<8;a++){var o=r[a],l=1&a;o<i[l]?i[l]=o:o>s[l]&&(s[l]=o)}return t||(t=new _),t._set(i[0],i[1],s[0]-i[0],s[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(p.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,i=this._b,s=this._c,a=this._d,o=this._tx,l=this._ty,u=r*a-i*s,c=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(l)){var h=e.x-this._tx,d=e.y-this._ty;t||(t=new p),c=t._set((h*a-d*s)/u,(d*r-h*i)/u,n)}return c},decompose:function(){var e,t,n,r=this._a,i=this._b,s=this._c,a=this._d,o=r*a-i*s,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=l(r*r+i*i);e=Math.acos(r/h)*(i>0?1:-1),t=[h,o/h],n=[u(r*s+i*a,h*h),0]}else if(0!==s||0!==a){var d=l(s*s+a*a);e=Math.asin(s/d)*(a>0?1:-1),t=[o/d,d],n=[0,u(r*s+i*a,d*d)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*c,scaling:new p(t),skewing:new p(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new p(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},a.each(["a","b","c","d","tx","ty"],function(e){var t=a.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}},{})),x=a.extend({_class:"Line",initialize:function(e,t,n,r,i){var s=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=r,s=i):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new p(this._px,this._py)},getVector:function(){return new p(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return x.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return x.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return x.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return p.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return p.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,i,s,a,o,l,u){l||(n-=e,r-=t,a-=i,o-=s);var c=n*o-r*a;if(!d.isMachineZero(c)){var h=e-i,f=t-s,g=(a*f-o*h)/c,m=(n*f-r*h)/c,v=-1e-12,_=1+1e-12;if(u||v<g&&g<_&&v<m&&m<_)return u||(g=g<=0?0:g>=1?1:g),new p(e+g*n,t+g*r)}},getSide:function(e,t,n,r,i,s,a,o){a||(n-=e,r-=t);var l=i-e,u=l*r-(s-t)*n;return!o&&d.isMachineZero(u)&&(u=(l*n+l*n)/(n*n+r*r))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(e,t,n,r,i,s,a){return a||(n-=e,r-=t),0===n?r>0?i-e:e-i:0===r?n<0?s-t:t-s:((i-e)*r-(s-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,i,s,a){return Math.abs(x.getSignedDistance(e,t,n,r,i,s,a))}}}),w=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=Z.create(this,e||ie.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return a.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var i=this._changesById,s=t._id,a=i[s];a?a.flags|=e:r.push(i[s]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new D({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:k,match:function(n){var r=n._definition,i=r._id;return t[i]||(t[i]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],i=r._selection;1&i&&r.isInserted()?t.push(r):i||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(r,e)},insertLayer:function(e,t){if(t instanceof D){t._remove(!1,!0),a.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(r,new D(S.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return S._getItems(this,e)},getItem:function(e){return S._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return a.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var i=n[r];for(var s in t){var a=t[s];a&&a!=n&&delete a[i._id]}i.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,i=new a({offset:new p(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new b],updateMatrix:!0}),s=0,o=r.length;s<o;s++)r[s].draw(e,i);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var h in l)l[h]._drawSelection(e,t,u,l,c);e.restore()}}}),S=a.extend(o,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=a.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new b,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return a.each(e,function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&a.isPlainObject(e),i=n&&!0===e.internal,s=this._matrix=new b,o=n&&e.project||le.project,l=le.settings;return this._id=i?null:f.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,t&&s.translate(t),s._owner=this,this._style=new Y(o._currentStyle,this,o),i||n&&0==e.insert||!l.insertItems&&(!n||1!=e.insert)?this._setProject(o):(n&&e.parent||o)._insertItem(r,this,!0),n&&e!==S.NO_INSERT&&e!==S.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},r=this;function i(i){for(var s in i){var o=r[s];a.equals(o,"leading"===s?1.2*i.fontSize:i[s])||(n[s]=a.serialize(o,e,"data"!==s,t))}}return i(this._serializeFields),this instanceof C||i(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,i=this._project;8&e&&(this._bounds=this._position=this._decomposed=r),16&e&&(this._globalMatrix=r),n&&72&e&&S._clearBoundsCache(n),2&e&&S._clearBoundsCache(this),i&&i._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,i=t._namedChildren;(i[e]=i[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||r,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},a.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=a.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?p:g,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(p.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new g(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=p.read(arguments,0,{clone:!0,readNull:!0}),this._position=r}},a.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(t){return this.getBounds(t,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof b,r=a.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var i=this._getCachedBounds(n&&e,r).rect;return arguments.length?i:new y(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var e=_.read(arguments),t=this.getBounds(),n=this._matrix,r=new b,i=e.getCenter();r.translate(i),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||(new b).translate(n.getTranslation())),t=this.getBounds()),r.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),i=t.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(S._updateBoundsCache(this,t.cacheItem),S._getBounds(n,e,t)):new _},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,i=t.cacheItem,s=r?null:this._matrix._orNullIfIdentity(),a=i&&(!e||e.equals(s))&&this._getBoundsCacheKey(t,r),o=this._bounds;if(S._updateBoundsCache(this._parent||this._symbol,i),a&&o&&a in o)return{rect:(d=o[a]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(e||s,t),u=l.rect||l,c=this._style,h=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(a){o||(this._bounds=o={});var d=o[a]={rect:u.clone(),nonscaling:h,internal:r}}return{rect:u,nonscaling:h}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=r;for(var n=0,i=t.list,s=i.length;n<s;n++){var a=i[n];a!==e&&(a._bounds=a._position=r,a._boundsCache&&S._clearBoundsCache(a))}}},_getBounds:function(e,t,n){var r=1/0,i=-r,s=r,a=i,o=!1;n=n||{};for(var l=0,u=e.length;l<u;l++){var c=e[l];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(t&&t.appended(c._matrix),n,!0),d=h.rect;r=Math.min(d.x,r),s=Math.min(d.y,s),i=Math.max(d.x+d.width,i),a=Math.max(d.y+d.height,a),h.nonscaling&&(o=!0)}}return{rect:isFinite(r)?new _(r,s,i-r,a-s):new _,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new g(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=p.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,i=new b,s=d.isZero;if(s(e.x)||s(e.y))i.translate(r.translation),n&&i.rotate(n),i.scale(t.x,t.y),this._matrix.set(i);else{var a=this.getPosition(!0);i.translate(a),n&&i.rotate(n),i.scale(t.x/e.x,t.y/e.y),n&&i.rotate(-n),i.translate(a.negate()),this.transform(i)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var i=0,s=r.length;i<s;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&t.prepend(n.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof D)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return a.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(S.NO_INSERT),n=this._children,i=a.pick(e?e.insert:r,e===r||!0===e),s=a.pick(e?e.deep:r,!0);n&&t.copyAttributes(this),(!n||s)&&t.copyContent(this),n||t.copyAttributes(this),i&&t.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){n=l._children;for(var u=o,c=1;n[o];)o=u+" "+c++;o!==u&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var s=n[r];e.hasOwnProperty(s)&&(this[s]=e[s])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var o=e._data,l=e._name;this._data=o?a.clone(o):null,l&&this.setName(l)},rasterize:function(e,t){var n,i,s;a.isPlainObject(e)?(n=e.resolution,i=e.insert,s=e.raster):(n=e,i=t),s||(s=new A(S.NO_INSERT));var o=this.getStrokeBounds(),l=(n||this.getView().getResolution())/72,u=o.getTopLeft().floor(),c=o.getBottomRight().ceil(),h=new m(c.subtract(u)),d=h.multiply(l);if(s.setSize(d,!0),!d.isZero()){var f=s.getContext(!0),p=(new b).scale(l).translate(u.negate());f.save(),p.applyToContext(f),this.draw(f,new a({matrices:[p]})),f.restore()}return s._matrix.set((new b).translate(u.add(h.divide(2))).scale(1/l)),(i===r||i)&&s.insertAbove(this),s},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(p.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return _.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new N.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof S&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var e=arguments;return this._hitTest(p.read(e),T.getOptions(e))}function t(){var e=arguments,t=p.read(e),n=T.getOptions(e),r=[];return this._hitTest(t,new a({all:r},n)),r}function n(e,t,n,r){var i=this._children;if(i)for(var s=i.length-1;s>=0;s--){var a=i[s],o=a!==r&&a._hitTest(e,t,n);if(o&&!t.all)return o}return null}return w.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(t.tolerance,1e-12),o=t._tolerancePadding=new m(N._getStrokePadding(s,r._shiftless().invert()));if(!(e=r._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(e))return null;var l,u,c=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==a.hyphenate(this._class)||t.class&&!(this instanceof t.class)),h=t.match,d=this;function f(e){return e&&h&&!h(e)&&(e=null),e&&t.all&&t.all.push(e),e}function p(t,n){var r=n?l["get"+n]():d.getPosition();if(e.subtract(r).divide(o).length<=1)return new T(t,d,{name:n?a.hyphenate(n):t,point:r})}var g=t.position,v=t.center,_=t.bounds;if(c&&this._parent&&(g||v||_)){if((v||_)&&(l=this.getInternalBounds()),!(u=g&&p("position")||v&&p("center","Center"))&&_)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!u;b++)u=p("bounds",y[b]);u=f(u)}return u||(u=this._hitTestChildren(e,t,i)||c&&f(this._hitTestSelf(e,t,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new T("fill",this)},matches:function(e,t){var n=typeof e;if("object"===n){for(var r in e)if(e.hasOwnProperty(r)&&!this.matches(r,e[r]))return!1;return!0}if("function"===n)return e(this);if("match"===e)return t(this);var i=/^(empty|editable)$/.test(e)?this["is"+a.capitalize(e)]():"type"===e?a.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;i=this._class}if("function"==typeof t)return!!t(i);if(t){if(t.test)return t.test(i);if(a.isPlainObject(t))return function e(t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],s=n[r];if(a.isPlainObject(i)&&a.isPlainObject(s)){if(!e(i,s))return!1}else if(!a.equals(i,s))return!1}return!0}(t,i)}return a.equals(i,t)},getItems:function(e){return S._getItems(this,e,this._matrix)},getItem:function(e){return S._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,i,s){if(!i){var o="object"==typeof n&&n,l=o&&o.overlapping,u=o&&o.inside,c=(y=l||u)&&_.read([y]);i={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!l,rect:c,path:l&&new N.Rectangle({rectangle:c,insert:!1})},o&&(n=a.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=t._children,d=i.items;r=(c=i.rect)&&(r||new b);for(var f=0,p=h&&h.length;f<p;f++){var g=h[f],m=r&&r.appended(g._matrix),v=!0;if(c){var y=g.getBounds(m);if(!c.intersects(y))continue;c.contains(y)||i.overlapping&&(y.contains(c)||i.path.intersects(g,m))||(v=!1)}if(v&&g.matches(n)&&(d.push(g),s)||(!1!==i.recursive&&e(g,n,m,i,s),s&&d.length>0))break}return d}}},{importJSON:function(e){var t=a.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(r,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){for(var r={},i=(t=a.slice(t)).length-1;i>=0;i--){var s=(c=t[i])&&c._id;!c||r[s]?t.splice(i,1):(c._remove(!1,!0),r[s]=!0)}a.splice(n,t,e,0);for(var o=this._project,l=o._changes,u=(i=0,t.length);i<u;i++){var c,h=(c=t[i])._name;c._parent=this,c._setProject(o,!0),h&&c.setName(h),l&&c._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(r,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(r,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,i=n[r],s=i?i.indexOf(this):-1;-1!==s&&(t[r]==this&&delete t[r],i.splice(s,1),i.length?t[r]=i[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),a.splice(n._children,null,i,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=a.pick(t,this._children.length);for(var n=a.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do{t.unshift(e)}while(e=e._parent);return t}for(var n=t(this),r=t(e),i=0,s=Math.min(n.length,r.length);i<s;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},a.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?a:p).read(n),i=p.read(n,0,{readNull:!0});return this.transform((new b)[e](r,i||this.getPosition(!0)))}},{translate:function(){var e=new b;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,i=e&&!e.isIdentity(),s=n&&this._canApplyMatrix||this._applyMatrix&&(i||!r.isIdentity()||t&&this._children);if(!i&&!s)return this;if(i){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var a=this._style,o=a.getFillColor(!0),l=a.getStrokeColor(!0);o&&o.transform(e),l&&l.transform(e)}if(s&&(s=this._transformContent(r,t,n))){var u=this._pivot;u&&r._transformPoint(u,u,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(i||s)&&this._changed(25);var d=i&&c&&e.decompose();if(d&&d.skewing.isZero()&&d.rotation%90===0){for(var f in c){var p=c[f];if(p.nonscaling)delete c[f];else if(s||!p.internal){var g=p.rect;e._transformBounds(g,g)}}this._bounds=c;var m=c[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else i&&h&&this._pivot&&(this._position=e._transformPoint(h,h));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var i=0,s=r.length;i<s;i++)r[i].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(p.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(p.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(p.read(arguments))},localToParent:function(){return this._matrix._transformPoint(p.read(arguments))},fitBounds:function(e,t){e=_.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,s=(t?r>i:r<i)?e.width/n.width:e.height/n.height,a=new _(new p,new m(n.width*s,n.height*s));a.setCenter(e.getCenter()),this.setBounds(a)}}),{_setStyles:function(e,t,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,i)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,i),e.lineWidth=r.getStrokeWidth();var s=r.getStrokeJoin(),a=r.getStrokeCap(),o=r.getMiterLimit();if(s&&(e.lineJoin=s),a&&(e.lineCap=a),o&&(e.miterLimit=o),le.support.nativeDash){var l=r.getDashArray(),u=r.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=u):(e.mozDash=l,e.mozDashOffset=u))}}if(r.hasShadow()){var c=t.pixelRatio||1,h=n._shiftless().prepend((new b).scale(c,c)),d=h.transform(new p(r.getShadowBlur(),0)),f=h.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=d.getLength(),e.shadowOffsetX=f.x,e.shadowOffsetY=f.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var r=t.matrices,i=t.viewMatrix,s=this._matrix,a=r[r.length-1].appended(s);if(a.isInvertible()){i=i?i.appended(a):a,r.push(a),t.updateMatrix&&(this._globalMatrix=a);var o,l,u,c=this._blendMode,h=d.clamp(this._opacity,0,1),f="normal"===c,p=se.nativeModes[c],g=f&&1===h||t.dontStart||t.clip||(p||f&&h<1)&&this._canComposite(),m=t.pixelRatio||1;if(!g){var v=this.getStrokeBounds(i);if(!v.width||!v.height)return void r.pop();u=t.offset,l=t.offset=v.getTopLeft().floor(),o=e,e=ie.getContext(v.getSize().ceil().add(1).multiply(m)),1!==m&&e.scale(m,m)}e.save();var _=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,y=!g&&t.clipItem,b=!_||y;if(g?(e.globalAlpha=h,p&&(e.globalCompositeOperation=c)):b&&e.translate(-l.x,-l.y),b&&(g?s:i).applyToContext(e),y&&t.clipItem.draw(e,t.extend({clip:!0})),_){e.setTransform(m,0,0,m,0,0);var x=t.offset;x&&e.translate(-x.x,-x.y)}this._draw(e,t,i,_),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),g||(se.process(c,e,o,h,l.subtract(u).multiply(m)),ie.release(e),t.offset=u)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof R)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,i){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,l=4&s;if(this._drawSelected||(a=!1),(a||o||l)&&this._isUpdated(i)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),d=n/2;if(e.strokeStyle=e.fillStyle=c?c.toCanvasStyle(e):"#009dec",a&&this._drawSelected(e,h,r),l){var f=this.getPosition(!0),p=this._parent,g=p?p.localToGlobal(f):f,m=g.x,v=g.y;e.beginPath(),e.arc(m,v,d,0,2*Math.PI,!0),e.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],y=d,b=n+1,x=0;x<4;x++){var w=_[x],S=w[0],C=w[1];e.moveTo(m+S*y,v+C*y),e.lineTo(m+S*b,v+C*b),e.stroke()}}if(o){var D=h._transformCorners(this.getInternalBounds());for(e.beginPath(),x=0;x<8;x++)e[x?"lineTo":"moveTo"](D[x],D[++x]);for(e.closePath(),e.stroke(),x=0;x<8;x++)e.fillRect(D[x]-d,D[++x]-d,n,n)}}},_canComposite:function(){return!1}},a.each(["down","drag","up","move"],function(e){this["removeOn"+a.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,i=n&&n.start,s=null!=n&&("number"==typeof n?n:n.duration),a=new ne(this,e,t,s,r,i);return s&&this.on("frame",function e(t){a._handleFrame(1e3*t.time),a.running||this.off("frame",e)}),a},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),C=S.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),2050&t&&(this._clipItem=r)},_getClipItem:function(){var e=this._clipItem;if(e===r){e=null;for(var t=this._children,n=0,i=t.length;n<i;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),a.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var i=this._getClipItem();return(!i||i.contains(t))&&e.base.call(this,t,n,r,i)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var i=this._children,s=0,a=i.length;s<a;s++){var o=i[s];o!==r&&o.draw(e,t)}}}),D=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),E=S.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&a.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new v(e.width,e.height,this,"setSize")},setSize:function(){var e=m.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;"rectangle"===t?this._radius.set(m.min(this._radius,e.divide(2).abs())):"circle"===t?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new v(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=m.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(n=m.max(this._size,e.multiply(2)),this._size.set(n)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(N[a.capitalize(this._type)])({center:new p,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),le.settings.applyMatrix&&t.setApplyMatrix(!0),(e===r||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var i=this._style,s=i.hasFill(),a=i.hasStroke(),o=t.dontFinish||t.clip,l=!r;if(s||a||o){var u=this._type,c=this._radius,h="circle"===u;if(t.dontStart||e.beginPath(),l&&h)e.arc(0,0,c,0,2*Math.PI,!0);else{var d=h?c:c.width,f=h?c:c.height,p=this._size,g=p.width,m=p.height;if(l&&"rectangle"===u&&0===d&&0===f)e.rect(-g/2,-m/2,g,m);else{var v=g/2,_=m/2,y=.44771525016920644,b=d*y,x=f*y,w=[-v,-_+f,-v,-_+x,-v+b,-_,-v+d,-_,v-d,-_,v-b,-_,v,-_+x,v,-_+f,v,_-f,v,_-x,v-b,_,v-d,_,-v+d,_,-v+b,_,-v,_-x,-v,_-f];r&&r.transform(w,w,32),e.moveTo(w[0],w[1]),e.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==d&&e.lineTo(w[8],w[9]),e.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),_!==f&&e.lineTo(w[16],w[17]),e.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==d&&e.lineTo(w[24],w[25]),e.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}e.closePath()}!o&&(s||a)&&(this._setStyles(e,t,n),s&&(e.fill(i.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),a&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new _(this._size).setCenter(0,0),r=this._style,i=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),i?n.expand(N._getStrokePadding(i,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var r=e._radius;if(!r.isZero())for(var i=e._size.divide(2),s=1;s<=4;s++){var a=new p(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(i),l=o.subtract(a.multiply(r));if(new _(n?o.add(a.multiply(n)):o,l).contains(t))return{point:l,quadrant:s}}}function t(e,t,n,r){var i=e.divide(t);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var r=e(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,s,a){var o=!1,l=this._style,u=i.stroke&&l.hasStroke(),c=i.fill&&l.hasFill();if(u||c){var h=this._type,d=this._radius,f=u?l.getStrokeWidth()/2:0,p=i._tolerancePadding.add(N._getStrokePadding(f,!l.getStrokeScaling()&&a));if("rectangle"===h){var g=p.multiply(2),m=e(this,r,g);if(m)o=t(r.subtract(m.point),d,p,m.quadrant);else{var v=new _(this._size).setCenter(0,0),y=v.expand(g),b=v.expand(g.negate());o=y._containsPoint(r)&&!b._containsPoint(r)}}else o=t(r,d,p)}return o?new T(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,r,i){var s=a.create(E.prototype);return s._type=e,s._size=n,s._radius=r,s._initialize(a.getNamed(i),t),s}return{Circle:function(){var t=arguments,n=p.readNamed(t,"center"),r=a.readNamed(t,"radius");return e("circle",n,new m(2*r),r,t)},Rectangle:function(){var t=arguments,n=_.readNamed(t,"rectangle"),r=m.min(m.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=E._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(e){var t,n;if(a.hasNamed(e,"radius"))t=p.readNamed(e,"center"),n=m.readNamed(e,"radius");else{var r=_.readNamed(e,"rectangle");t=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),A=S.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==r&&p.read(arguments))){var n,i=typeof e,a="string"===i?s.getElementById(e):"object"===i?e:null;if(a&&a!==S.NO_INSERT)if(a.getContext||null!=a.naturalHeight)n=a;else if(a){var o=m.read(arguments);o.isZero()||(n=ie.getCanvas(o))}n?this.setImage(n):this.setSource(e)}this._size||(this._size=new m,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=ie.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new v(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=m.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(ie.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&ie.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new p(0,0).transform(e),n=new p(1,0).transform(e).subtract(t),r=new p(0,1).transform(e).subtract(t);return new m(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(e){var n=t.getView(),r=e&&e.type||"load";n&&t.responds(r)&&(le=n._scope,t.emit(r,new X(e)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&q.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&ie.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new m(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=ie.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){ie.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var n=new t.Image,r=this._crossOrigin;r&&(n.crossOrigin=r),e&&(n.src=e),this.setImage(n)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing="string"==typeof e?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=_.read(arguments),t=ie.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=_.read(arguments),t=new A(S.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=p.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof B?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new _(e):"x"in e&&(t=new _(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=Math.min(t.width,32),i=Math.min(t.height,32),s=A._sampleContext;s?s.clearRect(0,0,33,33):s=A._sampleContext=ie.getContext(new m(32)),s.save();var o=(new b).scale(r/t.width,i/t.height).translate(-t.x,-t.y);o.applyToContext(s),n&&n.draw(s,new a({clip:!0,matrices:[o]})),this._matrix.applyToContext(s);var l=this.getElement(),u=this._size;l&&s.drawImage(l,-u.width/2,-u.height/2),s.restore();for(var c=s.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],d=0,f=0,p=c.length;f<p;f+=4){var g=c[f+3];d+=g,g/=255,h[0]+=c[f]*g,h[1]+=c[f+1]*g,h[2]+=c[f+2]*g}for(f=0;f<3;f++)h[f]/=d;return d?U.read(h):null},getPixel:function(){var e=p.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new U("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=p.read(e),n=U.read(e),r=n._convert("rgb"),i=n._alpha,s=this.getContext(!0),a=s.createImageData(1,1),o=a.data;o[0]=255*r[0],o[1]=255*r[1],o[2]=255*r[2],o[3]=null!=i?255*i:255,s.putImageData(a,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=m.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=_.read(arguments);return e.isEmpty()&&(e=new _(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=p.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new _(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new T("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=d.clamp(this._opacity,0,1),this._setStyles(e,t,n);var i=this._smoothing,s="off"===i;W.setPrefixed(e,s?"imageSmoothingEnabled":"imageSmoothingQuality",!s&&i),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),k=S.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==r&&p.read(arguments,1))||this.setDefinition(e instanceof M?e:new M(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),i=this._definition._item._hitTest(e,r,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),M=a.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=f.get(),this.project=le.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,function(){return a.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){8&e&&S._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new p),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new k(this,e)},clone:function(){return new M(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),T=a.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&a.read(e);return new a({type:null,tolerance:le.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),I=a.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,n,i,s,a){var o,l,u,c,h=arguments.length;h>0&&(null==e||"object"==typeof e?1===h&&e&&"point"in e?(o=e.point,l=e.handleIn,u=e.handleOut,c=e.selection):(o=e,l=t,u=n,c=i):(o=[e,t],l=n!==r?[n,i]:null,u=s!==r?[s,a]:null)),new O(o,this,"_point"),new O(l,this,"_handleIn"),new O(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(e,t){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),a.serialize(i,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,r=t._curves,i=this._index;r&&((!e||e===this._point||e===this._handleIn)&&(n=i>0?r[i-1]:t._closed?r[r.length-1]:null)&&n._changed(),(!e||e===this._point||e===this._handleOut)&&(n=r[i])&&n._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(p.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(p.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(p.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==r?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new P(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var i=e||{},s=i.type,a=i.factor,o=this.getPrevious(),l=this.getNext(),u=(o||this)._point,c=this._point,h=(l||this)._point,d=u.getDistance(c),f=c.getDistance(h);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&l){var g=u.subtract(h),m=a===r?.4:a,v=m*d/(d+f);t||this.setHandleIn(g.multiply(v)),n||this.setHandleOut(g.multiply(v-m))}}else{var _=a===r?.5:a,y=Math.pow(d,_),b=y*y,x=Math.pow(f,_),w=x*x;if(!t&&o){var S=2*w+3*x*y+b,C=3*x*(x+y);this.setHandleIn(0!==C?new p((w*u._x+S*c._x-b*h._x)/C-c._x,(w*u._y+S*c._y-b*h._y)/C-c._y):new p)}!n&&l&&(S=2*b+3*y*x+w,C=3*y*(y+x),this.setHandleOut(0!==C?new p((b*h._x+S*c._x-w*u._x)/C-c._x,(b*h._y+S*c._y-w*u._y)/C-c._y):new p))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new I(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new I(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,i=n,s=e._point,a=t._point,o=e._handleIn,l=t._handleIn,u=t._handleOut,c=e._handleOut;this._point._set(r*s._x+i*a._x,r*s._y+i*a._y,!0),this._handleIn._set(r*o._x+i*l._x,r*o._y+i*l._y,!0),this._handleOut._set(r*c._x+i*u._x,r*c._y+i*u._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,a=r._x,o=r._y,l=2;return t[0]=a,t[1]=o,i&&(t[l++]=i._x+a,t[l++]=i._y+o),s&&(t[l++]=s._x+a,t[l++]=s._y+o),e&&(e._transformCoordinates(t,t,l/2),a=t[0],o=t[1],n?(r._x=a,r._y=o,l=2,i&&(i._x=t[l++]-a,i._y=t[l++]-o),s&&(s._x=t[l++]-a,s._y=t[l++]-o)):(i||(t[l++]=a,t[l++]=o),s||(t[l++]=a,t[l++]=o))),t}}),O=p.extend({initialize:function(e,t,n){var i,s,a;if(e)if((i=e[0])!==r)s=e[1];else{var o=e;(i=o.x)===r&&(i=(o=p.read(arguments)).x),s=o.y,a=o.selected}else i=s=0;this._x=i,this._y=s,this._owner=t,t[n]=this,a&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=d.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),L=a.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,r,i,s,a,o){var l,u,c,h,d,f,p=arguments.length;3===p?(this._path=e,l=t,u=n):p?1===p?"segment1"in e?(l=new I(e.segment1),u=new I(e.segment2)):"point1"in e?(c=e.point1,d=e.handle1,f=e.handle2,h=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],h=[e[6],e[7]],d=[e[2]-e[0],e[3]-e[1]],f=[e[4]-e[6],e[5]-e[7]]):2===p?(l=new I(e),u=new I(t)):4===p?(c=e,d=t,f=n,h=r):8===p&&(c=[e,t],h=[a,o],d=[n-e,r-t],f=[i-a,s-o]):(l=new I,u=new I),this._segment1=l||new I(c,null,d),this._segment2=u||new I(h,f,null)},_serialize:function(e,t){return a.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=r},clone:function(){return new L(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return L.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(p.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(p.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(p.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(p.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return L.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new p(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=L.getLength(this.getValues(),0,1)),this._length},getArea:function(){return L.getArea(this.getValues())},getLine:function(){return new x(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new L(L.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return L.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=null;if(e>=1e-8&&e<=.99999999){var r=L.subdivide(this.getValues(),e),i=r[0],s=r[1],a=t||this.hasHandles(),o=this._segment1,l=this._segment2,u=this._path;a&&(o._handleOut._set(i[2]-i[0],i[3]-i[1]),l._handleIn._set(s[4]-s[6],s[5]-s[7]));var c=i[6],h=i[7],d=new I(new p(c,h),a&&new p(i[4]-c,i[5]-h),a&&new p(s[2]-c,s[3]-h));u?(u.insert(o._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new L(d,l))}return n},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===r?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===r?.5:t?e:this.getTimeAt(e))},reversed:function(){return new L(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var i=e._point,s=e._handleOut,a=t._handleIn,o=t._point,l=i.x,u=i.y,c=o.x,h=o.y,d=r?[l,u,l,u,c,h,c,h]:[l,u,l+s._x,u+s._y,c+a._x,h+a._y,c,h];return n&&n._transformCoordinates(d,d,4),d},subdivide:function(e,t){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7];t===r&&(t=.5);var h=1-t,d=h*n+t*s,f=h*i+t*a,p=h*s+t*o,g=h*a+t*l,m=h*o+t*u,v=h*l+t*c,_=h*d+t*p,y=h*f+t*g,b=h*p+t*m,x=h*g+t*v,w=h*_+t*b,S=h*y+t*x;return[[n,i,d,f,_,y,w,S],[w,S,b,x,m,v,u,c]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,i=e[r+0],s=e[r+2],a=e[r+4],o=e[r+6];if(i>=s==s>=a&&s>=a==a>=o||L.isStraight(e))n.push(e);else{var l=3*(s-a)-i+o,u=2*(i+a)-4*s,c=s-i,h=[],f=d.solveQuadratic(l,u,c,h,1e-8,.99999999);if(f){h.sort();var p=h[0],g=L.subdivide(e,p);n.push(g[0]),f>1&&(p=(h[1]-p)/(1-p),g=L.subdivide(g[1],p),n.push(g[0])),n.push(g[1])}else n.push(e)}return n},solveCubic:function(e,t,n,r,i,s){var a=e[t],o=e[t+2],l=e[t+4],u=e[t+6],c=0;if(!(a<n&&u<n&&o<n&&l<n||a>n&&u>n&&o>n&&l>n)){var h=3*(o-a),f=3*(l-o)-h,p=u-a-h-f;c=d.solveCubic(p,f,h,a-n,r,i,s)}return c},getTimeOf:function(e,t){var n=new p(e[0],e[1]),r=new p(e[6],e[7]),i=1e-7;if(null===(t.isClose(n,1e-12)?0:t.isClose(r,1e-12)?1:null))for(var s=[t.x,t.y],a=[],o=0;o<2;o++)for(var l=L.solveCubic(e,o,s[o],a,0,1),u=0;u<l;u++){var c=a[u];if(t.isClose(L.getPoint(e,c),i))return c}return t.isClose(n,i)?0:t.isClose(r,i)?1:null},getNearestTime:function(e,t){if(L.isStraight(e)){var n=e[0],r=e[1],i=e[6]-n,s=e[7]-r,a=i*i+s*s;if(0===a)return 0;var o=((t.x-n)*i+(t.y-r)*s)/a;return o<1e-12?0:o>.999999999999?1:L.getTimeOf(e,new p(n+o*i,r+o*s))}var l=1/0,u=0;function c(n){if(n>=0&&n<=1){var r=t.getDistance(L.getPoint(e,n),!0);if(r<l)return l=r,u=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var d=.005;d>1e-8;)!c(u-d)&&!c(u+d)&&(d/=2);return u},getPart:function(e,t,n){var r=t>n;if(r){var i=t;t=n,n=i}return t>0&&(e=L.subdivide(e,t)[1]),n<1&&(e=L.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=3*i-2*n-l,h=3*s-2*r-u,d=3*a-2*l-n,f=3*o-2*u-r;return Math.max(c*c,d*d)+Math.max(h*h,f*f)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7];return 3*((l-n)*(r+s)-(o-t)*(i+a)+i*(t-s)-r*(n-a)+l*(s+t/3)-o*(a+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],i=0;i<2;i++)L._addBounds(e[i],e[i+2],e[i+4],e[i+6],i,0,t,n,r);return new _(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,i,s,a,o,l){function u(e,t){var n=e-t,r=e+t;n<a[i]&&(a[i]=n),r>o[i]&&(o[i]=r)}s/=2;var c=a[i]+s,h=o[i]-s;if(e<c||t<c||n<c||r<c||e>h||t>h||n>h||r>h)if(t<e!=t<r&&n<e!=n<r)u(e,0),u(r,0);else{var f=3*(t-n)-e+r,p=2*(e+n)-4*t,g=t-e,m=d.solveQuadratic(f,p,g,l);u(r,0);for(var v=0;v<m;v++){var _=l[v],y=1-_;1e-8<=_&&_<=.99999999&&u(y*y*y*e+3*y*y*_*t+3*y*_*_*n+_*_*_*r,s)}}}}},a.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=N[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),a.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var i=r.subtract(e);if(i.isZero())return!1;if(i.isCollinear(t)&&i.isCollinear(n)){var s=new x(e,r);if(s.getDistance(e.add(t))<1e-7&&s.getDistance(r.add(n))<1e-7){var a=i.dot(i),o=i.dot(t)/a,l=i.dot(n)/a;return o>=0&&o<=1&&l<=0&&l>=-1}}return!1},isLinear:function(e,t,n,r){var i=r.subtract(e).divide(3);return t.equals(i)&&n.negate().equals(i)}},function(e,t){this[t]=function(t){var n=this._segment1,r=this._segment2;return e(n._point,n._handleOut,r._handleIn,r._point,t)},this.statics[t]=function(t,n){var r=t[0],i=t[1],s=t[6],a=t[7];return e(new p(r,i),new p(t[2]-r,t[3]-i),new p(t[4]-s,t[5]-a),new p(s,a),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new P(this,e):null},getTimeAt:function(e,t){return L.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=p.read(arguments);return e.isZero()?[]:L.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(p.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return L.getTimeOf(this.getValues(),p.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=p.read(arguments),t=this.getValues(),n=L.getNearestTime(t,e),r=L.getPoint(t,n);return new P(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return a.each(e,function(e){this[e+"At"]=function(t,n){var r=this.getValues();return L[e](r,n?t:L.getTimeAt(r,t))},this[e+"AtTime"]=function(t){return L[e](this.getValues(),t)}},{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=9*(r-s)+3*(o-t),c=6*(t+s)-12*r,h=3*(r-t),d=9*(i-a)+3*(l-n),f=6*(n+a)-12*i,p=3*(i-n);return function(e){var t=(u*e+c)*e+h,n=(d*e+f)*e+p;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function n(e,t,n,r){if(null==t||t<0||t>1)return null;var i=e[0],s=e[1],a=e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],f=d.isZero;f(a-i)&&f(o-s)&&(a=i,o=s),f(l-c)&&f(u-h)&&(l=c,u=h);var g,m,v=3*(a-i),_=3*(l-a)-v,y=c-i-v-_,b=3*(o-s),x=3*(u-o)-b,w=h-s-b-x;if(0===n)g=0===t?i:1===t?c:((y*t+_)*t+v)*t+i,m=0===t?s:1===t?h:((w*t+x)*t+b)*t+s;else{var S=1e-8,C=1-S;if(t<S?(g=v,m=b):t>C?(g=3*(c-l),m=3*(h-u)):(g=(3*y*t+2*_)*t+v,m=(3*w*t+2*x)*t+b),r){0===g&&0===m&&(t<S||t>C)&&(g=l-a,m=u-o);var D=Math.sqrt(g*g+m*m);D&&(g/=D,m/=D)}if(3===n){l=6*y*t+2*_,u=6*w*t+2*x;var E=Math.pow(g*g+m*m,1.5);g=0!==E?(g*u-m*l)/E:0,m=0}}return 2===n?new p(m,-g):new p(g,m)}return{statics:{classify:function(e){var t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=i*(n-u)+s*(l-t)+t*u-n*l,h=3*(a*(s-n)+o*(t-i)+i*n-s*t),f=h-c,p=f-c+(t*(u-o)+n*(a-l)+l*o-u*a),g=Math.sqrt(p*p+f*f+h*h),m=0!==g?1/g:0,v=d.isZero,_="serpentine";function y(e,t,n){var i=t!==r,s=i&&t>0&&t<1,a=i&&n>0&&n<1;return i&&(!(s||a)||"loop"===e&&!(s&&a))&&(e="arch",s=a=!1),{type:e,roots:s||a?s&&a?t<n?[t,n]:[n,t]:[s?t:n]:null}}if(f*=m,h*=m,v(p*=m))return v(f)?y(v(h)?"line":"quadratic"):y(_,h/(3*f));var b=3*f*f-4*p*h;if(v(b))return y("cusp",f/(2*p));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),w=2*p;return y(b>0?_:"loop",(f+x)/w,(f-x)/w)},getLength:function(n,i,s,a){if(i===r&&(i=0),s===r&&(s=1),L.isStraight(n)){var o=n;s<1&&(o=L.subdivide(o,s)[0],i/=s),i>0&&(o=L.subdivide(o,i)[1]);var l=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(l*l+u*u)}return d.integrate(a||e(n),i,s,t(i,s))},getTimeAt:function(n,i,s){if(s===r&&(s=i<0?1:0),0===i)return s;var a=Math.abs,o=i>0,l=o?s:0,u=o?1:s,c=e(n),h=L.getLength(n,l,u,c),f=a(i)-h;if(a(f)<1e-12)return o?u:l;if(f>1e-12)return null;var p=i/h,g=0;return d.findRoot(function(e){return g+=d.integrate(c,s,e,t(s,e)),s=e,g-i},c,s+p,l,u,32,1e-12)},getPoint:function(e,t){return n(e,t,0,!1)},getTangent:function(e,t){return n(e,t,1,!0)},getWeightedTangent:function(e,t){return n(e,t,1,!1)},getNormal:function(e,t){return n(e,t,2,!0)},getWeightedNormal:function(e,t){return n(e,t,2,!1)},getCurvature:function(e,t){return n(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=3*r-t-3*s+e[6],l=3*t-6*r+3*s,u=-3*t+3*r,c=3*i-n-3*a+e[7],h=3*n-6*i+3*a,f=-3*n+3*i,p=[];return d.solveCubic(9*(o*o+c*c),9*(o*l+h*c),2*(l*l+h*h)+3*(u*o+f*c),u*l+h*f,p,1e-8,.99999999),p.sort()}}}},new function(){function e(e,t,n,r,i,s,a){var o=!a&&n.getPrevious()===i,l=!a&&n!==i&&n.getNext()===i,u=1e-8,c=1-u;if(null!==r&&r>=(o?u:0)&&r<=(l?c:1)&&null!==s&&s>=(l?u:0)&&s<=(o?c:1)){var h=new P(n,r,null,a),d=new P(i,s,null,a);h._intersection=d,d._intersection=h,(!t||t(h))&&P.insert(e,h,!0)}}function t(r,i,s,a,o,l,u,c,h,d,f,p,g){if(++h>=4096||++c>=40)return h;var m,v,_=i[0],y=i[1],b=i[6],w=i[7],S=x.getSignedDistance,C=S(_,y,b,w,i[2],i[3]),D=S(_,y,b,w,i[4],i[5]),E=C*D>0?3/4:4/9,A=E*Math.min(0,C,D),k=E*Math.max(0,C,D),M=S(_,y,b,w,r[0],r[1]),T=S(_,y,b,w,r[2],r[3]),I=S(_,y,b,w,r[4],r[5]),O=S(_,y,b,w,r[6],r[7]),P=function(e,t,n,r){var i,s=[0,e],a=[1/3,t],o=[2/3,n],l=[1,r],u=t-(2*e+r)/3,c=n-(e+2*r)/3;if(u*c<0)i=[[s,a,l],[s,o,l]];else{var h=u/c;i=[h>=2?[s,a,l]:h<=.5?[s,o,l]:[s,a,o,l],[s,l]]}return(u||c)<0?i.reverse():i}(M,T,I,O),B=P[0],N=P[1];if(0===C&&0===D&&0===M&&0===T&&0===I&&0===O||null==(m=n(B,N,A,k))||null==(v=n(B.reverse(),N.reverse(),A,k)))return h;var R=d+(f-d)*m,F=d+(f-d)*v;if(Math.max(g-p,F-R)<1e-9){var z=(R+F)/2,j=(p+g)/2;e(o,l,u?a:s,u?j:z,u?s:a,u?z:j)}else{r=L.getPart(r,m,v);var V=g-p;if(v-m>.8)if(F-R>V)z=(R+F)/2,h=t(i,(U=L.subdivide(r,.5))[0],a,s,o,l,!u,c,h,p,g,R,z),h=t(i,U[1],a,s,o,l,!u,c,h,p,g,z,F);else{var U;j=(p+g)/2,h=t((U=L.subdivide(i,.5))[0],r,a,s,o,l,!u,c,h,p,j,R,F),h=t(U[1],r,a,s,o,l,!u,c,h,j,g,R,F)}else h=0===V||V>=1e-9?t(i,r,a,s,o,l,!u,c,h,p,g,R,F):t(r,i,s,a,o,l,u,c,h,R,F,p,g)}return h}function n(e,t,n,i){return e[0][1]<n?r(e,!0,n):t[0][1]>i?r(t,!1,i):e[0][0]}function r(e,t,n){for(var r=e[0][0],i=e[0][1],s=1,a=e.length;s<a;s++){var o=e[s][0],l=e[s][1];if(t?l>=n:l<=n)return l===n?o:r+(n-i)*(o-r)/(l-i);r=o,i=l}return null}function i(e,t,n,r,i){var s=d.isZero;if(s(r)&&s(i)){var a=L.getTimeOf(e,new p(t,n));return null===a?[]:[a]}for(var o=Math.atan2(-i,r),l=Math.sin(o),u=Math.cos(o),c=[],h=[],f=0;f<8;f+=2){var g=e[f]-t,m=e[f+1]-n;c.push(g*u-m*l,g*l+m*u)}return L.solveCubic(c,1,0,h,0,1),h}function s(t,n,r,s,a,o,l){for(var u=n[0],c=n[1],h=i(t,u,c,n[6]-u,n[7]-c),d=0,f=h.length;d<f;d++){var p=h[d],g=L.getPoint(t,p),m=L.getTimeOf(n,g);null!==m&&e(a,o,l?s:r,l?m:p,l?r:s,l?p:m)}}function a(t,n,r,i,s,a){var o=x.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);o&&e(s,a,r,L.getTimeOf(t,o),i,L.getTimeOf(n,o))}function o(n,r,i,o,l,c){var h=1e-12,d=Math.min,f=Math.max;if(f(n[0],n[2],n[4],n[6])+h>d(r[0],r[2],r[4],r[6])&&d(n[0],n[2],n[4],n[6])-h<f(r[0],r[2],r[4],r[6])&&f(n[1],n[3],n[5],n[7])+h>d(r[1],r[3],r[5],r[7])&&d(n[1],n[3],n[5],n[7])-h<f(r[1],r[3],r[5],r[7])){var g=u(n,r);if(g)for(var m=0;m<2;m++){var v=g[m];e(l,c,i,v[0],o,v[1],!0)}else{var _=L.isStraight(n),y=L.isStraight(r),b=_&&y,x=_&&!y,w=l.length;if((b?a:_||y?s:t)(x?r:n,x?n:r,x?o:i,x?i:o,l,c,x,0,0,0,1,0,1),!b||l.length===w)for(m=0;m<4;m++){var S=m>>1,C=1&m,D=6*S,E=6*C,A=new p(n[D],n[D+1]),k=new p(r[E],r[E+1]);A.isClose(k,h)&&e(l,c,i,S,o,C)}}}return l}function l(t,n,r,i){var s=L.classify(t);if("loop"===s.type){var a=s.roots;e(r,i,n,a[0],n,a[1])}return r}function u(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var r=Math.abs,i=x.getDistance,s=1e-7,a=L.isStraight(e),o=L.isStraight(t),l=a&&o,u=n(e)<n(t),c=u?t:e,h=u?e:t,d=c[0],f=c[1],g=c[6]-d,m=c[7]-f;if(i(d,f,g,m,h[0],h[1],!0)<s&&i(d,f,g,m,h[6],h[7],!0)<s)!l&&i(d,f,g,m,c[2],c[3],!0)<s&&i(d,f,g,m,c[4],c[5],!0)<s&&i(d,f,g,m,h[2],h[3],!0)<s&&i(d,f,g,m,h[4],h[5],!0)<s&&(a=o=l=!0);else if(l)return null;if(a^o)return null;for(var v=[e,t],_=[],y=0;y<4&&_.length<2;y++){var b=1&y,w=1^b,S=y>>1,C=L.getTimeOf(v[b],new p(v[w][S?6:0],v[w][S?7:1]));if(null!=C){var D=b?[S,C]:[C,S];(!_.length||r(D[0]-_[0][0])>1e-8&&r(D[1]-_[0][1])>1e-8)&&_.push(D)}if(y>2&&!_.length)break}if(2!==_.length)_=null;else if(!l){var E=L.getPart(e,_[0][0],_[1][0]),A=L.getPart(t,_[0][1],_[1][1]);(r(A[2]-E[2])>s||r(A[3]-E[3])>s||r(A[4]-E[4])>s||r(A[5]-E[5])>s)&&(_=null)}return _}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?o(t,n,this,e,[]):l(t,this,[])},statics:{getOverlaps:u,getIntersections:function(e,t,n,r,i,s){var a=!t;a&&(t=e);for(var u=e.length,h=t.length,d=new Array(u),f=a?d:new Array(h),p=[],g=0;g<u;g++)d[g]=e[g].getValues(r);if(!a)for(g=0;g<h;g++)f[g]=t[g].getValues(i);for(var m=c.findCurveBoundsCollisions(d,f,1e-7),v=0;v<u;v++){var _=e[v],y=d[v];a&&l(y,_,p,n);var b=m[v];if(b)for(var x=0;x<b.length;x++){if(s&&p.length)return p;var w=b[x];if(!a||w>v){var S=t[w];o(y,f[w],_,S,p,n)}}}return p},getCurveLineIntersections:i,getTimesWithTangent:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=t.normalize(),h=c.x,f=c.y,p=3*l-9*a+9*i-3*n,g=3*u-9*o+9*s-3*r,m=6*a-12*i+6*n,v=6*o-12*s+6*r,_=3*i-3*n,y=3*s-3*r,b=2*p*f-2*g*h,x=[];if(Math.abs(b)<d.CURVETIME_EPSILON){if(0!=(b=p*v-g*m)){var w=-(p*y-g*_)/b;w>=0&&w<=1&&x.push(w)}}else{var S=(m*m-4*p*_)*f*f+(-2*m*v+4*g*_+4*p*y)*h*f+(v*v-4*g*y)*h*h,C=m*f-v*h;if(S>=0&&0!=b){var D=Math.sqrt(S),E=-(C+D)/b,A=(-C+D)/b;E>=0&&E<=1&&x.push(E),A>=0&&A<=1&&x.push(A)}}return x}}}}),P=a.extend({_class:"CurveLocation",initialize:function(e,t,n,r,i){if(t>=.99999999){var s=e.getNext();s&&(t=0,e=s)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function n(e){var n=e&&e.getCurve();if(n&&null!=(t._time=n.getTimeOf(t._point)))return t._setCurve(n),n}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var r=t.getCurves(),i=0;i<n;i++)e+=r[i].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof P){var r=this.getCurve(),i=e.getCurve(),s=r._path;if(s===i._path){var a=Math.abs,o=a(this.getOffset()-e.getOffset()),l=!t&&this._intersection,u=!t&&e._intersection;n=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=h.instance;t&&e.push("point: "+t);var r=this.getIndex();null!=r&&e.push("index: "+r);var i=this.getTime();return null!=i&&e.push("time: "+n.number(i)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,i=1-r,s=t>=r&&t<=i,a=n>=r&&n<=i;if(s&&a)return!this.isTouching();var o=this.getCurve(),l=o&&t<r?o.getPrevious():o,u=e.getCurve(),c=u&&n<r?u.getPrevious():u;if(t>i&&(o=o.getNext()),n>i&&(u=u.getNext()),!l||!o||!c||!u)return!1;var h=[];function d(e,t){var n=e.getValues(),r=L.classify(n).roots||L.getPeaks(n),i=r.length,s=L.getLength(n,t&&i?r[i-1]:0,!t&&i?r[0]:1);h.push(i?s:s/32)}function f(e,t,n){return t<n?e>t&&e<n:e>t||e<n}s||(d(l,!0),d(o,!1)),a||(d(c,!0),d(u,!1));var p=this.getPoint(),g=Math.min.apply(Math,h),m=s?o.getTangentAtTime(t):o.getPointAt(g).subtract(p),v=s?m.negate():l.getPointAt(-g).subtract(p),_=a?u.getTangentAtTime(n):u.getPointAt(g).subtract(p),y=a?_.negate():c.getPointAt(-g).subtract(p),b=v.getAngle(),x=m.getAngle(),w=y.getAngle(),S=_.getAngle();return!!(s?f(b,w,S)^f(x,w,S)&&f(b,S,w)^f(x,S,w):f(w,b,x)^f(S,b,x)&&f(w,x,b)^f(S,x,b))},hasOverlap:function(){return!!this._overlap}},a.each(L._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}},{preserve:!0}),new function(){function e(e,t,n){var r=e.length,i=0,s=r-1;function a(n,i){for(var s=n+i;s>=-1&&s<=r;s+=i){var a=e[(s%r+r)%r];if(!t.getPoint().isClose(a.getPoint(),1e-7))break;if(t.equals(a))return a}return null}for(;i<=s;){var o,l=i+s>>>1,u=e[l];if(n&&(o=t.equals(u)?u:a(l,-1)||a(l,1)))return t._overlap&&(o._overlap=o._intersection._overlap=!0),o;var c=t.getPath(),h=u.getPath();(c!==h?c._id-h._id:t.getIndex()+t.getTime()-(u.getIndex()+u.getTime()))<0?s=l-1:i=l+1}return e.splice(i,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),B=S.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(a.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"==typeof e&&(t=e),n){var i=n[0];r=i&&Array.isArray(i[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(r?R:N)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t,n,r,i=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,a=new p,o=new p;function l(e,n){var r=+t[e];return s&&(r+=a[n]),r}function u(e){return new p(l(e,"x"),l(e+1,"y"))}this.clear();for(var c=0,h=i&&i.length;c<h;c++){var d=i[c],f=d[0],g=f.toLowerCase(),v=(t=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&t.length;switch(s=f===g,"z"===n&&!/[mz]/.test(g)&&this.moveTo(a),g){case"m":case"l":for(var _="m"===g,y=0;y<v;y+=2)this[_?"moveTo":"lineTo"](a=u(y)),_&&(o=a,_=!1);r=a;break;case"h":case"v":var b="h"===g?"x":"y";for(a=a.clone(),y=0;y<v;y++)a[b]=l(y,b),this.lineTo(a);r=a;break;case"c":for(y=0;y<v;y+=6)this.cubicCurveTo(u(y),r=u(y+2),a=u(y+4));break;case"s":for(y=0;y<v;y+=4)this.cubicCurveTo(/[cs]/.test(n)?a.multiply(2).subtract(r):a,r=u(y),a=u(y+2)),n=g;break;case"q":for(y=0;y<v;y+=4)this.quadraticCurveTo(r=u(y),a=u(y+2));break;case"t":for(y=0;y<v;y+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?a.multiply(2).subtract(r):a,a=u(y)),n=g;break;case"a":for(y=0;y<v;y+=7)this.arcTo(a=u(y+5),new m(+t[y],+t[y+1]),+t[y+2],+t[y+4],+t[y+3]);break;case"z":this.closePath(1e-12),a=o}n=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,r){var i=this===e||!e,s=this._matrix._orNullIfIdentity(),a=i?s:(n||e._matrix)._orNullIfIdentity();return i||this.getBounds(s).intersects(e.getBounds(a),1e-12)?L.getIntersections(this.getCurves(),!i&&e.getCurves(),t,s,a,r):[]},getCrossings:function(e){return this.getIntersections(e,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var e=p.read(arguments),t=this.getCurves(),n=1/0,r=null,i=0,s=t.length;i<s;i++){var a=t[i].getNearestLocation(e);a._distance<n&&(n=a._distance,r=a)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,i=r?"_segments":"_children",s=e[i],a=t[i],o=this[i];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=o.length,u=a.length;if(l<u)for(var c=r?I:N,h=l;h<u;h++)this.add(new c);else l>u&&this[r?"removeSegments":"removeChildren"](u,l);for(h=0;h<u;h++)o[h].interpolate(s[h],a[h],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],i=n.length,s=r.length,a=[],o=0;t=!0;for(var l=c.findItemBoundsCollisions(n,r,d.GEOMETRIC_EPSILON),u=i-1;u>=0&&t;u--){var h=n[u];t=!1;var f=l[u];if(f)for(var p=f.length-1;p>=0&&!t;p--)h.compare(r[f[p]])&&(a[f[p]]||(a[f[p]]=!0,o++),t=!0)}t=t&&o===s}return t}}),N=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,n=Array.isArray(e)?"object"==typeof e[0]?e:t:!e||e.size!==r||e.x===r&&e.point===r?null:t;n&&n.length>0?this.setSegments(n):(this._curves=r,this._segmentSelection=0,!n&&"string"==typeof e&&(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(e){return this._closed===e._closed&&a.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=r,32&t)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&t&&(this._bounds=r)},getStyle:function(){var e=this._parent;return(e instanceof R?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=r,n){var i=e[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(I.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new L(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new L(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n,r,i,s,a,o,l,u,c=this._segments,d=c.length,f=new h(t),p=new Array(6),g=!0,m=[];function v(t,c){if(t._transformCoordinates(e,p),n=p[0],r=p[1],g)m.push("M"+f.pair(n,r)),g=!1;else if(a=p[2],o=p[3],a===n&&o===r&&l===i&&u===s){if(!c){var h=n-i,d=r-s;m.push(0===h?"v"+f.number(d):0===d?"h"+f.number(h):"l"+f.pair(h,d))}}else m.push("c"+f.pair(l-i,u-s)+" "+f.pair(a-i,o-s)+" "+f.pair(n-i,r-s));i=n,s=r,l=p[4],u=p[5]}if(!d)return"";for(var _=0;_<d;_++)v(c[_]);return this._closed&&d>0&&(v(c[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,i=t.length;r<i;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,r=this._curves,i=e.length,s=null==t,o=(t=s?n.length:t,0);o<i;o++){var l=e[o];l._path&&(l=e[o]=l.clone()),l._path=this,l._index=t+o,l._selection&&this._updateSelection(l,0,l._selection)}if(s)a.push(n,e);else{n.splice.apply(n,[t,0].concat(e)),o=t+i;for(var u=n.length;o<u;o++)n[o]._index=o}if(r){var c=this._countCurves(),h=t>0&&t+i-1===c?t-1:t,d=h,f=Math.min(h+i,c);for(e._curves&&(r.splice.apply(r,[h,0].concat(e._curves)),d+=e._curves.length),o=d;o<f;o++)r.splice(o,0,new L(this,null,null));this._adjustCurves(h,f)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n,r=this._segments,i=this._curves,s=e;s<t;s++)(n=i[s])._path=this,n._segment1=r[s],n._segment2=r[s+1]||r[0],n._changed();(n=i[this._closed&&!e?r.length-1:e-1])&&(n._segment2=r[e]||r[0],n._changed()),(n=i[t])&&(n._segment1=r[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!=typeof e?this._add(I.readList(t)):this._add([I.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&"number"!=typeof t?this._add(I.readList(n,1),e):this._add([I.read(n,1)],e)[0]},addSegment:function(){return this._add([I.read(arguments)])[0]},insertSegment:function(e){return this._add([I.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(I.readList(e))},insertSegments:function(e,t){return this._add(I.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=a.pick(t,this._segments.length);var r=this._segments,i=this._curves,s=r.length,o=r.splice(e,t-e),l=o.length;if(!l)return o;for(var u=0;u<l;u++){var c=o[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}u=e;for(var h=r.length;u<h;u++)r[u]._index=u;if(i){var d=e>0&&t===s+(this._closed?1:0)?e-1:e;for(u=(i=i.splice(d,l)).length-1;u>=0;u--)i[u]._path=null;n&&(o._curves=i.slice(1)),this._adjustCurves(d,d)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var r=0,i=t.length;r<i;r++){var s=r+1===i;e+=L.getArea(L.getValues(t[r],t[s?0:r+1],null,s&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)t[i]._selection=r},_updateSelection:function(e,t,n){e._selection=n,(this._segmentSelection+=n-t)>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time;r>.99999999&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var s,a=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new N(S.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(e,t){var n,i=t===r?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return null!=i?this.splitAt(i):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,i=this.getLastSegment(),s=e.getLastSegment();if(!s)return this;i&&i._point.isClose(s._point,n)&&e.reverse();var a=e.getFirstSegment();if(i&&i._point.isClose(a._point,n))i.setHandleOut(a._handleOut),this._add(r.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,n)&&e.reverse(),s=e.getLastSegment(),o&&o._point.isClose(s._point,n)?(o.setHandleIn(s._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,i=t.length-1;i>=0;i--){var s=t[i];!s.hasHandles()&&(!s.hasLength(r)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new F(this,e||.25,256,!0).parts,n=t.length,r=[],i=0;i<n;i++)r.push(new I(t[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new I(t[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(e){var t=new z(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},i=n.type||"asymmetric",s=this._segments,a=s.length,o=this._closed;function l(e,n){var r=e&&e.index;if(null!=r){var i=e.path;if(i&&i!==t)throw new Error(e._class+" "+r+" of "+i+" is not part of "+t);n&&e instanceof L&&r++}else r="number"==typeof e?e:n;return Math.min(r<0&&o?r%a:r<0?r+a:r,a-1)}var u=o&&n.from===r&&n.to===r,c=l(n.from,0),h=l(n.to,a-1);if(c>h)if(o)c-=a;else{var d=c;c=h,h=d}if(/^(?:asymmetric|continuous)$/.test(i)){var f="asymmetric"===i,p=Math.min,g=h-c+1,m=g-1,v=u?p(g,4):1,_=v,y=v,b=[];if(o||(_=p(1,c),y=p(1,a-h-1)),(m+=_+y)<=1)return;for(var x=0,w=c-_;x<=m;x++,w++)b[x]=s[(w<0?w+a:w)%a]._point;var S=b[0]._x+2*b[1]._x,C=b[0]._y+2*b[1]._y,D=2,E=m-1,A=[S],k=[C],M=[D],T=[],I=[];for(x=1;x<m;x++){var O=x<E,P=O?4:f?2:7,B=O?4:f?3:8,N=O?2:f?0:1,R=(O||f?1:2)/D;D=M[x]=P-R,S=A[x]=B*b[x]._x+N*b[x+1]._x-R*S,C=k[x]=B*b[x]._y+N*b[x+1]._y-R*C}for(T[E]=A[E]/M[E],I[E]=k[E]/M[E],x=m-2;x>=0;x--)T[x]=(A[x]-T[x+1])/M[x],I[x]=(k[x]-I[x+1])/M[x];T[m]=(3*b[m]._x-T[E])/2,I[m]=(3*b[m]._y-I[E])/2,x=_;var F=m-y;for(w=c;x<=F;x++,w++){var z=s[w<0?w+a:w],j=z._point,V=T[x]-j._x,U=I[x]-j._y;(u||x<F)&&z.setHandleOut(V,U),(u||x>_)&&z.setHandleIn(-V,-U)}}else for(x=c;x<=h;x++)s[x<0?x+a:x].smooth(n,!u&&x===c,!u&&x===h)},toShape:function(e){if(!this._closed)return null;var t,n,i,s,a=this._segments;function o(e,t){var n=a[e],r=n.getNext(),i=a[t],s=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&s._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(s._point.subtract(i._point))}function l(e){var t=a[e],n=t.getNext(),r=t._handleOut,i=n._handleIn,s=.5522847498307936;if(r.isOrthogonal(i)){var o=t._point,l=n._point,u=new x(o,r,!0).intersect(new x(l,i,!0),!0);return u&&d.isZero(r.getLength()/u.subtract(o).getLength()-s)&&d.isZero(i.getLength()/u.subtract(l).getLength()-s)}return!1}function u(e,t){return a[e]._point.getDistance(a[t]._point)}if(!this.hasHandles()&&4===a.length&&o(0,2)&&o(1,3)&&function(e){var t=a[e],n=t.getPrevious(),r=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&r._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(r._point.subtract(t._point))}(1)?(t=E.Rectangle,n=new m(u(0,3),u(0,1)),s=a[1]._point.add(a[2]._point).divide(2)):8===a.length&&l(0)&&l(2)&&l(4)&&l(6)&&o(1,5)&&o(3,7)?(t=E.Rectangle,i=(n=new m(u(1,6),u(0,3))).subtract(new m(u(0,7),u(1,2))).divide(2),s=a[3]._point.add(a[4]._point).divide(2)):4===a.length&&l(0)&&l(1)&&l(2)&&l(3)&&(d.isZero(u(0,2)-u(1,3))?(t=E.Circle,i=u(0,2)/2):(t=E.Ellipse,i=new m(u(2,0)/2,u(3,1)/2)),s=a[1]._point),t){var c=this.getPosition(!0),h=new t({center:c,size:n,radius:i,insert:!1});return h.copyAttributes(this,!0),h._matrix.prepend(this._matrix),h.rotate(s.subtract(c).getAngle()+90),(e===r||e)&&h.insertAbove(this),h}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof R)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),i=n.length,s=r.length;if(!i||!s)return i==s;for(var a,o,l=n[0].getValues(),u=[],c=0,h=0,d=0;d<s;d++){var f=r[d].getValues();if(u.push(f),m=L.getOverlaps(l,f)){a=!d&&m[0][0]>0?s-1:d,o=m[0][1];break}}var p,g=Math.abs;for(f=u[a];l&&f;){var m;if((m=L.getOverlaps(l,f))&&g(m[0][0]-h)<1e-8){1===(h=m[1][0])&&(l=++c<i?n[c].getValues():null,h=0);var v=m[0][1];if(g(v-o)<1e-8){if(p||(p=[a,v]),1===(o=m[1][1])&&(++a>=s&&(a=0),f=u[a]||r[a].getValues(),o=0),!l)return p[0]===a&&p[1]===o;continue}}break}return!1},_hitTestSelf:function(e,t,n,r){var i,s,a,o,l,u,c=this,h=this.getStyle(),d=this._segments,f=d.length,p=this._closed,g=t._tolerancePadding,m=g,v=t.stroke&&h.hasStroke(),_=t.fill&&h.hasFill(),y=t.curves,b=v?h.getStrokeWidth()/2:_&&t.tolerance>0||y?0:null;function x(t,n){return e.subtract(t).divide(n).length<=1}function w(e,n,r){if(!t.selected||n.isSelected()){var i=e._point;if(n!==i&&(n=n.add(i)),x(n,m))return new T(r,c,{segment:e,point:n})}}function S(e,n){return(n||t.segments)&&w(e,e._point,"segment")||!n&&t.handles&&(w(e,e._handleIn,"handle-in")||w(e,e._handleOut,"handle-out"))}function C(e){o.add(e)}function D(t){var n,l=p||t._index>0&&t._index<f-1;return"round"===(l?i:s)?x(t._point,m):(o=new N({internal:!0,closed:!0}),l?t.isSmooth()||N._addBevelJoin(t,i,b,a,null,r,C,!0):"square"===s&&N._addSquareCap(t,s,b,null,r,C,!0),o.isEmpty()?void 0:o.contains(e)||(n=o.getNearestLocation(e))&&x(n.getPoint(),g))}if(null!==b&&(b>0?(i=h.getStrokeJoin(),s=h.getStrokeCap(),a=h.getMiterLimit(),m=m.add(N._getStrokePadding(b,r))):i=s="round"),!t.ends||t.segments||p){if(t.segments||t.handles)for(var E=0;E<f;E++)if(u=S(d[E]))return u}else if(u=S(d[0],!0)||S(d[f-1],!0))return u;if(null!==b){if(l=this.getNearestLocation(e)){var A=l.getTime();0===A||1===A&&f>1?D(l.getSegment())||(l=null):x(l.getPoint(),m)||(l=null)}if(!l&&"miter"===i&&f>1)for(E=0;E<f;E++){var k=d[E];if(e.getDistance(k._point)<=a*b&&D(k)){l=k.getLocation();break}}}return!l&&_&&this._contains(e)||l&&!v&&!y?new T("fill",this):l?new T(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},a.each(L._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=p.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var i=t[n].getLocationOf(e);if(i)return i}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),n=0,r=0,i=t.length;r<i;r++){var s=n,a=t[r];if((n+=a.getLength())>e)return a.getLocationAt(e-s)}if(t.length>0&&e<=this.getLength())return new P(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=p.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),i=0,s=r.length;i<s;i++){for(var a=r[i],o=a.getTimesWithTangent(e),l=0,u=o.length;l<u;l++){var c=n+a.getOffsetAtTime(o[l]);t.indexOf(c)<0&&t.push(c)}n+=a.length}return t}}),new function(){function e(e,t,n){var r,i,s,a,o,l,u,c,h=t._segments,d=h.length,f=new Array(6),p=!0;function g(t){if(n)t._transformCoordinates(n,f),r=f[0],i=f[1];else{var h=t._point;r=h._x,i=h._y}if(p)e.moveTo(r,i),p=!1;else{if(n)o=f[2],l=f[3];else{var d=t._handleIn;o=r+d._x,l=i+d._y}o===r&&l===i&&u===s&&c===a?e.lineTo(r,i):e.bezierCurveTo(u,c,o,l,r,i)}s=r,a=i,n?(u=f[4],c=f[5]):(d=t._handleOut,u=s+d._x,c=a+d._y)}for(var m=0;m<d;m++)g(h[m]);t._closed&&d>0&&g(h[0])}return{_draw:function(t,n,r,i){var s=n.dontStart,a=n.dontFinish||n.clip,o=this.getStyle(),l=o.hasFill(),u=o.hasStroke(),c=o.getDashArray(),h=!le.support.nativeDash&&u&&c&&c.length;function d(e){return c[(e%h+h)%h]}if(s||t.beginPath(),(l||u&&!h||a)&&(e(t,this,i),this._closed&&t.closePath()),!a&&(l||u)&&(this._setStyles(t,n,r),l&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(h){s||t.beginPath();for(var f,p=new F(this,.25,32,!1,i),g=p.length,m=-o.getDashOffset(),v=0;m>0;)m-=d(v--)+d(v--);for(;m<g;)f=m+d(v++),(m>0||f>0)&&p.drawPart(t,Math.max(m,0),Math.max(f,0)),m=f+d(v++)}t.stroke()}},_drawSelected:function(t,n){t.beginPath(),e(t,this,n),t.stroke(),function(e,t,n,r){if(!(r<=0))for(var i,s,a=r/2,o=r-2,l=a-1,u=new Array(6),c=0,h=t.length;c<h;c++){var d=t[c],f=d._selection;if(d._transformCoordinates(n,u),i=u[0],s=u[1],2&f&&g(2),4&f&&g(4),e.fillRect(i-a,s-a,r,r),o>0&&!(1&f)){var p=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(i-l,s-l,o,o),e.fillStyle=p}}function g(t){var n=u[t],r=u[t+1];(i!=n||s!=r)&&(e.beginPath(),e.moveTo(i,s),e.lineTo(n,r),e.stroke(),e.beginPath(),e.arc(n,r,a,0,2*Math.PI,!0),e.fill())}}(t,this._segments,n,le.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new I(p.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new I(p.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=p.read(t),r=p.read(t),i=p.read(t),s=e(this);s.setHandleOut(n.subtract(s._point)),this._add([new I(i,r.subtract(i))])},quadraticCurveTo:function(){var t=arguments,n=p.read(t),r=p.read(t),i=e(this)._point;this.cubicCurveTo(n.add(i.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=p.read(t),r=p.read(t),i=a.pick(a.read(t),.5),s=1-i,o=e(this)._point,l=n.subtract(o.multiply(s*s)).subtract(r.multiply(i*i)).divide(2*i*s);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(l,r)},arcTo:function(){var t,n,r,i,s=arguments,o=Math.abs,l=Math.sqrt,u=e(this),c=u._point,h=p.read(s),f=a.peek(s);if("boolean"==typeof(w=a.pick(f,!0)))var g=(C=c.add(h).divide(2)).add(C.subtract(c).rotate(w?-90:90));else if(a.remain(s)<=2)g=h,h=p.read(s);else if(!c.equals(h)){var v=m.read(s),_=d.isZero;if(_(v.width)||_(v.height))return this.lineTo(h);var y=a.read(s),w=!!a.read(s),S=!!a.read(s),C=c.add(h).divide(2),D=(q=c.subtract(C).rotate(-y)).x,E=q.y,A=o(v.width),k=o(v.height),M=A*A,T=k*k,O=D*D,L=E*E,P=l(O/M+L/T);if(P>1&&(M=(A*=P)*A,T=(k*=P)*k),o(P=(M*T-M*L-T*O)/(M*L+T*O))<1e-12&&(P=0),P<0)throw new Error("Cannot create an arc with the given arguments");t=new p(A*E/k,-k*D/A).multiply((S===w?-1:1)*l(P)).rotate(y).add(C),n=(r=(i=(new b).translate(t).rotate(y).scale(A,k))._inverseTransform(c)).getDirectedAngle(i._inverseTransform(h)),!w&&n>0?n-=360:w&&n<0&&(n+=360)}if(g){var B=new x(c.add(g).divide(2),g.subtract(c).rotate(90),!0),N=new x(g.add(h).divide(2),h.subtract(g).rotate(90),!0),R=new x(c,h),F=R.getSide(g);if(!(t=B.intersect(N,!0))){if(!F)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(r=c.subtract(t)).getDirectedAngle(h.subtract(t));var z=R.getSide(t,!0);0===z?n=F*o(n):F===z&&(n+=n<0?360:-360)}if(n){for(var j=o(n),V=j>=360?4:Math.ceil((j-1e-5)/90),U=n/V,H=U*Math.PI/360,G=4/3*Math.sin(H)/(1+Math.cos(H)),Y=[],W=0;W<=V;W++){var q=h,Z=null;if(W<V&&(Z=r.rotate(90).multiply(G),i?(q=i._transformPoint(r),Z=i._transformPoint(r.add(Z)).subtract(q)):q=t.add(r)),W){var K=r.rotate(-90).multiply(G);i&&(K=i._transformPoint(r.add(K)).subtract(q)),Y.push(new I(q,K,Z))}else u.setHandleOut(Z);r=r.rotate(U)}this._add(Y)}},lineBy:function(){var t=p.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=p.read(t),r=p.read(t),i=a.read(t),s=e(this)._point;this.curveTo(s.add(n),s.add(r),i)},cubicCurveBy:function(){var t=arguments,n=p.read(t),r=p.read(t),i=p.read(t),s=e(this)._point;this.cubicCurveTo(s.add(n),s.add(r),s.add(i))},quadraticCurveBy:function(){var t=arguments,n=p.read(t),r=p.read(t),i=e(this)._point;this.quadraticCurveTo(i.add(n),i.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(p.read(t)),i=a.pick(a.peek(t),!0);"boolean"==typeof i?this.arcTo(r,i):this.arcTo(r,n.add(p.read(t)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return N[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,i,s){var a=e[0];if(!a)return new _;var o=new Array(6),l=a._transformCoordinates(r,new Array(6)),u=l.slice(0,2),c=u.slice(),h=new Array(2);function d(e){e._transformCoordinates(r,o);for(var t=0;t<2;t++)L._addBounds(l[t],l[t+4],o[t+2],o[t],t,s?s[t]:0,u,c,h);var n=l;l=o,o=n}for(var f=1,p=e.length;f<p;f++)d(e[f]);return t&&d(a),new _(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(e,t,n,r,i){var s=n.getStyle(),a=s.hasStroke(),o=s.getStrokeWidth(),l=a&&n._getStrokeMatrix(r,i),u=a&&N._getStrokePadding(o,l),c=N.getBounds(e,t,n,r,i,u);if(!a)return c;var h=o/2,d=s.getStrokeJoin(),f=s.getStrokeCap(),p=s.getMiterLimit(),g=new _(new m(u));function v(e){c=c.include(e)}function y(e){c=c.unite(g.setCenter(e._point.transform(r)))}function b(e,t){"round"===t||e.isSmooth()?y(e):N._addBevelJoin(e,t,h,p,r,l,v)}function x(e,t){"round"===t?y(e):N._addSquareCap(e,t,h,r,l,v)}var w=e.length-(t?0:1);if(w>0){for(var S=1;S<w;S++)b(e[S],d);t?b(e[0],d):(x(e[0],f),x(e[e.length-1],f))}return c},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new p(e,0).transform(t),r=new p(0,e).transform(t),i=n.getAngleInRadians(),s=n.getLength(),a=r.getLength(),o=Math.sin(i),l=Math.cos(i),u=Math.tan(i),c=Math.atan2(a*u,s),h=Math.atan2(a,u*s);return[Math.abs(s*Math.cos(c)*l+a*Math.sin(c)*o),Math.abs(a*Math.sin(h)*l+s*Math.cos(h)*o)]},_addBevelJoin:function(e,t,n,r,i,s,a,o){var l=e.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(i),h=u.getNormalAtTime(1).multiply(n).transform(s),d=l.getNormalAtTime(0).multiply(n).transform(s),f=h.getDirectedAngle(d);if((f<0||f>=180)&&(h=h.negate(),d=d.negate()),o&&a(c),a(c.add(h)),"miter"===t){var g=new x(c.add(h),new p(-h.y,h.x),!0).intersect(new x(c.add(d),new p(-d.y,d.x),!0),!0);g&&c.getDistance(g)<=r*n&&a(g)}a(c.add(d))},_addSquareCap:function(e,t,n,r,i,s,a){var o=e._point.transform(r),l=e.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(i);"square"===t&&(a&&(s(o.subtract(u)),s(o.add(u))),o=o.add(u.rotate(-90))),s(o.add(u)),s(o.subtract(u))},getHandleBounds:function(e,t,n,r,i){var s,a,o=n.getStyle();if(i.stroke&&o.hasStroke()){var l=n._getStrokeMatrix(r,i),u=o.getStrokeWidth()/2,c=u;"miter"===o.getStrokeJoin()&&(c=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),s=N._getStrokePadding(u,l),a=N._getStrokePadding(c,l)}for(var h=new Array(6),d=1/0,f=-d,p=d,g=f,m=0,v=e.length;m<v;m++){e[m]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var b=y?s:a,x=b?b[0]:0,w=b?b[1]:0,S=h[y],C=h[y+1],D=S-x,E=S+x,A=C-w,k=C+w;D<d&&(d=D),E>f&&(f=E),A<p&&(p=A),k>g&&(g=k)}}return new _(d,p,f-d,g-p)}}});N.inject({statics:new function(){var e=.5522847498307936,t=[new I([-1,0],[0,e],[0,-e]),new I([0,-1],[-e,0],[e,0]),new I([1,0],[0,-e],[0,e]),new I([0,1],[e,0],[-e,0])];function n(e,t,n){var r=a.getNamed(n),i=new N(r&&(1==r.insert?S.INSERT:0==r.insert?S.NO_INSERT:null));return i._add(e),i._closed=t,i.set(r,S.INSERT)}function r(e,r,i){for(var s=new Array(4),a=0;a<4;a++){var o=t[a];s[a]=new I(o._point.multiply(r).add(e),o._handleIn.multiply(r),o._handleOut.multiply(r))}return n(s,!0,i)}return{Line:function(){var e=arguments;return n([new I(p.readNamed(e,"from")),new I(p.readNamed(e,"to"))],!1,e)},Circle:function(){var e=arguments,t=p.readNamed(e,"center"),n=a.readNamed(e,"radius");return r(t,new m(n),e)},Rectangle:function(){var t,r=arguments,i=_.readNamed(r,"rectangle"),s=m.readNamed(r,"radius",0,{readNull:!0}),a=i.getBottomLeft(!0),o=i.getTopLeft(!0),l=i.getTopRight(!0),u=i.getBottomRight(!0);if(!s||s.isZero())t=[new I(a),new I(o),new I(l),new I(u)];else{var c=(s=m.min(s,i.getSize(!0).divide(2))).width,h=s.height,d=c*e,f=h*e;t=[new I(a.add(c,0),null,[-d,0]),new I(a.subtract(0,h),[0,f]),new I(o.add(0,h),null,[0,-f]),new I(o.add(c,0),[-d,0],null),new I(l.subtract(c,0),null,[d,0]),new I(l.add(0,h),[0,-f],null),new I(u.subtract(0,h),null,[0,f]),new I(u.subtract(c,0),[d,0])]}return n(t,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=arguments,t=E._readEllipse(e);return r(t.center,t.radius,e)},Oval:"#Ellipse",Arc:function(){var e=arguments,t=p.readNamed(e,"from"),n=p.readNamed(e,"through"),r=p.readNamed(e,"to"),i=a.getNamed(e),s=new N(i&&0==i.insert&&S.NO_INSERT);return s.moveTo(t),s.arcTo(n,r),s.set(i)},RegularPolygon:function(){for(var e=arguments,t=p.readNamed(e,"center"),r=a.readNamed(e,"sides"),i=a.readNamed(e,"radius"),s=360/r,o=r%3===0,l=new p(0,o?-i:i),u=o?-1:.5,c=new Array(r),h=0;h<r;h++)c[h]=new I(t.add(l.rotate((h+u)*s)));return n(c,!0,e)},Star:function(){for(var e=arguments,t=p.readNamed(e,"center"),r=2*a.readNamed(e,"points"),i=a.readNamed(e,"radius1"),s=a.readNamed(e,"radius2"),o=360/r,l=new p(0,-1),u=new Array(r),c=0;c<r;c++)u[c]=new I(t.add(l.rotate(o*c).multiply(c%2?s:i)));return n(u,!0,e)}}}});var R=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var r=n,i=r[0];i&&"number"==typeof i[0]&&(r=[r]);for(var s=n.length-1;s>=0;s--){var o=r[s];r===n&&!(o instanceof N)&&(r=a.slice(r)),Array.isArray(o)?r[s]=new N({segments:o,insert:!1}):o instanceof R&&(r.splice.apply(r,[s,1].concat(o.removeChildren())),o.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--)(i=n[r].reduce(t)).isEmpty()&&i.remove();var i;return n.length?e.base.call(this):((i=new N(S.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)a.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],i=0,s=n.length;i<s;i++){var a=n[i],o=a._matrix;r.push(a.getPathData(e&&!o.isIdentity()?e.appended(o):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===N||"path"===n.type?n:a.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var i=this._children;if(i.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var s=0,a=i.length;s<a;s++)i[s].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var o=this._style;o.hasFill()&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,i=0,s=r.length;i<s;i++){var a=r[i],o=a._matrix;n[a._id]||a._drawSelected(e,o.isIdentity()?t:t.appended(o))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return a.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new N(S.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=p.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},a.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n,r=this._children,i=0,s=r.length;i<s;i++)n=r[i][e](t)||n;return n}},{}));B.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(e){return e._children||[e]}function o(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(t){for(var r=s(n),i=0,a=r.length;i<a;i++)!(e=r[i])._closed&&!e.isEmpty()&&(e.closePath(1e-12),e.getFirstSegment().setHandleIn(0,0),e.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function l(e,t,n,r,i){var s=new R(S.NO_INSERT);return s.addChildren(e,!0),s=s.reduce({simplify:t}),i&&0==i.insert||s.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),s.copyAttributes(n,!0),s}function u(e){return e.hasOverlap()||e.isCrossing()}function h(e,t,n,r){if(r&&(0==r.trace||r.stroke)&&/^(subtract|intersect)$/.test(n))return f(e,t,n);var h=o(e,!0),d=t&&e!==t&&o(t,!0),p=i[n];p[n]=!0,d&&(p.subtract||p.exclude)^d.isClockwise()^h.isClockwise()&&d.reverse();var g,_=v(P.expand(h.getIntersections(d,u))),x=s(h),w=d&&s(d),S=[],C=[];function D(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];a.push(S,r._segments),a.push(C,r.getCurves()),r._overlapsOnly=!0}}function E(e){for(var t=[],n=0,r=e&&e.length;n<r;n++)t.push(C[e[n]]);return t}if(_.length){D(x),w&&D(w);for(var A=new Array(C.length),k=0,M=C.length;k<M;k++)A[k]=C[k].getValues();var T=c.findCurveBoundsCollisions(A,A,0,!0),I={};for(k=0;k<C.length;k++){var O=C[k],L=O._path._id;(I[L]=I[L]||{})[O.getIndex()]={hor:E(T[k].hor),ver:E(T[k].ver)}}for(k=0,M=_.length;k<M;k++)y(_[k]._segment,h,d,I,p);for(k=0,M=S.length;k<M;k++){var B=S[k],N=B._intersection;B._winding||y(B,h,d,I,p),N&&N._overlap||(B._path._overlapsOnly=!1)}g=b(S,p)}else g=m(w?x.concat(w):x.slice(),function(e){return!!p[e]});return l(g,!0,e,t,r)}function f(e,t,n){var r=o(e),i=o(t),s=r.getIntersections(i,u),a="subtract"===n,c="divide"===n,h={},d=[];function f(e){if(!h[e._id]&&(c||i.contains(e.getPointAt(e.getLength()/2))^a))return d.unshift(e),h[e._id]=!0}for(var p=s.length-1;p>=0;p--){var g=s[p].split();g&&(f(g)&&g.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return f(r),l(d,!1,e,t)}function p(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function g(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function m(e,t,r){var i=e&&e.length;if(i){var s=a.each(e,function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}},{}),o=e.slice().sort(function(e,t){return n(t.getArea())-n(e.getArea())}),l=o[0],u=c.findItemBoundsCollisions(o,null,d.GEOMETRIC_EPSILON);null==r&&(r=l.isClockwise());for(var h=0;h<i;h++){var f=o[h],p=s[f._id],g=0,m=u[h];if(m)for(var v=null,_=m.length-1;_>=0;_--)if(m[_]<h){v=v||f.getInteriorPoint();var y=o[m[_]];if(y.contains(v)){var b=s[y._id];g=b.winding,p.winding+=g,p.container=b.exclude?b.container:y;break}}if(t(p.winding)===t(g))p.exclude=!0,e[p.index]=null;else{var x=p.container;f.setClockwise(x?!x.isClockwise():r)}}}return e}function v(e,t,n){var r,i,s,a=t&&[],o=1e-8,l=1-o,u=!1,c=n||[],h=n&&{};function d(e){return e._path._id+"."+e._segment1._index}for(var f=(n&&n.length)-1;f>=0;f--)(m=n[f])._path&&(h[d(m)]=!0);for(f=e.length-1;f>=0;f--){var m,v,_=e[f],y=_._time,b=y,x=t&&!t(_);if((m=_._curve)&&(m!==i?(u=!m.hasHandles()||h&&h[d(m)],r=[],s=null,i=m):s>=o&&(y/=s)),x)r&&r.push(_);else{if(t&&a.unshift(_),s=b,y<o)v=m._segment1;else if(y>l)v=m._segment2;else{var w=m.divideAtTime(y,!0);u&&c.push(m,w),v=w._segment1;for(var S=r.length-1;S>=0;S--){var C=r[S];C._time=(C._time-y)/(1-y)}}_._setSegment(v);var D=v._intersection,E=_._intersection;if(D){p(D,E);for(var A=D;A;)p(A._intersection,D),A=A._next}else v._intersection=E}}return n||g(c),a||e}function _(r,i,s,a,o){var l,u,c=Array.isArray(i)?i:i[s?"hor":"ver"],h=s?1:0,d=1^h,f=[r.x,r.y],p=f[h],g=f[d],m=1e-6,v=p-1e-9,y=p+1e-9,b=0,x=0,w=0,S=0,C=!1,D=!1,E=1,A=[];function k(n){var u=n[d+0],c=n[d+6];if(!(g<e(u,c)||g>t(u,c))){var f=n[h+0],b=n[h+2],x=n[h+4],D=n[h+6];if(u===c)return void((f<y&&D>v||D<y&&f>v)&&(C=!0));var k=g===u?0:g===c||v>t(f,b,x,D)||y<e(f,b,x,D)?1:L.solveCubic(n,d,g,A,0,1)>0?A[0]:1,M=0===k?f:1===k?D:L.getPoint(n,k)[s?"y":"x"],T=u>c?1:-1,I=l[d]>l[d+6]?1:-1,O=l[h+6];return g!==u?(M<v?w+=T:M>y?S+=T:C=!0,M>p-m&&M<p+m&&(E/=2)):(T!==I?f<v?w+=T:f>y&&(S+=T):f!=O&&(O<y&&M>y?(S+=T,C=!0):O>v&&M<v&&(w+=T,C=!0)),E/=4),l=n,!o&&M>v&&M<y&&0===L.getTangent(n,k)[s?"x":"y"]&&_(r,i,!s,a,!0)}}function M(n){var r=n[d+0],i=n[d+2],a=n[d+4],o=n[d+6];if(g<=t(r,i,a,o)&&g>=e(r,i,a,o))for(var l,u=n[h+0],c=n[h+2],f=n[h+4],p=n[h+6],m=v>t(u,c,f,p)||y<e(u,c,f,p)?[n]:L.getMonoCurves(n,s),_=0,b=m.length;_<b;_++)if(l=k(m[_]))return l}for(var T=0,I=c.length;T<I;T++){var O,P=c[T],B=P._path,N=P.getValues();if((!T||c[T-1]._path!==B)&&(l=null,B._closed||(u=L.getValues(B.getLastCurve().getSegment2(),P.getSegment1(),null,!a))[d]!==u[d+6]&&(l=u),!l)){l=N;for(var R=B.getLastCurve();R&&R!==P;){var F=R.getValues();if(F[d]!==F[d+6]){l=F;break}R=R.getPrevious()}}if(O=M(N))return O;if(T+1===I||c[T+1]._path!==B){if(u&&(O=M(u)))return O;C&&!w&&!S&&(w=S=B.isClockwise(a)^s?1:-1),b+=w,x+=S,w=S=0,C&&(D=!0,C=!1),u=null}}return b=n(b),x=n(x),{winding:t(b,x),windingL:b,windingR:x,quality:E,onPath:D}}function y(e,t,r,i,s){var a=[],o=e,l=0;do{if(y=e.getCurve()){var u=y.getLength();a.push({segment:e,curve:y,length:u}),l+=u}e=e.getNext()}while(e&&!e._intersection&&e!==o);for(var c=[.5,.25,.75],h={winding:0,quality:-1},f=0;f<c.length&&h.quality<.5;f++){u=l*c[f];for(var p=0,g=a.length;p<g;p++){var m=a[p],v=m.length;if(u<=v){var y,b=(y=m.curve)._path,x=b._parent,w=x instanceof R?x:b,S=d.clamp(y.getTimeAt(u),.001,.999),C=y.getPointAtTime(S),D=n(y.getTangentAtTime(S).y)<Math.SQRT1_2,E=null;if(s.subtract&&r){var A=(w===t?r:t)._getWinding(C,D,!0);if(w===t&&A.winding||w===r&&!A.winding){if(A.quality<1)continue;E={winding:0,quality:1}}}(E=E||_(C,i[b._id][y.getIndex()],D,!0)).quality>h.quality&&(h=E);break}u-=v}}for(p=a.length-1;p>=0;p--)a[p].segment._winding=h}function b(e,t){var n,r=[];function i(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function s(e){if(e)for(var t=0,r=n.length;t<r;t++)if(e===n[t])return!0;return!1}function a(e){for(var t=e._segments,n=0,r=t.length;n<r;n++)t[n]._visited=!0}function o(e,t){var r=e._intersection,a=r,o=[];function l(r,a){for(;r&&r!==a;){var l=r._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),h=c._intersection;l!==e&&(s(l)||s(c)||c&&i(l)&&(i(c)||h&&i(h._segment)))&&o.push(l),t&&n.push(l)}r=r._next}}if(t&&(n=[e]),r){for(l(r);r&&r._previous;)r=r._previous;l(r,a)}return o}e.sort(function(e,t){var n=e._intersection,r=t._intersection,i=!(!n||!n._overlap),s=!(!r||!r._overlap),a=e._path,o=t._path;return i^s?i?1:-1:!n^!r?n?1:-1:a!==o?a._id-o._id:e._index-t._index});for(var l=0,u=e.length;l<u;l++){var c,h,d,f=e[l],p=i(f),g=null,m=!1,v=!0,_=[];if(p&&f._path._overlapsOnly){var y=f._path,b=f._intersection._segment._path;y.compare(b)&&(y.getArea()&&r.push(y.clone(!1)),a(y),a(b),p=!1)}for(;p;){var x=!g,w=o(f,x),C=w.shift(),D=!(m=!x&&(s(f)||s(C)))&&C;if(x&&(g=new N(S.NO_INSERT),c=null),m){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(D&&c&&(_.push(c),c=null),c||(D&&w.push(f),c={start:g._segments.length,crossings:w,visited:h=[],handleIn:d}),D&&(f=C),!i(f)){g.removeSegments(c.start);for(var E=0,A=h.length;E<A;E++)h[E]._visited=!1;h.length=0;do{(!(f=c&&c.crossings.shift())||!f._path)&&(f=null,(c=_.pop())&&(h=c.visited,d=c.handleIn))}while(c&&!i(f));if(!f)break}var k=f.getNext();g.add(new I(f._point,d,k&&f._handleOut)),f._visited=!0,h.push(f),f=k||f._path.getFirstSegment(),d=k&&k._handleIn}m&&(v&&(g.getFirstSegment().setHandleIn(d),g.setClosed(v)),0!==g.getArea()&&r.push(g))}return r}return{_getWinding:function(e,t,n){return _(e,this.getCurves(),t,n)},unite:function(e,t){return h(this,e,"unite",t)},intersect:function(e,t){return h(this,e,"intersect",t)},subtract:function(e,t){return h(this,e,"subtract",t)},exclude:function(e,t){return h(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?f(this,e,"divide"):l([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){var e=this._children,t=e||[this];function n(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var r=!1,i=!1,s=this.getIntersections(null,function(e){return e.hasOverlap()&&(r=!0)||e.isCrossing()&&(i=!0)}),o=r&&i&&[];if(s=P.expand(s),r)for(var l=v(s,function(e){return e.hasOverlap()},o),u=l.length-1;u>=0;u--){var c=l[u],h=c._path,d=c._segment,f=d.getPrevious(),p=d.getNext();n(f,h)&&n(p,h)&&(d.remove(),f._handleOut._set(0,0),p._handleIn._set(0,0),f!==d&&!f.getCurve().hasLength()&&(p._handleIn.set(f._handleIn),f.remove()))}i&&(v(s,r&&function(e){var t=e.getCurve(),n=e.getSegment(),r=e._intersection,i=r._curve,s=r._segment;if(t&&i&&t._path&&i._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},o),o&&g(o),t=b(a.each(t,function(e){a.push(this,e._segments)},[])));var m,_=t.length;return _>1&&e?(t!==e&&this.setChildren(t),m=this):1===_&&!e&&(t[0]!==this&&this.setSegments(t[0].removeSegments()),m=this),m||((m=new R(S.NO_INSERT)).addChildren(t),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(e,t){var n=this._children;return n&&n.length?this.setChildren(m(this.removeChildren(),function(t){return!!(e?t:1&t)},t)):t!==r&&this.setClockwise(t),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),i=n.y,s=[],a=[],o=0,l=r.length;o<l;o++){var u=r[o].getValues(),c=u[1],h=u[3],d=u[5],f=u[7];if(i>=e(c,h,d,f)&&i<=t(c,h,d,f))for(var p=L.getMonoCurves(u),g=0,m=p.length;g<m;g++){var v=p[g],_=v[1],y=v[7];if(_!==y&&(i>=_&&i<=y||i>=y&&i<=_)){var b=i===_?v[0]:i===y?v[6]:1===L.solveCubic(v,1,i,a,0,1)?L.getPoint(v,a[0]).x:(v[0]+v[6])/2;s.push(b)}}}s.length>1&&(s.sort(function(e,t){return e-t}),n.x=(s[0]+s[1])/2)}return n}}});var F=a.extend({_class:"PathFlattener",initialize:function(e,t,n,r,i){var s,a=[],o=[],l=0,u=1/(n||32),c=e._segments,h=c[0];function d(e,t){var n=L.getValues(e,t,i);a.push(n),f(n,e._index,0,1)}function f(e,n,i,s){if(!(s-i>u)||r&&L.isStraight(e)||L.isFlatEnough(e,t||.25)){var a=e[6]-e[0],c=e[7]-e[1],h=Math.sqrt(a*a+c*c);h>0&&(l+=h,o.push({offset:l,curve:e,index:n,time:s}))}else{var d=L.subdivide(e,.5),p=(i+s)/2;f(d[0],n,i,p),f(d[1],n,p,s)}}for(var p=1,g=c.length;p<g;p++)d(h,s=c[p]),h=s;e._closed&&d(s||h,c[0]),this.curves=a,this.parts=o,this.length=l,this.index=0},_get:function(e){for(var t,n=this.parts,r=n.length,i=this.index;t=i,i&&!(n[--i].offset<e););for(;t<r;t++){var s=n[t];if(s.offset>=e){this.index=t;var a=n[t-1],o=a&&a.index===s.index?a.time:0,l=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(e-l)/(s.offset-l)}}}return{index:n[r-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),i=this._get(n),s=r.index,a=i.index;s<=a;s++){var o=L.getPart(this.curves[s],s===r.index?r.time:0,s===i.index?i.time:1);s===r.index&&e.moveTo(o[0],o[1]),e.bezierCurveTo.apply(e,o.slice(2))}}},a.each(L._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return L[e](this.curves[n.index],n.time)}},{})),z=a.extend({initialize:function(e){for(var t,n=this.points=[],r=e._segments,i=e._closed,s=0,a=r.length;s<a;s++){var o=r[s].point;(!t||!t.equals(o))&&n.push(t=o.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new I(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,i,s){var a=this.points;if(r-n!==1){for(var o,l=this.chordLengthParameterize(n,r),u=Math.max(t,t*t),c=!0,h=0;h<=4;h++){var d=this.generateBezier(n,r,l,i,s),f=this.findMaxError(n,r,d,l);if(f.error<t&&c)return void this.addCurve(e,d);if(o=f.index,f.error>=u)break;c=this.reparameterize(n,r,l,d),u=f.error}var p=a[o-1].subtract(a[o+1]);this.fitCubic(e,t,n,o,i,p),this.fitCubic(e,t,o,r,p.negate(),s)}else{var g=a[n],m=a[r],v=g.getDistance(m)/3;this.addCurve(e,[g,g.add(i.normalize(v)),m.add(s.normalize(v)),m])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new I(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,i){for(var s=1e-12,a=Math.abs,o=this.points,l=o[e],u=o[t],c=[[0,0],[0,0]],h=[0,0],d=0,f=t-e+1;d<f;d++){var p=n[d],g=1-p,m=3*p*g,v=g*g*g,_=m*g,y=m*p,b=p*p*p,x=r.normalize(_),w=i.normalize(y),S=o[e+d].subtract(l.multiply(v+_)).subtract(u.multiply(y+b));c[0][0]+=x.dot(x),c[0][1]+=x.dot(w),c[1][0]=c[0][1],c[1][1]+=w.dot(w),h[0]+=x.dot(S),h[1]+=w.dot(S)}var C,D,E=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(a(E)>s){var A=c[0][0]*h[1]-c[1][0]*h[0];C=(h[0]*c[1][1]-h[1]*c[0][1])/E,D=A/E}else{var k=c[0][0]+c[0][1],M=c[1][0]+c[1][1];C=D=a(k)>s?h[0]/k:a(M)>s?h[1]/M:0}var T,I,O=u.getDistance(l),L=s*O;if(C<L||D<L)C=D=O/3;else{var P=u.subtract(l);T=r.normalize(C),I=i.normalize(D),T.dot(P)-I.dot(P)>O*O&&(C=D=O/3,T=I=null)}return[l,l.add(T||r.normalize(C)),u.add(I||i.normalize(D)),u]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e]);i=1;for(var s=n.length;i<s;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],i=[],s=0;s<=2;s++)r[s]=e[s+1].subtract(e[s]).multiply(3);for(s=0;s<=1;s++)i[s]=r[s+1].subtract(r[s]).multiply(2);var a=this.evaluate(3,e,n),o=this.evaluate(2,r,n),l=this.evaluate(1,i,n),u=a.subtract(t),c=o.dot(o)+u.dot(l);return d.isMachineZero(c)?n:n-u.dot(o)/c},evaluate:function(e,t,n){for(var r=t.slice(),i=1;i<=e;i++)for(var s=0;s<=e-i;s++)r[s]=r[s].multiply(1-n).add(r[s+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){for(var i=Math.floor((t-e+1)/2),s=0,a=e+1;a<t;a++){var o=this.evaluate(3,n,r[a-e]).subtract(this.points[a]),l=o.x*o.x+o.y*o.y;l>=s&&(s=l,i=a)}return{error:s,index:i}}}),j=S.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&a.isPlainObject(e)&&e.x===r&&e.y===r;this._initialize(t&&e,!t&&p.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),V=j.extend({_class:"PointText",initialize:function(){j.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new g(e.x,e.y,this,"setPoint")},setPoint:function(){var e=p.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,i=this._style,s=i.hasFill(),a=i.hasStroke(),o=i.getLeading(),l=e.shadowColor;e.font=i.getFontStyle(),e.textAlign=i.getJustification();for(var u=0,c=r.length;u<c;u++){e.shadowColor=l;var h=r[u];s&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),a&&e.strokeText(h,0,0),e.translate(0,o)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,i=r.length,s=n.getJustification(),a=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),r),l=0;"left"!==s&&(l-=o/("center"===s?2:1));var u=new _(l,i?-.75*a:0,o,i*a);return e?e._transformBounds(u,u):u}}),U=a.extend(new function(){var e,t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]},s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(e,t,n){var r=Math.max(e,t,n),i=r-Math.min(e,t,n);return[0===i?0:60*(r==e?(t-n)/i+(t<n?6:0):r==t?(n-e)/i+2:(e-t)/i+4),0===r?0:i/r,r]},"hsb-rgb":function(e,t,n){var r,i=(e=(e/60%6+6)%6)-(r=Math.floor(e)),a=[n,n*(1-t),n*(1-t*i),n*(1-t*(1-i))];return[a[(r=s[r])[0]],a[r[1]],a[r[2]]]},"rgb-hsl":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),s=r-i,a=0===s,o=(r+i)/2;return[a?0:60*(r==e?(t-n)/s+(t<n?6:0):r==t?(n-e)/s+2:(e-t)/s+4),a?0:o<.5?s/(r+i):s/(2-r-i),o]},"hsl-rgb":function(e,t,n){if(0===t)return[n,n,n];for(var r=[(e=(e/360%1+1)%1)+1/3,e,e-1/3],i=n<.5?n*(1+t):n+t-n*t,s=2*n-i,a=[],o=0;o<3;o++){var l=r[o];l<0&&(l+=1),l>1&&(l-=1),a[o]=6*l<1?s+6*(i-s)*l:2*l<1?i:3*l<2?s+(i-s)*(2/3-l)*6:s}return a},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return a.each(t,function(e,r){n[r]=[],a.each(e,function(e,i){var s=a.capitalize(e),o=/^(hue|saturation)$/.test(e),l=n[r][i]="gradient"===r?"gradient"===e?function(e){var t=this._components[0];return t!==(e=H.read(Array.isArray(e)?e:arguments,0,{readNull:!0}))&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:function(){return p.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:+e};this["get"+s]=function(){return this._type===r||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this["set"+s]=function(e){this._type!==r&&!(o&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(r),this._properties=t[r],this._type=r),this._components[i]=l.call(this,e),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function s(o){var l,u,c,h,d=arguments,f=this.__read,p=0;Array.isArray(o)&&(o=(d=o)[0]);var g=null!=o&&typeof o;if("string"===g&&o in t&&(l=o,o=d[1],Array.isArray(o)?(u=o,c=d[2]):(f&&(p=1),d=a.slice(d,1),g=typeof o)),!u){if(h="number"===g?d:"object"===g&&null!=o.length?o:null){l||(l=h.length>=3?"rgb":"gray");var m=t[l].length;c=h[m],f&&(p+=h===arguments?m+(null!=c?1:0):1),h.length>m&&(h=a.slice(h,0,m))}else if("string"===g){var v=function(t){var n,s=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(s){var o=s[4]?4:3;n=new Array(o);for(var l=0;l<o;l++){var u=s[l+1];n[l]=parseInt(1==u.length?u+u:u,16)/255}}else if(s=t.match(/^(rgb|hsl)a?\((.*)\)$/)){a=s[1],n=s[2].trim().split(/[,\s]+/g);for(var c="hsl"===a,h=(l=0,Math.min(n.length,4));l<h;l++){var d=n[l];if(u=parseFloat(d),c)if(0===l){var f=d.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[f]||1}else l<3&&(u/=100);else l<3&&(u/=/%$/.test(d)?100:255);n[l]=u}}else{var p=r[t];if(!p)if(i){e||((e=ie.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var g=e.getImageData(0,0,1,1).data;p=r[t]=[g[0]/255,g[1]/255,g[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}(o);l=v[0],4===(u=v[1]).length&&(c=u[3],u.length--)}else if("object"===g)if(o.constructor===s){if(l=o._type,u=o._components.slice(),c=o._alpha,"gradient"===l)for(var _=1,y=u.length;_<y;_++){var b=u[_];b&&(u[_]=b.clone())}}else if(o.constructor===H)l="gradient",h=d;else{var x=t[l="hue"in o?"lightness"in o?"hsl":"hsb":"gradient"in o||"stops"in o||"radial"in o?"gradient":"gray"in o?"gray":"rgb"],w=n[l];for(this._components=u=[],_=0,y=x.length;_<y;_++)null==(S=o[x[_]])&&!_&&"gradient"===l&&"stops"in o&&(S={stops:o.stops,radial:o.radial}),null!=(S=w[_].call(this,S))&&(u[_]=S);c=o.alpha}f&&l&&(p=1)}if(this._type=l||"rgb",!u)for(this._components=u=[],_=0,y=(w=n[this._type]).length;_<y;_++){var S;null!=(S=w[_].call(this,h&&h[_]))&&(u[_]=S)}return this._components=u,this._properties=t[this._type],this._alpha=c,f&&(this.__read=p),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return a.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(e){var t;return this._type===e?this._components.slice():(t=o[this._type+"-"+e])?t.apply(this,this._components):o["rgb-"+e].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new U(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=a.isPlainValue(e,!0)?U.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&a.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,r=h.instance,i=0,s=e.length;i<s;i++){var a=this._components[i];null!=a&&t.push(e[i]+": "+(n?a:r.number(a)))}return null!=this._alpha&&t.push("alpha: "+r.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||null==this._alpha?1:this._alpha;function r(e){return Math.round(255*(e<0?0:e>1?1:e))}return t=[r(t[0]),r(t[1]),r(t[2])],n<1&&t.push(n<0?0:n),e?"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1):(4==t.length?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],s=i._stops,a=r[1],o=r[2],l=r[3],u=t&&t.inverted();if(u&&(a=u._transformPoint(a),o=u._transformPoint(o),l&&(l=u._transformPoint(l))),i._radial){var c=o.getDistance(a);if(l){var h=l.subtract(a);h.getLength()>c&&(l=a.add(h.normalize(c-.1)))}var d=l||a;n=e.createRadialGradient(d.x,d.y,0,a.x,a.y,c)}else n=e.createLinearGradient(a.x,a.y,o.x,o.y);for(var f=0,p=s.length;f<p;f++){var g=s[f],m=g._offset;n.addColorStop(null!==m&&void 0!==m?m:f/(p-1),g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,r=t.length;n<r;n++){var i=t[n];e._transformPoint(i,i,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new U(e(),e(),e())},_setOwner:function(e,t,n){return e&&(e._owner&&t&&e._owner!==t&&(e=e.clone()),!e._owner^!t&&(e._owner=t||null,e._setter=n||null)),e}}})},new function(){return a.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},function(e,t){this[t]=function(t){t=U.read(arguments);for(var n=this._type,r=this._components,i=t._convert(n),s=0,a=r.length;s<a;s++)i[s]=e(r[s],i[s]);return new U(n,i,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}},{})}),H=a.extend({_class:"Gradient",initialize:function(e,t){this._id=f.get(),e&&a.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,function(){return a.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=r))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new H(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,i=t.length;n<i;n++)t[n]._owner=r;for(n=0,i=(t=this._stops=G.readList(e,0,{clone:!0})).length;n<i;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var i=0;i<r;i++)if(!t[i].equals(n[i]))return!1;return!0}}return!1}}),G=a.extend({_class:"GradientStop",initialize:function(e,t){var n=e,i=t;"object"==typeof e&&t===r&&(Array.isArray(e)&&"number"!=typeof e[0]?(n=e[0],i=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(n=e.color,i=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new G(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return a.serialize(null==r?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){U._setOwner(this._color,null),this._color=U._setOwner(U.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),Y=a.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new p,selectedColor:null},t=a.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=a.set({},t,{fillColor:new U}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},o={_class:"Style",beans:!0,initialize:function(r,i,s){this._values={},this._owner=i,this._project=i&&i._project||s||le.project,this._defaults=!i||i instanceof C?t:i instanceof j?n:e,r&&this.set(r)}};return a.each(t,function(e,t){var n=/Color$/.test(t),l="shadowOffset"===t,u=a.capitalize(t),c=i[t],h="set"+u,d="get"+u;o[h]=function(e){var r=this._owner,i=r&&r._children,s=i&&i.length>0&&!(r instanceof R);if(s)for(var a=0,o=i.length;a<o;a++)i[a]._style[h](e);if(("selectedColor"===t||!s)&&t in this._defaults){var l=this._values[t];l!==e&&(n&&(l&&(U._setOwner(l,null),l._canvasStyle=null),e&&e.constructor===U&&(e=U._setOwner(e,r,s&&h))),this._values[t]=e,r&&r._changed(c||129))}},o[d]=function(e){var i=this._owner,s=i&&i._children,o=s&&s.length>0&&!(i instanceof R);if(o&&!e)for(var u=0,c=s.length;u<c;u++){var f=s[u]._style[d]();if(u){if(!a.equals(g,f))return r}else g=f}else if(t in this._defaults){var g;if((g=this._values[t])===r)(g=this._defaults[t])&&g.clone&&(g=g.clone());else{var m=n?U:l?p:null;m&&(!g||g.constructor!==m)&&(this._values[t]=g=m.read([g],0,{readNull:!0,clone:!0}))}}return g&&n&&(g=U._setOwner(g,i,o&&h)),g},s[d]=function(e){return this._style[d](e)},s[h]=function(e){this._style[h](e)}}),a.each({Font:"FontFamily",WindingRule:"FillRule"},function(e,t){var n="get"+t,r="set"+t;o[n]=s[n]="#get"+e,o[r]=s[r]="#set"+e}),S.inject(s),o},{set:function(e){var t=e instanceof Y,n=t?e._values:e;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&t&&i.clone?i.clone():i}},equals:function(e){function t(e,t,n){var i=e._values,s=t._values,o=t._defaults;for(var l in i){var u=i[l],c=s[l];if((!n||!(l in s))&&!a.equals(u,c===r?o[l]:c))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!==t&&void 0!==t?t:1.2*n}}),W=new function(){function e(e,t,n,r){for(var i=["","webkit","moz","Moz","ms","o"],s=t[0].toUpperCase()+t.substring(1),a=0;a<6;a++){var o=i[a],l=o?o+s:t;if(l in e){if(!n)return e[l];e[l]=r;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,r=e.ownerDocument,i=r.body,s=r.documentElement;try{n=e.getBoundingClientRect()}catch(u){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||i.clientLeft||0),o=n.top-(s.clientTop||i.clientTop||0);if(!t){var l=r.defaultView;a+=l.pageXOffset||s.scrollLeft||i.scrollLeft,o+=l.pageYOffset||s.scrollTop||i.scrollTop}return new _(a,o,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement;return new _(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(e,t){return W.getBounds(e,t).getPoint()},getSize:function(e){return W.getBounds(e,!0).getSize()},isInvisible:function(e){return W.getSize(e).equals(new m(0,0))},isInView:function(e){return!W.isInvisible(e)&&W.getViewportBounds(e).intersects(W.getBounds(e,!0))},isInserted:function(e){return s.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if("object"==typeof n)for(var i in n)e(t,i,!0,n[i]);else e(t,n,!0,r)}}},q={add:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),a=0,o=i.length;a<o;a++){var l=i[a],u=e===s&&("touchstart"===l||"touchmove"===l)&&{passive:!1};e.addEventListener(l,r,u)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),s=0,a=i.length;s<a;s++)e.removeEventListener(i[s],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new p(t.pageX||t.clientX+s.documentElement.scrollLeft,t.pageY||t.clientY+s.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return q.getPoint(e).subtract(W.getOffset(t||q.getTarget(e)))}};q.requestAnimationFrame=new function(){var e,t=W.getPrefixed(i,"requestAnimationFrame"),n=!1,r=[];function s(){var e=r;r=[];for(var i=0,a=e.length;i<a;i++)e[i]();(n=t&&r.length)&&t(s)}return function(i){r.push(i),t?n||(t(s),n=!0):e||(e=setInterval(s,1e3/60))}};var Z=a.extend(o,{_class:"View",initialize:function e(t,n){function r(e){return n[e]||parseInt(n.getAttribute(e),10)}function a(){var e=W.getSize(n);return e.isNaN()||e.isZero()?new m(r("width"),r("height")):e}var o;if(i&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+e._id++),q.add(n,this._viewEvents);var u="none";if(W.setPrefixed(n.style,{userDrag:u,userSelect:u,touchCallout:u,contentZooming:u,tapHighlightColor:"rgba(0,0,0,0)"}),l.hasAttribute(n,"resize")){var c=this;q.add(i,this._windowEvents={resize:function(){c.setViewSize(a())}})}if(o=a(),l.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var h=this._stats.domElement,d=h.style,f=W.getOffset(n);d.position="absolute",d.left=f.x+"px",d.top=f.y+"px",s.body.appendChild(h)}}else o=new m(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new b)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!le.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Z._focused===this&&(Z._focused=null),Z._views.splice(Z._views.indexOf(this),1),delete Z._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),q.remove(this._element,this._viewEvents),q.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:a.each(S._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;q.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!W.getPrefixed(s,"hidden")||"true"===l.getAttribute(t,"keepalive"))&&W.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){le=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new a({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new a(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=r},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new v(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=m.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new _(new p,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return W.isInView(this._element)},isInserted:function(){return W.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var r=n.parentNode,i=s.createElement("div");i.style.fontSize=e,r.appendChild(i),t=parseFloat(W.getStyles(i).fontSize),r.removeChild(i)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},a.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?a:p).read(n),i=p.read(n,0,{readNull:!0});return this.transform((new b)[e](r,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new b;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=p.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new b).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new g(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=p.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(p.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(p.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(p.read(arguments))},getEventPoint:function(e){return this.viewToProject(q.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return s&&"string"==typeof t&&(t=s.getElementById(t)),new(i?K:Z)(e,t)}}},new function(){if(i){var e,t,n,r,a,o=!1,l=!1,u=i.navigator;u.pointerEnabled||u.msPointerEnabled?(n="pointerdown MSPointerDown",r="pointermove MSPointerMove",a="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",r="touchmove",a="touchend touchcancel","ontouchstart"in i&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",r+=" mousemove",a+=" mouseup"));var c={},h={mouseout:function(e){var t=Z._focused,n=q.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var r=q.getOffset(e,t._element),i=r.x,s=Math.abs,a=s(i),o=a-(1<<25);r.x=s(o)<a?o*(i<0?-1:1):i,A(t,e,t.viewToProject(r))}},scroll:E};c[n]=function(e){var t=Z._focused=D(e);o||(o=!0,t._handleMouseEvent("mousedown",e))},h[r]=function(n){var r=Z._focused;if(!l){var i=D(n);i?r!==i&&(r&&A(r,n),e||(e=r),r=Z._focused=t=i):t&&t===r&&(e&&!e.isInserted()&&(e=null),r=Z._focused=e,e=null,E())}r&&A(r,n)},h[n]=function(){l=!0},h[a]=function(e){var t=Z._focused;t&&o&&t._handleMouseEvent("mouseup",e),l=o=!1},q.add(s,h),q.add(i,{load:E});var d,f,p,g,m,v,_,y,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},S=!1,C={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(e,t,n){var r=this._itemEvents,i=r.native[e],s="mousemove"===e,a=this._scope.tool,l=this;function u(e){return r.virtual[e]||l.responds(e)||a&&a.responds(e)}s&&o&&u("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var c=this.getBounds().contains(n),h=i&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,C=!1,D={};if(D[e.substr(5)]=!0,i&&w!==g&&(g&&k(g,null,"mouseleave",t,n),w&&k(w,null,"mouseenter",t,n),g=w),S^c&&(k(this,null,c?"mouseenter":"mouseleave",t,n),C=!0),(c||D.drag)&&!n.equals(f)&&(M(this,w,s?e:"mousemove",t,n,f),C=!0),S=c,D.down&&c||D.up&&d){if(M(this,w,e,t,n,d),D.down){if(y=w===v&&Date.now()-_<300,p=v=w,!x&&w){for(var E=w;E&&!E.responds("mousedrag");)E=E._parent;E&&(m=w)}d=n}else D.up&&(!x&&w===p&&(_=Date.now(),M(this,w,y?"doubleclick":"click",t,n,d),y=!1),p=m=null);S=!1,C=!0}f=n,C&&a&&(b=a._handleMouseEvent(e,t,n,D)||b),!1!==t.cancelable&&(b&&!D.move||D.down&&u("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,r){var i,s=this._scope,a=s.tool;function o(a){a.responds(e)&&(le=s,a.emit(e,i=i||new J(e,t,n,r)))}this.isVisible()&&(o(this),a&&a.responds(e)&&o(a))},_countItemEvent:function(e,t){var n=this._itemEvents,r=n.native,i=n.virtual;for(var s in C)r[s]=(r[s]||0)+(C[s][e]||0)*t;i[e]=(i[e]||0)+t},statics:{updateFocus:E,_resetState:function(){o=l=b=S=!1,e=t=d=f=p=g=m=v=_=y=null}}}}function D(e){var t=q.getTarget(e);return t.getAttribute&&Z._viewsById[t.getAttribute("id")]}function E(){var e=Z._focused;if(!e||!e.isVisible())for(var n=0,r=Z._views.length;n<r;n++)if((e=Z._views[n]).isVisible()){Z._focused=t=e;break}}function A(e,t,n){e._handleMouseEvent("mousemove",t,n)}function k(e,t,n,r,i,s,a){var o,l=!1;function u(e,n){if(e.responds(n)){if(o||(o=new Q(n,r,i,t||e,s?i.subtract(s):null)),e.emit(n,o)&&(b=!0,o.prevented&&(x=!0),o.stopped))return l=!0}else{var a=w[n];if(a)return u(e,a)}}for(;e&&e!==a&&!u(e,n);)e=e._parent;return l}function M(e,t,n,r,i,s){return e._project.removeOn(n),x=b=!1,m&&k(m,null,n,r,i,s)||t&&t!==m&&!t.isDescendant(m)&&k(t,null,"mousedrag"===n?"mousemove":n,r,i,s,m)||k(e,m||t||e,n,r,i,s)}}),K=Z.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof i.HTMLCanvasElement)){var n=m.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+a.slice(arguments,1));t=ie.getCanvas(n)}var r=this._context=t.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(l.getAttribute(t,"hidpi"))){var s=i.devicePixelRatio||1,o=W.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=s/o}Z.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),1!==r){var i=this._element,s=this._context;if(!l.hasAttribute(i,"resize")){var a=i.style;a.width=t+"px",a.height=n+"px"}s.restore(),s.save(),s.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n,r=le.agent;if(r&&r.firefox)n=e.base.call(this,t);else{var i=this._context,s=i.font;i.font=t+" serif",n=parseFloat(i.font),i.font=s}return n},getTextWidth:function(e,t){var n=this._context,r=n.font,i=0;n.font=e;for(var s=0,a=t.length;s<a;s++)i=Math.max(i,n.measureText(t[s]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),X=a.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return $.modifiers}}),J=X.extend({_class:"KeyEvent",initialize:function(e,t,n,r){this.type=e,this.event=t,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),$=new function(){var e,t,n={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},o={tab:"\t",space:" ",enter:"\r"},l={},u={},c=new a({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=le&&le.agent;return e&&e.mac?this.meta:this.control}}});function h(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t||t===r?String.fromCharCode(e.keyCode):t,n[t]||(t.length>1?a.hyphenate(t):t.toLowerCase())}function d(t,n,r,i){var s,o=Z._focused;if(l[n]=t,t?u[n]=r:delete u[n],n.length>1&&(s=a.camelize(n))in c){c[s]=t;var h=le&&le.agent;if("meta"===s&&h&&h.mac)if(t)e={};else{for(var f in e)f in u&&d(!1,f,e[f],i);e=null}}else t&&e&&(e[n]=r);o&&o._handleKeyEvent(t?"keydown":"keyup",i,n,r)}return q.add(s,{keydown:function(e){var n=h(e),r=le&&le.agent;n.length>1||r&&r.chrome&&(e.altKey||r.mac&&e.metaKey||!r.mac&&e.ctrlKey)?d(!0,n,o[n]||(n.length>1?"":n),e):t=n},keypress:function(e){if(t){var n=h(e),r=e.charCode,i=r>=32?String.fromCharCode(r):n.length>1?"":n;n!==t&&(n=i.toLowerCase()),d(!0,n,i,e),t=null}},keyup:function(e){var t=h(e);t in u&&d(!1,t,u[t],e)}}),q.add(i,{blur:function(e){for(var t in u)d(!1,t,u[t],e)}}),{modifiers:c,isDown:function(e){return!!l[e]}}},Q=X.extend({_class:"MouseEvent",initialize:function(e,t,n,r,i){this.type=e,this.event=t,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ee=X.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),te=u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){u.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){le=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var i=r.move||r.drag,s=this.responds(e),a=this.minDistance,o=this.maxDistance,l=!1,u=this;function c(e,t){var s=n,a=i?u._point:u._downPoint||s;if(i){if(u._moveCount>=0&&s.equals(a))return!1;if(a&&(null!=e||null!=t)){var o=s.subtract(a),l=o.getLength();if(l<(e||0))return!1;t&&(s=a.add(o.normalize(Math.min(l,t))))}u._moveCount++}return u._point=s,u._lastPoint=a||s,r.down&&(u._moveCount=-1,u._downPoint=s,u._downCount++),!0}function h(){s&&(l=u.emit(e,new ee(u,e,t))||l)}if(r.down)c(),h();else if(r.up)c(null,o),h();else if(s)for(;c(a,o);)h();return l}}),ne=a.extend(o,{_class:"Tween",statics:{easings:new a({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,i,s,a){this.object=t;var o=typeof s,l="function"===o;this.type=l?o:"string"===o?s:"linear",this.easing=l?s:e.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var u=n||r;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(r),!1!==a&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(n){return"function"==typeof n?n(t,e):n},i=0,s=n&&n.length;i<s;i++){var o=n[i],l=r(this._from[o]),u=r(this._to[o]),c=l&&u&&l.__add&&u.__add?u.__subtract(l).__multiply(t).__add(l):(u-l)*t+l;this._setProperty(this._parsedKeys[o],c)}this.responds("update")&&this.emit("update",new a({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,i=t.length;r<i;r++){var s,a=t[r],o=this._parsedKeys[a],l=this._getProperty(o);if(e){var u=this._resolveValue(l,e[a]);this._setProperty(o,u),s=(s=this._getProperty(o))&&s.clone?s.clone():s,this._setProperty(o,l)}else s=l&&l.clone?l.clone():l;n[a]=s}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}if("string"==typeof t){var r=t.match(/^[+\-*/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],i)}}}return t},_calculate:function(e,t,n){return le.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n],s=i.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[i]=s.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,i=e.length-(t||0);r<i&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),re=function(e){var n=new t.XMLHttpRequest;return n.open((e.method||"get").toUpperCase(),e.url,a.pick(e.async,!0)),e.mimeType&&n.overrideMimeType(e.mimeType),n.onload=function(){var t=n.status;0===t||200===t?e.onLoad&&e.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var t=n.status,r='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(r);e.onError(r,t)},n.send(null)},ie=a.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!i)return null;var r,a=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=s.createElement("canvas"),a=!1);var o=r.getContext("2d",n||{});if(!o)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?a&&o.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),o.save(),r},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},se=new function(){var e,t,n,r,i,s,o,l,u,c,h,d=Math.min,f=Math.max,p=Math.abs;function g(e,t,n){return.2989*e+.587*t+.114*n}function m(e,t,n,r){var i=r-g(e,t,n),s=(r=g(u=e+i,c=t+i,h=n+i),d(u,c,h)),a=f(u,c,h);if(s<0){var o=r-s;u=r+(u-r)*r/o,c=r+(c-r)*r/o,h=r+(h-r)*r/o}if(a>255){var l=255-r,p=a-r;u=r+(u-r)*l/p,c=r+(c-r)*l/p,h=r+(h-r)*l/p}}function v(e,t,n){return f(e,t,n)-d(e,t,n)}function _(e,t,n,r){var i,s=[e,t,n],a=f(e,t,n),o=d(e,t,n);i=0===d(o=o===e?0:o===t?1:2,a=a===e?0:a===t?1:2)?1===f(o,a)?2:1:0,s[a]>s[o]?(s[i]=(s[i]-s[o])*r/(s[a]-s[o]),s[a]=r):s[i]=s[a]=0,s[o]=0,u=s[0],c=s[1],h=s[2]}var y={multiply:function(){u=i*e/255,c=s*t/255,h=o*n/255},screen:function(){u=i+e-i*e/255,c=s+t-s*t/255,h=o+n-o*n/255},overlay:function(){u=i<128?2*i*e/255:255-2*(255-i)*(255-e)/255,c=s<128?2*s*t/255:255-2*(255-s)*(255-t)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var r=e*i/255;u=r+i*(255-(255-i)*(255-e)/255-r)/255,c=(r=t*s/255)+s*(255-(255-s)*(255-t)/255-r)/255,h=(r=n*o/255)+o*(255-(255-o)*(255-n)/255-r)/255},"hard-light":function(){u=e<128?2*e*i/255:255-2*(255-e)*(255-i)/255,c=t<128?2*t*s/255:255-2*(255-t)*(255-s)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===i?0:255===e?255:d(255,255*i/(255-e)),c=0===s?0:255===t?255:d(255,255*s/(255-t)),h=0===o?0:255===n?255:d(255,255*o/(255-n))},"color-burn":function(){u=255===i?255:0===e?0:f(0,255-255*(255-i)/e),c=255===s?255:0===t?0:f(0,255-255*(255-s)/t),h=255===o?255:0===n?0:f(0,255-255*(255-o)/n)},darken:function(){u=i<e?i:e,c=s<t?s:t,h=o<n?o:n},lighten:function(){u=i>e?i:e,c=s>t?s:t,h=o>n?o:n},difference:function(){(u=i-e)<0&&(u=-u),(c=s-t)<0&&(c=-c),(h=o-n)<0&&(h=-h)},exclusion:function(){u=i+e*(255-i-i)/255,c=s+t*(255-s-s)/255,h=o+n*(255-o-o)/255},hue:function(){_(e,t,n,v(i,s,o)),m(u,c,h,g(i,s,o))},saturation:function(){_(i,s,o,v(e,t,n)),m(u,c,h,g(i,s,o))},luminosity:function(){m(i,s,o,g(e,t,n))},color:function(){m(e,t,n,g(i,s,o))},add:function(){u=d(i+e,255),c=d(s+t,255),h=d(o+n,255)},subtract:function(){u=f(i-e,0),c=f(s-t,0),h=f(o-n,0)},average:function(){u=(i+e)/2,c=(s+t)/2,h=(o+n)/2},negation:function(){u=255-p(255-e-i),c=255-p(255-t-s),h=255-p(255-n-o)}},b=this.nativeModes=a.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(e){this[e]=!0},{}),x=ie.getContext(1,1,{willReadFrequently:!0});x&&(a.each(y,function(e,t){var n="darken"===t,r=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=t,x.globalCompositeOperation===t&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}x.restore(),b[t]=r}),ie.release(x)),this.process=function(a,d,f,p,g){var m=d.canvas,v="normal"===a;if(v||b[a])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,v||(f.globalCompositeOperation=a),f.drawImage(m,g.x,g.y),f.restore();else{var _=y[a];if(!_)return;for(var x=f.getImageData(g.x,g.y,m.width,m.height),w=x.data,S=d.getImageData(0,0,m.width,m.height).data,C=0,D=w.length;C<D;C+=4){e=S[C],i=w[C],t=S[C+1],s=w[C+1],n=S[C+2],o=w[C+2],r=S[C+3],l=w[C+3],_();var E=r*p/255,A=1-E;w[C]=E*u+A*i,w[C+1]=E*c+A*s,w[C+2]=E*h+A*o,w[C+3]=r*p+A*l}f.putImageData(x,g.x,g.y)}}},ae=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function i(e,t,n){for(var i in t){var s=t[i],a=r[i];"number"==typeof s&&n&&(s=n.number(s)),a?e.setAttributeNS(a,i,s):e.setAttribute(i,s)}return e}return{svg:e,xmlns:t,xlink:n,create:function(t,n,r){return i(s.createElementNS(e,t),n,r)},get:function(e,t){var n=r[t],i=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===i?null:i},set:i}},oe=a.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof B||e instanceof E||e instanceof j)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=a.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&a.each(r,function(e,t){this[e]=t},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function n(t,n,r){var i,s=new a,o=t.getTranslation();if(n&&(t.isInvertible()?(i=(t=t._shiftless())._inverseTransform(o),o=null):i=new p,s[r?"cx":"x"]=i.x,s[r?"cy":"y"]=i.y),!t.isIdentity()){var l=t.decompose();if(l){var u=[],c=l.rotation,h=l.scaling,f=l.skewing;o&&!o.isZero()&&u.push("translate("+e.point(o)+")"),c&&u.push("rotate("+e.number(c)+")"),(!d.isZero(h.x-1)||!d.isZero(h.y-1))&&u.push("scale("+e.point(h)+")"),f.x&&u.push("skewX("+e.number(f.x)+")"),f.y&&u.push("skewY("+e.number(f.y)+")"),s.transform=u.join(" ")}else s.transform="matrix("+t.getValues().join(",")+")"}return s}function r(t,r){for(var i=n(t._matrix),s=t._children,a=ae.create("g",i,e),o=0,l=s.length;o<l;o++){var u=s[o],h=m(u,r);if(h)if(u.isClipMask()){var d=ae.create("clipPath");d.appendChild(h),c(u,d,"clip"),ae.set(a,{"clip-path":"url(#"+d.id+")"})}else a.appendChild(h)}return a}function i(t){var r=t._type,i=t._radius,s=n(t._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var a=t._size,o=a.width,l=a.height;s.x-=o/2,s.y-=l/2,s.width=o,s.height=l,i.isZero()&&(i=null)}return i&&("circle"===r?s.r=i:(s.rx=i.width,s.ry=i.height)),ae.create(r,s,e)}var s,o={Group:r,Layer:r,Raster:function(t,r){var i=n(t._matrix,!0),s=t.getSize(),a=t.getImage();return i.x-=s.width/2,i.y-=s.height/2,i.width=s.width,i.height=s.height,i.href=0==r.embedImages&&a&&a.src||t.toDataURL(),ae.create("image",i,e)},Path:function(t,r){var s=r.matchShapes;if(s){var a=t.toShape(!1);if(a)return i(a)}var o,l=t._segments,u=l.length,c=n(t._matrix);if(s&&u>=2&&!t.hasHandles())if(u>2){o=t._closed?"polygon":"polyline";for(var h=[],d=0;d<u;d++)h.push(e.point(l[d]._point));c.points=h.join(" ")}else{o="line";var f=l[0]._point,p=l[1]._point;c.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else o="path",c.d=t.getPathData(null,r.precision);return ae.create(o,c,e)},Shape:i,CompoundPath:function(t,r){var i=n(t._matrix),s=t.getPathData(null,r.precision);return s&&(i.d=s),ae.create("path",i,e)},SymbolItem:function(t,r){var i=n(t._matrix,!0),s=t._definition,a=u(s,"symbol"),o=s._item,l=o.getStrokeBounds();return a||((a=ae.create("symbol",{viewBox:e.rectangle(l)})).appendChild(m(o,r)),c(s,a,"symbol")),i.href="#"+a.id,i.x+=l.x,i.y+=l.y,i.width=l.width,i.height=l.height,i.overflow="visible",ae.create("use",i,e)},PointText:function(t){var r=ae.create("text",n(t._matrix,!0),e);return r.textContent=t._content,r}};function l(t,n,r){var i={},s=!r&&t.getParent(),o=[];return null!=t._name&&(i.id=t._name),a.each(oe,function(n){var r=n.get,l=n.type,h=t[r]();if(n.exportFilter?n.exportFilter(t,h):!s||!a.equals(s[r](),h)){if("color"===l&&null!=h){var d=h.getAlpha();d<1&&(i[n.attribute+"-opacity"]=d)}"style"===l?o.push(n.attribute+": "+h):i[n.attribute]=null==h?"none":"color"===l?h.gradient?function(t){var n=u(t,"color");if(!n){var r,i=t.getGradient(),s=i._radial,a=t.getOrigin(),o=t.getDestination();if(s){r={cx:a.x,cy:a.y,r:a.getDistance(o)};var l=t.getHighlight();l&&(r.fx=l.x,r.fy=l.y)}else r={x1:a.x,y1:a.y,x2:o.x,y2:o.y};r.gradientUnits="userSpaceOnUse",n=ae.create((s?"radial":"linear")+"Gradient",r,e);for(var h=i._stops,d=0,f=h.length;d<f;d++){var p=h[d],g=p._color,m=g.getAlpha(),v=p._offset;r={offset:null!==v&&void 0!==v?v:d/(f-1)},g&&(r["stop-color"]=g.toCSS(!0)),m<1&&(r["stop-opacity"]=m),n.appendChild(ae.create("stop",r,e))}c(t,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===l?h.join(","):"lookup"===l?n.toSVG[h]:h}}),o.length&&(i.style=o.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),ae.set(n,i,e)}function u(e,t){return s||(s={ids:{},svgs:{}}),e&&s.svgs[t+"-"+(e._id||e.__id||(e.__id=f.get("svg")))]}function c(e,t,n){s||u();var r=s.ids[n]=(s.ids[n]||0)+1;t.id=n+"-"+r,s.svgs[n+"-"+(e._id||e.__id)]=t}function g(e,n){var r=e,i=null;if(s){for(var a in r="svg"===e.nodeName.toLowerCase()&&e,s.svgs)i||(r||(r=ae.create("svg")).appendChild(e),i=r.insertBefore(ae.create("defs"),r.firstChild)),i.appendChild(s.svgs[a]);s=null}return n.asString?(new t.XMLSerializer).serializeToString(r):r}function m(e,t,n){var r=o[e._class],i=r&&r(e,t);if(i){var s=t.onExport;s&&(i=s(e,i,t)||i);var a=JSON.stringify(e._data);a&&"{}"!==a&&"null"!==a&&i.setAttribute("data-paper-data",a)}return i&&l(e,i,n)}function v(t){return t||(t={}),e=new h(t.precision),t}S.inject({exportSVG:function(e){return g(m(this,e=v(e),!0),e)}}),w.inject({exportSVG:function(t){t=v(t);var r=this._children,i=this.getView(),s=a.pick(t.bounds,"view"),o=t.matrix||"view"===s&&i._matrix,l=o&&b.read([o]),u="view"===s?new _([0,0],i.getViewSize()):"content"===s?S._getBounds(r,l,{stroke:!0}).rect:_.read([s],0,{readNull:!0}),c={version:"1.1",xmlns:ae.svg,"xmlns:xlink":ae.xlink};u&&(c.width=u.width,c.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(c.viewBox=e.rectangle(u)));var h=ae.create("svg",c,e),d=h;l&&!l.isIdentity()&&(d=h.appendChild(ae.create("g",n(l),e)));for(var f=0,p=r.length;f<p;f++)d.appendChild(m(r[f],t,!0));return g(h,t)}})},new function(){var e,n={};function o(t,n,r,i,s,a){var o=ae.get(t,n)||a,l=null==o?i?null:r?"":0:r?o:parseFloat(o);return/%\s*$/.test(o)?l/100*(s?1:e[/x|^width/.test(n)?"width":"height"]):l}function l(e,t,n,r,i,s,a){return t=o(e,t||"x",!1,r,i,s),n=o(e,n||"y",!1,r,i,a),!r||null!=t&&null!=n?new p(t,n):null}function u(e,t,n,r,i){return t=o(e,t||"width",!1,r,i),n=o(e,n||"height",!1,r,i),!r||null!=t&&null!=n?new m(t,n):null}function c(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?T(e)||e:"lookup"===t?n[e]:e}function h(e,t,n,r){var i=e.childNodes,s="clippath"===t,a="defs"===t,o=new C,l=o._project,u=l._currentStyle,c=[];if(!s&&!a&&(o=k(o,e,r),l._currentStyle=o._style.clone()),r)for(var h=e.querySelectorAll("defs"),d=0,f=h.length;d<f;d++)I(h[d],n,!1);for(d=0,f=i.length;d<f;d++){var p,g=i[d];1===g.nodeType&&!/^defs$/i.test(g.nodeName)&&(p=I(g,n,!1))&&!(p instanceof M)&&c.push(p)}return o.addChildren(c),s&&(o=k(o.reduce(),e,r)),l._currentStyle=u,(s||a)&&(o.remove(),o=null),o}function d(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,s=n.length;i<s;i+=2)r.push(new p(parseFloat(n[i]),parseFloat(n[i+1])));var a=new N(r);return"polygon"===t&&a.closePath(),a}function f(e,t){var r,i=(o(e,"href",!0)||"").substring(1),s="radialgradient"===t;if(i)(r=n[i].getGradient())._radial^s&&((r=r.clone())._radial=s);else{for(var a=e.childNodes,u=[],c=0,h=a.length;c<h;c++){var d=a[c];1===d.nodeType&&u.push(k(new G,d))}r=new H(u,s)}var f,p,g,m="userSpaceOnUse"!==o(e,"gradientUnits",!0);return s?(p=(f=l(e,"cx","cy",!1,m,"50%","50%")).add(o(e,"r",!1,!1,m,"50%"),0),g=l(e,"fx","fy",!0,m)):(f=l(e,"x1","y1",!1,m,"0%","0%"),p=l(e,"x2","y2",!1,m,"100%","0%")),k(new U(r,f,p,g),e)._scaleToBounds=m,null}var g={"#document":function(e,t,n,r){for(var i=e.childNodes,s=0,a=i.length;s<a;s++){var o=i[s];if(1===o.nodeType)return I(o,n,r)}},g:h,svg:h,clippath:h,polygon:d,polyline:d,path:function(e){return B.create(e.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(e){var t=new A(o(e,"href",!0));return t.on("load",function(){var t=u(e);this.setSize(t);var n=l(e).add(t.divide(2));this._matrix.append((new b).translate(n))}),t},symbol:function(e,t,n,r){return new M(h(e,t,n,r),!0)},defs:h,use:function(e){var t=(o(e,"href",!0)||"").substring(1),r=n[t],i=l(e);return r?r instanceof M?r.place(i):r.clone().translate(i):null},circle:function(e){return new E.Circle(l(e,"cx","cy"),o(e,"r"))},ellipse:function(e){return new E.Ellipse({center:l(e,"cx","cy"),radius:u(e,"rx","ry")})},rect:function(e){return new E.Rectangle(new _(l(e),u(e)),u(e,"rx","ry"))},line:function(e){return new N.Line(l(e,"x1","y1"),l(e,"x2","y2"))},text:function(e){var t=new V(l(e).add(l(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t},switch:h};function v(e,t,n,r){if(e.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),s=new b,a=0,o=i.length;a<o;a++){var l=i[a];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),d=0,f=h.length;d<f;d++)h[d]=parseFloat(h[d]);switch(c){case"matrix":s.append(new b(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":s.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":s.translate(h[0],h[1]||0);break;case"scale":s.scale(h);break;case"skewX":s.skew(h[0],0);break;case"skewY":s.skew(0,h[0])}}e.transform(s)}}function y(e,t,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=e[r]&&e[r]();i&&i.setAlpha(parseFloat(t))}var x=a.set(a.each(oe,function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](c(n,e.type,e.fromSVG)),"color"===e.type)){var r=t[e.get]();if(r&&r._scaleToBounds){var i=t.getBounds();r.transform((new b).translate(i.getPoint()).scale(i.getSize()))}}}},{}),{id:function(e,t){n[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=T(t);if(n){if((n=n.clone()).setClipMask(!0),!(e instanceof C))return new C(n,e);e.insertChild(0,n)}},gradientTransform:v,transform:v,"fill-opacity":y,"stroke-opacity":y,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,r,i){var s,a=new _(c(t,"array")),o=u(r,null,null,!0);if(e instanceof C){var l=o?o.divide(a.getSize()):1,h=(new b).scale(l).translate(a.getPoint().negate());s=e}else e instanceof M&&(o&&a.setSize(o),s=e._item);if(s){if("visible"!==D(r,"overflow",i)){var d=new E.Rectangle(a);d.setClipMask(!0),s.addChild(d)}h&&s.transform(h)}}});function D(e,t,n){var i=e.attributes[t],s=i&&i.value;if(!s&&e.style){var o=a.camelize(t);!(s=e.style[o])&&n.node[o]!==n.parent[o]&&(s=n.node[o])}return s?"none"===s?null:s:r}function k(e,t,n){var i=t.parentNode,s={node:W.getStyles(t)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&W.getStyles(i)||{}};return a.each(x,function(n,i){var a=D(t,i,s);e=a!==r&&n(e,a,i,t,s)||e}),e}function T(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/),r=t&&t[1],s=r&&n[i?r.replace(i.location.href.split("#")[0]+"#",""):r];return s&&s._scaleToBounds&&((s=s.clone())._scaleToBounds=!0),s}function I(t,r,i){var o,l,c,h=t.nodeName.toLowerCase(),d="#document"!==h,f=s.body;i&&d&&(e=le.getView().getSize(),e=u(t,null,null,!0)||e,o=ae.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),l=t.parentNode,c=t.nextSibling,o.appendChild(t),f.appendChild(o));var p=le.settings,m=p.applyMatrix,v=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var _=g[h],y=_&&_(t,h,r,i)||null;if(p.insertItems=v,p.applyMatrix=m,y){d&&!(y instanceof C)&&(y=k(y,t,i));var b=r.onImport,x=d&&t.getAttribute("data-paper-data");b&&(y=b(t,y,r)||y),r.expandShapes&&y instanceof E&&(y.remove(),y=y.toPath()),x&&(y._data=JSON.parse(x))}return o&&(f.removeChild(o),l&&(c?l.insertBefore(t,c):l.appendChild(t))),i&&(n={},y&&a.pick(r.applyMatrix,m)&&y.matrix.apply(!0,!0)),y}function O(e,n,i){if(!e)return null;n="function"==typeof n?{onLoad:n}:n||{};var a=le,o=null;function l(s){try{var l="object"==typeof s?s:(new t.DOMParser).parseFromString(s.trim(),"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+e);le=a,o=I(l,n,!0),(!n||!1!==n.insert)&&i._insertItem(r,o);var c=n.onLoad;c&&c(o,s)}catch(h){u(h)}}function u(e,t){var r=n.onError;if(!r)throw new Error(e);r(e,t)}if("string"!=typeof e||/^[\s\S]*</.test(e)){if(typeof File<"u"&&e instanceof File){var c=new FileReader;return c.onload=function(){l(c.result)},c.onerror=function(){u(c.error)},c.readAsText(e)}l(e)}else{var h=s.getElementById(e);h?l(h):re({url:e,async:!0,onLoad:l,onError:u})}return o}S.inject({importSVG:function(e,t){return O(e,t,this)}}),w.inject({importSVG:function(e,t){return this.activate(),O(e,t,this)}})},a.exports.PaperScript=function(){var e,r,o=this,u=o.acorn;if(!u)try{u=n(367)}catch(w){}function c(e,t){return(o.acorn||u).parse(e,t)}u||(u=e={},r=function(e){var t,n,r,i;e.version="0.5.0",e.parse=function(e,i){return n=String(e),r=n.length,a(i),We(),function(e){v=_=o,t.locations&&(y=new Ye),b=w=null,x=[],$e();var n=e||ct(),r=!0;for(e||(n.body=[]);d!==T;){var i=wt();n.body.push(i),r&&ft(i)&&ot(!0),r=!1}return dt(n,"Program")}(t.program)};var s=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function a(e){for(var n in t=e||{},s)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=s[n]);i=t.sourceFile||null}var o,l,u,c,h,d,f,p,g,m,v,_,y,b,x,w,S=e.getLineInfo=function(e,t){for(var n=1,r=0;;){Ue.lastIndex=r;var i=Ue.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}};function C(e,t){var r=S(n,e);t+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=r,i.raisedAt=o,i}e.tokenize=function(e,i){n=String(e),r=n.length,a(i),We();var s={};function v(e){return _=u,$e(e),s.start=l,s.end=u,s.startLoc=c,s.endLoc=h,s.type=d,s.value=f,s}return v.jumpTo=function(e,r){if(o=e,t.locations){g=1,m=Ue.lastIndex=0;for(var i;(i=Ue.exec(n))&&i.index<e;)++g,m=i.index+i[0].length}p=r,Xe()},v};var D=[],E={type:"num"},A={type:"regexp"},k={type:"string"},M={type:"name"},T={type:"eof"},I={keyword:"break"},O={keyword:"case",beforeExpr:!0},L={keyword:"catch"},P={keyword:"continue"},B={keyword:"debugger"},N={keyword:"default"},R={keyword:"do",isLoop:!0},F={keyword:"else",beforeExpr:!0},z={keyword:"finally"},j={keyword:"for",isLoop:!0},V={keyword:"function"},U={keyword:"if"},H={keyword:"return",beforeExpr:!0},G={keyword:"switch"},Y={keyword:"throw",beforeExpr:!0},W={keyword:"try"},q={keyword:"var"},Z={keyword:"while",isLoop:!0},K={keyword:"with"},X={keyword:"new",beforeExpr:!0},J={keyword:"this"},$={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:I,case:O,catch:L,continue:P,debugger:B,default:N,do:R,else:F,finally:z,for:j,function:V,if:U,return:H,switch:G,throw:Y,try:W,var:q,while:Z,with:K,null:$,true:Q,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:J,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},re={type:"[",beforeExpr:!0},ie={type:"]"},se={type:"{",beforeExpr:!0},ae={type:"}"},oe={type:"(",beforeExpr:!0},le={type:")"},ue={type:",",beforeExpr:!0},ce={type:";",beforeExpr:!0},he={type:":",beforeExpr:!0},de={type:"."},fe={type:"?",beforeExpr:!0},pe={binop:10,beforeExpr:!0},ge={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},ve={postfix:!0,prefix:!0,isUpdate:!0},_e={prefix:!0,beforeExpr:!0},ye={binop:1,beforeExpr:!0},be={binop:2,beforeExpr:!0},xe={binop:3,beforeExpr:!0},we={binop:4,beforeExpr:!0},Se={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},De={binop:7,beforeExpr:!0},Ee={binop:8,beforeExpr:!0},Ae={binop:9,prefix:!0,beforeExpr:!0},ke={binop:10,beforeExpr:!0};for(var Me in e.tokTypes={bracketL:re,bracketR:ie,braceL:se,braceR:ae,parenL:oe,parenR:le,comma:ue,semi:ce,colon:he,dot:de,question:fe,slash:pe,eq:ge,name:M,eof:T,num:E,regexp:A,string:k},ne)e.tokTypes["_"+Me]=ne[Me];function Te(e){e=e.split(" ");var t="",n=[];e:for(var r=0;r<e.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==e[r].length){n[i].push(e[r]);continue e}n.push([e[r]])}function s(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort(function(e,t){return t.length-e.length}),t+="switch(str.length){",r=0;r<n.length;++r){var a=n[r];t+="case "+a[0].length+":",s(a)}t+="}"}else s(e);return new Function("str",t)}var Ie,Oe=Te("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Le=Te("class enum extends super const export import"),Pe=Te("implements interface let package private protected public static yield"),Be=Te("eval arguments"),Ne=Te("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Re=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Fe="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",ze=new RegExp("["+Fe+"]"),je=new RegExp("["+Fe+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ve=/[\n\r\u2028\u2029]/,Ue=/\r\n|[\n\r\u2028\u2029]/g,He=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&ze.test(String.fromCharCode(e)))},Ge=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&je.test(String.fromCharCode(e))))};function Ye(){this.line=g,this.column=o-m}function We(){g=1,o=m=0,p=!0,Xe()}function qe(e,n){u=o,t.locations&&(h=new Ye),d=e,Xe(),f=n,p=e.beforeExpr}function Ze(){var e=t.onComment&&t.locations&&new Ye,r=o,i=n.indexOf("*/",o+=2);if(-1===i&&C(o-2,"Unterminated comment"),o=i+2,t.locations){Ue.lastIndex=r;for(var s;(s=Ue.exec(n))&&s.index<o;)++g,m=s.index+s[0].length}t.onComment&&t.onComment(!0,n.slice(r+2,i),r,o,e,t.locations&&new Ye)}function Ke(){for(var e=o,i=t.onComment&&t.locations&&new Ye,s=n.charCodeAt(o+=2);o<r&&10!==s&&13!==s&&8232!==s&&8233!==s;)++o,s=n.charCodeAt(o);t.onComment&&t.onComment(!1,n.slice(e+2,o),e,o,i,t.locations&&new Ye)}function Xe(){for(;o<r;){var e=n.charCodeAt(o);if(32===e)++o;else if(13===e)++o,10===(i=n.charCodeAt(o))&&++o,t.locations&&(++g,m=o);else if(10===e||8232===e||8233===e)++o,t.locations&&(++g,m=o);else if(e>8&&e<14)++o;else if(47===e){var i;if(42===(i=n.charCodeAt(o+1)))Ze();else{if(47!==i)break;Ke()}}else if(160===e)++o;else{if(!(e>=5760&&Re.test(String.fromCharCode(e))))break;++o}}}function Je(e){switch(e){case 46:return function(){var e=n.charCodeAt(o+1);return e>=48&&e<=57?nt(!0):(++o,qe(de))}();case 40:return++o,qe(oe);case 41:return++o,qe(le);case 59:return++o,qe(ce);case 44:return++o,qe(ue);case 91:return++o,qe(re);case 93:return++o,qe(ie);case 123:return++o,qe(se);case 125:return++o,qe(ae);case 58:return++o,qe(he);case 63:return++o,qe(fe);case 48:var i=n.charCodeAt(o+1);if(120===i||88===i)return function(){o+=2;var e=tt(16);return null==e&&C(l+2,"Expected hexadecimal number"),He(n.charCodeAt(o))&&C(o,"Identifier directly after number"),qe(E,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return nt(!1);case 34:case 39:return function(e){o++;for(var i="";;){o>=r&&C(l,"Unterminated string constant");var s=n.charCodeAt(o);if(s===e)return++o,qe(k,i);if(92===s){s=n.charCodeAt(++o);var a=/^[0-7]+/.exec(n.slice(o,o+3));for(a&&(a=a[0]);a&&parseInt(a,8)>255;)a=a.slice(0,-1);if("0"===a&&(a=null),++o,a)w&&C(o-2,"Octal literal in strict mode"),i+=String.fromCharCode(parseInt(a,8)),o+=a.length-1;else switch(s){case 110:i+="\n";break;case 114:i+="\r";break;case 120:i+=String.fromCharCode(rt(2));break;case 117:i+=String.fromCharCode(rt(4));break;case 85:i+=String.fromCharCode(rt(8));break;case 116:i+="\t";break;case 98:i+="\b";break;case 118:i+="\v";break;case 102:i+="\f";break;case 48:i+="\0";break;case 13:10===n.charCodeAt(o)&&++o;case 10:t.locations&&(m=o,++g);break;default:i+=String.fromCharCode(s)}}else(13===s||10===s||8232===s||8233===s)&&C(l,"Unterminated string constant"),i+=String.fromCharCode(s),++o}}(e);case 47:return function(){var e=n.charCodeAt(o+1);return p?(++o,et()):61===e?Qe(me,2):Qe(pe,1)}();case 37:case 42:return 61===n.charCodeAt(o+1)?Qe(me,2):Qe(ke,1);case 124:case 38:return function(e){var t=n.charCodeAt(o+1);return t===e?Qe(124===e?ye:be,2):61===t?Qe(me,2):Qe(124===e?xe:Se,1)}(e);case 94:return 61===n.charCodeAt(o+1)?Qe(me,2):Qe(we,1);case 43:case 45:return function(e){var t=n.charCodeAt(o+1);return t===e?45==t&&62==n.charCodeAt(o+2)&&Ve.test(n.slice(_,o))?(o+=3,Ke(),Xe(),$e()):Qe(ve,2):61===t?Qe(me,2):Qe(Ae,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(o+1),r=1;return t===e?(r=62===e&&62===n.charCodeAt(o+2)?3:2,61===n.charCodeAt(o+r)?Qe(me,r+1):Qe(Ee,r)):33==t&&60==e&&45==n.charCodeAt(o+2)&&45==n.charCodeAt(o+3)?(o+=4,Ke(),Xe(),$e()):(61===t&&(r=61===n.charCodeAt(o+2)?3:2),Qe(De,r))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(o+1)?Qe(Ce,61===n.charCodeAt(o+2)?3:2):Qe(61===e?ge:_e,1)}(e);case 126:return Qe(_e,1)}return!1}function $e(e){if(e?o=l+1:l=o,t.locations&&(c=new Ye),e)return et();if(o>=r)return qe(T);var i=n.charCodeAt(o);if(He(i)||92===i)return st();var s=Je(i);if(!1===s){var a=String.fromCharCode(i);if("\\"===a||ze.test(a))return st();C(o,"Unexpected character '"+a+"'")}return s}function Qe(e,t){var r=n.slice(o,o+t);o+=t,qe(e,r)}function et(){for(var e,t,i=o;;){o>=r&&C(i,"Unterminated regular expression");var s=n.charAt(o);if(Ve.test(s)&&C(i,"Unterminated regular expression"),e)e=!1;else{if("["===s)t=!0;else if("]"===s&&t)t=!1;else if("/"===s&&!t)break;e="\\"===s}++o}var a=n.slice(i,o);++o;var l=it();l&&!/^[gmsiy]*$/.test(l)&&C(i,"Invalid regexp flag");try{var u=new RegExp(a,l)}catch(c){c instanceof SyntaxError&&C(i,c.message),C(c)}return qe(A,u)}function tt(e,t){for(var r=o,i=0,s=0,a=null!==t&&void 0!==t?t:1/0;s<a;++s){var l,u=n.charCodeAt(o);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=e)break;++o,i=i*e+l}return o===r||null!=t&&o-r!==t?null:i}function nt(e){var t=o,r=!1,i=48===n.charCodeAt(o);!e&&null===tt(10)&&C(t,"Invalid number"),46===n.charCodeAt(o)&&(++o,tt(10),r=!0);var s=n.charCodeAt(o);(69===s||101===s)&&((43===(s=n.charCodeAt(++o))||45===s)&&++o,null===tt(10)&&C(t,"Invalid number"),r=!0),He(n.charCodeAt(o))&&C(o,"Identifier directly after number");var a,l=n.slice(t,o);return r?a=parseFloat(l):i&&1!==l.length?/[89]/.test(l)||w?C(t,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),qe(E,a)}function rt(e){var t=tt(16,e);return null===t&&C(l,"Bad character escape sequence"),t}function it(){Ie=!1;for(var e,t=!0,r=o;;){var i=n.charCodeAt(o);if(Ge(i))Ie&&(e+=n.charAt(o)),++o;else{if(92!==i)break;Ie||(e=n.slice(r,o)),Ie=!0,117!=n.charCodeAt(++o)&&C(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var s=rt(4),a=String.fromCharCode(s);a||C(o-1,"Invalid Unicode escape"),(t?He(s):Ge(s))||C(o-4,"Invalid Unicode escape"),e+=a}t=!1}return Ie?e:n.slice(r,o)}function st(){var e=it(),t=M;return!Ie&&Ne(e)&&(t=ne[e]),qe(t,e)}function at(){v=l,_=u,y=h,$e()}function ot(e){if(w=e,o=l,t.locations)for(;o<m;)m=n.lastIndexOf("\n",m-2)+1,--g;Xe(),$e()}function lt(){this.type=null,this.start=l,this.end=null}function ut(){this.start=c,this.end=null,null!==i&&(this.source=i)}function ct(){var e=new lt;return t.locations&&(e.loc=new ut),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[l,0]),e}function ht(e){var n=new lt;return n.start=e.start,t.locations&&(n.loc=new ut,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function dt(e,n){return e.type=n,e.end=_,t.locations&&(e.loc.end=y),t.ranges&&(e.range[1]=_),e}function ft(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function pt(e){if(d===e)return at(),!0}function gt(){return!t.strictSemicolons&&(d===T||d===ae||Ve.test(n.slice(_,l)))}function mt(){!pt(ce)&&!gt()&&_t()}function vt(e){d===e?at():_t()}function _t(){C(l,"Unexpected token")}function yt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&C(e.start,"Assigning to rvalue"),w&&"Identifier"===e.type&&Be(e.name)&&C(e.start,"Assigning to "+e.name+" in strict mode")}var bt={kind:"loop"},xt={kind:"switch"};function wt(){(d===pe||d===me&&"/="==f)&&$e(!0);var e=d,r=ct();switch(e){case I:case P:at();var i=e===I;pt(ce)||gt()?r.label=null:d!==M?_t():(r.label=Rt(),mt());for(var s=0;s<x.length;++s){var a=x[s];if((null==r.label||a.name===r.label.name)&&(null!=a.kind&&(i||"loop"===a.kind)||r.label&&i))break}return s===x.length&&C(r.start,"Unsyntactic "+e.keyword),dt(r,i?"BreakStatement":"ContinueStatement");case B:return at(),mt(),dt(r,"DebuggerStatement");case R:return at(),x.push(bt),r.body=wt(),x.pop(),vt(Z),r.test=St(),mt(),dt(r,"DoWhileStatement");case j:if(at(),x.push(bt),vt(oe),d===ce)return Dt(r,null);if(d===q){var o=ct();return at(),At(o,!0),dt(o,"VariableDeclaration"),1===o.declarations.length&&pt(te)?Et(r,o):Dt(r,o)}return o=kt(!1,!0),pt(te)?(yt(o),Et(r,o)):Dt(r,o);case V:return at(),Bt(r,!0);case U:return at(),r.test=St(),r.consequent=wt(),r.alternate=pt(F)?wt():null,dt(r,"IfStatement");case H:return!b&&!t.allowReturnOutsideFunction&&C(l,"'return' outside of function"),at(),pt(ce)||gt()?r.argument=null:(r.argument=kt(),mt()),dt(r,"ReturnStatement");case G:at(),r.discriminant=St(),r.cases=[],vt(se),x.push(xt);for(var u,c;d!=ae;)if(d===O||d===N){var h=d===O;u&&dt(u,"SwitchCase"),r.cases.push(u=ct()),u.consequent=[],at(),h?u.test=kt():(c&&C(v,"Multiple default clauses"),c=!0,u.test=null),vt(he)}else u||_t(),u.consequent.push(wt());return u&&dt(u,"SwitchCase"),at(),x.pop(),dt(r,"SwitchStatement");case Y:return at(),Ve.test(n.slice(_,l))&&C(_,"Illegal newline after throw"),r.argument=kt(),mt(),dt(r,"ThrowStatement");case W:if(at(),r.block=Ct(),r.handler=null,d===L){var p=ct();at(),vt(oe),p.param=Rt(),w&&Be(p.param.name)&&C(p.param.start,"Binding "+p.param.name+" in strict mode"),vt(le),p.guard=null,p.body=Ct(),r.handler=dt(p,"CatchClause")}return r.guardedHandlers=D,r.finalizer=pt(z)?Ct():null,!r.handler&&!r.finalizer&&C(r.start,"Missing catch or finally clause"),dt(r,"TryStatement");case q:return at(),At(r),mt(),dt(r,"VariableDeclaration");case Z:return at(),r.test=St(),x.push(bt),r.body=wt(),x.pop(),dt(r,"WhileStatement");case K:return w&&C(l,"'with' in strict mode"),at(),r.object=St(),r.body=wt(),dt(r,"WithStatement");case se:return Ct();case ce:return at(),dt(r,"EmptyStatement");default:var g=f,m=kt();if(e===M&&"Identifier"===m.type&&pt(he)){for(s=0;s<x.length;++s)x[s].name===g&&C(m.start,"Label '"+g+"' is already declared");var y=d.isLoop?"loop":d===G?"switch":null;return x.push({name:g,kind:y}),r.body=wt(),x.pop(),r.label=m,dt(r,"LabeledStatement")}return r.expression=m,mt(),dt(r,"ExpressionStatement")}}function St(){vt(oe);var e=kt();return vt(le),e}function Ct(e){var t,n=ct(),r=!0,i=!1;for(n.body=[],vt(se);!pt(ae);){var s=wt();n.body.push(s),r&&e&&ft(s)&&(t=i,ot(i=!0)),r=!1}return i&&!t&&ot(!1),dt(n,"BlockStatement")}function Dt(e,t){return e.init=t,vt(ce),e.test=d===ce?null:kt(),vt(ce),e.update=d===le?null:kt(),vt(le),e.body=wt(),x.pop(),dt(e,"ForStatement")}function Et(e,t){return e.left=t,e.right=kt(),vt(le),e.body=wt(),x.pop(),dt(e,"ForInStatement")}function At(e,t){for(e.declarations=[],e.kind="var";;){var n=ct();if(n.id=Rt(),w&&Be(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=pt(ge)?kt(!0,t):null,e.declarations.push(dt(n,"VariableDeclarator")),!pt(ue))break}return e}function kt(e,t){var n=Mt(t);if(!e&&d===ue){var r=ht(n);for(r.expressions=[n];pt(ue);)r.expressions.push(Mt(t));return dt(r,"SequenceExpression")}return n}function Mt(e){var t=function(e){var t=function(e){return Tt(It(),-1,e)}(e);if(pt(fe)){var n=ht(t);return n.test=t,n.consequent=kt(!0),vt(he),n.alternate=kt(!0,e),dt(n,"ConditionalExpression")}return t}(e);if(d.isAssign){var n=ht(t);return n.operator=f,n.left=t,at(),n.right=Mt(e),yt(t),dt(n,"AssignmentExpression")}return t}function Tt(e,t,n){var r=d.binop;if(null!=r&&(!n||d!==te)&&r>t){var i=ht(e);i.left=e,i.operator=f;var s=d;return at(),i.right=Tt(It(),r,n),Tt(dt(i,s===ye||s===be?"LogicalExpression":"BinaryExpression"),t,n)}return e}function It(){if(d.prefix){var e=ct(),t=d.isUpdate;return e.operator=f,e.prefix=!0,p=!0,at(),e.argument=It(),t?yt(e.argument):w&&"delete"===e.operator&&"Identifier"===e.argument.type&&C(e.start,"Deleting local variable in strict mode"),dt(e,t?"UpdateExpression":"UnaryExpression")}for(var n=Ot(Lt());d.postfix&&!gt();)(e=ht(n)).operator=f,e.prefix=!1,e.argument=n,yt(n),at(),n=dt(e,"UpdateExpression");return n}function Ot(e,t){var n;return pt(de)?((n=ht(e)).object=e,n.property=Rt(!0),n.computed=!1,Ot(dt(n,"MemberExpression"),t)):pt(re)?((n=ht(e)).object=e,n.property=kt(),n.computed=!0,vt(ie),Ot(dt(n,"MemberExpression"),t)):!t&&pt(oe)?((n=ht(e)).callee=e,n.arguments=Nt(le,!1),Ot(dt(n,"CallExpression"),t)):e}function Lt(){switch(d){case J:var e=ct();return at(),dt(e,"ThisExpression");case M:return Rt();case E:case k:case A:return(e=ct()).value=f,e.raw=n.slice(l,u),at(),dt(e,"Literal");case $:case Q:case ee:return(e=ct()).value=d.atomValue,e.raw=d.keyword,at(),dt(e,"Literal");case oe:var r=c,i=l;at();var s=kt();return s.start=i,s.end=u,t.locations&&(s.loc.start=r,s.loc.end=h),t.ranges&&(s.range=[i,u]),vt(le),s;case re:return e=ct(),at(),e.elements=Nt(ie,!0,!0),dt(e,"ArrayExpression");case se:return function(){var e=ct(),n=!0,r=!1;for(e.properties=[],at();!pt(ae);){if(n)n=!1;else if(vt(ue),t.allowTrailingCommas&&pt(ae))break;var i,s={key:Pt()},a=!1;if(pt(he)?(s.value=kt(!0),i=s.kind="init"):t.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=r=!0,i=s.kind=s.key.name,s.key=Pt(),d!==oe&&_t(),s.value=Bt(ct(),!1)):_t(),"Identifier"===s.key.type&&(w||r))for(var o=0;o<e.properties.length;++o){var l=e.properties[o];if(l.key.name===s.key.name){var u=i==l.kind||a&&"init"===l.kind||"init"===i&&("get"===l.kind||"set"===l.kind);u&&!w&&"init"===i&&"init"===l.kind&&(u=!1),u&&C(s.key.start,"Redefinition of property")}}e.properties.push(s)}return dt(e,"ObjectExpression")}();case V:return e=ct(),at(),Bt(e,!1);case X:return function(){var e=ct();return at(),e.callee=Ot(Lt(),!0),pt(oe)?e.arguments=Nt(le,!1):e.arguments=D,dt(e,"NewExpression")}();default:_t()}}function Pt(){return d===E||d===k?Lt():Rt(!0)}function Bt(e,t){d===M?e.id=Rt():t?_t():e.id=null,e.params=[];var n=!0;for(vt(oe);!pt(le);)n?n=!1:vt(ue),e.params.push(Rt());var r=b,i=x;if(b=!0,x=[],e.body=Ct(!0),b=r,x=i,w||e.body.body.length&&ft(e.body.body[0]))for(var s=e.id?-1:0;s<e.params.length;++s){var a=s<0?e.id:e.params[s];if((Pe(a.name)||Be(a.name))&&C(a.start,"Defining '"+a.name+"' in strict mode"),s>=0)for(var o=0;o<s;++o)a.name===e.params[o].name&&C(a.start,"Argument name clash in strict mode")}return dt(e,t?"FunctionDeclaration":"FunctionExpression")}function Nt(e,n,r){for(var i=[],s=!0;!pt(e);){if(s)s=!1;else if(vt(ue),n&&t.allowTrailingCommas&&pt(e))break;r&&d===ue?i.push(null):i.push(kt(!0))}return i}function Rt(e){var r=ct();return e&&"everywhere"==t.forbidReserved&&(e=!1),d===M?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Oe:Le)(f)||w&&Pe(f))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+f+"' is reserved"),r.name=f):e&&d.keyword?r.name=d.keyword:_t(),p=!1,at(),dt(r,"Identifier")}},r(e),u.version||(u=null));var h={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},d={"-":"__negate","+":"__self"},f=a.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(e){this["__"+e]="#"+e},{__self:function(){return this}});function g(e,t,n){var r=h[t];if(e&&e[r]){var i=e[r](n);return"!="===t?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function v(e,t){var n=d[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function _(e,n){if(!e)return"";var r=[];function a(e){for(var t=0,n=r.length;t<n;t++){var i=r[t];if(i[0]>=e)break;e+=i[1]}return e}function o(t){return e.substring(a(t.range[0]),a(t.range[1]))}function l(t,n){for(var i=a(t.range[0]),s=a(t.range[1]),o=0,l=r.length-1;l>=0;l--)if(i>r[l][0]){o=l+1;break}r.splice(o,0,[i,n.length-s+i]),e=e.substring(0,i)+n+e.substring(s)}function u(t,n){switch(t.type){case"UnaryExpression":if(t.operator in d&&"Literal"!==t.argument.type){var r=o(t.argument);l(t,'$__("'+t.operator+'", '+r+")")}break;case"BinaryExpression":if(t.operator in h&&"Literal"!==t.left.type){var i=o(t.left),s=o(t.right),u=function(t,n){return e.substring(a(t.range[1]),a(n.range[0]))}(t.left,t.right),c=t.operator;l(t,"__$__("+i+","+u.replace(new RegExp("\\"+c),'"'+c+'"')+", "+s+")")}break;case"UpdateExpression":case"AssignmentExpression":var f=n&&n.type;if(!("ForStatement"===f||"BinaryExpression"===f&&/^[=!<>]/.test(n.operator)||"MemberExpression"===f&&n.computed))if("UpdateExpression"===t.type){var p=(r=o(t.argument))+" = "+(g="__$__("+r+', "'+t.operator[0]+'", 1)');t.prefix?p="("+p+")":("AssignmentExpression"===f||"VariableDeclarator"===f||"BinaryExpression"===f)&&(o(n.left||n.id)===r&&(p=g),p=r+"; "+p),l(t,p)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){i=o(t.left),s=o(t.right);var g=i+" = __$__("+i+', "'+t.operator[0]+'", '+s+")";l(t,/^\(.*\)$/.test(o(t))?"("+g+")":g)}}}var f,p=(n=n||{}).url||"",g=n.sourceMaps,m=n.paperFeatures||{},v=n.source||e,_=n.offset||0,y=le.agent,b=y.versionNumber,x=!1,w=/\r\n|\n|\r/gm;if(g&&(y.chrome&&b>=30||y.webkit&&b>=537.76||y.firefox&&b>=23||y.node)){if(y.node)_-=2;else if(i&&p&&!i.location.href.indexOf(p)){var S=s.getElementsByTagName("html")[0].innerHTML;_=S.substr(0,S.indexOf(e)+1).match(w).length+1}var C=["AA"+function(e){var t="";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var n=31&e;(e>>=5)&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return t}((x=_>0&&!(y.chrome&&b>=36||y.safari&&b>=600||y.firefox&&b>=40||y.node))?0:_)+"A"];C.length=(e.match(w)||[]).length+1+(x?_:0),f={version:3,file:p,names:[],mappings:C.join(";AACA"),sourceRoot:"",sources:[p],sourcesContent:[v]}}return(!1!==m.operatorOverloading||!1!==m.moduleExports)&&function e(t,n,r){if(t){for(var i in t)if("range"!==i&&"loc"!==i){var s=t[i];if(Array.isArray(s))for(var a=0,c=s.length;a<c;a++)e(s[a],t,r);else s&&"object"==typeof s&&e(s,t,r)}!1!==r.operatorOverloading&&u(t,n),!1!==r.moduleExports&&function(e){switch(e.type){case"ExportDefaultDeclaration":l({range:[e.start,e.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var t=e.declaration,n=e.specifiers;if(t){var r=t.declarations;r&&(r.forEach(function(e){l(e,"module.exports."+o(e))}),l({range:[e.start,t.start+t.kind.length]},""))}else if(n){var i=n.map(function(e){var t=o(e);return"module.exports."+t+" = "+t+"; "}).join("");i&&l(e,i)}}}(t)}}(c(e,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,m),f&&(x&&(e=new Array(_+1).join("\n")+e),/^(inline|both)$/.test(g)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+t.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),e+="\n//# sourceURL="+(p||"paperscript")),{url:p,source:v,code:e,map:f}}function y(e,t,n){le=t;var r,i=t.getView(),o=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new te:null,l=o?o._events:[],u=["onFrame","onResize"].concat(l),c=[],h=[],d="object"==typeof e?e:_(e,n);function f(t,n){for(var r in t)(n||!/^_/.test(r))&&new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(e)&&(c.push(r),h.push(t[r]))}e=d.code,f({__$__:g,$__:v,paper:t,tool:o},!0),f(t),e="var module = { exports: {} }; "+e,(x=a.each(u,function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(c.push(t),this.push("module.exports."+t+" = "+t+";"))},[]).join("\n"))&&(e+="\n"+x),e+="\nreturn module.exports;";var m=le.agent;if(s&&(m.chrome||m.firefox&&m.versionNumber<40)){var y=s.createElement("script"),b=s.head||s.getElementsByTagName("head")[0];m.firefox&&(e="\n"+e),y.appendChild(s.createTextNode("document.__paperscript__ = function("+c+") {"+e+"\n}")),b.appendChild(y),r=s.__paperscript__,delete s.__paperscript__,b.removeChild(y)}else r=Function(c,e);var x,w=(x=r&&r.apply(t,h))||{};return a.each(l,function(e){var t=w[e];t&&(o[e]=t)}),i&&(w.onResize&&i.setOnResize(w.onResize),i.emit("resize",{size:i.size,delta:new p}),w.onFrame&&i.setOnFrame(w.onFrame),i.requestUpdate()),x}function b(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==l.getAttribute(e,"ignore")){var t=l.getAttribute(e,"canvas"),n=s.getElementById(t),r=e.src||e.getAttribute("data-src"),i=l.hasAttribute(e,"async"),a="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var o=l.get(n.getAttribute(a))||(new l).setup(n);return n.setAttribute(a,o._id),r?re({url:r,async:i,mimeType:"text/plain",onLoad:function(e){y(e,o,r)}}):y(e.innerHTML,o,e.baseURI),e.setAttribute("data-paper-ignore","true"),o}}function x(){a.each(s&&s.getElementsByTagName("script"),b)}return p.inject(f),m.inject(f),U.inject(f),i&&("complete"===s.readyState?setTimeout(x):q.add(i,{load:x})),{compile:_,execute:y,load:function(e){return e?b(e):x()},parse:c,calculateBinary:g,calculateUnary:v}}.call(this);var le=new(l.inject(a.exports,{Base:a,Numerical:d,Key:$,DomEvent:q,DomElement:W,document:s,window:i,Symbol:M,PlacedSymbol:k}));return le.agent.node&&Ie(le),"function"==typeof r&&r.amd?r("paper",le):e&&(e.exports=le),le}).call(Ae,"object"==typeof self?self:null)}(Te);const Oe=ke(Te.exports);class Le{constructor(){Ee(this,"_paperScope",new Oe.PaperScope),Ee(this,"_baseMaterial",null),Ee(this,"_borderMaterial",null);const e=document.createElement("canvas");e.width=1,e.height=1,this._paperScope.setup(new Oe.Size(1,1))}generatePreview3D(e,t){if(!e.columns||isNaN(e.columns)||e.columns<1||e.rows<1||!e.rows||isNaN(e.rows))throw new Error("Invalid columns or rows value. Columns and rows must be greater than 0 and must be a number.");console.log("Generating 3D preview for resizable canvas...",e),this._baseMaterial||(this._baseMaterial=new BABYLON.PBRMaterial("baseMaterial",t)),this._borderMaterial||(this._borderMaterial=new BABYLON.PBRMaterial("borderMaterial",t)),this._baseMaterial.albedoColor=new BABYLON.Color3(1,1,1),this._baseMaterial.metallic=0,this._baseMaterial.roughness=.5,this._borderMaterial.albedoColor=BABYLON.Color3.FromHexString(e.borderColor),this._borderMaterial.metallic=0,this._borderMaterial.roughness=.5,e.useCheckerTexture&&(this._baseMaterial.albedoTexture=new BABYLON.Texture("https://zakekecdn.blob.core.windows.net/cdn/Test/checker_texture.png",t),this._baseMaterial.albedoTexture.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,this._baseMaterial.albedoTexture.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE,this._borderMaterial.albedoTexture=new BABYLON.Texture("https://zakekecdn.blob.core.windows.net/cdn/Test/checker_texture.png",t),this._borderMaterial.albedoTexture.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,this._borderMaterial.albedoTexture.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE);const n=new BABYLON.Mesh("groupMesh",t),r=[],i=[],s=[];for(let c=0;c<e.columns;c++)for(let n=0;n<e.rows;n++){const[a,o,l]=this.generateCanvasMesh(e,t,c,n);r.push(a),i.push(o),s.push(l)}const a=BABYLON.Mesh.MergeMeshes(r,!0,!0,void 0,!1,!1),o=BABYLON.Mesh.MergeMeshes(i,!0,!0,void 0,!1,!1),l=BABYLON.Mesh.MergeMeshes(s,!0,!0,void 0,!1,!1);if(!a||!o||!l)return null;a.material=this._borderMaterial,o.material=this._baseMaterial,l.material=this._baseMaterial,a.parent=n,o.parent=n,l.parent=n,a.name="borders",o.name="back",l.name="front",a.translate(new BABYLON.Vector3(-e.width/2,-e.height/2,0),1),o.translate(new BABYLON.Vector3(-e.width/2,-e.height/2,0),1),l.translate(new BABYLON.Vector3(-e.width/2,-e.height/2,0),1);const u=BABYLON.SceneSerializer.SerializeMesh(n,!1,!0);return null==n||n.dispose(),u}generateCanvasMesh(e,t,n,r){var i,s,a,o;const l=e.width/e.columns,u=e.height/e.rows,c=.1*l,h=BABYLON.MeshBuilder.CreateBox("borders",{width:l,height:u,depth:e.depth},t),d=BABYLON.MeshBuilder.CreatePlane("front",{width:l,height:u},t),f=BABYLON.MeshBuilder.CreatePlane("back",{width:l,height:u},t);h.position=new BABYLON.Vector3(l/2+n*(l+c),u/2+r*(u+c)),d.position=new BABYLON.Vector3(l/2+n*(l+c),u/2+r*(u+c),-e.depth/2),f.position=new BABYLON.Vector3(l/2+n*(l+c),u/2+r*(u+c),e.depth/2),f.rotate(BABYLON.Axis.X,Math.PI,BABYLON.Space.WORLD),f.rotate(BABYLON.Axis.Z,Math.PI,BABYLON.Space.WORLD),h.material=this._borderMaterial,f.material=this._borderMaterial,d.material=this._baseMaterial;const p=h.getVerticesData(BABYLON.VertexBuffer.NormalKind),g=h.getVerticesData(BABYLON.VertexBuffer.UVKind),m=d.getVerticesData(BABYLON.VertexBuffer.UVKind),v=f.getVerticesData(BABYLON.VertexBuffer.UVKind);if(e.borderRadius>0&&console.warn("Mirror canvas effect will not work for border radius > 0"),0===e.borderRadius){const t=e.depth/e.width,i=e.depth/e.height,s=Math.min(t,i),a=l/e.width,o=u/e.height;for(var _=0;_<g.length;_+=2){const t=Math.round(p[_/2*3]),i=Math.round(p[_/2*3+1]),l=Math.round(p[_/2*3+2]),u=1==t&&0==i&&0==l,c=0==t&&1==i&&0==l,h=0==t&&-1==i&&0==l;if(-1==t&&0==i&&0==l){var y=g[_],b=g[_+1];g[_]=b*s+a*n,g[_+1]=y*o+o*r}u&&(y=g[_],b=g[_+1],g[_]=b*s+(1-s)-a*(e.columns-1-n),g[_+1]=y*o+o*r),h&&(y=g[_],b=g[_+1],g[_]=b*a+a*n,g[_+1]=y*s+o*r),c&&(y=g[_],b=g[_+1],g[_]=(1-b)*a+a*n,g[_+1]=(1-y)*s+(1-s))}for(h.setVerticesData(BABYLON.VertexBuffer.UVKind,g),_=0;_<m.length;_+=2)y=m[_],b=m[_+1],m[_]=y*a+a*n,m[_+1]=b*o+o*r;for(d.setVerticesData(BABYLON.VertexBuffer.UVKind,m),_=0;_<v.length;_+=2)y=v[_],b=v[_+1],v[_]=y*a+a*(e.columns-1-n),v[_+1]=b*o+o*r;f.setVerticesData(BABYLON.VertexBuffer.UVKind,v)}d.isVisible=!1,f.isVisible=!1;const x=null!==(i=h.getVerticesData(BABYLON.VertexBuffer.PositionKind))&&void 0!==i?i:[],w=null!==(s=h.getVerticesData(BABYLON.VertexBuffer.NormalKind))&&void 0!==s?s:[],S=null!==(a=h.getVerticesData(BABYLON.VertexBuffer.UVKind))&&void 0!==a?a:[],C=null!==(o=h.getIndices())&&void 0!==o?o:[];return x.splice(0,24),w.splice(0,24),S.splice(0,16),C.splice(C.length-12,12),h.updateVerticesData(BABYLON.VertexBuffer.PositionKind,x),h.updateVerticesData(BABYLON.VertexBuffer.NormalKind,w),h.updateVerticesData(BABYLON.VertexBuffer.UVKind,S),h.updateIndices(C),[h,f,d]}}function Pe(e,t){return function(){return e.apply(t,arguments)}}const{toString:Be}=Object.prototype,{getPrototypeOf:Ne}=Object,Re=(e=>t=>{const n=Be.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fe=e=>(e=e.toLowerCase(),t=>Re(t)===e),ze=e=>t=>typeof t===e,{isArray:je}=Array,Ve=ze("undefined"),Ue=Fe("ArrayBuffer"),He=ze("string"),Ge=ze("function"),Ye=ze("number"),We=e=>null!==e&&"object"==typeof e,qe=e=>{if("object"!==Re(e))return!1;const t=Ne(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ze=Fe("Date"),Ke=Fe("File"),Xe=Fe("Blob"),Je=Fe("FileList"),$e=Fe("URLSearchParams");function Qe(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(null===e||typeof e>"u"))if("object"!=typeof e&&(e=[e]),je(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let a;for(n=0;n<s;n++)a=r[n],t.call(null,e[a],a,e)}}function et(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const tt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:n.g,nt=e=>!Ve(e)&&e!==tt,rt=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ne(Uint8Array)),it=Fe("HTMLFormElement"),st=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),at=Fe("RegExp"),ot=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Qe(n,(n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)}),Object.defineProperties(e,r)},lt="abcdefghijklmnopqrstuvwxyz",ut="0123456789",ct={DIGIT:ut,ALPHA:lt,ALPHA_DIGIT:lt+lt.toUpperCase()+ut},ht=Fe("AsyncFunction"),dt={isArray:je,isArrayBuffer:Ue,isBuffer:function(e){return null!==e&&!Ve(e)&&null!==e.constructor&&!Ve(e.constructor)&&Ge(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Ge(e.append)&&("formdata"===(t=Re(e))||"object"===t&&Ge(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ue(e.buffer),t},isString:He,isNumber:Ye,isBoolean:e=>!0===e||!1===e,isObject:We,isPlainObject:qe,isUndefined:Ve,isDate:Ze,isFile:Ke,isBlob:Xe,isRegExp:at,isFunction:Ge,isStream:e=>We(e)&&Ge(e.pipe),isURLSearchParams:$e,isTypedArray:rt,isFileList:Je,forEach:Qe,merge:function e(){const{caseless:t}=nt(this)&&this||{},n={},r=(r,i)=>{const s=t&&et(n,i)||i;qe(n[s])&&qe(r)?n[s]=e(n[s],r):qe(r)?n[s]=e({},r):je(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Qe(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Qe(t,(t,r)=>{n&&Ge(t)?e[r]=Pe(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],(!r||r(a,e,t))&&!o[a]&&(t[a]=e[a],o[a]=!0);e=!1!==n&&Ne(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Re,kindOfTest:Fe,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(je(e))return e;let t=e.length;if(!Ye(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:it,hasOwnProperty:st,hasOwnProp:st,reduceDescriptors:ot,freezeMethods:e=>{ot(e,(t,n)=>{if(Ge(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];if(Ge(r)){if(t.enumerable=!1,"writable"in t)return void(t.writable=!1);t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return je(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:et,global:tt,isContextDefined:nt,ALPHABET:ct,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Ge(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(We(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=je(e)?[]:{};return Qe(e,(e,t)=>{const s=n(e,r+1);!Ve(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ht,isThenable:e=>e&&(We(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch)};function ft(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}dt.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:dt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pt=ft.prototype,gt={};function mt(e){return dt.isPlainObject(e)||dt.isArray(e)}function vt(e){return dt.endsWith(e,"[]")?e.slice(0,-2):e}function _t(e,t,n){return e?e.concat(t).map(function(e,t){return e=vt(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{gt[e]={value:e}}),Object.defineProperties(ft,gt),Object.defineProperty(pt,"isAxiosError",{value:!0}),ft.from=(e,t,n,r,i,s)=>{const a=Object.create(pt);return dt.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),ft.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const yt=dt.toFlatObject(dt,{},null,function(e){return/^is[A-Z]/.test(e)});function bt(e,t,n){if(!dt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=dt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!dt.isUndefined(t[e])})).metaTokens,i=n.visitor||u,s=n.dots,a=n.indexes,o=(n.Blob||typeof Blob<"u"&&Blob)&&dt.isSpecCompliantForm(t);if(!dt.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(dt.isDate(e))return e.toISOString();if(!o&&dt.isBlob(e))throw new ft("Blob is not supported. Use a Buffer instead.");return dt.isArrayBuffer(e)||dt.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(dt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(dt.isArray(e)&&function(e){return dt.isArray(e)&&!e.some(mt)}(e)||(dt.isFileList(e)||dt.endsWith(n,"[]"))&&(o=dt.toArray(e)))return n=vt(n),o.forEach(function(e,r){!dt.isUndefined(e)&&null!==e&&t.append(!0===a?_t([n],r,s):null===a?n:n+"[]",l(e))}),!1;return!!mt(e)||(t.append(_t(i,n,s),l(e)),!1)}const c=[],h=Object.assign(yt,{defaultVisitor:u,convertValue:l,isVisitable:mt});if(!dt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!dt.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),dt.forEach(n,function(n,s){!0===(!(dt.isUndefined(n)||null===n)&&i.call(t,n,dt.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])}),c.pop()}}(e),t}function xt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function wt(e,t){this._pairs=[],e&&bt(e,this,t)}const St=wt.prototype;function Ct(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dt(e,t,n){if(!t)return e;const r=n&&n.encode||Ct,i=n&&n.serialize;let s;if(s=i?i(t,n):dt.isURLSearchParams(t)?t.toString():new wt(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}St.append=function(e,t){this._pairs.push([e,t])},St.toString=function(e){const t=e?function(t){return e.call(this,t,xt)}:xt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Et=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){dt.forEach(this.handlers,function(t){null!==t&&e(t)})}},At={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kt={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:wt,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Mt=typeof window<"u"&&typeof document<"u",Tt=(e=>Mt&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),It=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ot=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mt,hasStandardBrowserEnv:Tt,hasStandardBrowserWebWorkerEnv:It},Symbol.toStringTag,{value:"Module"})),Lt=i(i({},Ot),kt);function Pt(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=e.length;return s=!s&&dt.isArray(r)?r.length:s,o?(dt.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a):((!r[s]||!dt.isObject(r[s]))&&(r[s]=[]),t(e,n,r[s],i)&&dt.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!a)}if(dt.isFormData(e)&&dt.isFunction(e.entries)){const n={};return dt.forEachEntry(e,(e,r)=>{t(function(e){return dt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null}const Bt={transitional:At,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=dt.isObject(e);if(i&&dt.isHTMLForm(e)&&(e=new FormData(e)),dt.isFormData(e))return r?JSON.stringify(Pt(e)):e;if(dt.isArrayBuffer(e)||dt.isBuffer(e)||dt.isStream(e)||dt.isFile(e)||dt.isBlob(e))return e;if(dt.isArrayBufferView(e))return e.buffer;if(dt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return bt(e,new Lt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Lt.isNode&&dt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=dt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return bt(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,r){if(dt.isString(e))try{return(t||JSON.parse)(e),dt.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Bt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&dt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n)throw"SyntaxError"===i.name?ft.from(i,ft.ERR_BAD_RESPONSE,this,null,this.response):i}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};dt.forEach(["delete","get","head","post","put","patch"],e=>{Bt.headers[e]={}});const Nt=Bt,Rt=dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ft=Symbol("internals");function zt(e){return e&&String(e).trim().toLowerCase()}function jt(e){return!1===e||null==e?e:dt.isArray(e)?e.map(jt):String(e)}function Vt(e,t,n,r,i){if(dt.isFunction(r))return r.call(this,t,n);if(i&&(t=n),dt.isString(t)){if(dt.isString(r))return-1!==t.indexOf(r);if(dt.isRegExp(r))return r.test(t)}}class Ut{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=zt(t);if(!i)throw new Error("header name must be a non-empty string");const s=dt.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=jt(e))}const s=(e,t)=>dt.forEach(e,(e,n)=>i(e,n,t));return dt.isPlainObject(e)||e instanceof this.constructor?s(e,t):dt.isString(e)&&(e=e.trim())&&!(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))(e)?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!(!n||t[n]&&Rt[n])&&("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=zt(e)){const n=dt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(dt.isFunction(t))return t.call(this,e,n);if(dt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zt(e)){const n=dt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Vt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=zt(e)){const i=dt.findKey(n,e);i&&(!t||Vt(0,n[i],i,t))&&(delete n[i],r=!0)}}return dt.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];(!e||Vt(0,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return dt.forEach(this,(r,i)=>{const s=dt.findKey(n,i);if(s)return t[s]=jt(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();a!==i&&delete t[i],t[a]=jt(r),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return dt.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&dt.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Ft]=this[Ft]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=zt(e);t[r]||(function(e,t){const n=dt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return dt.isArray(e)?e.forEach(r):r(e),this}}Ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),dt.reduceDescriptors(Ut.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),dt.freezeMethods(Ut);const Ht=Ut;function Gt(e,t){const n=this||Nt,r=t||n,i=Ht.from(r.headers);let s=r.data;return dt.forEach(e,function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Yt(e){return!(!e||!e.__CANCEL__)}function Wt(e,t,n){ft.call(this,null!==e&&void 0!==e?e:"canceled",ft.ERR_CANCELED,t,n),this.name="CanceledError"}dt.inherits(Wt,ft,{__CANCEL__:!0});const qt=Lt.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];dt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),dt.isString(r)&&a.push("path="+r),dt.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Zt(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kt=Lt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=dt.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function Xt(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),u=r[a];i||(i=l),n[s]=o,r[s]=l;let c=a,h=0;for(;c!==s;)h+=n[c++],c%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const d=u&&l-u;return d?Math.round(1e3*h/d):void 0}}(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-n,l=r(o);n=s;const u={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const Jt=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(t,n){let r=e.data;const i=Ht.from(e.headers).normalize();let s,a,{responseType:o,withXSRFToken:l}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(dt.isFormData(r))if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(a=i.getContentType())){const[e,...t]=a?a.split(";").map(e=>e.trim()).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=Zt(e.baseURL,e.url);function d(){if(!c)return;const r=Ht.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());(function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ft("Request failed with status code "+n.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)})(function(e){t(e),u()},function(e){n(e),u()},{data:o&&"text"!==o&&"json"!==o?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Dt(h,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||4!==c.readyState||0===c.status&&(!c.responseURL||0!==c.responseURL.indexOf("file:"))||setTimeout(d)},c.onabort=function(){c&&(n(new ft("Request aborted",ft.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new ft("Network Error",ft.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||At;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ft(t,r.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,c)),c=null},Lt.hasStandardBrowserEnv&&(l&&dt.isFunction(l)&&(l=l(e)),l||!1!==l&&Kt(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&qt.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in c&&dt.forEach(i.toJSON(),function(e,t){c.setRequestHeader(t,e)}),dt.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&"json"!==o&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",Xt(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Xt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{c&&(n(!t||t.type?new Wt(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===Lt.protocols.indexOf(f)?n(new ft("Unsupported protocol "+f+":",ft.ERR_BAD_REQUEST,e)):c.send(r||null)})},$t={http:null,xhr:Jt};dt.forEach($t,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const Qt=e=>"- ".concat(e),en=e=>dt.isFunction(e)||null===e||!1===e,tn=e=>{e=dt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!en(n)&&(r=$t[(t=String(n)).toLowerCase()],void 0===r))throw new ft("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});throw new ft("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Qt).join("\n"):" "+Qt(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function nn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Wt(null,e)}function rn(e){return nn(e),e.headers=Ht.from(e.headers),e.data=Gt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tn(e.adapter||Nt.adapter)(e).then(function(t){return nn(e),t.data=Gt.call(e,e.transformResponse,t),t.headers=Ht.from(t.headers),t},function(t){return Yt(t)||(nn(e),t&&t.response&&(t.response.data=Gt.call(e,e.transformResponse,t.response),t.response.headers=Ht.from(t.response.headers))),Promise.reject(t)})}const sn=e=>e instanceof Ht?i({},e):e;function an(e,t){t=t||{};const n={};function r(e,t,n){return dt.isPlainObject(e)&&dt.isPlainObject(t)?dt.merge.call({caseless:n},e,t):dt.isPlainObject(t)?dt.merge({},t):dt.isArray(t)?t.slice():t}function i(e,t,n){return dt.isUndefined(t)?dt.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!dt.isUndefined(t))return r(void 0,t)}function a(e,t){return dt.isUndefined(t)?dt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t)=>i(sn(e),sn(t),!0)};return dt.forEach(Object.keys(Object.assign({},e,t)),function(r){const s=l[r]||i,a=s(e[r],t[r],r);dt.isUndefined(a)&&s!==o||(n[r]=a)}),n}const on="1.6.8",ln={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ln[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const un={};ln.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new ft(r(i," has been removed"+(t?" in "+t:"")),ft.ERR_DEPRECATED);return t&&!un[i]&&(un[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const cn={assertOptions:function(e,t,n){if("object"!=typeof e)throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new ft("option "+s+" must be "+n,ft.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new ft("Unknown option "+s,ft.ERR_BAD_OPTION)}},validators:ln},hn=cn.validators;class dn{constructor(e){this.defaults=e,this.interceptors={request:new Et,response:new Et}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=an(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&cn.assertOptions(n,{silentJSONParsing:hn.transitional(hn.boolean),forcedJSONParsing:hn.transitional(hn.boolean),clarifyTimeoutError:hn.transitional(hn.boolean)},!1),null!=r&&(dt.isFunction(r)?t.paramsSerializer={serialize:r}:cn.assertOptions(r,{encode:hn.function,serialize:hn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&dt.merge(i.common,i[t.method]);i&&dt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=Ht.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,c,h=0;if(!o){const e=[rn.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);h<c;)u=u.then(e[h++],e[h++]);return u}c=a.length;let d=t;for(h=0;h<c;){const e=a[h++],t=a[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{u=rn.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(e){return Dt(Zt((e=an(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}dt.forEach(["delete","get","head","options"],function(e){dn.prototype[e]=function(t,n){return this.request(an(n||{},{method:e,url:t,data:(n||{}).data}))}}),dt.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(an(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}dn.prototype[e]=t(),dn.prototype[e+"Form"]=t(!0)});const fn=dn;class pn{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new Wt(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new pn(function(t){e=t}),cancel:e}}}const gn=pn,mn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mn).forEach(e=>{let[t,n]=e;mn[n]=t});const vn=mn,_n=function e(t){const n=new fn(t),r=Pe(fn.prototype.request,n);return dt.extend(r,fn.prototype,n,{allOwnKeys:!0}),dt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(an(t,n))},r}(Nt);_n.Axios=fn,_n.CanceledError=Wt,_n.CancelToken=gn,_n.isCancel=Yt,_n.VERSION=on,_n.toFormData=bt,_n.AxiosError=ft,_n.Cancel=_n.CanceledError,_n.all=function(e){return Promise.all(e)},_n.spread=function(e){return function(t){return e.apply(null,t)}},_n.isAxiosError=function(e){return dt.isObject(e)&&!0===e.isAxiosError},_n.mergeConfig=an,_n.AxiosHeaders=Ht,_n.formToJSON=e=>Pt(dt.isHTMLForm(e)?new FormData(e):e),_n.getAdapter=tn,_n.HttpStatusCode=vn,_n.default=_n;const yn=_n;var bn=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,o)}l((r=r.apply(e,t||[])).next())})},xn=globalThis&&globalThis.__generator||function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(o){s=[6,o],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},wn=function(e,t,n){var r=this;void 0===n&&(n=!0),this.tasksUrl=e,this.token=t,this.upload=function(e,t){return bn(r,void 0,void 0,function(){return xn(this,function(n){switch(n.label){case 0:return[4,this.uploadFileChunked(e,e.type,Zakeke.generateUUID(),t)];case 1:return[2,n.sent()]}})})},this.uploadFileChunked=function(e,t,n,i,s){return bn(r,void 0,void 0,function(){var r,a;return xn(this,function(o){switch(o.label){case 0:return[4,this.resumableUpload(e,t,n,s)];case 1:return"OK"!==o.sent()?[3,5]:[4,this.createTask(n,i)];case 2:return-1===(r=o.sent())?[3,4]:[4,this.getResultFromTask(r)];case 3:return(a=o.sent())?[2,a.files]:[3,5];case 4:throw"Upload failed";case 5:return[2,null]}})})},this.resumableUpload=function(e,t,n,i){return bn(r,void 0,void 0,function(){var r=this;return xn(this,function(s){return[2,new Promise(function(s,a){var o=new Resumable({target:Zakeke.config.baseApiUrl+"filechunks/upload",generateUniqueIdentifier:function(){return n},maxFiles:1,testChunks:!1,headers:r.headers,query:{resumableType:t},simultaneousUploads:3});o.addFile(e),o.on("fileError",function(e,t){s("KO"),console.error("fileError",e,t)}),o.on("error",function(e,t){s("KO"),console.error("error",e,t)}),o.on("progress",function(){var e=100*o.progress();i&&i(e)}),o.on("fileAdded",function(e,t){o.upload()}),o.on("complete",function(){s("OK")})})]})})},this.createTask=function(e,t){return bn(r,void 0,void 0,function(){var n,r;return xn(this,function(i){switch(i.label){case 0:return n={fileID:e,options:t},[4,yn.post(Zakeke.config.baseApiUrl+this.tasksUrl,n,{headers:this.headers})];case 1:return[2,(r=i.sent())?r.data.taskID:-1]}})})},this.getResultFromTask=function(e){return bn(r,void 0,void 0,function(){var t,n;return xn(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,yn.get(Zakeke.config.baseApiUrl+this.tasksUrl+"/results/"+e,{headers:this.headers})];case 2:return(n=r.sent())&&2===n.data.state?[2,n.data]:n&&3===n.data.state?[2,null]:[3,4];case 3:return r.sent(),[2,null];case 4:return++t>100?[2,null]:[4,new Promise(function(e){return setTimeout(e,1e3)})];case 5:r.sent(),r.label=6;case 6:return[3,1];case 7:return[2]}})})},this.headers=n?{Authorization:"Bearer "+this.token,"Accept-Language":"en-US"}:{"X-Auth-Token":this.token,"Accept-Language":"en-US"}};class Sn{}Sn.Environment={EnvironmentTextureName:"environmentSpecular_0af79b7524dc4cd4825eae49c5d9e22fae220fd.env",GroundTextureCDNUrl:"https://cdn.zakeke.com/cdn/3d/assets/environments/backgroundGround9.png",SkyboxTextureCDNUrl:"https://cdn.zakeke.com/cdn/3d/assets/environments/backgroundSkybox.dds",EnvironmentTextureCDNUrl:"https://zakekecdn.blob.core.windows.net/cdn/3d/assets/environments/environmentSpecular_0af79b7524dc4cd4825eae49c5d9e22fae220fd.env"},Sn.TryonReferences={RootUrl:"https://cdn.zakeke.com/cdn/3d/assets/tryon/references/",ReferenceGlassesFrameName:"Reference Glasses Frame",ReferenceGlassesFrameFileName:"Reference_Glasses_Frame_001.json",EyewearName:"glasses_VTO_Reference",EyewearURL:"Eyewear_VTO_Reference.babylon",EyewearDownloadableURL:"Eyewear_VTO_Reference.glb",ScarvesName:"scarves_VTO_Reference",ScarvesURL:"Scarves_VTO_Reference.babylon",ScarvesDownloadableURL:"Scarves_VTO_Reference.glb",EarringsName:"earrings_VTO_Reference",EarringsURL:"Earrings_VTO_Reference.babylon",EarringsDownloadableURL:"Earrings_VTO_Reference.glb",HeadwearName:"headwear_VTO_Reference",HeadwearURL:"Headwear_VTO_Reference.babylon",HeadwearDownloadableURL:"Headwear_VTO_Reference.glb",NecklaceName:"necklace_VTO_Reference",NecklaceURL:"Necklace_VTO_Reference.babylon",NecklaceDownloadableURL:"Necklace_VTO_Reference.glb"},Sn.Shapes={RootUrl:"https://cdn.zakeke.com/cdn/3d/assets/shapes/",RoundedCubeName:"Rounded Cube",RoundedCubeFileName:"rounded_cube.babylon",RoundedCylinderName:"Rounded Cylinder",RoundedCylinderFileName:"rounded_cylinder.babylon",MatBallName:"Mat Ball",MatBallFileName:"mat_ball.babylon",MaleHeadName:"Group48944",MaleHeadFileName:"DemoHead.babylon",FemaleHeadName:"Group12208",FemaleHeadFileName:"FemaleHead.babylon",PokemonBallName:"PokemonBall",PokemonBallFileName:"PokemonBall.babylon",ShaderBallName:"Elements",ShaderBallFileName:"ShaderBall.babylon",BootsFolder:"boots/",BootsName:"shoe",BootsFileName:"boots.incremental.babylon",SuzanneName:"Suzanne",SuzanneFileName:"suzanne.babylon",StepPyramidName:"Pyramid",StepPyramidFileName:"step-pyramid.babylon",TeapotName:"Teapot",TeapotFileName:"teapot.babylon",AlloyWheelName:"Wheel",AlloyWheelFolder:"alloy_wheel/",AlloyWheelFileName:"alloy_wheel.incremental.babylon"};class Cn{static EndsWith(e,t){return-1!==e.indexOf(t,e.length-t.length)}static StartsWith(e,t){return 0===e.indexOf(t)}static Decode(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return t}static EncodeArrayBufferToBase64(e){for(var t,n,r,i,s,a,o,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0,h=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);c<h.length;)i=(t=h[c++])>>2,s=(3&t)<<4|(n=c<h.length?h[c++]:Number.NaN)>>4,a=(15&n)<<2|(r=c<h.length?h[c++]:Number.NaN)>>6,o=63&r,isNaN(n)?a=o=64:isNaN(r)&&(o=64),u+=l.charAt(i)+l.charAt(s)+l.charAt(a)+l.charAt(o);return u}}class Dn{constructor(){this._mesh=null,this._scene=null,this._facesOfVertices=null,this._meshVerticesPositions=null,this._meshVerticesNormals=null,this._meshIndices=null,this._meshPositions=null,this._meshFacesNormals=null,this._sharedFacesOfVertices={}}dispose(){}resetDataModel(){this._facesOfVertices=null,this._meshVerticesPositions=null,this._meshVerticesNormals=null,this._meshIndices=null,this._meshPositions=null,this._meshFacesNormals=null,this._sharedFacesOfVertices={}}prepareDataModel(){if(this.resetDataModel(),this._mesh&&this._scene&&(this._facesOfVertices=[],this._sharedFacesOfVertices={},this._meshVerticesPositions=this._mesh.getVerticesData(BABYLON.VertexBuffer.PositionKind),this._meshVerticesNormals=this._mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind),this._meshIndices=this._mesh.getIndices(),this._meshPositions=[],this._meshFacesNormals=[],this._meshVerticesPositions&&this._meshVerticesNormals&&this._meshIndices)){for(let e=0;e<this._meshVerticesPositions.length;e+=3)this._meshPositions.push(new BABYLON.Vector3(this._meshVerticesPositions[e],this._meshVerticesPositions[e+1],this._meshVerticesPositions[e+2]));for(let e=0;e<this._mesh.getTotalIndices()/3;e++)this._computeFaceNormal(e);this._getFacesOfVertices()}}_getFaceVerticesIndex(e){return this._meshIndices?{v1:this._meshIndices[3*e],v2:this._meshIndices[3*e+1],v3:this._meshIndices[3*e+2]}:null}_computeFaceNormal(e){if(this._meshPositions&&this._meshIndices&&this._meshFacesNormals){const t=this._getFaceVerticesIndex(e);if(t){const n=this._meshPositions[t.v1].subtract(this._meshPositions[t.v2]),r=this._meshPositions[t.v3].subtract(this._meshPositions[t.v2]);this._meshFacesNormals[e]=BABYLON.Vector3.Normalize(BABYLON.Vector3.Cross(n,r))}}}_getPositionKey(e){return"".concat(e.x,"_").concat(e.y,"_").concat(e.z)}_getFacesOfVertices(){if(this._mesh&&this._meshPositions&&this._meshIndices){this._sharedFacesOfVertices={},this._facesOfVertices=[];for(let e=0;e<this._meshPositions.length;e++){this._facesOfVertices[e]=[];const t=this._meshPositions[e],n=this._getPositionKey(t);this._sharedFacesOfVertices.hasOwnProperty(n)||(this._sharedFacesOfVertices[n]=new Set)}for(let e=0;e<this._meshIndices.length;e++){const t=this._meshIndices[e],n=e/3|0;this._facesOfVertices[t].push(n);const r=this._meshPositions[t],i=this._getPositionKey(r);this._sharedFacesOfVertices.hasOwnProperty(i)&&this._sharedFacesOfVertices[i].add(n)}}}expandMesh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;if(e instanceof BABYLON.Mesh&&(this._mesh=e,this._scene=e.getScene(),this.prepareDataModel(),this._meshPositions&&this._meshVerticesPositions&&this._meshVerticesNormals)){for(let e=0;e<this._meshPositions.length;e++){const n=this._meshPositions[e],r=this._getVertexComputedNormal(e);if(r){const i=r.scale(t);n.addInPlace(i),this._meshVerticesPositions[3*e]=n.x,this._meshVerticesPositions[3*e+1]=n.y,this._meshVerticesPositions[3*e+2]=n.z}}this._mesh.markVerticesDataAsUpdatable(BABYLON.VertexBuffer.PositionKind,!0),this._mesh.updateVerticesData(BABYLON.VertexBuffer.PositionKind,this._meshVerticesPositions),this._mesh.computeWorldMatrix(!0)}}_reComputeNormals(){const e=[];if(this._meshPositions&&this._facesOfVertices){for(let n=0;n<this._meshPositions.length;n++){const t=this._facesOfVertices[n];for(let n=0;n<t.length;n++)e[t[n]]=!0}let t;for(t in e)this._computeFaceNormal(t);for(t in e){const e=this._getFaceVerticesIndex(t);e&&(this._computeNormal(e.v1),this._computeNormal(e.v2),this._computeNormal(e.v3))}}}_getVertexComputedNormal(e){let t=null;if(this._meshPositions&&this._meshFacesNormals){const n=this._meshPositions,r=this._meshFacesNormals,i=n[e],s=this._getPositionKey(i);if(this._sharedFacesOfVertices.hasOwnProperty(s)){const e=this._sharedFacesOfVertices[s];t=BABYLON.Vector3.Zero(),e.forEach(e=>{const n=r[e];t&&n&&(t=t.add(n))}),t=BABYLON.Vector3.Normalize(t.scale(1/e.size))}}return t}_computeNormal(e){const t=this._getVertexComputedNormal(e);t&&this._meshVerticesNormals&&(this._meshVerticesNormals[3*e]=t.x,this._meshVerticesNormals[3*e+1]=t.y,this._meshVerticesNormals[3*e+2]=t.z)}}class En{static async convertGlbToUsdz(e){return new Promise((t,n)=>{let r=null;(new THREE.GLTFLoader).load(e,async function(e){e.scene.updateWorldMatrix(!0,!0);const n=await(new THREE.USDZExporter).parse(e.scene);r=new Blob([n],{type:"model/vnd.usdz+zip"}),t(r)})})}}const An=class e{constructor(e){this._hemiLight=null,this._pointLight=null,this._onPrePointerObservableObserver=null,this._isPointerDown=!1,this._radiusScale=.85,this._positionScale=.5,this._limitLowerRadius=!0,this._zoomEnabled=!0,this._minZoomPerc=null,this._maxZoomPerc=null,this._cameraZoom=null,this._cameraPivot=null,this._resizableCanvas3DGenerator=new Le,this._tempParentNode=null,this.enableShadows=!1,this.areShadowVisible=!0,this.setInitialZoomToBoundingBox=!0,this.changeRotationDirection=!1,this.initialZoomToBBInertiaDamping=.68,this._initialZoomToBBModelSizeRadius=.7,this.initialZoomToBBScrollZoomEnabled=!0,this.initialZoomToBBScrollLowerLimit=2,this.initialZoomToBBScrollUpperLimit=2,this.animateIntro=!1,this._defHemiLightID="f90aba65-3b60-44ac-87f4-1b6441aee44b",this._defPointLightID="b6491635-c471-45a4-bbb8-3f08556e5b3c",this._targetAnimationID="6225769c-0113-4236-ab17-c39d24013de4",this._radiusAnimationID="6f946c2f-af8d-46ab-9bea-9e22dedc4e9d",this._alphaAnimationID="10713520-fe06-4cbf-bc6a-bab881d516e6",this._betaAnimationID="6096ba34-852a-4423-bab3-dc97c1a9268f",this._dummyMaterialID="081796b8-0908-44dc-a38a-d786b14cA6fc",this._loadingMaterials={},this.getVTOMeshes=()=>{const e=["vto_reference","ground","shadowGround","shadow","skybox","environment","axes","grid","boundingbox","highlight","EditControl","guideCtl","bxAxis","byAxis","bzAxis","xAxis","yAxis","zAxis","pALL","pXZ","pZY","pYX","pickPlanes","tarnsCtl","X","Y","Z","XZ","ZY","YX","ALL","tEndX","tEndY","tEndZ","XZ","ZY","YX","tEndAll"];return{tryonReferencesModels:this._scene.meshes.filter(e=>e.name.toLowerCase().includes("vto_reference")),userMeshes:this._scene.meshes.filter(t=>!(t=>e.filter(e=>t.toLowerCase().includes(e.toLowerCase())).length>0)(t.name))}},this._loadedMeshes=[],this._isLoading=!1,this._lastVisibilityStates=new Map,this._scene=e,this._engine=e.getEngine(),this._camera=e.activeCamera,this._canvas=e.getEngine().getRenderingCanvas(),this.init()}get initialZoomToBBModelSizeRadius(){return console.log("Getting initialZoomToBBModelSizeRadius: ",this._initialZoomToBBModelSizeRadius),this._initialZoomToBBModelSizeRadius}set initialZoomToBBModelSizeRadius(e){console.log("Setting initialZoomToBBModelSizeRadius to: ",e),this._initialZoomToBBModelSizeRadius=e}get camera(){return this._camera}static checkAllMaterialTextureReady(e){const t=e.getActiveTextures();for(let n=0;n<t.length;n++){const e=t[n];if(!e.isReady())return!1;e instanceof BABYLON.ProceduralTexture&&e.getEffect()}return!0}removeDefaultBackground(e){e&&(this._scene.clearColor=new BABYLON.Color4(0,0,0,0))}setUpSceneToneMapping(e){var t,n,r,i;const s=null==(t=null==e?void 0:e.getCameraConfig())?void 0:t.get("toneMappingEnabled");null!=s&&(this._scene.imageProcessingConfiguration.toneMappingEnabled=s);const a=null==(n=null==e?void 0:e.getCameraConfig())?void 0:n.get("toneMappingType");null!=a&&(this._scene.imageProcessingConfiguration.toneMappingType=a);const o=null==(r=null==e?void 0:e.getGeneralConfig())?void 0:r.get("exposure"),l=null==(i=null==e?void 0:e.getGeneralConfig())?void 0:i.get("contrast");l&&(this._scene.imageProcessingConfiguration.contrast=l),o&&(this._scene.imageProcessingConfiguration.exposure=o)}static whenAllMaterialTexturesAreReady(e){return new Promise((t,n)=>{if(this.checkAllMaterialTextureReady(e))t();else{let n=setInterval(()=>{this.checkAllMaterialTextureReady(e)&&(clearInterval(n),t())},5)}})}static whenTextureIsReadyAsync(e){return new Promise((t,n)=>{if(e.isReady())t();else{let n=setInterval(()=>{e.isReady()&&(clearInterval(n),e instanceof BABYLON.ProceduralTexture&&e.getEffect(),t())},5)}})}static whenMeshMaterialIsReady(e){return new Promise((t,n)=>{let r=setInterval(()=>{(!e.material||e.material.isReady(e))&&(clearInterval(r),t())},5)})}static whenMaterialIsReadyForSubMeshAsync(e,t,n){return new Promise((r,i)=>{if(e.isReadyForSubMesh(t,n))Logger.info("Material ".concat(e.name," ready")),r();else{Logger.info("Material ".concat(e.name," NOT ready"));let i=setInterval(()=>{e.isReadyForSubMesh(t,n)&&(!t.material||t.material!=e||t.material.isReady(t))&&(Logger.info("Material ".concat(e.name," ready")),clearInterval(i),r())},5)}})}static getMeshGeometry(e){if(e.geometry)return e.geometry;const t=e.getScene().getGeometries();for(let n=0;n<t.length;n++){const r=t[n];if(r.meshes.find(t=>t===e))return r}return null}static checkMeshIsReady(e){if(e instanceof BABYLON.Mesh){if(e._checkDelayState(),e.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_NOTLOADED)return!1;if(!e.geometry){const t=e.getScene().getGeometries();for(let n=0;n<t.length;n++){const r=t[n];if(r.meshes.find(t=>t===e)&&!r.isReady())return!1}}if(e.geometry&&!e.geometry.isReady())return!1;for(let t=0;t<e.getChildMeshes().length;t++){const n=e.getChildMeshes()[t];if(!this.checkMeshIsReady(n))return!1}}return e.isReady(!0)}static checkAllMeshesAreReady(e){let t=!0;for(let n=0;n<e.length;n++)this.checkMeshIsReady(e[n])||(t=!1);return t}static whenAllMeshesAreReadyAsync(e){return new Promise((t,n)=>{if(this.checkAllMeshesAreReady(e))t();else{let n=setInterval(()=>{this.checkAllMeshesAreReady(e)&&(clearInterval(n),t())},5)}})}static async whenAllVisibleMeshesAreReadyAsync(e){await this.whenAllMeshesAreReadyAsync(e)}static whenMeshIsReadyAsync(e){return new Promise((t,n)=>{if(this.checkMeshIsReady(e))t();else{let n=setInterval(()=>{this.checkMeshIsReady(e)&&(clearInterval(n),t())},100)}})}static visibleMeshesRequireDelayedLoading(e){const t=e.meshes.filter(e=>e.isVisible);for(let n=0;n<t.length;n++)if(this.meshRequiresDelayedLoading(t[n]))return!0;return!1}static meshRequiresDelayedLoading(t){if(t instanceof BABYLON.Mesh){if(t.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_NOTLOADED||t.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_LOADING)return!0;const n=e.getMeshGeometry(t);if(n&&(n.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_LOADING||n.delayLoadState===BABYLON.Constants.DELAYLOADSTATE_NOTLOADED))return!0}return!1}materialRequiresDelayedLoading(e){return!this._scene.getMaterialByID(e)&&!!(this._scene.metadata&&this._scene.metadata.delayedMaterials&&this._scene.metadata.delayedMaterials.hasOwnProperty(e)||this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._scene.metadata.offloadedMaterials.hasOwnProperty(e))}init(){this._onPrePointerObservableObserver=this._scene.onPrePointerObservable.add(e=>{e.type!==BABYLON.PointerEventTypes.POINTERDOWN?e.type===BABYLON.PointerEventTypes.POINTERUP&&(this._isPointerDown=!1):this._isPointerDown=!0})}dispose(){this._scene&&this._onPrePointerObservableObserver&&this._scene.onPrePointerObservable.remove(this._onPrePointerObservableObserver)}switchFullScreen(e){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?this.quitFullscreen(e||this._canvas):this.launchFullscreen(e||this._canvas),this._canvas&&(this._canvas.width=document.body.clientWidth,this._canvas.height=document.body.clientHeight,this.adjustCamera(void 0,!0,!0,!1))}quitFullscreen(e){let t=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen;t&&t.call(document)}launchFullscreen(e){let t=e.requestFullscreen||e.webkitRequestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen;t&&t.call(e)}getMeshHierarchySize(e){let t=e.getHierarchyBoundingVectors(!0);return t.max.subtract(t.min)}getMeshHierarchyCenter(e){const t=e.getHierarchyBoundingVectors(!0),n=t.max.subtract(t.min);return t.min.add(n.scale(.5))}getSceneBoundingInfo(){if(!this._scene)return null;const e=this.getWorldExtends();return e?new BABYLON.BoundingInfo(e.min,e.max):null}setupShadows(t){var n,r,i,s,a,o,l,u,c,h,d,f,p,g,m;if(!t)return;const v=null==(n=null==t?void 0:t.getShadowsConfig())?void 0:n.get("enableShadows");null!=v&&(this.enableShadows=v),this.areShadowVisible||(this.enableShadows=!1);const _=null==(r=null==t?void 0:t.getShadowsConfig())?void 0:r.get("shadowMapSize"),y=null==(i=null==t?void 0:t.getShadowsConfig())?void 0:i.get("contactHardeningUVRatio"),b=null==(s=null==t?void 0:t.getShadowsConfig())?void 0:s.get("useContactHardeningShadow"),x=null==(a=null==t?void 0:t.getShadowsConfig())?void 0:a.get("useBlurCloseExponentialShadowMap"),w=null==(o=null==t?void 0:t.getShadowsConfig())?void 0:o.get("usePercentageCloserFiltering"),S=null==(l=null==t?void 0:t.getShadowsConfig())?void 0:l.get("usePoissonSampling"),C=null==(u=null==t?void 0:t.getShadowsConfig())?void 0:u.get("useKernelBlur"),D=null==(c=null==t?void 0:t.getShadowsConfig())?void 0:c.get("blurBoxOffset"),E=null==(h=null==t?void 0:t.getShadowsConfig())?void 0:h.get("blurScale"),A=null==(d=null==t?void 0:t.getShadowsConfig())?void 0:d.get("blurKernel"),k=null==(f=null==t?void 0:t.getShadowsConfig())?void 0:f.get("depthScale"),M=null==(p=null==t?void 0:t.getShadowsConfig())?void 0:p.get("shadowDarkness");if(!this.enableShadows){const e=null==(g=this._scene)?void 0:g.getMeshByName("shadowGround");e&&e.dispose();const t=null==(m=this._scene)?void 0:m.getMaterialByName("shadowMaterial");t&&t.dispose();const n=this._scene.getLightByName("shadowDirectionalLight");return void(n&&n.dispose())}if(!this._scene)throw new Error("Scene is not defined");const T=this._scene.getLightByName("shadowDirectionalLight"),I=new BABYLON.Vector3(0,-2,0),O=null!==T&&void 0!==T?T:new BABYLON.DirectionalLight("shadowDirectionalLight",I,this._scene);O.intensity=.6,e._shadowGenerator=new BABYLON.ShadowGenerator(Number(_),O),e._shadowGenerator.usePoissonSampling=!!S,e._shadowGenerator.usePercentageCloserFiltering=!!w,e._shadowGenerator.useBlurCloseExponentialShadowMap=!!x,e._shadowGenerator.useKernelBlur=!!C,e._shadowGenerator.blurBoxOffset=Number(D),e._shadowGenerator.blurScale=Number(E),e._shadowGenerator.blurKernel=Number(A),e._shadowGenerator.depthScale=Number(k),e._shadowGenerator.setDarkness(Number(M)),e._shadowGenerator.useContactHardeningShadow=!!b,e._shadowGenerator.contactHardeningLightSizeUVRatio=Number(y),e._shadowGenerator.transparencyShadow=!0,e._shadowGenerator.enableSoftTransparentShadow=!0;const L=e._shadowGenerator.getShadowMap();this._scene.meshes.forEach(e=>{var t;null==(t=null==L?void 0:L.renderList)||t.push(e)}),this.createGroundFromBoundingBox(t)}setShadowsVisibility(t){e._shadowGenerator&&(this.areShadowVisible=t)}setupAnimations(e){var t;const n=null==e?void 0:e.getAnimationsConfig(),r=!(null==n||!n.get("runAtStart")),i=!(null==n||!n.get("loop")),s=(null==n?void 0:n.get("speed"))||1,a=null==(t=this._scene)?void 0:t.animationGroups,o=a&&this._scene.animationGroups.length>0;if(a&&a.forEach(e=>{e.stop(),e.reset()}),r&&o){const e=a[0];e.start(i,s,e.from,e.to,!1)}}createGroundFromBoundingBox(t){var n,r,i,s,a,o,l,u,c;if(!t)return;const h=null==(n=this._scene)?void 0:n.getMeshByName("shadowGround");h&&h.dispose();const d=null==(r=this._scene)?void 0:r.getMaterialByName("shadowMaterial");d&&d.dispose();const f=null==(i=null==t?void 0:t.getShadowsConfig())?void 0:i.get("enableShadows");if(null!=f&&(this.enableShadows=f),!this.enableShadows)return void console.log("Shadows are not enabled");const p=this.getSceneBoundingInfo();if(!p||!p.boundingBox)return void console.error("Cannot create ground: No bounding box information available.");const g=null==(s=null==t?void 0:t.getShadowsConfig())?void 0:s.get("shadowHexColor"),m=null==(a=null==t?void 0:t.getShadowsConfig())?void 0:a.get("groundSizeMultiplierWidth"),v=null==(o=null==t?void 0:t.getShadowsConfig())?void 0:o.get("groundSizeMultiplierLength"),_=p.boundingBox.minimumWorld,y=p.boundingBox.maximumWorld.subtract(_),b=_.add(y.scale(.5));if(null!==this._scene){const t=BABYLON.MeshBuilder.CreateGround("shadowGround",{width:y.x*Number(m),height:y.z*Number(v)},this._scene);t.position=new BABYLON.Vector3(b.x,_.y,b.z),t.rotation.y=Math.PI;const n=new BABYLON.ShadowOnlyMaterial("bbmat",this._scene);t.material=n,t.receiveShadows=!0,t.material.shadowColor=BABYLON.Color3.FromHexString(String(g)),t.metadata={AR:!1,isRealMesh:!1};const r=null==(l=e._shadowGenerator)?void 0:l.getShadowMap();e._shadowGenerator&&r?(null==(u=r.renderList)||u.push(t),t.receiveShadows=!0):console.error("Failed to add ground mesh to shadow map render list.")}else console.error("Cannot create ground: Scene is null.");console.log("Shadow ground created"),null==(c=this._scene)||c.render()}userIsMoving(){return!!(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)&&(0!==this._camera.inertialAlphaOffset||0!==this._camera.inertialBetaOffset||0!==this._camera.inertialRadiusOffset||0!==this._camera.inertialPanningX||0!==this._camera.inertialPanningY||this._isPointerDown)}cameraIsMoving(){return!!(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)&&(0!==this._camera.inertialAlphaOffset||0!==this._camera.inertialBetaOffset||0!==this._camera.inertialRadiusOffset||0!==this._camera.inertialPanningX||0!==this._camera.inertialPanningY)}cameraLimitsReached(){return!!(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)&&(void 0!==this._camera.lowerRadiusLimit&&null!==this._camera.lowerRadiusLimit&&this._camera.radius===this._camera.lowerRadiusLimit||void 0!==this._camera.upperRadiusLimit&&null!==this._camera.upperRadiusLimit&&this._camera.radius===this._camera.upperRadiusLimit)}restoreCameraState(){this._camera&&this._camera.restoreState()}isTextureWithUrl(e){return e&&(e instanceof BABYLON.Texture||e instanceof BABYLON.CubeTexture||e instanceof BABYLON.HDRCubeTexture||e instanceof BABYLON.ColorGradingTexture||e instanceof BABYLON.EquiRectangularCubeTexture)}getTextureUrl(e){if(e&&(e instanceof BABYLON.Texture||e instanceof BABYLON.CubeTexture||e instanceof BABYLON.HDRCubeTexture||e instanceof BABYLON.ColorGradingTexture||e instanceof BABYLON.EquiRectangularCubeTexture)){let t=e.url;if(e.getInternalTexture){const n=e.getInternalTexture();n&&n.url&&(t=n.url)}return t}return null}isEditControl(e){return e&&("EditoControl"==e.name||e.metadata&&e.metadata.isEditControl)}isRealMesh(e){return!(this.isEditControl(e)||e.metadata&&(e.metadata.boundingBox||e.metadata.isAxis||e.metadata.isGround||e.metadata.isEnvironmentNode||e.metadata.hasOwnProperty("isRealMesh")&&!e.metadata.isRealMesh))}meshFineTuningSettings(e){return e.metadata&&e.metadata.hasOwnProperty("tryOnFineTuningSettings")&&e.metadata.tryOnFineTuningSettings?e.metadata.tryOnFineTuningSettings:null}meshHasParent(e,t){if(this._scene){let n=this._scene.getMeshById(e);if(n)for(;n.parent;){if(n.parent.id===t)return!0;n=n.parent}}return!1}countSceneMeshes(){let e=0;return this._scene&&this._scene.meshes.forEach(t=>{this.isRealMesh(t)&&e++}),e}sceneHasRealMeshes(){for(let e=0;e<this._scene.meshes.length;e++)if(this.isRealMesh(this._scene.meshes[e]))return!0;return!1}getSceneMeshes(){const e=[];return this._scene&&this._scene.meshes.forEach(t=>{this.isRealMesh(t)&&e.push(t)}),e}getSceneMeshesByName(e){let t=[];if(this._scene&&e){var n=new RegExp((r=e,r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).replace(/\\\*/g,".*"),"i");for(let e=0;e<this._scene.meshes.length;e++){const r=this._scene.meshes[e];this.isRealMesh(r)&&r.name&&n.test(r.name)&&t.push(r)}}var r;return t}isVisibleMesh(e){return this.isRealMesh(e)&&e.isVisible}getVisibleMeshes(){const e=[];return this._scene.meshes.forEach(t=>{this.isVisibleMesh(t)&&e.push(t)}),e}getInvisibleMeshes(){const e=[];return this._scene.meshes.forEach(t=>{this.isRealMesh(t)&&!t.isVisible&&e.push(t)}),e}getSubMesh(e,t){return e.subMeshes&&e.subMeshes.length>0&&t>=0&&t<e.subMeshes.length?e.subMeshes[t]:null}getMeshHierarchy(e){const t=[];let n=this._scene.getMeshById(e);if(!n)return t;let r=e=>{t.push(e);let n=e.getChildMeshes(!0);for(let t=0;t<n.length;t++)r(n[t])};return r(n),t}getTryOnMeshHierarchy(e){const t=[];let n=this._scene.getMeshById(e);if(!n)return t;let r=e=>{t.push(e);let n=e.getChildMeshes(!0);for(const t of n)(this.isVisibleCanvasMesh(t)||this.isVisibleTryOnMesh(t))&&r(t)};return r(n),t}isVisibleCanvasMesh(e){return this.isCanvasMesh(e)&&e.isVisible}isCanvasMesh(e){return!(!e||!e.metadata)&&!(!e.metadata.hasOwnProperty("iscanvasMesh")||"boolean"!=typeof e.metadata.iscanvasMesh)&&e.metadata.iscanvasMesh}isAREnabledForMesh(e){return!!e&&(!e.metadata||void 0===e.metadata.AR||null===e.metadata.AR||"boolean"!=typeof e.metadata.AR||e.metadata.AR)}isTryOnEnabledForMesh(e){return!!e&&(!e.metadata||void 0===e.metadata.TryOn||null===e.metadata.TryOn||"boolean"!=typeof e.metadata.TryOn||e.metadata.TryOn)}isVisibleTryOnMesh(e){return this.isTryOnEnabledForMesh(e)&&this.isVisibleMesh(e)}getMeshesForAR(){const e=[];return this._scene&&this._scene.meshes.forEach(t=>{(this.isRealMesh(t)||this.isCanvasMesh(t))&&t.isVisible&&this.isAREnabledForMesh(t)&&e.push(t)}),e}checkMaterialsForAR(){const e=this.getMeshesMaterials(this.getMeshesForAR());for(let t=0;t<e.length;t++){const n=e[t];if(!(n instanceof BABYLON.PBRMaterial)&&!(n instanceof BABYLON.PBRMetallicRoughnessMaterial)&&!(n instanceof BABYLON.StandardMaterial))return!1}return!0}getMeshesMaterials(e){const t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if(i.material)if(i.material instanceof BABYLON.MultiMaterial)for(let e=0;e<i.material.subMaterials.length;e++){let r=i.material.subMaterials[e];r&&-1===t.indexOf(r.id)&&(n.push(r),t.push(r.id))}else-1===t.indexOf(i.material.id)&&(n.push(i.material),t.push(i.material.id))}return n}getMeshMaterials(e){const t=[];if(e&&e.material)if(e.material instanceof BABYLON.MultiMaterial)for(let n=0;n<e.material.subMaterials.length;n++){let r=e.material.subMaterials[n];r&&t.push(r)}else t.push(e.material);return t}getHiddenMeshTotalVertices(){return this.getTotalVertices(e=>!e.isVisible)}getTotalVertices(e){let t=0;return this._scene&&this._scene.meshes.forEach(n=>{this.isRealMesh(n)&&(e&&!e(n)||(t+=n.getTotalVertices()))}),t}getHiddenMeshTotalIndices(){return this.getTotalIndices(e=>!e.isVisible)}getTotalIndices(e){let t=0;return this._scene&&this._scene.meshes.forEach(n=>{this.isRealMesh(n)&&(e&&!e(n)||(t+=n.getTotalIndices()))}),t}getAllMaterials(){const e=[];return this._scene&&this._scene.materials.forEach(t=>{t.metadata&&(void 0!==t.metadata.isRealMaterial&&!t.metadata.isRealMaterial||void 0!==t.metadata.isEnvironmentNode&&t.metadata.isEnvironmentNode)||"groundMaterial"!==t.id&&"default material"!==t.id&&e.push(t)}),e}getMeshesUsingMaterial(e){const t=[],n=this.getSceneMeshes();for(let r=0;r<n.length;r++){const i=n[r];this.isMeshUsingMaterial(i,e)&&t.push(i)}return t}isMeshUsingMaterial(e,t){if(e.material){if(e.material.id===t)return!0;if(e.material instanceof BABYLON.MultiMaterial)for(let n=0;n<e.material.subMaterials.length;n++){const r=e.material.subMaterials[n];if(r&&r.id===t)return!0}}return!1}getAllUnusedMaterials(){const e=this.getAllMaterials(),t=[];for(let n=0;n<e.length;n++){const r=e[n];0===this.getMeshesUsingMaterial(r.id).length&&t.push(r)}return t}async getSceneScreenshotAsync(e,t){if(!this._camera)return"";let n={width:e,height:t};return await BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,n,"image/png")}containsPBRMaterials(){if(this._scene)for(let e=0;e<this._scene.materials.length;e++)if(this._scene.materials[e]instanceof BABYLON.PBRBaseMaterial)return!0;return!1}getMeshesForTryOn(){const e=[];return this._scene&&this._scene.meshes.forEach(t=>{(this.isRealMesh(t)||this.isCanvasMesh(t))&&t.isVisible&&this.isTryOnEnabledForMesh(t)&&e.push(t)}),e}setupLights(){this._hemiLight=null,this._pointLight=null;let e=null,t=null;this._scene.lights.forEach(n=>{n instanceof BABYLON.HemisphericLight&&(null===e&&(e=n),n.id===this._defHemiLightID&&(this._hemiLight=n)),n instanceof BABYLON.PointLight&&(null===t&&(t=n),n.id===this._defPointLightID&&(this._pointLight=n))}),null===this._hemiLight&&(null!==e?this._hemiLight=e:(this._hemiLight=new BABYLON.HemisphericLight("Default Hemispheric Light",BABYLON.Vector3.Up(),this._scene),this._hemiLight.intensity=.5),this._hemiLight&&(this._hemiLight.id=this._defHemiLightID)),null===this._pointLight&&(null!==t?this._pointLight=t:(this._pointLight=new BABYLON.PointLight("Default Point Light",new BABYLON.Vector3(0,5,0),this._scene),this._pointLight.intensity=.5),this._pointLight&&(this._pointLight.id=this._defPointLightID))}setUpCustomLights(e){Object.entries(e).forEach(e=>{const t=e[0],n={position:e[1].position,intensity:e[1].general.intensity,visible:e[1].general.visible};this.createOrUpdateLight(t,n)})}createOrUpdateLight(e,t){const n=this._scene.getLightByName(e);if(n&&(this._scene.removeLight(n),n.dispose()),!t.visible)return;const r=new BABYLON.Vector3(t.position.x,t.position.y,t.position.z);let i;e.match(/directional/i)?(i=new BABYLON.DirectionalLight(e,r,this._scene),i.intensity=t.intensity,i.id=Zakeke.generateUUID()):e.match(/pointLight/i)?(i=new BABYLON.PointLight(e,r,this._scene),i.intensity=t.intensity,i.id=Zakeke.generateUUID()):e.match(/hemisphere/i)&&(i=new BABYLON.HemisphericLight(e,r,this._scene),i.intensity=t.intensity,i.id=Zakeke.generateUUID())}getDefaultHemisphericLight(){return this._hemiLight}getDefaultPointLight(){return this._pointLight}isDefaultLight(e){return e.id==this._defHemiLightID||e.id==this._defPointLightID}setUpCameraByOptions(e){if(e&&this._scene){let t=this._scene.cameras.find(e=>e instanceof BABYLON.ArcRotateCamera);e&&t instanceof BABYLON.ArcRotateCamera&&(t.beta=e.beta||t.beta,t.alpha=e.alpha||t.alpha,t.fov=e.fov||t.fov)}}setupCamera(){if(this._scene){let e=this._scene.cameras.find(e=>e instanceof BABYLON.ArcRotateCamera);e?this._camera=e:(this._camera=new BABYLON.ArcRotateCamera("camera1",0,0,0,BABYLON.Vector3.Zero(),this._scene),this._camera.setPosition(new BABYLON.Vector3(0,3,-8))),this.setupCameraLimits(),this._canvas&&this._camera.attachControl(this._canvas,!1)}}setCameraRadiusParameters(e){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.lowerRadiusLimit=e*(this._zoomEnabled?.01:1),this._camera.upperRadiusLimit=e*(this._zoomEnabled?3:1),this._camera.wheelPrecision=100/e,this._camera.pinchPrecision=100/e,this._camera.minZ=.01*e,this._camera.maxZ=1e3*e,this._camera.speed=.2*e,this._camera.wheelDeltaPercentage=.01,this._camera.pinchDeltaPercentage=6e-4,this._camera.panningSensibility=1e-6,this._camera.wheelPrecision=100/e,this._camera.panningAxis=BABYLON.Vector3.Zero(),this._camera.panningInertia=0,this._camera.radius=e)}removeCameraLimits(){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.lowerRadiusLimit=null,this._camera.upperRadiusLimit=null,this._camera.minZ=1,this._camera.maxZ=1e4)}getWorldExtends(){return this._scene?this._scene.getWorldExtends(e=>this.isRealMesh(e)&&e.isVisible):null}getCameraWorldExtends(){let e=null;if(this._scene){let t=this._cameraPivot;if(!t)for(let e=0;e<this._scene.meshes.length;e++){const n=this._scene.meshes[e];if(n.metadata&&void 0!==n.metadata.isCameraPivot&&n.metadata.isCameraPivot){t=n;break}}t&&(e=this._scene.getWorldExtends(e=>e===t||this.meshHasParent(e.id,t.id)))}return e||(e=this.getWorldExtends()),e}setupCameraLimits(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){if(null==e){let t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return;const t=e.max.subtract(e.min);if(isFinite(t.length())){this.removeCameraLimits();const t=this.calculateCameraRadius(e);if(this.setCameraRadiusParameters(t),this._limitLowerRadius){if(this._scene.meshes.length&&this._zoomEnabled){this._camera.useFramingBehavior=!0;const e=this._camera.getBehaviorByName("Framing");e&&e instanceof BABYLON.FramingBehavior&&(e.elevationReturnTime=-1,this._camera.lowerRadiusLimit=null,null!==this._minZoomPerc&&void 0!==this._minZoomPerc&&this._minZoomPerc>0&&(this._camera.lowerRadiusLimit=t*this._minZoomPerc),null!==this._maxZoomPerc&&void 0!==this._maxZoomPerc&&this._maxZoomPerc>0&&(this._camera.upperRadiusLimit=t*this._maxZoomPerc))}}else this._camera.lowerRadiusLimit=null}}}adjustCamera(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._camera||!(this._camera instanceof BABYLON.ArcRotateCamera))return;let s=this.getCameraWorldExtends();if(!s)return;const a=s.max.subtract(s.min);if(!isFinite(a.length()))return;const o=s.min.add(a.scale(.5));this.removeCameraLimits();const l=this.calculateCameraRadius(s);let u=this._camera.alpha;t||(u=-Math.PI/2,e&&"gltf"===e&&(u+=Math.PI));let c=this._camera.beta;n||(c=Math.PI/2-.3);let h=o.clone(),d=s.min.y,f=d+(s.max.y-d)*this._positionScale;if(h.y=f,r){if(i){const e=this.calculateCameraRadius(s);this._camera.radius=e}this.animateCameraToFinalParamters(u,c,l,h,2,()=>{this.setupCameraLimits(s)})}else this._camera.alpha=u,this._camera.beta=c,this._camera.radius=l,this._camera.target=h,this.setupCameraLimits(s)}normalizeAngleOfView(e,t){const n=BABYLON.Vector3.Zero(),r=new BABYLON.ArcRotateCamera("ghostCamera",e,t,1,n,this._scene),i=r.position;return r.dispose(),this.computeCameraAngleOfView(n,i)}computeCameraAngleOfView(e,t){const n=new BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);n.setPosition(t);const r=n.alpha,i=n.beta;return n.dispose(),{alpha:r,beta:i}}moveCamera(e,t){var n=new BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);n.setPosition(t);var r=n.alpha,i=n.beta,s=n.radius;n.dispose(),this.moveCameraToFinalParameters(r,i,s,e)}animateCamera(e,t,n,r){var i=new BABYLON.ArcRotateCamera("ghostCamera",0,0,0,e,this._scene);i.setPosition(t);var s=i.alpha,a=i.beta,o=i.radius;i.dispose(),this.animateCameraToFinalParamters(s,a,o,e,n,r)}wrapPi(e){if(Math.abs(e)>Math.PI){var t=2*Math.PI;e-=Math.floor((e+Math.PI)*(1/t))*t}return e}wrap2Pi(e){let t=e%(2*Math.PI);return t<0&&(t+=2*Math.PI),t}zoomIn(){this.zoom(.85)}zoomOut(){this.zoom(1.15)}zoom(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){let n=this._camera.radius,r=null!==this._camera.lowerRadiusLimit&&void 0!==this._camera.lowerRadiusLimit?this._camera.lowerRadiusLimit:0,i=Math.max(0,r),s=Number.MAX_VALUE;null!=this._camera.upperRadiusLimit&&(s=this._camera.upperRadiusLimit);var t=Math.max(i,Math.min(s,n*e));t!==n&&this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,t,this._camera.target,.5)}}moveCameraToFinalParameters(e,t,n,r){!this._camera||!(this._camera instanceof BABYLON.ArcRotateCamera)||(this._camera.target=r,this._camera.alpha=e,this._camera.beta=t,this._camera.radius=n)}animateCameraToFinalParamters(e,t,n,r,i,s){if(!this._camera||!(this._camera instanceof BABYLON.ArcRotateCamera))return;let a=this._camera.radius,o=()=>{if(this._camera){this._scene.stopAnimation(this._camera);for(let e=0;e<this._camera.animations.length;e++)this._camera.animations[e],this._camera.animations.splice(e--,1)}};o();let l=this._camera.alpha;!this._camera.lowerAlphaLimit&&!this._camera.upperAlphaLimit&&(l=this.wrap2Pi(this._camera.alpha));let u=this._camera.beta;!this._camera.lowerBetaLimit&&!this._camera.upperBetaLimit&&(u=this.wrap2Pi(this._camera.beta));let c=isFinite(e)?this.wrapPi(e):l;Math.abs(l-c)>Math.PI&&(c+=2*Math.PI);let h=isFinite(t)?this.wrapPi(t):u;Math.abs(u-h)>Math.PI&&(h+=2*Math.PI);let d=2;i&&"number"==typeof i&&i>0&&(d=i);let f=Math.floor(60*d),p=this._camera.target.subtract(r).length()/this._camera.radius,g=[],m=new BABYLON.CubicEase;m.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);let v=null;this._camera.target!==r&&(p>=.005?(v=new BABYLON.Animation("camTargetAnimation","target",60,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),g=[{frame:0,value:this._camera.target},{frame:f,value:r}],v.setKeys(g),v.setEasingFunction(m)):this._camera.target=r);let _=null;l!==c&&(_=new BABYLON.Animation("camAlphaAnimation","alpha",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),g=[{frame:0,value:l},{frame:f,value:c}],_.setKeys(g),_.setEasingFunction(m));let y=null;u!==h&&(y=new BABYLON.Animation("camBetaAnimation","beta",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),g=[{frame:0,value:u},{frame:f,value:h}],y.setKeys(g),y.setEasingFunction(m));let b=Math.abs(this._camera.radius-n)/this._camera.radius,x=null;this._camera.radius!==n&&(b>=.005?(x=new BABYLON.Animation("camRadiusAnimation","radius",60,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),g=[{frame:0,value:a},{frame:f,value:n}],x.setKeys(g),x.setEasingFunction(m)):this._camera.radius=n);let w=this._camera.animations.length;v&&this._camera.animations.push(v),_&&this._camera.animations.push(_),y&&this._camera.animations.push(y),x&&this._camera.animations.push(x),this._camera.animations.length>w?this._scene.beginAnimation(this._camera,0,f,!1,1).onAnimationEnd=()=>{o(),this.setupShaderMaterialsCameraPosition(),s&&s()}:s&&s()}getFrustumSlope(){let e=this._camera;if(!e)return BABYLON.Vector2.Zero();let t=this._engine.getAspectRatio(e),n=Math.tan(e.fov/2),r=n*t;return new BABYLON.Vector2(r,n)}calculateCameraRadius(e){var t;if(null==e){let t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return 1;var n=this.calculateLowerRadiusFromModelBoundingSphere(e.min,e.max);return isFinite(n)||(n=1),n+(null!==(t=this._cameraZoom)&&void 0!==t?t:0)}calculateLowerRadiusFromModelBoundingSphere(e,t){const n=t.subtract(e).length(),r=this.getFrustumSlope(),i=.5*n*this._radiusScale,s=i*Math.sqrt(1+1/(r.x*r.x)),a=i*Math.sqrt(1+1/(r.y*r.y));let o=Math.max(s,a);var l=this._camera;return l&&l instanceof BABYLON.ArcRotateCamera?(l.upperRadiusLimit&&(o=o>l.upperRadiusLimit?l.upperRadiusLimit:o),o):0}getWorldCenter(e){if(null==e){let t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return null;let t=e.max.subtract(e.min);return isFinite(t.length())?e.min.add(t.scale(.5)):null}getCameraWorldCenter(e){if(null==e){let t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return null;let t=e.max.subtract(e.min);return isFinite(t.length())?e.min.add(t.scale(.5)):null}getCameraRadius(e){if(null==e){let t=this.getCameraWorldExtends();t&&(e=t)}if(!e)return null;let t=e.max.subtract(e.min);return isFinite(t.length())?this.calculateCameraRadius(e):null}setCameraLimitLowerRadius(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._limitLowerRadius=e,this.setupCameraLimits(),t&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&this.sceneHasRealMeshes()){let e=this._camera.target.clone(),t=this.getCameraWorldExtends();if(t){let n=t.min.y,r=n+(t.max.y-n)*this._positionScale;e.y=r,this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,this._camera.radius,e,.5)}}}setCameraPositionScale(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._positionScale=e,t&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&this.sceneHasRealMeshes()){var n=this._camera.target.clone(),r=this.getCameraWorldExtends();if(r){var i=r.min.y,s=i+(r.max.y-i)*this._positionScale;n.y=s,this.animateCameraToFinalParamters(this._camera.alpha,this._camera.beta,this._camera.radius,n,.5)}}}getCameraPivot(){return this._cameraPivot}setCameraPivot(e){this._cameraPivot=e,this.adjustCamera(void 0,!0,!0,!0)}setZoomEnabled(e){this._zoomEnabled=e,this.adjustCamera(void 0,!0,!0,!0)}setMinZoomPerc(e){const t=null!==e&&void 0!==e?e:null;t!==this._minZoomPerc&&(this._minZoomPerc=t,this.adjustCamera(void 0,!0,!0,!1))}setMaxZoomPerc(e){const t=null!==e&&void 0!==e?e:null;t!==this._maxZoomPerc&&(this._maxZoomPerc=t,this.adjustCamera(void 0,!0,!0,!1))}setCameraZoom(e){null!=e&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._cameraZoom=-e/10,this.adjustCamera(void 0,!0,!0,!1))}setCameraAlphaLimits(e,t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const n=this.normalizeAngleOfView(this._camera.alpha,this._camera.beta).alpha;this.setCameraLowerAlphaLimit(e),this.setCameraUpperAlphaLimit(t),this._camera.alpha=n}}setCameraLowerAlphaLimit(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null==e)this._camera.lowerAlphaLimit=null;else{let t=this.normalizeAngleOfView(e,this._camera.beta).alpha;this._camera.upperAlphaLimit&&t>this._camera.upperAlphaLimit&&(this._camera.upperAlphaLimit+=2*Math.PI),this._camera.lowerAlphaLimit=t}}setCameraUpperAlphaLimit(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null==e)this._camera.upperAlphaLimit=null;else{let t=this.normalizeAngleOfView(e,this._camera.beta).alpha;this._camera.lowerAlphaLimit&&t<this._camera.lowerAlphaLimit&&(t+=2*Math.PI),this._camera.upperAlphaLimit=t}}setCameraLowerBetaLimit(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null==e)this._camera.lowerBetaLimit=.01;else{let t=this.normalizeAngleOfView(this._camera.alpha,e).beta;this._camera.upperBetaLimit&&t>this._camera.upperBetaLimit&&(this._camera.upperBetaLimit+=2*Math.PI),this._camera.lowerBetaLimit=t}}setCameraUpperBetaLimit(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera)if(null==e)this._camera.upperBetaLimit=Math.PI-.01;else{let t=this.normalizeAngleOfView(this._camera.alpha,e).beta;this._camera.lowerBetaLimit&&t<this._camera.lowerBetaLimit&&(this._camera.lowerBetaLimit-=2*Math.PI),this._camera.upperBetaLimit=t}}setCameraBetaLimits(e,t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const n=this.normalizeAngleOfView(this._camera.alpha,this._camera.beta).beta;this.setCameraLowerBetaLimit(e),this.setCameraUpperBetaLimit(t),this._camera.beta=n}}zoomOnMesh(e){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){this._camera.useFramingBehavior=!0;const t=this._camera.getBehaviorByName("Framing");t&&t instanceof BABYLON.FramingBehavior&&(t.framingTime=0,t.elevationReturnTime=-1,t.radiusScale=this._radiusScale,t.positionScale=this._positionScale,t.zoomOnMeshHierarchy(e))}}async takeScreenshotAsync(e,t){if(!this._camera)return"";const n={width:e,height:t};return await BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,n,"image/png")}async takeContentScreenshotAsync(e,t){if(!this._camera)return"";var n=this._scene.clearColor.clone();this._scene.clearColor=new BABYLON.Color4(0,0,0,0),this._scene.render();let r={width:e,height:t};const i=BABYLON.Tools.CreateScreenshotAsync(this._engine,this._camera,r,"image/png");this._scene.render(),this._scene.getEngine().endFrame();const s=await i;return this._scene.clearColor=n,s}async takeMaterialScreenshotAsync(e,t,n){let r=this._scene.getMaterialByID(e);if(!r)return"";let i=this.getVisibleMeshes();for(let c=0;c<i.length;c++)i[c].isVisible=!1;let s=this._scene.clearColor.clone();this._scene.clearColor=new BABYLON.Color4(0,0,0,0);let a=BABYLON.Mesh.CreateSphere("temp_sphere",32,2,this._scene);a.material=r;let o=new BABYLON.ArcRotateCamera("temp_camera",0,0,0,BABYLON.Vector3.Zero(),this._scene);o.setPosition(new BABYLON.Vector3(0,0,-4)),this._scene.activeCamera=o,this._scene.render();let l={width:t,height:n},u=await BABYLON.Tools.CreateScreenshotAsync(this._engine,o,l,"image/png");this._scene.clearColor=s,a.dispose();for(let c=0;c<i.length;c++)i[c].isVisible=!0;return this._scene.activeCamera=this._camera,o.dispose(),u}getScenePBRMaterials(){const e=[];return this._scene&&this._scene.materials.forEach(t=>{t instanceof BABYLON.PBRBaseMaterial&&e.push(t)}),e}resetPBRMaterialsImageProcessingConfiguration(){this.getScenePBRMaterials().forEach(e=>{this.adjustPBRMaterialImageProcessingConfiguration(e)})}adjustPBRMaterialImageProcessingConfiguration(e){e instanceof BABYLON.PBRMaterial&&e.imageProcessingConfiguration&&(e.imageProcessingConfiguration.colorGradingWithGreenDepth=!1,e.imageProcessingConfiguration.colorGradingBGR=!1,e.imageProcessingConfiguration.exposure=1,e.imageProcessingConfiguration.toneMappingEnabled=!1,e.imageProcessingConfiguration.contrast=1)}animateMeshToFinalParameters(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,a=arguments.length>6?arguments[6]:void 0;if(this._scene&&e){e.id;const l=()=>{this._scene.stopAnimation(e);for(let t=0;t<e.animations.length;t++)e.animations.splice(t--,1)};l();const u=s,c=60,h=Math.floor(u*c);let d,f=null;e.position!==t&&(f=new BABYLON.Animation("positionAnimation","position",c,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),d=[{frame:0,value:e.position},{frame:h,value:t}],f.setKeys(d));let p=null,g=null;if(null==e.rotationQuaternion){var o;o=null!=n?n.clone():r.toEulerAngles().clone(),e.rotation!=o&&(p=new BABYLON.Animation("eulerAnimation","rotation",c,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),d=[{frame:0,value:e.rotation},{frame:h,value:o}],p.setKeys(d))}else{let t;null!=r?t=r.clone():(t=BABYLON.Quaternion.Identity(),t.copyFrom(BABYLON.Quaternion.RotationYawPitchRoll(n.y,n.x,n.z))),g=new BABYLON.Animation("quaternionAnimation","rotationQuaternion",c,BABYLON.Animation.ANIMATIONTYPE_QUATERNION,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),d=[{frame:0,value:e.rotationQuaternion},{frame:h,value:t}],g.setKeys(d)}let m=null;e.scaling!==i&&(m=new BABYLON.Animation("scalingAnimation","scaling",c,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),d=[{frame:0,value:e.scaling},{frame:h,value:i}],m.setKeys(d));let v=e.animations.length;f&&e.animations.push(f),p&&e.animations.push(p),g&&e.animations.push(g),m&&e.animations.push(m),e.animations.length>v&&(this._scene.beginAnimation(e,0,h,!1,1).onAnimationEnd=()=>{l(),a&&a()})}}getMaterialsUsingTexture(e){var t=this.getTextureMaterialsMap();return this._scene.materials.forEach(e=>{this.getTexturesForMaterial(e).forEach(n=>{t.hasOwnProperty(n.uid)||(t[n.uid]=[]),t[n.uid].push(e)})}),t.hasOwnProperty(e.uid)?t[e.uid]:[]}getTextureMaterialsMap(){let e={};return this._scene&&this._scene.materials.forEach(t=>{this.getTexturesForMaterial(t).forEach(n=>{e.hasOwnProperty(n.uid)||(e[n.uid]=[]),e[n.uid].push(t)})}),e}getTexturesForMaterial(e){return e.getActiveTextures()}getTexturesExclusivelyForMaterial(e){let t=this.getTexturesForMaterial(e),n=this.getTextureMaterialsMap();for(var r=0;r<t.length;r++){let e=t[r];(n.hasOwnProperty(e.uid)?n[e.uid]:[]).length>1&&t.splice(r--,1)}return t}getStandardMaterialTextures(e){return e.getActiveTextures()}getPBRBaseSimpleMaterialTextures(e){return e.getActiveTextures()}getPBRMaterialTextures(e){return e.getActiveTextures()}getPBRMetallicRoughnessMaterialTextures(e){return e.getActiveTextures()}getPBRSpecularGlossinessMaterialTextures(e){return e.getActiveTextures()}getNewPBRMaterialTextures(e){return e.getActiveTextures()}createMeshesFromSubMeshes(e){let t=e.getChildMeshes(!0);for(let i=0;i<t.length;i++)this.createMeshesFromSubMeshes(t[i]);let n=[];if(e.subMeshes&&e.subMeshes.length>0)for(let i=0;i<e.subMeshes.length;i++){let t=this.createMeshFromSubMesh(e,i);t&&n.push(t)}let r=new BABYLON.VertexData;r.positions=[],r.indices=[],r.normals=[],r.uvs=[],r.uvs2=[],r.applyToMesh(e,!0),e.subMeshes=[],e.material=null,n.forEach(t=>{t.parent=e})}createMeshFromSubMesh(e,t,n){let r=e.subMeshes[t],i=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),s=e.getVerticesData(BABYLON.VertexBuffer.NormalKind),a=e.getIndices();if(i&&s&&a){let t=i.slice(3*r.verticesStart,3*(r.verticesStart+r.verticesCount)),l=s.slice(3*r.verticesStart,3*(r.verticesStart+r.verticesCount)),u=a.slice(r.indexStart,r.indexStart+r.indexCount),c=null;if(e.isVerticesDataPresent(BABYLON.VertexBuffer.UVKind)){let t=e.getVerticesData(BABYLON.VertexBuffer.UVKind);t&&(c=t.slice(2*r.verticesStart,2*(r.verticesStart+r.verticesCount)))}var o=null;if(e.isVerticesDataPresent(BABYLON.VertexBuffer.UV2Kind)){let t=e.getVerticesData(BABYLON.VertexBuffer.UV2Kind);t&&(o=t.slice(2*r.verticesStart,2*(r.verticesStart+r.verticesCount)))}for(let e=0;e<u.length;e++)u[e]-=r.verticesStart;let h=new BABYLON.Mesh(n||e.name+"_part_"+r._id,this._scene),d=new BABYLON.VertexData;d.positions=t,d.normals=l,d.indices=u,c&&(d.uvs=c),o&&(d.uvs2=o),d.applyToMesh(h),e.material&&(h.material=e.material instanceof BABYLON.MultiMaterial?e.material.subMaterials[r.materialIndex]:e.material)}return null}getNextIncrementalName(e){let t=e;if(e){let s;for(var n=0;this._scene.getMeshByName(t);){if(!s){s=e;var r=e.lastIndexOf("_");if(r>0){var i=e.substring(r+1);parseInt(i).toString()===i&&(s=e.substring(0,r))}}t=s+"_"+ ++n}}return t}createBox(e,t){let n=t||"Box";n=this.getNextIncrementalName(n);let r=BABYLON.Mesh.CreateBox(n,5,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createBoundingBox(e,t){let n=t||"BoundingBox";n=this.getNextIncrementalName(n);const r=e?e.getHierarchyBoundingVectors():this.getWorldExtends();if(!r)return this.createBox(e,t);const i=r.min,s=r.max,a=new BABYLON.BoundingInfo(i,s),o=s.subtract(i);if(!isFinite(o.length()))return this.createBox(e,t);const l=s.x-i.x,u=s.y-i.y,c=s.z-i.z,h=BABYLON.VertexData.CreateBox({width:l,height:u,depth:c}),d=new BABYLON.Mesh(n,this._scene);return h.applyToMesh(d),d.position.copyFrom(a.boundingBox.centerWorld),d.refreshBoundingInfo(),e&&e.parent&&(d.parent=e.parent),d}createSphere(e,t){let n=t||"Sphere";n=this.getNextIncrementalName(n);const r=BABYLON.Mesh.CreateSphere(n,30,5,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createPlane(e,t){let n=t||"Plane";n=this.getNextIncrementalName(n);const r=BABYLON.Mesh.CreatePlane(n,10,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createDisc(e,t){let n=t||"Disc";n=this.getNextIncrementalName(n);const r=BABYLON.MeshBuilder.CreateDisc(n,{tessellation:70},this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createCylinder(e,t){let n=t||"Cylinder";n=this.getNextIncrementalName(n);const r=BABYLON.Mesh.CreateCylinder(n,6,6,6,30,1,this._scene,!1);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createTorus(e,t){let n=t||"Torus";n=this.getNextIncrementalName(n);const r=BABYLON.Mesh.CreateTorus(n,8,1,50,this._scene,!1);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createKnot(e,t){let n=t||"Knot";n=this.getNextIncrementalName(n);const r=BABYLON.Mesh.CreateTorusKnot(n,2,.5,128,64,2,3,this._scene);return r.id=Zakeke.generateUUID(),e&&(r.parent=e),r}createRibbon(e,t){let n=t||"Ribbon";n=this.getNextIncrementalName(n);const r=function(e){for(var t=[],n=-10;n<10;n++)t.push(new BABYLON.Vector3(e,n,5*Math.sin(e/3)*Math.exp(-(n-e)*(n-e)/60)+n/3));return t};for(var i=[],s=0;s<20;s++)i[s]=r(s);const a=BABYLON.Mesh.CreateRibbon("ribbon",i,!1,!1,0,this._scene);return a.id=Zakeke.generateUUID(),e&&(a.parent=e),a}async createRoundedCubeAsync(e,t,n){const r=Sn.Shapes.RoundedCubeName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.RoundedCubeFileName;let a=t||"Rounded Cube";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createRoundedCylinderAsync(e,t,n){const r=Sn.Shapes.RoundedCylinderName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.RoundedCylinderFileName;let a=t||"Rounded Cylinder";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createMatBallAsync(e,t,n){const r=Sn.Shapes.MatBallName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.MatBallFileName;let a=t||"Mat Ball";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createMaleHeadAsync(e,t,n){const r=Sn.Shapes.MaleHeadName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.MaleHeadFileName;let a=t||"Male Head";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createFemaleHeadAsync(e,t,n){const r=Sn.Shapes.FemaleHeadName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.FemaleHeadFileName;let a=t||"Female Head";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createPokemonBallAsync(e,t,n){const r=Sn.Shapes.PokemonBallName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.PokemonBallFileName;let a=t||"Pokemon Ball";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createShaderBallAsync(e,t,n){const r=Sn.Shapes.ShaderBallName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.ShaderBallFileName;let a=t||"Shader Ball";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createBootsAsync(e,t,n){const r=Sn.Shapes.BootsName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.BootsFolder,a=Sn.Shapes.BootsFileName;let o=t||"Boots";return o=this.getNextIncrementalName(o),await this.importPrimitiveShapeAsync(r,i+s,a,e,o,n)}async createSuzanneAsync(e,t,n){const r=Sn.Shapes.SuzanneName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.SuzanneFileName;let a=t||"Suzanne";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createStepPyramidAsync(e,t,n){const r=Sn.Shapes.StepPyramidName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.StepPyramidFileName;let a=t||"Step Pyramid";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createTeapotAsync(e,t,n){const r=Sn.Shapes.TeapotName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.TeapotFileName;let a=t||"Teapot";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createAlloyWheelAsync(e,t,n){const r=Sn.Shapes.AlloyWheelName,i=Sn.Shapes.RootUrl,s=Sn.Shapes.AlloyWheelFolder,a=Sn.Shapes.AlloyWheelFileName;let o=t||"Wheel";return o=this.getNextIncrementalName(o),await this.importPrimitiveShapeAsync(r,i+s,a,e,o,n)}async createTryonReferenceGlassesFrameAsync(e,t,n){const r=Sn.TryonReferences.ReferenceGlassesFrameName,i=Sn.TryonReferences.RootUrl,s=Sn.TryonReferences.ReferenceGlassesFrameFileName;let a=t||"Reference Glasses Frame";return a=this.getNextIncrementalName(a),await this.importPrimitiveShapeAsync(r,i,s,e,a,n)}async createTryOnReferenceModelsAsync(e,t,n,r){return await this.importPrimitiveShapeAsync("",Sn.TryonReferences.RootUrl,n,e,t,r,!0)}async importPrimitiveShapeAsync(e,t,n,r,i,s){let a=[],o=await BABYLON.SceneLoader.ImportMeshAsync(e,t,n,this._scene,s);if(o&&o.meshes){a=o.meshes;for(let e=0;e<a.length;e++){let t=a[e];if("__root__"===t.name){let n=t.getChildMeshes();for(let e=0;e<n.length;e++)n[e].parent=null;t.dispose(),a.splice(e--,1);continue}t.id=Zakeke.generateUUID(),r&&(t.parent=r)}}return a}setTryOnReferenceVisible(e){const{tryonReferencesModels:t}=this.getVTOMeshes();t.forEach(t=>{t.isVisible=e})}setTryOnReferenceEnabled(e){const{tryonReferencesModels:t}=this.getVTOMeshes();t.forEach(t=>{t.setEnabled(e)})}isTryOnReferenceVisible(){const{tryonReferencesModels:e}=this.getVTOMeshes();return e.length>0&&e[0].isVisible}transformEntireScene(e,t,n){var r,i;this._tempParentNode=null!==(r=this._tempParentNode)&&void 0!==r?r:new BABYLON.TransformNode("modelParent");const s=null==(i=this._scene)?void 0:i.meshes;null==s||s.forEach(e=>{null==e.parent&&e.setParent(this._tempParentNode)}),e&&(this._tempParentNode.position=new BABYLON.Vector3(e.x,e.y,e.z)),t&&(this._tempParentNode.rotation=new BABYLON.Vector3(t.x,t.y,t.z)),n&&(this._tempParentNode.scaling=new BABYLON.Vector3(n.x,n.y,n.z)),null==s||s.forEach(e=>{e.parent==this._tempParentNode&&e.setParent(null)})}scaleSceneToTryonReferenceModels(){this.setSceneScalePercentageForVTO(100),this.setScenePositionPercentageForVTO(0,0,0)}getSceneScalingPercentageForVTO(){const{userMeshes:e,tryonReferencesModels:t}=this.getVTOMeshes();if(0===t.length||0===e.length)return 100;const n=this._scene.getWorldExtends(e=>t.includes(e)),r=this._scene.getWorldExtends(t=>e.includes(t)),i=n.max.x-n.min.x,s=n.max.y-n.min.y,a=n.max.z-n.min.z,o=r.max.x-r.min.x,l=r.max.y-r.min.y,u=r.max.z-r.min.z;return 1/Math.min(i/o,s/l,a/u)*100}setSceneScalePercentageForVTO(e){const{userMeshes:t,tryonReferencesModels:n}=this.getVTOMeshes();if(0===n.length||0===t.length)return;const r=this._scene.getWorldExtends(e=>n.includes(e)),i=this._scene.getWorldExtends(e=>t.includes(e)),s=r.max.x-r.min.x,a=r.max.y-r.min.y,o=r.max.z-r.min.z,l=i.max.x-i.min.x,u=i.max.y-i.min.y,c=i.max.z-i.min.z,h=Math.min(s/l,a/u,o/c),{x:d,y:f,z:p}=this.getScenePositionPercentageForVTO();t.filter(e=>!e.parent).forEach(t=>{t.scaling.scaleInPlace(h),t.scaling.scaleInPlace(e/100)}),this.setScenePositionPercentageForVTO(d,f,p)}getScenePositionPercentageForVTO(){const{userMeshes:e,tryonReferencesModels:t}=this.getVTOMeshes();if(0===t.length||0===e.length)return{x:0,y:0,z:0};const n=this._scene.getWorldExtends(e=>t.includes(e)),r=this._scene.getWorldExtends(t=>e.includes(t)),i=n.max.add(n.min).scale(.5),s=r.max.add(r.min).scale(.5).subtract(i);return{x:s.x/(n.max.x-n.min.x)*100,y:s.y/(n.max.y-n.min.y)*100,z:s.z/(n.max.z-n.min.z)*100}}setScenePositionPercentageForVTO(e,t,n){const{userMeshes:r,tryonReferencesModels:i}=this.getVTOMeshes();if(0===i.length||0===r.length)return;const s=this._scene.getWorldExtends(e=>i.includes(e)),a=this._scene.getWorldExtends(e=>r.includes(e)),o=s.max.add(s.min).scale(.5),l=a.max.add(a.min).scale(.5),u=o.subtract(l),c=new BABYLON.Vector3(e/100*(s.max.x-s.min.x),t/100*(s.max.y-s.min.y),n/100*(s.max.z-s.min.z));r.filter(e=>!e.parent).forEach(e=>{e.position.addInPlace(u),e.position.addInPlace(c)})}getSceneRotationForVTO(){var e,t;const{userMeshes:n,tryonReferencesModels:r}=this.getVTOMeshes();if(0===r.length||0===n.length)return{x:0,y:0,z:0};const i=n.filter(e=>!e.parent)[0],s=null!==(e=null==(t=i.rotationQuaternion)?void 0:t.toEulerAngles())&&void 0!==e?e:i.rotation,a={x:s.x/Math.PI*180,y:s.y/Math.PI*180,z:s.z/Math.PI*180};return a.x=a.x<0?360+a.x:a.x,a.y=a.y<0?360+a.y:a.y,a.z=a.z<0?360+a.z:a.z,a}setSceneRotationForVTO(e,t,n){const{userMeshes:r,tryonReferencesModels:i}=this.getVTOMeshes();if(0===i.length||0===r.length)return;const s=new BABYLON.Vector3(e/180*Math.PI,t/180*Math.PI,n/180*Math.PI);r.filter(e=>!e.parent).forEach(e=>{e.rotation=s})}setVTOReferenceVisible(e){const{tryonReferencesModels:t}=this.getVTOMeshes();t.forEach(t=>{t.isVisible=e})}replaceTransformNodeWithMesh(e){let t=null;if(this._scene){const n=e.parent,r=e.getChildren();t=new BABYLON.Mesh(e.name,this._scene,n),t.id=Zakeke.generateUUID(),t.scaling=e.scaling.clone(),t.position=e.position.clone(),t.rotation=e.rotation.clone(),e.rotationQuaternion&&(t.rotationQuaternion=e.rotationQuaternion.clone()),r.forEach(e=>e.parent=t),e.dispose(),e.animations.forEach(e=>{t.animations.push(e.clone())}),this._scene.animationGroups.forEach(n=>{n.targetedAnimations.forEach(n=>{n.target===e&&(n.target=t)})}),this._scene.skeletons.forEach(n=>{n.bones.forEach(n=>{n.getTransformNode()===e&&n.linkTransformNode(t)})})}return t}async importMeshesFromUrlAsync(e,t,n,r,i){let s;BABYLON.GLTFFileLoader.IncrementalLoading=!1,BABYLON.SceneLoader.OnPluginActivatedObservable.add(e=>{s=e.name});let a=[];const o=await BABYLON.SceneLoader.ImportMeshAsync("",e,void 0,this._scene,n,i);o&&(o.meshes.forEach(e=>{e.id=Zakeke.generateUUID(),a.push(e),this.getMeshMaterials(e).forEach(e=>e.id=Zakeke.generateUUID())}),o.transformNodes.forEach(e=>{e.id=Zakeke.generateUUID();const t=this.replaceTransformNodeWithMesh(e);t&&a.push(t)}),o.geometries.forEach(e=>e.id=Zakeke.generateUUID()));let l=BABYLON.Tools.GetFilename(e),u=l,c=l.lastIndexOf(".");-1!==c&&(u=l.substr(0,c));const h=a.filter(e=>!e.parent);if(h.length>1||1===h.length&&"__root__"!==h[0].name){const e=new BABYLON.Mesh(u,this._scene);e.id=Zakeke.generateUUID(),e.metadata={isRealMesh:!0,isGroup:!0},a.push(e),h.forEach(t=>{t.setParent(e)}),"obj"===s&&(e.scaling=new BABYLON.Vector3(-e.scaling.x,e.scaling.y,e.scaling.z),e.rotation=new BABYLON.Vector3(0,Math.PI,0))}else if(1===h.length){const t=h[0];if("__root__"===t.name){let n=BABYLON.Tools.GetFilename(e),r=l.lastIndexOf(".");-1!==r&&(n=l.substring(0,r)),t.name=n,"obj"===s&&(t.scaling=new BABYLON.Vector3(-t.scaling.x,t.scaling.y,-t.scaling.z),t.rotation=new BABYLON.Vector3(0,Math.PI,0))}if(["gltf","glb","obj"].includes(s)){t.name+="_transforms",t.metadata={isGltfTransformNode:!0};const e=new BABYLON.Mesh(u,this._scene);e.id=Zakeke.generateUUID(),e.metadata={isRealMesh:!0,isGroup:!0},a.push(e),t.parent=e}}if("gltf"===s||"glb"===s){const e=[];a.forEach(t=>{if(t instanceof BABYLON.Mesh){const e=BABYLON.VertexData.ExtractFromMesh(t),n=["uvs","uvs2","uvs3","uvs4","uvs5","uvs6"];for(const t of n)if(e&&e[t]&&e[t].length>0)for(let n=0;n<e[t].length;n+=2)e[t][n+1]=1-e[t][n+1];e.applyToMesh(t)}this.getMeshMaterials(t).forEach(t=>{e.includes(t)||e.push(t)})}),e.forEach(e=>{e.getActiveTextures().forEach(e=>{e instanceof BABYLON.Texture&&(e.vScale*=-1)})})}return this.adjustCamera(s,!1,!1,r,!0),this.setupShaderMaterialsCameraPosition(),a}setupShaderMaterialsCameraPosition(){if(this._scene)for(let t=0;t<this._scene.materials.length;t++){var e=this._scene.materials[t];this.setupShaderMaterialCameraPosition(e)}}setupShaderMaterialCameraPosition(e){if(this._scene&&e&&e instanceof BABYLON.ShaderMaterial){const t=this._scene.activeCamera;t&&e.setVector3("cameraPosition",t.position)}}getSceneCmScalingFactor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null;if(this._scene){let i=null;for(let e=0;e<this._scene.meshes.length;e++){var r=this._scene.meshes[e];if(r.metadata&&r.metadata.sizecm){i=r;break}}if(e&&t&&(i=t),i){const t=i.getHierarchyBoundingVectors(),r=t.min,s=t.max,a=s.subtract(r);if(isFinite(a.length())){const t=s.x-r.x,a=s.y-r.y,o=s.z-r.z,l=e||i.metadata.sizecm;return void 0===l.width||"number"!=typeof l.width||isNaN(l.width)||0===t?void 0===l.height||"number"!=typeof l.height||isNaN(l.height)||0===a?void 0!==l.depth&&"number"==typeof l.depth&&!isNaN(l.depth)&&0!==o&&(n=l.depth/o):n=l.height/a:n=l.width/t,n}}}return n}async exportSceneToUsdzAsync(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=this.getMeshesForAR();let l=e||"scene";return l=l.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARAsync(l,t,o,n,r,"usdz",i,s,a)}async exportMeshToUsdzAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const s=this.getMeshHierarchy(t.id);let a=t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARAsync(a,e,s,void 0,void 0,"usdz",n,r,i)}async exportSceneToRemoteGlTFAsync(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=this.getMeshesForAR();let l=e||"scene";return l=l.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARAsync(l,t,o,n,r,"glTF",i,s,a)}async exportMeshToRemoteGlTFAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const s=this.getMeshHierarchy(t.id);let a=t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARAsync(a,e,s,void 0,void 0,"glTF",n,r,i)}async exportSceneToRemoteGLBAsync(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=this.getMeshesForAR();let l=e||"scene";return l=l.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARAsync(l,t,o,n,r,"glb",i,s,a)}async exportMeshToRemoteGLBAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const s=this.getMeshHierarchy(t.id);let a=t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARAsync(a,e,s,void 0,void 0,"glb",n,r,i)}async exportSceneToARMultiformatAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["usdz","glb","png"],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];const l=this.getMeshesForAR();let u=e||"scene";return u=u.replace(/[^a-z0-9]/gi,"_").toLowerCase(),await this.exportMeshesToARMultiformatAsync(u,t,l,n,s,a,o,r,i)}async exportMeshToARMultiformatAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["usdz","glb","png"],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;const l=this.getMeshHierarchy(t.id);let u=t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();return await this.exportMeshesToARMultiformatAsync(u,e,l,n,r,i,s,a,o)}async getGltfBlobForARExport(e,t,n){var r;const i=[];n.filter(e=>e.metadata&&e.metadata.isGltfTransformNode).forEach(e=>{const t=new BABYLON.TransformNode(e.name+"-transform-node",this._scene);t.scaling.z=-1;const n=new BABYLON.Quaternion;n.set(0,1,0,0),t.rotationQuaternion=n,i.push([e,e.parent,t]),e.setParent(t)}),null==(r=this._scene)||r.render();const s={meshes:n,materials:this.getMeshesMaterials(n),transformNodes:this._scene.transformNodes,lights:void 0,exportTextureUrls:null!=t,rootUrl:t,shouldExportNode:e=>{for(let t=0;t<n.length;t++)if(n[t]===e)return!0;return!1}},a=await BABYLON.GLTF2Export.GLTFAsync(this._scene,e,s);if(a){const e=new JSZip,t=a.serverImages&&a.glTFFiles.hasOwnProperty("TextureUrls.txt")?a.serverImages:[];for(var o in a.glTFFiles)if(-1===t.indexOf(o)){let t=a.glTFFiles[o];Cn.EndsWith(o,".gltf")||Cn.EndsWith(o,".bin")?e.file(o,t,{compression:"DEFLATE",compressionOptions:{level:9}}):e.file(o,t,{compression:"STORE"})}i.forEach(e=>{let[t,n,r]=e;t.setParent(n),r.dispose()}),this._scene.render();let n=await e.generateAsync({type:"blob"});if(n)return n.lastModifiedDate=new Date,n.name="arobj.zip",n}return null}async exportMeshToGLBBlob(e,t){const n=this.getTryOnMeshHierarchy(t),r={meshes:n,materials:this.getMeshesMaterials(n),transformNodes:void 0,lights:void 0,exportTextureUrls:null!=e,rootUrl:e,shouldExportNode:e=>{for(let t=0;t<n.length;t++)if(n[t]===e)return!0;return!1}},i=await BABYLON.GLTF2Export.GLBAsync(this._scene,"model",r).catch(e=>(console.error(e),null));if(i&&i.glTFFiles)for(let s in i.glTFFiles)if(Cn.EndsWith(s,".glb")){const e=new Se,t=await i.glTFFiles[s].arrayBuffer(),n=e.readBinary(t);n.getRoot().listNodes().filter(e=>null===e.getParent()||e.getParent()instanceof se).forEach(e=>{});const r=e.writeBinary(n);return new Blob([r],{type:"model/gltf-binary"})}return null}async exportMeshesToARAsync(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"usdz",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l="";if(r&&i&&Zakeke.config){const e=Zakeke.config.baseApiUrl+"artasks/cachedresults/"+r+"/"+i+"/"+s;try{l=await jQuery.ajax({url:e,cache:!1,contentType:!1,processData:!1,type:"GET"})}catch(u){l=""}}if(!l){let u=this.getSceneCmScalingFactor(a,o);const c=await this.getGltfBlobForARExport(e,t,n);if(c){const e={flipTextures:!0,formats:[s]};r&&(e.sceneID=r),i&&(e.sceneCode=i),u&&(e.scale=u);let t=!0;null!=window.isOwin&&(t=window.isOwin);const n=await new wn("artasks",window.token,t).upload(c,e);n&&n.length>0&&(l=n[0].arFileUrl)}}return l}async exportMeshesToARMultiformatAsync(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["usdz","glb","png"],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0,l=[],u=[];if(a&&o&&Zakeke.config)for(let h=0;h<r.length;h++){const e=r[h],t=Zakeke.config.baseApiUrl+"artasks/cachedresults/"+a+"/"+o+"/"+e;try{const n=await jQuery.ajax({url:t,cache:!1,contentType:!1,processData:!1,type:"GET"});n&&u.push({format:e,arFileUrl:n})}catch(c){}l=u}if(u.length!==r.length){const c=this.getSceneCmScalingFactor(i,s),h=u.map(e=>e.format),d=r.filter(e=>!h.includes(e)),f=await this.getGltfBlobForARExport(e,t,n);if(f){const e={flipTextures:!0,formats:d};a&&(e.sceneID=a),o&&(e.sceneCode=o),c&&(e.scale=c);let t=!0;void 0!==window.isOwin&&(t=window.isOwin);const n=await new wn("artasks",window.token,t).upload(f,e);if(n&&n.length>0)for(const r of n)r&&r.arFileUrl&&l.push({format:r.format,arFileUrl:r.arFileUrl})}}return l}async exportSceneToLocalGlTFBlobsAsync(){const e=Zakeke.generateUUID(),t=this.getSceneToGltfExportOptions(),n=await BABYLON.GLTF2Export.GLTFAsync(this._scene,e,t);let r=[];for(let i in n.glTFFiles)r.push(n.glTFFiles[i]);return r}async exportSceneToLocalGlTFUrlsAsync(){const e=[],t=Zakeke.generateUUID(),n=this.getSceneToGltfExportOptions(),r=await BABYLON.GLTF2Export.GLTFAsync(this._scene,t,n);if(r)for(let s in r.glTFFiles){var i=r.glTFFiles[s];e.push(this.getGltfFileUrl(s,i))}return e}async downloadSceneLocalGltfAsync(){const e=Zakeke.generateUUID(),t=this.getSceneToGltfExportOptions(),n=await BABYLON.GLTF2Export.GLTFAsync(this._scene,e,t);n&&n.downloadFiles()}async exportSceneToLocalGLBBlobAsync(){const e=await this.getSceneLocalGLBBlobInfoAsync();return e?e.blob:null}async exportSceneToLocalGLBBase64Async(){let e=null;const t=await this.getSceneLocalGLBBlobInfoAsync();if(t&&t.blob instanceof Blob){let n=new FileReader;n.readAsDataURL(t.blob),n.onloadend=()=>{let t=n.result;"string"==typeof t&&(e=t)}}return e}async exportSceneToLocalGLBUrlAsync(){let e=null;const t=await this.getSceneLocalGLBBlobInfoAsync();return t&&t.name&&t.blob instanceof Blob&&(e=this.getGltfFileUrl(t.name,t.blob)),e}async downloadSceneLocalGLBAsync(){var e;null==(e=this._scene)||e.meshes.forEach(e=>{e.isVisible=!0});const t=await this.getSceneLocalGLBBlobInfoAsync();if(t&&t.name&&t.blob instanceof Blob){let e=this.getGltfFileUrl(t.name,t.blob);var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("type","hidden"),n.download=t.name,n.href=e,n.click(),document.body.removeChild(n),URL.revokeObjectURL(e)}}async getSceneLocalGLBBlobInfoAsync(){let e={name:null,blob:null};const t=Zakeke.generateUUID(),n=this.getSceneToGltfExportOptions();let r=await BABYLON.GLTF2Export.GLBAsync(this._scene,t,n).catch(e=>(console.error(e),null));if(r&&r.glTFFiles)for(let i in r.glTFFiles)if(Cn.EndsWith(i,".glb")){let t=this.getSceneCmScalingFactor(),n=1;t&&(n=t/100);const s=BABYLON.Quaternion.RotationAxis(BABYLON.Axis.Y,2*Math.PI),a=new Se,o=await r.glTFFiles[i].arrayBuffer(),l=a.readBinary(o),u=l.getRoot().listNodes().filter(e=>null===e.getParent()||e.getParent()instanceof se),c=[0,1,0,0],h=u.every(e=>{const t=e.getRotation();return c.length===t.length&&c.every((e,n)=>e===t[n])});u.forEach(e=>{e.setScale([n,n,n]),h&&e.setRotation([s.x,s.y,s.z,s.w])});const d=a.writeBinary(l),f=new Blob([d],{type:"model/gltf-binary"});e.name=i,e.blob=f;break}return e}async exportSceneToLocalUSDZBlobAsync(){const e=await this.getSceneLocalUSDZBlobInfoAsync();return e?e.blob:null}async exportSceneToLocalUSDZBase64Async(){let e=null;const t=await this.getSceneLocalUSDZBlobInfoAsync();if(t&&t.blob instanceof Blob){let n=new FileReader;n.readAsDataURL(t.blob),n.onloadend=()=>{let t=n.result;"string"==typeof t&&(e=t)}}return e}async exportSceneToLocalUSDZUrlAsync(){let e=null;const t=await this.getSceneLocalUSDZBlobInfoAsync();return t&&t.name&&t.blob instanceof Blob&&(e=this.getUsdzFileUrl(t.name,t.blob)),e}async downloadSceneLocalUSDZAsync(){const e=await this.getSceneLocalUSDZBlobInfoAsync();if(e&&e.name&&e.blob instanceof Blob){let n=this.getUsdzFileUrl(e.name,e.blob);var t=document.createElement("a");document.body.appendChild(t),t.setAttribute("type","hidden"),t.download=e.name,t.href=n,t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}}async getSceneLocalUSDZBlobInfoAsync(){let e={name:null,blob:null};const t=await this.getSceneLocalGLBBlobInfoAsync();if(t&&t.name&&t.blob&&t.blob instanceof Blob){const n=this.getGltfFileUrl(t.name,t.blob),r=await En.convertGlbToUsdz(n);e.name=t.name.replace(".glb",".usdz"),e.blob=r}return e}getSceneToGltfExportOptions(){var e=this.getMeshesForAR();return{meshes:e,materials:this.getMeshesMaterials(e),transformNodes:void 0,lights:void 0,exportTextureUrls:!1,rootUrl:null,shouldExportNode:t=>{for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}}}getGltfFileUrl(e,t){var n=void 0;return Cn.EndsWith(e,".glb")?n={type:"model/gltf-binary"}:Cn.EndsWith(e,".bin")?n={type:"application/octet-stream"}:Cn.EndsWith(e,".gltf")?n={type:"model/gltf+json"}:Cn.EndsWith(e,".jpeg")?n={type:"image/jpeg"}:Cn.EndsWith(e,".png")&&(n={type:"image/png"}),window.URL.createObjectURL(new Blob([t],n))}getUsdzFileUrl(e,t){return window.URL.createObjectURL(new Blob([t],{type:"model/vnd.usdz+zip"}))}exportSceneToBabylon(){const e=BABYLON.SceneSerializer.Serialize(this._scene);return JSON.stringify(e)}exportVisibleMeshesToBabylon(){const e=this.getVisibleMeshes(),t=BABYLON.SceneSerializer.SerializeMesh(e,!1,!1);return JSON.stringify(t)}downloadImageFromBase64(e,t,n){var r=document.createElement("a");r.href=e,r.download=t,r.click(),r.remove()}getStandardMaterialTextureType(e,t){return e.diffuseTexture===t?"diffuse":e.emissiveTexture===t?"emissive":e.ambientTexture===t?"ambient":e.lightmapTexture===t?"lightmap":e.opacityTexture===t?"opacity":e.specularTexture===t?"specular":e.reflectionTexture===t?"reflection":e.refractionTexture===t?"refraction":e.bumpTexture===t?"bump":null}getPBRMetallicRoughnessMaterialTextureType(e,t){return e.environmentTexture===t?"environment":e.normalTexture===t?"normal":e.emissiveTexture===t?"emissive":e.occlusionTexture===t?"occlusion":e.baseTexture===t?"base":e.metallicRoughnessTexture===t?"metallicRoughness":null}getPBRSpecularGlossinessMaterialTextureType(e,t){return e.environmentTexture===t?"environment":e.normalTexture===t?"normal":e.emissiveTexture===t?"emissive":e.occlusionTexture===t?"occlusion":e.diffuseTexture===t?"diffuse":e.specularGlossinessTexture===t?"specularGlossiness":null}getPBRMaterialTextureType(e,t){if(e.cameraColorGradingTexture===t)return"cameraColorGrading";if(e.albedoTexture===t)return"albedo";if(e.ambientTexture===t)return"ambient";if(e.opacityTexture===t)return"opacity";if(e.reflectionTexture===t)return"reflection";if(e.emissiveTexture===t)return"emissive";if(e.reflectivityTexture===t)return"reflectivity";if(e.metallicTexture===t)return"metallic";if(e.microSurfaceTexture===t)return"microSurface";if(e.bumpTexture===t)return"bump";if(e.lightmapTexture===t)return"lightmap";if(e.refractionTexture===t)return"refraction";if(e.clearCoat){if(e.clearCoat.texture===t)return"clearCoat";if(e.clearCoat.bumpTexture===t)return"clearCoat_bump";if(e.clearCoat.tintTexture===t)return"clearCoat_tint";if(e.clearCoat.textureRoughness===t)return"clearCoat_textureRoughness";if(e.clearCoat.texture===t)return"clearCoat_texture"}if(e.anisotropy&&e.anisotropy.texture===t)return"anisotropy_texture";if(e.sheen){if(e.sheen.texture===t)return"sheen_texture";if(e.sheen.textureRoughness===t)return"sheen_textureRoughness"}if(e.subSurface){if(e.subSurface.thicknessTexture===t)return"subSurface_thickness";if(e.subSurface.refractionIntensityTexture===t)return"subSurface_refractionIntensity";if(e.subSurface.translucencyIntensityTexture===t)return"subSurface_translucencyIntensity"}return null}getZakekePBRMaterialTextureType(e,t){return e.albedoTexture===t?"albedo":e.bumpTexture===t?"bump":e.reflectionTexture===t?"reflection":e.matCapReflectionTexture===t?"matCapReflection":e.reflectivityTexture===t?"reflectivity":e.microsurfaceTexture===t?"microsurface":e.ambientTexture===t?"ambient":e.aoTexture===t?"ao":e.opacityTexture===t?"opacity":null}getMaterialTextureType(e,t){return e instanceof BABYLON.StandardMaterial?this.getStandardMaterialTextureType(e,t):e instanceof BABYLON.PBRMetallicRoughnessMaterial?this.getPBRMetallicRoughnessMaterialTextureType(e,t):e instanceof BABYLON.PBRSpecularGlossinessMaterial?this.getPBRSpecularGlossinessMaterialTextureType(e,t):e instanceof BABYLON.PBRMaterial?this.getPBRMaterialTextureType(e,t):e instanceof Zakeke.PBRMaterial?this.getZakekePBRMaterialTextureType(e,t):null}getMaterialTexture(e,t){if(e instanceof BABYLON.StandardMaterial)switch(t){case"diffuse":return e.diffuseTexture;case"emissive":return e.emissiveTexture;case"ambient":return e.ambientTexture;case"lightmap":return e.lightmapTexture;case"opacity":return e.opacityTexture;case"specular":return e.specularTexture;case"reflection":return e.reflectionTexture;case"refraction":return e.refractionTexture;case"bump":return e.bumpTexture}else if(e instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(t){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":return e["".concat(t,"Texture")]}else if(e instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(t){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":return e["".concat(t,"Texture")]}else if(e instanceof BABYLON.PBRMaterial)switch(t){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":return e["".concat(t,"Texture")];case"refraction":return e.refractionTexture;case"environmentBRDF":return e.environmentBRDFTexture;case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture}else if(e instanceof Zakeke.PBRMaterial)switch(t){case"albedo":return e.albedoTexture;case"bump":return e.bumpTexture;case"reflection":return e.reflectionTexture;case"matCapReflection":return e.matCapReflectionTexture;case"reflectivity":return e.reflectivityTexture;case"microsurface":return e.microsurfaceTexture;case"ambient":return e.ambientTexture;case"ao":return e.aoTexture;case"opacity":return e.opacityTexture}return null}applyTexture(e,t,n){if(e&&"lightmap"==n&&(e.coordinatesIndex=1,(t instanceof BABYLON.StandardMaterial||t instanceof BABYLON.PBRMaterial||t instanceof BABYLON.PBRBaseSimpleMaterial)&&(t.useLightmapAsShadowmap=!0)),t instanceof BABYLON.StandardMaterial)switch(n){case"diffuse":t.diffuseTexture=e;break;case"emissive":t.emissiveTexture=e;break;case"ambient":t.ambientTexture=e;break;case"lightmap":t.lightmapTexture=e;break;case"opacity":t.opacityTexture=e;break;case"specular":t.specularTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"refraction":t.refractionTexture=e;break;case"bump":t.bumpTexture=e}else if(t instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRMaterial)switch(n){case"cameraColorGrading":t.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":t["".concat(n,"Texture")]=e;break;case"refraction":t.refractionTexture=e;break;case"environmentBRDF":t.environmentBRDFTexture=e;break;case"clearCoat_texture":t.clearCoat.texture=e;break;case"clearCoat_bump":t.clearCoat.bumpTexture=e;break;case"clearCoat_tint":t.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":t.clearCoat.textureRoughness=e;break;case"anisotropy_texture":t.anisotropy.texture=e;break;case"sheen_texture":t.sheen.texture=e;break;case"sheen_textureRoughness":t.sheen.textureRoughness=e;break;case"subSurface_thickness":t.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":t.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":t.subSurface.refractionIntensityTexture=e}else if(t instanceof BABYLON.ShaderMaterial)e&&e instanceof BABYLON.Texture?t.setTexture(n,e):t.removeTexture(n);else if(t instanceof Zakeke.PBRMaterial)switch(n){case"albedo":t.albedoTexture=e;break;case"bump":t.bumpTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"matCapReflection":t.matCapReflectionTexture=e;break;case"reflectivity":t.reflectivityTexture=e;break;case"microsurface":t.microsurfaceTexture=e;break;case"ambient":t.ambientTexture=e;break;case"ao":t.aoTexture=e;break;case"opacity":t.opacityTexture=e}}applyTextureOnSerializedMaterial(e,t,n,r){if(e&&"lightmap"==n&&(e.coordinatesIndex=1,("BABYLON.StandardMaterial"===r||"BABYLON.PBRMaterial"===r||"BABYLON.PBRBaseSimpleMaterial"===r)&&(t.useLightmapAsShadowmap=!0)),"BABYLON.StandardMaterial"===r)t["".concat(n,"Texture")]=e;else if("BABYLON.PBRMetallicRoughnessMaterial"===r)t["".concat(n,"Texture")]=e;else if("BABYLON.PBRSpecularGlossinessMaterial"===r)t["".concat(n,"Texture")]=e;else if("BABYLON.PBRMaterial"===r)switch(n){case"cameraColorGrading":t.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":case"refraction":t["".concat(n,"Texture")]=e;break;case"environmentBRDF":t.environmentBRDFTexture=e;break;case"clearCoat_texture":t.clearCoat.texture=e;break;case"clearCoat_bump":t.clearCoat.bumpTexture=e;break;case"clearCoat_tint":t.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":t.clearCoat.textureRoughness=e;break;case"anisotropy_texture":t.anisotropy.texture=e;break;case"sheen_texture":t.sheen.texture=e;break;case"sheen_textureRoughness":t.sheen.textureRoughness=e;break;case"subSurface_thickness":t.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":t.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":t.subSurface.refractionIntensityTexture=e}else"Zakeke.PBRMaterial"===r&&(t["".concat(n,"Texture")]=e)}getSerializedMaterialTexture(e,t,n){if("BABYLON.StandardMaterial"===n)return e["".concat(t,"Texture")];if("BABYLON.PBRMetallicRoughnessMaterial"===n)return e["".concat(t,"Texture")];if("BABYLON.PBRSpecularGlossinessMaterial"===n)return e["".concat(t,"Texture")];if("BABYLON.PBRMaterial"===n)switch(t){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":case"refraction":return e["".concat(t,"Texture")];case"environmentBRDF":return e.environmentBRDFTexture;case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture}else if("Zakeke.PBRMaterial"===n)return e["".concat(t,"Texture")];return null}getMaterialTypeName(e){return e instanceof BABYLON.StandardMaterial?"BABYLON.StandardMaterial":e instanceof BABYLON.PBRMetallicRoughnessMaterial?"BABYLON.PBRMetallicRoughnessMaterial":e instanceof BABYLON.PBRSpecularGlossinessMaterial?"BABYLON.PBRSpecularGlossinessMaterial":e instanceof BABYLON.PBRMaterial?"BABYLON.PBRMaterial":e instanceof BABYLON.ShaderMaterial?"BABYLON.ShaderMaterial":e instanceof Zakeke.PBRMaterial?"Zakeke.PBRMaterial":"BABYLON.StandardMaterial"}async exportMeshToBabylon(e){const t=this.getMeshHierarchy(e.id);return await this.exportMeshesToBabylon(t)}async exportMeshesToBabylon(t){const n=this.getMeshesMaterials(t),r=t.map(e=>({id:e.id,doNotSerialize:e.doNotSerialize})),i=n.map(e=>({id:e.id,doNotSerialize:e.doNotSerialize}));t.forEach(e=>e.doNotSerialize=!1),n.forEach(e=>e.doNotSerialize=!1);try{const s={};for(let e=0;e<n.length;e++){const t=n[e],r=t.id,i=this.getMaterialDynamicTextures(t);if(i.length>0){s[r]={materialType:this.getMaterialTypeName(t),textures:[]};for(let e=0;e<i.length;e++){const n=i[e],a=Zakeke.generateUUID(),o=this.getMaterialTextureType(t,n),l=await this.exportTextureToBase64Async(n,"image/png");if(o&&l){const e={id:a,type:o,base64String:l,isProcedural:n instanceof BABYLON.ProceduralTexture};s[r].textures.push(e)}}}}const a=BABYLON.SceneSerializer.SerializeMesh(t,!1,!1);for(const t of a.materials){Object.getOwnPropertyNames(t).filter(e=>"Texture"===e.slice(-7)&&"object"==typeof t[e]);const n=t.id;if(s.hasOwnProperty(n)){const r=s[n],i=r.materialType,a=r.textures;for(const n of a){const s=this.getSerializedMaterialTexture(t,n.type,r.materialType);if(s){if(n.isProcedural){const r=new BABYLON.Texture(n.base64String,this._scene,void 0,void 0,void 0,void 0);await e.whenTextureIsReadyAsync(r),r.uScale=s.uScale,r.vScale=s.vScale,r.uOffset=s.uOffset,r.vOffset=s.vOffset,r.uAng=s.uAng,r.vAng=s.vAng,r.level=s.level,r.coordinatesIndex=s.coordinatesIndex,r.coordinatesMode=s.coordinatesMode,r.wrapU=s.wrapU,r.wrapV=s.wrapV;const a=r.serialize();a.url=n.base64String,a.name="prcedural texture",this.applyTextureOnSerializedMaterial(a,t,n.type,i),r.dispose()}}else s.url=n.base64String,s.name="dynamic texture"}}}let o=JSON.stringify(a);return t.forEach(e=>{var t;return e.doNotSerialize=null==(t=r.find(t=>t.id===e.id))?void 0:t.doNotSerialize}),n.forEach(e=>e.doNotSerialize=i.find(t=>t.id===e.id).doNotSerialize),o}finally{t.forEach(e=>{var t;return e.doNotSerialize=null==(t=r.find(t=>t.id===e.id))?void 0:t.doNotSerialize}),n.forEach(e=>e.doNotSerialize=i.find(t=>t.id===e.id).doNotSerialize)}}async exportMeshesForTyOnToBabylon(){const e=this.getMeshesForTryOn();return await this.exportMeshesToBabylon(e)}downloadBlob(e){const t=URL.createObjectURL(e),n=document.createElement("a");n.download="mesh.json",n.href=t,n.click(),URL.revokeObjectURL(t)}async downloadMeshBabylonAsync(e){const t=await this.exportMeshToBabylon(e);if(t){const e=new Blob([t],{type:"application/json"});this.downloadBlob(e)}}async downloadMeshesBabylonAsync(e){const t=await this.exportMeshesToBabylon(e);if(t){const e=new Blob([t],{type:"application/json"});this.downloadBlob(e)}}async loadAllDelayedMaterialsAsync(e,t){let n=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var r={};for(var i in this._scene.metadata.delayedMaterials)r[i]={name:this._scene.metadata.delayedMaterials[i].name,file:this._scene.metadata.delayedMaterials[i].file};n=await this.loadMaterialsAsync(e,r,t)}return n}async loadDelayedMaterialsAsync(e,t){let n=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials){for(var r={},i=0;i<t.length;i++)this._scene.metadata.delayedMaterials.hasOwnProperty(t[i])&&(r[t[i]]={name:this._scene.metadata.delayedMaterials[t[i]].name,file:this._scene.metadata.delayedMaterials[t[i]].file});n=await this.loadMaterialsAsync(e,r)}return n}async loadDelayedMaterialAsync(e,t){if(this._scene&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var n={};if(this._scene.metadata.delayedMaterials.hasOwnProperty(t)){n[t]={name:this._scene.metadata.delayedMaterials[t].name,file:this._scene.metadata.delayedMaterials[t].file};let r=await this.loadMaterialsAsync(e,n);if(r.length>0)return r[0]}}return null}async loadMaterialsAsync(t,n,r){const i=[];let s=[];for(let e in n){const r=this._scene.getMaterialByID(e);if(r)i.push(r);else{const r=n[e];s.push(this.loadMaterialInternalAsync(e,t,r.file))}}const a=await Promise.all(s);for(let o=0;o<a.length;o++){const n=a[o],s=JSON.parse(n),l=BABYLON.Material.Parse(s,this._scene,t);l&&(Logger.info("Waiting for material ready: "+l.id+" - "+l.name),await e.whenAllMaterialTexturesAreReady(l),Logger.info("Material ready: "+l.id+" - "+l.name),i.push(l),await(null==r?void 0:r(o+1,a.length)))}return this.setupShaderMaterialsCameraPosition(),i}loadMaterialInternalAsync(e,t,n){if(Logger.info("Loading delayed material: "+e),this._loadingMaterials.hasOwnProperty(e))return this._loadingMaterials[e];var r=t+(Cn.EndsWith(t,"/")?"":"/")+n;let i=new Promise((t,n)=>{BABYLON.Tools.LoadFile(r,n=>{Logger.info("Loaded delayed material: "+e),t(n),delete this._loadingMaterials[e]},void 0,void 0,!1,(t,r)=>{n(r),delete this._loadingMaterials[e]})});return this._loadingMaterials[e]=i,i}showMesh(e){this.showHideMesh(e,!0)}hideMesh(e){this.showHideMesh(e,!1)}showHideMesh(e,t){var n=(e,t)=>{e.isVisible=t;var r=e.getChildMeshes(!0);r&&r.forEach(e=>{n(e,t)})},r=this._scene.getMeshById(e);r&&n(r,t)}changeMaterialColor(e,t,n){for(let r=0;r<this._scene.meshes.length&&this._scene.meshes[r].material!==e;r++);t&&void 0!==e[t]&&(e[t]=n)}applyMaterialByName(e,t){if(this._scene){let n=this._scene.getMaterialByName(e);n&&this.applyMaterial(n,t)}}applyMaterial(e,t){var n=t=>{if(t.subMeshes&&t.subMeshes.length>0&&t.material&&t.material instanceof BABYLON.MultiMaterial)for(let n=0;n<t.subMeshes.length;n++){let r=t.subMeshes[n];this.applyMaterialToSubMesh(e,t,r)}else t.material=e;var r=t.getChildMeshes(!0);r&&r.forEach(e=>{n(e)})};t&&n(t)}applyMaterialToSubMeshByName(e,t,n){var r=this._scene.getMaterialByName(e);r&&this.applyMaterialToSubMesh(r,t,n)}applyMaterialToSubMesh(e,t,n){const r=n.materialIndex,i=t||n.getMesh();i.material instanceof BABYLON.MultiMaterial&&r>=0&&r<i.material.subMaterials.length&&(i.material.subMaterials[r]=e)}getSubMeshMaterial(e,t){const n=t.materialIndex,r=e||t.getMesh();return r.material instanceof BABYLON.MultiMaterial&&n>=0&&n<r.material.subMaterials.length?r.material.subMaterials[n]:null}async prefetchTexturesFormMeshAsync(e){e.material&&await this.prefetchTexturesForMaterialAsync(e.material);var t=e.getChildMeshes(!0);for(let n=0;n<t.length;n++){let e=t[n];e.material&&await this.prefetchTexturesForMaterialAsync(e.material)}}async prefetchTexturesForMaterialAsync(t){if(t){var n=this.getTexturesForMaterial(t);for(let t=0;t<n.length;t++)await e.whenTextureIsReadyAsync(n[t])}}checkDelayState(e){e instanceof BABYLON.Mesh&&e._checkDelayState(),e.getChildMeshes(!0).forEach(e=>this.checkDelayState(e))}createEnvelopeMesh(e){let t=.01;const n=e.getHierarchyBoundingVectors();if(n){const e=n.min,r=n.max;t=.005*new BABYLON.BoundingInfo(e,r).boundingSphere.radius}const r=this.cloneMesh(e.id,!0,!0);return r&&r instanceof BABYLON.Mesh&&this.expandMesh(r,t),r}expandMesh(e,t){const n=new Dn;if(e&&e instanceof BABYLON.Mesh){n.expandMesh(e,t);const r=e.getChildMeshes();for(const e of r)e instanceof BABYLON.Mesh&&n.expandMesh(e,t)}}cloneMesh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null;if(this._scene){const i=this._scene.getMeshById(e);if(i){const e=this.getNextIncrementalName(i.name);if(r=i.clone(e,i.parent),r){r.id=Zakeke.generateUUID(),t&&this.duplicateGeometry(i,r,n);const e=r.getChildMeshes();for(const r of e){const e=this._scene.getMeshById(r.id);r.id=Zakeke.generateUUID();const i=r.parent?r.parent.name:null;if(i){const e=r.name.indexOf(i+".")+i.length+1;r.name=r.name.substr(e)}e&&t&&this.duplicateGeometry(e,r,n)}}}}return r}duplicateGeometry(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof BABYLON.Mesh&&t instanceof BABYLON.Mesh){const r=BABYLON.VertexData.ExtractFromMesh(e,!0,!0);return new BABYLON.Geometry(Zakeke.generateUUID(),t.getScene(),r,n,t)}return null}getSceneMaterialMetadata(e){return this._scene&&this._scene.metadata&&this._scene.metadata.materialsMetadata&&this._scene.metadata.materialsMetadata.hasOwnProperty(e)?this._scene.metadata.materialsMetadata[e]:null}getOrCreateSceneMaterialMetadata(e){let t=this.getSceneMaterialMetadata(e);return t||(t={},this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.materialsMetadata||(this._scene.metadata.materialsMetadata={}),this._scene.metadata.materialsMetadata[e]=t),t}removeSceneMaterialMetadata(e){this._scene.metadata&&this._scene.metadata.materialsMetadata&&this._scene.metadata.materialsMetadata.hasOwnProperty(e)&&delete this._scene.metadata.materialsMetadata[e]}offloadAllUnusedMaterials(){this.getAllUnusedMaterials().forEach(e=>this.offloadMaterial(e.id))}offloadMaterial(e){const t=this._scene.getMaterialByID(e);t&&"default material"!==t.id&&0===this.getMeshesUsingMaterial(e).length&&(Logger.info("Offloading material: "+t.id+" - "+t.name),this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.offloadedMaterials||(this._scene.metadata.offloadedMaterials={}),this._scene.metadata.offloadedMaterials[e]=this.getOffloadedMaterialInfo(t),Logger.info("Disposing material: "+e),t.dispose(!1,!0))}getOffloadedMaterialInfo(e){return{name:e.name,data:e.serialize()}}loadAllOffloadedMaterials(e){let t=[];return this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&(t=this.loadOffloadedMaterials(e,this._scene.metadata.offloadedMaterials)),t}loadOffloadedMaterialsByIDs(e,t){let n=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const r={};for(let e=0;e<t.length;e++)this._scene.metadata.offloadedMaterials.hasOwnProperty(t[e])&&(r[t[e]]={name:this._scene.metadata.offloadedMaterials[t[e]].name,data:this._scene.metadata.offloadedMaterials[t[e]].data});n=this.loadOffloadedMaterials(e,r)}return n}loadOffloadedMaterial(e,t){if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const n={};if(this._scene.metadata.offloadedMaterials.hasOwnProperty(t)){n[t]={name:this._scene.metadata.offloadedMaterials[t].name,data:this._scene.metadata.offloadedMaterials[t].data};const r=this.loadOffloadedMaterials(e,n);if(r.length>0)return r[0]}}return null}loadOffloadedMaterials(e,t){const n=[];for(const r in t){const i=t[r],s=this.loadOffloadedMaterialInternal(r,i.name,e,i.data);s&&n.push(s)}return n}loadOffloadedMaterialInternal(e,t,n,r){const i=this._scene.getMaterialByID(e);if(i)return i;const s=t?" - ".concat(t):"";return Logger.info("Loading offloaded material: "+e+s),BABYLON.Material.Parse(r,this._scene,n)}async loadAllOffloadedMaterialsAsync(e){let t=[];return this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&(t=await this.loadOffloadedMaterialsAsync(e,this._scene.metadata.offloadedMaterials)),t}async loadOffloadedMaterialsByIDsAsync(e,t){let n=[];if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const r={};for(let e=0;e<t.length;e++)this._scene.metadata.offloadedMaterials.hasOwnProperty(t[e])&&(r[t[e]]={name:this._scene.metadata.offloadedMaterials[t[e]].name,data:this._scene.metadata.offloadedMaterials[t[e]].data});n=await this.loadOffloadedMaterialsAsync(e,r)}return n}async loadOffloadedMaterialAsync(e,t){if(this._scene&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){const n={};if(this._scene.metadata.offloadedMaterials.hasOwnProperty(t)){n[t]={name:this._scene.metadata.offloadedMaterials[t].name,data:this._scene.metadata.offloadedMaterials[t].data};const r=await this.loadOffloadedMaterialsAsync(e,n);if(r.length>0)return r[0]}}return null}async loadOffloadedMaterialsAsync(e,t){const n=[],r=[];for(const i in t){const n=t[i];r.push(this.loadOffloadedMaterialInternalAsync(i,n.name,e,n.data))}return(await Promise.all(r)).forEach(e=>{e&&n.push(e)}),n}async loadOffloadedMaterialInternalAsync(t,n,r,i){const s=this._scene.getMaterialByID(t);if(s)return s;const a=n?" - ".concat(n):"";Logger.info("Loading offloaded material: "+t+a);const o=BABYLON.Material.Parse(i,this._scene,r);return o?(Logger.info("Waiting for material ready: "+t+a),await e.whenAllMaterialTexturesAreReady(o),Logger.info("Material ready: "+t+a)):Logger.info("No material was created from offloaded material: "+t+a),o}loadTextureFiles(e,t){if(e)for(let n=0;n<t.length;n++){const r=t[n];let i=r;/^(?:\/|[a-z]+:\/\/)/.test(r)||(i=e+r);const s=i.lastIndexOf("."),a=s>-1?i.substring(s).toLowerCase():"";".dds"===a||".env"===a||".hdr"===a?BABYLON.Tools.LoadFile(i,()=>{}):(".png"===a||".jpg"===a)&&BABYLON.Tools.LoadImage(i,e=>{},function(){},null)}}async getOrLoadMaterialAsync(e,t){let n=this._scene.getMaterialByID(e);return!n&&this._scene.metadata&&(this._scene.metadata.offloadedMaterials&&this._scene.metadata.offloadedMaterials.hasOwnProperty(e)?n=await this.loadOffloadedMaterialAsync(t,e):this._scene.metadata.delayedMaterials&&this._scene.metadata.delayedMaterials.hasOwnProperty(e)&&(n=await this.loadDelayedMaterialAsync(t,e))),n}getOrCreateDummyMaterial(){let e=this._scene.getMaterialByID(this._dummyMaterialID);return e||(e=new BABYLON.StandardMaterial("Dummy Material",this._scene),e.id=this._dummyMaterialID,e.metadata={isRealMaterial:!1}),e}isDummyMaterial(e){return e.id===this._dummyMaterialID}meshHasDummyMaterial(e,t){var n;if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(let r=0;r<e.subMeshes.length;r++){const t=e.subMeshes[r].materialIndex;if(e.material.subMaterials[t]&&(null==(n=e.material.subMaterials[t])?void 0:n.id)===this._dummyMaterialID)return!0}else if(e.material&&e.material.id===this._dummyMaterialID)return!0;if(t){const t=e.getChildMeshes(!0);for(const e of t)if(this.meshHasDummyMaterial(e,!0))return!0}return!1}getMeshDelayedMaterialIDs(e){var t;const n=[];if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(let r=0;r<e.subMeshes.length;r++){const i=e.subMeshes[r].materialIndex;if(e.material.subMaterials[i]&&(null==(t=e.material.subMaterials[i])?void 0:t.id)===this._dummyMaterialID){const t="".concat(e.id,"_").concat(i);if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(t)){const e=this._scene.metadata.originalMeshMaterials[t];this._scene.metadata.delayedMaterials.hasOwnProperty(e)&&-1===n.indexOf(e)&&n.push(e)}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const t=this._scene.metadata.originalMeshMaterials[e.id];this._scene.metadata.delayedMaterials.hasOwnProperty(t)&&-1===n.indexOf(t)&&n.push(t)}return e.getChildMeshes().forEach(e=>Array.prototype.push.apply(n,this.getMeshDelayedMaterialIDs(e))),n}getMeshOffloadedMaterialIDs(e){var t;const n=[];if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(let r=0;r<e.subMeshes.length;r++){const i=e.subMeshes[r].materialIndex;if(e.material.subMaterials[i]&&(null==(t=e.material.subMaterials[i])?void 0:t.id)===this._dummyMaterialID){const t="".concat(e.id,"_").concat(i);if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(t)){const e=this._scene.metadata.originalMeshMaterials[t];this._scene.metadata.offloadedMaterials.hasOwnProperty(e)&&-1===n.indexOf(e)&&n.push(e)}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const t=this._scene.metadata.originalMeshMaterials[e.id];this._scene.metadata.offloadedMaterials.hasOwnProperty(t)&&-1===n.indexOf(t)&&n.push(t)}return e.getChildMeshes().forEach(e=>Array.prototype.push.apply(n,this.getMeshOffloadedMaterialIDs(e))),n}setDummyMaterialToInvisibleMeshes(){this.getInvisibleMeshes().forEach(e=>{this.setMeshDummyMaterial(e,!1)})}setMeshDummyMaterial(e,t){this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.originalMeshMaterials||(this._scene.metadata.originalMeshMaterials={});const n=this.getOrCreateDummyMaterial();if(e.material)if(e.subMeshes&&e.subMeshes.length>0&&e.material instanceof BABYLON.MultiMaterial)for(let r=0;r<e.subMeshes.length;r++){const t=e.subMeshes[r].materialIndex,i=e.material.subMaterials[t];if(i&&!this.isDummyMaterial(i)){const r="".concat(e.id,"_").concat(t);this._scene.metadata.originalMeshMaterials[r]=i.id,e.material.subMaterials[t]=n}}else e.material&&!this.isDummyMaterial(e.material)&&(this._scene.metadata.originalMeshMaterials[e.id]=e.material.id,e.material=n);t&&e.getChildMeshes().forEach(e=>this.setMeshDummyMaterial(e,!0))}unsetAllDummyMaterials(){for(let e=0;e<this._scene.meshes.length;e++)this.unsetMeshDummyMaterial(this._scene.meshes[e],!1)}async unsetAllDummyMaterialsAsync(e){for(let t=0;t<this._scene.meshes.length;t++)await this.unsetMeshDummyMaterialAsync(this._scene.meshes[t],e,!1)}unsetMeshDummyMaterial(e,t){var n;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials){if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(let t=0;t<e.subMeshes.length;t++){const r=e.subMeshes[t].materialIndex;if(e.material.subMaterials[r]&&(null==(n=e.material.subMaterials[r])?void 0:n.id)===this._dummyMaterialID){const t="".concat(e.id,"_").concat(r);if(this._scene.metadata.originalMeshMaterials.hasOwnProperty(t)){const n=this._scene.metadata.originalMeshMaterials[t],i=this._scene.getMaterialByID(n);i&&(e.material.subMaterials[r]=i,delete this._scene.metadata.originalMeshMaterials[t])}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const t=this._scene.metadata.originalMeshMaterials[e.id],n=this._scene.getMaterialByID(t);n&&(e.material=n,delete this._scene.metadata.originalMeshMaterials[e.id])}t&&e.getChildMeshes().forEach(e=>this.unsetMeshDummyMaterial(e,!0))}}async unsetMeshDummyMaterialAsync(e,t,n){var r;if(this._scene.metadata&&this._scene.metadata.originalMeshMaterials){if(e.subMeshes&&e.subMeshes.length>0&&e.material&&e.material instanceof BABYLON.MultiMaterial)for(let n=0;n<e.subMeshes.length;n++){const i=e.subMeshes[n].materialIndex;if(e.material.subMaterials[i]&&(null==(r=e.material.subMaterials[i])?void 0:r.id)===this._dummyMaterialID){const n="".concat(e.id,"_").concat(i);if(this._scene.metadata.originalMeshMaterials.hasOwnProperty(n)){const r=this._scene.metadata.originalMeshMaterials[n],s=await this.getOrLoadMaterialAsync(r,t);e.material.subMaterials[i]=s,delete this._scene.metadata.originalMeshMaterials[n]}}}else if(e.material&&e.material.id===this._dummyMaterialID&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials.hasOwnProperty(e.id)){const n=this._scene.metadata.originalMeshMaterials[e.id],r=await this.getOrLoadMaterialAsync(n,t);e.material=r,delete this._scene.metadata.originalMeshMaterials[e.id]}if(n){const n=e.getChildMeshes();for(const e of n)await this.unsetMeshDummyMaterialAsync(e,t,!0)}}}async reloadAllLoadingErrorTexturesAsync(e){for(const t of this._scene.textures)await this.reloadLoadingErrorTextureAsync(e,t)}async reloadMaterialLoadingErrorTexturesAsync(e,t){for(const n of t.getActiveTextures())await this.reloadLoadingErrorTextureAsync(e,n)}reloadLoadingErrorTextureAsync(e,t){if(t instanceof BABYLON.Texture&&t.url){const r=t.getInternalTexture();if(t.loadingError||r&&r.loadingError){const r=t.url,i=/^(?:\/|[a-z]+:\/\/)/.test(t.url);var n=t.url;return i||(n=e+t.url),new Promise((e,i)=>{t.updateURL(n,null,()=>{t.url=r,e()},void 0,()=>{t.url=r,i()})})}}return Promise.resolve()}isTextureLoadingError(e){if(e.loadingError)return!0;const t=e.getInternalTexture();return null!==t&&t.loadingError}materialHasLoadingErrorTextues(e){return e.getActiveTextures().some(e=>this.isTextureLoadingError(e))}getMaterialDynamicTextures(e){return e.getActiveTextures().filter(e=>e instanceof BABYLON.ProceduralTexture||e instanceof BABYLON.Texture&&e.url&&-1!==e.url.indexOf("blob:"))}exportTextureToBase64Async(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Promise.resolve().then(async()=>{const r=await this.getPixelsFromTexture(e);if(!r)return null;const i=e.getSize();if(e.mimeType)switch(e.mimeType){case"image/jpeg":t="image/jpeg";break;case"image/png":t="image/png"}return this.createBase64FromCanvasAsync(r,i.width,i.height,t,n)})}createBase64FromCanvasAsync(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(async(s,a)=>{const o=BABYLON.Constants.TEXTURETYPE_UNSIGNED_INT,l=this._scene,u=l.getEngine(),c=u.createRawTexture(e,t,n,BABYLON.Constants.TEXTUREFORMAT_RGBA,!1,i,BABYLON.Texture.NEAREST_SAMPLINGMODE,null,o);await BABYLON.TextureTools.ApplyPostProcess("pass",c,l,o,BABYLON.Constants.TEXTURE_NEAREST_SAMPLINGMODE,BABYLON.Constants.TEXTUREFORMAT_RGBA);const h=await u._readTexturePixels(c,t,n);s(await BABYLON.Tools.DumpDataAsync(t,n,h,r,void 0,!0,!1))})}getPixelsFromTexture(e){return e.textureType,BABYLON.Constants.TEXTURETYPE_UNSIGNED_INT,e.readPixels()}comparePBRMaterials(e,t){(e.albedoColor&&!t.albedoColor||!e.albedoColor&&t.albedoColor||e.albedoColor&&t.albedoColor&&!e.albedoColor.equals(t.albedoColor))&&console.log("albedoColor"),e.allowShaderHotSwapping!==t.allowShaderHotSwapping&&console.log("allowShaderHotSwapping"),e.alphaCutOff!==t.alphaCutOff&&console.log("alphaCutOff"),(e.ambientColor&&!t.ambientColor||!e.ambientColor&&t.ambientColor||e.ambientColor&&t.ambientColor&&!e.ambientColor.equals(t.ambientColor))&&console.log("ambientColor"),e.ambientTextureStrength!==t.ambientTextureStrength&&console.log("ambientTextureStrength"),this.compareAnisotropy(e.anisotropy,t.anisotropy),this.compareBRDF(e.brdf,t.brdf),this.compareClearCoat(e.clearCoat,t.clearCoat),e.depthFunction!==t.depthFunction&&console.log("depthFunction"),this.compareDetailMap(e.detailMap,t.detailMap),e.directIntensity!==t.directIntensity&&console.log("directIntensity"),e.disableBumpMap!==t.disableBumpMap&&console.log("disableBumpMap"),e.disableColorWrite!==t.disableColorWrite&&console.log("disableColorWrite"),e.disableDepthWrite!==t.disableDepthWrite&&console.log("disableDepthWrite"),e.disableLighting!==t.disableLighting&&console.log("disableLighting"),(e.emissiveColor&&!t.emissiveColor||!e.emissiveColor&&t.emissiveColor||e.emissiveColor&&t.emissiveColor&&!e.emissiveColor.equals(t.emissiveColor))&&console.log("emissiveColor"),e.emissiveIntensity!==t.emissiveIntensity&&console.log("emissiveIntensity"),e.enableSpecularAntiAliasing!==t.enableSpecularAntiAliasing&&console.log("enableSpecularAntiAliasing"),e.environmentIntensity!==t.environmentIntensity&&console.log("environmentIntensity"),e.forceAlphaTest!==t.forceAlphaTest&&console.log("forceAlphaTest"),e.forceDepthWrite!==t.forceDepthWrite&&console.log("forceDepthWrite"),e.forceIrradianceInFragment!==t.forceIrradianceInFragment&&console.log("forceIrradianceInFragment"),e.forceNormalForward!==t.forceNormalForward&&console.log("forceNormalForward"),e.invertNormalMapX!==t.invertNormalMapX&&console.log("invertNormalMapX"),e.invertNormalMapY!==t.invertNormalMapY&&console.log("invertNormalMapY"),e.maxSimultaneousLights!==t.maxSimultaneousLights&&console.log("maxSimultaneousLights"),e.metallic!==t.metallic&&console.log("metallic"),e.metallicF0Factor!==t.metallicF0Factor&&console.log("metallicF0Factor"),(e.metallicReflectanceColor&&!t.metallicReflectanceColor||!e.metallicReflectanceColor&&t.metallicReflectanceColor||e.metallicReflectanceColor&&t.metallicReflectanceColor&&!e.metallicReflectanceColor.equals(t.metallicReflectanceColor))&&console.log("metallicReflectanceColor"),e.microSurface!==t.microSurface&&console.log("microSurface"),e.parallaxScaleBias!==t.parallaxScaleBias&&console.log("parallaxScaleBias"),e.pointSize!==t.pointSize&&console.log("pointSize"),this.comparePrePassConfiguration(e.prePassConfiguration,t.prePassConfiguration),(e.reflectionColor&&!t.reflectionColor||!e.reflectionColor&&t.reflectionColor||e.reflectionColor&&t.reflectionColor&&!e.reflectionColor.equals(t.reflectionColor))&&console.log("reflectionColor"),(e.reflectivityColor&&!t.reflectivityColor||!e.reflectivityColor&&t.reflectivityColor||e.reflectivityColor&&t.reflectivityColor&&!e.reflectivityColor.equals(t.reflectivityColor))&&console.log("reflectivityColor"),e.roughness!==t.roughness&&console.log("roughness"),e.separateCullingPass!==t.separateCullingPass&&console.log("separateCullingPass"),this.compareSheen(e.sheen,t.sheen),e.sideOrientation!==t.sideOrientation&&console.log("sideOrientation"),e.specularIntensity!==t.specularIntensity&&console.log("specularIntensity"),this.compareSubSurface(e.subSurface,t.subSurface),e.twoSidedLighting!==t.twoSidedLighting&&console.log("twoSidedLighting"),e.unlit!==t.unlit&&console.log("unlit"),e.useAlphaFresnel!==t.useAlphaFresnel&&console.log("useAlphaFresnel"),e.useAlphaFromAlbedoTexture!==t.useAlphaFromAlbedoTexture&&console.log("useAlphaFromAlbedoTexture"),e.useAmbientInGrayScale!==t.useAmbientInGrayScale&&console.log("useAmbientInGrayScale"),e.useAmbientOcclusionFromMetallicTextureRed!==t.useAmbientOcclusionFromMetallicTextureRed&&console.log("useAmbientOcclusionFromMetallicTextureRed"),e.useAutoMicroSurfaceFromReflectivityMap!==t.useAutoMicroSurfaceFromReflectivityMap&&console.log("useAutoMicroSurfaceFromReflectivityMap"),e.useHorizonOcclusion!==t.useHorizonOcclusion&&console.log("useHorizonOcclusion"),e.useLightmapAsShadowmap!==t.useLightmapAsShadowmap&&console.log("useLightmapAsShadowmap"),e.useLinearAlphaFresnel!==t.useLinearAlphaFresnel&&console.log("useLinearAlphaFresnel"),e.useMetallnessFromMetallicTextureBlue!==t.useMetallnessFromMetallicTextureBlue&&console.log("useMetallnessFromMetallicTextureBlue"),e.useMicroSurfaceFromReflectivityMapAlpha!==t.useMicroSurfaceFromReflectivityMapAlpha&&console.log("useMicroSurfaceFromReflectivityMapAlpha"),e.useObjectSpaceNormalMap!==t.useObjectSpaceNormalMap&&console.log("useObjectSpaceNormalMap"),e.useOnlyMetallicFromMetallicReflectanceTexture!==t.useOnlyMetallicFromMetallicReflectanceTexture&&console.log("useOnlyMetallicFromMetallicReflectanceTexture"),e.useParallax!==t.useParallax&&console.log("useParallax"),e.useParallaxOcclusion!==t.useParallaxOcclusion&&console.log("useParallaxOcclusion"),e.useRadianceOcclusion!==t.useRadianceOcclusion&&console.log("useRadianceOcclusion"),e.useRadianceOverAlpha!==t.useRadianceOverAlpha&&console.log("useRadianceOverAlpha"),e.useRoughnessFromMetallicTextureAlpha!==t.useRoughnessFromMetallicTextureAlpha&&console.log("useRoughnessFromMetallicTextureAlpha"),e.useRoughnessFromMetallicTextureGreen!==t.useRoughnessFromMetallicTextureGreen&&console.log("useRoughnessFromMetallicTextureGreen"),e.useSpecularOverAlpha!==t.useSpecularOverAlpha&&console.log("useSpecularOverAlpha"),e.zOffset!==t.zOffset&&console.log("zOffset"),e.zOffsetUnits!==t.zOffsetUnits&&console.log("zOffsetUnits"),e.alpha!==t.alpha&&console.log("alpha"),e.alphaMode!==t.alphaMode&&console.log("alphaMode"),e.backFaceCulling!==t.backFaceCulling&&console.log("backFaceCulling"),this.compareCameraCurve("",e.cameraColorCurves,t.cameraColorCurves),e.cameraColorCurvesEnabled!==t.cameraColorCurvesEnabled&&console.log("cameraColorCurvesEnabled"),e.cameraColorGradingEnabled!==t.cameraColorGradingEnabled&&console.log("cameraColorGradingEnabled"),e.cameraContrast!==t.cameraContrast&&console.log("cameraContrast"),e.cameraExposure!==t.cameraExposure&&console.log("cameraExposure"),e.cameraToneMappingEnabled!==t.cameraToneMappingEnabled&&console.log("cameraToneMappingEnabled"),e.canRenderToMRT!==t.canRenderToMRT&&console.log("canRenderToMRT"),e.cullBackFaces!==t.cullBackFaces&&console.log("cullBackFaces"),e.fillMode!==t.fillMode&&console.log("fillMode"),e.fogEnabled!==t.fogEnabled&&console.log("fogEnabled"),e.hasRenderTargetTextures!==t.hasRenderTargetTextures&&console.log("hasRenderTargetTextures"),this.compareImageProcessingConfiguration(e.imageProcessingConfiguration,t.imageProcessingConfiguration),e.indexOfRefraction!==t.indexOfRefraction&&console.log("indexOfRefraction"),e.invertRefractionY!==t.invertRefractionY&&console.log("invertRefractionY"),e.isFrozen!==t.isFrozen&&console.log("isFrozen"),e.isPrePassCapable!==t.isPrePassCapable&&console.log("isPrePassCapable"),e.linkRefractionWithTransparency!==t.linkRefractionWithTransparency&&console.log("linkRefractionWithTransparency"),e.needDepthPrePass!==t.needDepthPrePass&&console.log("needDepthPrePass"),e.realTimeFiltering!==t.realTimeFiltering&&console.log("realTimeFiltering"),e.realTimeFilteringQuality!==t.realTimeFilteringQuality&&console.log("realTimeFilteringQuality"),e.transparencyMode!==t.transparencyMode&&console.log("transparencyMode"),e.useGLTFLightFalloff!==t.useGLTFLightFalloff&&console.log("useGLTFLightFalloff"),e.useLogarithmicDepth!==t.useLogarithmicDepth&&console.log("useLogarithmicDepth"),e.usePhysicalLightFalloff!==t.usePhysicalLightFalloff&&console.log("usePhysicalLightFalloff"),this.compareTexture("albedo",e.albedoTexture,t.albedoTexture),this.compareTexture("emissive",e.emissiveTexture,t.emissiveTexture)}compareAnisotropy(e,t){const n="anisotropy";(e.direction&&!t.direction||!e.direction&&t.direction||e.direction&&t.direction&&!e.direction.equals(t.direction))&&console.log(n+" - direction"),e.intensity!==t.intensity&&console.log(n+" - intensity"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled")}compareBRDF(e,t){const n="brdf";e.useEnergyConservation!==t.useEnergyConservation&&console.log(n+" - useEnergyConservation"),e.useSmithVisibilityHeightCorrelated!==t.useSmithVisibilityHeightCorrelated&&console.log(n+" - useSmithVisibilityHeightCorrelated"),e.useSpecularGlossinessInputEnergyConservation!==t.useSpecularGlossinessInputEnergyConservation&&console.log(n+" - useSpecularGlossinessInputEnergyConservation"),e.useSphericalHarmonics!==t.useSphericalHarmonics&&console.log(n+" - useSphericalHarmonics")}compareClearCoat(e,t){const n="clearCoat";e.indexOfRefraction!==t.indexOfRefraction&&console.log(n+" - indexOfRefraction"),e.intensity!==t.intensity&&console.log(n+" - intensity"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.isTintEnabled!==t.isTintEnabled&&console.log(n+" - isTintEnabled"),e.roughness!==t.roughness&&console.log(n+" - roughness"),(e.tintColor&&!t.tintColor||!e.tintColor&&t.tintColor||e.tintColor&&t.tintColor&&!e.tintColor.equals(t.tintColor))&&console.log(n+" - tintColor"),e.tintColorAtDistance!==t.tintColorAtDistance&&console.log(n+" - tintColorAtDistance"),e.tintThickness!==t.tintThickness&&console.log(n+" - tintThickness"),e.useRoughnessFromMainTexture!=t.useRoughnessFromMainTexture&&console.log(n+" - useRoughnessFromMainTexture")}compareDetailMap(e,t){const n="detailMap";e.bumpLevel!==t.bumpLevel&&console.log(n+" - bumpLevel"),e.diffuseBlendLevel!==t.diffuseBlendLevel&&console.log(n+" - diffuseBlendLevel"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.normalBlendMethod!==t.normalBlendMethod&&console.log(n+" - normalBlendMethod"),e.roughnessBlendLevel!==t.roughnessBlendLevel&&console.log(n+" - roughnessBlendLevel")}comparePrePassConfiguration(e,t){const n="PrePassConfiguration";(e.currentViewProjection&&!t.currentViewProjection||!e.currentViewProjection&&t.currentViewProjection||e.currentViewProjection&&t.currentViewProjection&&!e.currentViewProjection.equals(t.currentViewProjection))&&console.log(n+" - currentViewProjection"),(e.previousViewProjection&&!t.previousViewProjection||!e.previousViewProjection&&t.previousViewProjection||e.previousViewProjection&&t.previousViewProjection&&!e.previousViewProjection.equals(t.previousViewProjection))&&console.log(n+" - previousViewProjection")}compareSheen(e,t){const n="Sheen";e.albedoScaling!==t.albedoScaling&&console.log(n+" - albedoScaling"),(e.color&&!t.color||!e.color&&t.color||e.color&&t.color&&!e.color.equals(t.color))&&console.log(n+" - color"),e.intensity!==t.intensity&&console.log(n+" - intensity"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.linkSheenWithAlbedo!==t.linkSheenWithAlbedo&&console.log(n+" - linkSheenWithAlbedo"),e.roughness!==t.roughness&&console.log(n+" - roughness"),e.useRoughnessFromMainTexture!==t.useRoughnessFromMainTexture&&console.log(n+" - useRoughnessFromMainTexture")}compareSubSurface(e,t){const n="SubSurface";(e.diffusionDistance&&!t.diffusionDistance||!e.diffusionDistance&&t.diffusionDistance||e.diffusionDistance&&t.diffusionDistance&&!e.diffusionDistance.equals(t.diffusionDistance))&&console.log(n+" - diffusionDistance"),e.indexOfRefraction!==t.indexOfRefraction&&console.log(n+" - indexOfRefraction"),e.invertRefractionY!==t.invertRefractionY&&console.log(n+" - invertRefractionY"),e.isRefractionEnabled!==t.isRefractionEnabled&&console.log(n+" - isRefractionEnabled"),e.isScatteringEnabled!==t.isScatteringEnabled&&console.log(n+" - isScatteringEnabled"),e.isTranslucencyEnabled!==t.isTranslucencyEnabled&&console.log(n+" - isTranslucencyEnabled"),e.linkRefractionWithTransparency!==t.linkRefractionWithTransparency&&console.log(n+" - linkRefractionWithTransparency"),e.maximumThickness!==t.maximumThickness&&console.log(n+" - maximumThickness"),e.minimumThickness!==t.minimumThickness&&console.log(n+" - minimumThickness"),e.refractionIntensity!==t.refractionIntensity&&console.log(n+" - refractionIntensity"),(e.tintColor&&!t.tintColor||!e.tintColor&&t.tintColor||e.tintColor&&t.tintColor&&!e.tintColor.equals(t.tintColor))&&console.log(n+" - tintColor"),e.tintColorAtDistance!==t.tintColorAtDistance&&console.log(n+" - tintColorAtDistance"),e.translucencyIntensity!==t.translucencyIntensity&&console.log(n+" - translucencyIntensity"),e.useAlbedoToTintRefraction!==t.useAlbedoToTintRefraction&&console.log(n+" - useAlbedoToTintRefraction"),e.useAlbedoToTintTranslucency!==t.useAlbedoToTintTranslucency&&console.log(n+" - useAlbedoToTintTranslucency"),e.useGltfStyleTextures!==t.useGltfStyleTextures&&console.log(n+" - useGltfStyleTextures"),e.useMaskFromThicknessTexture!==t.useMaskFromThicknessTexture&&console.log(n+" - useMaskFromThicknessTexture"),e.useThicknessAsDepth!==t.useThicknessAsDepth&&console.log(n+" - useThicknessAsDepth")}compareCameraCurve(e,t,n){if((null===t&&null!==n||null!==t&&null===n)&&console.log("cameraColorCurves"),t&&n){const r=e?e+" - cameraColorCurves":"cameraColorCurves";t.globalDensity!==n.globalDensity&&console.log(r+" - globalDensity"),t.globalExposure!==n.globalExposure&&console.log(r+"- globalExposure"),t.globalHue!==n.globalHue&&console.log(r+" - globalHue"),t.globalSaturation!==n.globalSaturation&&console.log(r+" - globalSaturation"),t.highlightsDensity!==n.highlightsDensity&&console.log(r+" - highlightsDensity"),t.highlightsExposure!==n.highlightsExposure&&console.log(r+" - highlightsExposure"),t.highlightsHue!==n.highlightsHue&&console.log(r+" - highlightsHue"),t.highlightsSaturation!==n.highlightsSaturation&&console.log(r+" - highlightsSaturation"),t.midtonesDensity!==n.midtonesDensity&&console.log(r+" - midtonesDensity"),t.midtonesExposure!==n.midtonesExposure&&console.log(r+" - midtonesExposure"),t.midtonesHue!==n.midtonesHue&&console.log(r+" - midtonesHue"),t.midtonesSaturation!==n.midtonesSaturation&&console.log(r+" - midtonesSaturation"),t.shadowsDensity!==n.shadowsDensity&&console.log(r+" - shadowsDensity"),t.shadowsExposure!==n.shadowsExposure&&console.log(r+" - shadowsExposure"),t.shadowsHue!==n.shadowsHue&&console.log(r+" - shadowsHue"),t.shadowsSaturation!==n.shadowsSaturation&&console.log(r+" - shadowsSaturation")}}compareImageProcessingConfiguration(e,t){const n="imageProcessingConfiguration";this.compareCameraCurve(n,e.colorCurves,t.colorCurves),e.vignetteCameraFov!==t.vignetteCameraFov&&console.log(n+" - vignetteCameraFov"),e.vignetteCentreX!==t.vignetteCentreX&&console.log(n+" - vignetteCentreX"),e.vignetteCentreY!==t.vignetteCentreY&&console.log(n+" - vignetteCentreY"),(e.vignetteColor&&!t.vignetteColor||!e.vignetteColor&&t.vignetteColor||e.vignetteColor&&t.vignetteColor&&!e.vignetteColor.equals(t.vignetteColor))&&console.log(n+" - vignetteColor"),e.vignetteStretch!==t.vignetteStretch&&console.log(n+" - vignetteStretch"),e.vignetteWeight!==t.vignetteWeight&&console.log(n+" - vignetteWeight"),e.applyByPostProcess!==t.applyByPostProcess&&console.log(n+" - applyByPostProcess"),e.colorCurvesEnabled!==t.colorCurvesEnabled&&console.log(n+" - colorCurvesEnabled"),e.colorGradingBGR!==t.colorGradingBGR&&console.log(n+" - colorGradingBGR"),e.colorGradingEnabled!==t.colorGradingEnabled&&console.log(n+" - colorGradingEnabled"),e.colorGradingWithGreenDepth!==t.colorGradingWithGreenDepth&&console.log(n+" - colorGradingWithGreenDepth"),e.contrast!==t.contrast&&console.log(n+" - contrast"),e.exposure!==t.exposure&&console.log(n+" - exposure"),e.isEnabled!==t.isEnabled&&console.log(n+" - isEnabled"),e.toneMappingEnabled!==t.toneMappingEnabled&&console.log(n+" - toneMappingEnabled"),e.toneMappingType!==t.toneMappingType&&console.log(n+" - toneMappingType"),e.vignetteBlendMode!==t.vignetteBlendMode&&console.log(n+" - vignetteBlendMode"),e.vignetteEnabled!==t.vignetteEnabled&&console.log(n+" - vignetteEnabled")}compareTexture(e,t,n){t&&!n||!t&&n||t instanceof BABYLON.Texture&&!(n instanceof BABYLON.Texture)||n instanceof BABYLON.Texture&&!(t instanceof BABYLON.Texture)?console.log(e):t&&n&&(t.anisotropicFilteringLevel!==n.anisotropicFilteringLevel&&console.log(e+" - anisotropicFilteringLevel"),t instanceof BABYLON.Texture&&n instanceof BABYLON.Texture&&(t.homogeneousRotationInUVTransform!==n.homogeneousRotationInUVTransform&&console.log(e+" - homogeneousRotationInUVTransform"),t.uAng!==n.uAng&&console.log(e+" - uAng"),t.uOffset!==n.uOffset&&console.log(e+" - uOffset"),t.uRotationCenter!==n.uRotationCenter&&console.log(e+" - uRotationCenterSearch"),t.uScale!==n.uScale&&console.log(e+" - uScale"),t.vAng!==n.vAng&&console.log(e+" - vAng"),t.vOffset!==n.vOffset&&console.log(e+" - vOffset"),t.vRotationCenter!==n.vRotationCenter&&console.log(e+" - vRotationCenterSearch"),t.vScale!==n.vScale&&console.log(e+" - vScale"),t.wAng!==n.wAng&&console.log(e+" - wAng"),t.wRotationCenter!==n.wRotationCenter&&console.log(e+" - wRotationCenterSearch"),t.invertY!==n.invertY&&console.log(e+" - invertY"),t.mimeType!==n.mimeType&&console.log(e+" - mimeType")),t.invertZ!==n.invertZ&&console.log(e+" - invertZ"),t.isRenderTarget!==n.isRenderTarget&&console.log(e+" - isRenderTarget"),t.level!==n.level&&console.log(e+" - level"),t.wrapR!==n.wrapR&&console.log(e+" - wrapR"),t.canRescale!==n.canRescale&&console.log(e+" - canRescale"),t.coordinatesIndex!==n.coordinatesIndex&&console.log(e+" - coordinatesIndex"),t.coordinatesMode!==n.coordinatesMode&&console.log(e+" - coordinatesMode"),t.gammaSpace!==n.gammaSpace&&console.log(e+" - gammaSpace"),t.getAlphaFromRGB!==n.getAlphaFromRGB&&console.log(e+" - getAlphaFromRGB"),t.hasAlpha!==n.hasAlpha&&console.log(e+"- hasAlpha"),t.is2DArray!==n.is2DArray&&console.log(e+" - is2DArray"),t.is3D!==n.is3D&&console.log(e+" - is3D"),t.isBlocking!==n.isBlocking&&console.log(e+" - isBlocking"),t.isCube!==n.isCube&&console.log(e+" - isCube"),t.isRGBD!==n.isRGBD&&console.log(e+" - isRGBD"),t.linearSpecularLOD!==n.linearSpecularLOD&&console.log(e+" - linearSpecularLOD"),t.lodGenerationOffset!==n.lodGenerationOffset&&console.log(e+" - lodGenerationOffset"),t.lodGenerationScale!==n.lodGenerationScale&&console.log(e+" - lodGenerationScale"),t.noMipmap!==n.noMipmap&&console.log(e+" - noMipmap"),t.samplingMode!==n.samplingMode&&console.log(e+" - samplingMode"),t.textureFormat!==n.textureFormat&&console.log(e+" - textureFormat"),t.textureType!==n.textureType&&console.log(e+" - textureType"),t.wrapU!==n.wrapU&&console.log(e+" - wrapU"),t.wrapV!==n.wrapV&&console.log(e+" - wrapV"))}async showResizableCanvas(e,t,n,r,i,s,a,o,l){if(!this._isLoading){if(this._isLoading=!0,this._scene){this.clearResizableMeshes();const u=this._resizableCanvas3DGenerator.generatePreview3D({width:e,height:t,depth:n,borderRadius:r,radiusResolution:.1,type:i,borderColor:s,columns:a,rows:o,useCheckerTexture:!1},this._scene),c=await BABYLON.SceneLoader.ImportMeshAsync("","","data:"+JSON.stringify(u));this._loadedMeshes.push(...c.meshes);const h=c.meshes[0],d=2/Math.max(e,t);if(h.scaling.scaleInPlace(d),h.position.z=0,h.rotate(BABYLON.Axis.Y,Math.PI,BABYLON.Space.LOCAL),this.camera&&this.camera instanceof BABYLON.ArcRotateCamera&&this.camera.setPosition(new BABYLON.Vector3(0,1,4)),!this._scene.lights.find(e=>"resizableLight"===e.name)){console.log("Creating light...");const e=new BABYLON.HemisphericLight("resizableLight",new BABYLON.Vector3(.1,1,.1),this._scene);e.groundColor=new BABYLON.Color3(.6,.6,.6),e.intensity=1;const t=this.getDefaultHemisphericLight();t&&this._scene.removeLight(t)}return c.meshes.find(e=>!e.parent).metadata={isResizable:!0,AR:!0,sizecm:{height:t/l}},this._isLoading=!1,c.meshes}return this._isLoading=!1,null}}clearResizableMeshes(){this._scene.meshes.filter(e=>{var t;return null==(t=e.metadata)?void 0:t.isResizable}).forEach(e=>e.dispose())}switchMode(e){var t;console.log("Switch 3D mode",e);const n=this._scene.lights.find(e=>"resizableLight"===e.name),r=this.getDefaultHemisphericLight();"resizable"===e?0===this._lastVisibilityStates.size&&(null==(t=this._scene)||t.meshes.forEach(e=>{(!e.metadata||!e.metadata.isResizable)&&(this._lastVisibilityStates.set(e,e.isVisible),e.isVisible=!1)})):(n&&(n.dispose(),this._scene.removeLight(n)),r&&this._scene.addLight(r),this._lastVisibilityStates.forEach((e,t)=>t.isVisible=e),this._lastVisibilityStates.clear(),this.clearResizableMeshes())}async rotate(e,t,n){return new Promise(r=>{if(this._scene){console.log("Rotating scene on axis ".concat(t," by ").concat(e," degrees"));const i=e*Math.PI/180;this._scene.meshes.filter(e=>!e.parent).forEach(e=>{if(n){var s;const n=null!==(s=e.rotationQuaternion)&&void 0!==s?s:e.rotation.toQuaternion(),a=BABYLON.Quaternion.RotationAxis(t,i).multiply(n),o=BABYLON.Animation.CreateAndStartAnimation(e.id+"rotation",e,"rotationQuaternion",60,20,n,a,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT,void 0,()=>{null==o||o.stop(),r()})}else e.rotate(t,i,BABYLON.Space.WORLD),r()})}})}};An._shadowGenerator=null;let kn=An;class Mn extends BABYLON.ProceduralTexture{constructor(e,t,n,r,i,s,a){super(e,t,n,r,s,a),this._initializing=!1,this._baseTexture=i,this.updateShaderUniforms()}get initializing(){return this._initializing}get baseTexture(){return this._baseTexture}set baseTexture(e){this._baseTexture=e,this.updateShaderUniforms()}isReadyAsync(){return kn.whenTextureIsReadyAsync(this)}dispose(){super.dispose(),this._baseTexture&&this._baseTexture.dispose()}beginInit(){this._initializing=!0}endInit(){this._initializing=!1,this.updateShaderUniforms()}updateShaderUniforms(){this._initializing||this.setBaseTextureUniform()}setBaseTextureUniform(){this.setTexture("uSampler",this._baseTexture)}}const Tn=class e extends Mn{constructor(t,n,r,i,s,a){super(t,n,e.FRAGMENT_SHADER,r,i,s,a),this._blur=1/512,this.updateShaderUniforms()}get blur(){return this._blur/(1/7e3)}set blur(e){this._blur=1/7e3*e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=null!=this._blur?this._blur:1/512;this.setFloat("blur",e)}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Tn.FRAGMENT_SHADER="zakeke_BlurXProceduralTexture",Tn.CUSTOM_TYPE="Zakeke.BlurXProceduralTexture";let In=Tn;const On=["precision mediump float;","varying vec2 vUV;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vUV.x - 4.0*blur, vUV.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vUV.x - 3.0*blur, vUV.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x - 2.0*blur, vUV.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x - blur, vUV.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vUV.x + blur, vUV.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x + 2.0*blur, vUV.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x + 3.0*blur, vUV.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x + 4.0*blur, vUV.y)) * 0.05;","   gl_FragColor = sum;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(In.FRAGMENT_SHADER,"PixelShader")]=On;const Ln=class e extends Mn{constructor(t,n,r,i,s,a){super(t,n,e.FRAGMENT_SHADER,r,i,s,a),this._blur=1/512,this.updateShaderUniforms()}get blur(){return this._blur/(1/7e3)}set blur(e){this._blur=1/7e3*e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=null!=this._blur?this._blur:1/512;this.setFloat("blur",e)}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Ln.FRAGMENT_SHADER="zakeke_BlurYProceduralTexture",Ln.CUSTOM_TYPE="Zakeke.BlurYProceduralTexture";let Pn=Ln;const Bn=["precision mediump float;","varying vec2 vUV;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vUV.x, vUV.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(Pn.FRAGMENT_SHADER,"PixelShader")]=Bn;const Nn=class e extends Mn{constructor(t,n,r,i,s,a){super(t,n,e.FRAGMENT_SHADER,r,i,s,a),this._foreColor=new BABYLON.Vector3(1,1,1),this._backColor=new BABYLON.Vector3(0,0,0),this.updateShaderUniforms()}get foreColor(){return this._foreColor}set foreColor(e){this._foreColor=e,this.updateShaderUniforms()}get backColor(){return this._backColor}set backColor(e){this._backColor=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=this._foreColor||new BABYLON.Vector3(1,1,1),t=this._backColor||new BABYLON.Vector3(0,0,0);this.setVector3("foreColor",e),this.setVector3("backColor",t)}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Nn.FRAGMENT_SHADER="zakeke_ForegroundBackgroundProceduralTexture",Nn.CUSTOM_TYPE="Zakeke.ForegroundBackgroundProceduralTexture";let Rn=Nn;const Fn=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform vec3 foreColor;","uniform vec3 backColor;","void main(void) {","   // background color","   vec4 background = vec4(backColor.xyz, 1);","   vec4 foreground = vec4(foreColor.xyz, 1);","   // texel","\tvec4 t0 = texture2D(uSampler, vUV.xy);","   // change in white","   t0 = vec4(foreground.xyz, t0.a);","   gl_FragColor = mix(background, t0, t0.a);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(Rn.FRAGMENT_SHADER,"PixelShader")]=Fn;const zn=class e extends Mn{constructor(t,n,r,i,s,a){super(t,n,e.FRAGMENT_SHADER,r,i,s,a),this._offset=new BABYLON.Vector2(0,0),this.updateShaderUniforms()}get offset(){return this._offset}set offset(e){this._offset=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),this.initializing)return;const e=this.getRenderSize(),t=this._offset||new BABYLON.Vector2;this.setVector2("offset",new BABYLON.Vector2(t.x/e,t.y/e))}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};zn.FRAGMENT_SHADER="zakeke_MoveProceduralTexture",zn.CUSTOM_TYPE="Zakeke.MoveProceduralTexture";let jn=zn;const Vn=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform vec2 offset;","void main(void) {","   // translated texel","   gl_FragColor = texture2D(uSampler, vec2(vUV.x - offset.x, vUV.y + offset.y));","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(jn.FRAGMENT_SHADER,"PixelShader")]=Vn;const Un=class e extends Mn{constructor(t,n,r,i,s,a,o){super(t,n,e.FRAGMENT_SHADER,r,i,a,o),this._blendTexture=s,this.updateShaderUniforms()}get blendTexture(){return this._blendTexture}set blendTexture(e){this._blendTexture=e,this.updateShaderUniforms()}dispose(){super.dispose(),this._blendTexture&&this._blendTexture.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),!this.initializing){var e=new BABYLON.Vector2(1,1);this.baseTexture&&(e=new BABYLON.Vector2(this.baseTexture.uScale,this.baseTexture.vScale)),this.setVector2("uSamplerScale",e),this.setTexture("uBlendSampler",this._blendTexture);var t=new BABYLON.Vector2(1,1);this._blendTexture&&(t=new BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale)),this.setVector2("uBlendScale",t)}}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Un.FRAGMENT_SHADER="zakeke_MultiplyProceduralTexture",Un.CUSTOM_TYPE="Zakeke.MultiplyProceduralTexture";let Hn=Un;const Gn=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","void main(void) {","\tvec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","\tvec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = base * blend;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(Hn.FRAGMENT_SHADER,"PixelShader")]=Gn;const Yn=class e extends Mn{constructor(t,n,r,i,s,a){super(t,n,e.FRAGMENT_SHADER,r,i,s,a),this._bias=50,this._invertR=!1,this._invertG=!1,this._bevel=!1,this._intensity=.5,this.updateShaderUniforms()}get bias(){return null==this._bias?50:this._bias}set bias(e){this._bias=e,this.updateShaderUniforms()}get invertR(){return null!=this._invertR&&this._invertR}set invertR(e){this._invertR=e,this.updateShaderUniforms()}get invertG(){return null!=this._invertG&&this._invertG}set invertG(e){this._invertG=e,this.updateShaderUniforms()}get bevel(){return null!=this._bevel&&this._bevel}set bevel(e){this._bevel=e,this.updateShaderUniforms()}get intensity(){return null==this._intensity?.5:this._intensity}set intensity(e){this._intensity=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),!this.initializing){var e=this.getRenderSize(),t=e<1024?2*e:e;this.setFloat("size",e),this.setVector2("u_textureSize",new BABYLON.Vector2(e,e)),this.setVector3("dimensions",new BABYLON.Vector3(t,t,0)),this.setFloat("bias",this.bias),this.setFloat("invertR",this.invertR?-1:1),this.setFloat("invertG",this.invertG?-1:1),this.setFloat("bevel",this.bevel?1:0),this.setFloat("intensity",this.intensity)}}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Yn.FRAGMENT_SHADER="zakeke_normalMapProceduralTexture",Yn.CUSTOM_TYPE="Zakeke.NormalMapProceduralTexture";let Wn=Yn;const qn=["precision mediump float;","varying vec2 vUV;","uniform vec3 dimensions;","uniform sampler2D uSampler;","uniform vec2 u_textureSize;","uniform float bias;","uniform float invertR;","uniform float invertG;","uniform float bevel;","uniform float intensity;","void main(void) {","   vec2 step = vec2(1.0, 1.0) / dimensions.xy;","   vec4 black = vec4(0, 0, 0, 1);","\tvec4 bk = vec4(1, 1, 1, 1);","\tvec4 t0 = texture2D(uSampler, vUV.xy + vec2(0.0, 0.0));","\tvec4 t1 = texture2D(uSampler, vUV.xy + vec2(step.x, 0.0));","\tvec4 t2 = texture2D(uSampler, vUV.xy + vec2(-step.x, 0.0));","\tvec4 t3 = texture2D(uSampler, vUV.xy + vec2(0.0, step.y));","\tvec4 t4 = texture2D(uSampler, vUV.xy + vec2(0.0, -step.y));","   if (bevel != 0.0) ","   {","      t0 = vec4(0, 0, 0, t0.a);","      t1 = vec4(0, 0, 0, t1.a);","      t2 = vec4(0, 0, 0, t2.a);","      t3 = vec4(0, 0, 0, t3.a);","      t4 = vec4(0, 0, 0, t4.a);","   }","\tt0 = mix(bk, t0, t0.a);","\tt1 = mix(bk, t1, t1.a);","\tt2 = mix(bk, t2, t2.a);","\tt3 = mix(bk, t3, t3.a);","\tt4 = mix(bk, t4, t4.a);","\tfloat d0 = abs(t0.r);","\tfloat d1 = abs(t1.r);","\tfloat d2 = abs(t2.r);","\tfloat d3 = abs(t3.r);","\tfloat d4 = abs(t4.r);","\tfloat dx = ((d2 - d0) + (d0 - d1)) * intensity;","\tfloat dy = ((d4 - d0) + (d0 - d3)) * intensity;","\tvec4 normal = vec4(normalize(vec3(dx * invertR, dy * invertG, 1.0 - ((bias - 0.1) / 100.0))), 1.0);","\tgl_FragColor = vec4(normal.xyz * 0.5 + 0.5, 1.0);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(Wn.FRAGMENT_SHADER,"PixelShader")]=qn;const Zn=class e extends Mn{constructor(t,n,r,i,s,a,o){super(t,n,e.FRAGMENT_SHADER,r,i,a,o),this._opacity=1,this.updateShaderUniforms()}get opacity(){return null==this._opacity?1:this._opacity}set opacity(e){this._opacity=e,this.updateShaderUniforms()}dispose(){super.dispose()}updateShaderUniforms(){super.updateShaderUniforms(),!this.initializing&&this.setFloat("opacity",this.opacity)}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Zn.FRAGMENT_SHADER="zakeke_OpacityProceduralTexture",Zn.CUSTOM_TYPE="Zakeke.OpacityProceduralTexture";let Kn=Zn;const Xn=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform float opacity;","void main(void) {","\tvec4 color = texture2D(uSampler, vUV.xy);","   color.a = opacity;","   gl_FragColor = color;","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(Kn.FRAGMENT_SHADER,"PixelShader")]=Xn;const Jn=class e extends Mn{constructor(t,n,r,i,s,a,o){super(t,n,e.FRAGMENT_SHADER,r,i,a,o),this._blendTexture=s,this.updateShaderUniforms()}get blendTexture(){return this._blendTexture}set blendTexture(e){this._blendTexture=e,this.updateShaderUniforms()}dispose(){super.dispose(),this._blendTexture&&this._blendTexture.dispose()}updateShaderUniforms(){if(super.updateShaderUniforms(),!this.initializing){var e=new BABYLON.Vector2(1,1);this.baseTexture&&(e=new BABYLON.Vector2(this.baseTexture.uScale,this.baseTexture.vScale)),this.setVector2("uSamplerScale",e),this.setTexture("uBlendSampler",this._blendTexture);var t=new BABYLON.Vector2(1,1);this._blendTexture&&(t=new BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale)),this.setVector2("uBlendScale",t)}}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}};Jn.FRAGMENT_SHADER="zakeke_OverlayProceduralTexture",Jn.CUSTOM_TYPE="Zakeke.OverlayProceduralTexture";let $n=Jn;var Qn=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","float BlendOverlayf(float base, float blend)","{","   return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));","}","vec4 BlendOverlay(vec4 base, vec4 blend)","{","   return vec4(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b), BlendOverlayf(base.a, blend.a));","}","void main(void) {","\tvec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","\tvec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = BlendOverlay(base, blend);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat($n.FRAGMENT_SHADER,"PixelShader")]=Qn;const er=class e extends BABYLON.ProceduralTexture{constructor(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(t,n,e.FRAGMENT_SHADER,r,i,s),this._baseTexture=null,this._blendTexture=null,this.updateShaderUniforms()}dispose(){this._baseTexture&&this._baseTexture.dispose(),this._blendTexture&&this._blendTexture.dispose()}updateShaderUniforms(){this._baseTexture?(this.setTexture("uSampler",this._baseTexture),this.setInt("hasSampler",1),this.setVector2("uSamplerScale",new BABYLON.Vector2(this._baseTexture.uScale,this._baseTexture.vScale))):(this.setInt("hasSampler",0),this.setVector2("uSamplerScale",new BABYLON.Vector2(1,1))),this._blendTexture?(this.setTexture("uBlendSampler",this._blendTexture),this.setInt("hasBlend",1),this.setVector2("uBlendScale",new BABYLON.Vector2(this._blendTexture.uScale,this._blendTexture.vScale))):(this.setInt("hasBlend",0),this.setVector2("uBlendScale",new BABYLON.Vector2(1,1))),this.setFloat("size",this.getRenderSize())}render(e){super.render(e)}resize(e,t){super.resize(e,t),this.updateShaderUniforms()}isReady(){return!(this._baseTexture&&!this._baseTexture.isReady()||this._blendTexture&&!this._blendTexture.isReady())&&super.isReady()}get baseTexture(){return this._baseTexture}set baseTexture(e){this._baseTexture=e,this.updateShaderUniforms()}get blendTexture(){return this._blendTexture}set blendTexture(e){this._blendTexture=e,this.updateShaderUniforms()}serialize(){var t=BABYLON.SerializationHelper.Serialize(this,super.serialize());return t.customType=e.CUSTOM_TYPE,this.baseTexture?t.baseTexture=this.baseTexture.serialize():t.baseTexture=null,this.blendTexture?t.blendTexture=this.blendTexture.serialize():t.blendTexture=null,t}static Parse(t,n,r){var i=BABYLON.SerializationHelper.Parse(()=>new e(t.name,t._size,n,void 0,t._generateMipMaps),t,n,r);return t.baseTexture&&(i.baseTexture=BABYLON.Texture.Parse(t.baseTexture,n,r)),t.blendTexture&&(i.blendTexture=BABYLON.Texture.Parse(t.blendTexture,n,r)),i}};er.FRAGMENT_SHADER="zakeke_BlendProceduralTexture",er.CUSTOM_TYPE="Zakeke.BlendProceduralTexture";let tr=er;var nr=["precision mediump float;","varying vec2 vUV;","uniform sampler2D uSampler;","uniform sampler2D uBlendSampler;","uniform vec2 uSamplerScale;","uniform vec2 uBlendScale;","uniform bool hasSampler;","uniform bool hasBlend;","float BlendOverlayf(float base, float blend)","{","   return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));","}","vec4 BlendOverlay(vec4 base, vec4 blend)","{","   return vec4(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b), BlendOverlayf(base.a, blend.a));","}","void main(void) {","   if (!hasSampler && !hasBlend)","   {","       gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","       return;","   }","   if (hasSampler && !hasBlend)","   {","       gl_FragColor = texture2D(uSampler, vUV.xy*uSamplerScale);","       return;","   }","   if (!hasSampler && hasBlend)","   {","       gl_FragColor = texture2D(uBlendSampler, vUV.xy*uBlendScale);","       return;","   }","   vec4 base = texture2D(uSampler, vUV.xy*uSamplerScale);","   vec4 blend = texture2D(uBlendSampler, vUV.xy*uBlendScale);","   gl_FragColor = BlendOverlay(base, blend);","}"].join("\n");BABYLON.Effect.ShadersStore["".concat(tr.FRAGMENT_SHADER,"PixelShader")]=nr,BABYLON.RegisterClass("Zakeke.BlendProceduralTexture",tr);class rr{constructor(){}getSubmeshIdx(e){let t=e.lastIndexOf("-");if(-1!=t){e=e.substring(0,t);let n=Number(e.substring(t+1));if(n&&!isNaN(n))return n}return null}getRegExp(e,t){if((t&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let t=e.lastIndexOf("-");-1!=t&&(e=e.substring(0,t),Number(e.substring(t+1)))}return new RegExp(this.escapeRegExp(e).replace(/\\\*/g,".*"),"i")}getElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){const r=this.getMeshes(e,t,n,u,l);Array.prototype.push.apply(s,r)}if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let r=this.getSubmeshIdx(l);if(r){const i=this.getSubMeshes(e,t,n,u,l,r);Array.prototype.push.apply(s,i)}}if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){const r=this.getMaterials(e,t,n,u,l);Array.prototype.push.apply(s,r)}if((i&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){const r=this.getLights(e,t,n,u,l);Array.prototype.push.apply(s,r)}if((i&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){const r=this.getCameras(e,t,n,u,l);Array.prototype.push.apply(s,r)}if((i&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){const r=this.getCameraLocations(e,t,n,u);Array.prototype.push.apply(s,r)}}return s}getMeshElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){const r=this.getMeshes(e,t,n,u,l);Array.prototype.push.apply(s,r)}}return s}getSubMeshElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let r=this.getSubmeshIdx(l);if(r){const i=this.getSubMeshes(e,t,n,u,l,r);Array.prototype.push.apply(s,i)}}}return s}getMaterialElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){const r=this.getMaterials(e,t,n,u,l);Array.prototype.push.apply(s,r)}}return s}getLightElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){const r=this.getLights(e,t,n,u,l);Array.prototype.push.apply(s,r)}}return s}getCameraElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){const r=this.getCameras(e,t,n,u,l);Array.prototype.push.apply(s,r)}}return s}getCameraLocationElements(e,t,n,r,i){const s=[],a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=this.getRegExp(r,i);if((i&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){const r=this.getCameraLocations(e,t,n,l);Array.prototype.push.apply(s,r)}}return s}getOffloadedElementIDs(e,t,n,r,i){const s=[],a=r.split(";");for(let c=0;c<a.length;c++){const r=a[c];let h=r;if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var o=r.lastIndexOf("-");-1!=o&&(h=r.substring(0,o),Number(r.substring(o+1)))}var l=new RegExp(this.escapeRegExp(h).replace(/\\\*/g,".*"),"i");if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var u=this.getOffloadedMaterialIDs(e,t,n,l,h);Array.prototype.push.apply(s,u)}}return s}getDelayedElementIDs(e,t,n,r,i){const s=[],a=r.split(";");for(let c=0;c<a.length;c++){const r=a[c];let h=r;if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){var o=r.lastIndexOf("-");-1!=o&&(h=r.substring(0,o),Number(r.substring(o+1)))}var l=new RegExp(this.escapeRegExp(h).replace(/\\\*/g,".*"),"i");if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){var u=this.getDelayedMaterialIDs(e,t,n,l,h);Array.prototype.push.apply(s,u)}}return s}getMeshes(e,t,n,r,i){const s=[];if(t&&t instanceof BABYLON.Scene)for(let a=0;a<t.meshes.length;a++){const e=t.meshes[a];(e.name&&r.test(e.name)||e.id&&e.id==i)&&this.verifyFilter(e.id,n)&&s.push(e)}return s}getSubMeshes(e,t,n,r,i,s){const a=[];if(t&&t instanceof BABYLON.Scene)for(let o=0;o<t.meshes.length;o++){const e=t.meshes[o];(e.name&&r.test(e.name)||e.id&&e.id==i)&&this.verifyFilter(e.id,n)&&s<e.subMeshes.length&&s>=0&&a.push(e.subMeshes[s])}return a}getMaterials(e,t,n,r,i){const s=[];if(t&&t instanceof BABYLON.Scene)for(let a=0;a<t.materials.length;a++){const e=t.materials[a];(e.name&&r.test(e.name)||e.id&&e.id==i||e.metadata&&!e.metadata.isRealMaterial&&e.metadata.originalMaterialID==i)&&this.verifyFilter(e.id,n)&&s.push(e)}return s}getOffloadedMaterialIDs(e,t,n,r,i){const s=[];if(t&&t instanceof BABYLON.Scene&&t.metadata&&t.metadata.offloadedMaterials)for(let a in t.metadata.offloadedMaterials){const e=t.metadata.offloadedMaterials[a];(e.name&&r.test(e.name)||a&&a==i)&&this.verifyFilter(a,n)&&s.push(a)}return s}getDelayedMaterialIDs(e,t,n,r,i){const s=[];if(t&&t instanceof BABYLON.Scene&&t.metadata&&t.metadata.delayedMaterials)for(let a in t.metadata.delayedMaterials){const e=t.metadata.delayedMaterials[a];(e.name&&r.test(e.name)||a&&a==i)&&this.verifyFilter(a,n)&&s.push(a)}return s}getLights(e,t,n,r,i){const s=[];if(t&&t instanceof BABYLON.Scene)for(let a=0;a<t.lights.length;a++){const e=t.lights[a];(e.name&&r.test(e.name)||e.id&&e.id==i)&&this.verifyFilter(e.id,n)&&s.push(e)}return s}getCameras(e,t,n,r,i){const s=[];if(t&&t instanceof BABYLON.Scene)for(let a=0;a<t.cameras.length;a++){const e=t.cameras[a];(e.name&&r.test(e.name)||e.id&&e.id==i)&&this.verifyFilter(e.id,n)&&s.push(e)}return s}getCameraLocations(e,t,n,r){var i=[];if(e&&e instanceof Zakeke.Scene)for(var s=0;s<e.get("cameraLocations").length;s++){var a=e.get("cameraLocations").at(s),o=a.getLocationID(),l=a.get("name");(l&&r.test(l)||o&&r.test(o))&&this.verifyFilter(o,n)&&i.push(a)}return i}getYesNoElements(e,t,n,r,i){const s={yes:[],no:[]},a=r.split(";");for(let o=0;o<a.length;o++){const r=a[o];let l=r,u=0;if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){let e=r.lastIndexOf("-");if(-1!=e){l=r.substring(0,e);let t=Number(r.substring(e+1));t&&!isNaN(t)&&(u=t)}}const c=new RegExp(this.escapeRegExp(l).replace(/\\\*/g,".*"),"i");if((i&MPlaza.SceneElementType.Mesh)==MPlaza.SceneElementType.Mesh){const r=this.getYesNoMeshes(e,t,n,c);Array.prototype.push.apply(s.yes,r.yes),Array.prototype.push.apply(s.no,r.no)}if((i&MPlaza.SceneElementType.SubMesh)==MPlaza.SceneElementType.SubMesh){const r=this.getYesNoSubMeshes(e,t,n,c,u);Array.prototype.push.apply(s.yes,r.yes),Array.prototype.push.apply(s.no,r.no)}if((i&MPlaza.SceneElementType.Material)==MPlaza.SceneElementType.Material){const r=this.getYesNoMaterials(e,t,n,c);Array.prototype.push.apply(s.yes,r.yes),Array.prototype.push.apply(s.no,r.no)}if((i&MPlaza.SceneElementType.Light)==MPlaza.SceneElementType.Light){const r=this.getYesNoLights(e,t,n,c);Array.prototype.push.apply(s.yes,r.yes),Array.prototype.push.apply(s.no,r.no)}if((i&MPlaza.SceneElementType.Camera)==MPlaza.SceneElementType.Camera){const r=this.getYesNoCameras(e,t,n,c);Array.prototype.push.apply(s.yes,r.yes),Array.prototype.push.apply(s.no,r.no)}if((i&MPlaza.SceneElementType.CameraLocation)==MPlaza.SceneElementType.CameraLocation){const r=this.getYesNoCameraLocations(e,t,n,c);Array.prototype.push.apply(s.yes,r.yes),Array.prototype.push.apply(s.no,r.no)}}return s}getYesNoMeshes(e,t,n,r){const i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(let s=0;s<t.meshes.length;s++){let e=t.meshes[s],a=i.no;(e.name&&r.test(e.name)||e.id&&r.test(e.id))&&this.verifyFilter(e.id,n)&&(a=i.yes),a.push(e)}return i}getYesNoSubMeshes(e,t,n,r,i){const s={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(let a=0;a<t.meshes.length;a++){let e=t.meshes[a];if((e.name&&r.test(e.name)||e.id&&r.test(e.id))&&this.verifyFilter(e.id,n)&&e.subMeshes)for(let t=0;t<e.subMeshes.length;t++)t==i?s.yes.push(e.subMeshes[t]):s.no.push(e.subMeshes[t])}return s}getYesNoMaterials(e,t,n,r){const i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(let s=0;s<t.materials.length;s++){let e=t.materials[s];(e.name&&r.test(e.name)||e.id&&r.test(e.id))&&this.verifyFilter(e.id,n)?i.yes.push(e):i.no.push(e)}return i}getYesNoLights(e,t,n,r){const i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(let s=0;s<t.lights.length;s++){let e=t.lights[s];(e.name&&r.test(e.name)||e.id&&r.test(e.id))&&this.verifyFilter(e.id,n)?i.yes.push(e):i.no.push(e)}return i}getYesNoCameras(e,t,n,r){const i={yes:[],no:[]};if(t&&t instanceof BABYLON.Scene)for(let s=0;s<t.cameras.length;s++){let e=t.cameras[s];(e.name&&r.test(e.name)||e.id&&r.test(e.id))&&this.verifyFilter(e.id,n)?i.yes.push(e):i.no.push(e)}return i}getYesNoCameraLocations(e,t,n,r){const i={yes:[],no:[]};if(e&&e instanceof Zakeke.Scene)for(let s=0;s<e.get("cameraLocations").length;s++){let t=e.get("cameraLocations").at(s),a=t.getLocationID(),o=t.get("name");(o&&r.test(o)||a&&r.test(a))&&this.verifyFilter(a,n)?i.yes.push(t):i.no.push(t)}return i}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}verifyFilter(e,t){return!t||0==t.length||-1!==t.indexOf(e)}}var ir=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,o)}l((r=r.apply(e,t||[])).next())})},sr=globalThis&&globalThis.__generator||function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(o){s=[6,o],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},ar=function(){function e(e,t,n){this._zkModel=null,this._sceneHelper=null,this._deviceType=MPlaza.DeviceType.All,this._meshDesignRefreshRequiredListeners=[],this._beginAssetsLoadingListeners=[],this._endAssetsLoadingListeners=[],this._useMaterialOffloading=!1,this._prefetchMeshes=!0,this._prefetchMaterials=!0,this._zkScene=e,this._scene=t,this._sceneHelper=new kn(t),this._elementSelector=new rr,n&&(this._zkModel=n)}return Object.defineProperty(e.prototype,"deviceType",{get:function(){return this._deviceType},set:function(e){this._deviceType!=e&&(this._deviceType=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useMaterialOffloading",{get:function(){return this._useMaterialOffloading},set:function(e){this._useMaterialOffloading!=e&&(this._useMaterialOffloading=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefetchMeshes",{get:function(){return this._prefetchMeshes},set:function(e){this._prefetchMeshes!==e&&(this._prefetchMeshes=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prefetchMaterials",{get:function(){return this._prefetchMaterials},set:function(e){this._prefetchMaterials!==e&&(this._prefetchMaterials=e)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null)},e.prototype.addMeshDesignRefreshRequiredListeners=function(e){this._meshDesignRefreshRequiredListeners.push(e)},e.prototype.fireMeshDesignRefreshRequiredEvent=function(e,t){for(var n={meshes:e,effect:t},r=0;r<this._meshDesignRefreshRequiredListeners.length;++r)this._meshDesignRefreshRequiredListeners[r](n)},e.prototype.addBeginAssetsLoadingListener=function(e){this._beginAssetsLoadingListeners.push(e)},e.prototype.fireBeginAssetsLoadingEvent=function(){for(var e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()},e.prototype.addEndAssetsLoadingListener=function(e){this._endAssetsLoadingListeners.push(e)},e.prototype.fireEndAssetsLoadingEvent=function(){for(var e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()},e.prototype.isActionForDevice=function(e){var t=e.get("deviceTypes");return t===MPlaza.DeviceType.Any||t===MPlaza.DeviceType.All||(t&this._deviceType)===this._deviceType},e.prototype.setupMeshData=function(e){e.data||(e.data={filters:{},toShow:e.isVisible})},e.prototype.setMeshFilterAsync=function(e,t,n){return ir(this,void 0,void 0,function(){return sr(this,function(r){switch(r.label){case 0:return this.setupMeshData(e),e.data.filters[t]=n,[4,this.chekMeshVisibilityAsync(e)];case 1:return r.sent(),[2]}})})},e.prototype.setMeshVisibilityAsync=function(e,t){return ir(this,void 0,void 0,function(){return sr(this,function(n){switch(n.label){case 0:return this.setupMeshData(e),e.data.toShow=t,[4,this.chekMeshVisibilityAsync(e)];case 1:return n.sent(),[2]}})})},e.prototype.chekMeshVisibilityAsync=function(e){return ir(this,void 0,void 0,function(){var t,n,r;return sr(this,function(i){switch(i.label){case 0:if(t=null,e&&e.data&&(t=e.data.toShow))for(n in e.data.filters)t=t&&e.data.filters[n];return null!==t&&this._sceneHelper?t?(r=this._zkScene.get("rootUrl"))?[4,this._sceneHelper.unsetMeshDummyMaterialAsync(e,r,!0)]:[3,2]:[3,4]:[3,5];case 1:i.sent(),i.label=2;case 2:return[4,kn.whenMeshIsReadyAsync(e)];case 3:i.sent(),i.label=4;case 4:this._sceneHelper.showHideMesh(e.id,t),i.label=5;case 5:return[2]}})})},e.prototype.getMeshByID=function(e){return this._scene.getMeshByID(e)},e.prototype.getMaterialByID=function(e){return this._scene.getMaterialByID(e)},e.prototype.setCameraLocation=function(e){var t=this._zkScene.getCameraLocation(e);if(t){var n=new BABYLON.Vector3(t.get("px"),t.get("py"),t.get("pz")),r=new BABYLON.Vector3(t.get("tx"),t.get("ty"),t.get("tz"));this._sceneHelper&&this._sceneHelper.animateCamera(r,n,.5)}},e.prototype.adjustCamera=function(e){this._sceneHelper&&(void 0!==e&&"boolean"==typeof e?this._sceneHelper.adjustCamera(void 0,void 0,void 0,e):this._sceneHelper.adjustCamera())},e.prototype.zoomIn=function(){this._sceneHelper&&this._sceneHelper.zoomIn()},e.prototype.zoomOut=function(){this._sceneHelper&&this._sceneHelper.zoomOut()},e.prototype.zoom=function(e){this._sceneHelper&&this._sceneHelper.zoom(e)},e.prototype.setCameraPivot=function(e){if(this._sceneHelper){var t=e?this._scene.getMeshByID(e):null;this._sceneHelper.setCameraPivot(t)}},e.prototype.setCameraZoomEnabled=function(e){this._sceneHelper&&this._sceneHelper.setZoomEnabled(e)},e.prototype.setMeshMaterial=function(e,t){return ir(this,void 0,void 0,function(){var n;return sr(this,function(r){switch(r.label){case 0:return this._sceneHelper?[4,kn.whenAllMaterialTexturesAreReady(e)]:[3,2];case 1:r.sent(),n=t.material,Logger.info("Setting material to mesh | mesh: "+t.id+" - "+t.name+" | material: "+e.id+" - "+e.name),this._sceneHelper.applyMaterial(e,t),this._useMaterialOffloading&&n&&this._sceneHelper.offloadMaterial(n.id),r.label=2;case 2:return[2]}})})},e.prototype.setSubmeshMaterial=function(e,t,n){return ir(this,void 0,void 0,function(){var r;return sr(this,function(i){switch(i.label){case 0:return this._sceneHelper?[4,kn.whenAllMaterialTexturesAreReady(e)]:[3,2];case 1:i.sent(),r=this._sceneHelper.getSubMeshMaterial(t,n),this._sceneHelper.applyMaterialToSubMesh(e,t,n),this._useMaterialOffloading&&r&&this._sceneHelper.offloadMaterial(r.id),i.label=2;case 2:return[2]}})})},e.prototype.getMaterialFromActionValue=function(e){if(this._elementSelector){var t=e.get("value");if(null!=t&&null!=t){var n=this._scene.getMaterialByID(t);return n||(n=this._scene.getMaterialByName(t)),n}}return null},e.prototype.getDelayedMaterialIDFromAction=function(e){if(this._zkScene&&this._scene&&this._elementSelector&&e&&e instanceof MPlaza.AttributeSceneAction&&this._scene.metadata&&this._scene.metadata.delayedMaterials){var t=e.get("value");if(null!=t&&null!=t){if(this._scene.metadata.delayedMaterials.hasOwnProperty(t))return t;for(var n in this._scene.metadata.delayedMaterials)if(this._scene.metadata.delayedMaterials[n].name===t)return n}}return null},e.prototype.checkDelayedMaterial=function(e){return ir(this,void 0,void 0,function(){var t,n;return sr(this,function(r){switch(r.label){case 0:return!(t=this.getMaterialByID(e))&&this._sceneHelper&&null!=(n=this._zkScene.get("rootUrl"))&&null!=n?[4,this._sceneHelper.loadDelayedMaterialAsync(n,e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return[2,t]}})})},e.prototype.getOffloadedMaterialIDFromAction=function(e){if(this._zkScene&&this._scene&&this._elementSelector&&e&&e instanceof MPlaza.AttributeSceneAction&&this._scene.metadata&&this._scene.metadata.offloadedMaterials){var t=e.get("value");if(null!=t){if(this._scene.metadata.offloadedMaterials.hasOwnProperty(t))return t;for(var n in this._scene.metadata.offloadedMaterials)if(this._scene.metadata.offloadedMaterials[n].name===t)return n}}return null},e.prototype.checkOffloadedMaterialAsync=function(e){return ir(this,void 0,void 0,function(){var t,n;return sr(this,function(r){switch(r.label){case 0:return!(t=this.getMaterialByID(e))&&this._sceneHelper?null==(n=this._zkScene.get("rootUrl"))?[3,2]:[4,this._sceneHelper.loadOffloadedMaterialAsync(n,e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return[2,t]}})})},e.prototype.getDeepMaterialFromActionValueAsync=function(e){return ir(this,void 0,void 0,function(){var t,n,r;return sr(this,function(i){switch(i.label){case 0:return!(t=this.getMaterialFromActionValue(e))&&this._sceneHelper?null==(n=this._zkScene.get("rootUrl"))?[3,4]:(r=this.getOffloadedMaterialIDFromAction(e))?(Logger.info("Requesting offloaded material - id: ",r),[4,this._sceneHelper.loadOffloadedMaterialAsync(n,r)]):[3,2]:[3,4];case 1:return t=i.sent(),Logger.info("Obtained offloaded material - id: ",r),[3,4];case 2:return(r=this.getDelayedMaterialIDFromAction(e))?(Logger.info("Requesting delayed material - id: ",r),[4,this._sceneHelper.loadDelayedMaterialAsync(n,r)]):[3,4];case 3:t=i.sent(),Logger.info("Obtained delayed material - id: ",r),i.label=4;case 4:return[2,t]}})})},e.prototype.scriptRequiresDelayedLoading=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(this.actionsRequireDelayedLoading(n.actions))return!0}return!1},e.prototype.actionsRequireDelayedLoading=function(e){for(var t=0;t<e.length;t++)if(this.actionRequiresDelayedLoading(e[t]))return!0;return!1},e.prototype.actionRequiresDelayedLoading=function(e){var t;if(this._sceneHelper&&e.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&"show"===e.get("value")&&null!=(t=e.get("selector")))for(var n=this._elementSelector.getElements(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Mesh),r=0;r<n.length;r++){var i=n[r];if(i instanceof BABYLON.AbstractMesh&&!i.isVisible){var s=this._sceneHelper.getMeshDelayedMaterialIDs(i),a=this._sceneHelper.getMeshOffloadedMaterialIDs(i);if(s.length>0||a.length>0||kn.meshRequiresDelayedLoading(i))return!0}}if((e.get("actionTypeID")===MPlaza.SceneActionType.SetMeshMaterial||e.get("actionTypeID")===MPlaza.SceneActionType.SetSubMeshMaterial||e.get("actionTypeID")===MPlaza.SceneActionType.SetMaterialColor||e.get("actionTypeID")===MPlaza.SceneActionType.SetMeshDesignMaterial)&&!this.getMaterialFromActionValue(e)){if(this.getDelayedMaterialIDFromAction(e))return!0;if(this.getOffloadedMaterialIDFromAction(e))return!0}if(e.get("actionTypeID")===MPlaza.SceneActionType.SetMaterialColor&&null!=(t=e.get("selector"))){var o=this._elementSelector.getDelayedElementIDs(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Material),l=this._elementSelector.getOffloadedElementIDs(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Material);if(o.length>0||l.length>0)return!0}return!1},e.prototype.getAllMaterialElementsAsync=function(e){return ir(this,void 0,void 0,function(){var t,n,r,i,s,a,o,l,u,c;return sr(this,function(h){switch(h.label){case 0:return t=[],this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector?(n=this._elementSelector.getMaterialElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Material),Array.prototype.push.apply(t,n),r=n.map(function(e){return e.id}),i=this._elementSelector.getDelayedElementIDs(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Material),s=this._elementSelector.getOffloadedElementIDs(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Material),null==(a=this._zkScene.get("rootUrl"))?[3,4]:(o=[],i.forEach(function(e){-1===r.indexOf(e)&&o.push(e)}),o.length>0?[4,this._sceneHelper.loadDelayedMaterialsAsync(a,o)]:[3,2])):[3,4];case 1:l=h.sent(),Array.prototype.push.apply(t,l),h.label=2;case 2:return u=[],s.forEach(function(e){-1===r.indexOf(e)&&u.push(e)}),u.length>0?[4,this._sceneHelper.loadOffloadedMaterialsByIDsAsync(a,u)]:[3,4];case 3:c=h.sent(),Array.prototype.push.apply(t,c),h.label=4;case 4:return[2,t]}})})},e.prototype.executeScriptAsync=function(e){return ir(this,void 0,void 0,function(){var t,n,r;return sr(this,function(i){switch(i.label){case 0:(t=this.scriptRequiresDelayedLoading(e))&&this.fireBeginAssetsLoadingEvent(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.executeActionsAsync(r.attributeID,r.selectedValue,r.actions,!1)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return t&&this.fireEndAssetsLoadingEvent(),[2]}})})},e.prototype.executeActionsAsync=function(e,t,n,r){return void 0===r&&(r=!0),ir(this,void 0,void 0,function(){var i,s;return sr(this,function(a){switch(a.label){case 0:return n.length>0?(i=this.actionsRequireDelayedLoading(n),r&&i&&this.fireBeginAssetsLoadingEvent(),[4,this.checkActionsAssetsAreReadyAsync(n)]):[3,6];case 1:a.sent(),s=0,a.label=2;case 2:return s<n.length?[4,this.executeActionAsync(e,t,n[s])]:[3,5];case 3:a.sent(),a.label=4;case 4:return s++,[3,2];case 5:r&&i&&this.fireEndAssetsLoadingEvent(),a.label=6;case 6:return[2]}})})},e.prototype.executeActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){return sr(this,function(r){switch(r.label){case 0:if(!this.isActionForDevice(n))return[2];if(!n)return[3,25];switch(n.get("actionTypeID")){case MPlaza.SceneActionType.Filter:return[3,1];case MPlaza.SceneActionType.ShowHideMesh:return[3,3];case MPlaza.SceneActionType.SetMeshMaterial:return[3,5];case MPlaza.SceneActionType.SetSubMeshMaterial:return[3,7];case MPlaza.SceneActionType.SetMaterialColor:return[3,9];case MPlaza.SceneActionType.SetCameraLocation:return[3,11];case MPlaza.SceneActionType.AdjustCamera:return[3,13];case MPlaza.SceneActionType.SetCameraPivot:return[3,15];case MPlaza.SceneActionType.ResetCameraPivot:return[3,17];case MPlaza.SceneActionType.EnableDiableZoom:return[3,19];case MPlaza.SceneActionType.SetMeshDesignMaterial:return[3,21];case MPlaza.SceneActionType.SetMeshDesignEffect:return[3,23]}return[3,25];case 1:return[4,this.executeFilterActionAsync(e,t,n)];case 2:case 4:case 6:case 8:case 10:case 12:case 14:case 16:case 18:case 20:case 22:case 24:return r.sent(),[3,25];case 3:return[4,this.executeShowHideActionAsync(e,t,n)];case 5:return[4,this.executeSetMeshMaterialActionAsync(e,t,n)];case 7:return[4,this.executeSetSubMeshMaterialActionAsync(e,t,n)];case 9:return[4,this.executeSetMaterialColorActionAsync(e,t,n)];case 11:return[4,this.executeSetCameraLocationActionAsync(e,t,n)];case 13:return[4,this.executeAdjustCameraActionAsync(e,t,n)];case 15:return[4,this.executeSetCameraPivotActionAsync(e,t,n)];case 17:return[4,this.executeResetCameraPivotActionAsync(e,t,n)];case 19:return[4,this.executeEnableDisableZoomActionAsync(e,t,n)];case 21:return[4,this.executeSetMeshDesignMaterialActionAsync(e,t,n)];case 23:return[4,this.executeSetMeshDesignEffectActionAsync(e,t,n)];case 25:return[2]}})})},e.prototype.executeFilterActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var t,r,i,s;return sr(this,function(a){switch(a.label){case 0:if(!this.isActionForDevice(n))return[2];if(!(null!==e&&this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction))return[3,8];if(null==(t=n.get("selector")))return[3,8];r=this._elementSelector.getYesNoElements(this._zkScene,this._scene,null,t,MPlaza.SceneElementType.Mesh),i="enable"===n.get("value"),s=0,a.label=1;case 1:return s<r.yes.length?[4,this.setMeshFilterAsync(r.yes[s],e,i)]:[3,4];case 2:a.sent(),a.label=3;case 3:return s++,[3,1];case 4:s=0,a.label=5;case 5:return s<r.no.length?[4,this.setMeshFilterAsync(r.yes[s],e,!i)]:[3,8];case 6:a.sent(),a.label=7;case 7:return s++,[3,5];case 8:return[2]}})})},e.prototype.executeShowHideActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i;return sr(this,function(s){switch(s.label){case 0:if(!this.isActionForDevice(n))return[2];if(!(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction))return[3,4];if(null==(e=n.get("selector")))return[3,4];t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Mesh),r="show"===n.get("value"),i=0,s.label=1;case 1:return i<t.length?[4,this.setMeshVisibilityAsync(t[i],r)]:[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.executeSetMeshMaterialActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i;return sr(this,function(s){switch(s.label){case 0:return this.isActionForDevice(n)?this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction?null==(e=n.get("selector"))?[3,5]:(t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Mesh),[4,this.getDeepMaterialFromActionValueAsync(n)]):[3,5]:[2];case 1:if(!(r=s.sent()))return[3,5];i=0,s.label=2;case 2:return i<t.length?[4,this.setMeshMaterial(r,t[i])]:[3,5];case 3:s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2]}})})},e.prototype.executeSetSubMeshMaterialActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i;return sr(this,function(s){switch(s.label){case 0:return this.isActionForDevice(n)?this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction?null==(e=n.get("selector"))?[3,5]:(t=this._elementSelector.getSubMeshElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.SubMesh),[4,this.getDeepMaterialFromActionValueAsync(n)]):[3,5]:[2];case 1:if(!(r=s.sent()))return[3,5];i=0,s.label=2;case 2:return i<t.length?[4,this.setSubmeshMaterial(r,null,t[i])]:[3,5];case 3:s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2]}})})},e.prototype.executeSetMaterialColorActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,r,i,s,a,o;return sr(this,function(l){switch(l.label){case 0:return this.isActionForDevice(n)?this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction?null==(e=n.get("selector"))?[3,2]:[4,this.getAllMaterialElementsAsync(e)]:[3,2]:[2];case 1:if(r=l.sent(),i=n.get("propertyName"),s=n.get("value"),i&&s)for(t&&(s=s.replace(/%value%/g,t)),a=BABYLON.Color3.FromHexString(s),o=0;o<r.length;o++)this._sceneHelper.changeMaterialColor(r[o],i,a);l.label=2;case 2:return[2]}})})},e.prototype.executeSetCameraLocationActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i;return sr(this,function(s){if(!this.isActionForDevice(n))return[2];if(this._zkScene&&this._scene&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction){if(e=n.get("value"),t=null,e)for(r=0;r<this._zkScene.get("cameraLocations").length;r++)if((i=this._zkScene.get("cameraLocations").at(r)).get("locationID")===e||i.get("name")===e){t=i;break}null!==t&&this.setCameraLocation(t.get("locationID"))}return[2]})})},e.prototype.executeAdjustCameraActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){return sr(this,function(e){return this.isActionForDevice(n)?(this._zkScene&&this._scene&&this._sceneHelper&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction&&this._sceneHelper.adjustCamera(),[2]):[2]})})},e.prototype.executeSetCameraPivotActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i;return sr(this,function(s){if(!this.isActionForDevice(n))return[2];if(this._zkScene&&this._scene&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction){if(e=n.get("value"),t=null,e)for(r=0;r<this._scene.meshes.length;r++)if((i=this._scene.meshes[r]).id===e||i.name===e){t=i;break}t&&this.setCameraPivot(t.id)}return[2]})})},e.prototype.executeResetCameraPivotActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){return sr(this,function(e){return this.isActionForDevice(n)?(this.setCameraPivot(null),[2]):[2]})})},e.prototype.executeEnableDisableZoomActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e;return sr(this,function(t){return this.isActionForDevice(n)?(this._zkScene&&this._scene&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction&&(e="enable"===n.get("value"),this.setCameraZoomEnabled(e)),[2]):[2]})})},e.prototype.executeSetMeshDesignMaterialActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i,s;return sr(this,function(a){switch(a.label){case 0:return this._zkScene&&this._scene&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction&&null!=(e=n.get("selector"))&&null!=e?(t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Mesh),[4,this.getDeepMaterialFromActionValueAsync(n)]):[3,2];case 1:if(r=a.sent()){for(i=0;i<t.length;i++)(s=t[i]).metadata=s.metadata||{},s.metadata.designMaterialID=r.id;this.fireMeshDesignRefreshRequiredEvent(t,null)}a.label=2;case 2:return[2]}})})},e.prototype.executeSetMeshDesignEffectActionAsync=function(e,t,n){return ir(this,void 0,void 0,function(){var e,t,r,i,s,a,o,l,u,c;return sr(this,function(h){switch(h.label){case 0:if(!this.isActionForDevice(n))return[2];if(!(this._zkScene&&this._scene&&this._elementSelector&&n&&n instanceof MPlaza.AttributeSceneAction))return[3,4];if(null==(e=n.get("selector"))||null==e)return[3,4];if(t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,e,MPlaza.SceneElementType.Mesh),r=n.get("value"),i=null,null!=r&&null!=r&&this._zkModel)for(s=0;s<this._zkModel.get("scenes").length;s++){if((a=this._zkModel.get("scenes").at(s)).get("isDefault")&&(o=a.get("meshDesignEffects")))for(l=0;l<o.length;l++)if((u=o.at(l)).get("effectID")===r||u.get("name")===r){i=u;break}if(i)break}return i&&(c=i.get("materialID"))?[4,this.checkOffloadedMaterialAsync(c)]:[3,3];case 1:return h.sent()?[3,3]:[4,this.checkDelayedMaterial(c)];case 2:h.sent(),h.label=3;case 3:this.fireMeshDesignRefreshRequiredEvent(t,i),h.label=4;case 4:return[2]}})})},e.prototype.prefetchMeshesForUnselectedOptionsAsync=function(e){return ir(this,void 0,void 0,function(){var t,n,r,i,s,a,o;return sr(this,function(l){switch(l.label){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&this._sceneHelper&&this._prefetchMeshes))return[3,6];t=0,l.label=1;case 1:if(!(t<e.length))return[3,6];if(!((n=e[t])&&n instanceof MPlaza.AttributeSceneAction))return[3,5];if(n.get("actionTypeID")!==MPlaza.SceneActionType.ShowHideMesh||"show"!=n.get("value"))return[3,5];if(null==(r=n.get("selector"))||null==r)return[3,5];i=this._elementSelector.getElements(this._zkScene,this._scene,null,r,MPlaza.SceneElementType.Mesh),s=0,l.label=2;case 2:return s<i.length?(a=i[s])instanceof BABYLON.AbstractMesh&&!a.isVisible?(this._sceneHelper.checkDelayState(a),(o=a.material)?[4,this._sceneHelper.prefetchTexturesForMaterialAsync(o)]:[3,4]):[3,4]:[3,5];case 3:l.sent(),l.label=4;case 4:return s++,[3,2];case 5:return t++,[3,1];case 6:return[2]}})})},e.prototype.checkActionsAssetsAreReadyAsync=function(e){return ir(this,void 0,void 0,function(){var t,n,r,i,s,a,o,l,u,c;return sr(this,function(h){switch(h.label){case 0:if(!(this._zkScene&&this._scene&&this._elementSelector&&this._sceneHelper))return[3,17];l=0,h.label=1;case 1:if(!(l<e.length))return[3,11];if(u=e[l],t=[],!(u&&u instanceof MPlaza.AttributeSceneAction))return[3,8];if(u.get("actionTypeID")!==MPlaza.SceneActionType.ShowHideMesh||"show"!==u.get("value"))return[3,8];if(null==(c=u.get("selector")))return[3,8];n=this._elementSelector.getElements(this._zkScene,this._scene,null,c,MPlaza.SceneElementType.Mesh),r=0,h.label=2;case 2:return r<n.length?(i=n[r])instanceof BABYLON.AbstractMesh&&!i.isVisible?(s=this._zkScene.get("rootUrl"))?(a=this._sceneHelper.getMeshDelayedMaterialIDs(i),o=this._sceneHelper.getMeshOffloadedMaterialIDs(i),a.length>0?[4,this._sceneHelper.loadDelayedMaterialsAsync(s,a)]:[3,4]):[3,6]:[3,7]:[3,8];case 3:h.sent(),h.label=4;case 4:return o.length>0?[4,this._sceneHelper.loadOffloadedMaterialsByIDsAsync(s,o)]:[3,6];case 5:h.sent(),h.label=6;case 6:t.push(i),h.label=7;case 7:return r++,[3,2];case 8:return[4,kn.whenAllMeshesAreReadyAsync(t)];case 9:h.sent(),h.label=10;case 10:return l++,[3,1];case 11:l=0,h.label=12;case 12:return l<e.length?(u=e[l])&&u instanceof MPlaza.AttributeSceneAction?u.get("actionTypeID")===MPlaza.SceneActionType.SetMeshMaterial||u.get("actionTypeID")===MPlaza.SceneActionType.SetSubMeshMaterial?this.getMaterialFromActionValue(u)?[3,14]:[4,this.getDeepMaterialFromActionValueAsync(u)]:[3,14]:[3,16]:[3,17];case 13:h.sent(),h.label=14;case 14:return u.get("actionTypeID")!==MPlaza.SceneActionType.SetMaterialColor||null==(c=u.get("selector"))?[3,16]:[4,this.getAllMaterialElementsAsync(c)];case 15:h.sent(),h.label=16;case 16:return l++,[3,12];case 17:return[2]}})})},e.prototype.prefetchDataForUnselectedOptionsAsync=function(e){return ir(this,void 0,void 0,function(){return sr(this,function(e){return[2]})})},e}();class or{constructor(){this._zkScene=null,this._scene=null,this._sceneHelper=null,this._meshLocationCache={},this._cameraAnimationCompletedListeners=[],this._meshAnimationCompletedListeners=[],this._beforeSaveMeshLocationListeners=[],this._afterSaveMeshLocationListeners=[]}dispose(){for(;this._cameraAnimationCompletedListeners.length>0;)this._cameraAnimationCompletedListeners.pop();for(;this._meshAnimationCompletedListeners.length>0;)this._meshAnimationCompletedListeners.pop();for(;this._beforeSaveMeshLocationListeners.length>0;)this._beforeSaveMeshLocationListeners.pop();for(;this._afterSaveMeshLocationListeners.length>0;)this._afterSaveMeshLocationListeners.pop();this.disposeSceneHelper()}setScene(e){this._scene=e,this.resetSceneHelper(),this.resetCache()}setModel(e){this._zkScene=e,this.resetCache()}setModelAndScene(e,t){this._zkScene=e,this._scene=t,this.resetSceneHelper(),this.resetCache()}resetCache(){this._meshLocationCache={}}invalidateCache(e){this._meshLocationCache&&delete this._meshLocationCache[e]}disposeSceneHelper(){this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null)}resetSceneHelper(){this.disposeSceneHelper(),this._scene&&(this._sceneHelper=new kn(this._scene))}clearMeshLocations(){if(this._zkScene){const e=this._zkScene.get("meshLocations");for(;e.length>0;)e.remove(e.at(0))}}async setMeshLocationByID(e){if(this._zkScene&&this._scene){const t=this._zkScene.getMeshLocation(e);t&&await this.setMeshLocation(t)}}async setMeshLocation(e){if(this._zkScene&&this._scene&&this._sceneHelper){let l,u=!0;if(e){let n=e.get("locationID");if(u=e.get("adjustCamera"),this._meshLocationCache.hasOwnProperty(n))l=this._meshLocationCache[n];else{let r=e.get("data"),i=null;if("string"==typeof r){let e=window.atob(r),t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);let s=n.buffer;i=new Uint8Array(s)}else"[object Array]"===Object.prototype.toString.call(r)&&(i=Uint8Array.from(r));if(null!=i){let e=LZString.decompressFromUint8Array(i);if(l=JSON.parse(e),l){for(var t in l)(o=l[t]).p&&(o.p=new BABYLON.Vector3(o.p.x,o.p.y,o.p.z)),o.rE&&(o.rE=new BABYLON.Vector3(o.rE.x,o.rE.y,o.rE.z)),o.rQ&&(o.rQ=new BABYLON.Quaternion(o.rQ.x,o.rQ.y,o.rQ.z,o.rQ.w)),o.s&&(o.s=new BABYLON.Vector3(o.s.x,o.s.y,o.s.z));this._meshLocationCache[n]=l}}}}if(l){const e=[];if(u&&l.hasOwnProperty("wemin")&&l.hasOwnProperty("wemax")){var n={min:new BABYLON.Vector3(l.wemin.x,l.wemin.y,l.wemin.z),max:new BABYLON.Vector3(l.wemax.x,l.wemax.y,l.wemax.z)};let t=this._sceneHelper.camera;if(t&&t instanceof BABYLON.ArcRotateCamera){t.upperRadiusLimit=null;var r=this._sceneHelper.calculateCameraRadius(n),i=this._sceneHelper.getWorldCenter(n);i&&(this._sceneHelper.setCameraRadiusParameters(r),e.push(new Promise(e=>{t&&t instanceof BABYLON.ArcRotateCamera&&this._sceneHelper.animateCameraToFinalParamters(t.alpha,t.beta,r,i,1,()=>{this._sceneHelper&&(this._sceneHelper.setupCameraLimits(n),this.fireCameraAnimationCompletedEvent(),e())})})))}}for(var s=0;s<this._scene.meshes.length;s++){var a=this._scene.meshes[s];if(t=a.id,l.hasOwnProperty(t)){var o=l[t];e.push(new Promise(e=>{this._sceneHelper.animateMeshToFinalParameters(a,o.p,o.rE,o.rQ,o.s,1,()=>{this.fireMeshAnimationCompletedEvent(),e()})}))}}await Promise.all(e)}}}saveMeshLocation(e){if(this._zkScene&&this._scene){var t=new Zakeke.SceneMeshLocation;t.set("name",e),this.updateMeshLocation(t),this._zkScene.get("meshLocations").push(t)}}saveExplodedMeshLocation(){if(this._zkScene&&this._scene){var e=this._zkScene.getOrCreateExplodedMeshLocation();this.updateMeshLocation(e)}}saveCollapsedMeshLocation(){if(this._zkScene&&this._scene){var e=this._zkScene.getOrCreateCollapsedMeshLocation();this.updateMeshLocation(e)}}updateMeshLocation(e){if(this.fireBeforeSaveMeshLocationEvent(),this._scene&&this._sceneHelper){var t=this.getMeshPRSs(),n=this._sceneHelper.getWorldExtends();if(n){let e={x:n.min.x,y:n.min.y,z:n.min.z},r={x:n.max.x,y:n.max.y,z:n.max.z};t.wemin=e,t.wemax=r}var r=JSON.stringify(t);let i=LZString.compressToUint8Array(r),s=[].slice.call(i);e.set("data",s),this.invalidateCache(e.get("locationID"))}this.fireAfterSaveMeshLocationEvent()}getMeshPRSs(){let e={wemin:void 0,wemax:void 0};if(this._scene&&this._sceneHelper)for(let t=0;t<this._scene.meshes.length;t++){const n=this._scene.meshes[t];if(this._sceneHelper.isRealMesh(n)){let t=n.id,r={p:void 0,rQ:void 0,rE:void 0,s:void 0},i={x:n.position.x,y:n.position.y,z:n.position.z};if(r.p=i,null==n.rotationQuaternion){r.rQ=null;let e={x:n.rotation.x,y:n.rotation.y,z:n.rotation.z};r.rE=e}else{let e={w:n.rotationQuaternion.w,x:n.rotationQuaternion.x,y:n.rotationQuaternion.y,z:n.rotationQuaternion.z};r.rQ=e,r.rE=null}let s={x:n.scaling.x,y:n.scaling.y,z:n.scaling.z};r.s=s,e[t]=r}}return e}async explodeMeshes(){if(this._zkScene){let e=this._zkScene.getFirstExplodedMeshLocation();e&&await this.setMeshLocation(e)}}async collapseMeshes(){if(this._zkScene){let e=this._zkScene.getFirstCollapsedMeshLocation();e&&await this.setMeshLocation(e)}}fireCameraAnimationCompletedEvent(){for(let e=0;e<this._cameraAnimationCompletedListeners.length;++e)this._cameraAnimationCompletedListeners[e]()}addCameraAnimationCompletedListener(e){this._cameraAnimationCompletedListeners.push(e)}fireMeshAnimationCompletedEvent(){for(let e=0;e<this._meshAnimationCompletedListeners.length;++e)this._meshAnimationCompletedListeners[e]()}addMeshAnimationCompletedListener(e){this._meshAnimationCompletedListeners.push(e)}fireBeforeSaveMeshLocationEvent(){for(let e=0;e<this._beforeSaveMeshLocationListeners.length;++e)this._beforeSaveMeshLocationListeners[e]()}addBeforeSaveMeshLocationListener(e){this._beforeSaveMeshLocationListeners.push(e)}fireAfterSaveMeshLocationEvent(){for(let e=0;e<this._afterSaveMeshLocationListeners.length;++e)this._afterSaveMeshLocationListeners[e]()}addAfterSaveMeshLocationListener(e){this._afterSaveMeshLocationListeners.push(e)}}class lr{constructor(e,t){this._glowLayer=null,this._zkScene=e,this._scene=t,this._sceneHelper=new kn(this._scene),this._glowLayer=this._scene.getGlowLayerByName("glow")}get enabled(){const e=this.getGlowConfig();return e&&null!=e.get("enabled")&&"boolean"==typeof e.get("enabled")&&e.get("enabled"),!1}set enabled(e){var t=this.getOrCreateGlowConfig();t&&t.set("enabled",e),this.update()}get intensity(){const e=this.getGlowConfig();return e&&null!=e.get("intensity")&&"number"==typeof e.get("intensity")&&e.get("intensity"),1}set intensity(e){var t=this.getOrCreateGlowConfig();t&&t.set("intensity",e),this.update()}get blurSize(){const e=this.getGlowConfig();return e&&null!=e.get("blurSize")&&"number"==typeof e.get("blurSize")&&e.get("blurSize"),1}set blurSize(e){var t=this.getOrCreateGlowConfig();t&&t.set("blurSize",e),this.update()}dispose(){this.destroyGlowLayer()}destroyGlowLayer(){this._glowLayer&&(this._glowLayer.dispose(),this._glowLayer=null)}createOrUpdateGlowLayer(e,t){this._glowLayer||(this._glowLayer=new BABYLON.GlowLayer("glow",this._scene)),this._glowLayer&&(this._glowLayer.intensity=e,this._glowLayer.blurKernelSize=t)}update(){if(this._scene)if(this.getGlowConfig()){const e=this.enabled,t=this.intensity,n=this.blurSize;e?this.createOrUpdateGlowLayer(t,n):this.destroyGlowLayer()}else this.destroyGlowLayer()}turnOffGlow(){this.destroyGlowLayer()}turnOnGlow(){this.update()}sanityCheck(){return this._scene&&this._scene instanceof BABYLON.Scene&&this._zkScene&&this._zkScene instanceof Zakeke.Scene&&null!=this._zkScene.get("config")&&null!=this._zkScene.get("config")&&this._zkScene.get("config")instanceof Zakeke.SceneConfig}isGlowEnabledForMesh(e){return!!e&&e.metadata&&e.metadata.enableGlow}enableGlowForMesh(e){}disableGlowForMesh(e){}getGlowConfig(){if(this.sanityCheck()){let e=this._zkScene.getGlowConfig();if(e)return e}return null}getOrCreateGlowConfig(){return this.sanityCheck()?this._zkScene.getOrCreateGlowConfig():null}}let ur=class{getSceneIncrementalFiles(e,t,n){const r=[],i={useDraco:n.useDraco||!1,forceDraco:n.forceDraco||!1,dracoEncodingSpeed:n.dracoEncodingSpeed||5,dracoDecodingSpeed:n.dracoDecodingSpeed||5},s=n.excludedMeshes||[];e.autoClear=!0;const a=[];e.meshes.forEach(e=>{if(!s.some(t=>t.test(e.name))){if(e.subMeshes&&e.subMeshes.length>1)return void(e.geometryId&&a.push(e.geometryId));if(e.checkCollisions)e.geometryId&&a.push(e.geometryId);else{const n=this.extractIncrementalFile(t,e,!0,i);n&&r.push(n)}}});const o=e.geometries;if(o&&o.vertexData.forEach(e=>{const n=e.id;if(!a.some(e=>e===n)){const n=this.extractIncrementalFile(t,e,!1,i);n&&r.push(n)}}),e.metadata&&e.metadata.delayedMaterials){const n=Object.keys(e.metadata.delayedMaterials);for(let i=0;i<e.materials.length;i++){const s=e.materials[i];if(n.some(e=>e===s.id)){const n=e.metadata.delayedMaterials[s.id],a=this.extractIncrementalMaterialFile(t,s,n.file);a&&(r.push(a),e.materials.splice(i--,1))}}}var l=new Zakeke.IncrementalFileInfo;return l.name="scene_"+t+".incremental.babylon",l.isScene=!0,l.dracoEncoded=!1,l.data=JSON.stringify(e,null,0),r.push(l),r}extractIncrementalFile(e,t,n,r){let i=null;if(t.positions&&t.normals&&t.indices&&(i=this.createDelayLoadingFile(e,t,n,r),i&&i.data)){t.delayLoadingFile=i.name;let e=t.positions.map(e=>parseFloat(e)),r=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],s=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(let t=0;t<e.length;t+=3){let n=e[t],i=e[t+1],a=e[t+2];n<r[0]&&(r[0]=n),n>s[0]&&(s[0]=n),i<r[1]&&(r[1]=i),i>s[1]&&(s[1]=i),a<r[2]&&(r[2]=a),a>s[2]&&(s[2]=a)}t.boundingBoxMinimum=r,t.boundingBoxMaximum=s,t.positions=null,t.normals=null,t.indices=null,t.uvs&&(t.hasUVs=!0,t.uvs=null),t.uv2s&&(t.hasUVs2=!0,t.uv2s=null),t.colors&&(t.hasColors=!0,t.colors=null),t.tangents&&(t.hasTangents=!0,t.tangents=null),t.matricesIndices&&(t.hasMatricesIndices=!0,t.matricesIndices=null),t.matricesWeights&&(t.hasMatricesWeights=!0,t.matricesWeights=null),n&&t.subMeshes&&(t.subMeshes=null)}return i&&i.data?i:null}createDelayLoadingFile(e,t,n,r){var i=new Zakeke.IncrementalFileInfo;i.isScene=!1;const s=!n&&!(t.matricesIndices||t.matricesWeights||t.tangents)&&t.indices.length>0&&t.positions.length>0&&t.normals.length>0;console.log({dracoOptions:r});const a=r.useDraco&&(r.forceDraco||s);i.dracoEncoded=a;var o=(n?t.name:t.id).replace("+","_").replace(" ","_"),l=a?"draco":"";return i.name="scene_"+e+"."+o+(n?".babylonmesh"+l+"data":".babylongeometry"+l+"data"),i.data=a?this.createDracoDelayLoadingFileData(t,r):this.createPlainDelayLoadingFileData(t,n),i}createPlainDelayLoadingFileData(e,t){var n={positions:e.positions,indices:e.indices,normals:e.normals};return e.uvs&&(n.uvs=e.uvs),e.uv2s&&(n.uv2s=e.uv2s),e.colors&&(n.colors=e.colors),e.tangents&&(n.tangents=e.tangents),e.matricesIndices&&(n.matricesIndices=e.matricesIndices),e.matricesWeights&&(n.matricesWeights=e.matricesWeights),t&&e.subMeshes&&(n.subMeshes=e.subMeshes),JSON.stringify(n,null,0)}createDracoDelayLoadingFileData(e,t){(new Date).getTime();const n=this.getDracoEncodedGeometry(e,t);if((new Date).getTime(),n){var r={type:"draco",data:n};return msgpack.encode(r)}return null}getDracoEncodedGeometry(e,t){if(!e)return null;const n=e.positions,r=e.normals,i=e.colors,s=e.uvs,a=e.uv2s,o=e.indices,l={indices:new Uint32Array(o),positions:new Float32Array(n),normals:new Float32Array(r)};s&&(l.uvs=new Float32Array(s)),a&&(l.uv2s=new Float32Array(a)),i&&(l.colors=new Float32Array(i));const u=DracoEncoderModule(),c=new u.Encoder,h=new u.MeshBuilder,d=new u.Mesh,f=l.indices.length/3,p=l.positions.length/3;h.AddFacesToMesh(d,f,l.indices),h.AddFloatAttributeToMesh(d,u.POSITION,p,3,l.positions),l.normals&&h.AddFloatAttributeToMesh(d,u.NORMAL,p,3,l.normals),l.colors&&h.AddFloatAttributeToMesh(d,u.COLOR,p,4,l.colors),l.uvs&&h.AddFloatAttributeToMesh(d,u.TEX_COORD,p,2,l.uvs),l.uv2s&&h.AddFloatAttributeToMesh(d,u.TEX_COORD,p,2,l.uv2s),c.SetSpeedOptions(t.dracoEncodingSpeed,t.dracoDecodingSpeed),c.SetAttributeQuantization(u.POSITION,14),c.SetAttributeQuantization(u.TEX_COORD,12),c.SetAttributeQuantization(u.NORMAL,10),c.SetAttributeQuantization(u.COLOR,10),c.SetAttributeQuantization(u.GENERIC,8),c.SetEncodingMethod(u.MESH_EDGEBREAKER_ENCODING);const g=new u.DracoInt8Array,m=c.EncodeMeshToDracoBuffer(d,g);var v=new ArrayBuffer(m),_=new Int8Array(v);for(let y=0;y<m;++y)_[y]=g.GetValue(y);return u.destroy(d),u.destroy(g),u.destroy(c),u.destroy(h),v}extractIncrementalMaterialFile(e,t,n){return this.createDelayLoadingMaterialFile(e,t,n)}createDelayLoadingMaterialFile(e,t,n){var r=new Zakeke.IncrementalFileInfo;return r.isScene=!1,r.dracoEncoded=!1,r.name=n,r.data=this.createMaterialFileData(t),r}createMaterialFileData(e){return JSON.stringify(e,null,0)}};class cr{constructor(e){this._pendingActions=new Array,this._workerInfos=e.map(e=>({worker:e,active:!1}))}dispose(){for(const e of this._workerInfos)e.worker.terminate();delete this._workerInfos,delete this._pendingActions}push(e){for(const t of this._workerInfos)if(!t.active)return void this._execute(t,e);this._pendingActions.push(e)}_execute(e,t){e.active=!0,t(e.worker,()=>{e.active=!1;const t=this._pendingActions.shift();t&&this._execute(e,t)})}}function hr(e){return"function"==typeof importScripts?(importScripts(e),Promise.resolve()):new Promise((t,n)=>{BABYLON.Tools.LoadScript(e,()=>{t()},e=>{n(new Error(e))})})}function dr(e){if(0==e.length)return Promise.resolve();let t=[];for(let n=0;n<e.length;n++)t.push(hr(e[n]));return new Promise(e=>{Promise.all(t).then(()=>e())})}function fr(e,t,n){return(new MakeIncremental).getSceneIncrementalFiles(e,t,n)}function pr(){let e;onmessage=t=>{const n=t.data;switch(n.id){case"init":{const t=n.urls;e=dr(t),postMessage("done");break}case"makeIncremental":if(!e)throw new Error("Worker not initialized");e.then(()=>{const e=fr(n.sceneJson,n.version,n.options);postMessage({id:"result",files:e}),postMessage("done")})}}}const gr=class e{static GetDefaultNumWorkers(){return"object"==typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),2):1}static get Default(){return e._Default||(e._Default=new e([])),e._Default}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultNumWorkers;const r=t.map(e=>function(e){return"object"!=typeof document||"string"!=typeof e?e:BABYLON.Tools.GetAbsoluteUrl(e)}(e));if(n&&"function"==typeof Worker){const e="".concat(hr).concat(dr).concat(fr,"(").concat(pr,")()"),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"})),i=new Array(n);for(let n=0;n<i.length;n++)i[n]=new Promise((e,n)=>{const i=new Worker(t),s=e=>{i.removeEventListener("error",s),i.removeEventListener("message",a),n(e)},a=t=>{"done"===t.data&&(i.removeEventListener("error",s),i.removeEventListener("message",a),e(i))};i.addEventListener("error",s),i.addEventListener("message",a),i.postMessage({id:"init",urls:r})});this._workerPoolPromise=Promise.all(i).then(e=>new cr(e))}}dispose(){}whenReadyAsync(){return this._workerPoolPromise?this._workerPoolPromise.then(()=>{}):Promise.resolve()}getIncrementalFilesAsync(e,t,n){if(this._workerPoolPromise)return this._workerPoolPromise.then(r=>new Promise((i,s)=>{r.push((r,a)=>{let o=[];const l=e=>{r.removeEventListener("error",l),r.removeEventListener("message",u),s(e),a()},u=e=>{"done"===e.data?(r.removeEventListener("error",l),r.removeEventListener("message",u),i(o),a()):"result"===e.data.id&&(o=e.data.files)};r.addEventListener("error",l),r.addEventListener("message",u),r.postMessage({id:"makeIncremental",sceneJson:e,version:t,options:n})})}));throw new Error("Incremental file worker is not available")}};gr.DefaultNumWorkers=gr.GetDefaultNumWorkers(),gr._Default=null;let mr=gr;var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function _r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yr(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var br={exports:{}};!function(e){!function(t,n){e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}}(typeof window<"u"?window:vr,function(e,t){var n=[],r=Object.getPrototypeOf,i=n.slice,s=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,o=n.indexOf,l={},u=l.toString,c=l.hasOwnProperty,h=c.toString,d=h.call(Object),f={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},g=function(e){return null!=e&&e===e.window},m=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var r,i,s=(n=n||m).createElement("script");if(s.text=e,t)for(r in v)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);n.head.appendChild(s).parentNode.removeChild(s)}function y(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[u.call(e)]||"object":typeof e}var b="3.7.1",x=/HTML$/i,w=function(e,t){return new w.fn.init(e,t)};function S(e){var t=!!e&&"length"in e&&e.length,n=y(e);return!p(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}w.fn=w.prototype={jquery:b,constructor:w,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,s,a=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[o]||{},o++),"object"!=typeof a&&!p(a)&&(a={}),o===l&&(a=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(u&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],s=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,a[t]=w.extend(u,s,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=c.call(t,"constructor")&&t.constructor)&&h.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(S(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=w.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?w.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!x.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,s=e.length,a=!n;i<s;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(S(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return s(o)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var D=n.pop,E=n.sort,A=n.splice,k="[\\x20\\t\\r\\n\\f]",M=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");w.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var T=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function I(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}w.escapeSelector=function(e){return(e+"").replace(T,I)};var O=m,L=a;!function(){var t,r,s,a,l,u,h,d,p,g,m=L,v=w.expando,_=0,y=0,b=ee(),x=ee(),S=ee(),T=ee(),I=function(e,t){return e===t&&(l=!0),0},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",N="\\["+k+"*("+B+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+k+"*\\]",R=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",F=new RegExp(k+"+","g"),z=new RegExp("^"+k+"*,"+k+"*"),j=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),V=new RegExp(k+"|>"),U=new RegExp(R),H=new RegExp("^"+B+"$"),G={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,K=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){le()},$=de(function(e){return!0===e.disabled&&C(e,"fieldset")},{dir:"parentNode",next:"legend"});try{m.apply(n=i.call(O.childNodes),O.childNodes),n[O.childNodes.length].nodeType}catch(ye){m={apply:function(e,t){L.apply(e,i.call(t))},call:function(e){L.apply(e,i.call(arguments,1))}}}function Q(e,t,n,r){var i,s,a,o,l,c,h,g=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!r&&(le(t),t=t||u,d)){if(11!==_&&(l=q.exec(e)))if(i=l[1]){if(9===_){if(!(a=t.getElementById(i)))return n;if(a.id===i)return m.call(n,a),n}else if(g&&(a=g.getElementById(i))&&Q.contains(t,a)&&a.id===i)return m.call(n,a),n}else{if(l[2])return m.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(i)),n}if(!T[e+" "]&&(!p||!p.test(e))){if(h=e,g=t,1===_&&(V.test(e)||j.test(e))){for(((g=Z.test(e)&&oe(t.parentNode)||t)!=t||!f.scope)&&((o=t.getAttribute("id"))?o=w.escapeSelector(o):t.setAttribute("id",o=v)),s=(c=ce(e)).length;s--;)c[s]=(o?"#"+o:":scope")+" "+he(c[s]);h=c.join(",")}try{return m.apply(n,g.querySelectorAll(h)),n}catch(y){T(e,!0)}finally{o===v&&t.removeAttribute("id")}}}return _e(e.replace(M,"$1"),t,n,r)}function ee(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function te(e){return e[v]=!0,e}function ne(e){var t=u.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return C(t,"input")&&t.type===e}}function ie(e){return function(t){return(C(t,"input")||C(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&$(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ae(e){return te(function(t){return t=+t,te(function(n,r){for(var i,s=e([],n.length,t),a=s.length;a--;)n[i=s[a]]&&(n[i]=!(r[i]=n[i]))})})}function oe(e){return e&&typeof e.getElementsByTagName<"u"&&e}function le(e){var t,n=e?e.ownerDocument||e:O;return n==u||9!==n.nodeType||!n.documentElement||(h=(u=n).documentElement,d=!w.isXMLDoc(u),g=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&O!=u&&(t=u.defaultView)&&t.top!==t&&t.addEventListener("unload",J),f.getById=ne(function(e){return h.appendChild(e).id=w.expando,!u.getElementsByName||!u.getElementsByName(w.expando).length}),f.disconnectedMatch=ne(function(e){return g.call(e,"*")}),f.scope=ne(function(){return u.querySelectorAll(":scope")}),f.cssHas=ne(function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),f.getById?(r.filter.ID=function(e){var t=e.replace(K,X);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(typeof t.getElementById<"u"&&d){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(K,X);return function(e){var n=typeof e.getAttributeNode<"u"&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(typeof t.getElementById<"u"&&d){var n,r,i,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(i=t.getElementsByName(e),r=0;s=i[r++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),r.find.TAG=function(e,t){return typeof t.getElementsByTagName<"u"?t.getElementsByTagName(e):t.querySelectorAll(e)},r.find.CLASS=function(e,t){if(typeof t.getElementsByClassName<"u"&&d)return t.getElementsByClassName(e)},p=[],ne(function(e){var t;h.appendChild(e).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||p.push("\\["+k+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+v+"-]").length||p.push("~="),e.querySelectorAll("a#"+v+"+*").length||p.push(".#.+[+~]"),e.querySelectorAll(":checked").length||p.push(":checked"),(t=u.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(t=u.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||p.push("\\["+k+"*name"+k+"*="+k+"*(?:''|\"\")")}),f.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),I=function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument==O&&Q.contains(O,e)?-1:t===u||t.ownerDocument==O&&Q.contains(O,t)?1:a?o.call(a,e)-o.call(a,t):0:4&n?-1:1)}),u}for(t in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(le(e),d&&!T[t+" "]&&(!p||!p.test(t)))try{var n=g.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){T(t,!0)}return Q(t,u,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=u&&le(e),w.contains(e,t)},Q.attr=function(e,t){(e.ownerDocument||e)!=u&&le(e);var n=r.attrHandle[t.toLowerCase()],i=n&&c.call(r.attrHandle,t.toLowerCase())?n(e,t,!d):void 0;return void 0!==i?i:e.getAttribute(t)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,n=[],r=0,s=0;if(l=!f.sortStable,a=!f.sortStable&&i.call(e,0),E.call(e,I),l){for(;t=e[s++];)t===e[s]&&(r=n.push(s));for(;r--;)A.call(e,n[r],1)}return a=null,e},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(i.apply(this)))},(r=w.expr={cacheLength:50,createPseudo:te,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(K,X),e[3]=(e[3]||e[4]||e[5]||"").replace(K,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=ce(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(K,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return C(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+k+")"+e+"("+k+"|$)"))&&b(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute<"u"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=Q.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,f,p=s!==a?"nextSibling":"previousSibling",g=t.parentNode,m=o&&t.nodeName.toLowerCase(),y=!l&&!o,b=!1;if(g){if(s){for(;p;){for(h=t;h=h[p];)if(o?C(h,m):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(b=(d=(u=(c=g[v]||(g[v]={}))[e]||[])[0]===_&&u[1])&&u[2],h=d&&g.childNodes[d];h=++d&&h&&h[p]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[_,d,b];break}}else if(y&&(b=d=(u=(c=t[v]||(t[v]={}))[e]||[])[0]===_&&u[1]),!1===b)for(;(h=++d&&h&&h[p]||(b=d=0)||f.pop())&&(!(o?C(h,m):1===h.nodeType)||!++b||(y&&((c=h[v]||(h[v]={}))[e]=[_,b]),h!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return i[v]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?te(function(e,n){for(var r,s=i(e,t),a=s.length;a--;)e[r=o.call(e,s[a])]=!(n[r]=s[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:te(function(e){var t=[],n=[],r=ve(e.replace(M,"$1"));return r[v]?te(function(e,t,n,i){for(var s,a=r(e,null,i,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:te(function(e){return function(t){return Q(e,t).length>0}}),contains:te(function(e){return e=e.replace(K,X),function(t){return(t.textContent||w.text(t)).indexOf(e)>-1}}),lang:te(function(e){return H.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(K,X).toLowerCase(),function(t){var n;do{if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===function(){try{return u.activeElement}catch(e){}}()&&u.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return C(e,"input")&&!!e.checked||C(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){return C(e,"input")&&"button"===e.type||C(e,"button")},text:function(e){var t;return C(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae(function(){return[0]}),last:ae(function(e,t){return[t-1]}),eq:ae(function(e,t,n){return[n<0?n+t:n]}),even:ae(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ae(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ae(function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:ae(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=re(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ie(t);function ue(){}function ce(e,t){var n,i,s,a,o,l,u,c=x[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=r.preFilter;o;){for(a in(!n||(i=z.exec(o)))&&(i&&(o=o.slice(i[0].length)||o),l.push(s=[])),n=!1,(i=j.exec(o))&&(n=i.shift(),s.push({value:n,type:i[0].replace(M," ")}),o=o.slice(n.length)),r.filter)(i=G[a].exec(o))&&(!u[a]||(i=u[a](i)))&&(n=i.shift(),s.push({value:n,type:a,matches:i}),o=o.slice(n.length));if(!n)break}return t?o.length:o?Q.error(e):x(e,l).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,s=i||r,a=n&&"parentNode"===s,o=y++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,h=[_,o];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=t[v]||(t[v]={}),i&&C(t,i))t=t[r]||t;else{if((u=c[s])&&u[0]===_&&u[1]===o)return h[2]=u[2];if(c[s]=h,h[2]=e(t,n,l))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var s,a=[],o=0,l=e.length,u=null!=t;o<l;o++)(s=e[o])&&(!n||n(s,r,i))&&(a.push(s),u&&t.push(o));return a}function ge(e,t,n,r,i,s){return r&&!r[v]&&(r=ge(r)),i&&!i[v]&&(i=ge(i,s)),te(function(s,a,l,u){var c,h,d,f,p=[],g=[],v=a.length,_=s||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Q(e,t[r],n);return n}(t||"*",l.nodeType?[l]:l,[]),y=!e||!s&&t?_:pe(_,p,e,l,u);if(n?n(y,f=i||(s?e:v||r)?[]:a,l,u):f=y,r)for(c=pe(f,g),r(c,[],l,u),h=c.length;h--;)(d=c[h])&&(f[g[h]]=!(y[g[h]]=d));if(s){if(i||e){if(i){for(c=[],h=f.length;h--;)(d=f[h])&&c.push(y[h]=d);i(null,f=[],c,u)}for(h=f.length;h--;)(d=f[h])&&(c=i?o.call(s,d):p[h])>-1&&(s[c]=!(a[c]=d))}}else f=pe(f===a?f.splice(v,f.length):f),i?i(null,a,f,u):m.apply(a,f)})}function me(e){for(var t,n,i,a=e.length,l=r.relative[e[0].type],u=l||r.relative[" "],c=l?1:0,h=de(function(e){return e===t},u,!0),d=de(function(e){return o.call(t,e)>-1},u,!0),f=[function(e,n,r){var i=!l&&(r||n!=s)||((t=n).nodeType?h(e,n,r):d(e,n,r));return t=null,i}];c<a;c++)if(n=r.relative[e[c].type])f=[de(fe(f),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[v]){for(i=++c;i<a&&!r.relative[e[i].type];i++);return ge(c>1&&fe(f),c>1&&he(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(M,"$1"),n,c<i&&me(e.slice(c,i)),i<a&&me(e=e.slice(i)),i<a&&he(e))}f.push(n)}return fe(f)}function ve(e,t){var n,i=[],a=[],o=S[e+" "];if(!o){for(t||(t=ce(e)),n=t.length;n--;)(o=me(t[n]))[v]?i.push(o):a.push(o);o=S(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,l,c,h){var f,p,g,v=0,y="0",b=a&&[],x=[],S=s,C=a||i&&r.find.TAG("*",h),E=_+=null==S?1:Math.random()||.1,A=C.length;for(h&&(s=o==u||o||h);y!==A&&null!=(f=C[y]);y++){if(i&&f){for(p=0,!o&&f.ownerDocument!=u&&(le(f),l=!d);g=e[p++];)if(g(f,o||u,l)){m.call(c,f);break}h&&(_=E)}n&&((f=!g&&f)&&v--,a&&b.push(f))}if(v+=y,n&&y!==v){for(p=0;g=t[p++];)g(b,x,o,l);if(a){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=D.call(c));x=pe(x)}m.apply(c,x),h&&!a&&x.length>0&&v+t.length>1&&w.uniqueSort(c)}return h&&(_=E,s=S),b};return n?te(a):a}(a,i)),o.selector=e}return o}function _e(e,t,n,i){var s,a,o,l,u,c="function"==typeof e&&e,h=!i&&ce(e=c.selector||e);if(n=n||[],1===h.length){if((a=h[0]=h[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&9===t.nodeType&&d&&r.relative[a[1].type]){if(!(t=(r.find.ID(o.matches[0].replace(K,X),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(s=G.needsContext.test(e)?0:a.length;s--&&(o=a[s],!r.relative[l=o.type]);)if((u=r.find[l])&&(i=u(o.matches[0].replace(K,X),Z.test(a[0].type)&&oe(t.parentNode)||t))){if(a.splice(s,1),!(e=i.length&&he(a)))return m.apply(n,i),n;break}}return(c||ve(e,h))(i,t,!d,n,!t||Z.test(e)&&oe(t.parentNode)||t),n}ue.prototype=r.filters=r.pseudos,r.setFilters=new ue,f.sortStable=v.split("").sort(I).join("")===v,le(),f.sortDetached=ne(function(e){return 1&e.compareDocumentPosition(u.createElement("fieldset"))}),w.find=Q,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,Q.compile=ve,Q.select=_e,Q.setDocument=le,Q.tokenize=ce,Q.escape=w.escapeSelector,Q.getText=w.text,Q.isXML=w.isXMLDoc,Q.selectors=w.expr,Q.support=w.support,Q.uniqueSort=w.uniqueSort}();var P=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},B=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=w.expr.match.needsContext,R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function F(e,t,n){return p(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return o.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(F(this,e||[],!1))},not:function(e){return this.pushStack(F(this,e||[],!0))},is:function(e){return!!F(this,"string"==typeof e&&N.test(e)?w(e):e||[],!1).length}});var z,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||z,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),R.test(r[1])&&w.isPlainObject(t))for(r in t)p(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=m.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,z=w(m);var V=/^(?:parents|prev(?:Until|All))/,U={children:!0,contents:!0,next:!0,prev:!0};function H(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],a="string"!=typeof e&&w(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?w.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?o.call(w(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},parentsUntil:function(e,t,n){return P(e,"parentNode",n)},next:function(e){return H(e,"nextSibling")},prev:function(e){return H(e,"previousSibling")},nextAll:function(e){return P(e,"nextSibling")},prevAll:function(e){return P(e,"previousSibling")},nextUntil:function(e,t,n){return P(e,"nextSibling",n)},prevUntil:function(e,t,n){return P(e,"previousSibling",n)},siblings:function(e){return B((e.parentNode||{}).firstChild,e)},children:function(e){return B(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(U[e]||w.uniqueSort(i),V.test(e)&&i.reverse()),this.pushStack(i)}});var G=/[^\x20\t\r\n\f]+/g;function Y(e){return e}function W(e){throw e}function q(e,t,n,r){var i;try{e&&p(i=e.promise)?i.call(e).done(t).fail(n):e&&p(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(s){n.apply(void 0,[s])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(G)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,i,s=[],a=[],o=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;o=-1)for(n=a.shift();++o<s.length;)!1===s[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(o=s.length-1,a.push(n)),function t(n){w.each(n,function(n,r){p(r)?(!e.unique||!u.has(r))&&s.push(r):r&&r.length&&"string"!==y(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,s,n))>-1;)s.splice(n,1),n<=o&&o--}),this},has:function(e){return e?w.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=a=[],!n&&!t&&(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=p(e[r[4]])&&e[r[4]];s[r[1]](function(){var e=i&&i.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var s=0;function a(t,n,r,i){return function(){var o=this,l=arguments,u=function(){var e,u;if(!(t<s)){if((e=r.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(u)?i?u.call(e,a(s,n,Y,i),a(s,n,W,i)):(s++,u.call(e,a(s,n,Y,i),a(s,n,W,i),a(s,n,Y,n.notifyWith))):(r!==Y&&(o=void 0,l=[e]),(i||n.resolveWith)(o,l))}},c=i?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.error),t+1>=s&&(r!==W&&(o=void 0,l=[e]),n.rejectWith(o,l))}};t?c():(w.Deferred.getErrorHook?c.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(c.error=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,p(i)?i:Y,e.notifyWith)),n[1][3].add(a(0,e,p(t)?t:Y)),n[2][3].add(a(0,e,p(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},s={};return w.each(n,function(e,t){var a=t[2],o=t[5];i[t[1]]=a.add,o&&a.add(function(){r=o},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=a.fireWith}),i.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),s=i.call(arguments),a=w.Deferred(),o=function(e){return function(n){r[e]=this,s[e]=arguments.length>1?i.call(arguments):n,--t||a.resolveWith(r,s)}};if(t<=1&&(q(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||p(s[n]&&s[n].then)))return a.then();for(;n--;)q(s[n],o(n),a.reject);return a.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Z.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var K=w.Deferred();function X(){m.removeEventListener("DOMContentLoaded",X),e.removeEventListener("load",X),w.ready()}w.fn.ready=function(e){return K.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!(!0!==e&&--w.readyWait>0)&&K.resolveWith(m,[w]))}}),w.ready.then=K.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",X),e.addEventListener("load",X));var J=function(e,t,n,r,i,s,a){var o=0,l=e.length,u=null==n;if("object"===y(n))for(o in i=!0,n)J(e,t,o,n[o],!0,s,a);else if(void 0!==r&&(i=!0,p(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(w(e),n)})),t))for(;o<l;o++)t(e[o],n,a?r:r.call(e[o],o,t(e[o],n)));return i?e:u?t.call(e):l?t(e[0],n):s},$=/^-ms-/,Q=/-([a-z])/g;function ee(e,t){return t.toUpperCase()}function te(e){return e.replace($,"ms-").replace(Q,ee)}var ne=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function re(){this.expando=w.expando+re.uid++}re.uid=1,re.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ne(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[te(t)]=n;else for(r in t)i[te(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][te(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t)for((n=(t=Array.isArray(t)?t.map(te):(t=te(t))in r?[t]:t.match(G)||[]).length);n--;)delete r[t[n]];(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var ie=new re,se=new re,ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;function le(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(oe,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ae.test(e)?JSON.parse(e):e)}(n)}catch(i){}se.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return se.hasData(e)||ie.hasData(e)},data:function(e,t,n){return se.access(e,t,n)},removeData:function(e,t){se.remove(e,t)},_data:function(e,t,n){return ie.access(e,t,n)},_removeData:function(e,t){ie.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(i=se.get(s),1===s.nodeType&&!ie.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=te(r.slice(5)),le(s,r,i[r]));ie.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){se.set(this,e)}):J(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=se.get(s,e))||void 0!==(n=le(s,e))?n:void 0;this.each(function(){se.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){se.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ie.get(e,t),n&&(!r||Array.isArray(n)?r=ie.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,function(){w.dequeue(e,t)},s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ie.get(e,n)||ie.access(e,n,{empty:w.Callbacks("once memory").add(function(){ie.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),s=this,a=this.length,o=function(){--r||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=ie.get(s[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(o));return o(),i.promise(t)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),he=["Top","Right","Bottom","Left"],de=m.documentElement,fe=function(e){return w.contains(e.ownerDocument,e)},pe={composed:!0};de.getRootNode&&(fe=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument});var ge=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&fe(e)&&"none"===w.css(e,"display")};function me(e,t,n,r){var i,s,a=20,o=r?function(){return r.cur()}:function(){return w.css(e,t,"")},l=o(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),c=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+l)&&ce.exec(w.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)w.style(e,t,c+u),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),c/=s;c*=2,w.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var ve={};function _e(e){var t,n=e.ownerDocument,r=e.nodeName,i=ve[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ve[r]=i,i)}function ye(e,t){for(var n,r,i=[],s=0,a=e.length;s<a;s++)(r=e[s]).style&&(n=r.style.display,t?("none"===n&&(i[s]=ie.get(r,"display")||null,i[s]||(r.style.display="")),""===r.style.display&&ge(r)&&(i[s]=_e(r))):"none"!==n&&(i[s]="none",ie.set(r,"display",n)));for(s=0;s<a;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}w.fn.extend({show:function(){return ye(this,!0)},hide:function(){return ye(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ge(this)?w(this).show():w(this).hide()})}});var be=/^(?:checkbox|radio)$/i,xe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,we=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=m.createDocumentFragment().appendChild(m.createElement("div")),t=m.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),f.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",f.option=!!e.lastChild}();var Se={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ce(e,t){var n;return n=typeof e.getElementsByTagName<"u"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll<"u"?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?w.merge([e],n):n}function De(e,t){for(var n=0,r=e.length;n<r;n++)ie.set(e[n],"globalEval",!t||ie.get(t[n],"globalEval"))}Se.tbody=Se.tfoot=Se.colgroup=Se.caption=Se.thead,Se.th=Se.td,f.option||(Se.optgroup=Se.option=[1,"<select multiple='multiple'>","</select>"]);var Ee=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var s,a,o,l,u,c,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((s=e[f])||0===s)if("object"===y(s))w.merge(d,s.nodeType?[s]:s);else if(Ee.test(s)){for(a=a||h.appendChild(t.createElement("div")),o=(xe.exec(s)||["",""])[1].toLowerCase(),l=Se[o]||Se._default,a.innerHTML=l[1]+w.htmlPrefilter(s)+l[2],c=l[0];c--;)a=a.lastChild;w.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(r&&w.inArray(s,r)>-1)i&&i.push(s);else if(u=fe(s),a=Ce(h.appendChild(s),"script"),u&&De(a),n)for(c=0;s=a[c++];)we.test(s.type||"")&&n.push(s);return h}var ke=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function Te(){return!1}function Ie(e,t,n,r,i,s){var a,o;if("object"==typeof t){for(o in"string"!=typeof n&&(r=r||n,n=void 0),t)Ie(e,o,n,r,t[o],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===s&&(a=i,i=function(e){return w().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}function Oe(e,t,n){n?(ie.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var n,r=ie.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=i.call(arguments),ie.set(this,t,r),this[t](),n=ie.get(this,t),ie.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(ie.set(this,t,w.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Me)}})):void 0===ie.get(e,t)&&w.event.add(e,t,Me)}w.event={global:{},add:function(e,t,n,r,i){var s,a,o,l,u,c,h,d,f,p,g,m=ie.get(e);if(ne(e))for(n.handler&&(n=(s=n).handler,i=s.selector),i&&w.find.matchesSelector(de,i),n.guid||(n.guid=w.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return typeof w<"u"&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(G)||[""]).length;u--;)f=g=(o=ke.exec(t[u])||[])[1],p=(o[2]||"").split(".").sort(),f&&(h=w.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=w.event.special[f]||{},c=w.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:p.join(".")},s),(d=l[f])||((d=l[f]=[]).delegateCount=0,(!h.setup||!1===h.setup.call(e,r,p,a))&&e.addEventListener&&e.addEventListener(f,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[f]=!0)},remove:function(e,t,n,r,i){var s,a,o,l,u,c,h,d,f,p,g,m=ie.hasData(e)&&ie.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(G)||[""]).length;u--;)if(f=g=(o=ke.exec(t[u])||[])[1],p=(o[2]||"").split(".").sort(),f){for(h=w.event.special[f]||{},d=l[f=(r?h.delegateType:h.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)c=d[s],(i||g===c.origType)&&(!n||n.guid===c.guid)&&(!o||o.test(c.namespace))&&(!r||r===c.selector||"**"===r&&c.selector)&&(d.splice(s,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));a&&!d.length&&((!h.teardown||!1===h.teardown.call(e,p,m.handle))&&w.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)w.event.remove(e,f+t[u],n,r,!0);w.isEmptyObject(l)&&ie.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,a,o=new Array(arguments.length),l=w.event.fix(e),u=(ie.get(this,"events")||Object.create(null))[l.type]||[],c=w.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=w.event.handlers.call(this,l,u),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(s=i.handlers[n++])&&!l.isImmediatePropagationStopped();)(!l.rnamespace||!1===s.namespace||l.rnamespace.test(s.namespace))&&(l.handleObj=s,l.data=s.data,void 0!==(r=((w.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,o))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,s,a,o=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(s=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(u)>-1:w.find(i,this,null,[u]).length),a[i]&&s.push(r);s.length&&o.push({elem:u,handlers:s})}return u=this,l<t.length&&o.push({elem:u,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return be.test(t.type)&&t.click&&C(t,"input")&&Oe(t,"click",!0),!1},trigger:function(e){var t=this||e;return be.test(t.type)&&t.click&&C(t,"input")&&Oe(t,"click"),!0},_default:function(e){var t=e.target;return be.test(t.type)&&t.click&&C(t,"input")&&ie.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(m.documentMode){var n=ie.get(this,"handle"),r=w.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else w.event.simulate(t,e.target,w.event.fix(e))}w.event.special[e]={setup:function(){var r;if(Oe(this,e,!0),!m.documentMode)return!1;(r=ie.get(this,t))||this.addEventListener(t,n),ie.set(this,t,(r||0)+1)},trigger:function(){return Oe(this,e),!0},teardown:function(){var e;if(!m.documentMode)return!1;(e=ie.get(this,t)-1)?ie.set(this,t,e):(this.removeEventListener(t,n),ie.remove(this,t))},_default:function(t){return ie.get(t.target,e)},delegateType:t},w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=m.documentMode?this:r,s=ie.get(i,t);s||(m.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),ie.set(i,t,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=m.documentMode?this:r,s=ie.get(i,t)-1;s?ie.set(i,t,s):(m.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),ie.remove(i,t))}}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return(!r||r!==this&&!w.contains(this,r))&&(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return Ie(this,e,t,n,r)},one:function(e,t,n,r){return Ie(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){w.event.remove(this,e,n,t)})}});var Le=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ne(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Fe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,r,i,s,a,o;if(1===t.nodeType){if(ie.hasData(e)&&(o=ie.get(e).events))for(i in ie.remove(t,"handle events"),o)for(n=0,r=o[i].length;n<r;n++)w.event.add(t,i,o[i][n]);se.hasData(e)&&(s=se.access(e),a=w.extend({},s),se.set(t,a))}}function je(e,t){var n=t.nodeName.toLowerCase();"input"===n&&be.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function Ve(e,t,n,r){t=s(t);var i,a,o,l,u,c,h=0,d=e.length,g=d-1,m=t[0],v=p(m);if(v||d>1&&"string"==typeof m&&!f.checkClone&&Pe.test(m))return e.each(function(i){var s=e.eq(i);v&&(t[0]=m.call(this,i,s.html())),Ve(s,t,n,r)});if(d&&(a=(i=Ae(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(l=(o=w.map(Ce(i,"script"),Re)).length;h<d;h++)u=i,h!==g&&(u=w.clone(u,!0,!0),l&&w.merge(o,Ce(u,"script"))),n.call(e[h],u,h);if(l)for(c=o[o.length-1].ownerDocument,w.map(o,Fe),h=0;h<l;h++)u=o[h],we.test(u.type||"")&&!ie.access(u,"globalEval")&&w.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):_(u.textContent.replace(Be,""),u,c))}return e}function Ue(e,t,n){for(var r,i=t?w.filter(t,e):e,s=0;null!=(r=i[s]);s++)!n&&1===r.nodeType&&w.cleanData(Ce(r)),r.parentNode&&(n&&fe(r)&&De(Ce(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,s,a,o=e.cloneNode(!0),l=fe(e);if(!f.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!w.isXMLDoc(e))for(a=Ce(o),r=0,i=(s=Ce(e)).length;r<i;r++)je(s[r],a[r]);if(t)if(n)for(s=s||Ce(e),a=a||Ce(o),r=0,i=s.length;r<i;r++)ze(s[r],a[r]);else ze(e,o);return(a=Ce(o,"script")).length>0&&De(a,!l&&Ce(e,"script")),o},cleanData:function(e){for(var t,n,r,i=w.event.special,s=0;void 0!==(n=e[s]);s++)if(ne(n)){if(t=n[ie.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[ie.expando]=void 0}n[se.expando]&&(n[se.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return J(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ve(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return Ve(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(Ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!==e&&void 0!==e&&e,t=null!==t&&void 0!==t?t:e,this.map(function(){return w.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!Se[(xe.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ve(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(Ce(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),s=i.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),w(i[o])[t](n),a.apply(r,n.get());return this.pushStack(r)}});var He=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),Ge=/^--/,Ye=function(t){var n=t.ownerDocument.defaultView;return(!n||!n.opener)&&(n=e),n.getComputedStyle(t)},We=function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=s[i];return r},qe=new RegExp(he.join("|"),"i");function Ze(e,t,n){var r,i,s,a,o=Ge.test(t),l=e.style;return(n=n||Ye(e))&&(a=n.getPropertyValue(t)||n[t],o&&a&&(a=a.replace(M,"$1")||void 0),""===a&&!fe(e)&&(a=w.style(e,t)),!f.pixelBoxStyles()&&He.test(a)&&qe.test(t)&&(r=l.width,i=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=r,l.minWidth=i,l.maxWidth=s)),void 0!==a?a+"":a}function Ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",de.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);r="1%"!==t.top,l=12===n(t.marginLeft),c.style.right="60%",a=36===n(t.right),i=36===n(t.width),c.style.position="absolute",s=12===n(c.offsetWidth/3),de.removeChild(u),c=null}}function n(e){return Math.round(parseFloat(e))}var r,i,s,a,o,l,u=m.createElement("div"),c=m.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,n,r,i;return null==o&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",de.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),o=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,de.removeChild(t)),o}}))}();var Xe=["Webkit","Moz","ms"],Je=m.createElement("div").style,$e={};function Qe(e){return w.cssProps[e]||$e[e]||(e in Je?e:$e[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=ce.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,s){var a="width"===t?1:0,o=0,l=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+he[a],!0,i)),r?("content"===n&&(l-=w.css(e,"padding"+he[a],!0,i)),"margin"!==n&&(l-=w.css(e,"border"+he[a]+"Width",!0,i))):(l+=w.css(e,"padding"+he[a],!0,i),"padding"!==n?l+=w.css(e,"border"+he[a]+"Width",!0,i):o+=w.css(e,"border"+he[a]+"Width",!0,i));return!r&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-o-.5))||0),l+u}function st(e,t,n){var r=Ye(e),i=(!f.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),s=i,a=Ze(e,t,r),o="offset"+t[0].toUpperCase()+t.slice(1);if(He.test(a)){if(!n)return a;a="auto"}return(!f.boxSizingReliable()&&i||!f.reliableTrDimensions()&&C(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(s=o in e)&&(a=e[o])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),s,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,a,o=te(t),l=Ge.test(t),u=e.style;if(l||(t=Qe(o)),a=w.cssHooks[t]||w.cssHooks[o],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];if("string"===(s=typeof n)&&(i=ce.exec(n))&&i[1]&&(n=me(e,t,i),s="number"),null==n||n!==n)return;"number"===s&&!l&&(n+=i&&i[3]||(w.cssNumber[o]?"":"px")),!f.clearCloneStyle&&""===n&&0===t.indexOf("background")&&(u[t]="inherit"),(!a||!("set"in a)||void 0!==(n=a.set(e,n,r)))&&(l?u.setProperty(t,n):u[t]=n)}},css:function(e,t,n,r){var i,s,a,o=te(t);return Ge.test(t)||(t=Qe(o)),(a=w.cssHooks[t]||w.cssHooks[o])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ze(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(s=parseFloat(i),!0===n||isFinite(s)?s||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?st(e,t,r):We(e,tt,function(){return st(e,t,r)})},set:function(e,n,r){var i,s=Ye(e),a=!f.scrollboxSize()&&"absolute"===s.position,o=(a||r)&&"border-box"===w.css(e,"boxSizing",!1,s),l=r?it(e,t,r,o,s):0;return o&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-it(e,t,"border",!1,s)-.5)),l&&(i=ce.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),rt(0,n,l)}}}),w.cssHooks.marginLeft=Ke(f.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+he[r]+t]=s[r]||s[r-2]||s[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=rt)}),w.fn.extend({css:function(e,t){return J(this,function(e,t,n){var r,i,s={},a=0;if(Array.isArray(t)){for(r=Ye(e),i=t.length;a<i;a++)s[t[a]]=w.css(e,t[a],!1,r);return s}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=at,at.prototype={constructor:at,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}},at.prototype.init.prototype=at.prototype,at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Qe(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},at.propHooks.scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=at.prototype.init,w.fx.step={};var ot,lt,ut=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function ht(){lt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ht):e.setTimeout(ht,w.fx.interval),w.fx.tick())}function dt(){return e.setTimeout(function(){ot=void 0}),ot=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=he[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(gt.tweeners[t]||[]).concat(gt.tweeners["*"]),s=0,a=i.length;s<a;s++)if(r=i[s].call(n,t,e))return r}function gt(e,t,n){var r,i,s=0,a=gt.prefilters.length,o=w.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=ot||dt(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),s=0,a=u.tweens.length;s<a;s++)u.tweens[s].run(r);return o.notifyWith(e,[u,r,n]),r<1&&a?n:(a||o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||dt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u,t])):o.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var n,r,i,s,a;for(n in e)if(i=t[r=te(n)],s=e[n],Array.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in s=a.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);s<a;s++)if(r=gt.prefilters[s].call(u,e,c,u.opts))return p(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,pt,u),p(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(gt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return me(n.elem,e,ce.exec(t),n),n}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match(G);for(var n,r=0,i=e.length;r<i;r++)n=e[r],gt.tweeners[n]=gt.tweeners[n]||[],gt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,s,a,o,l,u,c,h="width"in t||"height"in t,d=this,f={},p=e.style,g=e.nodeType&&ge(e),m=ie.get(e,"fxshow");for(r in n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ut.test(i)){if(delete t[r],s=s||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||w.style(e,r)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=m&&m.display)&&(u=ie.get(e,"display")),"none"===(c=w.css(e,"display"))&&(u?c=u:(ye([e],!0),u=e.style.display||u,c=w.css(e,"display"),ye([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(e,"float")&&(l||(d.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=ie.access(e,"fxshow",{display:u}),s&&(m.hidden=!g),g&&ye([e],!0),d.done(function(){for(r in g||ye([e]),ie.remove(e,"fxshow"),f)w.style(e,r,f[r])})),l=pt(g?m[r]:0,r,d),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?gt.prefilters.unshift(e):gt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||p(e)&&e,duration:e,easing:n&&t||t&&!p(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){p(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),a=function(){var t=gt(this,w.extend({},e),s);(i||ie.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=w.timers,a=ie.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ct.test(i)&&r(a[i]);for(i=s.length;i--;)s[i].elem===this&&(null==e||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ie.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ft(t,!0),e,r,i)}}),w.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(ot=Date.now();t<n.length;t++)!(e=n[t])()&&n[t]===e&&n.splice(t--,1);n.length||w.fx.stop(),ot=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){lt||(lt=!0,ht())},w.fx.stop=function(){lt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var mt,vt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return J(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return typeof e.getAttribute>"u"?w.prop(e,t,n):((1!==s||!w.isXMLDoc(e))&&(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))||null!==(r=w.find.attr(e,t))&&void 0!==r?r:void 0)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&C(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(G);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vt[t]||w.find.attr;vt[t]=function(e,t,r){var i,s,a=t.toLowerCase();return r||(s=vt[a],vt[a]=i,i=null!=n(e,t,r)?a:null,vt[a]=s),i}});var _t=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function bt(e){return(e.match(G)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(G)||[]}w.fn.extend({prop:function(e,t){return J(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return(1!==s||!w.isXMLDoc(e))&&(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,i,s,a;return p(e)?this.each(function(t){w(this).addClass(e.call(this,t,xt(this)))}):(t=wt(e)).length?this.each(function(){if(r=xt(this),n=1===this.nodeType&&" "+bt(r)+" "){for(s=0;s<t.length;s++)i=t[s],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=bt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(e){var t,n,r,i,s,a;return p(e)?this.each(function(t){w(this).removeClass(e.call(this,t,xt(this)))}):arguments.length?(t=wt(e)).length?this.each(function(){if(r=xt(this),n=1===this.nodeType&&" "+bt(r)+" "){for(s=0;s<t.length;s++)for(i=t[s];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=bt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,s,a=typeof e,o="string"===a||Array.isArray(e);return p(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,xt(this),t),t)}):"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):(n=wt(e),this.each(function(){if(o)for(s=w(this),i=0;i<n.length;i++)r=n[i],s.hasClass(r)?s.removeClass(r):s.addClass(r);else(void 0===e||"boolean"===a)&&((r=xt(this))&&ie.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ie.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+bt(xt(n))+" ").indexOf(t)>-1)return!0;return!1}});var St=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=p(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(!(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])||!("set"in t)||void 0===t.set(this,i,"value"))&&(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(St,""):null!==n&&void 0!==n?n:"":void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!==t&&void 0!==t?t:bt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,a="select-one"===e.type,o=a?null:[],l=a?s+1:i.length;for(r=s<0?l:a?s:0;r<l;r++)if(((n=i[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,s=w.makeArray(t),a=i.length;a--;)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},f.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ct=e.location,Dt={guid:Date.now()},Et=/\?/;w.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){}return r=n&&n.getElementsByTagName("parsererror")[0],(!n||r)&&w.error("Invalid XML: "+(r?w.map(r.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var At=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,i){var s,a,o,l,u,h,d,f,v=[r||m],_=c.call(t,"type")?t.type:t,y=c.call(t,"namespace")?t.namespace.split("."):[];if(a=f=o=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!At.test(_+w.event.triggered)&&(_.indexOf(".")>-1&&(y=_.split("."),_=y.shift(),y.sort()),u=_.indexOf(":")<0&&"on"+_,(t=t[w.expando]?t:new w.Event(_,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[_]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!g(r)){for(l=d.delegateType||_,At.test(l+_)||(a=a.parentNode);a;a=a.parentNode)v.push(a),o=a;o===(r.ownerDocument||m)&&v.push(o.defaultView||o.parentWindow||e)}for(s=0;(a=v[s++])&&!t.isPropagationStopped();)f=a,t.type=s>1?l:d.bindType||_,(h=(ie.get(a,"events")||Object.create(null))[t.type]&&ie.get(a,"handle"))&&h.apply(a,n),(h=u&&a[u])&&h.apply&&ne(a)&&(t.result=h.apply(a,n),!1===t.result&&t.preventDefault());return t.type=_,!i&&!t.isDefaultPrevented()&&(!d._default||!1===d._default.apply(v.pop(),n))&&ne(r)&&u&&p(r[_])&&!g(r)&&((o=r[u])&&(r[u]=null),w.event.triggered=_,t.isPropagationStopped()&&f.addEventListener(_,kt),r[_](),t.isPropagationStopped()&&f.removeEventListener(_,kt),w.event.triggered=void 0,o&&(r[u]=o)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var Mt=/\[\]$/,Tt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Lt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||Mt.test(e)?r(e,i):Lt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==y(t))r(e,t);else for(i in t)Lt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=p(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null!==n&&void 0!==n?n:"")};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)Lt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Ot.test(this.nodeName)&&!It.test(e)&&(this.checked||!be.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}});var Pt=/%20/g,Bt=/#.*$/,Nt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,zt=/^\/\//,jt={},Vt={},Ut="*/".concat("*"),Ht=m.createElement("a");function Gt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(G)||[];if(p(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Yt(e,t,n,r){var i={},s=e===Vt;function a(o){var l;return i[o]=!0,w.each(e[o]||[],function(e,o){var u=o(t,n,r);return"string"!=typeof u||s||i[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Wt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Ht.href=Ct.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,w.ajaxSettings),t):Wt(w.ajaxSettings,e)},ajaxPrefilter:Gt(jt),ajaxTransport:Gt(Vt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,i,s,a,o,l,u,c,h,d,f=w.ajaxSetup({},n),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?w(p):w.event,v=w.Deferred(),_=w.Callbacks("once memory"),y=f.statusCode||{},b={},x={},S="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Rt.exec(s);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)C.always(e[C.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||S;return r&&r.abort(t),D(0,t),this}};if(v.promise(C),f.url=((t||f.url||Ct.href)+"").replace(zt,Ct.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){l=m.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ht.protocol+"//"+Ht.host!=l.protocol+"//"+l.host}catch(E){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),Yt(jt,f,n,C),u)return C;for(h in(c=w.event&&f.global)&&0===w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ft.test(f.type),i=f.url.replace(Bt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Et.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Nt,"$1"),d=(Et.test(i)?"&":"?")+"_="+Dt.guid+++d),f.url=i+d),f.ifModified&&(w.lastModified[i]&&C.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&C.setRequestHeader("If-None-Match",w.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ut+"; q=0.01":""):f.accepts["*"]),f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,C,f)||u))return C.abort();if(S="abort",_.add(f.complete),C.done(f.success),C.fail(f.error),r=Yt(Vt,f,n,C)){if(C.readyState=1,c&&g.trigger("ajaxSend",[C,f]),u)return C;f.async&&f.timeout>0&&(o=e.setTimeout(function(){C.abort("timeout")},f.timeout));try{u=!1,r.send(b,D)}catch(A){if(u)throw A;D(-1,A)}}else D(-1,"No Transport");function D(t,n,a,l){var h,m,b,x,S,D=n;u||(u=!0,o&&e.clearTimeout(o),r=void 0,s=l||"",C.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(x=function(e,t,n){for(var r,i,s,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in o)if(o[i]&&o[i].test(r)){l.unshift(i);break}if(l[0]in n)s=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){s=i;break}a||(a=i)}s=s||a}if(s)return s!==l[0]&&l.unshift(s),n[s]}(f,C,a)),!h&&w.inArray("script",f.dataTypes)>-1&&w.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),x=function(e,t,n,r){var i,s,a,o,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=u[l+" "+s]||u["* "+s]))for(i in u)if((o=i.split(" "))[1]===s&&(a=u[l+" "+o[0]]||u["* "+o[0]])){!0===a?a=u[i]:!0!==u[i]&&(s=o[0],c.unshift(o[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(f,x,C,h),h?(f.ifModified&&((S=C.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=S),(S=C.getResponseHeader("etag"))&&(w.etag[i]=S)),204===t||"HEAD"===f.type?D="nocontent":304===t?D="notmodified":(D=x.state,m=x.data,h=!(b=x.error))):(b=D,(t||!D)&&(D="error",t<0&&(t=0))),C.status=t,C.statusText=(n||D)+"",h?v.resolveWith(p,[m,D,C]):v.rejectWith(p,[C,D,b]),C.statusCode(y),y=void 0,c&&g.trigger(h?"ajaxSuccess":"ajaxError",[C,f,h?m:b]),_.fireWith(p,[C,D]),c&&(g.trigger("ajaxComplete",[C,f]),--w.active||w.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return p(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return p(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var qt={0:200,1223:204},Zt=w.ajaxSettings.xhr();f.cors=!!Zt&&"withCredentials"in Zt,f.ajax=Zt=!!Zt,w.ajaxTransport(function(t){var n,r;if(f.cors||Zt&&!t.crossDomain)return{send:function(i,s){var a,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)o[a]=t.xhrFields[a];for(a in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),!t.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest"),i)o.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(qt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),r=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=r:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{o.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var Kt=[],Xt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||w.expando+"_"+Dt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,a,o=!1!==t.jsonp&&(Xt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Xt,"$1"+i):!1!==t.jsonp&&(t.url+=(Et.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===s?w(e).removeProp(i):e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,Kt.push(i)),a&&p(s)&&s(a[0]),a=s=void 0}),"script"}),f.createHTMLDocument=function(){var e=m.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(f.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),s=!n&&[],(i=R.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,s),s&&s.length&&w(s).remove(),w.merge([],i.childNodes)));var r,i,s},w.fn.load=function(e,t,n){var r,i,s,a=this,o=e.indexOf(" ");return o>-1&&(r=bt(e.slice(o)),e=e.slice(0,o)),p(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,s,a,o,l,u=w.css(e,"position"),c=w(e),h={};"static"===u&&(e.style.position="relative"),o=c.offset(),s=w.css(e,"top"),l=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(s)||0,i=parseFloat(l)||0),p(t)&&(t=t.call(e,n,w.extend({},o))),null!=t.top&&(h.top=t.top-o.top+a),null!=t.left&&(h.left=t.left-o.left+i),"using"in t?t.using.call(e,h):c.css(h)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||de})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return J(this,function(e,r,i){var s;if(g(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=Ke(f.pixelPosition,function(e,n){if(n)return n=Ze(e,t),He.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,s){var a=arguments.length&&(n||"boolean"!=typeof i),o=n||(!0===i||!0===s?"margin":"border");return J(this,function(t,n,i){var s;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?w.css(t,n,o):w.style(t,n,i,o)},t,a?i:void 0,a)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Jt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,s;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return r=i.call(arguments,2),s=function(){return e.apply(t||this,r.concat(i.call(arguments)))},s.guid=e.guid=e.guid||w.guid++,s},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=C,w.isFunction=p,w.isWindow=g,w.camelCase=te,w.type=y,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Jt,"$1")};var $t=e.jQuery,Qt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Qt),t&&e.jQuery===w&&(e.jQuery=$t),w},typeof t>"u"&&(e.jQuery=e.$=w),w})}(br);const xr=_r(br.exports);function wr(){const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,t=window.devicePixelRatio||1,n=window.screen.width*t,r=window.screen.height*t;return!(!e||1125!==n||2436!==r)}function Sr(){return/android/i.test(navigator.userAgent)}function Cr(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}function Dr(){const e=navigator.userAgent||navigator.vendor||self.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}function Er(){const e="CSS1Compat"===document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}}function Ar(e,t,n){return(299*e+587*t+114*n)/1e3>=128?"black":"white"}function kr(e){return(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"}function Mr(e,t){return!(typeof t>"u"||null===typeof t)&&function(e,t){let n,r=t!==t;return r||"function"!=typeof Array.prototype.indexOf?(n=function(e,t){var n=-1,i=-1;for(n=0;n<e.length;n++){var s=e[n];if(r&&s!==s||s===t){i=n;break}}return i},n(e,t)>-1):(n=Array.prototype.indexOf,n.call(e,t)>-1)}(e,t)}function Tr(e){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16);return Math.sqrt(t*t*.241+n*n*.691+r*r*.068)}function Ir(e){return Tr(e)<130}function Or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,r,i="#";for(r=0;r<3;r++)n=parseInt(e.substr(2*r,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return i}function Lr(e,t,n,r){var i=new Image,s=xr("<canvas>"),a=s[0],o=a.getContext("2d");i.crossOrigin="anonymous",i.onload=function(){if(s.attr({width:i.width,height:i.height}),o=a.getContext("2d")){o.drawImage(i,0,0);let e=Rr(a,i.width,i.height,t,n);r&&r(e)}else alert("Get a real browser!")},i.src=e}async function Pr(e){return new Promise((t,n)=>{const r=new Image,i=xr("<canvas>");let s=i[0],a=s.getContext("2d");r.crossOrigin="anonymous",r.onload=function(){if(i.attr({width:r.width,height:r.height}),a=s.getContext("2d"),a){a.drawImage(r,0,0);let e=Br(s);t(e)}else n(new Error("HTML5 Canvas not supported"))},r.src=e})}function Br(e){const t=e.getContext("2d");if(!t)return null;const n=e.width,r=e.height,i=t.getImageData(0,0,e.width,e.height).data,s=(e,t)=>i[4*(n*t+e)+3],a=e=>e<10,o=e=>{const t=e?1:-1;for(var i=e?0:r-1;e?i<r:i>-1;i+=t)for(var o=0;o<n;o++)if(!a(s(o,i)))return i;return null},l=e=>{const t=e?1:-1;for(var i=e?0:n-1;e?i<n:i>-1;i+=t)for(var o=0;o<r;o++)if(!a(s(i,o)))return i;return null},u=o(!0),c=o(!1),h=l(!0),d=l(!1);if(null!=u&&null!=c&&null!=h&&null!=d){const t=d-h+1,n=c-u+1,r=xr("<canvas>").attr({width:t,height:n})[0];var f=r.getContext("2d");return f?(f.drawImage(e,h,u,t,n,0,0,t,n),f.getImageData(0,0,r.width,r.height),r.toDataURL()):null}return null}async function Nr(e,t,n){return new Promise((r,i)=>{const s=new Image,a=xr("<canvas>");let o=a[0],l=o.getContext("2d");s.crossOrigin="anonymous",s.onload=function(){if(a.attr({width:s.width,height:s.height}),l=o.getContext("2d"),l){l.drawImage(s,0,0);let e=Rr(o,s.width,s.height,t,n);r(e)}else i(new Error("HTML5 Canvas not supported"))},s.src=e})}function Rr(e,t,n,r,i){const s=e.getContext("2d");if(!s)return null;const a=s.getImageData(0,0,e.width,e.height).data,o=(e,n)=>a[4*(t*n+e)+3],l=e=>0===e,u=e=>{const r=e?1:-1;for(var i=e?0:n-1;e?i<n:i>-1;i+=r)for(var s=0;s<t;s++)if(!l(o(s,i)))return i;return null},c=e=>{const r=e?1:-1;for(var i=e?0:t-1;e?i<t:i>-1;i+=r)for(var s=0;s<n;s++)if(!l(o(i,s)))return i;return null},h=u(!0),d=u(!1),f=c(!0),p=c(!1);if(null!=h&&null!=d&&null!=f&&null!=p){const t=p-f,n=d-h,s=r,a=i,o=s/t,l=a/n;let u=t*o,c=n*o;c>a&&(u=t*l,c=n*l);const m=xr("<canvas>").attr({width:s,height:a})[0];var g=m.getContext("2d");return g?(g.drawImage(e,f,h,t,n,(s-u)/2,(a-c)/2,u,c),g.getImageData(0,0,m.width,m.height),m.toDataURL()):null}return null}async function Fr(e,t,n,r){return new Promise(i=>{const s=new Image;s.crossOrigin="anonymous",s.onload=function(){let e=xr("<canvas>")[0],a=e.getContext("2d");if(a){e.width=t,e.height=n;const o=Math.min(t/s.width,n/s.height),l=s.width*o,u=s.height*o;a.drawImage(s,0,0,s.width,s.height,(t-l+r)/2,(n-u+r)/2,l-r,u-r);const c=e.toDataURL();i(c)}},s.src=e})}function zr(e,t,n){var r=xr("<canvas>");r.attr({width:t,height:n});var i=r[0],s=i.getContext("2d");return s?(s.fillStyle=e,s.fillRect(0,0,t,n),i.toDataURL()):null}function jr(e,t){return e?e.match(new RegExp(".[^]{1,"+t+"}","g")):null}function Vr(e){let t,n,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)n=e.charCodeAt(t),r=(r<<5)-r+n,r|=0;return r}function Ur(e){var t=document.createElement("a");return t.href=e,t.href}function Hr(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:n})}function Gr(e,t){if("number"!=typeof e&&e<1)throw new RangeError("Length must be a positive integer!");void 0===t&&(t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");let n="";const r=t.length;for(var i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}async function Yr(e,t){return new Promise(n=>{const r=new Uint8Array(e),i=new Blob([r],{type:t}),s=(window.URL||window.webkitURL).createObjectURL(i),a=new Image;a.src=s,a.onload=async()=>{const e=document.createElement("canvas"),r=e.getContext("2d");e.width=a.width,e.height=a.height,r.translate(0,a.height),r.scale(1,-1),r.drawImage(a,0,0),e.toBlob(e=>{const t=new FileReader;t.addEventListener("loadend",()=>{const e=t.result;n(e)}),t.readAsArrayBuffer(e)},t)}})}function Wr(e){return e instanceof BABYLON.PBRMaterial}function qr(){const e=new URL(window.location.href);return new URLSearchParams(e.search)}class Zr{constructor(){this.previewFiles={}}downloadFiles(){function e(e,t){return-1!==e.indexOf(t,e.length-t.length)}for(let t in this.previewFiles){let n=null;const r=this.previewFiles[t];if(n="string"==typeof r?Hr(r):r,n){let r=null;if(e(t,".jpeg")?r={type:"image/jpeg"}:e(t,".png")&&(r={type:"image/png"}),r){let e=document.createElement("a");document.body.appendChild(e),e.setAttribute("type","hidden"),e.download=t,e.href=window.URL.createObjectURL(new Blob([n],r)),e.click()}}}}}class Kr{static async getPreviewsAsync(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];await e.whenReadyAsync();const s=new Xr(e,t,n,r),a=await s.getPreviewsAsync(i);return s.dispose(),a}static async downloadPreviewsAsync(e,t,n,r){(await Kr.getPreviewsAsync(e,t,n,r)).downloadFiles()}}class Xr{constructor(e,t,n,r){this._width=256,this._height=256,this._crop=!1,this._materials=[],this._localEngine=null,this._hostingScene=null,this._hostingSceneHelper=null,this._hostingMesh=null,this._scene=e,this._rootUrl=t,this._materialIDs=n,this._options=r||{},this.setupPreviewSize(),null!=this._options.crop&&(this._crop=this._options.crop),this.readMaterials()}dispose(){this.disposeHostingScene(),this.disposeLocalEngine()}getLocalEngine(){if(!this._localEngine){const e=document.createElement("canvas");e.id="MaterialPreviewCanvas",e.width=1024,e.height=1024,this._localEngine=new BABYLON.Engine(e,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0}),this._localEngine.setSize(this._width,this._height)}return this._localEngine}disposeLocalEngine(){this._localEngine&&this._localEngine.dispose()}disposeHostingScene(){this._hostingSceneHelper&&(this._hostingSceneHelper.dispose(),this._hostingSceneHelper=null),this._hostingScene&&(this._hostingScene.dispose(),this._hostingScene=null)}setupPreviewSize(){let e=this._options;null!=e.width&&null==e.height?(this._width=e.width,this._height=e.width):null==e.width&&null!=e.height?(this._width=e.height,this._height=e.height):null!=e.width&&null!=e.height&&(this._width=e.width,this._height=e.height)}readMaterials(){this._materialIDs.forEach(e=>{const t=this._scene.getMaterialByID(e);t&&this._materials.push(t)})}async downloadPreviewsAsync(){(await this.getPreviewsAsync()).downloadFiles()}async getPreviewsAsync(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getLocalEngine();this._hostingScene=new BABYLON.Scene(t),this._hostingSceneHelper=new kn(this._hostingScene),this._hostingSceneHelper.setupCamera();const n=this._hostingScene.activeCamera;return n&&(/firefox/i.test(navigator.userAgent)||new BABYLON.PassPostProcess("scale_pass",4,n,BABYLON.Texture.BILINEAR_SAMPLINGMODE),new BABYLON.PassPostProcess("scale_pass",2,n,BABYLON.Texture.BILINEAR_SAMPLINGMODE),new BABYLON.PassPostProcess("scale_pass",1,n,BABYLON.Texture.BILINEAR_SAMPLINGMODE)),new Promise(t=>{const n=new BABYLON.CubeTexture(Sn.Environment.EnvironmentTextureCDNUrl,this._hostingScene,null,!1,null,async()=>{if(!this._hostingScene||!this._hostingSceneHelper)return;this._hostingScene.environmentTexture=n,this._hostingSceneHelper.setupLights(),this._hostingMesh=this._hostingSceneHelper.createSphere(null),this._hostingSceneHelper.adjustCamera(void 0,void 0,void 0,!1);const r=new Zr;for(let t=0;t<this._materials.length;t++){const n=this._materials[t];await this.createMaterialPreviewFileAsync(n,r,e)}this.disposeHostingScene(),this.disposeLocalEngine(),t(r)},null,void 0,!0,void 0,!0)})}async createMaterialPreviewFileAsync(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._hostingScene&&this._hostingSceneHelper&&this._hostingMesh){const r=e.serialize(),i=BABYLON.Material.Parse(r,this._hostingScene,this._rootUrl);if(i){this._hostingMesh.material=i,await kn.whenMeshMaterialIsReady(this._hostingMesh),this._hostingScene.render();let e=await this._hostingSceneHelper.takeContentScreenshotAsync(this._width,this._height);if(this._crop){const t=await Pr(e);t&&(e=t)}let r=i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();r=this.getNextIncrementalName(r,".png",t)+".png",Logger.info("preview: "+r);let s=e;n&&(s=Hr(e)),t.previewFiles[r]=s}}}getNextIncrementalName(e,t,n){let r=e;if(e){let a,o=0;for(;n.previewFiles.hasOwnProperty(r+t);){if(!a){a=e;var i=e.lastIndexOf("_");if(i>0){var s=e.substring(i+1);parseInt(s).toString()===s&&(a=e.substring(0,i))}}o++,r=a+"_"+o}}return r}}class Jr{constructor(e,t,n,r){this._bias=50,this._invertR=!1,this._invertG=!1,this._preBlurEnabled=!1,this._preBlur=3,this._postBlurEnabled=!1,this._postBlur=3,this._bevel=!0,this._intensity=.5,this._activeTextures=[],this._preBlurXTexture=null,this._preBlurYTexture=null,this._normalMapTexture=null,this._postBlurXTexture=null,this._postBlurYTexture=null,this._baseTexture=e,this._size=t,this._scene=r,this.init(n)}init(e){for(this._bias=e.get("bias"),this._invertR=e.get("invertR"),this._invertG=e.get("invertG"),this._bevel=e.get("bevel"),this._intensity=e.get("intensity"),this._preBlurEnabled=e.get("preBlurEnabled"),this._preBlur=e.get("preBlur"),this._postBlurEnabled=e.get("postBlurEnabled"),this._postBlur=e.get("postBlur");this._activeTextures.length>0;)this._activeTextures.pop();this.updateTextures()}updateTextures(){let e=this.updatePreBlurTexture();e=this.updateNormalmapTexture(e),e=this.updatePostBlurTexture(e)}updatePreBlurTexture(){let e=this._baseTexture;return this._preBlurEnabled&&(this._preBlurXTexture?this._preBlurXTexture.baseTexture=this._baseTexture:this._preBlurXTexture=new In("preBlurX",this._size,this._scene,this._baseTexture,void 0,!1),this._preBlurXTexture.beginInit(),this._preBlurXTexture.blur=this._preBlur,this._preBlurXTexture.refreshRate=0,this._preBlurXTexture.endInit(),this._activeTextures.push(this._preBlurXTexture),this._preBlurYTexture?this._preBlurYTexture.baseTexture=this._preBlurXTexture:this._preBlurYTexture=new Pn("preBlurY",this._size,this._scene,this._preBlurXTexture,void 0,!1),this._preBlurYTexture.beginInit(),this._preBlurYTexture.blur=this._preBlur,this._preBlurYTexture.refreshRate=0,this._preBlurYTexture.endInit(),this._activeTextures.push(this._preBlurYTexture),e=this._preBlurYTexture),e}updateNormalmapTexture(e){return this._normalMapTexture?this._normalMapTexture.baseTexture=e:this._normalMapTexture=new Wn("procNormal",this._size,this._scene,e,void 0,!1),this._normalMapTexture.beginInit(),this._normalMapTexture.bias=this._bias,this._normalMapTexture.invertR=this._invertR,this._normalMapTexture.invertG=this._invertG,this._normalMapTexture.bevel=this._bevel,this._normalMapTexture.intensity=this._intensity,this._normalMapTexture.refreshRate=0,this._normalMapTexture.endInit(),this._activeTextures.push(this._normalMapTexture),this._normalMapTexture}updatePostBlurTexture(e){let t=e;return this._postBlurEnabled&&(this._postBlurXTexture?this._postBlurXTexture.baseTexture=e:this._postBlurXTexture=new In("postBlurX",this._size,this._scene,e,void 0,!1),this._postBlurXTexture&&(this._postBlurXTexture.beginInit(),this._postBlurXTexture.blur=this._postBlur,this._postBlurXTexture.refreshRate=0,this._postBlurXTexture.endInit(),this._activeTextures.push(this._postBlurXTexture),this._postBlurYTexture?this._postBlurYTexture.baseTexture=this._postBlurXTexture:this._postBlurYTexture=new Pn("postBlurY",this._size,this._scene,this._postBlurXTexture,void 0,!1),this._postBlurYTexture&&(this._postBlurYTexture.beginInit(),this._postBlurYTexture.blur=this._postBlur,this._postBlurYTexture.refreshRate=0,this._postBlurYTexture.endInit(),this._activeTextures.push(this._postBlurYTexture),t=this._postBlurYTexture))),t}dispose(){this._preBlurXTexture&&(this._preBlurXTexture.dispose(),this._preBlurXTexture=null),this._preBlurYTexture&&(this._preBlurYTexture.dispose(),this._preBlurYTexture=null),this._normalMapTexture&&(this._normalMapTexture.dispose(),this._normalMapTexture=null),this._postBlurXTexture&&(this._postBlurXTexture.dispose(),this._postBlurXTexture=null),this._postBlurYTexture&&(this._postBlurYTexture.dispose(),this._postBlurYTexture=null)}async getNormalMapTextureAsync(e,t){return await this.updateAsync(e,t),this._activeTextures.length>0?this._activeTextures[this._activeTextures.length-1]:null}async updateAsync(e,t){if(this.init(t),this._activeTextures.length>0){this._activeTextures[0].baseTexture=e;for(var n=0;n<this._activeTextures.length;n++)await this._activeTextures[n].isReadyAsync(),this._activeTextures[n].render()}}}class $r{constructor(e,t,n,r){this._baseTexture=e,this._size=t,this._scene=r,this._mask=new Rn("mask",this._size,this._scene,this._baseTexture),this._mask.backColor=new BABYLON.Vector3(0,0,0),this._mask.foreColor=new BABYLON.Vector3(1,1,1),this._mask.refreshRate=0,this._shadow=new Rn("shadow",this._size,this._scene,this._baseTexture),this._shadow.backColor=new BABYLON.Vector3(.1,.1,.1),this._shadow.foreColor=new BABYLON.Vector3(1,1,1),this._shadow.refreshRate=0,this._shadowBlurX=new In("shadow_blurX",this._size,this._scene,this._shadow),this._shadowBlurX.blur=5,this._shadowBlurX.refreshRate=0,this._shadowBlurY=new Pn("shadow_blurY",this._size,this._scene,this._shadowBlurX),this._shadowBlurY.blur=5,this._shadowBlurY.refreshRate=0,this._shadowMove=new jn("shadow_move",this._size,this._scene,this._shadowBlurY),this._shadowMove.offset=new BABYLON.Vector2(2.5,2.5),this._shadowMove.refreshRate=0,this._lightmap=new Hn("lightmap",this._size,this._scene,this._shadowMove,this._mask),this._lightmap.refreshRate=0,this.updateParameters(n)}updateParameters(e){if(e){let t=new BABYLON.Vector3(0,0,0);if(e.get("color")){const n=BABYLON.Color3.FromHexString(e.get("color"));t=new BABYLON.Vector3(n.r,n.g,n.b)}this._shadow.backColor=t;let n=1,r=135;void 0!==e.get("angle")&&null!==e.get("angle")&&(r=e.get("angle")),null!=e.get("distance")&&null!==e.get("distance")&&(n=e.get("distance"));let i=r*Math.PI/180;i=this.wrapPi(i);const s=Math.cos(i)*n,a=Math.sin(i)*n;this._shadowMove.offset=new BABYLON.Vector2(-s,a);let o=5;void 0!==e.get("size")&&null!==e.get("size")&&(o=Math.max(0,Math.min(100,e.get("size")))),this._shadowBlurX.blur=o,this._shadowBlurY.blur=o}}wrapPi(e){if(Math.abs(e)>Math.PI){var t=2*Math.PI;e-=Math.floor((e+Math.PI)*(1/t))*t}return e}dispose(){this._mask.dispose(),this._shadow.dispose(),this._shadowBlurX.dispose(),this._shadowBlurY.dispose(),this._shadowMove.dispose(),this._lightmap.dispose()}async getInnerShadowTextureAsync(e){return await this.updateAsync(e),this._lightmap}async updateAsync(e,t){this.updateParameters(t),this._baseTexture=e,await kn.whenTextureIsReadyAsync(this._baseTexture),this._mask.baseTexture=this._baseTexture,await this._mask.isReadyAsync(),this._mask.render(),this._shadow.baseTexture=this._baseTexture,await this._shadow.isReadyAsync(),this._shadow.render(),await this._shadowBlurX.isReadyAsync(),this._shadowBlurX.render(),await this._shadowBlurY.isReadyAsync(),this._shadowBlurY.render(),await this._shadowMove.isReadyAsync(),this._shadowMove.render(),await this._lightmap.isReadyAsync(),this._lightmap.render()}}class Qr{constructor(e,t,n,r){this._size=t,this._baseTexture=e,this._scene=r,this._shadow=new Rn("shadow",this._size,this._scene,this._baseTexture),this._shadow.backColor=new BABYLON.Vector3(1,1,1),this._shadow.foreColor=new BABYLON.Vector3(.2,.2,.2),this._shadow.refreshRate=0,this._shadowBlurX=new In("shadow_blurX",this._size,this._scene,this._shadow),this._shadowBlurX.blur=15,this._shadowBlurX.refreshRate=0,this._shadowBlurY=new Pn("shadow_blurY",this._size,this._scene,this._shadowBlurX),this._shadowBlurY.blur=15,this._shadowBlurY.refreshRate=0,this._shadowMove=new jn("shadow_move",this._size,this._scene,this._shadowBlurY),this._shadowMove.offset=new BABYLON.Vector2(2.5,2.5),this._shadowMove.refreshRate=0,this.updateParameters(n)}updateParameters(e){if(e){var t=new BABYLON.Vector3(0,0,0);if(e.get("color")){var n=BABYLON.Color3.FromHexString(e.get("color"));t=new BABYLON.Vector3(n.r,n.g,n.b)}this._shadow.foreColor=t;let r=1,i=135;void 0!==e.get("angle")&&null!==e.get("angle")&&(i=e.get("angle")),null!=e.get("distance")&&null!==e.get("distance")&&(r=e.get("distance"));let s=i*Math.PI/180;s=this.wrapPi(s);const a=Math.cos(s)*r,o=Math.sin(s)*r;this._shadowMove.offset=new BABYLON.Vector2(-a,o);let l=5;void 0!==e.get("size")&&null!==e.get("size")&&(l=Math.max(0,Math.min(100,e.get("size")))),this._shadowBlurX.blur=l,this._shadowBlurY.blur=l}}wrapPi(e){if(Math.abs(e)>Math.PI){var t=2*Math.PI;e-=Math.floor((e+Math.PI)*(1/t))*t}return e}dispose(){this._shadow.dispose(),this._shadowBlurX.dispose(),this._shadowBlurY.dispose(),this._shadowMove.dispose()}async getOuterShadowTextureAsync(e){return await this.updateAsync(e),this._shadowMove}async updateAsync(e,t){this.updateParameters(t),this._baseTexture=e,await kn.whenTextureIsReadyAsync(this._baseTexture),this._shadow.baseTexture=this._baseTexture,await this._shadow.isReadyAsync(),this._shadow.render(),await this._shadowBlurX.isReadyAsync(),this._shadowBlurX.render(),await this._shadowBlurY.isReadyAsync(),this._shadowBlurY.render(),await this._shadowMove.isReadyAsync(),this._shadowMove.render()}}function ei(e,t,n){var r;return void 0===t&&(t=50),void 0===n&&(n={isImmediate:!1}),function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=this,o=n.isImmediate&&void 0===r;void 0!==r&&clearTimeout(r),r=setTimeout(function(){r=void 0,n.isImmediate||e.apply(a,i)},t),o&&e.apply(a,i)}}globalThis&&globalThis.__awaiter,globalThis&&globalThis.__generator;const ti=/android/i.test(navigator.userAgent),ni=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,ri=class e{constructor(t,n,r,i,s,a,o){let l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;this._subMesh=null,this._isRefreshing=!1,this._showDesign=!0,this._viewRotation=0,this._designTextureResolution=1024,this._effect=null,this._meshSide=null,this._side=null,this._isDisposed=!1,this._baseWidth=e.DEFAULT_SIZE,this._baseHeight=e.DEFAULT_SIZE,this._textureWidth=e.DEFAULT_SIZE,this._textureHeight=e.DEFAULT_SIZE,this._coordinatesIndex=0,this._currentVisibliity=!0,this._canvasMesh=null,this._originalCanvasMeshPosition=null,this._originalCanvasMeshScaling=null,this._normalmapMaterial=null,this._originalMaterial=null,this._blankDataUrl=null,this._innerCanvasMesh=null,this._outerCanvasMesh=null,this._ownDynamicMaterial=!1,this._dynamicMaterial=null,this._dynamicTexture=null,this._normalmapTexture=null,this._dynamicOpacityTexture=null,this._ownOldDynamicMaterial=!1,this._oldDynamicMaterial=null,this._originalDiffuseTexture=null,this._combinedDiffuseTexture=null,this._originalMeshNormalmapTexture=null,this._originalDesignNormalmapTexture=null,this._meshCombinedNormalmapTexture=null,this._designCombinedNormalmapTexture=null,this._originalMeshLightmapTexture=null,this._originalDesignLightmapTexture=null,this._meshCombinedLightmapTexture=null,this._designCombinedLightmapTexture=null,this._innerShadowTexture=null,this._outerShadowTexture=null,this._context=null,this._canvas=null,this._canvasID=Zakeke.generateUUID(),this._customizer=null,this._renderingNeededListeners=[],this._proceduralNormalMap=null,this._innerShadowGenerator=null,this._outerShadowGenerator=null,this._debouncedUpdateDynamicTexture=null,this._originalViewMatrixValues=null,this._grids=[],this.isFirstRender=!0,this._scene=t,this._sceneHelper=new kn(t),this._zkScene=n,this._mesh=r,this._subMesh=i,this._zkModel=s,this._zkDesign=a,this._grids=o,this._showDesign=l,this._viewRotation=c,u&&(this._effect=u)}get showDesign(){return this._showDesign}set showDesign(e){this._showDesign!=e&&(this._showDesign=e)}get rotation(){return this._viewRotation}set rotation(e){this._viewRotation!=e&&(this._viewRotation=e)}get side(){return this._side}getInternalCustomizer(){return this._customizer}static async createMeshDesignManagerAsync(t,n,r,i,s,a,o){const l=new e(t,n,r,i,s,a,o,!(arguments.length>7&&void 0!==arguments[7])||arguments[7],arguments.length>8?arguments[8]:void 0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0);return await l.initAsync(),l}async initAsync(){const e=this._zkScene.get("rootUrl");e&&await this._sceneHelper.unsetMeshDummyMaterialAsync(this._mesh,e,!0),this.setupMeshSide(),this.setupTextureSize(),this.checkDefaultEffect(),this.refreshModelSide(),await this.setupClonedObjectsAsync(),await this.setupCanvasAsync(),await this.setupDynamicMaterialAsync(),await this.refreshAsync()}isForMesh(e,t){return!(!e||!this._mesh||e.id!==this._mesh.id)&&(!this._subMesh&&!t||!(!this._subMesh||!t)&&t.materialIndex===this._subMesh.materialIndex)}getMeshID(){return this._mesh?this._mesh.id:null}getSubMeshIdx(){return this._subMesh?this._subMesh.materialIndex:0}getMaterialIDForDesign(){let e;return this._effect&&this._effect.get("materialID")?e=this._effect.get("materialID"):this._mesh&&this._mesh.metadata&&this._mesh.metadata.designMaterialID?e=this._mesh.metadata.designMaterialID:this._meshSide&&this._meshSide.get("materialID")&&(e=this._meshSide.get("materialID")),e}getDesignConfig(){let e;return this._effect&&this._effect.get("config")?e=this._effect.get("config"):this._meshSide&&this._meshSide.get("config")&&(e=this._meshSide.get("config")),e||(e=new MPlaza.MeshDesignConfig),e}dispose(){this._isDisposed=!0,this._customizer&&(this._customizer.clearMemoryForIOS(),this._customizer=null),this.disposeOuterInnerCanvasMeshes(),this._canvasMesh&&(this._canvasMesh.dispose(),this._canvasMesh=null,this._originalCanvasMeshPosition=null,this._originalCanvasMeshScaling=null),this.disposeDynamicMaterial(),this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.dispose(),this._dynamicOpacityTexture=null),this._dynamicTexture&&(this._dynamicTexture.dispose(),this._dynamicTexture=null),this._renderingNeededListeners=[],$("#"+this._canvasID).remove(),this.restoreOrignalMaterial(),this.disposeNormalmapMaterial(),this._proceduralNormalMap&&(this._proceduralNormalMap.dispose(),this._proceduralNormalMap=null),this._innerShadowGenerator&&(this._innerShadowGenerator.dispose(),this._innerShadowGenerator=null),this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.dispose(),this._combinedDiffuseTexture=null),this._meshCombinedNormalmapTexture&&(this._meshCombinedNormalmapTexture.dispose(),this._meshCombinedNormalmapTexture=null),this._designCombinedNormalmapTexture&&(this._designCombinedNormalmapTexture.dispose(),this._designCombinedNormalmapTexture=null),this._meshCombinedLightmapTexture&&(this._meshCombinedLightmapTexture.dispose(),this._meshCombinedLightmapTexture=null),this._designCombinedLightmapTexture&&(this._designCombinedLightmapTexture.dispose(),this._designCombinedLightmapTexture=null)}disposeOuterInnerCanvasMeshes(){this._innerCanvasMesh&&(this._innerCanvasMesh.dispose(),this._innerCanvasMesh=null),this._outerCanvasMesh&&(this._outerCanvasMesh.dispose(),this._outerCanvasMesh=null)}disposeNormalmapMaterial(){this._normalmapMaterial&&this._originalMaterial&&this._normalmapMaterial.id!==this._originalMaterial.id&&0==this._sceneHelper.getMeshesUsingMaterial(this._normalmapMaterial.id).length&&(this._normalmapMaterial.dispose(),this._normalmapMaterial=null),this._originalMeshNormalmapTexture=null,this._originalMeshLightmapTexture=null}disposeDynamicMaterial(){this._ownDynamicMaterial&&this._dynamicMaterial&&this._dynamicMaterial.dispose(),this._dynamicMaterial=null,this._originalDesignNormalmapTexture=null,this._originalDesignLightmapTexture=null}disposeOldDynamicMaterial(){this._ownOldDynamicMaterial&&this._oldDynamicMaterial&&this._dynamicMaterial&&this._oldDynamicMaterial!=this._dynamicMaterial&&this._oldDynamicMaterial.dispose(),this._oldDynamicMaterial=null}createCanvasMeshClone(e){if(this._canvasMesh){const t=this._canvasMesh.clone(e+" - clone outer",null);if(t)return t.id=Zakeke.generateUUID(),this._canvasMesh.metadata&&void 0!==this._canvasMesh.metadata.AR&&null!==this._canvasMesh.metadata.AR&&(t.metadata||(t.metadata={}),t.metadata.AR=this._canvasMesh.metadata.AR),t}return null}expandCanvasMesh(){if(!this._mesh||!this._canvasMesh)return;this.disposeOuterInnerCanvasMeshes();const e=this.getMeshHierarchySize(this._mesh),t=this.getMeshHierarchySize(this._canvasMesh);if(!e.equals(t))return;const n=.004;if(this._outerCanvasMesh=this.createCanvasMeshClone(this._mesh.name+" outer clone"),this._canvasMesh.isVisible=!1,this._outerCanvasMesh)if(Math.abs(e.x)<=.01||Math.abs(e.y)<=.01||Math.abs(e.z)<=.01){const e=this._mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind),t=BABYLON.Vector3.FromArray(e,0).normalize();this._outerCanvasMesh.position=this._outerCanvasMesh.position.add(t.scale(.2))}else{const e=[...this._canvasMesh.getVerticesData(BABYLON.VertexBuffer.PositionKind)],t=[...this._canvasMesh.getVerticesData(BABYLON.VertexBuffer.NormalKind)];for(var r=0;r<e.length;r+=3){const i=new BABYLON.Vector3(t[r],t[r+1],t[r+2]),s=new BABYLON.Vector3(e[r]+i.x*n,e[r+1]+i.y*n,e[r+2]+i.z*n);e[r]=s.x,e[r+1]=s.y,e[r+2]=s.z}const i=BABYLON.VertexData.ExtractFromMesh(this._canvasMesh,!0,!0);i.positions=e;const s=new BABYLON.Geometry(this._canvasMesh.name+" outer geometry",this._scene);i.applyToGeometry(s),s.applyToMesh(this._outerCanvasMesh),this._scene.render()}}expandCanvasMesh_old(){if(!this._mesh||!this._canvasMesh)return;const e=1.01,t=this.getMeshHierarchySize(this._mesh),n=this.getMeshHierarchySize(this._canvasMesh);if(t.equals(n))if(Math.abs(t.x)<=.1||Math.abs(t.y)<=.1||Math.abs(t.z)<=.1){let e=this._mesh.getVerticesData(BABYLON.VertexBuffer.NormalKind),t=BABYLON.Vector3.FromArray(e,0).normalize();this._canvasMesh.position=this._canvasMesh.position.add(t.scale(.01))}else{let t=this._canvasMesh.scaling;t=t.multiplyByFloats(e,e,e),this._canvasMesh.scaling=t;let n=this.getMeshHierarchyCenter(this._mesh),r=this.getMeshHierarchyCenter(this._canvasMesh);const i=n.subtract(r);i.equals(BABYLON.Vector3.Zero())||this._canvasMesh.position.addInPlace(i)}}contractCanvasMesh(){this._canvasMesh&&(this._canvasMesh.isVisible=!0),this.disposeOuterInnerCanvasMeshes()}contractCanvasMesh_old(){if(!this._mesh||!this._canvasMesh||!this._originalCanvasMeshScaling||!this._originalCanvasMeshPosition)return;this._canvasMesh.scaling=this._originalCanvasMeshScaling,this._canvasMesh.position=this._originalCanvasMeshPosition;const e=this.getMeshHierarchyCenter(this._mesh),t=this.getMeshHierarchyCenter(this._canvasMesh),n=e.subtract(t);n.equals(BABYLON.Vector3.Zero())||this._canvasMesh.position.addInPlace(n)}setupMeshSide(){if(this._meshSide=null,this._coordinatesIndex=0,this._zkModel&&this._mesh&&this._mesh.id)for(let n=0;n<this._zkModel.get("scenes").length;n++){var e=this._zkModel.get("scenes").at(n);if(e.get("isDefault"))for(let n=0;n<e.get("meshSides").length;n++){var t=e.get("meshSides").at(n);if(t.get("meshID")==this._mesh.id)return this._meshSide=t,void(this._meshSide.get("uvChannel")>=0&&(this._coordinatesIndex=this._meshSide.get("uvChannel")))}}}setupTextureSize(){var t,n,r,i;this._meshSide&&(ti||ni?ti?(this._baseWidth=null!==(r=this._meshSide.getOrCreateConfig().getMobileTextureResolutionWidth())&&void 0!==r?r:e.DEFAULT_SIZE,this._baseHeight=null!==(i=this._meshSide.getOrCreateConfig().getMobileTextureResolutionHeight())&&void 0!==i?i:e.DEFAULT_SIZE):ni&&(this._baseWidth=512,this._baseHeight=512):(this._baseWidth=null!==(t=this._meshSide.getOrCreateConfig().getDesktopTextureResolutionWidth())&&void 0!==t?t:e.DEFAULT_SIZE,this._baseHeight=null!==(n=this._meshSide.getOrCreateConfig().getDesktopTextureResolutionHeight())&&void 0!==n?n:e.DEFAULT_SIZE)),console.log("Texture size: "+this._baseWidth+"x"+this._baseHeight)}checkDefaultEffect(){if(!this._effect&&this._meshSide){var e=this._meshSide.getParentModel();if(e&&e instanceof MPlaza.ModelScene){let t=this.getMeshID();if(t){let n=e.getDefaultDesignEffect(t,this.getSubMeshIdx());n&&(this._effect=n)}}}}getAllSides(){const e=[];return this._zkModel.get("colors").each(t=>{t.get("sides").each(t=>{e.find(e=>e.get("sideID")==t.get("sideID"))||e.push(t)})}),e}refreshModelSide(){if(this._side=null,this._meshSide&&this._zkDesign){const e=this._meshSide.get("sideID"),t=this._meshSide.tempID;let n=null;if(n=this.getAllSides().find(function(t){return t.get("sideID")==e})||null,n){let r=null;for(const i of this._zkDesign.get("designItems").models)if(r=i,r.isOnSide(n)){const i=r&&r.get("areas").length>0?r.get("areas").at(0).get("colorID"):null;i&&this._zkModel.get("colors").each(function(r){r.get("colorID")==i&&r.get("sides").each(function(r){(r.tempID?r.tempID==t:r.get("sideID")==e)&&(n=r)})});break}this._side=n}}}async setupClonedObjectsAsync(){if(this._side){for(var e=0;e<this._scene.meshes.length;e++){let t=this._scene.meshes[e];if(t&&t.metadata&&t.metadata.originalMeshID&&t.metadata.originalMeshID==this._mesh.id){this._canvasMesh=t,this._canvasMesh.isVisible=this._currentVisibliity,this._normalmapMaterial=this._mesh.material,this._originalMeshNormalmapTexture=this.getMaterialNormalmap(this._normalmapMaterial),this._originalMeshLightmapTexture=this.getMaterialLightmap(this._normalmapMaterial);break}}if(!this._canvasMesh){let e=this._mesh.name+" - clone";this._canvasMesh=this._mesh.clone(e,null),this._canvasMesh&&(this._canvasMesh.id=Zakeke.generateUUID(),this._canvasMesh.isVisible=this._currentVisibliity,this._canvasMesh.doNotSerialize=!0,this._canvasMesh.isPickable=!1,this._canvasMesh.metadata={},this._canvasMesh.metadata.originalMeshID=this._mesh.id,this._canvasMesh.metadata.isRealMesh=!1,this._canvasMesh.metadata.iscanvasMesh=!0,this._mesh.metadata&&void 0!==this._mesh.metadata.AR&&null!==this._mesh.metadata.AR&&(this._canvasMesh.metadata.AR=this._mesh.metadata.AR))}this._canvasMesh&&(this._originalCanvasMeshPosition=this._canvasMesh.position,this._originalCanvasMeshScaling=this._canvasMesh.scaling),this._normalmapMaterial||await this.setupNormalmapMaterialAsync()}}async setupNormalmapMaterialAsync(){this.disposeNormalmapMaterial(),this._originalMaterial=this._mesh.material;let e=Zakeke.generateUUID(),t="normalmapMaterial - "+e;this._originalMaterial?(t=this._originalMaterial.name+" - normalmap",this._normalmapMaterial=await this.cloneMaterialAsync(this._originalMaterial,t)):this._normalmapMaterial=new BABYLON.StandardMaterial(t,this._scene),this._normalmapMaterial&&(this._normalmapMaterial.id=e,this._normalmapMaterial.doNotSerialize=!0,this._normalmapMaterial.metadata={},this._originalMaterial?this._normalmapMaterial.metadata.originalMaterialID=this._originalMaterial.id:this._normalmapMaterial.metadata.originalMaterialID=null,this._normalmapMaterial.metadata.isRealMaterial=!1,this._originalMeshNormalmapTexture=this.getMaterialNormalmap(this._normalmapMaterial),this._originalMeshLightmapTexture=this.getMaterialLightmap(this._normalmapMaterial))}getMaterialDiffuseTexturePropertyName(e){return e instanceof BABYLON.StandardMaterial?"diffuseTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial?"baseTexture":e instanceof BABYLON.PBRSpecularGlossinessMaterial?"diffuseTexture":e instanceof BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial?"albedoTexture":"diffuseTexture"}getMaterialOpacityTexturePropertyName(e){return e instanceof BABYLON.StandardMaterial?"opacityTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?null:(e instanceof BABYLON.PBRMaterial||Zakeke.PBRMaterial,"opacityTexture")}getMaterialNormalmapTexturePropertyName(e){return e instanceof BABYLON.StandardMaterial?"bumpTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?"normalTexture":(e instanceof BABYLON.PBRMaterial||Zakeke.PBRMaterial,"bumpTexture")}getMaterialLightmapTexturePropertyName(e){return e instanceof BABYLON.StandardMaterial?"ambientTexture":e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?"occlusionTexture":e instanceof BABYLON.PBRMaterial?"ambientTexture":e instanceof Zakeke.PBRMaterial?"aoTexture":"lightmapTexture"}getMaterialDiffuse(e){return e[this.getMaterialDiffuseTexturePropertyName(e)]}getMaterialNormalmap(e){return e?e[this.getMaterialNormalmapTexturePropertyName(e)]:null}getMaterialLightmap(e){return e?e[this.getMaterialLightmapTexturePropertyName(e)]:null}getMaterialOpacity(e){if(!e)return null;let t=this.getMaterialOpacityTexturePropertyName(e);return t?e[t]:null}setMaterialLightmap(e,t){if(e){var n=this.getMaterialLightmapTexturePropertyName(e);n&&(e[n]=t,e instanceof Zakeke.PBRMaterial&&(e.useAOTextureAsLightmap=!0))}}setTextureWrapping(e){e&&(e.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,e.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE)}async setupCanvasAsync(){if(this._side&&this._canvasMesh&&this._meshSide&&!this._isRefreshing){this._isRefreshing=!0;var e=this._baseWidth;this._meshSide.get("percWidth")>0&&(e*=this._meshSide.get("percWidth"));var t=this._baseHeight;this._meshSide.get("percHeight")>0&&(t*=this._meshSide.get("percHeight")),this._textureWidth=e,this._textureHeight=t;var n=$("<canvas>",{id:this._canvasID}).attr({width:e,height:t});this._canvas=n[0],this._context=this._canvas.getContext("2d"),this._context&&(this._context.imageSmoothingQuality="high",this._context.imageSmoothingEnabled=!0,this._customizer=new MPlaza.Customizer(!0,!1,this._canvas,!0),this._blankDataUrl=this._canvas.toDataURL(),this._customizer.showSideImage=!1,this._customizer.model=this._zkModel,this._customizer.fitToScreenMargin=this._zkScene.getFitToScreenMargin(),this._customizer.setGrids(this._grids),this._customizer.setDesign(this._zkDesign),await new Promise(async e=>{var t,n;await(null==(t=this._customizer)?void 0:t.setSide(this._side)),null==(n=this._customizer)||n.refresh({boundsToAreas:!0},async()=>{if(this._customizer){if(this._meshSide){let e=this._meshSide.get("matrix");if(e){const t=JSON.parse(e);let n=new this._customizer.paper.Matrix(t);this._customizer.paper.view.matrix=n,this._customizer.paper.view.update()}}await this.updateDynamicTextureAsync(),this._customizer.addItemCreatedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()}),this._customizer.addItemChangedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()}),this._customizer.addItemRemovedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()}),this._customizer.addImageLoadedListener(async()=>{await this.updateDynamicTextureAsync(),this.fireRenderingNeededEvent()})}e()})}))}this._isRefreshing=!1}setCustomizerGrids(e){var t;this._grids=e,null==(t=this._customizer)||t.setGrids(e)}restoreOrignalMaterial(){this._mesh&&this._originalMaterial&&this._mesh.material&&this._normalmapMaterial&&this._mesh.material.id===this._normalmapMaterial.id&&(this._mesh.material=this._originalMaterial)}getMeshesUsingMaterial(e){for(var t=[],n=this._scene.meshes,r=0;r<n.length;r++){var i=n[r];if(i.material)if(i.material.id==e)t.push(i);else if(i.material instanceof BABYLON.MultiMaterial)for(var s=0;s<i.material.subMaterials.length;s++){let n=i.material.subMaterials[s];if(null!=n&&n.id===e){t.push(i);break}}}return t}async checkNormalmapMaterialAsync(){this._mesh&&this._normalmapMaterial&&(!this._mesh.material||this._mesh.material.id!==this._normalmapMaterial.id)&&await this.setupNormalmapMaterialAsync()}async checkDynamicMaterialAsync(){let e=this.getMaterialIDForDesign();e&&this._side&&this._canvasMesh&&this._meshSide&&this._dynamicMaterial&&this._dynamicMaterial.id!=e&&await this.setupDynamicMaterialAsync()}async setupDynamicMaterialAsync(){if(this._side&&this._canvasMesh&&this._meshSide){this._ownOldDynamicMaterial=this._ownDynamicMaterial,this._oldDynamicMaterial=this._dynamicMaterial;var e=this.getMaterialIDForDesign();if(e){let t=this._scene.getMaterialById(e);t&&(this._dynamicMaterial=await this.cloneMaterialAsync(t,t.name+" - clone"),this._ownDynamicMaterial=!0)}if(!this._dynamicMaterial){if(this._mesh.material&&this._mesh.material instanceof BABYLON.PBRBaseMaterial){const e=new BABYLON.PBRMaterial("dynamicMaterial",this._scene);e.enableSpecularAntiAliasing=!0,e.backFaceCulling=!1,e.albedoColor=BABYLON.Color3.White(),e.reflectivityColor=BABYLON.Color3.Black(),e.transparencyMode=this._zkScene.getDefaultDesignMaterialTransparencyMode(),e.useAlphaFromAlbedoTexture=!0,null!=this._mesh.material.subSurface.indexOfRefraction&&(e.subSurface.indexOfRefraction=this._mesh.material.subSurface.indexOfRefraction),Wr(this._mesh.material)&&null!=this._mesh.material.roughness&&(e.roughness=this._mesh.material.roughness),Wr(this._mesh.material)&&null!=this._mesh.material.metallic&&(e.metallic=this._mesh.material.metallic),Wr(this._mesh.material)&&null!=this._mesh.material.reflectionTexture&&(e.reflectionTexture=this._mesh.material.reflectionTexture),Wr(this._mesh.material)&&null!=this._mesh.material.microSurface&&(e.microSurface=this._mesh.material.microSurface),this._dynamicMaterial=e}else this._dynamicMaterial=new BABYLON.StandardMaterial("dynamicMaterial",this._scene),this._dynamicMaterial.backFaceCulling=!1,this._dynamicMaterial.specularColor=BABYLON.Color3.Black(),this._dynamicMaterial.ambientColor=BABYLON.Color3.White(),this._dynamicMaterial.diffuseColor=BABYLON.Color3.White();this._dynamicMaterial.id=Zakeke.generateUUID(),this._ownDynamicMaterial=!0}this._dynamicMaterial.zOffset=-1,this._dynamicMaterial.metadata={isRealMaterial:!1},this._dynamicMaterial.doNotSerialize=this._ownDynamicMaterial,this._originalDiffuseTexture=this.getMaterialDiffuse(this._dynamicMaterial),this._originalDesignNormalmapTexture=this.getMaterialNormalmap(this._dynamicMaterial),this._originalDesignLightmapTexture=this.getMaterialLightmap(this._dynamicMaterial)}}async cloneMaterialAsync(e,t){if(e){e.getActiveTextures().forEach(async e=>{await kn.whenTextureIsReadyAsync(e)});var n=t||e.name+" - clone";if(e instanceof BABYLON.ShaderMaterial){const t=this._zkScene.get("rootUrl");if(!t)return null;let n=e.serialize();return BABYLON.Material.Parse(n,this._scene,t)}return e.clone(n)}return null}getMeshHierarchySize(e){let t=e.getHierarchyBoundingVectors(!0);return t.max.subtract(t.min)}getMeshHierarchyCenter(e){let t=e.getHierarchyBoundingVectors(!0),n=t.max.subtract(t.min);return t.min.add(n.scale(.5))}async refreshAsync(e){this._isRefreshing||(this._isRefreshing=!0,typeof e<"u"&&(this._effect=e),await this.checkDynamicMaterialAsync(),await this.checkNormalmapMaterialAsync(),this.refreshModelSide(),await new Promise(async e=>{var t,n,r;if(this._meshSide&&this.side&&this._customizer){if(await(null==(t=this._customizer)?void 0:t.setSide(this.side)),await(null==(n=this._customizer)?void 0:n.updateGrids()),null==(r=this._customizer)||r.adaptZoomToSideAreas(!1),this._meshSide&&this._customizer){let e=this._meshSide.get("matrix");if(e){const t=JSON.parse(e);let n=new this._customizer.paper.Matrix(t);if(this._customizer.paper.view.matrix=n,this._customizer.paper.view.rotation+=-this._viewRotation,1024!==this._textureWidth){const e=1024/this._textureWidth;let t=new paper.Matrix;t=t.scale(1/e,1/e);const r=n.prepend(t);this._customizer.paper.view.matrix=r}}else this._customizer.paper.view.rotation=-this._viewRotation;this._customizer.paper.view.update()}await this.updateDynamicTextureAsync(),e()}else e()}),this._isRefreshing=!1)}async updateDynamicTextureAsync(){if(this.isFirstRender)return console.log("First render..."),await this.updateDynamicTextureInternalAsync(),void(this.isFirstRender=!1);this._debouncedUpdateDynamicTexture||(this._debouncedUpdateDynamicTexture=ei(this.updateDynamicTextureInternalAsync,150)),this._debouncedUpdateDynamicTexture()}async updateDynamicTextureInternalAsync(){if(Logger.info("updateDynamicTextureInternal"),!this._side||!this._meshSide||!this._canvas||!this._canvasMesh||!this._dynamicMaterial)return;const e=this.getDesignConfig();await this.checkDynamicMaterialAsync(),await this.checkNormalmapMaterialAsync();let t=e.getDiffuseEnabled(),n=e.getDiffuseBlendMode(),r=e.getDiffuseLevel();"normal"!==n&&"multiply"!==n&&"overlay"!==n&&(n="normal");const i=e.getOpacityEnabled();e.getOrCreateOpacityConfig();const s=e.getNormalmapEnabled(),a=e.getOrCreateNormalmapConfig(),o=e.getInnerShadowEnabled(),l=e.getOrCreateInnerShadowConfig(),u=e.getOuterShadowEnabled(),c=e.getOrCreateOuterShadowConfig();let h="diffuseTexture";const d=this._meshSide.get("materialTexture");h=d||this.getMaterialDiffuseTexturePropertyName(this._dynamicMaterial);let f=this.getMaterialOpacityTexturePropertyName(this._dynamicMaterial),p=this._dynamicTexture;p&&p.dispose();let g=this._canvas.toDataURL(),m=g==this._blankDataUrl,v=this.dataURItoBlob(g),_=(window.URL||window.webkitURL).createObjectURL(v);this._dynamicTexture=new BABYLON.Texture(_,this._scene),this._dynamicTexture.hasAlpha=!0,await kn.whenTextureIsReadyAsync(this._dynamicTexture),!m&&this._dynamicTexture&&(s&&await this.updateNormalmapTextureAsync(a),o&&await this.updateInnerShadowTextureAsync(l),u&&await this.updateOuterShadowTextureAsync(c),i&&await this.updateOpacityTextureAsync(),this._originalDiffuseTexture&&t&&"normal"!==n&&await this.combineDiffuseTexturesAsync(n,r),this._showDesign&&(t&&h&&("normal"!==n&&this._originalDiffuseTexture&&this._combinedDiffuseTexture?this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._combinedDiffuseTexture),this._dynamicMaterial[h]=this._combinedDiffuseTexture):(this._dynamicTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._dynamicTexture),this._dynamicMaterial[h]=this._dynamicTexture),this._dynamicMaterial[h].hasAlpha=!1,this._dynamicMaterial[h].hasAlpha=!0),!t&&h&&!this.compareTextures(this._dynamicMaterial[h],this._originalDiffuseTexture)&&(this._dynamicMaterial[h]=this._originalDiffuseTexture),i&&f&&this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(this._dynamicOpacityTexture),this._dynamicMaterial instanceof BABYLON.ShaderMaterial?this._dynamicMaterial.setTexture(f,this._dynamicOpacityTexture):this._dynamicMaterial[f]=this._dynamicOpacityTexture),!i&&f&&(this._dynamicMaterial[f]=null),this._canvasMesh.material!==this._dynamicMaterial&&(this._canvasMesh.material=this._dynamicMaterial),s&&this._normalmapTexture?await this.setNormalmapTextureAsync(a):(this.resetMeshNormalmapTexture(),this.resetDesignNormalmapTexture()),o&&this._innerShadowTexture?await this.setInnerShadowTextureAsync(l):this.removeInnerShadowTexture(),u&&this._outerShadowTexture?await this.setOuterShadowTextureAsync(c):this.removeOuterShadowTexture(),this.disposeOldDynamicMaterial(),this._canvasMesh.isVisible=this._currentVisibliity&&e.getShowDesign())),m&&(this._canvasMesh.isVisible=!1),this.fireRenderingNeededEvent()}resetDynamicTextures(){if(this._dynamicMaterial){let e="diffuseTexture";const t=this._meshSide?this._meshSide.get("materialTexture"):null;e=t||this.getMaterialDiffuseTexturePropertyName(this._dynamicMaterial),e&&!this.compareTextures(this._dynamicMaterial[e],this._originalDiffuseTexture)&&(this._dynamicMaterial[e]=this._originalDiffuseTexture||new BABYLON.Texture(this._blankDataUrl,this._scene),this._dynamicMaterial[e].hasAlpha=!1,this._dynamicMaterial[e].hasAlpha=!0),this.resetDesignNormalmapTexture();let n=this.getMaterialOpacityTexturePropertyName(this._dynamicMaterial);n&&(this._dynamicMaterial[n]=null),this.removeInnerShadowTexture()}this._normalmapMaterial&&(this.resetMeshNormalmapTexture(),this.removeOuterShadowTexture())}async updateOpacityTextureAsync(){this._dynamicTexture&&(await kn.whenTextureIsReadyAsync(this._dynamicTexture),this._dynamicOpacityTexture||(this._dynamicOpacityTexture=new Rn("dynamicOpacity",this._textureWidth,this._scene,this._dynamicTexture),this._dynamicOpacityTexture.backColor=new BABYLON.Vector3(0,0,0),this._dynamicOpacityTexture.foreColor=new BABYLON.Vector3(1,1,1),this._dynamicOpacityTexture.refreshRate=0,this._dynamicOpacityTexture.getAlphaFromRGB=!0),this._dynamicOpacityTexture&&(this._dynamicOpacityTexture.baseTexture=this._dynamicTexture,await kn.whenTextureIsReadyAsync(this._dynamicOpacityTexture),this._dynamicOpacityTexture.render()))}async combineDiffuseTexturesAsync(e,t){if(!this._originalDiffuseTexture||!this._dynamicTexture)return;await kn.whenTextureIsReadyAsync(this._originalDiffuseTexture),await kn.whenTextureIsReadyAsync(this._dynamicTexture);const n=0===t?this._dynamicTexture:this._originalDiffuseTexture,r=0===t?this._originalDiffuseTexture:this._dynamicTexture;this._combinedDiffuseTexture||(this._combinedDiffuseTexture="multiply"==e?new Hn("multiplyDiffuse",this._textureWidth,this._scene,n,r):new $n("overlayDiffuse",this._textureWidth,this._scene,n,r),this._combinedDiffuseTexture.refreshRate=0),this._combinedDiffuseTexture&&(this._combinedDiffuseTexture.baseTexture=n,this._combinedDiffuseTexture.blendTexture=r,await kn.whenTextureIsReadyAsync(this._combinedDiffuseTexture),this._combinedDiffuseTexture.render())}async updateNormalmapTextureAsync(e){this._dynamicTexture&&(await kn.whenTextureIsReadyAsync(this._dynamicTexture),this._proceduralNormalMap||(this._proceduralNormalMap=new Jr(this._dynamicTexture,this._textureWidth,e,this._scene)),this._normalmapTexture=await this._proceduralNormalMap.getNormalMapTextureAsync(this._dynamicTexture,e),this._normalmapTexture&&(this._normalmapTexture.coordinatesIndex=this._coordinatesIndex))}async setNormalmapTextureAsync(e){var t;let n=this._normalmapTexture,r=this._normalmapTexture;if(e.get("showOnMesh")&&this._originalMeshNormalmapTexture&&this._normalmapTexture&&(await this.combineMeshNormalmapTexturesAsync(),this._meshCombinedNormalmapTexture&&(n=this._meshCombinedNormalmapTexture)),e.get("showOnDesign")&&this._originalDesignNormalmapTexture&&this._normalmapTexture&&(await this.combineDesignNormalmapTexturesAsync(),this._designCombinedNormalmapTexture&&(r=this._designCombinedNormalmapTexture)),this._normalmapMaterial&&n){n.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(n);const r=this.getMaterialNormalmapTexturePropertyName(this._normalmapMaterial);e.get("showOnMesh")?this._normalmapMaterial[r]=n:this.resetMeshNormalmapTexture(),this._mesh.material!==this._normalmapMaterial&&(this._mesh.material=this._normalmapMaterial,this._mesh.metadata||(this._mesh.metadata={}),this._mesh.metadata.originalNormalmapMaterialID=null==(t=this._originalMaterial)?void 0:t.id)}if(this._dynamicMaterial&&r){r.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(r);const t=this.getMaterialNormalmapTexturePropertyName(this._dynamicMaterial);e.get("showOnDesign")?this._dynamicMaterial[t]=r:this.resetDesignNormalmapTexture()}}async combineMeshNormalmapTexturesAsync(){!this._originalMeshNormalmapTexture||!this._normalmapTexture||(await kn.whenTextureIsReadyAsync(this._originalMeshNormalmapTexture),await kn.whenTextureIsReadyAsync(this._normalmapTexture),this._meshCombinedNormalmapTexture||(this._meshCombinedNormalmapTexture=new $n("overlayMeshNormal",this._textureWidth,this._scene,this._originalMeshNormalmapTexture,this._normalmapTexture),this._meshCombinedNormalmapTexture.refreshRate=0),this._meshCombinedNormalmapTexture&&(this._meshCombinedNormalmapTexture.baseTexture=this._originalMeshNormalmapTexture,this._meshCombinedNormalmapTexture.blendTexture=this._normalmapTexture,await kn.whenTextureIsReadyAsync(this._meshCombinedNormalmapTexture),this._meshCombinedNormalmapTexture.render()))}resetMeshNormalmapTexture(){if(this._normalmapMaterial){const e=this.getMaterialNormalmapTexturePropertyName(this._normalmapMaterial);this.compareTextures(this._normalmapMaterial[e],this._originalMeshNormalmapTexture)||(this._originalMeshNormalmapTexture?this._normalmapMaterial[e]=this._originalMeshNormalmapTexture:this._normalmapMaterial[e]=null)}}resetDesignNormalmapTexture(){if(this._dynamicMaterial){const e=this.getMaterialNormalmapTexturePropertyName(this._dynamicMaterial);this.compareTextures(this._dynamicMaterial[e],this._originalDesignNormalmapTexture)||(this._originalDesignNormalmapTexture?this._dynamicMaterial[e]=this._originalDesignNormalmapTexture:this._dynamicMaterial[e]=null)}}async combineDesignNormalmapTexturesAsync(){!this._originalDesignNormalmapTexture||!this._normalmapTexture||(await kn.whenTextureIsReadyAsync(this._originalDesignNormalmapTexture),await kn.whenTextureIsReadyAsync(this._normalmapTexture),this._designCombinedNormalmapTexture||(this._designCombinedNormalmapTexture=new $n("overlayDesignNormal",this._textureWidth,this._scene,this._originalDesignNormalmapTexture,this._normalmapTexture),this._designCombinedNormalmapTexture.refreshRate=0),this._designCombinedNormalmapTexture&&(this._designCombinedNormalmapTexture.baseTexture=this._originalDesignNormalmapTexture,this._designCombinedNormalmapTexture.blendTexture=this._normalmapTexture,await kn.whenTextureIsReadyAsync(this._designCombinedNormalmapTexture),this._designCombinedNormalmapTexture.render()))}async updateInnerShadowTextureAsync(e){this._dynamicTexture&&(await kn.whenTextureIsReadyAsync(this._dynamicTexture),this._innerShadowGenerator?await this._innerShadowGenerator.updateAsync(this._dynamicTexture,e):(this._innerShadowGenerator=new $r(this._dynamicTexture,this._textureWidth,e,this._scene),this._innerShadowTexture=await this._innerShadowGenerator.getInnerShadowTextureAsync(this._dynamicTexture),this._innerShadowTexture.coordinatesIndex=this._coordinatesIndex))}async setInnerShadowTextureAsync(e){let t=this._innerShadowTexture;this._originalDesignLightmapTexture&&this._innerShadowTexture&&(await this.combineDesignLightmapTexturesAsync(),this._designCombinedLightmapTexture&&(t=this._designCombinedLightmapTexture)),t&&(t.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(t),this.setMaterialLightmap(this._dynamicMaterial,t))}async combineDesignLightmapTexturesAsync(){!this._originalDesignLightmapTexture||!this._innerShadowTexture||(await kn.whenTextureIsReadyAsync(this._originalDesignLightmapTexture),await kn.whenTextureIsReadyAsync(this._innerShadowTexture),this._designCombinedLightmapTexture||(this._designCombinedLightmapTexture=new Hn("overlayDesignLightmaps",this._textureWidth,this._scene,this._originalDesignLightmapTexture,this._innerShadowTexture),this._designCombinedLightmapTexture.refreshRate=0),this._designCombinedLightmapTexture&&(this._designCombinedLightmapTexture.baseTexture=this._originalDesignLightmapTexture,this._designCombinedLightmapTexture.blendTexture=this._innerShadowTexture,await kn.whenTextureIsReadyAsync(this._designCombinedLightmapTexture),this._designCombinedLightmapTexture.render()))}removeInnerShadowTexture(){if(this._dynamicMaterial){let e=this.getMaterialLightmap(this._dynamicMaterial),t=this._originalDesignLightmapTexture;this.compareTextures(e,t)||this.setMaterialLightmap(this._dynamicMaterial,t)}}async updateOuterShadowTextureAsync(e){this._dynamicTexture&&(await kn.whenTextureIsReadyAsync(this._dynamicTexture),this._outerShadowGenerator?await this._outerShadowGenerator.updateAsync(this._dynamicTexture,e):(this._outerShadowGenerator=new Qr(this._dynamicTexture,this._textureWidth,e,this._scene),this._outerShadowTexture=await this._outerShadowGenerator.getOuterShadowTextureAsync(this._dynamicTexture),this._outerShadowTexture.coordinatesIndex=this._coordinatesIndex))}async setOuterShadowTextureAsync(e){let t=this._outerShadowTexture;this._originalMeshLightmapTexture&&this._outerShadowTexture&&(await this.combineMeshLightmapTexturesAsync(),this._meshCombinedLightmapTexture&&(t=this._meshCombinedLightmapTexture)),t&&(t.coordinatesIndex=this._coordinatesIndex,this.setTextureWrapping(t),this.setMaterialLightmap(this._normalmapMaterial,t),this._mesh.material!==this._normalmapMaterial&&(this._mesh.material=this._normalmapMaterial))}async combineMeshLightmapTexturesAsync(){!this._originalMeshLightmapTexture||!this._outerShadowTexture||this._isDisposed||(await kn.whenTextureIsReadyAsync(this._originalMeshLightmapTexture),await kn.whenTextureIsReadyAsync(this._outerShadowTexture),this._meshCombinedLightmapTexture||(this._meshCombinedLightmapTexture=new Hn("overlayMeshLightmap",this._textureWidth,this._scene,this._originalMeshLightmapTexture,this._outerShadowTexture),this._meshCombinedLightmapTexture.refreshRate=0),this._meshCombinedLightmapTexture&&(this._meshCombinedLightmapTexture.baseTexture=this._originalMeshLightmapTexture,this._meshCombinedLightmapTexture.blendTexture=this._outerShadowTexture,await kn.whenTextureIsReadyAsync(this._meshCombinedLightmapTexture),this._meshCombinedLightmapTexture.render()))}removeOuterShadowTexture(){if(this._normalmapMaterial){const e=this.getMaterialLightmap(this._normalmapMaterial),t=this._originalMeshLightmapTexture;this.compareTextures(e,t)||this.setMaterialLightmap(this._normalmapMaterial,t)}}compareTextures(e,t){return typeof e>"u"&&typeof t>"u"||null===e&&null===t||!(!e||!t)&&e===t}dataURItoBlob(e){let t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),i=new Uint8Array(r);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return new Blob([r],{type:n})}downloadImage(e,t){let n=this.dataURItoBlob(e),r=window.URL.createObjectURL(n),i=t||"image.png",s=document.createElement("a");s.download=i,s.innerHTML="Download File",s.href=r,s.onclick=e=>{document.body.removeChild(s)},s.style.display="none",s.setAttribute("type","hidden"),document.body.appendChild(s),s.click()}setDesignMeshVisibility(e){this._currentVisibliity=e,this._canvasMesh&&(this._canvasMesh.isVisible=e)}getItemsInfo(){return this._customizer?this._customizer.getItemsInfo():[]}removeItem(e){this._customizer&&this._customizer.removeItemByGuid(e)}addItemText(e){this._customizer&&this._customizer.addTextElement(null,e,!1)}setItemText(e,t){this._customizer&&this._customizer.modifyTextElementContentByGuid(e,t)}setItemBold(e,t){if(this._customizer){let n=this._customizer.findItemByGuid(e);if(n){let e=this._customizer.getTextItemInfo(n).fontWeight.split(" "),r=[e.length>1?e[0]:"normal"];r.push(t?"bold":"normal"),this._customizer.modifyTextElementFontWeight(n,r.join(" "))}}}setItemItalic(e,t){if(this._customizer){let n=this._customizer.findItemByGuid(e);if(n){let e=this._customizer.getTextItemInfo(n).fontWeight.split(" "),r=[t?"italic":"normal"];r.push(e.length>1?e[1]:e[0]),this._customizer.modifyTextElementFontWeight(n,r.join(" "))}}}setItemColor(e,t){this._customizer&&this._customizer.modifyTextElementFillColorByGuid(e,t)}setItemFontFamily(e,t){this._customizer&&this._customizer.modifyTextElementFontFamilyByGuid(e,t)}async addItemImage(e){this._customizer&&await this._customizer.insertImageById(e)}async setItemImage(e,t){this._customizer&&await this._customizer.replaceImageByGuid(e,t)}setItemTextOnPath(e,t){if(this._customizer){let n=this._customizer.findItemByGuid(e);t?this._customizer.convertToTextOnPath(n):this._customizer.convertToTextArea(n)}}removeItemImage(e){this._customizer&&this._customizer.removeImageByGuid(e)}containsItem(e){if(this._customizer){const t=this._customizer.findItemByGuid(e);return null!=t&&null!=t}return!1}addNotifyMessageListener(e){if(this._customizer){const t=this._customizer;let n=ei((n,r,i,s,a,o,l,u,c)=>{e(t.side.getSideID(),n,r,i,s,a,u.requiredWidth,u.requiredHeight,c)},50);t.addNotifyMessageListeners(n)}}addRemoveMessageListener(e){if(this._customizer){const t=this._customizer;let n=ei(n=>{e(t.side.getSideID(),n)},50);t.addRemoveMessageListeners(n)}}setEventMessages(e){this._customizer&&this._customizer.setCustomizedMessages(e)}fireRenderingNeededEvent(){for(let e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}addRenderingNeededListener(e){this._renderingNeededListeners.push(e)}translateDesignView(e,t){if(this._meshSide&&this._customizer){let s=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values);var n=JSON.parse(s),r=this._customizer.getTranslatedMatrixValues(n,e,t),i=JSON.stringify(r);this._meshSide.set("matrix",i)}}rotateDesignView(e,t,n){if(this._meshSide&&this._customizer){var r=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),i=JSON.parse(r),s=this._customizer.getRotatedMatrixValues(i,e,t,n),a=JSON.stringify(s);this._meshSide.set("matrix",a)}}scaleDesignView(e,t,n,r){if(this._meshSide&&this._customizer){var i=this._meshSide.get("matrix")||JSON.stringify(this._customizer.paper.view.matrix.values),s=JSON.parse(i),a=this._customizer.getScaledMatrixValues(s,e,t,n,r),o=JSON.stringify(a);this._meshSide.set("matrix",o)}}async setDesignViewTextureUVChannelAsync(e){this._meshSide&&(this._meshSide.set("uvChannel",e),await this.updateDynamicTextureAsync())}async setDesignViewFormFactorAsync(e,t){this._meshSide&&(this._meshSide.set("percWidth",e),this._meshSide.set("percHeight",t),await this.refreshAsync())}};ri.DEFAULT_SIZE=1024;let ii=ri;class si{constructor(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this._rotation=0,this._grids=[],this._meshDesignManagers=[],this._renderingNeededListeners=[],this._designNotifyMessageListeners=[],this._designRemoveMessageListeners=[],this._designEventMessages=[],this._meshDesignManagersRefreshing=new Set,this._scene=e,this._zkScene=t,this._zkModel=n,this._zkDesign=r,this._showDesign=i,this.init()}get showDesign(){return this._showDesign}set showDesign(e){this._showDesign!=e&&(this._showDesign=e,this._meshDesignManagers.forEach(t=>t.showDesign=e))}get rotation(){return this._rotation}set rotation(e){this._rotation!=e&&(this._rotation=e,this._meshDesignManagers.forEach(t=>t.rotation=e))}dispose(){this._meshDesignManagers.forEach(e=>e.dispose())}init(){}isForModels(e,t,n){return this._scene==e&&this._zkModel==t&&this._zkDesign==n}getDefaultModelScene(){if(this._zkModel){let e=this._zkModel.get("scenes").findWhere({isDefault:!0});if(e)return e}return null}getModelSceneMeshSide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._scene&&this._zkModel){const n=this.getDefaultModelScene();if(n)for(let r=0;r<n.get("meshSides").length;r++){let i=n.get("meshSides").at(r);if(i.get("meshID")==e&&i.get("subMeshID")==t)return i}}return null}async refreshAsync(){if(this._scene&&this._zkModel&&this._zkDesign){const e=this.getDefaultModelScene();if(e){let t=null,n=null,r=null;for(let i=0;i<this._meshDesignManagers.length;i++){t=this._meshDesignManagers[i];let s=!1;for(let n=0;n<e.get("meshSides").length;n++)if(r=e.get("meshSides").at(n),r.get("meshID")==t.getMeshID()&&r.get("subMeshID")==t.getSubMeshIdx()){s=!0;break}let a=!0;if(s){let e=t.getMeshID();e&&(n=this._scene.getMeshByID(e),n&&(a=n.isVisible))}(!s||!a)&&(t.dispose(),this._meshDesignManagers.splice(i--,1))}for(let i=0;i<e.get("meshSides").length;i++){r=e.get("meshSides").at(i);const t=r.get("meshID"),n=r.get("subMeshID");t&&await this.refreshMeshDesignAsync(t,n)}}}}isValidEffectForMesh(e,t,n){if(n&&n instanceof MPlaza.ModelSceneMeshDesignEffect){const r=n.getParentModel();if(r&&r instanceof MPlaza.ModelScene)return r.isEffectForMesh(e,t,n.get("effectID"))}return!1}async refreshMeshDesignAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;const r=this._scene.getMeshByID(e);console.log("Refreshing design manager",this._rotation);let i=n;if(n&&!this.isValidEffectForMesh(e,t,n)&&(i=void 0),r&&r.isVisible){let e=null;r.subMeshes&&r.subMeshes.length>0&&t>=0&&t<r.subMeshes.length&&(e=r.subMeshes[t]);let n=this.getMeshDesignMananger(r,e);if(n)n.showDesign=this._showDesign,n.rotation=this._rotation,await n.refreshAsync(i);else{n=await ii.createMeshDesignManagerAsync(this._scene,this._zkScene,r,e,this._zkModel,this._zkDesign,this._grids,this._showDesign,i,this.rotation),n.addRenderingNeededListener(()=>this.fireRenderingNeededEvent()),n.setEventMessages(this._designEventMessages);for(let e of this._designNotifyMessageListeners)n.addNotifyMessageListener(e);for(let e of this._designRemoveMessageListeners)n.addRemoveMessageListener(e);this._meshDesignManagers.push(n)}}}getMeshDesignMananger(e,t){for(let n=0;n<this._meshDesignManagers.length;n++){const r=this._meshDesignManagers[n];if(r.isForMesh(e,t))return r}return null}clearMeshDesignManagers(){this._meshDesignManagers=[]}setCustomizerGrids(e){this._grids=e,this._meshDesignManagers.forEach(t=>t.setCustomizerGrids(e))}getItemsInfo(){let e=[];for(let t=0;t<this._meshDesignManagers.length;t++){const n=this._meshDesignManagers[t].getItemsInfo();for(let t=0;t<n.length;t++){const r=n[t];let i=!1;for(let t=0;t<e.length;t++)if(e[t].itemGuid==r.itemGuid){i=!0;break}i||e.push(r)}}return e}async execOnMeshManagersContainingItem(e,t){for(const n of this._meshDesignManagers)n.containsItem(e)&&await t(n)}removeItem(e){this.execOnMeshManagersContainingItem(e,async t=>t.removeItem(e))}addItemText(e,t){let n=this._meshDesignManagers.find(e=>null!=e.side&&e.side.get("sideID")===t);n&&n.addItemText(e)}async addItemImage(e,t){let n=this._meshDesignManagers.find(e=>null!=e.side&&e.side.get("sideID")===t);n&&await n.addItemImage(e)}setItemText(e,t){this.execOnMeshManagersContainingItem(e,async n=>n.setItemText(e,t))}setItemItalic(e,t){this.execOnMeshManagersContainingItem(e,async n=>n.setItemItalic(e,t))}setItemBold(e,t){this.execOnMeshManagersContainingItem(e,async n=>n.setItemBold(e,t))}setItemColor(e,t){this.execOnMeshManagersContainingItem(e,async n=>n.setItemColor(e,t))}setItemFontFamily(e,t){this.execOnMeshManagersContainingItem(e,async n=>n.setItemFontFamily(e,t))}async setItemImage(e,t){await this.execOnMeshManagersContainingItem(e,async n=>n.setItemImage(e,t))}setItemTextOnPath(e,t,n){const r=this._meshDesignManagers.find(e=>null!=e.side&&e.side.get("sideID")===t);r&&r.setItemTextOnPath(e,n)}removeItemImage(e){this.execOnMeshManagersContainingItem(e,async t=>t.removeItemImage(e))}setDesignVisibility(e,t){const n=this._scene.getMeshByID(e);if(n){const e=this.getMeshDesignMananger(n,n.subMeshes.length>0?n.subMeshes[0]:null);e&&e.setDesignMeshVisibility(t)}}getDesignItemsJson(){let e="";for(let t=0;t<this._zkDesign.get("designItems").length;t++)e&&(e+="\n"),e+=this._zkDesign.get("designItems").at(t).get("json");return e}getDesignID(){return this._zkDesign.getDesignID()}fireRenderingNeededEvent(){for(let e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}addRenderingNeededListener(e){this._renderingNeededListeners.push(e)}addNotifyMessageListener(e){this._designNotifyMessageListeners.push(e);for(let t of this._meshDesignManagers)t.addNotifyMessageListener(e)}addRemoveMessageListener(e){this._designRemoveMessageListeners.push(e);for(let t of this._meshDesignManagers)t.addRemoveMessageListener(e)}setEventMessages(e){this._designEventMessages=e;for(let t of this._meshDesignManagers)t.setEventMessages(e)}translateDesignView(e,t,n,r){const i=this.getMeshDesignMananger(e,t);i&&i.translateDesignView(n,r)}rotateDesignView(e,t,n,r,i){const s=this.getMeshDesignMananger(e,t);s&&s.rotateDesignView(n,r,i)}scaleDesignView(e,t,n,r,i,s){const a=this.getMeshDesignMananger(e,t);a&&a.scaleDesignView(n,r,i,s)}async setDesignViewTextureUVChannelAsync(e,t,n){const r=this.getMeshDesignMananger(e,t);r&&await r.setDesignViewTextureUVChannelAsync(n)}async setDesignViewFormFactorAsync(e,t,n,r){const i=this.getMeshDesignMananger(e,t);i&&await i.setDesignViewFormFactorAsync(n,r)}async connectMeshToModelSideAsync(e,t,n){let r=this.getModelSceneMeshSide(e,t);if(!r&&this._scene&&this._zkModel){let i=this._scene.getMeshByID(e);if(i&&i.subMeshes&&i.subMeshes.length>0&&t>=0&&t<i.subMeshes.length){i.subMeshes[t];let s=this.getDefaultModelScene();s&&(r=new MPlaza.ModelSceneMeshSide,r.set("meshID",e),r.set("subMeshID",t),r.set("sideID",n),s.get("meshSides").add(r),await this.refreshAsync())}}}expandCanvasMeshes(){this._meshDesignManagers.forEach(e=>e.expandCanvasMesh())}contractCanvasMeshes(){this._meshDesignManagers.forEach(e=>e.contractCanvasMesh())}}const ai="base_model";class oi{constructor(e,t,n){this._zkModel=e,this._zkScene=t,this._scene=n,this._sceneHelper=new kn(n)}replaceModel(e){this._zkModel=e}getOrCreateMaterialsForVariant(e){const t=this.getVariantMeshes(e),n=[];return t.forEach(e=>{const t=this._scene.getMeshById(e);t&&t.getChildMeshes().forEach(e=>n.push(e))}),this.hasVariantCustomModel(e)?this.getMaterialsForMeshes(n):(this.getMaterialsForMeshes(n).forEach(e=>{this.isSceneMaterialForVariant(e)||this.setVariableMaterialID(e.id)}),this.getVariantMaterials(e))}getPossibleVariableMaterials(){const e=this._sceneHelper.getAllMaterials(),t=[];for(let n=0;n<e.length;n++){const r=e[n],i=this.getMeshesUsingMaterial(r.id),s=this.isSceneMaterialForVariant(r);i.length>0&&!s&&t.push(r)}return t}getVariableMaterials(){const e=[],t=this._zkModel.getPreview3D();if(t){const n=t.getVariantsAttributeOptions();if(n)for(let t=0;t<n.get("variableMaterials").length;t++){let r=n.get("variableMaterials").at(t).get("materialID"),i=this._scene.getMaterialById(r);i&&e.push(i)}}return e}getVariableMaterialsSelection(){const e=this.getVariableMaterials().map(e=>e.id);return this.getPossibleVariableMaterials().map(t=>({id:t.id,name:t.name,selected:-1!=e.indexOf(t.id)}))}getVariantMaterialsWithOriginal(e){const t=[],n=this._zkModel.getPreview3D();if(n&&e&&e instanceof MPlaza.Color){const r=this.getVariantID(e),i=n.getVariantsAttributeOptions();if(i){const e=i.getVariantOption(r);if(e)for(let n=0;n<e.get("materials").length;n++){const r=e.get("materials").at(n),i=r.get("optionMaterialID"),s=this._scene.getMaterialById(i),a=r.get("variableMaterialID"),o=this._scene.getMaterialById(a);s&&o&&t.push({material:s,variableMaterial:o})}}}return t}updateVariableMaterials(){const e=this._zkModel.getPreview3D();if(e){const t=e.getVariantsAttributeOptions();if(t){const e=[],n=[];for(let r=0;r<t.get("variableMaterials").length;r++){const i=t.get("variableMaterials").at(r).get("materialID");this._scene.getMaterialById(i)?e.push(i):n.push(i)}e.forEach(e=>this.setVariableMaterialID(e)),n.forEach(e=>this.unsetVariableMaterialID(e))}}}unsetVariableMaterialID(e){const t=this._zkModel.getPreview3D();if(t){const n=t.getVariantsAttributeOptions();if(n){const t=this._zkModel.getAttributeByGuid(n.get("attributeGuid")),r=n.get("variableMaterials").getVariableMaterial(e);if(r){const t=this._scene.getMaterialById(e);if(t)for(let e=0;e<r.get("meshes").length;e++){const n=this._scene.getMeshById(r.get("meshes")[e]);n&&this._sceneHelper.applyMaterial(t,n)}}n.removeVariableMaterial(e);const i=[];for(let s=0;s<n.get("variantOptions").length;s++){const r=n.get("variantOptions").at(s);let a=null;t&&(a=t.getOptionByGuid(r.get("optionGuid")));const o=[];for(let t=0;t<r.get("materials").length;t++){const n=r.get("materials").at(t);if(n.get("variableMaterialID")===e){for(let e=0;e<n.get("actions").length;e++){const t=n.get("actions").at(e);if(a){const e=a.get("actions").getActionByGuid(t.get("actionGuid"));e&&a.get("actions").remove(e)}}this.deleteSceneMaterial(n.get("optionMaterialID")),o.push(n)}}r.get("materials").remove(o),0===r.get("materials").length&&i.push(r)}for(let e=0;e<i.length;e++)this.removeVariantOption(n,i[e])}}}setVariableMaterialID(e){const t=this._scene.getMaterialById(e);if(t){const n=this.getMeshesUsingMaterial(t.id),r=n.map(e=>e.id),i=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions();i.setVariableMaterial(e,r);const s=[];for(let e=0;e<this._zkModel.get("colors").length;e++){const r=this._zkModel.get("colors").at(e),a=this.getVariantID(r);s.push(a),this.checkVariantOption(i,t,n,r)}for(let e=0;e<i.get("variantOptions").length;e++){const t=i.get("variantOptions").at(e);-1===s.indexOf(t.get("variantID"))&&this.removeVariantOption(i,t)}}}getVariantAttribute(){const e=this._zkModel.getPreview3D();if(!e)return null;const t=e.getVariantsAttributeOptions();if(!t)return null;let n=null;return t.get("attributeGuid")&&(n=this._zkModel.getAttributeByGuid(t.get("attributeGuid"))),n||(n=this._zkModel.get("attributes").getAttributeByCode("variants_attribute")),n}checkVariantOption(e,t,n,r){const i=this.getVariantID(r);let s=e.get("variantOptions").getVariantOption(i);s||(s=this.createVariantOption(e,r)),this.checkVariantOptionMaterial(e,s,t,n,r)}createVariantOption(e,t){const n=this.getVariantID(t),r=this.getOrCreateVariantAttribute(e),i=this.getOrCreateVariantAttributeOption(e,t,r),s=new MPlaza.VariantOption;return s.set("variantID",n),s.set("optionGuid",i.get("optionGuid")),e.get("variantOptions").push(s),s}removeVariantOption(e,t){const n=this._zkModel.getAttributeByGuid(e.get("attributeGuid"));if(n){const e=n.getOptionByGuid(t.get("optionGuid"));e&&n.get("options").remove(e)}for(let r=0;r<t.get("materials").length;r++){const e=t.get("materials").at(r).get("optionMaterialID");this.deleteSceneMaterial(e)}e.get("variantOptions").remove(t)}getOrCreateVariantAttribute(e){let t=this.getVariantAttribute();if(!t){for(let t=0;t<e.get("variantOptions").length;t++)this.removeVariantOption(e,e.get("variantOptions").at(t));t=new MPlaza.Attribute,t.set("attributeGuid",MPlaza.generateUUID()),t.set("name","Variants attribute"),t.set("attributeCode","variants_attribute"),t.set("attributeTypeID",MPlaza.AttributeType.Options),this._zkModel.get("attributes").push(t)}return e.set("attributeGuid",t.get("attributeGuid")),t}getOrCreateVariantAttributeOption(e,t,n){const r=this.getVariantID(t);let i=n.getOptionByCode(r);return i||(i=new MPlaza.AttributeOption,i.set("optionCode",r),i.set("name",t.get("name")),n.get("options").push(i)),i}getVariantID(e){return"".concat(e.getModelID(),"_").concat(e.getColorID())}checkVariantOptionMaterial(e,t,n,r,i){const s=this.getVariantID(i);let a=null;for(let o=0;o<t.get("materials").length;o++){const e=t.get("materials").at(o);if(e.get("variableMaterialID")===n.id){a=e;break}}if(!a){let e=this.getSceneMaterialForVariant(s,n.id);if(!e){const t="".concat(n.name," - ").concat(i.get("name"));e=this.cloneSceneMaterial(n.id,void 0,t),e&&this.setupSceneMaterialForVariant(e,s,n.id)}e&&(a=new MPlaza.VariantOptionMaterial,a.set("optionMaterialID",e.id),a.set("variableMaterialID",n.id),t.get("materials").push(a))}a&&this.checkVariantOptionActions(e,t,a,n,r,i)}setupSceneMaterialForVariant(e,t,n){const r=this.getOrCreateSceneMaterialMetadata(e.id);r.isForPreview=!0,r.autoCreate=!0,r.variantID=t,r.variableMaterialID=n}getSceneMaterialForVariant(e,t){const n=this._sceneHelper.getAllMaterials();for(let r=0;r<n.length;r++){const i=n[r],s=this.getSceneMaterialMetadata(i.id);if(s&&s.isForPreview&&s.variantID===e&&s.variableMaterialID===t)return n[r]}return null}isSceneMaterialForVariant(e){if(!e)return!1;const t=this.getSceneMaterialMetadata(e.id);return t&&t.isForPreview}canDeleteSceneMaterialForVariant(e){if(!e)return!1;const t=this.getSceneMaterialMetadata(e.id);return!t||void 0===t.isForPreview||null===t.isForPreview||void 0===t.autoCreate||null===t.autoCreate||t.isForPreview&&t.autoCreate}getSceneMaterialMetadata(e){return this._sceneHelper.getSceneMaterialMetadata(e)}getOrCreateSceneMaterialMetadata(e){return this._sceneHelper.getOrCreateSceneMaterialMetadata(e)}removeSceneMaterialMetadata(e){this._sceneHelper.removeSceneMaterialMetadata(e)}cloneSceneMaterial(e,t,n){let r=this._scene.getMaterialById(e),i=null;if(r){const e=n||"".concat(r.name," - clone");if(i=r.clone(e),i){const e=t||MPlaza.generateUUID();i.id=e;const n=this._zkScene.getMappingForSceneMaterial(r.id);if(n){const e=n.get("libraryMaterialID");this._zkScene.mapLibraryMaterial(e,i.id);const t=this._sceneHelper.getTexturesForMaterial(i),r=this._sceneHelper.getTexturesForMaterial(i);for(let n=0;n<r.length;n++){const e=r[n],i=t[n];e.materialMapping=i.materialMapping}}}}return i}deleteSceneMaterial(e){const t=this._scene.getMaterialByID(e);if(t&&this.canDeleteSceneMaterialForVariant(t)){this.removeSceneMaterialMetadata(e);const n=this._zkScene.getLibraryShaderMaterialIDForSceneMaterial(e);n&&this._zkScene.unregisterShaderMaterial(n),this._zkScene.removeMappingForSceneMaterial(t.id);const r=this._sceneHelper.getTexturesExclusivelyForMaterial(t);t.dispose();for(let e=0;e<r.length;e++)r[e].dispose()}}checkVariantOptionActions(e,t,n,r,i,s){let a=[];i.forEach(e=>a.push(e.id));let o=this.getOrCreateVariantAttribute(e),l=this.getOrCreateVariantAttributeOption(e,s,o);for(let c=0;c<i.length;c++){let e=i[c],t=n.get("actions").getActionForMesh(e.id);if(!t){let r=new MPlaza.AttributeSceneAction;r.set("name",""),r.set("actionTypeID",MPlaza.SceneActionType.SetMeshMaterial),r.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),r.set("selector",e.id),r.set("value",n.get("optionMaterialID")),l.get("actions").push(r),t=new MPlaza.VariantOptionMaterialAction,t.set("actionGuid",r.get("actionGuid")),t.set("meshID",e.id),n.get("actions").push(t)}}let u=[];for(let c=0;c<n.get("actions").length;c++){let e=n.get("actions").at(c);if(-1===a.indexOf(e.get("meshID"))){let t=l.getActionByGuid(e.get("actionGuid"));t&&l.get("actions").remove(t),u.push(e)}}n.get("actions").remove(u)}isMaterialReal(e){var t,n;const r=!1!==(null==(t=e.metadata)?void 0:t.isRealMaterial)&&"default material"!==e.id,i=!0===(null==(n=e.metadata)?void 0:n.isDesignMaterial);return r&&!i}getVariantMaterials(e){let t=[];const n=this._zkModel.getPreview3D();if(n&&e&&e instanceof MPlaza.Color){const r=this.getVariantID(e),i=n.getVariantsAttributeOptions();if(i){const e=i.getVariantOption(r);if(e)for(let n=0;n<e.get("materials").length;n++){const r=e.get("materials").at(n).get("optionMaterialID"),i=this._scene.getMaterialById(r);i&&this.isMaterialReal(i)&&t.push(i)}}}return t}getSelectedAttributeOption(e){let t={attributeID:null,attributeGuid:null,optionID:null,optionGuid:null};const n=this._zkModel.getPreview3D();if(n&&e&&e instanceof MPlaza.Color){const r=this.getVariantID(e),i=n.getVariantsAttributeOptions();if(i&&i.get("attributeGuid")){const e=this._zkModel.getAttributeByGuid(i.get("attributeGuid"));if(e){const n=i.getVariantOption(r);if(n){const r=e.getOptionByGuid(n.get("optionGuid"));r&&(t.attributeID=e.get("attributeID"),t.attributeGuid=e.get("attributeGuid"),t.optionID=r.get("optionID"),t.optionGuid=r.get("optionGuid"))}}}}return t}resetOriginaMaterialsOnMeshes(){const e=this._zkModel.getPreview3D();if(e){const t=e.getVariantsAttributeOptions();if(t)for(let e=0;e<t.get("variableMaterials").length;e++){const n=t.get("variableMaterials").at(e),r=n.get("materialID"),i=n.get("meshes"),s=this._scene.getMaterialByID(r);if(s)for(let e=0;e<i.length;e++){const t=this._scene.getMeshById(n.get("meshes")[e]);t&&this._sceneHelper.applyMaterial(s,t)}}}}getMeshesUsingMaterial(e){const t=[],n=this._sceneHelper.getSceneMeshes();for(let r=0;r<n.length;r++){const i=n[r];if(this._sceneHelper.isMeshUsingMaterial(i,e))t.push(i);else{const n=this._sceneHelper.getMeshMaterials(i);for(let r=0;r<n.length;r++){const s=n[r],a=this.getSceneMaterialMetadata(s.id);if(a&&a.isForPreview&&a.variableMaterialID&&a.variableMaterialID===e){t.push(i);break}}}}return t}getMaterialsForMeshes(e){const t=e.map(e=>"string"==typeof e?this._scene.getMeshById(e):e),n=[];for(let r=0;r<t.length;r++){const e=t[r];if(e){const t=this._sceneHelper.getMeshMaterials(e);for(let e=0;e<t.length;e++){const r=t[e];-1===n.indexOf(r)&&this.isMaterialReal(r)&&n.push(r)}}}return n}getVariantMeshes(e){const t=this._zkModel.getPreview3D();if(!t)return[ai];const n=null==t?void 0:t.getVariantsAttributeOptions();if(!n)return[ai];const r=this.getVariantID(e),i=n.get("variantOptions").getVariantOption(r);if(!i)return[ai];const s=i.get("meshes");return s.length>0?s:[ai]}getVariantByMeshID(e){const t=this._zkModel.getPreview3D();if(!t)return null;const n=t.getVariantsAttributeOptions();if(!n)return null;for(let r=0;r<this._zkModel.get("colors").length;r++){const t=this._zkModel.get("colors").at(r),i=this.getVariantID(t),s=n.getVariantOption(i);if(s&&-1!==s.get("meshes").indexOf(e))return t}return null}hasVariantCustomModel(e){const t=this.getVariantMeshes(e);return!(1===t.length&&t[0]===ai)}setVariantMeshes(e,t){const n=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions(),r=this.getVariantID(e);let i=n.get("variantOptions").getVariantOption(r);i||(i=this.createVariantOption(n,e)),i.set("meshes",t),this.refreshOptionsShowHideVariantModels()}removeVariantMeshes(e){const t=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions(),n=this.getVariantID(e);let r=t.get("variantOptions").getVariantOption(n);if(r){const e=r.get("meshes");for(const t of e){const e=this._scene.getMeshById(t);null==e||e.dispose(!1,!0)}r.set("meshes",[])}this.updateVariableMaterials(),this.refreshOptionsShowHideVariantModels()}setBaseMeshes(e){let t=this._scene.getMeshById(ai);t||(t=new BABYLON.Mesh(ai,this._scene),t.id=ai);for(const n of e){const e=this._scene.getMeshById(n);e&&e.setParent(t)}}removeBaseMeshes(){const e=this._scene.getMeshById(ai);if(e){const t=e.getChildMeshes(!0);for(const e of t)e.setParent(null)}}upgradeToBaseMeshes(){var e;null!==this._scene.getMeshById(ai)||this.setBaseMeshes(null!==(e=this._scene.meshes.filter(e=>!e.parent&&e.id!==ai).map(e=>e.id))&&void 0!==e?e:[])}refreshOptionsShowHideVariantModels(){const e=this._zkModel.getOrCreatePreview3D().getOrCreateVariantsAttributeOptions(),t=this.getOrCreateVariantAttribute(e);for(let n=0;n<this._zkModel.get("colors").length;n++){const r=this._zkModel.get("colors").at(n),i=this.getVariantID(r);let s=e.get("variantOptions").getVariantOption(i);s||(s=this.createVariantOption(e,r));const a=this.getOrCreateVariantAttributeOption(e,r,t);let o=a.get("actions").find(e=>"*"===e.get("selector")&&e.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh);o||(o=new MPlaza.AttributeSceneAction,o.set("name",""),o.set("actionTypeID",MPlaza.SceneActionType.ShowHideMesh),o.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),o.set("selector","*"),o.set("value","hide"),a.get("actions").push(o));for(let e=0;e<a.get("actions").length;e++){const t=a.get("actions").at(e);t.get("actionTypeID")===MPlaza.SceneActionType.ShowHideMesh&&"*"!==t.get("selector")&&(a.get("actions").remove(t),e--)}if(0===(null==s?void 0:s.get("meshes").length)){const e=new MPlaza.AttributeSceneAction;e.set("name",""),e.set("actionTypeID",MPlaza.SceneActionType.ShowHideMesh),e.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),e.set("selector",ai),e.set("value","show"),a.get("actions").push(e)}else for(const e of s.get("meshes")){const t=new MPlaza.AttributeSceneAction;t.set("name",""),t.set("actionTypeID",MPlaza.SceneActionType.ShowHideMesh),t.set("sceneElementTypeID",MPlaza.SceneElementType.Mesh),t.set("selector",e),t.set("value","show"),a.get("actions").push(t)}}}setDesignMaterialForVariantEnabled(e,t){var n;const r=this.hasVariantCustomModel(e)?e.get("colorID"):null,i=this._zkModel.get("scenes").at(0).get("meshSides").filter(e=>e.get("colorID")===r),s=null==(n=i.at(0))?void 0:n.get("materialID");let a=s?this._scene.getMaterialById(s):null;t||(i.forEach(e=>{e.set("materialID",null)}),a&&(i.some(e=>e.get("materialID")===a.id)||a.dispose())),t&&!a&&(a=new BABYLON.PBRMaterial("Design material",this._scene),a.id=Zakeke.generateUUID(),a.zOffset=-1,a.metallic=.5,a.roughness=.2,i.forEach(e=>{e.set("materialID",a.id)}))}getDesignMaterialForVariant(e){const t=this.hasVariantCustomModel(e)?e.get("colorID"):null,n=this._zkModel.get("scenes").at(0).get("meshSides").find(e=>e.get("colorID")===t),r=n?n.get("materialID"):null;return r?this._scene.getMaterialById(r):null}}function li(e){return"function"==typeof importScripts?(importScripts(e),Promise.resolve()):new Promise(function(t,n){BABYLON.Tools.LoadScript(e,function(){t()},function(e){n(new Error(e))})})}function ui(e,t,n){var r=t&&e||n;if(r)return li(r).then(function(){return new Promise(function(e){DracoDecoderModule({wasmBinary:t}).then(function(t){e({module:t})})})})}function ci(e,t,n,r,i){var s=new e.DecoderBuffer;s.Init(t,t.byteLength);var a,o,l=new e.Decoder;try{var u=l.GetEncodedGeometryType(s);switch(u){case e.TRIANGULAR_MESH:a=new e.Mesh,o=l.DecodeBufferToMesh(s,a);break;case e.POINT_CLOUD:a=new e.PointCloud,o=l.DecodeBufferToPointCloud(s,a);break;default:throw new Error("Invalid geometry type "+u)}if(!o.ok()||!a.ptr)throw new Error(o.error_msg());var c=a.num_points();if(u===e.TRIANGULAR_MESH){var h=a.num_faces(),d=new e.DracoInt32Array;try{for(var f=new Uint32Array(3*h),p=0;p<h;p++){l.GetFaceFromMesh(a,p,d);var g=3*p;f[g+0]=d.GetValue(0),f[g+1]=d.GetValue(1),f[g+2]=d.GetValue(2)}r(f)}finally{e.destroy(d)}}var m=l.GetAttributeId(a,e.POSITION),v=l.GetAttributeByUniqueId(a,m),_=new e.DracoFloat32Array;try{l.GetAttributeFloatForAllPoints(a,v,_);for(var y=new Float32Array(c*v.num_components()),b=0;b<y.length;b++)y[b]=_.GetValue(b);i("position",y)}finally{e.destroy(_)}var x=l.GetAttributeId(a,e.NORMAL);if(-1!==x){var w=l.GetAttributeByUniqueId(a,x),S=new e.DracoFloat32Array;try{l.GetAttributeFloatForAllPoints(a,w,S),y=new Float32Array(c*w.num_components());for(var C=0;C<y.length;C++)y[C]=S.GetValue(C);i("normal",y)}finally{e.destroy(S)}}var D=l.GetAttributeId(a,e.COLOR);if(-1!==D){var E=l.GetAttributeByUniqueId(a,D),A=new e.DracoFloat32Array;try{for(l.GetAttributeFloatForAllPoints(a,E,A),y=new Float32Array(c*E.num_components()),C=0;C<y.length;C++)y[C]=A.GetValue(C);i("color",y)}finally{e.destroy(A)}}var k=l.GetAttributeId(a,e.TEX_COORD);if(-1!==k){var M=l.GetAttributeByUniqueId(a,k),T=new e.DracoFloat32Array;try{for(l.GetAttributeFloatForAllPoints(a,M,T),y=new Float32Array(c*M.num_components()),C=0;C<y.length;C++)y[C]=T.GetValue(C);i("uv",y)}finally{e.destroy(T)}var I=l.GetAttributeByUniqueId(a,k+1);if(I&&I.size()>0){var O=new e.DracoFloat32Array;try{for(l.GetAttributeFloatForAllPoints(a,I,O),y=new Float32Array(c*I.num_components()),C=0;C<y.length;C++)y[C]=O.GetValue(C);i("uv2",y)}finally{e.destroy(O)}}}}finally{a&&e.destroy(a),e.destroy(l),e.destroy(s)}}function hi(){var e;onmessage=function(t){var n=t.data;switch(n.id){case"init":var r=n.decoder;e=ui(r.wasmUrl,r.wasmBinary,r.fallbackUrl),postMessage("done");break;case"decodeMesh":if(!e)throw new Error("Draco decoder module is not available");e.then(function(e){ci(e.module,n.dataView,n.attributes,function(e){postMessage({id:"indices",value:e},[e.buffer])},function(e,t){postMessage({id:e,value:t},[t.buffer])}),postMessage("done")})}}}function di(e){return"object"!=typeof document||"string"!=typeof e?e:BABYLON.Tools.GetAbsoluteUrl(e)}var fi=function(){function e(t){void 0===t&&(t=e.DefaultNumWorkers);var n=e.Configuration.decoder,r=n.wasmUrl&&n.wasmBinaryUrl&&"object"==typeof WebAssembly?function(e){return new Promise(function(t,n){BABYLON.Tools.LoadFile(e,function(e){t(e)},void 0,void 0,!0,function(e,t){n(t)})})}(di(n.wasmBinaryUrl)):Promise.resolve(void 0);t&&"function"==typeof Worker?this._workerPoolPromise=r.then(function(e){for(var r=""+li+ui+ci+"("+hi+")()",i=URL.createObjectURL(new Blob([r],{type:"application/javascript"})),s=new Array(t),a=0;a<s.length;a++)s[a]=new Promise(function(t,r){var s=new Worker(i),a=function(e){s.removeEventListener("error",a),s.removeEventListener("message",o),r(e)},o=function(e){"done"===e.data&&(s.removeEventListener("error",a),s.removeEventListener("message",o),t(s))};s.addEventListener("error",a),s.addEventListener("message",o),s.postMessage({id:"init",decoder:{wasmUrl:di(n.wasmUrl),wasmBinary:e,fallbackUrl:di(n.fallbackUrl)}})});return Promise.all(s).then(function(e){return new cr(e)})}):this._decoderModulePromise=r.then(function(e){return ui(n.wasmUrl,e,n.fallbackUrl)})}return Object.defineProperty(e,"DecoderAvailable",{get:function(){var t=e.Configuration.decoder;return!!(t.wasmUrl&&t.wasmBinaryUrl&&"object"==typeof WebAssembly||t.fallbackUrl)},enumerable:!1,configurable:!0}),e.GetDefaultNumWorkers=function(){return"object"==typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),1):1},Object.defineProperty(e,"Default",{get:function(){return e._Default||(e._Default=new e),e._Default},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){},e.prototype.whenReadyAsync=function(){return this._workerPoolPromise?this._workerPoolPromise.then(function(){}):this._decoderModulePromise?this._decoderModulePromise.then(function(){}):Promise.resolve()},e.prototype.decodeMeshAsync=function(e,t){var n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(this._workerPoolPromise)return this._workerPoolPromise.then(function(e){return new Promise(function(r,i){e.push(function(e,s){var a=new BABYLON.VertexData,o=function(t){e.removeEventListener("error",o),e.removeEventListener("message",l),i(t),s()},l=function(t){"done"===t.data?(e.removeEventListener("error",o),e.removeEventListener("message",l),r(a),s()):"indices"===t.data.id?a.indices=t.data.value:a.set(t.data.value,t.data.id)};e.addEventListener("error",o),e.addEventListener("message",l);var u=new Uint8Array(n.byteLength);u.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),e.postMessage({id:"decodeMesh",dataView:u,attributes:t},[u.buffer])})})});if(this._decoderModulePromise)return this._decoderModulePromise.then(function(e){var t=new BABYLON.VertexData;return ci(e.module,n,0,function(e){t.indices=e},function(e,n){t.set(n,e)}),t});throw new Error("Draco decoder module is not available")},e.Configuration={decoder:{wasmUrl:"https://zakekecdn.azureedge.net/cdn/Scripts/draco/1.3.4/rev.1/draco_wasm_wrapper.js",wasmBinaryUrl:"https://zakekecdn.azureedge.net/cdn/Scripts/draco/1.3.4/rev.1/draco_decoder.wasm",fallbackUrl:"https://zakekecdn.azureedge.net/cdn/Scripts/draco/1.3.4/rev.1/draco_decoder.js"}},e.DefaultNumWorkers=e.GetDefaultNumWorkers(),e._Default=null,e}();class pi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._originalSceneClearColor=null,this._originalCameraAutoRotate=null,this._environmentHelper=null,this._shadowLight=null,this._isHologram=!1,this._zkScene=e,this._scene=t,this._sceneHelper=new kn(this._scene),this._isHologram=n}get scene(){return this._scene}get isHologram(){return this._isHologram}set isHologram(e){this._isHologram=e,this.update()}dispose(){this._shadowLight&&this._shadowLight.dispose(),this._environmentHelper&&(this._environmentHelper.dispose(),this._environmentHelper=null),this.removeOldSkybox()}update(){this.configureScene(),this.configureCamera(),this.configureSkybox()}configureSkybox(){this.removeOldSkybox(),this._isHologram||this.createSkybox()}removeOldSkybox(){const e=this.getSkyboxMesh(),t=this.getSkyboxMaterial();e&&e.dispose(),t&&t.dispose()}createSkybox(){var e,t;this.getGeneralConfig();const n=this.getEnvironmentConfig(),r=this.getSkyboxConfig();if(r&&null!=r.get("createSkybox")&&r.get("createSkybox")){n&&null!=n.get("sizeAuto")&&null!=n.get("sizeAuto")&&"boolean"==typeof n.get("sizeAuto")&&n.get("sizeAuto");let i=null;null!=r.get("size")&&"number"==typeof r.get("size")&&(i=r.get("size"));let s=null;null!=r.get("texture")&&"string"==typeof r.get("texture")&&(s=r.get("texture"));let a=0;r.get("blur")>0&&(a=r.get("blur"));let o=null;null!=r.get("extensions")&&null!=r.get("extensions")&&"[object Array]"===Object.prototype.toString.call(r.get("extensions"))&&6===(null==(e=r.get("extensions"))?void 0:e.length)&&(o=r.get("extensions"));let l=null;if(null!=r.get("files")&&null!=r.get("files")&&"[object Array]"===Object.prototype.toString.call(r.get("files"))&&6===(null==(t=r.get("files"))?void 0:t.length)&&(l=r.get("files")),s){let e=null;if(e=s.endsWith(".dds")?BABYLON.CubeTexture.CreateFromPrefilteredData(s,this._scene):s.endsWith(".hdr")?new BABYLON.HDRCubeTexture(s,this._scene,256,!1,!0,!1,!0):s.endsWith(".env")?new BABYLON.CubeTexture(s,this._scene,null,!1,null,void 0,null,void 0,!0,void 0,!0):s.endsWith(".basis")?BABYLON.CubeTexture.CreateFromPrefilteredData(s,this._scene):o&&l?new BABYLON.CubeTexture(s,this._scene,o,!1,l,void 0):BABYLON.CubeTexture.CreateFromPrefilteredData(s,this._scene),e){let t=1e3;t=null!=i&&i>0?i:(this._scene.activeCamera.maxZ-this._scene.activeCamera.minZ)/2;const n=this._scene.createDefaultSkybox(e,!0,t,a,!1);if(n){n.metadata={isSkyboxMesh:!0,isRealMesh:!1},n.doNotSerialize=!0;const e=n.material;e&&(e.metadata={isSkyboxMaterial:!0,isRealMaterial:!1},e.doNotSerialize=!0)}}}}}getSkyboxMesh(){return this._scene.meshes.find(e=>e.metadata&&e.metadata.isSkyboxMesh)||null}getSkyboxMaterial(){return this._scene.materials.find(e=>e.metadata&&e.metadata.isSkyboxMaterial)||null}getSkyboxTexture(){const e=this.getSkyboxMaterial();return e?e.reflectionTexture:null}update_OLD(){this.configureScene(),this.configureCamera(),this.configureEnvironment()}configureScene(){if(this._scene){if(this._scene.clearColor=new BABYLON.Color4(0,0,0,0),this._originalSceneClearColor=this._scene.clearColor.clone(),this._isHologram)return void(this._scene.clearColor=new BABYLON.Color4(0,0,0,1));var e=this.getGeneralConfig();if(e){let t=null;null!=e.get("backgroundAlpha")&&null!=e.get("backgroundAlpha")&&"number"==typeof e.get("backgroundAlpha")&&(t=e.get("backgroundAlpha"));let n=null;if(null!=e.get("backgroundColor")&&"string"==typeof e.get("backgroundColor")&&this.isValidHexColor(e.get("backgroundColor"))&&(n=e.get("backgroundColor")),t||n){this._originalSceneClearColor=this._scene.clearColor;let e=this._scene.clearColor;if(null!=n){let t=BABYLON.Color3.FromHexString(n);e.r=t.r,e.g=t.g,e.b=t.b}null!=t&&(e.a=t)}}}}configureEnvironment(){if(this._environmentHelper&&(this._environmentHelper.dispose(),this._environmentHelper=null),this._shadowLight&&(this._shadowLight.dispose(),this._shadowLight=null),0!=this._sceneHelper.countSceneMeshes()){var e=this.buildEnvironmentHelperOptions();if(e){this._environmentHelper=this._scene.createDefaultEnvironment(e);const t=this.getEnvironmentSceneNodes();for(let e=0;e<t.length;e++){const n=t[e];n&&(this.setDoNotSerialize(n),n.metadata||(n.metadata={}),n.metadata.isEnvironmentNode=!0,n instanceof BABYLON.AbstractMesh&&(n.isPickable=!1,n.metadata.isRealMesh=!1),n instanceof BABYLON.Material&&(n.metadata.isRealMaterial=!1))}}}}buildEnvironmentHelperOptions(){let e=null;const t=this.getGeneralConfig(),n=this.getEnvironmentConfig(),r=this.getSkyboxConfig(),i=this.getGroundConfig(),s=this.getCameraConfig();let a=null;t&&null!=t.get("environmentTexture")&&null!=t.get("environmentTexture")&&(a=t.get("environmentTexture"));let o=null;s&&null!=s.get("contrast")&&"number"==typeof s.get("contrast")&&(o=s.get("contrast"));let l=null;s&&null!=s.get("exposure")&&"number"==typeof s.get("exposure")&&(l=s.get("exposure"));let u=null;s&&null!=s.get("toneMappingEnabled")&&"boolean"==typeof s.get("toneMappingEnabled")&&(u=s.get("toneMappingEnabled"));let c=null;n&&null!=n.get("sizeAuto")&&null!=n.get("sizeAuto")&&"boolean"==typeof n.get("sizeAuto")&&(c=n.get("sizeAuto"));let h=null;n&&null!=n.get("mainColor")&&"string"==typeof n.get("mainColor")&&this.isValidHexColor(n.get("mainColor"))&&(h=n.get("mainColor"));let d=null;i&&null!=i.get("size")&&"number"==typeof i.get("size")&&(d=i.get("size"));let f=null;i&&null!=i.get("color")&&"string"==typeof i.get("color")&&this.isValidHexColor(i.get("color"))&&(f=i.get("color"));let p=null;i&&null!=i.get("enableShadow")&&"boolean"==typeof i.get("enableShadow")&&(p=i.get("enableShadow"));let g=null;i&&null!=i.get("shadowLevel")&&"number"==typeof i.get("shadowLevel")&&(g=i.get("shadowLevel"));let m=null;i&&null!=i.get("enableMirror")&&"boolean"==typeof i.get("enableMirror")&&(m=i.get("enableMirror"));let v=null;i&&null!=i.get("texture")&&"string"==typeof i.get("texture")&&(v=i.get("texture"));let _=null;i&&null!=i.get("opacity")&&"number"==typeof i.get("opacity")&&(_=i.get("opacity"));let y=null;i&&null!=i.get("mirrorBlurKernel")&&"number"==typeof i.get("mirrorBlurKernel")&&(y=i.get("mirrorBlurKernel"));let b=null;r&&null!=r.get("size")&&"number"==typeof r.get("size")&&(b=r.get("size"));let x=null;r&&null!=r.get("color")&&"string"==typeof r.get("color")&&this.isValidHexColor(r.get("color"))&&(x=r.get("color"));let w=null;return r&&null!=r.get("texture")&&"string"==typeof r.get("texture")&&(w=r.get("texture")),(r||i||null!=a||null!=o||null!=l||u)&&(e=e||{createSkybox:r&&r.get("createSkybox"),createGround:i&&i.get("createGround")},e.setupImageProcessing=!1,null!=a&&(e.environmentTexture=a),(e.createSkybox||e.createGround)&&(null!=c&&(e.sizeAuto=c),null!=h&&(e.mainColor=BABYLON.Color3.FromHexString(h)),e.createGround&&(!e.sizeAuto&&null!=d&&(e.groundSize=d),!e.mainColor&&null!=f&&(e.groundColor=BABYLON.Color3.FromHexString(f)),null!=p&&(e.enableGroundShadow=p),e.enableGroundShadow&&this.createShadowLight(),null!=g&&(e.groundShadowLevel=g),null!=m&&(e.enableGroundMirror=m),null!=v&&(e.groundTexture=v),null!=_&&(e.groundOpacity=_),e.enableGroundMirror&&null!=y&&(e.groundMirrorBlurKernel=y)),e.createSkybox&&(!e.sizeAuto&&null!=b&&(e.skyboxSize=b),!e.mainColor&&null!=x&&(e.skyboxColor=BABYLON.Color3.FromHexString(x)),null!=w&&(e.skyboxTexture=w)),s&&(null!=o&&(e.cameraContrast=o),null!=l&&(e.cameraExposure=l),null!=u&&(e.toneMappingEnabled=u)))),e&&(!e.environmentTexture&&!this._scene.environmentTexture&&(e.environmentTexture=Sn.Environment.EnvironmentTextureCDNUrl),null!=e.createGround&&e.createGround&&!e.groundTexture&&(e.groundTexture=Sn.Environment.GroundTextureCDNUrl),null!=e.createSkybox&&e.createSkybox&&!e.skyboxTexture&&(e.skyboxTexture=Sn.Environment.SkyboxTextureCDNUrl)),e}createShadowLight(){if(this._shadowLight&&(this._shadowLight.dispose(),this._shadowLight=null),this._scene&&this._sceneHelper){var e=this._sceneHelper.getSceneBoundingInfo();if(e&&e.boundingBox){const n=e.boundingBox.vectorsWorld,r=Number(n[1].x-n[0].x),i=Number(n[1].y-n[0].y),s=Number(n[1].z-n[0].z),a=e.boundingBox.centerWorld;e.boundingBox.maximumWorld;const o=a.x+2.67*r,l=a.y+4.5*i,u=a.z+1*s,c=new BABYLON.Vector3(o,l,u);let h=a.subtract(c);h=BABYLON.Vector3.Normalize(h),h=new BABYLON.Vector3(-2,-3,1),this._shadowLight=new BABYLON.DirectionalLight("shadowLight",h,this._scene),this._shadowLight.position=c,this._shadowLight.intensity=.1;var t=new BABYLON.ShadowGenerator(512,this._shadowLight);t.useBlurExponentialShadowMap=!0,t.useKernelBlur=!0,t.usePercentageCloserFiltering=!0,t.blurKernel=32;for(let e=0;e<this._scene.meshes.length;e++){const n=this._scene.meshes[e];!this.isEnvironmentNode(n)&&this._sceneHelper.isRealMesh(n)&&(n.receiveShadows=!1,t.addShadowCaster(n))}}}}configureCamera(){if(!this._scene||!this._scene.activeCamera||!(this._scene.activeCamera instanceof BABYLON.ArcRotateCamera))return;const e=this.getCameraConfig();if(e){const t=this._scene.activeCamera;this._originalCameraAutoRotate=t.useAutoRotationBehavior;let n=e.get("autoRotate");t.useAutoRotationBehavior=null!=n&&n;let r=t.getBehaviorByName("AutoRotation"),i=Number(e.get("rotationSpeed")),s=e.get("changeRotationDirection");if(n&&i){let e=s?-1:1;r.idleRotationSpeed=i*e}}}sanityCheck(){return this._scene&&this._scene instanceof BABYLON.Scene&&this._zkScene&&this._zkScene instanceof Zakeke.Scene&&null!=this._zkScene.get("config")&&null!=this._zkScene.get("config")&&this._zkScene.get("config")instanceof Zakeke.SceneConfig}getSceneConfig(){if(this.sanityCheck()){let e=this._zkScene.getSceneConfig();if(null!=e&&null!=e)return e}return null}getGeneralConfig(){if(this.sanityCheck()){let e=this._zkScene.getGeneralConfig();if(null!=e&&null!=e)return e}return null}getEnvironmentConfig(){if(this.sanityCheck()){let e=this._zkScene.getEnvironmentConfig();if(null!=e&&null!=e)return e}return null}getSkyboxConfig(){if(this.sanityCheck()){let e=this._zkScene.getSkyboxConfig();if(null!=e&&null!=e)return e}return null}getGroundConfig(){if(this.sanityCheck()){let e=this._zkScene.getGroundConfig();if(null!=e&&null!=e)return e}return null}getCameraConfig(){if(this.sanityCheck()){let e=this._zkScene.getCameraConfig();if(null!=e&&null!=e)return e}return null}isValidHexColor(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}getEnvironmentSceneNodes(){const e=[];return this._environmentHelper&&(this._environmentHelper.rootMesh&&e.push(this._environmentHelper.rootMesh),this._environmentHelper.skybox&&e.push(this._environmentHelper.skybox),this._environmentHelper.skyboxMaterial&&e.push(this._environmentHelper.skyboxMaterial),this._environmentHelper.skyboxTexture&&e.push(this._environmentHelper.skyboxTexture),this._environmentHelper.ground&&e.push(this._environmentHelper.ground),this._environmentHelper.groundMaterial&&e.push(this._environmentHelper.groundMaterial),this._environmentHelper.groundTexture&&e.push(this._environmentHelper.groundTexture),this._environmentHelper.groundMirror&&e.push(this._environmentHelper.groundMirror),this._shadowLight&&e.push(this._shadowLight)),e}isEnvironmentNode(e){const t=this.getEnvironmentSceneNodes();for(let n=0;n<t.length;n++)if(e==t[n])return!0;return!1}setDoNotSerialize(e){(e instanceof BABYLON.AbstractMesh||e instanceof BABYLON.Material||e instanceof BABYLON.Light)&&(e.doNotSerialize=!0)}reset(){this._scene&&(this._originalSceneClearColor&&(this._scene.clearColor=this._originalSceneClearColor),null!=this._originalCameraAutoRotate&&this._scene.activeCamera&&this._scene.activeCamera instanceof BABYLON.ArcRotateCamera&&(this._scene.activeCamera.useAutoRotationBehavior=this._originalCameraAutoRotate),this._environmentHelper&&this._environmentHelper.updateOptions({}))}}function gi(e){return"function"==typeof importScripts?(importScripts(e),Promise.resolve()):new Promise((t,n)=>{BABYLON.Tools.LoadScript(e,()=>{t()},e=>{n(new Error(e))})})}function mi(e){if(0==e.length)return Promise.resolve();let t=[];for(let n=0;n<e.length;n++)t.push(gi(e[n]));return new Promise(e=>{Promise.all(t).then(()=>e())})}function vi(e,t){return e?e.match(new RegExp(".[^]{1,"+t+"}","g")):null}function _i(e,t,n){let r="scene_"+t+".babylon",i=e;const s=[];if(i.length<=5e6){let e=!1;i.length>180&&i.length<=1e6&&(i=LZString.compressToUint8Array(i),r="compressed_"+r,e=!0);let t=null;if(e){let e=i.buffer;t=new Blob([e])}else t=new Blob([i],{type:"text/plain"});t&&s.push({name:r,blob:t})}else{let e=vi(i,8e5);if(e)for(let t=0;t<e.length;t++){let i=e[t],o=r+"_part_"+t,l=!1;i.length>180&&(i=LZString.compressToUint8Array(i),o="compressed_"+o,l=!0);let u=null;if(l){var a=i.buffer;u=new Blob([a])}else u=new Blob([i],{type:"text/plain"});u&&s.push({name:o,blob:u}),n(t/e.length*100)}}return s}function yi(){let e;onmessage=t=>{const n=t.data;switch(n.id){case"init":{const t=n.urls;e=mi(t),postMessage("done");break}case"makeBlobs":if(!e)throw new Error("Worker not initialized");e.then(()=>{const e=_i(n.json,n.version,e=>{postMessage({id:"progress",perc:e})});postMessage({id:"result",blobInfos:e}),postMessage("done")})}}}const bi=class e{static GetDefaultNumWorkers(){return"object"==typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),2):1}static get Default(){return e._Default||(e._Default=new e([])),e._Default}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultNumWorkers;const r=t.map(e=>function(e){return"object"!=typeof document||"string"!=typeof e?e:BABYLON.Tools.GetAbsoluteUrl(e)}(e));if(n&&"function"==typeof Worker){const e="".concat(gi).concat(mi).concat(vi).concat(_i,"(").concat(yi,")()"),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"})),i=new Array(n);for(let n=0;n<i.length;n++)i[n]=new Promise((e,n)=>{const i=new Worker(t),s=e=>{i.removeEventListener("error",s),i.removeEventListener("message",a),n(e)},a=t=>{"done"===t.data&&(i.removeEventListener("error",s),i.removeEventListener("message",a),e(i))};i.addEventListener("error",s),i.addEventListener("message",a),i.postMessage({id:"init",urls:r})});this._workerPoolPromise=Promise.all(i).then(e=>new cr(e))}}dispose(){}whenReadyAsync(){return this._workerPoolPromise?this._workerPoolPromise.then(()=>{}):Promise.resolve()}getSceneBlobsAsync(e,t,n){if(this._workerPoolPromise)return this._workerPoolPromise.then(r=>new Promise((i,s)=>{r.push((r,a)=>{let o=[];const l=e=>{r.removeEventListener("error",l),r.removeEventListener("message",u),s(e),a()},u=e=>{"done"===e.data?(r.removeEventListener("error",l),r.removeEventListener("message",u),i(o),a()):"progress"===e.data.id?n(e.data.perc):"result"===e.data.id&&(o=e.data.blobInfos)};r.addEventListener("error",l),r.addEventListener("message",u),r.postMessage({id:"makeBlobs",json:e,version:t})})}));throw new Error("SceneToBlob worker is not available")}};bi.DefaultNumWorkers=bi.GetDefaultNumWorkers(),bi._Default=null;let xi=bi;class wi{static openSceneViewer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._fallbackInvoked)return;const i=self.location.toString(),s=new URL(i),a=new URL(e),o=new URLSearchParams(a.search);if(s.hash=this._noArViewerSigil,o.set("mode","ar_preferred"),o.has("disable_occlusion")||o.set("disable_occlusion","true"),n||o.set("resizable","false"),r&&"wall"===r.toLowerCase()&&o.set("enable_vertical_placement","true"),o.has("sound")){const e=new URL(o.get("sound"),i);o.set("sound",e.toString())}if(o.has("link")){const e=new URL(o.get("link"),i);o.set("link",e.toString())}const l="intent://arvr.google.com/scene-viewer/1.0?".concat(o.toString()+"&file="+encodeURIComponent(a.toString()),"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(s.toString()),";end;");console.log(l),self.addEventListener("hashchange",()=>{self.location.hash===this._noArViewerSigil&&!this._fallbackInvoked&&(this._fallbackInvoked=!0,t&&t(),self.history.back())},{once:!0}),this._anchor.setAttribute("href",l),this._anchor.setAttribute("target","_blank"),document.body.appendChild(this._anchor),this._anchor.click()}}wi._anchor=document.createElement("a"),wi._linkOrTitle=/(link|title)(=|&)|(\?|&)(link|title)$/,wi._noArViewerSigil="#model-viewer-no-ar-fallback",wi._fallbackInvoked=!1;class Si{constructor(e,t,n){this._meshesInfoPoints={},this._infoPoints=[],this._imageUrls=[],this._currentIdx=0,this._imagePanel=null,this._loadingText=null,this._image=null,this._closeImageButton=null,this._moveNextImageButton=null,this._movePrevImageButton=null,this._isOnMoveNextButton=!1,this._isOnMovePrevButton=!1,this._lastCameraPosition=null,this.onBeforeShowImages=null,this.onAfterShowImages=null,this._infoPointsShown=!0,this._canShowInfoPointsContent=!0,this._infoPointPickedListeners=[],this._infoPointContentShownListeners=[],this._infoPointContentHiddenListeners=[],this._renderingNeededListeners=[],this.CLOSE_SVG="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-close' style='fill:\xa7color\xa7'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/g%3E%3C/svg%3E",this.CHEVRON_LEFT_SVG="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-chevron-left'%3E%3Cpath fill='\xa7color\xa7' d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/g%3E%3C/svg%3E",this.CHEVRON_RIGHT_SVG="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 0 24 24' width='24'%3E%3Cg id='mdi-chevron-right'%3E%3Cpath fill='\xa7color\xa7' d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/g%3E%3C/svg%3E",this._zkScene=e,this._scene=t,this._sceneHelper=new kn(t),this._style={},this.setDefaultStyle(),n&&this.setStyle(n),this._rootContainer=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI",!0,this._scene)}get infoPointsShown(){return this._infoPointsShown}get canShowInfoPointsContent(){return this._canShowInfoPointsContent}set canShowInfoPointsContent(e){this._canShowInfoPointsContent=e,this.hideImages()}dispose(){this._renderingNeededListeners=[],this._rootContainer.dispose()}setDefaultStyle(){this._style.infoPointsStyle={borderColor:"#ffffff",innerPointColor:"#ffffff",color:"#a01c20",highlightColor:"#bb2025"},this._style.imagePanelStyle={backgroundColor:this._scene.clearColor.toHexString(),loadingTextColor:"#ffffff",buttonsBorderColor:"#a01c20",buttonsColor:"#a01c20",buttonsBorderHighlightColor:"#bb2025",buttonsHighlightColor:"#bb2025",buttonsIconColor:"white"}}setStyle(e){e?(e.infoPointsStyle&&(this._style.infoPointsStyle||(this._style.infoPointsStyle={}),e.infoPointsStyle.borderColor&&(this._style.infoPointsStyle.borderColor=e.infoPointsStyle.borderColor),e.infoPointsStyle.innerPointColor&&(this._style.infoPointsStyle.innerPointColor=e.infoPointsStyle.innerPointColor),e.infoPointsStyle.color&&(this._style.infoPointsStyle.color=e.infoPointsStyle.color),e.infoPointsStyle.highlightColor&&(this._style.infoPointsStyle.highlightColor=e.infoPointsStyle.highlightColor)),e.imagePanelStyle&&(this._style.imagePanelStyle||(this._style.imagePanelStyle={}),e.imagePanelStyle.backgroundColor&&(this._style.imagePanelStyle.backgroundColor=e.imagePanelStyle.backgroundColor),e.imagePanelStyle.loadingTextColor&&(this._style.imagePanelStyle.loadingTextColor=e.imagePanelStyle.loadingTextColor),e.imagePanelStyle.buttonsBorderColor&&(this._style.imagePanelStyle.buttonsBorderColor=e.imagePanelStyle.buttonsBorderColor),e.imagePanelStyle.buttonsColor&&(this._style.imagePanelStyle.buttonsColor=e.imagePanelStyle.buttonsColor),e.imagePanelStyle.buttonsBorderHighlightColor&&(this._style.imagePanelStyle.buttonsBorderHighlightColor=e.imagePanelStyle.buttonsBorderHighlightColor),e.imagePanelStyle.buttonsHighlightColor&&(this._style.imagePanelStyle.buttonsHighlightColor=e.imagePanelStyle.buttonsHighlightColor),e.imagePanelStyle.buttonsIconColor&&(this._style.imagePanelStyle.buttonsIconColor=e.imagePanelStyle.buttonsIconColor))):this.setDefaultStyle()}applyStyle(e){this.setStyle(e),this.refresh()}showInfoPoints(){this.hideImages(),this.getAllInfoPoints().forEach(e=>e.isVisible=!0),this._infoPointsShown=!0,this.fireRenderingNeededEvent()}hideInfoPoints(){this.hideImages(),this.getAllInfoPoints().forEach(e=>e.isVisible=!1),this._infoPointsShown=!1,this.fireRenderingNeededEvent()}refresh(){this.hideImages(),this.refreshInfoPoints(),this.updateGuiElementsStyle(),this.fireRenderingNeededEvent()}getAllInfoPoints(){const e=[];for(const t in this._meshesInfoPoints)e.push(this._meshesInfoPoints[t]);return e}refreshInfoPoints(){for(let e=0;e<this._scene.meshes.length;e++){const t=this._scene.meshes[e],n=t.metadata&&t.metadata.showInfoPoints&&(t.isVisible||t.metadata.forceShowInfoPoints),r=t.material,i=r?this.getMaterialPhotoUrls(r):[];if(n&&i.length>0){const e=this.getOrCreateMeshInfoPoint(t);this.updateInfoPointUrls(e,i)}else this.removeMeshInfoPoints(t)}}removeMeshInfoPoints(e){this._meshesInfoPoints.hasOwnProperty(e.id)&&(this._meshesInfoPoints[e.id].dispose(),delete this._meshesInfoPoints[e.id])}getOrCreateMeshInfoPoint(e){if(this._meshesInfoPoints.hasOwnProperty(e.id))return this._meshesInfoPoints[e.id];const t=this.createMeshInfoPoint(e);return this._meshesInfoPoints[e.id]=t,t}updateInfoPointUrls(e,t){e.metadata||(e.metadata={}),e.metadata.urls=t}createMeshInfoPoint(e){var t,n,r,i;const s=new BABYLON.GUI.Ellipse("infoPoint");s.width="29px",s.height="29px",s.color=(null==(t=this._style.infoPointsStyle)?void 0:t.borderColor)||"#dddddd",s.thickness=4,s.background=(null==(n=this._style.infoPointsStyle)?void 0:n.color)||"#a01c20",s.alpha=1,s.onPointerEnterObservable.add(e=>{var t;s.background=(null==(t=this._style.infoPointsStyle)?void 0:t.highlightColor)||"#bb2025",this.fireRenderingNeededEvent()}),s.onPointerOutObservable.add(e=>{var t;s.background=(null==(t=this._style.infoPointsStyle)?void 0:t.color)||"#a01c20",this.fireRenderingNeededEvent()}),this._rootContainer.addControl(s);const a=new BABYLON.GUI.Ellipse("innerPoint");return a.width=.29,a.height=.29,a.color=(null==(r=this._style.infoPointsStyle)?void 0:r.innerPointColor)||"White",a.thickness=0,a.background=(null==(i=this._style.infoPointsStyle)?void 0:i.innerPointColor)||"White",s.addControl(a),s.linkWithMesh(e),s.linkOffsetY=0,s.shadowBlur=6,s.shadowOffsetX=2,s.shadowOffsetY=2,s.isPointerBlocker=!0,s.hoverCursor="pointer",s.onPointerClickObservable.add(t=>{if(s.metadata&&s.metadata.urls){const t={meshID:e.id,materialID:e.material?e.material.id:null,materialPhotoUrl:s.metadata.urls};this.fireInfoPointPickedEvent(t),this.showImages(s.metadata.urls)}this.fireRenderingNeededEvent()}),s}getMaterialInfoPoint(e){for(let t=0;t<this._infoPoints.length;t++){const n=this._infoPoints[t];if(n.metadata&&n.metadata.materialID&&n.metadata.materialID===e)return n}return null}getMaterialPhotoUrls(e){return this._zkScene.get("materialPhotos").getMaterialPhotoUrls(e.id)}getOrCreateImagePanel(){return this._imagePanel||this.createImagePanel(),this._imagePanel}createImagePanel(){var e;const t=new BABYLON.GUI.Rectangle("imagePanel");return t.background=(null==(e=this._style.imagePanelStyle)?void 0:e.backgroundColor)||this._scene.clearColor.toHexString(),t.width=1,t.height=1,t.zIndex=1e4,t.isVisible=!1,this._imagePanel=t,this._rootContainer.addControl(t),this.addCloseButton(t),this.addMoveNextImageButton(t),this.addMovePrevImageButton(t),t}addCloseButton(e){var t,n,r;const i=new BABYLON.GUI.StackPanel("closePanel");i.height="48px",i.width="48px",i.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,i.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,i.isVertical=!1,i.zIndex=10003,e.addControl(i);const s=new BABYLON.GUI.Rectangle("closeRect");s.width="24px",s.height="24px",s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,s.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20",s.isPointerBlocker=!0,s.hoverCursor="pointer",s.onPointerEnterObservable.add(e=>{var t,n;s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsHighlightColor)||"#bb2025",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderHighlightColor)||"#bb2025",this.fireRenderingNeededEvent()}),s.onPointerOutObservable.add(e=>{var t,n;s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20",this.fireRenderingNeededEvent()}),s.onPointerClickObservable.add(e=>{this.hideImages(),this.fireRenderingNeededEvent()}),i.addControl(s);const a=new BABYLON.GUI.Image("close",this.getCloseSvg((null==(r=this._style.imagePanelStyle)?void 0:r.buttonsIconColor)||"white"));a.width=1,a.height=1,a.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,s.addControl(a),this._closeImageButton=i}addMoveNextImageButton(e){var t,n,r;const i=new BABYLON.GUI.StackPanel("rightPanel");i.width="48px",i.height="48px",i.paddingRight="24px",i.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,i.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,i.isVertical=!1,i.zIndex=10003,i.alpha=.3,i.isVisible=!1,e.addControl(i);const s=new BABYLON.GUI.Rectangle("rightRect");s.width="24px",s.height="48px",s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,s.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20",s.isPointerBlocker=!0,s.hoverCursor="pointer",s.onPointerEnterObservable.add(e=>{var t,n;this._isOnMoveNextButton=!0,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsHighlightColor)||"#bb2025",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderHighlightColor)||"#bb2025",this.updateMoveNextImageButton(),this.fireRenderingNeededEvent()}),s.onPointerOutObservable.add(e=>{var t,n;this._isOnMoveNextButton=!1,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20",this.updateMoveNextImageButton(),this.fireRenderingNeededEvent()}),s.onPointerClickObservable.add(e=>{this.moveNextImage(),this.fireRenderingNeededEvent()}),i.addControl(s);const a=new BABYLON.GUI.Image("move-next",this.getChevronRightSvg((null==(r=this._style.imagePanelStyle)?void 0:r.buttonsIconColor)||"white"));a.width=1,a.height=1,a.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,s.addControl(a),this._moveNextImageButton=i}addMovePrevImageButton(e){var t,n,r;const i=new BABYLON.GUI.StackPanel("leftPanel");i.width="48px",i.height="48px",i.paddingLeft="24px",i.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,i.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,i.isVertical=!1,i.alpha=.3,i.zIndex=10003,i.isVisible=!1,e.addControl(i);const s=new BABYLON.GUI.Rectangle("leftRect");s.width="24px",s.height="48px",s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,s.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20",s.isPointerBlocker=!0,s.hoverCursor="pointer",s.onPointerEnterObservable.add(e=>{var t,n;this._isOnMovePrevButton=!0,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsHighlightColor)||"#bb2025",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderHighlightColor)||"#bb2025",this.updateMovePrevImageButton(),this.fireRenderingNeededEvent()}),s.onPointerOutObservable.add(e=>{var t,n;this._isOnMovePrevButton=!1,s.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",s.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20",this.updateMovePrevImageButton(),this.fireRenderingNeededEvent()}),s.onPointerClickObservable.add(e=>{this.movePrevImage(),this.fireRenderingNeededEvent()}),i.addControl(s);const a=new BABYLON.GUI.Image("move-prev",this.getChevronLeftSvg((null==(r=this._style.imagePanelStyle)?void 0:r.buttonsIconColor)||"white"));a.width=1,a.height=1,a.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,s.addControl(a),this._movePrevImageButton=i}updateMoveNextImageButton(){this._moveNextImageButton&&(this._imageUrls.length<=1?this._moveNextImageButton.isVisible=!1:(this._moveNextImageButton.isVisible=!0,this._moveNextImageButton.alpha=this.canMoveNextImage()?this._isOnMoveNextButton?1:.3:.1))}updateMovePrevImageButton(){this._movePrevImageButton&&(this._imageUrls.length<=1?this._movePrevImageButton.isVisible=!1:(this._movePrevImageButton.isVisible=!0,this._movePrevImageButton.alpha=this.canMovePrevImage()?this._isOnMovePrevButton?1:.3:.1))}showImages(e){this._canShowInfoPointsContent&&(this._currentIdx=0,this._imageUrls=e,this._isOnMoveNextButton=!1,this._isOnMovePrevButton=!1,this.getOrCreateImagePanel(),this._imagePanel&&(this.onBeforeShowImages&&this.onBeforeShowImages(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this._imagePanel.isVisible=!0,this.showCurrentImage(),this.fireInfoPointContentShownEvent()),this.fireRenderingNeededEvent())}moveNextImage(){this.canMoveNextImage()&&(this._currentIdx++,this.showCurrentImage(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this.fireRenderingNeededEvent())}movePrevImage(){this.canMovePrevImage()&&(this._currentIdx--,this.showCurrentImage(),this.updateMoveNextImageButton(),this.updateMovePrevImageButton(),this.fireRenderingNeededEvent())}showCurrentImage(){this._currentIdx>=0&&this._currentIdx<this._imageUrls.length&&this.showImage(this._imageUrls[this._currentIdx])}canMoveNextImage(){return this._imageUrls.length>0&&this._currentIdx<this._imageUrls.length-1}canMovePrevImage(){return this._imageUrls.length>0&&this._currentIdx>0}hideImages(){this._imagePanel&&(this._imagePanel.isVisible=!1,this.onAfterShowImages&&this.onAfterShowImages(),this.fireInfoPointContentHiddenEvent(),this.fireRenderingNeededEvent())}showImage(e){if(this._imagePanel){this._image&&(this._imagePanel.removeControl(this._image),this._image.isVisible=!1,this._image.dispose(),this._image=null),this.showLoadingText();const t=new BABYLON.GUI.Image("but",e);t.width=1,t.height=1,t.isVisible=!0,t.zIndex=10002,t.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,t.onImageLoadedObservable.add(e=>{this.hideLoadingText()}),this._imagePanel.addControl(t),this._image=t,this.fireRenderingNeededEvent()}}updateInfoPointsVisibility(){let e=!1;if(this._scene.activeCamera&&(!this._lastCameraPosition||!this._lastCameraPosition.equals(this._scene.activeCamera.position))){this._lastCameraPosition=this._scene.activeCamera.position.clone();for(const t in this._meshesInfoPoints){const n=this._scene.getMeshByID(t);n&&(this.updateMeshInfoPointVisibility(n,this._meshesInfoPoints[t]),e=!0)}}return e}drawRay(e,t){let n=t.subtract(e);n=n.normalize();const r=2*t.subtract(e).length(),i=new BABYLON.Ray(e,n,r);BABYLON.RayHelper.CreateAndShow(i,this._scene,new BABYLON.Color3(1,1,.1))}updateMeshInfoPointVisibility(e,t){if(this._scene.activeCamera){const n=this._sceneHelper.getMeshHierarchyCenter(e),r=this._scene.activeCamera.position;let i=n.subtract(r);i=i.normalize();const s=2*n.subtract(r).length(),a=new BABYLON.Ray(r,i,s),o=this._scene.pickWithRay(a);o&&o.pickedMesh&&(t.alpha=o.pickedMesh===e?1:.2)}}getCloseSvg(e){return this.getSvg(this.CLOSE_SVG,e)}getChevronLeftSvg(e){return this.getSvg(this.CHEVRON_LEFT_SVG,e)}getChevronRightSvg(e){return this.getSvg(this.CHEVRON_RIGHT_SVG,e)}getSvg(e,t){return e.replace("\xa7color\xa7",encodeURIComponent(t))}fireInfoPointPickedEvent(e){for(let t=0;t<this._infoPointPickedListeners.length;t++)this._infoPointPickedListeners[t](e)}addInfoPointPickedListener(e){this._infoPointPickedListeners.push(e)}addInfoPointPickedListenerRange(e){this._infoPointPickedListeners.push(...e)}fireInfoPointContentShownEvent(){for(let e=0;e<this._infoPointContentShownListeners.length;e++)this._infoPointContentShownListeners[e]()}addInfoPointContentShownListener(e){this._infoPointContentShownListeners.push(e)}addInfoPointContentShownListenerRange(e){this._infoPointContentShownListeners.push(...e)}fireInfoPointContentHiddenEvent(){for(let e=0;e<this._infoPointContentHiddenListeners.length;e++)this._infoPointContentHiddenListeners[e]()}addInfoPointContentHiddenListener(e){this._infoPointContentHiddenListeners.push(e)}addInfoPointContentHiddenListenerRange(e){this._infoPointContentHiddenListeners.push(...e)}fireRenderingNeededEvent(){for(let e=0;e<this._renderingNeededListeners.length;++e)this._renderingNeededListeners[e]()}addRenderingNeededListener(e){this._renderingNeededListeners.push(e)}showLoadingText(){var e;this._loadingText?this._loadingText.isVisible=!0:this._imagePanel&&(this._loadingText=new BABYLON.GUI.TextBlock("loading"),this._loadingText.text="Loading...",this._loadingText.left=.5,this._loadingText.top=.7,this._loadingText.zIndex=10001,this._loadingText.color=(null==(e=this._style.imagePanelStyle)?void 0:e.loadingTextColor)||"white",this._imagePanel.addControl(this._loadingText),this.fireRenderingNeededEvent())}hideLoadingText(){this._loadingText&&(this._loadingText.isVisible=!1),this.fireRenderingNeededEvent()}updateGuiElementsStyle(){this.updateMeshInfoPointsStyle(),this.updateImagePanelStyle(),this.fireRenderingNeededEvent()}updateMeshInfoPointsStyle(){this.getAllInfoPoints().forEach(e=>{var t,n,r;e.color=(null==(t=this._style.infoPointsStyle)?void 0:t.borderColor)||"#dddddd",e.background=(null==(n=this._style.infoPointsStyle)?void 0:n.color)||"#a01c20";const i=e.getChildByName("innerPoint");i&&i instanceof BABYLON.GUI.Container&&(i.background=(null==(r=this._style.infoPointsStyle)?void 0:r.innerPointColor)||"White")})}updateImagePanelStyle(){var e,t,n,r,i,s,a,o;if(this._imagePanel){this._imagePanel.background=(null==(e=this._style.imagePanelStyle)?void 0:e.backgroundColor)||this._scene.clearColor.toHexString();const l=this._imagePanel.getChildByName("closePanel");if(l&&l instanceof BABYLON.GUI.Container){const e=l.getChildByName("closeRect");e&&e instanceof BABYLON.GUI.Container&&(e.background=(null==(t=this._style.imagePanelStyle)?void 0:t.buttonsColor)||"#a01c20",e.color=(null==(n=this._style.imagePanelStyle)?void 0:n.buttonsBorderColor)||"#a01c20")}const u=this._imagePanel.getChildByName("rightPanel");if(u&&u instanceof BABYLON.GUI.Container){const e=u.getChildByName("rightRect");e&&e instanceof BABYLON.GUI.Container&&(e.background=(null==(r=this._style.imagePanelStyle)?void 0:r.buttonsColor)||"#a01c20",e.color=(null==(i=this._style.imagePanelStyle)?void 0:i.buttonsBorderColor)||"#a01c20")}const c=this._imagePanel.getChildByName("leftPanel");if(c&&c instanceof BABYLON.GUI.Container){const e=c.getChildByName("leftRect");e&&e instanceof BABYLON.GUI.Container&&(e.background=(null==(s=this._style.imagePanelStyle)?void 0:s.buttonsColor)||"#a01c20",e.color=(null==(a=this._style.imagePanelStyle)?void 0:a.buttonsBorderColor)||"#a01c20")}this._loadingText&&(this._loadingText.color=(null==(o=this._style.imagePanelStyle)?void 0:o.loadingTextColor)||"white")}}}var Ci=(e=>(e[e.NotSelected=0]="NotSelected",e[e.Eyewear=1]="Eyewear",e[e.Scarves=2]="Scarves",e[e.Earrings=3]="Earrings",e[e.Headwear=4]="Headwear",e[e.Necklace=5]="Necklace",e[e.Shoes=6]="Shoes",e[e.Watches=7]="Watches",e[e.Bracelet=8]="Bracelet",e))(Ci||{}),Di=(e=>(e[e.NotSelected=0]="NotSelected",e[e.Mazing=1]="Mazing",e[e.Banuba=2]="Banuba",e))(Di||{}),Ei=(e=>(e.VirtualTryOn="try_on",e.GlassPupillaryDistanceTool="pd",e.StyleButton="styleButton",e.MandatoryPupillaryDistance="mandatoryPD",e))(Ei||{}),Ai=(e=>(e.Neutral="neutral.hdr",e.Light="light.hdr",e.Bright="bright.hdr",e.Studio="studio.hdr",e.Court="court.hdr",e))(Ai||{}),ki=(e=>(e.ViewProduct="VIEW_PRODUCT",e.ViewArProdutc="VIEW_AR_PRODUCT",e))(ki||{}),Mi=function(){function e(e){var t=this;if(this._axisRoot=null,this._axes=[],this._sceneEditor=e,!e.engine)throw Error("LightsLayer requires a valid Babylon JS 3D Engine");var n=e.engine;if(!e.scene)throw Error("LightsLayer requires a valid Babylon JS 3D Scene");this._editorScene=e.scene,this._scene=new BABYLON.Scene(n),this._scene.autoClear=!1,this._scene.postProcessesEnabled=!1,this._sceneEditor.addPreUpdateListener(function(){return t.onPreUpdate()}),this._sceneEditor.addPostUpdateListener(function(){return t.onPostUpdate()}),this.createAxes()}return e.prototype.dispose=function(){this._scene&&(this._scene.dispose(),delete this._scene)},e.prototype.onPreUpdate=function(){if(this._scene){var e=this._editorScene.activeCamera;if(e&&(this._scene.activeCamera=e,this._axisRoot)){var t=.03*BABYLON.Vector3.Distance(e.position,this._axisRoot.position);this._axisRoot.scaling=new BABYLON.Vector3(t,t,t),this._axisRoot.computeWorldMatrix(!0)}}},e.prototype.onPostUpdate=function(){},e.prototype.createAxes=function(){var e=this,t=10,n=this._scene,r=new BABYLON.Mesh("axisRoot",n);r.isVisible=this._sceneEditor.canShowAxes();var i=function(t,i,s){var a=new BABYLON.DynamicTexture("DynamicTexture",50,n,!0);a.hasAlpha=!0,a.drawText(t,5,40,"bold 36px Arial",i,"transparent",!0);var o=BABYLON.MeshBuilder.CreatePlane("TextPlane",{size:s,updatable:!0},n),l=new BABYLON.StandardMaterial("TextPlaneMaterial",n);return l.metadata={isRealMaterial:!1},l.backFaceCulling=!1,l.specularColor=new BABYLON.Color3(0,0,0),l.diffuseTexture=a,o.material=l,o.metadata={isRealMesh:!1,isAxis:!0},o.parent=r,o.isVisible=e._sceneEditor.canShowAxes(),o},s=BABYLON.Mesh.CreateLines("axisX",[BABYLON.Vector3.Zero(),new BABYLON.Vector3(t,0,0),new BABYLON.Vector3(9.5,.5,0),new BABYLON.Vector3(t,0,0),new BABYLON.Vector3(9.5,-.5,0)],n);s.metadata={isRealMesh:!1,isAxis:!0},s.color=new BABYLON.Color3(1,0,0),s.parent=r,s.isVisible=this._sceneEditor.canShowAxes();var a=i("X","red",1);a.position=new BABYLON.Vector3(9,-.5,0);var o=BABYLON.Mesh.CreateLines("axisY",[BABYLON.Vector3.Zero(),new BABYLON.Vector3(0,t,0),new BABYLON.Vector3(-.5,9.5,0),new BABYLON.Vector3(0,t,0),new BABYLON.Vector3(.5,9.5,0)],n);o.metadata={isRealMesh:!1,isAxis:!0},o.color=new BABYLON.Color3(0,1,0),o.parent=r,o.isVisible=this._sceneEditor.canShowAxes();var l=i("Y","green",1);l.position=new BABYLON.Vector3(0,9,-.5);var u=BABYLON.Mesh.CreateLines("axisZ",[BABYLON.Vector3.Zero(),new BABYLON.Vector3(0,0,t),new BABYLON.Vector3(0,-.5,9.5),new BABYLON.Vector3(0,0,t),new BABYLON.Vector3(0,.5,9.5)],n);u.metadata={isRealMesh:!1,isAxis:!0},u.color=new BABYLON.Color3(0,0,1),u.parent=r,u.isVisible=this._sceneEditor.canShowAxes();var c=i("Z","blue",1);c.position=new BABYLON.Vector3(0,.5,9),this._axisRoot=r,this._axes.push(r,s,o,u,a,l,c)},e.prototype.refresh=function(){for(var e=0;e<this._axes.length;e++)this._axes[e].isVisible=this._sceneEditor.canShowAxes()},e.prototype.render=function(){this._scene&&this._scene.activeCamera&&this._scene.render()},e.prototype.getScene=function(){return this._scene},e}(),Ti=function(){function e(e){var t=this;if(this._lightMeshes=[],this._lightSelectedListeners=[],this._sceneEditor=e,!e.engine)throw Error("LightsLayer requires a valid Babylon JS 3D Engine");var n=e.engine;if(!e.scene)throw Error("LightsLayer requires a valid Babylon JS 3D Scene");this._editorScene=e.scene,this._scene=new BABYLON.Scene(n),this._scene.autoClear=!1,this._scene.postProcessesEnabled=!1,this._scene.onPointerDown=this.onPointerDown,this._sceneEditorPreUpdate=function(){return t.onPreUpdate()},this._sceneEditorPostUpdate=function(){return t.onPostUpdate()},this._sceneEditor.addPreUpdateListener(this._sceneEditorPreUpdate),this._sceneEditor.addPostUpdateListener(this._sceneEditorPostUpdate)}return e.prototype.dispose=function(){this._sceneEditor&&(this._sceneEditor.removePreUpdateListener(this._sceneEditorPreUpdate),this._sceneEditor.removePostUpdateListener(this._sceneEditorPostUpdate)),this._scene&&(this._scene.dispose(),delete this._scene)},e.prototype.onPreUpdate=function(){this._scene.activeCamera=this._editorScene.activeCamera},e.prototype.onPostUpdate=function(){this._scene.getEngine();for(var e=0;e<this._lightMeshes.length;e++){var t=this._lightMeshes[e],n=this._editorScene.getLightByID(t.id);n&&this.configureLightMesh(t,n)}},e.prototype.onPointerDown=function(e,t,n){if(t.hit&&t.pickedMesh){var r={name:t.pickedMesh.name,id:t.pickedMesh.id};this.fireLightSelectedEvent(r)}},e.prototype.refresh=function(){this.updateLightMeshes()},e.prototype.updateLightMeshes=function(){if(this._scene&&this._sceneEditor){for(var e=0;e<this._editorScene.lights.length;e++){var t=this._editorScene.lights[e];(n=this._scene.getMeshByID(t.id))?this.configureLightMesh(n,t):this._lightMeshes.push(this.createLightMesh(t))}for(e=0;e<this._lightMeshes.length;e++){var n=this._lightMeshes[e];(t=this._editorScene.getLightByID(n.id))||(n.dispose(),this._lightMeshes.splice(e--,1))}}},e.prototype.createLightMesh=function(t){var n=new BABYLON.Texture(e._lightTexture,this._scene);n.hasAlpha=!0;var r=new BABYLON.StandardMaterial("LightMeshMaterial_"+t.id,this._scene);r.emissiveColor=BABYLON.Color3.White(),r.useAlphaFromDiffuseTexture=!0,r.disableDepthWrite=!1,r.diffuseTexture=n;var i=BABYLON.Mesh.CreatePlane(t.name,1,this._scene);return i.id=t.id,i.billboardMode=BABYLON.Mesh.BILLBOARDMODE_ALL,i.material=r,this.configureLightMesh(i,t),i},e.prototype.clearLightMeshes=function(){if(this._scene)for(;this._lightMeshes.length>0;){var e=this._lightMeshes.pop();e&&e.dispose()}},e.prototype.configureLightMesh=function(e,t){var n=this._editorScene.activeCamera;if(n&&e&&t){e.position=t.getAbsolutePosition();var r=.03*BABYLON.Vector3.Distance(n.position,e.position);e.scaling=new BABYLON.Vector3(r,r,r),e.computeWorldMatrix(!0),e.isVisible=this._sceneEditor.canShowLights()}},e.prototype.render=function(){this._scene&&this._scene.render()},e.prototype.getScene=function(){return this._scene},e.prototype.fireLightSelectedEvent=function(e){for(var t=0;t<this._lightSelectedListeners.length;++t)this._lightSelectedListeners[t](e)},e.prototype.addLightSelectedListener=function(e){this._lightSelectedListeners.push(e)},e._lightTexture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALkAAAC5CAMAAABDc25uAAAC/VBMVEUAAAD6ggT5kgH6igH3nA78nwD8ogD8pQD8owD8nQD8oQD9qgD8pgD8pAD8pQD8qwD8qQD8pwD8mAD8qQD8qwD8pwD9qgD8qAH8pgD8pwD8qAD8qAD8qAH8qQD8qQD8qQD8qAD8qgD5lED9qgL6lzb6lTn6mDL6nyP6nSj6ohvMyL/5my/8qQX6pBb8pg78pwn9lCVzc3OnoZabmJC1trXBs5e/v7r1sFuoq6mwvczp6uK1t7qZl5SxsKqqo5fltnWcmJDZwZfiq1qtn4Ocl4/NpVeprana4+y7wsMAAAC+rou3nnSIiIjPmTrWqFEgICAODg4LCwsAAAAAAAAAAAD+vQP+wwb+ugL+wAT+yQP+xwb/+uf+7Qb+6Qf/+N3+5An/9tP/9Ln/9c3/7rL+6Gr/6IH+71z/85IBAQH+3lT+zgf+8gX+xAH/rAH/5Ij//O/f3dr/9LH/6Hn+4nX+72r/32X/7pn+7mL+6VL+2Qj+9ID+9mz+9mL+42z+3gn/8sb/9KD/3kz/9MD/76j/53L+6Frv7urm5eLa2db+twL///7//fb/99j/9Jn/9sb+71f/65L+91j+4EPj4d7+6WL++E793Tvr6ub/5Hz+3VvLzMz+2kT/9Kv/66f/9Ib+0ir+0wf/5GL+1jP/64v+5Ur+60XV1dPAwcH/77v+41v++kL+ziD/5FH+3jH/84z++Df/6Jj/7p/+8E/+8Dv6mzf9tg3z8u7Fx8f/7oLQ0dD/8sr/5ZH7pSf+5zr/9Kf+80X+5xb9sBT5lj3/34H+9Xj+7DD+xyv++Bj+9Q/+yA/+8yL++yL+9HL+1lL+5i/7oC/8qh/+vxL+73r+3ST+8RfZ1c3+7nP+/jP+zRT/6KD+4yS7vLz+4BfT0Mn+1j3+6SP/z3D/uSf/3W//12D+yzX+8Az/8MHHw7quqqHPzMTDvbP+xCD/1xj/zGK2sab+zj/Qxa7+0kn9sxmwsK7/1Hn/yFK9t6f49/W9ua/f0rTs38H06M0gIB9jYl8/Pj1icJHzAAAAVXRSTlMAAgUDCAsPFxIJDU8fFBpWSiMGRVkpUywdJS81Mjs+QThd/mPk8Natupv+yGyNf3T7/v77/v7dw3v86LEe1TXBzMKvnFNJZPxH0bXFUh5uakItgH0Y/skKLQAAHplJREFUeNrEl81OGlEYhtvSWhXtVEqnaqv8yG/48WromJAQhH1J0wvAwIpCegWyZ2kT2CAxYUjcNQNLtkrcuGhMegF9v+8cOUhrVX7sewZSKdBnnr7nm/HJdHlKsdmeIY7nyNILZJmzgGOBDsoLyhK9w+F49sxms+FjT3D8nzxV2A4JvUy0C4uU1WH4R7zMZ7BE+IAHPX36v8Df4F4CN1Mz8svxrCKMz/qv2f8LueJ2OGBbyJbQr5B1ZGX4RK+8RJhempfiHx1eccM3WNg1QRPsyhqysbYhskZZWVmhEyD7VJwXzM7o4H4kdCWcayJaIrAZGqxvkXcjwY94lfAVPEpD3h9XO2OzcKo3t4RtQzWowby5+QF5L0N/3txkftCTeqo92Nk71R3e586uwKVw6CZuxgY1oEHsdru3tra2ZbYQtxtnwPiAZ/PMvgx20v4o6PQ/ywPl+fMX5Ht1FbqpJOT6A6CB7HK9QV6LvKG4XDgD4IMe8FQbyc6VeZwxIxuOwSb6zTUBN2MTtIuQ7YguY0fwEuNvAR7sKD2XZpH36qO0HV/OO5OEM/dNbBINZE1zjkXTcAJMz/BCPLOTdmK3zVc7g9toZ0I4F2XITdhMzaBg93h2RDxOTacXJD3BMzvQadCQdm7MPMvOTeFLjxJO3Kwb2MB1AnFnNx4OhiKBQMDn8+E5EgzH4lGPRmcFepiHePautPOQsSnp86k4wDEJZVHgW3Dr7HonHg5FfF6zXq9bVotiWfW6afp9kWAs6iT5il1Whqb7Et2JzavrYhjytR7CZVGIGzURuqOxYADQVqvbbhhG4jqG0Wh3W1bd64+E4x4dJ2gHPHdGaYd1UfZ5gcO4bIoQ7mbfVANPPOgzTavbNgT03t7HHvJxb28vYRB+qd2qm4CPUu1ReNe2+z3XfdgYh+j63Iwvi6ZAOAouuD3aTjjiNa12gxD3Lq/OPlXzmUoKqaSbtaPO+aDH+I2uZfpDcU2Hd+xVVEa2XaKLG/e5GFfg7zYxUIRvcAe89S41ZG9w1s/nvv6ZVPb4xyVOy2i3ID7uFOysfYO1MzpfTmdODnDem9wUbjiE6+zb57XaRsLYuzpulr/enmT2yynUN7p1bySOSaPbof09tAv0BaDPfJtChDQ+BEfDIRz9jgXADd2DTob5yreF/jJXPe8ZiVK37g9FdU1oZ/R1KrssDDzNwfjiEFwIj4a8ddqUP/vlMejb6Ctnl2Bvmb4w6q4z+qbcp8r6LMEdI+CbsilOZ9hvtog7S7Jz9wngkx2wNyxvZNeuicYAXXWdJ8wMr0A8DleH4GgKGg7hDaN0Ct/AvnfIOzZr1/TH0BiFLiaMGOuznIc8VRQ4mhIPeLuG0eskv5aTDwrY81esPYQrk/01o2+g64uLy7iJEfcBM+zKTXCnHvObbaM0uAD3g4OT7fQMo+WN7Nhpn45Yn13V5e4cN+4MU1MSX3LlZIoXjvuE34iV+9oclBJt07drZ+sSfYa7dNiVxdVX68q4M+i1SkavCu5JU06eM3oc1iX6OqPTjSPIp+8K/6pMuxPg76RxT8jbSpRO8+VU5QGsFSyVSrLcwd1Y3R8X1mmu01jHb6cObvrMuoJLPua4640w3kLF07nKVEnljhICHROG0DcIfdiX6bsidydushhc8wAcxq8qyfSUqeT6vaH1bTfQqeo81aeVDnJZ8pei5AB3amEC/5lOZTKZtFr3TObGSrJ1X5Ssb4tdugp0JX1q5eiKKLnu0WNeC1Vpppogb8r1wPCHmvScPMZgNwM7ui5n4zqPxmk3KStfWlpGV7jktDu1uN8yjMtaqjkeZvo2tnCMM48mn0l+oQkTcWo6dums+oKPCuWiK+5t2p3RAM3xfio/mm9i3R3x5tE0Kz9Kia43yH1xi74sqL5MBy6Ui5I7I952ovQrlb/g5MdyK3IBK18AteKWX5FunpYSLW/suuor6/J6RNKnajlGOa5B3BWddmcXY6WZvximcFF4ePCpYdJ93H/VfVR1F+bLmujLNE1XynmuUFe0XSp5L5upjaZQK+wX9kdS4KfxxS/X9gv0fv7UddJnVPWQxtLlJlVNn7gsdNlfgfItviOPmI1E6axZU9mnhYMfBSb+d/ittIa5uEBfutQXzBdsUjkZ+Uo6+WBRymmuxKgrg1otO8y+OD5nmeozP/6Z7Ge8/3P2RpqfDNkX2qRK+hTk3HJsT1au0VzBP9HJZ1UAgQMLx90R75NrJLWf6AvNFxrqLH1BNn3yy6dULrZnkObKAMarWNkiDkYX4IeK71Ae4wuHZMchv4C/6+LYMBIt/y5tUiWdB+Pk+1Mqd5FynwXlZ7WqSLFavM4hjsPDIta/U6TFTxx8BQcaBiVcSkO6br9u+sR1ATnfsUjl3PKgCeWncPQn+gk/Dk8OT07w+PtiYnpGFLhI7UxIt0vpGIyT7lF1+aTBopSXzrPVPtYo/feT4kHx5ODkPjkoYuEjI9h9Oo4uhXQxXtZGpE+zP+UsD6PlRuJTti/yvf9d5UCsuyLfp4JvEclelUh6VOeZzoNxsj0KcBuXRe3PnYBloCz9/hHC6EP2A4mO4w5wxa3A+QurHVhpm0GuywexR1GXCcnlvRaNRJrlZhdX6R/VI5XfrJlLaxNRFMdBceEDgi5cKPjAN74+zaQx6xgJhFmYJyZZCM1SkoCBBEGJj4VWpAwKwgguUgQhg9pF0Y2LqTsX0m/g//zvnNxpNbaT+js3behkbn4M555zZ1qtYpB7EttTNWFYllC++Xhst/Dp/Bldo/NWFyYLLrkkC7sQbj1fv8FlCb/5qi3RVfEduFcjd6UL765V/7EgF/2qXHRNl/nM98BcNuaHcQ8n6/P6uXcOtizusk+6llsSSajKGVN8w7cAT9jfvOYaZbqwusxlzs5vk+USSqKz8MGPEVPfqT0/+MqK+xJkOXTAu7OyRlldcC/NXXrybDmibQiVBXstJAvMf/m+KzyxvJLxasfgs12eEuE+ccly6QvMTbqcOG6bUVJz1sQozSVZUtfPIlmchQ2KG3nXyqv7Q4Afs6A32OJN/PFPR9LlQtSMuEtPXNG5QHXPopVFirkT+O4YX3NTArxVHkpgbAc+ZsEEnMd1OekHXBlUl9NMFyb6HBVdd1s2zS8gWUDgjsHNsWhTXeVhdOftne14+xBj6o1hGIwFmDvOZ+wA0Iw00fcnNWcfOqBpLs/jLn+SeTPr7nhguDmw6rBehde23nwhhMibc2FOMXeY6Jc2JfqR5Oa6TzQN9ArSnObj0iDiNljFiLOyuqLcaTD4nqxixMHJZEBKAzFnXWSim4q+bx+LS6IbOW5acM/P1p/CQ5bPGTEPxiXD7dJtIgLWOsYE2owVYv1V24CJImCecaSNplK6X9QlmticfeiYPKw4imou4mIelgyLYG1xLWKCMcGY0misMCYx8Kk4i6REMCvMWdG5ROftReygtrRwgdJ8oxSGYavVovcWd1UmEwR/6ytmr9pq3mph0lL4M5OJlih7Ec0TF/So92tpYR+i+S+YizrJkbUymJRJo9yYDY5OWSzn1nKgRahegTmX6LXI/NA811zL+aHD0kGj0gLxzA98A1BvUM6V1Rqh6s1NIfCYlcd5NKd7BYTDjzSPdVH5PyP6f1Jzs2th75e9+TuH5kuViNEop+pKs9ysNf8FDtesuGE0qhjCII35pbhcOngwbo5rnmSB0lzL+dGUFEWaf1yvVIYiTu4Ltfu1CJhhzNZmKDyXs9B9PfxVhDr7/1Et6MZ87y7MsWv5TPFiOqgMhecxc0O+mc/j1Wzme02EDNJk4IAcr+G1Rfz56DlnrCyp+UWaHzOtKKk5V2h0D3rSmqfTxceRudAm+XZe6eV7s+n0cDiv4DRBphkaPsKcBf1iCuan1Jw3F0nMj1hz3FZY86XhsCBY804n3yE9E0pffyk4SHhCeypeIMONbDGdnpqf3I35AWuOR7hiDvViNoC58BLU2+16vd7pYBDP6/X7Xv9P8Eev53lex+sQOQUnyxwFw/ojiP8f8xnZUnw8NOJG3eApfRn9v8OjpO7VCSaI1INC8HX35naF0lxXaIbm2eJScNdgzaFC4tYvJDDkHb3pTuiu5tFkhe/Z7CZzXaG7ry1qnr3xvfCAX/Y04hnwnnnee8tvUu2mxWkgjAO4eBIFPfh+0/Ud8eNYbWjYszX5AL0UPHrtIZceUgJeHIKg9maxFdJXqEoKhlC2BOxpc8on8P88M9OJrXqI/13o7uxs/Tk7mcxL3u7l81vzs/dUGb+if53fq/tC1KX8uR5brleQI5DTufPFG2Y838nFq2632+m86ii3zh77L3bUQ13A3yh4p4O3e3XSrFuWkj8wdyIpr3T3JznminQP1fJ6wHKOkX+mDwoh/0lnudR3KEwXdZZjEND30Op3f8y4eIOL5Zi3AK7kotv1vA7lzWDAhA9vPuzyTuWHiv7+w7tdFenuDKTb63rdoGnkX55gxgW5fAagmtzMcq88+PhsJ28GkCMDb9AZyJTd2v7W0DVeZfBhoONxqMm13MwVzSy3+tL/Es3Pd/J6cuJpOocof2zwsj2CXLk1vENvQQmaps31/FxvilZazZ3TqzleE5k2bwovpHihIkSRYkfjcfjuBz6Cccjo5c+fIeg/luNsvJQNH1EGMvwmXpCU5LQmqryaQ2gFfd6soGkd6hh502f6MlxSmBL6fhSRL/PhzeTrws/G/EWUjcNxFr1b+iG7URUJZby8WZJ/fXxJys2eaIX9Fj2gY4KOYbEk7wXh7/Qw44yjH3E2hjda8GuWLhayYA59NkYVP6IsWc72IG6W5M8wKJamimjzqjtFJKdLlAeX2mxGciQPJV0GEpiEiOfz+SI+zfwFkp6eio38IhPzxXye+gK14h2c3XEY95R8BrnDSyIaWiDnHfTqu3NmCV0j+UzKe3kYx2mcpikEm80mEkWWQkd0fO4FBfyTTVacbmSWKSUmOMsBZ/nBAvpsFTlvW6hLFPuKDuRJYkl5L4+RlEKQeVwUAri/2FU5V2K4ciMtlmPASmbcze/fvnCh2o6o6S7yEr2K2aK6/7M8kXJD37A8LdCc8xUBJ/NJOfytpIuiiCHnKHrek/KE5bWn6OZmpkhyjHPVdv71gy2XHn58iilRIkSi5K1cydPNEJLvo2K9ktFkY5flw++j/nC1QfWUolocckQIgd7iFEfqDnpzt/Nf/RyXOzpG9KPCITnoSt7K15QhZ5WMRvlK03/HTycTLl2PRjP4ZdaUVovoBFfyT3fvmB2uqmcWfC8q7Yne+8RyprMckfI1yfO+CxZlqjNRr6vpiuX4zyUr4wZcywUFcO4sZjTnbl5BXj5u4W2up05tJhA/0fI202X6bn843SKr7XQ/2+kWn9/d/lrLyU7uFsN9ag8HnQWTFj0moptXPVU03eXWZRpdjr45NUv4CNPxr4LeJvnxcGjbNddtAchh7kv+RFTZ8Wv32XBrD6n+8XrdbnOTIz4Ha38aWdSYWP0kF3QzdeHVBc6gsQyFnOm60dvtY4697bluc9tosPIlZfpSh4oaU1SwtrYt67cRlmu4sGpO/+iR7iz6rOU/n1gw16gz8ylBkGu5pjfarvvUblBeHoaKHfxRtNzA8yCQcsdxcO5PTa47S8UnFkA3z0Kpc4uvjmNJ+CHdtp+5r9tMPHRTsf3afX3cKLW5hiN+gM5i9b88MOe46vD8DMmrjS7mGr324KioOyKQ8WKmG3nDct0eEQ/tXIS/yfPGfmeJvYDz07cci59vUY9aoLNUfmSR5DRf5GuUj1y40WeBpod73QX9uAbigV0VNF23bjoLy/PQU/IT4dT58RZ9fVbsLGZ04WtUP+FCPb1u+SfEDjwkL9PtNrqD3bAN3rApv2g5l9AmoigMC4KCohEMKoqP+KiV+gJRcCGC7hTctWbiG42QMAlojI+FSn0sCoLBhSSoBBMFJQoqEcQqiEGhi9FGRaJIjCa4qSFU0r3/OXOvdzKzm4x/s5CZjP3m9NxzX+fcfrj5XqvJYXAoR+zVHJwFXm7J45qmIov7REuUV3BWEZbRi0GtUGVdh659BLpy9KDZBE3svTZRTDxgBf/2ELM5qErK6hp5uV+1z26y/sQIQAbG2Wa+ohYS4BAm7h+V0fcKf7BYnT4sDpohi8nBTeCSvKJr3afOOY3+Ly034O9dWsaqBX4V1kgADl3/JtH3naG4yLLZm67oaL+CnLnviKUW/s+yIa0s0qFVSHRdzIWneARg9XT/OjTSEWCzxGLRO2IncjjE0Dlgkmzc5CyxcwL82zssbslFIlZBD3lncpBbUhal0X3USLOGIGeB4uVX09NNuzoFdPp7MPirry/vkCzgRi6kPWWTs5erwZb7BHTaRBc5UWaRhT+wrOd1MHqD0dW66OnTd9+9AjkcXbfQWsi5DewD9ru7p09bl0KZHMuh75dbA4u9fbr3dJluCU9fu+IFjD4odUewA/7l92/kLgTqVH9s6Nubl8AW4IP4CBnVkPYHIxaO5Sopd7LsP7tKhxYprqIk5w+MLhfRBx+odfSrT1qY2396dcCO/erT1x8/WtjZsK74C+xBw6hoA8W+AO0O2UzeDbkzeT5AQb2QMSJq00WhRyYmIk+eYIn0jRIWQJ88wQ2DuBlcoEdYRianaS+WohpKVojMMMv+CLz74hZpdI6MFNSrmYhQB/kDANIOVqdwxcArETlLcfM+ywiaZ+8cvyPhX4F3mT4vuiMumntaiYgtuojYX2RdvTwxMXH5qkPi+mUhfgSPkjKZrDaA5smpIVYv75pcJC5O4UpFMzIGaOSVTWZIhA5wqaOwbYZ3Ozt1H38LXBXgkp03cKuaxoUKIh+XRyyiF/KAXIwBRCNdFqCgfkNt6ZIEeYYQncrQCymTk/AkgWdGtDLqoPwyHXemJxV/Ct1abkGNtO91fzSTFOQdOQDNiSbtp3M2AH/4X/WJifu0Ya52zCECT3IoXwcvt3ZCakbhSdGfKnEJBCioFzh34XZSgAOdVG82b4O1Q3ifZh1vINAZHs9RtklOo1DuAzhFROu43ANye40L+wtNj3Kcl0IMkAA/VQfkCTY3JIx/IomLpxQ3g5N+3giRrwT8ombOi0JF5xTD1kh7irp2I5Fknb19RIohT9iF10meOKJ0+2yS3joRGdEwuF0rTS7rzmRg8c5fVPlcIEBBHegyL4p+TIHyyBFw1Vl4rSMn+JrUWalkAukV0T9LV/r+Nc+pshhnklfkHBk7ShaXoZGWtVAk/Q9Ekv1ssmpCTYg8SHLjI+ATyYqObr9nWcA3fbFsnmzy7rpPZ+mCtSf1mY1UCxlp0+yXpD7/bNbaJSQIiyxtpNy28QI/P19S4ifSAA9RKPcFposBi3e+4hwzqp6UGulTLNgDnVIX8RGqtVMnbUq1m4qcvotHwsmKRs2z1x+wVstxOqtn4Gqtjla8ZCNdhulRSNO1ahrsELEfx0+tVhpOdXAPl2q145+PQ0xNSofh4yEO5X4xYFHN02ty1Uil0XkNI6TlEmFmPy70E87RbpdKcVKp1G7DV+i6SmfFAzc0PMqhnHc/RQWRKn7y9ugZVVdsGh3D3QH8fr2SjHOGcVpk6qbbrJpUO/1BYuNLUDyRZXBunmzyubQtxL7ipclVfJGNVA1fRgEQQmBP58NpU4TXvnXw4PnDj4bD4RLUblO+9/EwQTN3PFIhcG6efjK5i/mEq0aqjL66j40OhkImng9Lpdv39uy5cuHiyTxKEYAOcqV8/iwZHNLKxT5ERDlgmWrrPb11dR7uKqNzd6SH2OzZZDyVl+SH9+w5eIjIGb1dktjx4eFENcrgAzpNhGwm9/4wMefwRXl6aIANiISdZPxRCqjhMNn8IGyeAjnF8zjXU8TzqXziBrgZfIAHLMrkM6zHE3juLtyT2j0dEJK9EEkAPhUvCW9JpZi8hCKYVOrRcBrTH5ObntExYPHLTgi+otLkPJfN6IvY0zGb1gldsEezg2fzw8O/iPzYY6CbRU6wfiKTq2hW8HKxN8CdkIspnOvuqHN2BHKFDhWyjS/79x+8cPMxivqo96/VB3OFqMRmbpCPwssx1FJjRFfr/O7DC6akA6YUejBWO//8cPj2g2vXqrnCWDmma0KSG+DBYg95OZt8novlOHfoVqOvfP1UDyp2wEd1kJ+/dekatsajmh4cig1EBbYEDwax87nG51de7oiInvuLzeg8ZESyUQc7yJ+fv3h88OHv3xWkfuyOBUGtuAEOobTPL0zu3IfzXvaOlEa7fcV+gEh2Xde1oJNch4AtuCFsUPjEUMvFDr/78KJGL1wdHZTs4Bsp5Bp28pZRbRRGiN7kxvfRPkWxtprve2tyZ22XbfRC1V1cI0UaeTtu1BOGnZxKeerGeGMkaHKLqiG7yV2Qu47pvHfUWxRnhpYbRp3Uctg8Y/Ado1Xuh1SNGQcWN17uftdLefqc6VTeRezlccMYhwwHeQPXIbo/Rtxc7zyLTN7N1orLmnS1+DKL6gHo2NPGeIs17vDzt7gj7rXKu0mjK1bPtkwoxDmc/1edK14YA8zy97xgmretBqv11kGOO1Im+Yse32wearkYl3fv6eQvdETk4t7i0G789I+9NTUWa1+5cujZg4cfgU7kY423UgAfGkLlbd/sRewr0stdBBZX7sJGl/6ycM3rF4ABfHmMVY41v3yJ16vZCpkcfSiuizvAHsI3R5euWiKPPIPJXZC7HwLIFa/5dNbvthXvR58ye3+ZFLOpLMTmxpG/619vnLUAccUcak1z0Qu5Dy/WM/QWLdi+s7eI04mBReoHYKf4jGKIsUfXr+/ZuGXhAnVUm6uQ6H5yJPyF0Ofu2rBzzcrl64t0IPQQsTtF0HQ89Pr1y/u2btq8Y744sNX9cpz7yRHvNfIJtH+rO5sdpaEwDJ8oOmriwoWJf0sZFTczbakg/8OA//9eBEuuAhpddkHSC2ivQBoSL8INq6ZraBcNCUnBwZn4ntOWgoJjYlLPvKvZzdOP93u/0y7Od+t2VRRfHDy4t5ve28MN3HgAqi+h6N/fvn0F9F5692GlJufz+efXcHEoAw9KnhA50CO/MPRb1+qiIIxLzw8ODu7dv797N53eW1c6fXf34cNHFYZtWFK+foPdeBp5JRGzxN9eLi8vLN5pUPLxVJJkuVarVPAEj1ZVAXJNzmiQaRiWlZcbN1auJUbJkyNHMkZ3LVOGmiuC3PPmc8swtcFA15XHK3pCpegDgFPyfOnOzs0QHLmSkMtjvwTReAnoV153F74ogNyfu6NRxrF1pa12e53+bNbvdHrdrtpWdH2wJG9cRnOGF7Yn5pX1C11p1aHaYnHkr5IPhyF6BN5WlCW5UdrZucHAL+CklYBXtt7jfuWVvDg6Opp4478jt0pXL8aLCZIEj9FTtE1B8HxB0b+7nncqOdB97zpBHIa7T5Le8xMvWoBjSMMCOdC/T9zTa+5npcLV1PoqiCS1tueHNOAXgEOTCSNn4CAHeq8H8qhDNSOb9a18jqTADY//0+34/74y50KKNKbfl+hQxhkqYc0Zd0AOdDebnSPQC+R8yJ10xeOqAx3lI69EwZ9E4NlQPh7BHsI5jBzoIx8Fp5OoTMI1M8mTr68QI+WqJwiIFneyKmfIPIOq07LrGXC7pknznFDs8/9xcRv91yAgr6rjvoMhGmdLPIlgF9qiQ1rvUTD9C4QAPPGCr6MzkUNx+Kk/ErbkeU9V7JHrZmz4nE0ikCe6bG573UlO7KK4Doq+iVwd2jbOA/G5BeT/nzuAz4ntWafTUVzP35TnKjV6PEMlkHPBDTXF+axPW5G64rRJJI1LRcKLUnUxA3S0YnuQyfyBHOjSeGrJZcKN6qLb64TDUnNshEuULSxclpPImI4ly5KeEm50OBY8Rw0O4ixC8H5BD+lqMPhRcSpWcLSoxFHNm31HFDzXGYAvsLMF0RckTQc48NuKZk3BbSIVn/LRnqzkjz/1XSFIxYwDt4RO78DnHTZEA25TA7jMT4MSUlWDPPfnUbawBg0nUbetm5ZkmeEkknMpwo2q7Rk49fnGPMcIZa7Xozwv8WMWUl3m+dz9nbytrkwidGmB8KPDurM1z5nN4zy3xiWOkoWQojjq9VHdZZ6H4PFXC0Y+oLmYIzypKIqeHee5Zmo2y/Ow3Ah0hcalhUFk8EWeqgqC4I1sHaIRYoR5bqA3KTYeCEaZ0mA0moQr1ZHma3kefuaCWQK3aAYbTCZfcQ6V2StRnOfxu3944gp/DJMzs1D00t99neMOHE1aB7qboWb5lTx4hVbbmiZzdEpcZc8VSmCHU2AUGomfg+15s9mso+raVC7wyc1Ubv04OT7e3xemeGNWVJxYcCQX9/ePT05+tN4SnvWhFesH1Ir1nnCtc89aW/TsPOFbb7eBfyS8681m8HeEf73Z36CzAE7IU9lYk6kVOJv4W5VqFkrSNJJUfUnOkFLFl80cVfPlWal3pHPFcvkQKhd5T8PE9RMPum6Sc/ZY0gAAAABJRU5ErkJggg==",e}();class Ii{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.skipNextObservers=!1,this.mask=0,this.initalize(e,t,n,r)}initalize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return this.mask=e,this.skipNextObservers=t,this.target=n,this.currentTarget=r,this}}class Oi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.callback=e,this.mask=t,this.scope=n,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}}class Li{constructor(){this._observers=null,this._observables=null}dispose(){if(this._observers&&this._observables)for(var e=0;e<this._observers.length;e++)this._observables[e].remove(this._observers[e]);this._observers=null,this._observables=null}static Watch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new Li;for(var s of(i._observers=new Array,i._observables=e,e)){let e=s.add(t,n,!1,r);e&&i._observers.push(e)}return i}}class Pi{constructor(e){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Ii(0),e&&(this._onObserverAdded=e)}get observers(){return this._observers}add(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)return null;var r=new Oi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);return r.unregisterOnNextCall=n,t?this._observers.unshift(r):this._observers.push(r),this._onObserverAdded&&this._onObserverAdded(r),r}addOnce(e){return this.add(e,void 0,void 0,void 0,!0)}remove(e){return!!e&&-1!==this._observers.indexOf(e)&&(this._deferUnregister(e),!0)}removeCallback(e,t){for(var n=0;n<this._observers.length;n++){const r=this._observers[n];if(!r._willBeUnregistered&&r.callback===e&&(!t||t===r.scope))return this._deferUnregister(r),!0}return!1}_deferUnregister(e){e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(()=>{this._remove(e)},0)}_remove(e){if(!e)return!1;var t=this._observers.indexOf(e);return-1!==t&&(this._observers.splice(t,1),!0)}makeObserverTopPriority(e){this._remove(e),this._observers.unshift(e)}makeObserverBottomPriority(e){this._remove(e),this._observers.push(e)}notifyObservers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!this._observers.length)return!0;let i=this._eventState;for(var s of(i.mask=t,i.target=n,i.currentTarget=r,i.skipNextObservers=!1,i.lastReturnValue=e,this._observers))if(!s._willBeUnregistered&&(s.mask&t&&(s.scope?i.lastReturnValue=s.callback.apply(s.scope,[e,i]):i.lastReturnValue=s.callback(e,i),s.unregisterOnNextCall&&this._deferUnregister(s)),i.skipNextObservers))return!1;return!0}notifyObserversWithPromise(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=Promise.resolve(e);if(!this._observers.length)return i;let s=this._eventState;return s.mask=t,s.target=n,s.currentTarget=r,s.skipNextObservers=!1,this._observers.forEach(n=>{s.skipNextObservers||n._willBeUnregistered||n.mask&t&&(i=n.scope?i.then(t=>(s.lastReturnValue=t,n.callback.apply(n.scope,[e,s]))):i.then(t=>(s.lastReturnValue=t,n.callback(e,s))),n.unregisterOnNextCall&&this._deferUnregister(n))}),i.then(()=>e)}notifyObserver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._eventState;r.mask=n,r.skipNextObservers=!1,e.callback(t,r)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){var e=new Pi;return e._observers=this._observers.slice(0),e}hasSpecificMask(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;for(var t of this._observers)if(t.mask&e||t.mask===e)return!0;return!1}}class Bi{constructor(){this._idbFactory=typeof window<"u"?window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB:indexedDB,this._db=null,this._hasReachedQuota=!1,this._isSupported=!0}openAsync(){return new Promise((e,t)=>this.open(e,t))}open(e,t){const n=()=>{this._isSupported=!1,t&&t()};if(this._idbFactory)if(this._db)e&&e();else{this._hasReachedQuota=!1,this._isSupported=!0;const t=this._idbFactory.open("zakeke",1);t.onerror=()=>{n()},t.onblocked=()=>{Logger.info("IDB request blocked. Please reload the page."),n()},t.onsuccess=()=>{this._db=t.result,e()},t.onupgradeneeded=e=>{if(this._db=e.target.result,this._db)try{this._db.createObjectStore("files",{keyPath:"fileId"})}catch(t){Logger.info("Error while creating object stores. Exception: "+t.message),n()}}}else this._isSupported=!1,t&&t()}loadFileAsync(e){return new Promise((t,n)=>{if(this._isSupported&&this._db){const n="files";let r;const i=this._db.transaction([n]);i.oncomplete=()=>{t(r?r.data:null)},i.onabort=()=>{t(null)};const s=i.objectStore(n).get(e);s.onsuccess=e=>{r=e.target.result},s.onerror=()=>{Logger.info("Error loading file "+e+" from DB."),t(null)}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),n("IndexedDB not supported or Db is not open")})}saveFileAsync(e,t){return new Promise((n,r)=>{if(this._isSupported){const i="files";if(!this._hasReachedQuota&&this._db){const s=this._db.transaction([i],"readwrite");s.onabort=e=>{const t=e.srcElement.error;t&&"QuotaExceededError"===t.name&&(this._hasReachedQuota=!0,r("Quota Exceeded"))},s.oncomplete=()=>{Logger.info("File saved successfully"),n()};const a={fileId:e,data:t},o=s.objectStore(i).put(a);o.onsuccess=()=>{},o.onerror=()=>{Logger.info("Error in DB add file request in Zakeke3D.Database."),r("Error in DB add file request")}}else{const e=this._hasReachedQuota?"Quota has been reached":"Database closed";r(e)}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),r("IndexedDB not supported or Db is not open")})}deleteFileAsync(e){return new Promise((t,n)=>{if(this._isSupported&&this._db){const r="files",i=this._db.transaction([r]);i.oncomplete=()=>{t()},i.onabort=()=>{n("aborted cancellation")},i.objectStore(r).get(e).onerror=()=>{Logger.info("Error deleting file "+e+" from DB."),n("Error deleting file from DB")}}else Logger.info("Error: IndexedDB not supported by your browser or Zakeke database is not open."),n("IndexedDB not supported or Db is not open")})}}var Ni={exports:{}};!function(e,t){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",a=16,o=32,l=64,u=128,c=256,h=1/0,d=9007199254740991,f=NaN,p=4294967295,g=p-1,m=p>>>1,v=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",o],["partialRight",l],["rearg",c]],_="[object Arguments]",y="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",C="[object GeneratorFunction]",D="[object Map]",E="[object Number]",A="[object Object]",k="[object Promise]",M="[object RegExp]",T="[object Set]",I="[object String]",O="[object Symbol]",L="[object WeakMap]",P="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),J=RegExp(K.source),$=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ie.source),ae=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",De="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="['\u2019]",Oe="["+Ce+"]",Le="["+Te+"]",Pe="["+De+"]",Be="\\d+",Ne="["+Ee+"]",Re="["+Ae+"]",Fe="[^"+Ce+Te+Be+Ee+Ae+ke+"]",ze="\\ud83c[\\udffb-\\udfff]",je="[^"+Ce+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+ke+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+Fe+")",We="(?:"+He+"|"+Fe+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Pe+"|"+ze+")?",Xe="["+Me+"]?",Je=Xe+Ke+"(?:"+Ge+"(?:"+[je,Ve,Ue].join("|")+")"+Xe+Ke+")*",$e="(?:"+[Ne,Ve,Ue].join("|")+")"+Je,Qe="(?:"+[je+Pe+"?",Pe,Ve,Ue,Oe].join("|")+")",et=RegExp(Ie,"g"),tt=RegExp(Pe,"g"),nt=RegExp(ze+"(?="+ze+")|"+Qe+Je,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Le,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Le,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,$e].join("|"),"g"),it=RegExp("["+Ge+Ce+De+Me+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[N]=lt[R]=lt[F]=lt[z]=lt[j]=lt[V]=lt[U]=lt[H]=lt[G]=!0,lt[_]=lt[y]=lt[P]=lt[b]=lt[B]=lt[x]=lt[w]=lt[S]=lt[D]=lt[E]=lt[A]=lt[M]=lt[T]=lt[I]=lt[L]=!1;var ut={};ut[_]=ut[y]=ut[P]=ut[B]=ut[b]=ut[x]=ut[N]=ut[R]=ut[F]=ut[z]=ut[j]=ut[D]=ut[E]=ut[A]=ut[M]=ut[T]=ut[I]=ut[O]=ut[V]=ut[U]=ut[H]=ut[G]=!0,ut[w]=ut[S]=ut[L]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof vr&&vr&&vr.Object===Object&&vr,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||pt||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,_t=vt&&vt.exports===mt,yt=_t&&ft.process,bt=function(){try{return vt&&vt.require&&vt.require("util").types||yt&&yt.binding&&yt.binding("util")}catch(e){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,St=bt&&bt.isMap,Ct=bt&&bt.isRegExp,Dt=bt&&bt.isSet,Et=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Lt(e,t){return!(null==e||!e.length)&&Ht(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=qt("length");function Vt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ut(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Ht(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:f}function qt(e){return function(t){return null==t?n:t[e]}}function Zt(e){return function(t){return null==e?n:e[t]}}function Kt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Xt(e,t){for(var r,i=-1,s=e.length;++i<s;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $t(e){return e&&e.slice(0,gn(e)+1).replace(ae,"")}function Qt(e){return function(t){return e(t)}}function en(e,t){return Bt(t,function(t){return e[t]})}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var sn=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ct[e]}function ln(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function cn(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];(o===t||o===s)&&(e[n]=s,a[i++]=n)}return a}function dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function fn(e){return ln(e)?function(e){for(var t=nt.lastIndex=0;nt.test(e);)++t;return t}(e):jt(e)}function pn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var mn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),vn=function e(t){var oe=(t=null==t?gt:vn.defaults(gt.Object(),t,vn.pick(gt,at))).Array,Ce=t.Date,De=t.Error,Ee=t.Function,Ae=t.Math,ke=t.Object,Me=t.RegExp,Te=t.String,Ie=t.TypeError,Oe=oe.prototype,Le=Ee.prototype,Pe=ke.prototype,Be=t["__core-js_shared__"],Ne=Le.toString,Re=Pe.hasOwnProperty,Fe=0,ze=function(){var e=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),je=Pe.toString,Ve=Ne.call(ke),Ue=gt._,He=Me("^"+Ne.call(Re).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=_t?t.Buffer:n,Ye=t.Symbol,We=t.Uint8Array,qe=Ge?Ge.allocUnsafe:n,Ze=cn(ke.getPrototypeOf,ke),Ke=ke.create,Xe=Pe.propertyIsEnumerable,Je=Oe.splice,$e=Ye?Ye.isConcatSpreadable:n,Qe=Ye?Ye.iterator:n,nt=Ye?Ye.toStringTag:n,it=function(){try{var e=ds(ke,"defineProperty");return e({},"",{}),e}catch(t){}}(),ct=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,ft=Ce&&Ce.now!==gt.Date.now&&Ce.now,pt=t.setTimeout!==gt.setTimeout&&t.setTimeout,mt=Ae.ceil,vt=Ae.floor,yt=ke.getOwnPropertySymbols,bt=Ge?Ge.isBuffer:n,jt=t.isFinite,Zt=Oe.join,_n=cn(ke.keys,ke),yn=Ae.max,bn=Ae.min,xn=Ce.now,wn=t.parseInt,Sn=Ae.random,Cn=Oe.reverse,Dn=ds(t,"DataView"),En=ds(t,"Map"),An=ds(t,"Promise"),kn=ds(t,"Set"),Mn=ds(t,"WeakMap"),Tn=ds(ke,"create"),In=Mn&&new Mn,On={},Ln=Fs(Dn),Pn=Fs(En),Bn=Fs(An),Nn=Fs(kn),Rn=Fs(Mn),Fn=Ye?Ye.prototype:n,zn=Fn?Fn.valueOf:n,jn=Fn?Fn.toString:n;function Vn(e){if(to(e)&&!Ga(e)&&!(e instanceof Yn)){if(e instanceof Gn)return e;if(Re.call(e,"__wrapped__"))return zs(e)}return new Gn(e)}var Un=function(){function e(){}return function(t){if(!eo(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Hn(){}function Gn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Yn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Zn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new qn(e);this.size=t.size}function Jn(e,t){var n=Ga(e),r=!n&&Ha(e),i=!n&&!r&&Za(e),s=!n&&!r&&!i&&uo(e),a=n||r||i||s,o=a?Jt(e.length,Te):[],l=o.length;for(var u in e)(t||Re.call(e,u))&&(!a||!("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ys(u,l)))&&o.push(u);return o}function $n(e){var t=e.length;return t?e[Kr(0,t-1)]:n}function Qn(e,t){return Bs(Ti(e),lr(t,0,e.length))}function er(e){return Bs(Ti(e))}function tr(e,t,r){(r!==n&&!ja(e[t],r)||r===n&&!(t in e))&&ar(e,t,r)}function nr(e,t,r){var i=e[t];(!Re.call(e,t)||!ja(i,r)||r===n&&!(t in e))&&ar(e,t,r)}function rr(e,t){for(var n=e.length;n--;)if(ja(e[n][0],t))return n;return-1}function ir(e,t,n,r){return fr(e,function(e,i,s){t(r,e,n(e),s)}),r}function sr(e,t){return e&&Ii(t,Oo(t),e)}function ar(e,t,n){"__proto__"==t&&it?it(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var r=-1,i=t.length,s=oe(i),a=null==e;++r<i;)s[r]=a?n:Ao(e,t[r]);return s}function lr(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function ur(e,t,r,i,s,a){var o,l=1&t,u=2&t,c=4&t;if(r&&(o=s?r(e,i,s,a):r(e)),o!==n)return o;if(!eo(e))return e;var h=Ga(e);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Re.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Ti(e,o)}else{var d=gs(e),f=d==S||d==C;if(Za(e))return Ci(e,l);if(d==A||d==_||f&&!s){if(o=u||f?{}:vs(e),!l)return u?function(e,t){return Ii(e,ps(e),t)}(e,function(e,t){return e&&Ii(t,Lo(t),e)}(o,e)):function(e,t){return Ii(e,fs(e),t)}(e,sr(o,e))}else{if(!ut[d])return s?e:{};o=function(e,t,n){var r=e.constructor;switch(t){case P:return Di(e);case b:case x:return new r(+e);case B:return function(e,t){var n=t?Di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case F:case z:case j:case V:case U:case H:case G:return Ei(e,n);case D:return new r;case E:case I:return new r(e);case M:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new r;case O:return function(e){return zn?ke(zn.call(e)):{}}(e)}}(e,d,l)}}a||(a=new Xn);var p=a.get(e);if(p)return p;a.set(e,o),ao(e)?e.forEach(function(n){o.add(ur(n,t,r,n,e,a))}):no(e)&&e.forEach(function(n,i){o.set(i,ur(n,t,r,i,e,a))});var g=h?n:(c?u?ss:is:u?Lo:Oo)(e);return Mt(g||e,function(n,i){g&&(n=e[i=n]),nr(o,i,ur(n,t,r,i,e,a))}),o}function cr(e,t,r){var i=r.length;if(null==e)return!i;for(e=ke(e);i--;){var s=r[i],a=t[s],o=e[s];if(o===n&&!(s in e)||!a(o))return!1}return!0}function hr(e,t,i){if("function"!=typeof e)throw new Ie(r);return Is(function(){e.apply(n,i)},t)}function dr(e,t,n,r){var i=-1,s=Lt,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;n&&(t=Bt(t,Qt(n))),r?(s=Pt,a=!1):t.length>=200&&(s=tn,a=!1,t=new Kn(t));e:for(;++i<o;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else s(t,h,r)||l.push(c)}return l}Vn.templateSettings={escape:$,evaluate:Q,interpolate:ee,variable:"",imports:{_:Vn}},Vn.prototype=Hn.prototype,Vn.prototype.constructor=Vn,Gn.prototype=Un(Hn.prototype),Gn.prototype.constructor=Gn,Yn.prototype=Un(Hn.prototype),Yn.prototype.constructor=Yn,Wn.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Tn){var r=t[e];return r===i?n:r}return Re.call(t,e)?t[e]:n},Wn.prototype.has=function(e){var t=this.__data__;return Tn?t[e]!==n:Re.call(t,e)},Wn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Tn&&t===n?i:t,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},qn.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?n:t[r][1]},qn.prototype.has=function(e){return rr(this.__data__,e)>-1},qn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(En||qn),string:new Wn}},Zn.prototype.delete=function(e){var t=cs(this,e).delete(e);return this.size-=t?1:0,t},Zn.prototype.get=function(e){return cs(this,e).get(e)},Zn.prototype.has=function(e){return cs(this,e).has(e)},Zn.prototype.set=function(e,t){var n=cs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,i),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new qn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zn(r)}return n.set(e,t),this.size=n.size,this};var fr=Pi(xr),pr=Pi(wr,!0);function gr(e,t){var n=!0;return fr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function mr(e,t,r){for(var i=-1,s=e.length;++i<s;){var a=e[i],o=t(a);if(null!=o&&(l===n?o===o&&!lo(o):r(o,l)))var l=o,u=a}return u}function vr(e,t){var n=[];return fr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function _r(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=_s),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?_r(o,t-1,n,r,i):Nt(i,o):r||(i[i.length]=o)}return i}var yr=Bi(),br=Bi(!0);function xr(e,t){return e&&yr(e,t,Oo)}function wr(e,t){return e&&br(e,t,Oo)}function Sr(e,t){return Ot(t,function(t){return Ja(e[t])})}function Cr(e,t){for(var r=0,i=(t=bi(t,e)).length;null!=e&&r<i;)e=e[Rs(t[r++])];return r&&r==i?e:n}function Dr(e,t,n){var r=t(e);return Ga(e)?r:Nt(r,n(e))}function Er(e){return null==e?e===n?"[object Undefined]":"[object Null]":nt&&nt in ke(e)?function(e){var t=Re.call(e,nt),r=e[nt];try{e[nt]=n;var i=!0}catch(a){}var s=je.call(e);return i&&(t?e[nt]=r:delete e[nt]),s}(e):function(e){return je.call(e)}(e)}function Ar(e,t){return e>t}function kr(e,t){return null!=e&&Re.call(e,t)}function Mr(e,t){return null!=e&&t in ke(e)}function Tr(e,t,r){for(var i=r?Pt:Lt,s=e[0].length,a=e.length,o=a,l=oe(a),u=1/0,c=[];o--;){var h=e[o];o&&t&&(h=Bt(h,Qt(t))),u=bn(h.length,u),l[o]=!r&&(t||s>=120&&h.length>=120)?new Kn(o&&h):n}h=e[0];var d=-1,f=l[0];e:for(;++d<s&&c.length<u;){var p=h[d],g=t?t(p):p;if(p=r||0!==p?p:0,!(f?tn(f,g):i(c,g,r))){for(o=a;--o;){var m=l[o];if(!(m?tn(m,g):i(e[o],g,r)))continue e}f&&f.push(g),c.push(p)}}return c}function Ir(e,t,r){var i=null==(e=ks(e,t=bi(t,e)))?e:e[Rs(Xs(t))];return null==i?n:At(i,e,r)}function Or(e){return to(e)&&Er(e)==_}function Lr(e,t,r,i,s){return e===t||(null==e||null==t||!to(e)&&!to(t)?e!==e&&t!==t:function(e,t,r,i,s,a){var o=Ga(e),l=Ga(t),u=o?y:gs(e),c=l?y:gs(t),h=(u=u==_?A:u)==A,d=(c=c==_?A:c)==A,f=u==c;if(f&&Za(e)){if(!Za(t))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new Xn),o||uo(e)?ns(e,t,r,i,s,a):function(e,t,n,r,i,s,a){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new We(e),new We(t)));case b:case x:case E:return ja(+e,+t);case w:return e.name==t.name&&e.message==t.message;case M:case I:return e==t+"";case D:var o=un;case T:var l=1&r;if(o||(o=dn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=ns(o(e),o(t),r,i,s,a);return a.delete(e),c;case O:if(zn)return zn.call(e)==zn.call(t)}return!1}(e,t,u,r,i,s,a);if(!(1&r)){var p=h&&Re.call(e,"__wrapped__"),g=d&&Re.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,v=g?t.value():t;return a||(a=new Xn),s(m,v,r,i,a)}}return!!f&&(a||(a=new Xn),function(e,t,r,i,s,a){var o=1&r,l=is(e),u=l.length,c=is(t),h=c.length;if(u!=h&&!o)return!1;for(var d=u;d--;){var f=l[d];if(!(o?f in t:Re.call(t,f)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=o;++d<u;){var _=e[f=l[d]],y=t[f];if(i)var b=o?i(y,_,f,t,e,a):i(_,y,f,e,t,a);if(!(b===n?_===y||s(_,y,r,i,a):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,w=t.constructor;x!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(m=!1)}return a.delete(e),a.delete(t),m}(e,t,r,i,s,a))}(e,t,r,i,Lr,s))}function Pr(e,t,r,i){var s=r.length,a=s,o=!i;if(null==e)return!a;for(e=ke(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var u=(l=r[s])[0],c=e[u],h=l[1];if(o&&l[2]){if(c===n&&!(u in e))return!1}else{var d=new Xn;if(i)var f=i(c,h,u,e,t,d);if(!(f===n?Lr(h,c,3,i,d):f))return!1}}return!0}function Br(e){return!(!eo(e)||function(e){return!!ze&&ze in e}(e))&&(Ja(e)?He:_e).test(Fs(e))}function Nr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Ga(e)?Ur(e[0],e[1]):Vr(e):fl(e)}function Rr(e){if(!Cs(e))return _n(e);var t=[];for(var n in ke(e))Re.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!eo(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=Cs(e),n=[];for(var r in e)"constructor"==r&&(t||!Re.call(e,r))||n.push(r);return n}function zr(e,t){return e<t}function jr(e,t){var n=-1,r=Wa(e)?oe(e.length):[];return fr(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function Vr(e){var t=hs(e);return 1==t.length&&t[0][2]?Es(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return xs(e)&&Ds(t)?Es(Rs(e),t):function(r){var i=Ao(r,e);return i===n&&i===t?ko(r,e):Lr(t,i,3)}}function Hr(e,t,r,i,s){e!==t&&yr(t,function(a,o){if(s||(s=new Xn),eo(a))!function(e,t,r,i,s,a,o){var l=Ms(e,r),u=Ms(t,r),c=o.get(u);if(c)tr(e,r,c);else{var h=a?a(l,u,r+"",e,t,o):n,d=h===n;if(d){var f=Ga(u),p=!f&&Za(u),g=!f&&!p&&uo(u);h=u,f||p||g?Ga(l)?h=l:qa(l)?h=Ti(l):p?(d=!1,h=Ci(u,!0)):g?(d=!1,h=Ei(u,!0)):h=[]:io(u)||Ha(u)?(h=l,Ha(l)?h=_o(l):(!eo(l)||Ja(l))&&(h=vs(u))):d=!1}d&&(o.set(u,h),s(h,u,i,a,o),o.delete(u)),tr(e,r,h)}}(e,t,o,r,Hr,i,s);else{var l=i?i(Ms(e,o),a,o+"",e,t,s):n;l===n&&(l=a),tr(e,o,l)}},Lo)}function Gr(e,t){var r=e.length;if(r)return ys(t+=t<0?r:0,r)?e[t]:n}function Yr(e,t,n){t=t.length?Bt(t,function(e){return Ga(e)?function(t){return Cr(t,1===e.length?e[0]:e)}:e}):[il];var r=-1;return t=Bt(t,Qt(us())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(jr(e,function(e,n,i){return{criteria:Bt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,o=n.length;++r<a;){var l=Ai(i[r],s[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Wr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=Cr(e,a);n(o,a)&&ei(s,bi(a,e),o)}return s}function qr(e,t,n,r){var i=r?Gt:Ht,s=-1,a=t.length,o=e;for(e===t&&(t=Ti(t)),n&&(o=Bt(e,Qt(n)));++s<a;)for(var l=0,u=t[s],c=n?n(u):u;(l=i(o,c,l,r))>-1;)o!==e&&Je.call(o,l,1),Je.call(e,l,1);return e}function Zr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;ys(i)?Je.call(e,i,1):di(e,i)}}return e}function Kr(e,t){return e+vt(Sn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Os(As(e,t,il),e+"")}function $r(e){return $n(Vo(e))}function Qr(e,t){var n=Vo(e);return Bs(n,lr(t,0,n.length))}function ei(e,t,r,i){if(!eo(e))return e;for(var s=-1,a=(t=bi(t,e)).length,o=a-1,l=e;null!=l&&++s<a;){var u=Rs(t[s]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(s!=o){var h=l[u];(c=i?i(h,u,l):n)===n&&(c=eo(h)?h:ys(t[s+1])?[]:{})}nr(l,u,c),l=l[u]}return e}var ti=In?function(e,t){return In.set(e,t),e}:il,ni=it?function(e,t){return it(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ri(e){return Bs(Vo(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=oe(i);++r<i;)s[r]=e[r+t];return s}function si(e,t){var n;return fr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=m){for(;r<i;){var s=r+i>>>1,a=e[s];null!==a&&!lo(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return oi(e,t,il,n)}function oi(e,t,r,i){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=r(t))!==t,l=null===t,u=lo(t),c=t===n;s<a;){var h=vt((s+a)/2),d=r(e[h]),f=d!==n,p=null===d,m=d===d,v=lo(d);if(o)var _=i||m;else _=c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!v):!p&&!v&&(i?d<=t:d<t);_?s=h+1:a=h}return bn(a,g)}function li(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],o=t?t(a):a;if(!n||!ja(o,l)){var l=o;s[i++]=0===a?0:a}}return s}function ui(e){return"number"==typeof e?e:lo(e)?f:+e}function ci(e){if("string"==typeof e)return e;if(Ga(e))return Bt(e,ci)+"";if(lo(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-h?"-0":t}function hi(e,t,n){var r=-1,i=Lt,s=e.length,a=!0,o=[],l=o;if(n)a=!1,i=Pt;else if(s>=200){var u=t?null:Xi(e);if(u)return dn(u);a=!1,i=tn,l=new Kn}else l=t?[]:o;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(c)}else i(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function di(e,t){return null==(e=ks(e,t=bi(t,e)))||delete e[Rs(Xs(t))]}function fi(e,t,n,r){return ei(e,t,n(Cr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ii(e,r?0:s,r?s+1:i):ii(e,r?s+1:0,r?i:s)}function gi(e,t){var n=e;return n instanceof Yn&&(n=n.value()),Rt(t,function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))},n)}function mi(e,t,n){var r=e.length;if(r<2)return r?hi(e[0]):[];for(var i=-1,s=oe(r);++i<r;)for(var a=e[i],o=-1;++o<r;)o!=i&&(s[i]=dr(s[i]||a,e[o],t,n));return hi(_r(s,1),t,n)}function vi(e,t,r){for(var i=-1,s=e.length,a=t.length,o={};++i<s;){var l=i<a?t[i]:n;r(o,e[i],l)}return o}function _i(e){return qa(e)?e:[]}function yi(e){return"function"==typeof e?e:il}function bi(e,t){return Ga(e)?e:xs(e,t)?[e]:Ns(yo(e))}var xi=Jr;function wi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ii(e,t,r)}var Si=ct||function(e){return gt.clearTimeout(e)};function Ci(e,t){if(t)return e.slice();var n=e.length,r=qe?qe(n):new e.constructor(n);return e.copy(r),r}function Di(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Ei(e,t){var n=t?Di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ai(e,t){if(e!==t){var r=e!==n,i=null===e,s=e===e,a=lo(e),o=t!==n,l=null===t,u=t===t,c=lo(t);if(!l&&!c&&!a&&e>t||a&&o&&u&&!l&&!c||i&&o&&u||!r&&u||!s)return 1;if(!i&&!a&&!c&&e<t||c&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!u)return-1}return 0}function ki(e,t,n,r){for(var i=-1,s=e.length,a=n.length,o=-1,l=t.length,u=yn(s-a,0),c=oe(l+u),h=!r;++o<l;)c[o]=t[o];for(;++i<a;)(h||i<s)&&(c[n[i]]=e[i]);for(;u--;)c[o++]=e[i++];return c}function Mi(e,t,n,r){for(var i=-1,s=e.length,a=-1,o=n.length,l=-1,u=t.length,c=yn(s-o,0),h=oe(c+u),d=!r;++i<c;)h[i]=e[i];for(var f=i;++l<u;)h[f+l]=t[l];for(;++a<o;)(d||i<s)&&(h[f+n[a]]=e[i++]);return h}function Ti(e,t){var n=-1,r=e.length;for(t||(t=oe(r));++n<r;)t[n]=e[n];return t}function Ii(e,t,r,i){var s=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var l=t[a],u=i?i(r[l],e[l],l,r,e):n;u===n&&(u=e[l]),s?ar(r,l,u):nr(r,l,u)}return r}function Oi(e,t){return function(n,r){var i=Ga(n)?kt:ir,s=t?t():{};return i(n,e,us(r,2),s)}}function Li(e){return Jr(function(t,r){var i=-1,s=r.length,a=s>1?r[s-1]:n,o=s>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(s--,a):n,o&&bs(r[0],r[1],o)&&(a=s<3?n:a,s=1),t=ke(t);++i<s;){var l=r[i];l&&e(t,l,i,a)}return t})}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Wa(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=ke(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}function Bi(e){return function(t,n,r){for(var i=-1,s=ke(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function Ni(e){return function(t){var r=ln(t=yo(t))?pn(t):n,i=r?r[0]:t.charAt(0),s=r?wi(r,1).join(""):t.slice(1);return i[e]()+s}}function Ri(e){return function(t){return Rt($o(Go(t).replace(et,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return eo(r)?r:n}}function zi(e){return function(t,r,i){var s=ke(t);if(!Wa(t)){var a=us(r,3);t=Oo(t),r=function(e){return a(s[e],e,s)}}var o=e(t,r,i);return o>-1?s[a?t[o]:o]:n}}function ji(e){return rs(function(t){var i=t.length,s=i,a=Gn.prototype.thru;for(e&&t.reverse();s--;){var o=t[s];if("function"!=typeof o)throw new Ie(r);if(a&&!l&&"wrapper"==os(o))var l=new Gn([],!0)}for(s=l?s:i;++s<i;){var u=os(o=t[s]),c="wrapper"==u?as(o):n;l=c&&ws(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[os(c[0])].apply(l,c[3]):1==o.length&&ws(o)?l[u]():l.thru(o)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Ga(n))return l.plant(n).value();for(var r=0,s=i?t[r].apply(this,e):n;++r<i;)s=t[r].call(this,s);return s}})}function Vi(e,t,r,i,s,a,o,l,c,h){var d=t&u,f=1&t,p=2&t,g=24&t,m=512&t,v=p?n:Fi(e);return function u(){for(var _=arguments.length,y=oe(_),b=_;b--;)y[b]=arguments[b];if(g)var x=ls(u),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,x);if(i&&(y=ki(y,i,s,g)),a&&(y=Mi(y,a,o,g)),_-=w,g&&_<h){var S=hn(y,x);return Zi(e,t,Vi,u.placeholder,r,y,S,l,c,h-_)}var C=f?r:this,D=p?C[e]:e;return _=y.length,l?y=function(e,t){for(var r=e.length,i=bn(t.length,r),s=Ti(e);i--;){var a=t[i];e[i]=ys(a,r)?s[a]:n}return e}(y,l):m&&_>1&&y.reverse(),d&&c<_&&(y.length=c),this&&this!==gt&&this instanceof u&&(D=v||Fi(D)),D.apply(C,y)}}function Ui(e,t){return function(n,r){return function(e,t,n,r){return xr(e,function(e,i,s){t(r,n(e),i,s)}),r}(n,e,t(r),{})}}function Hi(e,t){return function(r,i){var s;if(r===n&&i===n)return t;if(r!==n&&(s=r),i!==n){if(s===n)return i;"string"==typeof r||"string"==typeof i?(r=ci(r),i=ci(i)):(r=ui(r),i=ui(i)),s=e(r,i)}return s}}function Gi(e){return rs(function(t){return t=Bt(t,Qt(us())),Jr(function(n){var r=this;return e(t,function(e){return At(e,r,n)})})})}function Yi(e,t){var r=(t=t===n?" ":ci(t)).length;if(r<2)return r?Xr(t,e):t;var i=Xr(t,mt(e/fn(t)));return ln(t)?wi(pn(i),0,e).join(""):i.slice(0,e)}function Wi(e){return function(t,r,i){return i&&"number"!=typeof i&&bs(t,r,i)&&(r=i=n),t=po(t),r===n?(r=t,t=0):r=po(r),function(e,t,n,r){for(var i=-1,s=yn(mt((t-e)/(n||1)),0),a=oe(s);s--;)a[r?s:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:po(i),e)}}function qi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vo(t),n=vo(n)),e(t,n)}}function Zi(e,t,r,i,s,a,u,c,h,d){var f=8&t;t|=f?o:l,4&(t&=~(f?l:o))||(t&=-4);var p=[e,t,s,f?a:n,f?u:n,f?n:a,f?n:u,c,h,d],g=r.apply(n,p);return ws(e)&&Ts(g,p),g.placeholder=i,Ls(g,e,t)}function Ki(e){var t=Ae[e];return function(e,n){if(e=vo(e),(n=null==n?0:bn(go(n),292))&&jt(e)){var r=(yo(e)+"e").split("e");return+((r=(yo(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=kn&&1/dn(new kn([,-0]))[1]==h?function(e){return new kn(e)}:ul;function Ji(e){return function(t){var n=gs(t);return n==D?un(t):n==T?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return Bt(t,function(t){return[t,e[t]]})}(t,e(t))}}function $i(e,t,i,h,d,f,p,g){var m=2&t;if(!m&&"function"!=typeof e)throw new Ie(r);var v=h?h.length:0;if(v||(t&=-97,h=d=n),p=p===n?p:yn(go(p),0),g=g===n?g:go(g),v-=d?d.length:0,t&l){var _=h,y=d;h=d=n}var b=m?n:as(e),x=[e,t,i,h,d,_,y,f,p,g];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==u&&8==n||r==u&&n==c&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var h=e[3];e[3]=h?ki(h,l,t[4]):l,e[4]=h?hn(e[3],s):t[4]}(l=t[5])&&(h=e[5],e[5]=h?Mi(h,l,t[6]):l,e[6]=h?hn(e[5],s):t[6]),(l=t[7])&&(e[7]=l),r&u&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(x,b),e=x[0],t=x[1],i=x[2],h=x[3],d=x[4],!(g=x[9]=x[9]===n?m?0:e.length:yn(x[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||t==a?function(e,t,r){var i=Fi(e);return function s(){for(var a=arguments.length,o=oe(a),l=a,u=ls(s);l--;)o[l]=arguments[l];var c=a<3&&o[0]!==u&&o[a-1]!==u?[]:hn(o,u);return(a-=c.length)<r?Zi(e,t,Vi,s.placeholder,n,o,c,n,n,r-a):At(this&&this!==gt&&this instanceof s?i:e,this,o)}}(e,t,g):t!=o&&33!=t||d.length?Vi.apply(n,x):function(e,t,n,r){var i=1&t,s=Fi(e);return function t(){for(var a=-1,o=arguments.length,l=-1,u=r.length,c=oe(u+o),h=this&&this!==gt&&this instanceof t?s:e;++l<u;)c[l]=r[l];for(;o--;)c[l++]=arguments[++a];return At(h,i?n:this,c)}}(e,t,i,h);else var w=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return Ls((b?ti:Ts)(w,x),e,t)}function Qi(e,t,r,i){return e===n||ja(e,Pe[r])&&!Re.call(i,r)?t:e}function es(e,t,r,i,s,a){return eo(e)&&eo(t)&&(a.set(t,e),Hr(e,t,n,es,a),a.delete(t)),e}function ts(e){return io(e)?n:e}function ns(e,t,r,i,s,a){var o=1&r,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var d=-1,f=!0,p=2&r?new Kn:n;for(a.set(e,t),a.set(t,e);++d<l;){var g=e[d],m=t[d];if(i)var v=o?i(m,g,d,t,e,a):i(g,m,d,e,t,a);if(v!==n){if(v)continue;f=!1;break}if(p){if(!zt(t,function(e,t){if(!tn(p,t)&&(g===e||s(g,e,r,i,a)))return p.push(t)})){f=!1;break}}else if(g!==m&&!s(g,m,r,i,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function rs(e){return Os(As(e,n,Ys),e+"")}function is(e){return Dr(e,Oo,fs)}function ss(e){return Dr(e,Lo,ps)}var as=In?function(e){return In.get(e)}:ul;function os(e){for(var t=e.name+"",n=On[t],r=Re.call(On,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function ls(e){return(Re.call(Vn,"placeholder")?Vn:e).placeholder}function us(){var e=Vn.iteratee||sl;return e=e===sl?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function cs(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function hs(e){for(var t=Oo(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ds(i)]}return t}function ds(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Br(r)?r:n}var fs=yt?function(e){return null==e?[]:(e=ke(e),Ot(yt(e),function(t){return Xe.call(e,t)}))}:ml,ps=yt?function(e){for(var t=[];e;)Nt(t,fs(e)),e=Ze(e);return t}:ml,gs=Er;function ms(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,s=!1;++r<i;){var a=Rs(t[r]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&Qa(i)&&ys(a,i)&&(Ga(e)||Ha(e))}function vs(e){return"function"!=typeof e.constructor||Cs(e)?{}:Un(Ze(e))}function _s(e){return Ga(e)||Ha(e)||!!($e&&e&&e[$e])}function ys(e,t){var n=typeof e;return!!(t=null!==t&&void 0!==t?t:d)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function bs(e,t,n){if(!eo(n))return!1;var r=typeof t;return!!("number"==r?Wa(n)&&ys(t,n.length):"string"==r&&t in n)&&ja(n[t],e)}function xs(e,t){if(Ga(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!lo(e))||ne.test(e)||!te.test(e)||null!=t&&e in ke(t)}function ws(e){var t=os(e),n=Vn[t];if("function"!=typeof n||!(t in Yn.prototype))return!1;if(e===n)return!0;var r=as(n);return!!r&&e===r[0]}(Dn&&gs(new Dn(new ArrayBuffer(1)))!=B||En&&gs(new En)!=D||An&&gs(An.resolve())!=k||kn&&gs(new kn)!=T||Mn&&gs(new Mn)!=L)&&(gs=function(e){var t=Er(e),r=t==A?e.constructor:n,i=r?Fs(r):"";if(i)switch(i){case Ln:return B;case Pn:return D;case Bn:return k;case Nn:return T;case Rn:return L}return t});var Ss=Be?Ja:vl;function Cs(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function Ds(e){return e===e&&!eo(e)}function Es(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in ke(r))}}function As(e,t,r){return t=yn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=yn(n.length-t,0),a=oe(s);++i<s;)a[i]=n[t+i];i=-1;for(var o=oe(t+1);++i<t;)o[i]=n[i];return o[t]=r(a),At(e,this,o)}}function ks(e,t){return t.length<2?e:Cr(e,ii(t,0,-1))}function Ms(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ts=Ps(ti),Is=pt||function(e,t){return gt.setTimeout(e,t)},Os=Ps(ni);function Ls(e,t,n){var r=t+"";return Os(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Mt(v,function(n){var r="_."+n[0];t&n[1]&&!Lt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Ps(e){var t=0,r=0;return function(){var i=xn(),s=16-(i-r);if(r=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Bs(e,t){var r=-1,i=e.length,s=i-1;for(t=t===n?i:t;++r<t;){var a=Kr(r,s),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e}var Ns=function(e){var t=Pa(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)}),t});function Rs(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-h?"-0":t}function Fs(e){if(null!=e){try{return Ne.call(e)}catch(t){}try{return e+""}catch(n){}}return""}function zs(e){if(e instanceof Yn)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=Ti(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var js=Jr(function(e,t){return qa(e)?dr(e,_r(t,1,qa,!0)):[]}),Vs=Jr(function(e,t){var r=Xs(t);return qa(r)&&(r=n),qa(e)?dr(e,_r(t,1,qa,!0),us(r,2)):[]}),Us=Jr(function(e,t){var r=Xs(t);return qa(r)&&(r=n),qa(e)?dr(e,_r(t,1,qa,!0),n,r):[]});function Hs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:go(n);return i<0&&(i=yn(r+i,0)),Ut(e,us(t,3),i)}function Gs(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return r!==n&&(s=go(r),s=r<0?yn(i+s,0):bn(s,i-1)),Ut(e,us(t,3),s,!0)}function Ys(e){return null!=e&&e.length?_r(e,1):[]}function Ws(e){return e&&e.length?e[0]:n}var qs=Jr(function(e){var t=Bt(e,_i);return t.length&&t[0]===e[0]?Tr(t):[]}),Zs=Jr(function(e){var t=Xs(e),r=Bt(e,_i);return t===Xs(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Tr(r,us(t,2)):[]}),Ks=Jr(function(e){var t=Xs(e),r=Bt(e,_i);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Tr(r,n,t):[]});function Xs(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Js=Jr($s);function $s(e,t){return e&&e.length&&t&&t.length?qr(e,t):e}var Qs=rs(function(e,t){var n=null==e?0:e.length,r=or(e,t);return Zr(e,Bt(t,function(e){return ys(e,n)?+e:e}).sort(Ai)),r});function ea(e){return null==e?e:Cn.call(e)}var ta=Jr(function(e){return hi(_r(e,1,qa,!0))}),na=Jr(function(e){var t=Xs(e);return qa(t)&&(t=n),hi(_r(e,1,qa,!0),us(t,2))}),ra=Jr(function(e){var t=Xs(e);return t="function"==typeof t?t:n,hi(_r(e,1,qa,!0),n,t)});function ia(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,function(e){if(qa(e))return t=yn(e.length,t),!0}),Jt(t,function(t){return Bt(e,qt(t))})}function sa(e,t){if(!e||!e.length)return[];var r=ia(e);return null==t?r:Bt(r,function(e){return At(t,n,e)})}var aa=Jr(function(e,t){return qa(e)?dr(e,t):[]}),oa=Jr(function(e){return mi(Ot(e,qa))}),la=Jr(function(e){var t=Xs(e);return qa(t)&&(t=n),mi(Ot(e,qa),us(t,2))}),ua=Jr(function(e){var t=Xs(e);return t="function"==typeof t?t:n,mi(Ot(e,qa),n,t)}),ca=Jr(ia),ha=Jr(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,sa(e,r)});function da(e){var t=Vn(e);return t.__chain__=!0,t}function fa(e,t){return t(e)}var pa=rs(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,s=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Yn&&ys(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:fa,args:[s],thisArg:n}),new Gn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(s)}),ga=Oi(function(e,t,n){Re.call(e,n)?++e[n]:ar(e,n,1)}),ma=zi(Hs),va=zi(Gs);function _a(e,t){return(Ga(e)?Mt:fr)(e,us(t,3))}function ya(e,t){return(Ga(e)?Tt:pr)(e,us(t,3))}var ba=Oi(function(e,t,n){Re.call(e,n)?e[n].push(t):ar(e,n,[t])}),xa=Jr(function(e,t,n){var r=-1,i="function"==typeof t,s=Wa(e)?oe(e.length):[];return fr(e,function(e){s[++r]=i?At(t,e,n):Ir(e,t,n)}),s}),wa=Oi(function(e,t,n){ar(e,n,t)});function Sa(e,t){return(Ga(e)?Bt:jr)(e,us(t,3))}var Ca=Oi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Da=Jr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&bs(e,t[0],t[1])?t=[]:n>2&&bs(t[0],t[1],t[2])&&(t=[t[0]]),Yr(e,_r(t,1),[])}),Ea=ft||function(){return gt.Date.now()};function Aa(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,$i(e,u,n,n,n,n,t)}function ka(e,t){var i;if("function"!=typeof t)throw new Ie(r);return e=go(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Ma=Jr(function(e,t,n){var r=1;if(n.length){var i=hn(n,ls(Ma));r|=o}return $i(e,r,t,n,i)}),Ta=Jr(function(e,t,n){var r=3;if(n.length){var i=hn(n,ls(Ta));r|=o}return $i(t,r,e,n,i)});function Ia(e,t,i){var s,a,o,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Ie(r);function g(t){var r=s,i=a;return s=a=n,h=t,l=e.apply(i,r)}function m(e){var r=e-c;return c===n||r>=t||r<0||f&&e-h>=o}function v(){var e=Ea();if(m(e))return _(e);u=Is(v,function(e){var n=t-(e-c);return f?bn(n,o-(e-h)):n}(e))}function _(e){return u=n,p&&s?g(e):(s=a=n,l)}function y(){var e=Ea(),r=m(e);if(s=arguments,a=this,c=e,r){if(u===n)return function(e){return h=e,u=Is(v,t),d?g(e):l}(c);if(f)return Si(u),u=Is(v,t),g(c)}return u===n&&(u=Is(v,t)),l}return t=vo(t)||0,eo(i)&&(d=!!i.leading,o=(f="maxWait"in i)?yn(vo(i.maxWait)||0,t):o,p="trailing"in i?!!i.trailing:p),y.cancel=function(){u!==n&&Si(u),h=0,s=c=a=u=n},y.flush=function(){return u===n?l:_(Ea())},y}var Oa=Jr(function(e,t){return hr(e,1,t)}),La=Jr(function(e,t,n){return hr(e,vo(t)||0,n)});function Pa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Pa.Cache||Zn),n}function Ba(e){if("function"!=typeof e)throw new Ie(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Pa.Cache=Zn;var Na=xi(function(e,t){var n=(t=1==t.length&&Ga(t[0])?Bt(t[0],Qt(us())):Bt(_r(t,1),Qt(us()))).length;return Jr(function(r){for(var i=-1,s=bn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return At(e,this,r)})}),Ra=Jr(function(e,t){var r=hn(t,ls(Ra));return $i(e,o,n,t,r)}),Fa=Jr(function(e,t){var r=hn(t,ls(Fa));return $i(e,l,n,t,r)}),za=rs(function(e,t){return $i(e,c,n,n,n,t)});function ja(e,t){return e===t||e!==e&&t!==t}var Va=qi(Ar),Ua=qi(function(e,t){return e>=t}),Ha=Or(function(){return arguments}())?Or:function(e){return to(e)&&Re.call(e,"callee")&&!Xe.call(e,"callee")},Ga=oe.isArray,Ya=xt?Qt(xt):function(e){return to(e)&&Er(e)==P};function Wa(e){return null!=e&&Qa(e.length)&&!Ja(e)}function qa(e){return to(e)&&Wa(e)}var Za=bt||vl,Ka=wt?Qt(wt):function(e){return to(e)&&Er(e)==x};function Xa(e){if(!to(e))return!1;var t=Er(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!io(e)}function Ja(e){if(!eo(e))return!1;var t=Er(e);return t==S||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function $a(e){return"number"==typeof e&&e==go(e)}function Qa(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function eo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function to(e){return null!=e&&"object"==typeof e}var no=St?Qt(St):function(e){return to(e)&&gs(e)==D};function ro(e){return"number"==typeof e||to(e)&&Er(e)==E}function io(e){if(!to(e)||Er(e)!=A)return!1;var t=Ze(e);if(null===t)return!0;var n=Re.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==Ve}var so=Ct?Qt(Ct):function(e){return to(e)&&Er(e)==M},ao=Dt?Qt(Dt):function(e){return to(e)&&gs(e)==T};function oo(e){return"string"==typeof e||!Ga(e)&&to(e)&&Er(e)==I}function lo(e){return"symbol"==typeof e||to(e)&&Er(e)==O}var uo=Et?Qt(Et):function(e){return to(e)&&Qa(e.length)&&!!lt[Er(e)]},co=qi(zr),ho=qi(function(e,t){return e<=t});function fo(e){if(!e)return[];if(Wa(e))return oo(e)?pn(e):Ti(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=gs(e);return(t==D?un:t==T?dn:Vo)(e)}function po(e){return e?(e=vo(e))===h||e===-h?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function go(e){var t=po(e),n=t%1;return t===t?n?t-n:t:0}function mo(e){return e?lr(go(e),0,p):0}function vo(e){if("number"==typeof e)return e;if(lo(e))return f;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ve.test(e);return n||ye.test(e)?dt(e.slice(2),n?2:8):me.test(e)?f:+e}function _o(e){return Ii(e,Lo(e))}function yo(e){return null==e?"":ci(e)}var bo=Li(function(e,t){if(Cs(t)||Wa(t))Ii(t,Oo(t),e);else for(var n in t)Re.call(t,n)&&nr(e,n,t[n])}),xo=Li(function(e,t){Ii(t,Lo(t),e)}),wo=Li(function(e,t,n,r){Ii(t,Lo(t),e,r)}),So=Li(function(e,t,n,r){Ii(t,Oo(t),e,r)}),Co=rs(or),Do=Jr(function(e,t){e=ke(e);var r=-1,i=t.length,s=i>2?t[2]:n;for(s&&bs(t[0],t[1],s)&&(i=1);++r<i;)for(var a=t[r],o=Lo(a),l=-1,u=o.length;++l<u;){var c=o[l],h=e[c];(h===n||ja(h,Pe[c])&&!Re.call(e,c))&&(e[c]=a[c])}return e}),Eo=Jr(function(e){return e.push(n,es),At(Bo,n,e)});function Ao(e,t,r){var i=null==e?n:Cr(e,t);return i===n?r:i}function ko(e,t){return null!=e&&ms(e,t,Mr)}var Mo=Ui(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n},tl(il)),To=Ui(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Re.call(e,t)?e[t].push(n):e[t]=[n]},us),Io=Jr(Ir);function Oo(e){return Wa(e)?Jn(e):Rr(e)}function Lo(e){return Wa(e)?Jn(e,!0):Fr(e)}var Po=Li(function(e,t,n){Hr(e,t,n)}),Bo=Li(function(e,t,n,r){Hr(e,t,n,r)}),No=rs(function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,function(t){return t=bi(t,e),r||(r=t.length>1),t}),Ii(e,ss(e),n),r&&(n=ur(n,7,ts));for(var i=t.length;i--;)di(n,t[i]);return n}),Ro=rs(function(e,t){return null==e?{}:function(e,t){return Wr(e,t,function(t,n){return ko(e,n)})}(e,t)});function Fo(e,t){if(null==e)return{};var n=Bt(ss(e),function(e){return[e]});return t=us(t),Wr(e,n,function(e,n){return t(e,n[0])})}var zo=Ji(Oo),jo=Ji(Lo);function Vo(e){return null==e?[]:en(e,Oo(e))}var Uo=Ri(function(e,t,n){return t=t.toLowerCase(),e+(n?Ho(t):t)});function Ho(e){return Jo(yo(e).toLowerCase())}function Go(e){return(e=yo(e))&&e.replace(xe,sn).replace(tt,"")}var Yo=Ri(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Wo=Ri(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),qo=Ni("toLowerCase"),Zo=Ri(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ko=Ri(function(e,t,n){return e+(n?" ":"")+Jo(t)}),Xo=Ri(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Jo=Ni("toUpperCase");function $o(e,t,r){return e=yo(e),(t=r?n:t)===n?function(e){return st.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Qo=Jr(function(e,t){try{return At(e,n,t)}catch(r){return Xa(r)?r:new De(r)}}),el=rs(function(e,t){return Mt(t,function(t){t=Rs(t),ar(e,t,Ma(e[t],e))}),e});function tl(e){return function(){return e}}var nl=ji(),rl=ji(!0);function il(e){return e}function sl(e){return Nr("function"==typeof e?e:ur(e,1))}var al=Jr(function(e,t){return function(n){return Ir(n,e,t)}}),ol=Jr(function(e,t){return function(n){return Ir(e,n,t)}});function ll(e,t,n){var r=Oo(t),i=Sr(t,r);null==n&&(!eo(t)||!i.length&&r.length)&&(n=t,t=e,e=this,i=Sr(t,Oo(t)));var s=!(eo(n)&&"chain"in n)||!!n.chain,a=Ja(e);return Mt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ti(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})}),e}function ul(){}var cl=Gi(Bt),hl=Gi(It),dl=Gi(zt);function fl(e){return xs(e)?qt(Rs(e)):function(e){return function(t){return Cr(t,e)}}(e)}var pl=Wi(),gl=Wi(!0);function ml(){return[]}function vl(){return!1}var _l=Hi(function(e,t){return e+t},0),yl=Ki("ceil"),bl=Hi(function(e,t){return e/t},1),xl=Ki("floor"),wl=Hi(function(e,t){return e*t},1),Sl=Ki("round"),Cl=Hi(function(e,t){return e-t},0);return Vn.after=function(e,t){if("function"!=typeof t)throw new Ie(r);return e=go(e),function(){if(--e<1)return t.apply(this,arguments)}},Vn.ary=Aa,Vn.assign=bo,Vn.assignIn=xo,Vn.assignInWith=wo,Vn.assignWith=So,Vn.at=Co,Vn.before=ka,Vn.bind=Ma,Vn.bindAll=el,Vn.bindKey=Ta,Vn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ga(e)?e:[e]},Vn.chain=da,Vn.chunk=function(e,t,r){t=(r?bs(e,t,r):t===n)?1:yn(go(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,a=0,o=oe(mt(i/t));s<i;)o[a++]=ii(e,s,s+=t);return o},Vn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},Vn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=oe(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Nt(Ga(n)?Ti(n):[n],_r(t,1))},Vn.cond=function(e){var t=null==e?0:e.length,n=us();return e=t?Bt(e,function(e){if("function"!=typeof e[1])throw new Ie(r);return[n(e[0]),e[1]]}):[],Jr(function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}})},Vn.conforms=function(e){return function(e){var t=Oo(e);return function(n){return cr(n,e,t)}}(ur(e,1))},Vn.constant=tl,Vn.countBy=ga,Vn.create=function(e,t){var n=Un(e);return null==t?n:sr(n,t)},Vn.curry=function e(t,r,i){var s=$i(t,8,n,n,n,n,n,r=i?n:r);return s.placeholder=e.placeholder,s},Vn.curryRight=function e(t,r,i){var s=$i(t,a,n,n,n,n,n,r=i?n:r);return s.placeholder=e.placeholder,s},Vn.debounce=Ia,Vn.defaults=Do,Vn.defaultsDeep=Eo,Vn.defer=Oa,Vn.delay=La,Vn.difference=js,Vn.differenceBy=Vs,Vn.differenceWith=Us,Vn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=r||t===n?1:go(t))<0?0:t,i):[]},Vn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,0,(t=i-(t=r||t===n?1:go(t)))<0?0:t):[]},Vn.dropRightWhile=function(e,t){return e&&e.length?pi(e,us(t,3),!0,!0):[]},Vn.dropWhile=function(e,t){return e&&e.length?pi(e,us(t,3),!0):[]},Vn.fill=function(e,t,r,i){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&bs(e,t,r)&&(r=0,i=s),function(e,t,r,i){var s=e.length;for((r=go(r))<0&&(r=-r>s?0:s+r),(i=i===n||i>s?s:go(i))<0&&(i+=s),i=r>i?0:mo(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},Vn.filter=function(e,t){return(Ga(e)?Ot:vr)(e,us(t,3))},Vn.flatMap=function(e,t){return _r(Sa(e,t),1)},Vn.flatMapDeep=function(e,t){return _r(Sa(e,t),h)},Vn.flatMapDepth=function(e,t,r){return r=r===n?1:go(r),_r(Sa(e,t),r)},Vn.flatten=Ys,Vn.flattenDeep=function(e){return null!=e&&e.length?_r(e,h):[]},Vn.flattenDepth=function(e,t){return null!=e&&e.length?_r(e,t=t===n?1:go(t)):[]},Vn.flip=function(e){return $i(e,512)},Vn.flow=nl,Vn.flowRight=rl,Vn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Vn.functions=function(e){return null==e?[]:Sr(e,Oo(e))},Vn.functionsIn=function(e){return null==e?[]:Sr(e,Lo(e))},Vn.groupBy=ba,Vn.initial=function(e){return null!=e&&e.length?ii(e,0,-1):[]},Vn.intersection=qs,Vn.intersectionBy=Zs,Vn.intersectionWith=Ks,Vn.invert=Mo,Vn.invertBy=To,Vn.invokeMap=xa,Vn.iteratee=sl,Vn.keyBy=wa,Vn.keys=Oo,Vn.keysIn=Lo,Vn.map=Sa,Vn.mapKeys=function(e,t){var n={};return t=us(t,3),xr(e,function(e,r,i){ar(n,t(e,r,i),e)}),n},Vn.mapValues=function(e,t){var n={};return t=us(t,3),xr(e,function(e,r,i){ar(n,r,t(e,r,i))}),n},Vn.matches=function(e){return Vr(ur(e,1))},Vn.matchesProperty=function(e,t){return Ur(e,ur(t,1))},Vn.memoize=Pa,Vn.merge=Po,Vn.mergeWith=Bo,Vn.method=al,Vn.methodOf=ol,Vn.mixin=ll,Vn.negate=Ba,Vn.nthArg=function(e){return e=go(e),Jr(function(t){return Gr(t,e)})},Vn.omit=No,Vn.omitBy=function(e,t){return Fo(e,Ba(us(t)))},Vn.once=function(e){return ka(2,e)},Vn.orderBy=function(e,t,r,i){return null==e?[]:(Ga(t)||(t=null==t?[]:[t]),Ga(r=i?n:r)||(r=null==r?[]:[r]),Yr(e,t,r))},Vn.over=cl,Vn.overArgs=Na,Vn.overEvery=hl,Vn.overSome=dl,Vn.partial=Ra,Vn.partialRight=Fa,Vn.partition=Ca,Vn.pick=Ro,Vn.pickBy=Fo,Vn.property=fl,Vn.propertyOf=function(e){return function(t){return null==e?n:Cr(e,t)}},Vn.pull=Js,Vn.pullAll=$s,Vn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?qr(e,t,us(n,2)):e},Vn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?qr(e,t,n,r):e},Vn.pullAt=Qs,Vn.range=pl,Vn.rangeRight=gl,Vn.rearg=za,Vn.reject=function(e,t){return(Ga(e)?Ot:vr)(e,Ba(us(t,3)))},Vn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=us(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Zr(e,i),n},Vn.rest=function(e,t){if("function"!=typeof e)throw new Ie(r);return Jr(e,t=t===n?t:go(t))},Vn.reverse=ea,Vn.sampleSize=function(e,t,r){return t=(r?bs(e,t,r):t===n)?1:go(t),(Ga(e)?Qn:Qr)(e,t)},Vn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Vn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ei(e,t,r,i)},Vn.shuffle=function(e){return(Ga(e)?er:ri)(e)},Vn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&bs(e,t,r)?(t=0,r=i):(t=null==t?0:go(t),r=r===n?i:go(r)),ii(e,t,r)):[]},Vn.sortBy=Da,Vn.sortedUniq=function(e){return e&&e.length?li(e):[]},Vn.sortedUniqBy=function(e,t){return e&&e.length?li(e,us(t,2)):[]},Vn.split=function(e,t,r){return r&&"number"!=typeof r&&bs(e,t,r)&&(t=r=n),(r=r===n?p:r>>>0)?(e=yo(e))&&("string"==typeof t||null!=t&&!so(t))&&!(t=ci(t))&&ln(e)?wi(pn(e),0,r):e.split(t,r):[]},Vn.spread=function(e,t){if("function"!=typeof e)throw new Ie(r);return t=null==t?0:yn(go(t),0),Jr(function(n){var r=n[t],i=wi(n,0,t);return r&&Nt(i,r),At(e,this,i)})},Vn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Vn.take=function(e,t,r){return e&&e.length?ii(e,0,(t=r||t===n?1:go(t))<0?0:t):[]},Vn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=i-(t=r||t===n?1:go(t)))<0?0:t,i):[]},Vn.takeRightWhile=function(e,t){return e&&e.length?pi(e,us(t,3),!1,!0):[]},Vn.takeWhile=function(e,t){return e&&e.length?pi(e,us(t,3)):[]},Vn.tap=function(e,t){return t(e),e},Vn.throttle=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new Ie(r);return eo(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Ia(e,t,{leading:i,maxWait:t,trailing:s})},Vn.thru=fa,Vn.toArray=fo,Vn.toPairs=zo,Vn.toPairsIn=jo,Vn.toPath=function(e){return Ga(e)?Bt(e,Rs):lo(e)?[e]:Ti(Ns(yo(e)))},Vn.toPlainObject=_o,Vn.transform=function(e,t,n){var r=Ga(e),i=r||Za(e)||uo(e);if(t=us(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:eo(e)&&Ja(s)?Un(Ze(e)):{}}return(i?Mt:xr)(e,function(e,r,i){return t(n,e,r,i)}),n},Vn.unary=function(e){return Aa(e,1)},Vn.union=ta,Vn.unionBy=na,Vn.unionWith=ra,Vn.uniq=function(e){return e&&e.length?hi(e):[]},Vn.uniqBy=function(e,t){return e&&e.length?hi(e,us(t,2)):[]},Vn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?hi(e,n,t):[]},Vn.unset=function(e,t){return null==e||di(e,t)},Vn.unzip=ia,Vn.unzipWith=sa,Vn.update=function(e,t,n){return null==e?e:fi(e,t,yi(n))},Vn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:fi(e,t,yi(r),i)},Vn.values=Vo,Vn.valuesIn=function(e){return null==e?[]:en(e,Lo(e))},Vn.without=aa,Vn.words=$o,Vn.wrap=function(e,t){return Ra(yi(t),e)},Vn.xor=oa,Vn.xorBy=la,Vn.xorWith=ua,Vn.zip=ca,Vn.zipObject=function(e,t){return vi(e||[],t||[],nr)},Vn.zipObjectDeep=function(e,t){return vi(e||[],t||[],ei)},Vn.zipWith=ha,Vn.entries=zo,Vn.entriesIn=jo,Vn.extend=xo,Vn.extendWith=wo,ll(Vn,Vn),Vn.add=_l,Vn.attempt=Qo,Vn.camelCase=Uo,Vn.capitalize=Ho,Vn.ceil=yl,Vn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=vo(r))===r?r:0),t!==n&&(t=(t=vo(t))===t?t:0),lr(vo(e),t,r)},Vn.clone=function(e){return ur(e,4)},Vn.cloneDeep=function(e){return ur(e,5)},Vn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:n)},Vn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:n)},Vn.conformsTo=function(e,t){return null==t||cr(e,t,Oo(t))},Vn.deburr=Go,Vn.defaultTo=function(e,t){return null==e||e!==e?t:e},Vn.divide=bl,Vn.endsWith=function(e,t,r){e=yo(e),t=ci(t);var i=e.length,s=r=r===n?i:lr(go(r),0,i);return(r-=t.length)>=0&&e.slice(r,s)==t},Vn.eq=ja,Vn.escape=function(e){return(e=yo(e))&&J.test(e)?e.replace(K,an):e},Vn.escapeRegExp=function(e){return(e=yo(e))&&se.test(e)?e.replace(ie,"\\$&"):e},Vn.every=function(e,t,r){var i=Ga(e)?It:gr;return r&&bs(e,t,r)&&(t=n),i(e,us(t,3))},Vn.find=ma,Vn.findIndex=Hs,Vn.findKey=function(e,t){return Vt(e,us(t,3),xr)},Vn.findLast=va,Vn.findLastIndex=Gs,Vn.findLastKey=function(e,t){return Vt(e,us(t,3),wr)},Vn.floor=xl,Vn.forEach=_a,Vn.forEachRight=ya,Vn.forIn=function(e,t){return null==e?e:yr(e,us(t,3),Lo)},Vn.forInRight=function(e,t){return null==e?e:br(e,us(t,3),Lo)},Vn.forOwn=function(e,t){return e&&xr(e,us(t,3))},Vn.forOwnRight=function(e,t){return e&&wr(e,us(t,3))},Vn.get=Ao,Vn.gt=Va,Vn.gte=Ua,Vn.has=function(e,t){return null!=e&&ms(e,t,kr)},Vn.hasIn=ko,Vn.head=Ws,Vn.identity=il,Vn.includes=function(e,t,n,r){e=Wa(e)?e:Vo(e),n=n&&!r?go(n):0;var i=e.length;return n<0&&(n=yn(i+n,0)),oo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},Vn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:go(n);return i<0&&(i=yn(r+i,0)),Ht(e,t,i)},Vn.inRange=function(e,t,r){return t=po(t),r===n?(r=t,t=0):r=po(r),function(e,t,n){return e>=bn(t,n)&&e<yn(t,n)}(e=vo(e),t,r)},Vn.invoke=Io,Vn.isArguments=Ha,Vn.isArray=Ga,Vn.isArrayBuffer=Ya,Vn.isArrayLike=Wa,Vn.isArrayLikeObject=qa,Vn.isBoolean=function(e){return!0===e||!1===e||to(e)&&Er(e)==b},Vn.isBuffer=Za,Vn.isDate=Ka,Vn.isElement=function(e){return to(e)&&1===e.nodeType&&!io(e)},Vn.isEmpty=function(e){if(null==e)return!0;if(Wa(e)&&(Ga(e)||"string"==typeof e||"function"==typeof e.splice||Za(e)||uo(e)||Ha(e)))return!e.length;var t=gs(e);if(t==D||t==T)return!e.size;if(Cs(e))return!Rr(e).length;for(var n in e)if(Re.call(e,n))return!1;return!0},Vn.isEqual=function(e,t){return Lr(e,t)},Vn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Lr(e,t,n,r):!!i},Vn.isError=Xa,Vn.isFinite=function(e){return"number"==typeof e&&jt(e)},Vn.isFunction=Ja,Vn.isInteger=$a,Vn.isLength=Qa,Vn.isMap=no,Vn.isMatch=function(e,t){return e===t||Pr(e,t,hs(t))},Vn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Pr(e,t,hs(t),r)},Vn.isNaN=function(e){return ro(e)&&e!=+e},Vn.isNative=function(e){if(Ss(e))throw new De("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Br(e)},Vn.isNil=function(e){return null==e},Vn.isNull=function(e){return null===e},Vn.isNumber=ro,Vn.isObject=eo,Vn.isObjectLike=to,Vn.isPlainObject=io,Vn.isRegExp=so,Vn.isSafeInteger=function(e){return $a(e)&&e>=-d&&e<=d},Vn.isSet=ao,Vn.isString=oo,Vn.isSymbol=lo,Vn.isTypedArray=uo,Vn.isUndefined=function(e){return e===n},Vn.isWeakMap=function(e){return to(e)&&gs(e)==L},Vn.isWeakSet=function(e){return to(e)&&"[object WeakSet]"==Er(e)},Vn.join=function(e,t){return null==e?"":Zt.call(e,t)},Vn.kebabCase=Yo,Vn.last=Xs,Vn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var s=i;return r!==n&&(s=(s=go(r))<0?yn(i+s,0):bn(s,i-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,s):Ut(e,Yt,s,!0)},Vn.lowerCase=Wo,Vn.lowerFirst=qo,Vn.lt=co,Vn.lte=ho,Vn.max=function(e){return e&&e.length?mr(e,il,Ar):n},Vn.maxBy=function(e,t){return e&&e.length?mr(e,us(t,2),Ar):n},Vn.mean=function(e){return Wt(e,il)},Vn.meanBy=function(e,t){return Wt(e,us(t,2))},Vn.min=function(e){return e&&e.length?mr(e,il,zr):n},Vn.minBy=function(e,t){return e&&e.length?mr(e,us(t,2),zr):n},Vn.stubArray=ml,Vn.stubFalse=vl,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=wl,Vn.nth=function(e,t){return e&&e.length?Gr(e,go(t)):n},Vn.noConflict=function(){return gt._===this&&(gt._=Ue),this},Vn.noop=ul,Vn.now=Ea,Vn.pad=function(e,t,n){e=yo(e);var r=(t=go(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Yi(vt(i),n)+e+Yi(mt(i),n)},Vn.padEnd=function(e,t,n){e=yo(e);var r=(t=go(t))?fn(e):0;return t&&r<t?e+Yi(t-r,n):e},Vn.padStart=function(e,t,n){e=yo(e);var r=(t=go(t))?fn(e):0;return t&&r<t?Yi(t-r,n)+e:e},Vn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(yo(e).replace(ae,""),t||0)},Vn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&bs(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=po(e),t===n?(t=e,e=0):t=po(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var s=Sn();return bn(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Kr(e,t)},Vn.reduce=function(e,t,n){var r=Ga(e)?Rt:Kt,i=arguments.length<3;return r(e,us(t,4),n,i,fr)},Vn.reduceRight=function(e,t,n){var r=Ga(e)?Ft:Kt,i=arguments.length<3;return r(e,us(t,4),n,i,pr)},Vn.repeat=function(e,t,r){return t=(r?bs(e,t,r):t===n)?1:go(t),Xr(yo(e),t)},Vn.replace=function(){var e=arguments,t=yo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Vn.result=function(e,t,r){var i=-1,s=(t=bi(t,e)).length;for(s||(s=1,e=n);++i<s;){var a=null==e?n:e[Rs(t[i])];a===n&&(i=s,a=r),e=Ja(a)?a.call(e):a}return e},Vn.round=Sl,Vn.runInContext=e,Vn.sample=function(e){return(Ga(e)?$n:$r)(e)},Vn.size=function(e){if(null==e)return 0;if(Wa(e))return oo(e)?fn(e):e.length;var t=gs(e);return t==D||t==T?e.size:Rr(e).length},Vn.snakeCase=Zo,Vn.some=function(e,t,r){var i=Ga(e)?zt:si;return r&&bs(e,t,r)&&(t=n),i(e,us(t,3))},Vn.sortedIndex=function(e,t){return ai(e,t)},Vn.sortedIndexBy=function(e,t,n){return oi(e,t,us(n,2))},Vn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&ja(e[r],t))return r}return-1},Vn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Vn.sortedLastIndexBy=function(e,t,n){return oi(e,t,us(n,2),!0)},Vn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ai(e,t,!0)-1;if(ja(e[n],t))return n}return-1},Vn.startCase=Ko,Vn.startsWith=function(e,t,n){return e=yo(e),n=null==n?0:lr(go(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Vn.subtract=Cl,Vn.sum=function(e){return e&&e.length?Xt(e,il):0},Vn.sumBy=function(e,t){return e&&e.length?Xt(e,us(t,2)):0},Vn.template=function(e,t,r){var i=Vn.templateSettings;r&&bs(e,t,r)&&(t=n),e=yo(e),t=wo({},t,i,Qi);var s,a,o=wo({},t.imports,i.imports,Qi),l=Oo(o),u=en(o,l),c=0,h=t.interpolate||we,d="__p += '",f=Me((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,function(t,n,r,i,o,l){return r||(r=i),d+=e.slice(c,l).replace(Se,on),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var g=Re.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new De("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(Y,""):d).replace(W,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Qo(function(){return Ee(l,p+"return "+d).apply(n,u)});if(m.source=d,Xa(m))throw m;return m},Vn.times=function(e,t){if((e=go(e))<1||e>d)return[];var n=p,r=bn(e,p);t=us(t),e-=p;for(var i=Jt(r,t);++n<e;)t(n);return i},Vn.toFinite=po,Vn.toInteger=go,Vn.toLength=mo,Vn.toLower=function(e){return yo(e).toLowerCase()},Vn.toNumber=vo,Vn.toSafeInteger=function(e){return e?lr(go(e),-d,d):0===e?e:0},Vn.toString=yo,Vn.toUpper=function(e){return yo(e).toUpperCase()},Vn.trim=function(e,t,r){if((e=yo(e))&&(r||t===n))return $t(e);if(!e||!(t=ci(t)))return e;var i=pn(e),s=pn(t);return wi(i,nn(i,s),rn(i,s)+1).join("")},Vn.trimEnd=function(e,t,r){if((e=yo(e))&&(r||t===n))return e.slice(0,gn(e)+1);if(!e||!(t=ci(t)))return e;var i=pn(e);return wi(i,0,rn(i,pn(t))+1).join("")},Vn.trimStart=function(e,t,r){if((e=yo(e))&&(r||t===n))return e.replace(ae,"");if(!e||!(t=ci(t)))return e;var i=pn(e);return wi(i,nn(i,pn(t))).join("")},Vn.truncate=function(e,t){var r=30,i="...";if(eo(t)){var s="separator"in t?t.separator:s;r="length"in t?go(t.length):r,i="omission"in t?ci(t.omission):i}var a=(e=yo(e)).length;if(ln(e)){var o=pn(e);a=o.length}if(r>=a)return e;var l=r-fn(i);if(l<1)return i;var u=o?wi(o,0,l).join(""):e.slice(0,l);if(s===n)return u+i;if(o&&(l+=u.length-l),so(s)){if(e.slice(l).search(s)){var c,h=u;for(s.global||(s=Me(s.source,yo(ge.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===n?l:d)}}else if(e.indexOf(ci(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+i},Vn.unescape=function(e){return(e=yo(e))&&X.test(e)?e.replace(Z,mn):e},Vn.uniqueId=function(e){var t=++Fe;return yo(e)+t},Vn.upperCase=Xo,Vn.upperFirst=Jo,Vn.each=_a,Vn.eachRight=ya,Vn.first=Ws,ll(Vn,function(){var e={};return xr(Vn,function(t,n){Re.call(Vn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Vn.VERSION="4.17.21",Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Vn[e].placeholder=Vn}),Mt(["drop","take"],function(e,t){Yn.prototype[e]=function(r){r=r===n?1:yn(go(r),0);var i=this.__filtered__&&!t?new Yn(this):this.clone();return i.__filtered__?i.__takeCount__=bn(r,i.__takeCount__):i.__views__.push({size:bn(r,p),type:e+(i.__dir__<0?"Right":"")}),i},Yn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Mt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Yn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:us(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Mt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Yn.prototype[e]=function(){return this[n](1).value()[0]}}),Mt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Yn.prototype[e]=function(){return this.__filtered__?new Yn(this):this[n](1)}}),Yn.prototype.compact=function(){return this.filter(il)},Yn.prototype.find=function(e){return this.filter(e).head()},Yn.prototype.findLast=function(e){return this.reverse().find(e)},Yn.prototype.invokeMap=Jr(function(e,t){return"function"==typeof e?new Yn(this):this.map(function(n){return Ir(n,e,t)})}),Yn.prototype.reject=function(e){return this.filter(Ba(us(e)))},Yn.prototype.slice=function(e,t){e=go(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Yn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=go(t))<0?r.dropRight(-t):r.take(t-e)),r)},Yn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Yn.prototype.toArray=function(){return this.take(p)},xr(Yn.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=Vn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);s&&(Vn.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof Yn,u=o[0],c=l||Ga(t),h=function(e){var t=s.apply(Vn,Nt([e],o));return i&&d?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&c){t=g?t:new Yn(this);var m=e.apply(t,o);return m.__actions__.push({func:fa,args:[h],thisArg:n}),new Gn(m,d)}return p&&g?e.apply(this,o):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Oe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Vn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ga(i)?i:[],e)}return this[n](function(n){return t.apply(Ga(n)?n:[],e)})}}),xr(Yn.prototype,function(e,t){var n=Vn[t];if(n){var r=n.name+"";Re.call(On,r)||(On[r]=[]),On[r].push({name:t,func:n})}}),On[Vi(n,2).name]=[{name:"wrapper",func:n}],Yn.prototype.clone=function(){var e=new Yn(this.__wrapped__);return e.__actions__=Ti(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ti(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ti(this.__views__),e},Yn.prototype.reverse=function(){if(this.__filtered__){var e=new Yn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Yn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ga(e),r=t<0,i=n?e.length:0,s=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=bn(t,e+a);break;case"takeRight":e=yn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=s.start,o=s.end,l=o-a,u=r?o:a-1,c=this.__iteratees__,h=c.length,d=0,f=bn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return gi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var g=-1,m=e[u+=t];++g<h;){var v=c[g],_=v.iteratee,y=v.type,b=_(m);if(2==y)m=b;else if(!b){if(1==y)continue e;break e}}p[d++]=m}return p},Vn.prototype.at=pa,Vn.prototype.chain=function(){return da(this)},Vn.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===n&&(this.__values__=fo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Vn.prototype.plant=function(e){for(var t,r=this;r instanceof Hn;){var i=zs(r);i.__index__=0,i.__values__=n,t?s.__wrapped__=i:t=i;var s=i;r=r.__wrapped__}return s.__wrapped__=e,t},Vn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Yn){var t=e;return this.__actions__.length&&(t=new Yn(this)),(t=t.reverse()).__actions__.push({func:fa,args:[ea],thisArg:n}),new Gn(t,this.__chain__)}return this.thru(ea)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,Qe&&(Vn.prototype[Qe]=function(){return this}),Vn}();vt?((vt.exports=vn)._=vn,mt._=vn):gt._=vn}).call(vr)}(Ni,Ni.exports);var Ri=Ni.exports,Fi={exports:{}};const zi=yr(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var ji,Vi={exports:{}};function Ui(){return ji||(ji=1,function(e,t){!function(e){var t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],n=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],r="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0898-\u089f\u08ca-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3c\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0cf3\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ece\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u180f-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf-\u1ace\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\u30fb\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f\uff65",i="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u0870-\u0887\u0889-\u088e\u08a0-\u08c9\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c5d\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cdd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u1711\u171f-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4c\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ca\ua7d0\ua7d1\ua7d3\ua7d5-\ua7d9\ua7f2-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",s={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},a="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",o={5:a,"5module":a+" export import",6:a+" const class extends export import super"},l=/^in(stanceof)?$/,u=new RegExp("["+i+"]"),c=new RegExp("["+i+r+"]");function h(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}return!1}function d(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&h(e,n)))}function f(e,r){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==r&&(h(e,n)||h(e,t)))))}var p=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function g(e,t){return new p(e,{beforeExpr:!0,binop:t})}var m={beforeExpr:!0},v={startsExpr:!0},_={};function y(e,t){return void 0===t&&(t={}),t.keyword=e,_[e]=new p(e,t)}var b={num:new p("num",v),regexp:new p("regexp",v),string:new p("string",v),name:new p("name",v),privateId:new p("privateId",v),eof:new p("eof"),bracketL:new p("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new p("]"),braceL:new p("{",{beforeExpr:!0,startsExpr:!0}),braceR:new p("}"),parenL:new p("(",{beforeExpr:!0,startsExpr:!0}),parenR:new p(")"),comma:new p(",",m),semi:new p(";",m),colon:new p(":",m),dot:new p("."),question:new p("?",m),questionDot:new p("?."),arrow:new p("=>",m),template:new p("template"),invalidTemplate:new p("invalidTemplate"),ellipsis:new p("...",m),backQuote:new p("`",v),dollarBraceL:new p("${",{beforeExpr:!0,startsExpr:!0}),eq:new p("=",{beforeExpr:!0,isAssign:!0}),assign:new p("_=",{beforeExpr:!0,isAssign:!0}),incDec:new p("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new p("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new p("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new p("**",{beforeExpr:!0}),coalesce:g("??",1),_break:y("break"),_case:y("case",m),_catch:y("catch"),_continue:y("continue"),_debugger:y("debugger"),_default:y("default",m),_do:y("do",{isLoop:!0,beforeExpr:!0}),_else:y("else",m),_finally:y("finally"),_for:y("for",{isLoop:!0}),_function:y("function",v),_if:y("if"),_return:y("return",m),_switch:y("switch"),_throw:y("throw",m),_try:y("try"),_var:y("var"),_const:y("const"),_while:y("while",{isLoop:!0}),_with:y("with"),_new:y("new",{beforeExpr:!0,startsExpr:!0}),_this:y("this",v),_super:y("super",v),_class:y("class",v),_extends:y("extends",m),_export:y("export"),_import:y("import",v),_null:y("null",v),_true:y("true",v),_false:y("false",v),_in:y("in",{beforeExpr:!0,binop:7}),_instanceof:y("instanceof",{beforeExpr:!0,binop:7}),_typeof:y("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:y("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:y("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},x=/\r\n?|\n|\u2028|\u2029/,w=new RegExp(x.source,"g");function S(e){return 10===e||13===e||8232===e||8233===e}function C(e,t,n){void 0===n&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(S(i))return r<n-1&&13===i&&10===e.charCodeAt(r+1)?r+2:r+1}return-1}var D=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,E=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,A=Object.prototype,k=A.hasOwnProperty,M=A.toString,T=Object.hasOwn||function(e,t){return k.call(e,t)},I=Array.isArray||function(e){return"[object Array]"===M.call(e)},O=Object.create(null);function L(e){return O[e]||(O[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function P(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}var B=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,N=function(e,t){this.line=e,this.column=t};N.prototype.offset=function(e){return new N(this.line,this.column+e)};var R=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function F(e,t){for(var n=1,r=0;;){var i=C(e,r,t);if(i<0)return new N(n,t-r);++n,r=i}}var z={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},j=!1;function V(e){var t={};for(var n in z)t[n]=e&&T(e,n)?e[n]:z[n];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!j&&"object"==typeof console&&console.warn&&(j=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),(!e||null==e.allowHashBang)&&(t.allowHashBang=t.ecmaVersion>=14),I(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return I(t.onComment)&&(t.onComment=U(t,t.onComment)),t}function U(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new R(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}var H=1,G=2,Y=4,W=8,q=16,Z=32,K=64,X=128,J=256,$=H|G|J;function Q(e,t){return G|(e?Y:0)|(t?W:0)}var ee=0,te=1,ne=2,re=3,ie=4,se=5,ae=function(e,t,n){this.options=e=V(e),this.sourceFile=e.sourceFile,this.keywords=L(o[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=s[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=L(r);var i=(r?r+" ":"")+s.strict;this.reservedWordsStrict=L(i),this.reservedWordsStrictBind=L(i+" "+s.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(x).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(H),this.regexpState=null,this.privateNameStack=[]},oe={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ae.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},oe.inFunction.get=function(){return(this.currentVarScope().flags&G)>0},oe.inGenerator.get=function(){return(this.currentVarScope().flags&W)>0&&!this.currentVarScope().inClassFieldInit},oe.inAsync.get=function(){return(this.currentVarScope().flags&Y)>0&&!this.currentVarScope().inClassFieldInit},oe.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&J)return!1;if(t.flags&G)return(t.flags&Y)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},oe.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&K)>0||n||this.options.allowSuperOutsideMethod},oe.allowDirectSuper.get=function(){return(this.currentThisScope().flags&X)>0},oe.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},oe.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(G|J))>0||n},oe.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&J)>0},ae.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},ae.parse=function(e,t){return new this(t,e).parse()},ae.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},ae.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(ae.prototype,oe);var le=ae.prototype,ue=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;le.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){E.lastIndex=e,e+=E.exec(this.input)[0].length;var t=ue.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){E.lastIndex=e+t[0].length;var n=E.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||x.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,E.lastIndex=e,e+=E.exec(this.input)[0].length,";"===this.input[e]&&e++}},le.eat=function(e){return this.type===e&&(this.next(),!0)},le.isContextual=function(e){return this.type===b.name&&this.value===e&&!this.containsEsc},le.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},le.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},le.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||x.test(this.input.slice(this.lastTokEnd,this.start))},le.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},le.semicolon=function(){!this.eat(b.semi)&&!this.insertSemicolon()&&this.unexpected()},le.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},le.expect=function(e){this.eat(e)||this.unexpected()},le.unexpected=function(e){this.raise(null!==e&&void 0!==e?e:this.start,"Unexpected token")};var ce=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};le.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}},le.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},le.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},le.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var he=ae.prototype;he.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var de={kind:"loop"},fe={kind:"switch"};he.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;E.lastIndex=this.pos;var t=E.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r||92===r)return!0;if(e)return!1;if(123===r||r>55295&&r<56320)return!0;if(d(r,!0)){for(var i=n+1;f(r=this.input.charCodeAt(i),!0);)++i;if(92===r||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!l.test(s))return!0}return!1},he.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;E.lastIndex=this.pos;var e,t=E.exec(this.input),n=this.pos+t[0].length;return!x.test(this.input.slice(this.pos,n))&&"function"===this.input.slice(n,n+8)&&(n+8===this.input.length||!(f(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},he.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(s,i.keyword);case b._debugger:return this.parseDebuggerStatement(s);case b._do:return this.parseDoStatement(s);case b._for:return this.parseForStatement(s);case b._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case b._class:return e&&this.unexpected(),this.parseClass(s,!0);case b._if:return this.parseIfStatement(s);case b._return:return this.parseReturnStatement(s);case b._switch:return this.parseSwitchStatement(s);case b._throw:return this.parseThrowStatement(s);case b._try:return this.parseTryStatement(s);case b._const:case b._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case b._while:return this.parseWhileStatement(s);case b._with:return this.parseWithStatement(s);case b.braceL:return this.parseBlock(!0,s);case b.semi:return this.parseEmptyStatement(s);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){E.lastIndex=this.pos;var a=E.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(40===l||46===l)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var u=this.value,c=this.parseExpression();return i===b.name&&"Identifier"===c.type&&this.eat(b.colon)?this.parseLabeledStatement(s,u,c,e):this.parseExpressionStatement(s,c)}},he.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(b.semi)||this.insertSemicolon()?e.label=null:this.type!==b.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((null==e.label||i.name===e.label.name)&&(null!=i.kind&&(n||"loop"===i.kind)||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},he.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},he.parseDoStatement=function(e){return this.next(),this.labels.push(de),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},he.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(de),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),a=!1,o=new ce,l=this.parseExpression(!(t>-1)||"await",o);return this.type===b._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,o),this.checkLValPattern(l),this.parseForIn(e,l)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,l))},he.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,ge|(n?0:me),!1,t)},he.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},he.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},he.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(b.braceL),this.labels.push(fe),this.enterScope(0);for(var t,n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(b.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},he.parseThrowStatement=function(e){return this.next(),x.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var pe=[];he.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t="Identifier"===e.type;return this.enterScope(t?Z:0),this.checkLValPattern(e,t?ie:ne),this.expect(b.parenR),e},he.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===b._catch){var t=this.startNode();this.next(),this.eat(b.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(b._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},he.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},he.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(de),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},he.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},he.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},he.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===b._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},he.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},he.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(b.braceL),e&&this.enterScope(0);this.type!==b.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},he.parseFor=function(e,t){return e.init=t,this.expect(b.semi),e.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),e.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},he.parseForIn=function(e,t){var n=this.type===b._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},he.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(b.eq)?i.init=this.parseMaybeAssign(t):r||"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?r||"Identifier"===i.id.type||t&&(this.type===b._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(b.comma))break}return e},he.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?te:ne,!1)};var ge=1,me=2,ve=4;function _e(e,t){var n=t.key.name,r=e[n],i="true";return"MethodDefinition"===t.type&&("get"===t.kind||"set"===t.kind)&&(i=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===i||"iset"===r&&"iget"===i||"sget"===r&&"sset"===i||"sset"===r&&"sget"===i?(e[n]="true",!1):!!r||(e[n]=i,!1)}function ye(e,t){var n=e.computed,r=e.key;return!n&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}he.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&t&me&&this.unexpected(),e.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&ge&&(e.id=t&ve&&this.type!==b.name?null:this.parseIdent(),e.id&&!(t&me)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?te:ne:re));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Q(e.async,e.generator)),t&ge||(e.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&ge?"FunctionDeclaration":"FunctionExpression")},he.parseFunctionParams=function(e){this.expect(b.parenL),e.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},he.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(b.braceL);this.type!==b.braceR;){var a=this.parseClassElement(null!==e.superClass);a&&(i.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&_e(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},he.parseClassElement=function(e){if(this.eat(b.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(b.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===b.star?o=!0:r="static"}if(n.static=o,!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==b.star||this.canInsertSemicolon()?r="async":s=!0),!r&&(t>=9||!s)&&this.eat(b.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===b.parenL||"method"!==a||i||s){var u=!n.static&&ye(n,"constructor"),c=u&&e;u&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n},he.isClassElementNameStart=function(){return this.type===b.name||this.type===b.privateId||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword},he.parseClassElementName=function(e){this.type===b.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},he.parseClassMethod=function(e,t,n,r){var i=e.key;"constructor"===e.kind?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&ye(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return"get"===e.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===e.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},he.parseClassField=function(e){if(ye(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&ye(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(b.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},he.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(J|K);this.type!==b.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},he.parseClassId=function(e,t){this.type===b.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,ne,!1)):(!0===t&&this.unexpected(),e.id=null)},he.parseClassSuper=function(e){e.superClass=this.eat(b._extends)?this.parseExprSubscripts(null,!1):null},he.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},he.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=0===r?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var a=n[s];T(t,a.name)||(i?i.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},he.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},he.parseExport=function(e,t){if(this.next(),this.eat(b.star))return this.parseExportAllDeclaration(e,t);if(this.eat(b._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),"Literal"===i.local.type&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},he.parseExportDeclaration=function(e){return this.parseStatement(null)},he.parseExportDefaultDeclaration=function(){var e;if(this.type===b._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,ge|ve,!1,e)}if(this.type===b._class){var n=this.startNode();return this.parseClass(n,"nullableID")}var r=this.parseMaybeAssign();return this.semicolon(),r},he.checkExport=function(e,t,n){e&&("string"!=typeof t&&(t="Identifier"===t.type?t.name:t.value),T(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},he.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n&&this.checkPatternExport(e,t.argument)},he.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},he.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},he.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},he.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;t.push(this.parseExportSpecifier(e))}return t},he.parseImport=function(e){return this.next(),this.type===b.string?(e.specifiers=pe,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},he.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,ne),this.finishNode(e,"ImportSpecifier")},he.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,ne),this.finishNode(e,"ImportDefaultSpecifier")},he.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,ne),this.finishNode(e,"ImportNamespaceSpecifier")},he.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===b.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(b.comma)))return e;if(this.type===b.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(b.braceL);!this.eat(b.braceR);){if(t)t=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;e.push(this.parseImportSpecifier())}return e},he.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===b.string){var e=this.parseLiteral(this.value);return B.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},he.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},he.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var be=ae.prototype;be.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"===s.type&&("ArrayPattern"===s.argument.type||"ObjectPattern"===s.argument.type)&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},be.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},be.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},be.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},be.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},be.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(b.comma),t&&this.type===b.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===b.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}i.push(this.parseAssignableListItem(r))}return i},be.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},be.parseBindingListItem=function(e){return e},be.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},be.checkLValSimple=function(e,t,n){void 0===t&&(t=ee);var r=t!==ee;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===ne&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(T(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==se&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},be.checkLValPattern=function(e,t,n){switch(void 0===t&&(t=ee),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}},be.checkLValInnerPattern=function(e,t,n){switch(void 0===t&&(t=ee),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var xe=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},we={b_stat:new xe("{",!1),b_expr:new xe("{",!0),b_tmpl:new xe("${",!1),p_stat:new xe("(",!1),p_expr:new xe("(",!0),q_tmpl:new xe("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new xe("function",!1),f_expr:new xe("function",!0),f_expr_gen:new xe("function",!0,!1,null,!0),f_gen:new xe("function",!1,!1,null,!0)},Se=ae.prototype;Se.initialContext=function(){return[we.b_stat]},Se.curContext=function(){return this.context[this.context.length-1]},Se.braceIsBlock=function(e){var t=this.curContext();return t===we.f_expr||t===we.f_stat||(e!==b.colon||t!==we.b_stat&&t!==we.b_expr?e===b._return||e===b.name&&this.exprAllowed?x.test(this.input.slice(this.lastTokEnd,this.start)):e===b._else||e===b.semi||e===b.eof||e===b.parenR||e===b.arrow||(e===b.braceL?t===we.b_stat:e!==b._var&&e!==b._const&&e!==b.name&&!this.exprAllowed):!t.isExpr)},Se.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},Se.updateContext=function(e){var t,n=this.type;n.keyword&&e===b.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},Se.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===we.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?we.b_stat:we.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(we.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(e){var t=e===b._if||e===b._for||e===b._with||e===b._while;this.context.push(t?we.p_stat:we.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(e){!e.beforeExpr||e===b._else||e===b.semi&&this.curContext()!==we.p_stat||e===b._return&&x.test(this.input.slice(this.lastTokEnd,this.start))||(e===b.colon||e===b.braceL)&&this.curContext()===we.b_stat?this.context.push(we.f_stat):this.context.push(we.f_expr),this.exprAllowed=!1},b.colon.updateContext=function(){"function"===this.curContext().token&&this.context.pop(),this.exprAllowed=!0},b.backQuote.updateContext=function(){this.curContext()===we.q_tmpl?this.context.pop():this.context.push(we.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(e){if(e===b._function){var t=this.context.length-1;this.context[t]===we.f_expr?this.context[t]=we.f_expr_gen:this.context[t]=we.f_gen}this.exprAllowed=!0},b.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Ce=ae.prototype;function De(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&De(e.expression)}Ce.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===r&&"init"===s&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0));var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}},Ce.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===b.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(b.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},Ce.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new ce,r=!0);var o=this.start,l=this.startLoc;(this.type===b.parenL||this.type===b.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,l)),this.type.isAssign){var c=this.startNodeAt(o,l);return c.operator=this.value,this.type===b.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===b.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u},Ce.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(b.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(b.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},Ce.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},Ce.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==b._in)&&s>r){var a=this.type===b.logicalOR||this.type===b.logicalAND,o=this.type===b.coalesce;o&&(s=b.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),d=this.buildBinary(t,n,e,h,l,a||o);return(a&&this.type===b.coalesce||o&&(this.type===b.logicalOR||this.type===b.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e},Ce.buildBinary=function(e,t,n,r,i,s){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},Ce.parseMaybeUnary=function(e,t,n,r){var i,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)i=this.parseAwait(r),t=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===b.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&De(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,i=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==b.privateId){if(i=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(s,a);u.operator=this.value,u.prefix=!1,u.argument=i,this.checkLValSimple(i),this.next(),i=this.finishNode(u,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),i=this.parsePrivateIdent(),this.type!==b._in&&this.unexpected();return n||!this.eat(b.starstar)?i:t?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,i,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},Ce.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s},Ce.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,r,s,a,i);if(o.optional&&(a=!0),o===e||"ArrowFunctionExpression"===o.type){if(a){var l=this.startNodeAt(t,n);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}e=o}},Ce.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(b.arrow)},Ce.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)},Ce.parseSubscript=function(e,t,n,r,i,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(b.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(b.bracketL);if(u||l&&this.type!==b.parenL&&this.type!==b.backQuote||this.eat(b.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(b.bracketR)):this.type===b.privateId&&"Super"!==e.type?c.property=this.parsePrivateIdent():c.property=this.parseIdent("never"!==this.options.allowReserved),c.computed=!!u,o&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var h=new ce,d=this.yieldPos,f=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=f,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,g,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var m=this.startNodeAt(t,n);m.callee=e,m.arguments=g,o&&(m.optional=l),e=this.finishNode(m,"CallExpression")}else if(this.type===b.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e},Ce.parseExprAtom=function(e,t,n){this.type===b.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===b.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(r,"Super");case b._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case b.name:var s=this.start,a=this.startLoc,o=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===l.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.overrideContext(we.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[l],!1,t);if(this.options.ecmaVersion>=8&&"async"===l.name&&this.type===b.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(b.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[l],!0,t)}return l;case b.regexp:var u=this.value;return(r=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},r;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(r=this.startNode()).value=this.type===b._null?null:this.type===b._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case b.parenL:var c=this.start,h=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),h;case b.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(b.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case b.braceL:return this.overrideContext(we.b_expr),this.parseObj(!1,e);case b._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},Ce.parseExprAtomDefault=function(){this.unexpected()},Ce.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===b.parenL&&!e)return this.parseDynamicImport(t);if(this.type===b.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}this.unexpected()},Ce.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var t=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},Ce.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},Ce.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},Ce.parseParenExpression=function(){this.expect(b.parenL);var e=this.parseExpression();return this.expect(b.parenR),e},Ce.shouldParseArrow=function(e){return!this.canInsertSemicolon()},Ce.parseParenAndDistinguishExpression=function(e,t){var n,r=this.start,i=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,l=this.startLoc,u=[],c=!0,h=!1,d=new ce,f=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(c?c=!1:this.expect(b.comma),s&&this.afterTrailingComma(b.parenR,!0)){h=!0;break}if(this.type===b.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var g=this.lastTokEnd,m=this.lastTokEndLoc;if(this.expect(b.parenR),e&&this.shouldParseArrow(u)&&this.eat(b.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=p,this.parseParenArrowList(r,i,u,t);(!u.length||h)&&this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=p||this.awaitPos,u.length>1?((n=this.startNodeAt(o,l)).expressions=u,this.finishNodeAt(n,"SequenceExpression",g,m)):n=u[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(r,i);return v.expression=n,this.finishNode(v,"ParenthesizedExpression")}return n},Ce.parseParenItem=function(e){return e},Ce.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Ee=[];Ce.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===b.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(b.parenL)?e.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Ee,this.finishNode(e,"NewExpression")},Ce.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},Ce.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},Ce.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!x.test(this.input.slice(this.lastTokEnd,this.start))},Ce.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},Ce.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===b.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,t),this.type===b.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(b.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(a)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},Ce.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t="get"===e.kind?0:1;if(e.value.params.length!==t){var n=e.value.start;"get"===e.kind?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},Ce.parsePropertyValue=function(e,t,n,r,i,s,a,o){(n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===b.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===b.comma||this.type===b.braceR||this.type===b.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"===e.key.name&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===b.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((n||r)&&this.unexpected(),this.parseGetterSetter(e))},Ce.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(b.bracketR),e.key;e.computed=!1}return e.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Ce.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},Ce.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Q(t,r.generator)|K|(n?X:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},Ce.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Q(n,!1)|q),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},Ce.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==b.braceL,s=this.strict,a=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,se),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()},Ce.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},Ce.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,te,t?null:n)}},Ce.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(b.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===b.comma?a=null:this.type===b.ellipsis?(a=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},Ce.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===r&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&("arguments"===r||"await"===r)&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(!this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},Ce.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"===t.name&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t},Ce.parseIdentNode=function(){var e=this.startNode();return this.type===b.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,("class"===e.name||"function"===e.name)&&(this.lastTokEnd!==this.lastTokStart+1||46!==this.input.charCodeAt(this.lastTokStart))&&this.context.pop(),this.type=b.name):this.unexpected(),e},Ce.parsePrivateIdent=function(){var e=this.startNode();return this.type===b.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},Ce.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(b.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},Ce.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Ae=ae.prototype;Ae.raise=function(e,t){var n=F(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Ae.raiseRecoverable=Ae.raise,Ae.curPosition=function(){if(this.options.locations)return new N(this.curLine,this.pos-this.lineStart)};var ke=ae.prototype,Me=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ke.enterScope=function(e){this.scopeStack.push(new Me(e))},ke.exitScope=function(){this.scopeStack.pop()},ke.treatFunctionsAsVarInScope=function(e){return e.flags&G||!this.inModule&&e.flags&H},ke.declareName=function(e,t,n){var r=!1;if(t===ne){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&H&&delete this.undefinedExports[e]}else if(t===ie)this.currentScope().lexical.push(e);else if(t===re){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(o.flags&Z&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&o.flags&H&&delete this.undefinedExports[e],o.flags&$)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},ke.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},ke.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ke.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&$)return t}},ke.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&$&&!(t.flags&q))return t}};var Te=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new R(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},Ie=ae.prototype;function Oe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Ie.startNode=function(){return new Te(this,this.start,this.startLoc)},Ie.startNodeAt=function(e,t){return new Te(this,e,t)},Ie.finishNode=function(e,t){return Oe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},Ie.finishNodeAt=function(e,t,n,r){return Oe.call(this,e,t,n,r)},Ie.copyNode=function(e){var t=new Te(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Le="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Pe=Le+" Extended_Pictographic",Be=Pe+" EBase EComp EMod EPres ExtPict",Ne={9:Le,10:Pe,11:Pe,12:Be,13:Be,14:Be},Re={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},Fe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ze="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",je=ze+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ve=je+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ue=Ve+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",He=Ue+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ge={9:ze,10:je,11:Ve,12:Ue,13:He,14:He+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},Ye={};function We(e){var t=Ye[e]={binary:L(Ne[e]+" "+Fe),binaryOfStrings:L(Re[e]),nonBinary:{General_Category:L(Fe),Script:L(Ge[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var qe=0,Ze=[9,10,11,12,13,14];qe<Ze.length;qe+=1)We(Ze[qe]);var Ke=ae.prototype,Xe=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Ye[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Je(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function $e(e){return d(e,!0)||36===e||95===e}function Qe(e){return f(e,!0)||36===e||95===e||8204===e||8205===e}function et(e){return e>=65&&e<=90||e>=97&&e<=122}function tt(e){return e>=0&&e<=1114111}Xe.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("v"),i=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=i&&this.parser.options.ecmaVersion>=9)},Xe.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Xe.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var s=n.charCodeAt(e+1);return s>=56320&&s<=57343?(i<<10)+s-56613888:i},Xe.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,s=n.charCodeAt(e);return!t&&!this.switchU||s<=55295||s>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},Xe.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},Xe.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},Xe.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},Xe.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},Xe.prototype.eatChars=function(e,t){void 0===t&&(t=!1);for(var n=this.pos,r=0,i=e;r<i.length;r+=1){var s=i[r],a=this.at(n,t);if(-1===a||a!==s)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0},Ke.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var a=n.charAt(s);-1===t.indexOf(a)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),"u"===a&&(r=!0),"v"===a&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")},Ke.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},Ke.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},Ke.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Ke.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Ke.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Ke.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Ke.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Ke.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Ke.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Ke.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Ke.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Ke.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},Ke.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Ke.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Ke.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Ke.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!Je(t)&&(e.lastIntValue=t,e.advance(),!0)},Ke.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!Je(n);)e.advance();return e.pos!==t},Ke.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Ke.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},Ke.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Ke.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=P(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=P(e.lastIntValue);return!0}return!1},Ke.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),$e(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Ke.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Qe(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Ke.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Ke.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Ke.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Ke.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Ke.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Ke.regexp_eatZero=function(e){return 48===e.current()&&!ht(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Ke.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Ke.regexp_eatControlLetter=function(e){var t=e.current();return!!et(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Ke.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=1024*(i-55296)+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&tt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1},Ke.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Ke.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1};var nt=0,rt=1,it=2;function st(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function at(e){return et(e)||95===e}function ot(e){return at(e)||ht(e)}function lt(e){return 33===e||e>=35&&e<=38||e>=42&&e<=44||46===e||e>=58&&e<=64||94===e||96===e||126===e}function ut(e){return 40===e||41===e||45===e||47===e||e>=91&&e<=93||e>=123&&e<=125}function ct(e){return 33===e||35===e||37===e||38===e||44===e||45===e||e>=58&&e<=62||64===e||96===e||126===e}function ht(e){return e>=48&&e<=57}function dt(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function ft(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function pt(e){return e>=48&&e<=55}Ke.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(st(t))return e.lastIntValue=-1,e.advance(),rt;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=80===t)||112===t)){var r;if(e.lastIntValue=-1,e.advance(),e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===it&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return nt},Ke.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),rt}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return nt},Ke.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){T(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},Ke.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?rt:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?it:void e.raise("Invalid property name")},Ke.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";at(t=e.current());)e.lastStringValue+=P(t),e.advance();return""!==e.lastStringValue},Ke.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";ot(t=e.current());)e.lastStringValue+=P(t),e.advance();return""!==e.lastStringValue},Ke.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Ke.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===it&&e.raise("Negated character class may contain strings"),!0}return!1},Ke.regexp_classContents=function(e){return 93===e.current()?rt:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),rt)},Ke.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(-1===t||-1===n)&&e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Ke.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||pt(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Ke.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Ke.regexp_classSetExpression=function(e){var t,n=rt;if(!this.regexp_eatClassSetRange(e))if(t=this.regexp_eatClassSetOperand(e)){t===it&&(n=it);for(var r=e.pos;e.eatChars([38,38]);)38!==e.current()&&(t=this.regexp_eatClassSetOperand(e))?t!==it&&(n=rt):e.raise("Invalid character in character class");if(r!==e.pos)return n;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return n}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(t=this.regexp_eatClassSetOperand(e)))return n;t===it&&(n=it)}},Ke.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return-1!==n&&-1!==r&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},Ke.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?rt:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},Ke.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===it&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null},Ke.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null},Ke.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===it&&(t=it);return t},Ke.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?rt:it},Ke.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e))||(e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1));var n=e.current();return!(n<0||n===e.lookahead()&&lt(n)||ut(n))&&(e.advance(),e.lastIntValue=n,!0)},Ke.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return!!ct(t)&&(e.lastIntValue=t,e.advance(),!0)},Ke.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!ht(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Ke.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Ke.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;ht(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Ke.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;dt(n=e.current());)e.lastIntValue=16*e.lastIntValue+ft(n),e.advance();return e.pos!==t},Ke.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Ke.regexp_eatOctalDigit=function(e){var t=e.current();return pt(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Ke.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!dt(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+ft(i),e.advance()}return!0};var gt=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new R(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},mt=ae.prototype;function vt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function _t(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}mt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new gt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},mt.getToken=function(){return this.next(),new gt(this)},typeof Symbol<"u"&&(mt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===b.eof,value:t}}}}),mt.nextToken=function(){var e=this.curContext();return(!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},mt.readToken=function(e){return d(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},mt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},mt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=C(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},mt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!S(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},mt.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&D.test(String.fromCharCode(e))))break e;++this.pos}}},mt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},mt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},mt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},mt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=b.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(b.assign,n+1):this.finishOp(r,n)},mt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(124===e?b.logicalOR:b.logicalAND,2):61===t?this.finishOp(b.assign,2):this.finishOp(124===e?b.bitwiseOR:b.bitwiseAND,1)},mt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},mt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!x.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},mt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},mt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===e?b.eq:b.prefix,1)},mt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(b.questionDot,2)}if(63===t)return e>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(b.coalesce,2)}return this.finishOp(b.question,1)},mt.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,d(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(b.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+P(e)+"'")},mt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(b.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+P(e)+"'")},mt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},mt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(x.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Xe(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(u){}return this.finishToken(b.regexp,{pattern:i,flags:a,value:l})},mt.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,l=0,u=null!==t&&void 0!==t?t:1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),h=void 0;if(r&&95===c)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=c;else{if((h=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=e)break;o=c,a=a*e+h}}return r&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=t&&this.pos-s!==t?null:a},mt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=_t(this.input.slice(t,this.pos)),++this.pos):d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},mt.readNumber=function(e){var t=this.pos;!e&&null===this.readInt(10,void 0,!0)&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=_t(this.input.slice(t,this.pos));return++this.pos,d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46===r&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(69===r||101===r)&&!n&&((43===(r=this.input.charCodeAt(++this.pos))||45===r)&&++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=vt(this.input.slice(t,this.pos),n);return this.finishToken(b.num,s)},mt.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},mt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(S(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(b.string,t)};var yt={};mt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==yt)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},mt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw yt;this.raise(e,t)},mt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(b.template,e)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(S(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},mt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},mt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return P(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),("0"!==r||56===t||57===t)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return S(t)?"":String.fromCharCode(t)}},mt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},mt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(f(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?d:f)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=P(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},mt.readWord=function(){var e=this.readWord1(),t=b.name;return this.keywords.test(e)&&(t=_[e]),this.finishToken(t,e)};var bt="8.11.3";function xt(e,t){return ae.parse(e,t)}function wt(e,t,n){return ae.parseExpressionAt(e,t,n)}function St(e,t){return ae.tokenizer(e,t)}ae.acorn={Parser:ae,version:bt,defaultOptions:z,Position:N,SourceLocation:R,getLineInfo:F,Node:Te,TokenType:p,tokTypes:b,keywordTypes:_,TokContext:xe,tokContexts:we,isIdentifierChar:f,isIdentifierStart:d,Token:gt,isNewLine:S,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:D},e.Node=Te,e.Parser=ae,e.Position=N,e.SourceLocation=R,e.TokContext=xe,e.Token=gt,e.TokenType=p,e.defaultOptions=z,e.getLineInfo=F,e.isIdentifierChar=f,e.isIdentifierStart=d,e.isNewLine=S,e.keywordTypes=_,e.lineBreak=x,e.lineBreakG=w,e.nonASCIIwhitespace=D,e.parse=xt,e.parseExpressionAt=wt,e.tokContexts=we,e.tokTypes=b,e.tokenizer=St,e.version=bt}(t)}(0,Vi.exports)),Vi.exports}!function(e){(function(t,n){var r=(t=t||zi).window,i=t.document,s=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],r=t.slice,i=Object.create,s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=t.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},l=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},u=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},c=function(e,t,n){if(e){var r=s(e,"length");(r&&"number"==typeof r.value?o:l).call(e,t,n=n||e)}return n};function h(t,n,r,i,o){var l={};function u(e,u){"string"==typeof(u=u||(u=s(n,e))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var c,h="function"==typeof u,f=u,p=o||h&&!u.base?u&&u.get?e in t:t[e]:null;(!o||!p)&&(h&&p&&(u.base=p),h&&!1!==i&&(c=e.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),(!f||h||!f.get||"function"!=typeof f.get||!d.isPlainObject(f))&&(f={value:f,writable:!0}),(s(t,e)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!==r&&void 0!==r?r:!c),a(t,e,f))}if(n){for(var c in n)n.hasOwnProperty(c)&&!e.test(c)&&u(c);for(var c in l){var h=l[c],f=t["set"+h],p=t["get"+h]||f&&t["is"+h];p&&(!0===i||0===p.length)&&u(c,{get:p,set:f})}}return t}function d(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&u(this,n)}return this}return h(d,{inject:function(e){if(e){var t=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;t!==e&&h(this.prototype,e,e.enumerable,n,r),h(this,t,null,n,r)}for(var i=1,s=arguments.length;i<s;i++)this.inject(arguments[i]);return this},extend:function(){for(var e,t,n,r=this,s=0,o=arguments.length;s<o&&(!e||!t);s++)n=arguments[s],e=e||n.initialize,t=t||n.prototype;return e=e||function(){r.apply(this,arguments)},t=e.prototype=t||i(this.prototype),a(t,"constructor",{value:e,writable:!0,configurable:!0}),h(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:d,set:d,inject:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var e=i(this);return e.inject.apply(e,arguments)},each:function(e,t){return c(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:i,define:a,describe:s,clone:function(e){return u(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===d||"Object"===t.name)},pick:function(e,t){return e!==n?e:t},slice:function(e,t,n){return r.call(e,t,n)}}})};e.exports=s,s.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?c.instance.number(e):"string"===n?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return s.importJSON(e,this)},exportJSON:function(e){return s.exportJSON(this,e)},toJSON:function(){return s.serialize(this)},set:function(e,t){return e&&s.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!s.exports[n]&&(s.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((n=e.length)!==t.length)return!1;for(;n--;)if(!s.equals(e[n],t[n]))return!1}else{var n,r=Object.keys(e);if((n=r.length)!==Object.keys(t).length)return!1;for(;n--;){var i=r[n];if(!t.hasOwnProperty(i)||!s.equals(e[i],t[i]))return!1}}return!0}return!1},read:function(e,t,r,i){if(this===s){var a=this.peek(e,t);return e.__index++,a}var o=this.prototype,l=o._readIndex,u=t||l&&e.__index||0,c=e.length,h=e[u];if(i=i||c-u,h instanceof this||r&&r.readNull&&null==h&&i<=1)return l&&(e.__index=u+1),h&&r&&r.clone?h.clone():h;if(h=s.create(o),l&&(h.__read=!0),h=h.initialize.apply(h,u>0||u+i<c?s.slice(e,u,u+i):e)||h,l){e.__index=u+h.__read;var d=h.__filtered;d&&(e.__filtered=d,h.__filtered=n),h.__read=n}return h},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,r){for(var i,s=[],a=t||0,o=r?a+r:e.length,l=a;l<o;l++)s.push(Array.isArray(i=e[l])?this.read(i,0,n):this.read(e,l,n,1));return s},readNamed:function(e,t,r,i,a){var o=this.getNamed(e,t),l=o!==n;if(l){var u=e.__filtered;if(!u){var c=this.getSource(e);(u=e.__filtered=s.create(c)).__unfiltered=c}u[t]=n}return this.read(l?[o]:e,r,i,a)},readSupported:function(e,t){var r=this.getSource(e),i=this,s=!1;return r&&Object.keys(r).forEach(function(r){if(r in t){var a=i.readNamed(e,r);a!==n&&(t[r]=a),s=!0}}),s},getSource:function(e){var t=e.__source;if(t===n){var r=1===e.length&&e[0];t=e.__source=r&&s.isPlainObject(r)?r:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,r,i){var s;function a(i){if((!r||!(i in r))&&(!s||!(i in s))){var a=t[i];a!==n&&(e[i]=a)}}if(i){for(var o,l={},u=0,c=i.length;u<c;u++)(o=i[u])in t&&(a(o),l[o]=!0);s=l}return Object.keys(t.__unfiltered||t).forEach(a),e},isPlainValue:function(e,t){return s.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,r){t=t||{};var i,a=!r;if(a&&(t.formatter=new c(t.precision),r={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,r=this.references[n];if(!r){this.length++;var i=t.call(e),s=e._class;s&&i[0]!==s&&i.unshift(s),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),e&&e._serialize){i=e._serialize(t,r);var o=e._class;o&&!e._compactSerialize&&(a||!n)&&i[0]!==o&&i.unshift(o)}else if(Array.isArray(e)){i=[];for(var l=0,u=e.length;l<u;l++)i[l]=s.serialize(e[l],t,n,r)}else if(s.isPlainObject(e)){i={};var h=Object.keys(e);for(l=0,u=h.length;l<u;l++){var d=h[l];i[d]=s.serialize(e[d],t,n,r)}}else i="number"==typeof e?t.formatter.number(e,t.precision):e;return a&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(e,t,n,r,i){var a=e,o=!n,l=o&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var u=e[0],c="dictionary"===u;if(1==e.length&&/^#/.test(u))return n.dictionary[u];a=[];for(var h=(u=s.exports[u])?1:0,d=e.length;h<d;h++)a.push(s.deserialize(e[h],t,n,c,l));if(u){var f=a;a=t?t(u,f,o||i):new u(f)}}else if(s.isPlainObject(e))for(var p in a={},r&&(n.dictionary=a),e)a[p]=s.deserialize(e[p],t,n);return l?a[1]:a},exportJSON:function(e,t){var n=s.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return s.deserialize("string"==typeof e?JSON.parse(e):e,function(e,n,r){var i=r&&t&&t.constructor===e,a=i?t:s.create(e.prototype);if(1===n.length&&a instanceof w&&(i||!(a instanceof C))){var o=n[0];s.isPlainObject(o)&&(o.insert=!1,i&&(n=n.concat([w.INSERT])))}return(i?a.set:e).apply(a,n),i&&(t=null),a})},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var r=e.length;e.length+=n;for(var i=0;i<n;i++)e[r+i]=t[i]}return e},splice:function(e,t,r,i){var a=t&&t.length,o=r===n;(r=o?e.length:r)>e.length&&(r=e.length);for(var l=0;l<a;l++)t[l]._index=r+l;if(o)return s.push(e,t),[];var u=[r,i];t&&s.push(u,t);for(var c=e.splice.apply(e,u),h=(l=0,c.length);l<h;l++)c[l]._index=n;for(l=r+a,h=e.length;l<h;l++)e[l]._index=l;return c},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(e,t){if("string"!=typeof e)s.each(e,function(e,t){this.on(t,e)},this);else{var n=this._eventTypes,r=n&&n[e],i=this._callbacks=this._callbacks||{};-1===(i=i[e]=i[e]||[]).indexOf(t)&&(i.push(t),r&&r.install&&1===i.length&&r.install.call(this,e))}return this},off:function(e,t){if("string"==typeof e){var n,r=this._eventTypes,i=r&&r[e],a=this._callbacks&&this._callbacks[e];return a&&(!t||-1!==(n=a.indexOf(t))&&1===a.length?(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e]):-1!==n&&a.splice(n,1)),this}s.each(e,function(e,t){this.off(t,e)},this)},once:function(e,t){return this.on(e,function n(){t.apply(this,arguments),this.off(e,n)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=s.slice(arguments,1),i=t&&t.target&&!t.currentTarget;n=n.slice(),i&&(t.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,r)){t&&t.stop&&t.stop();break}return i&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t)for(var i in n)if(n[i].length>0){var s=t[i],a=s&&s[r];a&&a.call(this,i)}},statics:{inject:function e(t){var n=t._events;if(n){var r={};s.each(n,function(e,n){var i="string"==typeof e,a=i?e:n,o=s.capitalize(a),l=a.substring(2).toLowerCase();r[l]=i?{}:e,a="_"+a,t["get"+o]=function(){return this[a]},t["set"+o]=function(e){var t=this[a];t&&this.off(l,t),e&&this.on(l,e),this[a]=e}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},o=s.extend({_class:"PaperScope",initialize:function e(){oe=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var n=e.prototype;if(!this.support){var r=re.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:ie.nativeModes},re.release(r)}if(!this.agent){var i=t.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],o="darwin"===a?"mac":a,l=n.agent=n.browser={platform:o};o&&(l[o]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(e,t,n,r,i){if(!l.chrome){var s="opera"===t?r:/^(node|trident)$/.test(t)?i:n;l.version=s,l.versionNumber=parseFloat(s),t={trident:"msie",jsdom:"node"}[t]||t,l.name=t,l[t]=!0}}),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=oe.PaperScript.execute(e,this,t);return q.updateFocus(),n},install:function(e){var t=this;for(var n in s.each(["project","view","tool"],function(n){s.define(e,n,{configurable:!0,get:function(){return t[n]}})}),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return oe=this,this.project=new x(e),this},createCanvas:function(e,t){return re.getCanvas(e,t)},activate:function(){oe=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),l=s.extend(a,{initialize:function(e){this._scope=oe,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),u={findItemBoundsCollisions:function(e,t,n){function r(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n].getBounds();t[n]=[r.left,r.top,r.right,r.bottom]}return t}var i=r(e),s=t&&t!==e?r(t):i;return this.findBoundsCollisions(i,s,n||0)},findCurveBoundsCollisions:function(e,t,n,r){function i(e){for(var t=Math.min,n=Math.max,r=new Array(e.length),i=0;i<e.length;i++){var s=e[i];r[i]=[t(s[0],s[2],s[4],s[6]),t(s[1],s[3],s[5],s[7]),n(s[0],s[2],s[4],s[6]),n(s[1],s[3],s[5],s[7])]}return r}var s=i(e),a=t&&t!==e?i(t):s;if(r){for(var o=this.findBoundsCollisions(s,a,n||0,!1,!0),l=this.findBoundsCollisions(s,a,n||0,!0,!0),u=[],c=0,h=o.length;c<h;c++)u[c]={hor:o[c],ver:l[c]};return u}return this.findBoundsCollisions(s,a,n||0)},findBoundsCollisions:function(e,t,n,r,i){var s=!t||e===t,a=s?e:e.concat(t),o=e.length,l=a.length;function u(e,t,n){for(var r=0,i=e.length;r<i;){var s=i+r>>>1;a[e[s]][t]<n?r=s+1:i=s}return r-1}for(var c=r?1:0,h=c+2,d=r?0:1,f=d+2,p=new Array(l),g=0;g<l;g++)p[g]=g;p.sort(function(e,t){return a[e][c]-a[t][c]});var m=[],v=new Array(o);for(g=0;g<l;g++){var _=p[g],y=a[_],b=s?_:_-o,x=_<o,w=s||!x,S=x?[]:null;if(m.length){var C=u(m,h,y[c]-n)+1;if(m.splice(0,C),s&&i){S=S.concat(m);for(var D=0;D<m.length;D++)v[k=m[D]].push(b)}else{var E=y[f],A=y[d];for(D=0;D<m.length;D++){var k=m[D],M=a[k],T=k<o,I=s||k>=o;(i||(x&&I||w&&T)&&E>=M[d]-n&&A<=M[f]+n)&&(x&&I&&S.push(s?k:k-o),w&&T&&v[k].push(b))}}}if(x&&(e===t&&S.push(_),v[_]=S),m.length){var O=u(m,h,y[h]);m.splice(O+1,0,_)}else m.push(_)}for(g=0;g<v.length;g++){var L=v[g];L&&L.sort(function(e,t){return e-t})}return v}},c=s.extend({initialize:function(e){this.precision=s.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});c.instance=new c;var h=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.pow,s=Math.log2||function(e){return Math.log(e)*Math.LOG2E},a=1e-12,o=112e-18;function l(e,t,n){return e<t?t:e>n?n:e}function u(e,t,r){function i(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var s=t*t-e*r,a=t*t+e*r;if(3*n(s)<a){var o=i(e),l=i(t),u=i(r),c=t*t,h=e*r;s=c-h+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(o[0]*u[0]-h+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return s}function c(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?i(2,-Math.round(s(e))):0}return{EPSILON:a,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(e){return e>=-a&&e<=a},isMachineZero:function(e){return e>=-o&&e<=o},clamp:l,integrate:function(n,r,i,s){for(var a=e[s-2],o=t[s-2],l=.5*(i-r),u=l+r,c=0,h=s+1>>1,d=1&s?o[c++]*n(u):0;c<h;){var f=l*a[c];d+=o[c++]*(n(u+f)+n(u-f))}return l*d},findRoot:function(e,t,r,i,s,a,o){for(var u=0;u<a;u++){var c=e(r),h=c/t(r),d=r-h;if(n(h)<o){r=d;break}c>0?(s=r,r=d<=i?.5*(i+s):d):(i=r,r=d>=s?.5*(i+s):d)}return l(r,i,s)},solveQuadratic:function(e,t,i,s,h,d){var f,p=1/0;if(n(e)<a){if(n(t)<a)return n(i)<a?-1:0;f=-i/t}else{var g=u(e,t*=-.5,i);if(g&&n(g)<o){var m=c(n(e),n(t),n(i));m&&(g=u(e*=m,t*=m,i*=m))}if(g>=-o){var v=g<0?0:r(g),_=t+(t<0?-v:v);0===_?p=-(f=i/e):(f=_/e,p=i/_)}}var y=0,b=null==h,x=h-a,w=d+a;return isFinite(f)&&(b||f>x&&f<w)&&(s[y++]=b?f:l(f,h,d)),p!==f&&isFinite(p)&&(b||p>x&&p<w)&&(s[y++]=b?p:l(p,h,d)),y},solveCubic:function(e,t,s,u,d,f,p){var g,m,v,_,y,b=c(n(e),n(t),n(s),n(u));function x(n){var r=e*(g=n);_=(r+(m=r+t))*g+(v=m*g+s),y=v*g+u}if(b&&(e*=b,t*=b,s*=b,u*=b),n(e)<a)e=t,m=s,v=u,g=1/0;else if(n(u)<a)m=t,v=s,g=0;else{x(-t/e/3);var w=y/e,S=i(n(w),1/3),C=w<0?-1:1,D=-_/e,E=D>0?1.324717957244746*Math.max(S,r(D)):S,A=g-C*E;if(A!==g){do{x(A),A=0===_?g:g-y/_/(1+o)}while(C*A>C*g);n(e)*g*g>n(u/g)&&(m=((v=-u/g)-s)/g)}}var k=h.solveQuadratic(e,m,v,d,f,p),M=null==f;return isFinite(g)&&(0===k||k>0&&g!==d[0]&&g!==d[1])&&(M||g>f-a&&g<p+a)&&(d[k++]=M?g:l(g,f,p)),k}}},d={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},f=s.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var s="number"==typeof t;this._set(e,s?t:e),r&&(i=s?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var a="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new f(this.x,this.y)},toString:function(){var e=c.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();h.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=f.read(arguments),t=this.getLength()*e.getLength();if(h.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=f.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=f.read(e),n=t.x-this.x,r=t.y-this.y,i=n*n+r*r;return s.read(e)?i:Math.sqrt(i)},normalize:function(e){e===n&&(e=1);var t=this.getLength(),r=0!==t?e/t:0,i=new f(this.x*r,this.y*r);return r>=0&&(i._angle=this._angle),i},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=new f(n.x*i-n.y*r,n.x*r+n.y*i),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=f.read(arguments);return new f(this.x+e.x,this.y+e.y)},subtract:function(){var e=f.read(arguments);return new f(this.x-e.x,this.y-e.y)},multiply:function(){var e=f.read(arguments);return new f(this.x*e.x,this.y*e.y)},divide:function(){var e=f.read(arguments);return new f(this.x/e.x,this.y/e.y)},modulo:function(){var e=f.read(arguments);return new f(this.x%e.x,this.y%e.y)},negate:function(){return new f(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this)},isClose:function(){var e=arguments,t=f.read(e),n=s.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=f.read(arguments);return f.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=f.read(arguments);return f.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=h.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=f.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=f.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=f.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new f(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=f.read(e),n=f.read(e);return new f(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=f.read(e),n=f.read(e);return new f(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new f(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+r*r))}}},s.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new f(t(this.x),t(this.y))}},{})),p=f.extend({initialize:function(e,t,n,r){this._x=e,this._y=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),g=s.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,r=this.__read,i=0;if("number"===n){var s="number"==typeof t;this._set(e,s?t:e),r&&(i=s?2:1)}else if("undefined"===n||null===e)this._set(0,0),r&&(i=null===e?1:0);else{var a="string"===n?e.split(/[\s,]+/)||[]:e;i=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),i=0)}return r&&(this.__read=i),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new g(this.width,this.height)},toString:function(){var e=c.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=g.read(arguments);return new g(this.width+e.width,this.height+e.height)},subtract:function(){var e=g.read(arguments);return new g(this.width-e.width,this.height-e.height)},multiply:function(){var e=g.read(arguments);return new g(this.width*e.width,this.height*e.height)},divide:function(){var e=g.read(arguments);return new g(this.width/e.width,this.height/e.height)},modulo:function(){var e=g.read(arguments);return new g(this.width%e.width,this.height%e.height)},negate:function(){return new g(-this.width,-this.height)},isZero:function(){var e=h.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new g(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new g(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new g(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new g(t(this.width),t(this.height))}},{})),m=g.extend({initialize:function(e,t,n,r){this._width=e,this._height=t,this._owner=n,this._setter=r},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),v=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,r,i){var a,o=arguments,l=typeof e;if("number"===l?(this._set(e,t,r,i),a=4):"undefined"===l||null===e?(this._set(0,0,0,0),a=null===e?1:0):1===o.length&&(Array.isArray(e)?(this._set.apply(this,e),a=1):e.x!==n||e.width!==n?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),a=1):e.from===n&&e.to===n&&(this._set(0,0,0,0),s.readSupported(o,this)&&(a=1))),a===n){var u,c,h=f.readNamed(o,"from"),d=s.peek(o),p=h.x,m=h.y;if(d&&d.x!==n||s.hasNamed(o,"to")){var v=f.readNamed(o,"to");u=v.x-p,c=v.y-m,u<0&&(p=v.x,u=-u),c<0&&(m=v.y,c=-c)}else{var _=g.read(o);u=_.width,c=_.height}this._set(p,m,u,c),a=o.__index}var y=o.__filtered;return y&&(this.__filtered=y),this.__read&&(this.__read=a),this},set:"#initialize",_set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(e){var t=s.isPlainValue(e)?v.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=c.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?f:p)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=f.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?g:m)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=g.read(arguments),t=this._sx,n=this._sy,r=e.width,i=e.height;t&&(this.x+=(this.width-r)*t),n&&(this.y+=(this.height-i)*n),this.width=r,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?f:p)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=f.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==n||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(f.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=v.read(arguments),t=s.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=v.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return new v(t,n,r-t,i-n)},unite:function(){var e=v.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return new v(t,n,r-t,i-n)},include:function(){var e=f.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return new v(t,n,r-t,i-n)},expand:function(){var e=g.read(arguments),t=e.width,n=e.height;return new v(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===n?e:t)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],s=e[r?1:0],a="get"+i,o="get"+s,l="set"+i,u="set"+s,c="set"+n;this["get"+n]=function(e){return new(e?f:p)(this[a](),this[o](),this,c)},this[c]=function(){var e=f.read(arguments);this[l](e.x),this[u](e.y)}},{beans:!0})),_=v.extend({initialize:function(e,t,n,r,i,s){this._set(e,t,n,r,!0),this._owner=i,this._setter=s},_set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var e=v.prototype;return s.each(["x","y","width","height"],function(e){var t=s.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}},s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),y=s.extend({_class:"Matrix",initialize:function e(t,n){var r=arguments,i=r.length,s=!0;if(i>=6?this._set.apply(this,r):1===i||2===i?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):s=!1:i?s=!1:this.reset(),!s)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,r,i,s,a){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=i,this._ty=s,a||this._changed(),this},_serialize:function(e,t){return s.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new y(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=c.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,s.pick(e,!0),t),this.isIdentity())},translate:function(){var e=f.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=f.read(e),n=f.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=f.read(arguments,1),n=t.x,r=t.y,i=Math.cos(e),s=Math.sin(e),a=n-n*i+r*s,o=r-n*s-r*i,l=this._a,u=this._b,c=this._c,h=this._d;return this._a=i*l+s*c,this._b=i*u+s*h,this._c=-s*l+i*c,this._d=-s*u+i*h,this._tx+=a*l+o*c,this._ty+=a*u+o*h,this._changed(),this},shear:function(){var e=arguments,t=f.read(e),n=f.read(e,0,{readNull:!0});n&&this.translate(n);var r=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*i,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=f.read(e),n=f.read(e,0,{readNull:!0}),r=Math.PI/180,i=new f(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(i,n)},append:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,s=this._d,a=e._a,o=e._c,l=e._b,u=e._d,c=e._tx,h=e._ty;this._a=a*n+l*i,this._c=o*n+u*i,this._b=a*r+l*s,this._d=o*r+u*s,this._tx+=c*n+h*i,this._ty+=c*r+h*s,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,r=this._b,i=this._c,s=this._d,a=this._tx,o=this._ty,l=e._a,u=e._c,c=e._b,h=e._d,d=e._tx,f=e._ty;this._a=l*n+u*r,this._c=l*i+u*s,this._b=c*n+h*r,this._d=c*i+h*s,this._tx=l*a+u*o+d,this._ty=c*a+h*o+f,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,i=this._tx,s=this._ty,a=e*r-t*n,o=null;return a&&!isNaN(a)&&isFinite(i)&&isFinite(s)&&(this._a=r/a,this._b=-t/a,this._c=-n/a,this._d=e/a,this._tx=(n*s-r*i)/a,this._ty=(t*i-e*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new y(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(f.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new f),t._set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,i=2*n;r<i;r+=2){var s=e[r],a=e[r+1];t[r]=s*this._a+a*this._c+this._tx,t[r+1]=s*this._b+a*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,s=[t,n,r,n,r,i,t,i];return this._transformCoordinates(s,s,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),i=r.slice(0,2),s=i.slice(),a=2;a<8;a++){var o=r[a],l=1&a;o<i[l]?i[l]=o:o>s[l]&&(s[l]=o)}return t||(t=new v),t._set(i[0],i[1],s[0]-i[0],s[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(f.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,i=this._b,s=this._c,a=this._d,o=this._tx,l=this._ty,u=r*a-i*s,c=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(l)){var h=e.x-this._tx,d=e.y-this._ty;t||(t=new f),c=t._set((h*a-d*s)/u,(d*r-h*i)/u,n)}return c},decompose:function(){var e,t,n,r=this._a,i=this._b,s=this._c,a=this._d,o=r*a-i*s,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=l(r*r+i*i);e=Math.acos(r/h)*(i>0?1:-1),t=[h,o/h],n=[u(r*s+i*a,h*h),0]}else if(0!==s||0!==a){var d=l(s*s+a*a);e=Math.asin(s/d)*(a>0?1:-1),t=[o/d,d],n=[0,u(r*s+i*a,d*d)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*c,scaling:new f(t),skewing:new f(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new f(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],function(e){var t=s.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}},{})),b=s.extend({_class:"Line",initialize:function(e,t,n,r,i){var s=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=r,s=i):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new f(this._px,this._py)},getVector:function(){return new f(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return b.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return b.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return b.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return f.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return f.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,i,s,a,o,l,u){l||(n-=e,r-=t,a-=i,o-=s);var c=n*o-r*a;if(!h.isMachineZero(c)){var d=e-i,p=t-s,g=(a*p-o*d)/c,m=(n*p-r*d)/c,v=-1e-12,_=1+1e-12;if(u||v<g&&g<_&&v<m&&m<_)return u||(g=g<=0?0:g>=1?1:g),new f(e+g*n,t+g*r)}},getSide:function(e,t,n,r,i,s,a,o){a||(n-=e,r-=t);var l=i-e,u=l*r-(s-t)*n;return!o&&h.isMachineZero(u)&&(u=(l*n+l*n)/(n*n+r*r))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(e,t,n,r,i,s,a){return a||(n-=e,r-=t),0===n?r>0?i-e:e-i:0===r?n<0?s-t:t-s:((i-e)*r-(s-t)*n)/(r>n?r*Math.sqrt(1+n*n/(r*r)):n*Math.sqrt(1+r*r/(n*n)))},getDistance:function(e,t,n,r,i,s,a){return Math.abs(b.getSignedDistance(e,t,n,r,i,s,a))}}}),x=l.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){l.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new G(null,null,this),this._view=q.create(this,e||re.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return s.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var i=this._changesById,s=t._id,a=i[s];a?a.flags|=e:r.push(i[s]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new C({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:A,match:function(n){var r=n._definition,i=r._id;return t[i]||(t[i]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],i=r._selection;1&i&&r.isInserted()?t.push(r):i||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(n,e)},insertLayer:function(e,t){if(t instanceof C){t._remove(!1,!0),s.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,r){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(n,new C(w.NO_INSERT),!0)).insertChild(e,t),r&&t.activate&&t.activate(),t},getItems:function(e){return w._getItems(this,e)},getItem:function(e){return w._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return s.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var i=n[r];for(var s in t){var a=t[s];a&&a!=n&&delete a[i._id]}i.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,i=new s({offset:new f(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new y],updateMatrix:!0}),a=0,o=r.length;a<o;a++)r[a].draw(e,i);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var h in l)l[h]._drawSelection(e,t,u,l,c);e.restore()}}}),w=s.extend(a,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=s.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new y,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(e,function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var r=e&&s.isPlainObject(e),i=r&&!0===e.internal,a=this._matrix=new y,o=r&&e.project||oe.project,l=oe.settings;return this._id=i?null:d.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,t&&a.translate(t),a._owner=this,this._style=new G(o._currentStyle,this,o),i||r&&0==e.insert||!l.insertItems&&(!r||1!=e.insert)?this._setProject(o):(r&&e.parent||o)._insertItem(n,this,!0),r&&e!==w.NO_INSERT&&e!==w.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(e,t){var n={},r=this;function i(i){for(var a in i){var o=r[a];s.equals(o,"leading"===a?1.2*i.fontSize:i[a])||(n[a]=s.serialize(o,e,"data"!==a,t))}}return i(this._serializeFields),this instanceof S||i(this._style._defaults),[this._class,n]},_changed:function(e){var t=this._symbol,r=this._parent||t,i=this._project;8&e&&(this._bounds=this._position=this._decomposed=n),16&e&&(this._globalMatrix=n),r&&72&e&&w._clearBoundsCache(r),2&e&&w._clearBoundsCache(this),i&&i._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var r=t._children,i=t._namedChildren;(i[e]=i[e]||[]).push(this),e in r||(r[e]=this)}this._name=e||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},s.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=s.capitalize(e),n="_"+e,r={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(r[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?f:p,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(f.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new p(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=f.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(t){return this.getBounds(t,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof y,r=s.set({},n?t:e,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var i=this._getCachedBounds(n&&e,r).rect;return arguments.length?i:new _(i.x,i.y,i.width,i.height,this,"setBounds")},setBounds:function(){var e=v.read(arguments),t=this.getBounds(),n=this._matrix,r=new y,i=e.getCenter();r.translate(i),(e.width!=t.width||e.height!=t.height)&&(n.isInvertible()||(n.set(n._backup||(new y).translate(n.getTranslation())),t=this.getBounds()),r.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),i=t.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(w._updateBoundsCache(this,t.cacheItem),w._getBounds(n,e,t)):new v},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var r=t.internal&&!n,i=t.cacheItem,s=r?null:this._matrix._orNullIfIdentity(),a=i&&(!e||e.equals(s))&&this._getBoundsCacheKey(t,r),o=this._bounds;if(w._updateBoundsCache(this._parent||this._symbol,i),a&&o&&a in o)return{rect:(d=o[a]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(e||s,t),u=l.rect||l,c=this._style,h=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(a){o||(this._bounds=o={});var d=o[a]={rect:u.clone(),nonscaling:h,internal:r}}return{rect:u,nonscaling:h}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=n;for(var r=0,i=t.list,s=i.length;r<s;r++){var a=i[r];a!==e&&(a._bounds=a._position=n,a._boundsCache&&w._clearBoundsCache(a))}}},_getBounds:function(e,t,n){var r=1/0,i=-r,s=r,a=i,o=!1;n=n||{};for(var l=0,u=e.length;l<u;l++){var c=e[l];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(t&&t.appended(c._matrix),n,!0),d=h.rect;r=Math.min(d.x,r),s=Math.min(d.y,s),i=Math.max(d.x+d.width,i),a=Math.max(d.y+d.height,a),h.nonscaling&&(o=!0)}}return{rect:isFinite(r)?new v(r,s,i-r,a-s):new v,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new p(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=f.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),r=this._decomposed,i=new y,s=h.isZero;if(s(e.x)||s(e.y))i.translate(r.translation),n&&i.rotate(n),i.scale(t.x,t.y),this._matrix.set(i);else{var a=this.getPosition(!0);i.translate(a),n&&i.rotate(n),i.scale(t.x/e.x,t.y/e.y),n&&i.rotate(-n),i.translate(a.negate()),this.transform(i)}r&&(r.scaling=t,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,r=[];n;){if(!n._globalMatrix){t=null;for(var i=0,s=r.length;i<s;i++)r[i]._globalMatrix=null;break}r.push(n),n=n._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&t.prepend(n.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof C)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return s.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(w.NO_INSERT),r=this._children,i=s.pick(e?e.insert:n,e===n||!0===e),a=s.pick(e?e.deep:n,!0);r&&t.copyAttributes(this),(!r||a)&&t.copyContent(this),r||t.copyAttributes(this),i&&t.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){r=l._children;for(var u=o,c=1;r[o];)o=u+" "+c++;o!==u&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var a=n[r];e.hasOwnProperty(a)&&(this[a]=e[a])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var o=e._data,l=e._name;this._data=o?s.clone(o):null,l&&this.setName(l)},rasterize:function(e,t){var r,i,a;s.isPlainObject(e)?(r=e.resolution,i=e.insert,a=e.raster):(r=e,i=t),a||(a=new E(w.NO_INSERT));var o=this.getStrokeBounds(),l=(r||this.getView().getResolution())/72,u=o.getTopLeft().floor(),c=o.getBottomRight().ceil(),h=new g(c.subtract(u)),d=h.multiply(l);if(a.setSize(d,!0),!d.isZero()){var f=a.getContext(!0),p=(new y).scale(l).translate(u.negate());f.save(),p.applyToContext(f),this.draw(f,new s({matrices:[p]})),f.restore()}return a._matrix.set((new y).translate(u.add(h.divide(2))).scale(1/l)),(i===n||i)&&a.insertAbove(this),a},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(f.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new B.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof w&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var e=arguments;return this._hitTest(f.read(e),M.getOptions(e))}function t(){var e=arguments,t=f.read(e),n=M.getOptions(e),r=[];return this._hitTest(t,new s({all:r},n)),r}function n(e,t,n,r){var i=this._children;if(i)for(var s=i.length-1;s>=0;s--){var a=i[s],o=a!==r&&a._hitTest(e,t,n);if(o&&!t.all)return o}return null}return x.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var r=this._matrix,i=n?n.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(t.tolerance,1e-12),o=t._tolerancePadding=new g(B._getStrokePadding(a,r._shiftless().invert()));if(!(e=r._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(e))return null;var l,u,c=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==s.hyphenate(this._class)||t.class&&!(this instanceof t.class)),h=t.match,d=this;function f(e){return e&&h&&!h(e)&&(e=null),e&&t.all&&t.all.push(e),e}function p(t,n){var r=n?l["get"+n]():d.getPosition();if(e.subtract(r).divide(o).length<=1)return new M(t,d,{name:n?s.hyphenate(n):t,point:r})}var m=t.position,v=t.center,_=t.bounds;if(c&&this._parent&&(m||v||_)){if((v||_)&&(l=this.getInternalBounds()),!(u=m&&p("position")||v&&p("center","Center"))&&_)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!u;b++)u=p("bounds",y[b]);u=f(u)}return u||(u=this._hitTestChildren(e,t,i)||c&&f(this._hitTestSelf(e,t,i,this.getStrokeScaling()?null:i._shiftless().invert()))||null),u&&u.point&&(u.point=r.transform(u.point)),u},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new M("fill",this)},matches:function(e,t){var n=typeof e;if("object"===n){for(var r in e)if(e.hasOwnProperty(r)&&!this.matches(r,e[r]))return!1;return!0}if("function"===n)return e(this);if("match"===e)return t(this);var i=/^(empty|editable)$/.test(e)?this["is"+s.capitalize(e)]():"type"===e?s.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;i=this._class}if("function"==typeof t)return!!t(i);if(t){if(t.test)return t.test(i);if(s.isPlainObject(t))return function e(t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],a=n[r];if(s.isPlainObject(i)&&s.isPlainObject(a)){if(!e(i,a))return!1}else if(!s.equals(i,a))return!1}return!0}(t,i)}return s.equals(i,t)},getItems:function(e){return w._getItems(this,e,this._matrix)},getItem:function(e){return w._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,i,a){if(!i){var o="object"==typeof n&&n,l=o&&o.overlapping,u=o&&o.inside,c=(b=l||u)&&v.read([b]);i={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!l,rect:c,path:l&&new B.Rectangle({rectangle:c,insert:!1})},o&&(n=s.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=t._children,d=i.items;r=(c=i.rect)&&(r||new y);for(var f=0,p=h&&h.length;f<p;f++){var g=h[f],m=r&&r.appended(g._matrix),_=!0;if(c){var b=g.getBounds(m);if(!c.intersects(b))continue;c.contains(b)||i.overlapping&&(b.contains(c)||i.path.intersects(g,m))||(_=!1)}if(_&&g.matches(n)&&(d.push(g),a)||(!1!==i.recursive&&e(g,n,m,i,a),a&&d.length>0))break}return d}}},{importJSON:function(e){var t=s.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(n,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){for(var r={},i=(t=s.slice(t)).length-1;i>=0;i--){var a=(c=t[i])&&c._id;!c||r[a]?t.splice(i,1):(c._remove(!1,!0),r[a]=!0)}s.splice(n,t,e,0);for(var o=this._project,l=o._changes,u=(i=0,t.length);i<u;i++){var c,h=(c=t[i])._name;c._parent=this,c._setProject(o,!0),h&&c.setName(h),l&&c._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),r=e!==this&&n?this:null;return r&&(r._remove(!1,!0),n._insertItem(e._index+t,r)),r},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(n,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,i=n[r],s=i?i.indexOf(this):-1;-1!==s&&(t[r]==this&&delete t[r],i.splice(s,1),i.length?t[r]=i[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,i=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(n._children,null,i,1)),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=s.pick(t,this._children.length);for(var n=s.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var r=0;r<n;r++)if(!t[r].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do{t.unshift(e)}while(e=e._parent);return t}for(var n=t(this),r=t(e),i=0,s=Math.min(n.length,r.length);i<s;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},s.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?s:f).read(n),i=f.read(n,0,{readNull:!0});return this.transform((new y)[e](r,i||this.getPosition(!0)))}},{translate:function(){var e=new y;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var r=this._matrix,i=e&&!e.isIdentity(),s=n&&this._canApplyMatrix||this._applyMatrix&&(i||!r.isIdentity()||t&&this._children);if(!i&&!s)return this;if(i){!e.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(e,!0);var a=this._style,o=a.getFillColor(!0),l=a.getStrokeColor(!0);o&&o.transform(e),l&&l.transform(e)}if(s&&(s=this._transformContent(r,t,n))){var u=this._pivot;u&&r._transformPoint(u,u,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(i||s)&&this._changed(25);var d=i&&c&&e.decompose();if(d&&d.skewing.isZero()&&d.rotation%90===0){for(var f in c){var p=c[f];if(p.nonscaling)delete c[f];else if(s||!p.internal){var g=p.rect;e._transformBounds(g,g)}}this._bounds=c;var m=c[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else i&&h&&this._pivot&&(this._position=e._transformPoint(h,h));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var i=0,s=r.length;i<s;i++)r[i].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(f.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(f.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(f.read(arguments))},localToParent:function(){return this._matrix._transformPoint(f.read(arguments))},fitBounds:function(e,t){e=v.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,s=(t?r>i:r<i)?e.width/n.width:e.height/n.height,a=new v(new f,new g(n.width*s,n.height*s));a.setCenter(e.getCenter()),this.setBounds(a)}}),{_setStyles:function(e,t,n){var r=this._style,i=this._matrix;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e,i)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e,i),e.lineWidth=r.getStrokeWidth();var s=r.getStrokeJoin(),a=r.getStrokeCap(),o=r.getMiterLimit();if(s&&(e.lineJoin=s),a&&(e.lineCap=a),o&&(e.miterLimit=o),oe.support.nativeDash){var l=r.getDashArray(),u=r.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=u):(e.mozDash=l,e.mozDashOffset=u))}}if(r.hasShadow()){var c=t.pixelRatio||1,h=n._shiftless().prepend((new y).scale(c,c)),d=h.transform(new f(r.getShadowBlur(),0)),p=h.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=d.getLength(),e.shadowOffsetX=p.x,e.shadowOffsetY=p.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var r=t.matrices,i=t.viewMatrix,s=this._matrix,a=r[r.length-1].appended(s);if(a.isInvertible()){i=i?i.appended(a):a,r.push(a),t.updateMatrix&&(this._globalMatrix=a);var o,l,u,c=this._blendMode,d=h.clamp(this._opacity,0,1),f="normal"===c,p=ie.nativeModes[c],g=f&&1===d||t.dontStart||t.clip||(p||f&&d<1)&&this._canComposite(),m=t.pixelRatio||1;if(!g){var v=this.getStrokeBounds(i);if(!v.width||!v.height)return void r.pop();u=t.offset,l=t.offset=v.getTopLeft().floor(),o=e,e=re.getContext(v.getSize().ceil().add(1).multiply(m)),1!==m&&e.scale(m,m)}e.save();var _=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&i,y=!g&&t.clipItem,b=!_||y;if(g?(e.globalAlpha=d,p&&(e.globalCompositeOperation=c)):b&&e.translate(-l.x,-l.y),b&&(g?s:i).applyToContext(e),y&&t.clipItem.draw(e,t.extend({clip:!0})),_){e.setTransform(m,0,0,m,0,0);var x=t.offset;x&&e.translate(-x.x,-x.y)}this._draw(e,t,i,_),e.restore(),r.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),g||(ie.process(c,e,o,d,l.subtract(u).multiply(m)),re.release(e),t.offset=u)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof N)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,i){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,l=4&s;if(this._drawSelected||(a=!1),(a||o||l)&&this._isUpdated(i)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),d=n/2;if(e.strokeStyle=e.fillStyle=c?c.toCanvasStyle(e):"#009dec",a&&this._drawSelected(e,h,r),l){var f=this.getPosition(!0),p=this._parent,g=p?p.localToGlobal(f):f,m=g.x,v=g.y;e.beginPath(),e.arc(m,v,d,0,2*Math.PI,!0),e.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],y=d,b=n+1,x=0;x<4;x++){var w=_[x],S=w[0],C=w[1];e.moveTo(m+S*y,v+C*y),e.lineTo(m+S*b,v+C*b),e.stroke()}}if(o){var D=h._transformCorners(this.getInternalBounds());for(e.beginPath(),x=0;x<8;x++)e[x?"lineTo":"moveTo"](D[x],D[++x]);for(e.closePath(),e.stroke(),x=0;x<8;x++)e.fillRect(D[x]-d,D[++x]-d,n,n)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],function(e){this["removeOn"+s.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var r=n&&n.easing,i=n&&n.start,s=null!=n&&("number"==typeof n?n:n.duration),a=new te(this,e,t,s,r,i);return s&&this.on("frame",function e(t){a._handleFrame(1e3*t.time),a.running||this.off("frame",e)}),a},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),S=w.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),2050&t&&(this._clipItem=n)},_getClipItem:function(){var e=this._clipItem;if(e===n){e=null;for(var t=this._children,r=0,i=t.length;r<i;r++)if(t[r]._clipMask){e=t[r];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(t),s.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var i=this._getClipItem();return(!i||i.contains(t))&&e.base.call(this,t,n,r,i)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var i=this._children,s=0,a=i.length;s<a;s++){var o=i[s];o!==r&&o.draw(e,t)}}}),C=S.extend({_class:"Layer",initialize:function(){S.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),D=w.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&s.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new m(e.width,e.height,this,"setSize")},setSize:function(){var e=g.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;"rectangle"===t?this._radius.set(g.min(this._radius,e.divide(2).abs())):"circle"===t?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,r/2),this._size._set(n,r),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new m(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=g.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(n=g.max(this._size,e.multiply(2)),this._size.set(n)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(B[s.capitalize(this._type)])({center:new f,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),oe.settings.applyMatrix&&t.setApplyMatrix(!0),(e===n||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,r){var i=this._style,s=i.hasFill(),a=i.hasStroke(),o=t.dontFinish||t.clip,l=!r;if(s||a||o){var u=this._type,c=this._radius,h="circle"===u;if(t.dontStart||e.beginPath(),l&&h)e.arc(0,0,c,0,2*Math.PI,!0);else{var d=h?c:c.width,f=h?c:c.height,p=this._size,g=p.width,m=p.height;if(l&&"rectangle"===u&&0===d&&0===f)e.rect(-g/2,-m/2,g,m);else{var v=g/2,_=m/2,y=.44771525016920644,b=d*y,x=f*y,w=[-v,-_+f,-v,-_+x,-v+b,-_,-v+d,-_,v-d,-_,v-b,-_,v,-_+x,v,-_+f,v,_-f,v,_-x,v-b,_,v-d,_,-v+d,_,-v+b,_,-v,_-x,-v,_-f];r&&r.transform(w,w,32),e.moveTo(w[0],w[1]),e.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==d&&e.lineTo(w[8],w[9]),e.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),_!==f&&e.lineTo(w[16],w[17]),e.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==d&&e.lineTo(w[24],w[25]),e.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}e.closePath()}!o&&(s||a)&&(this._setStyles(e,t,n),s&&(e.fill(i.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),a&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new v(this._size).setCenter(0,0),r=this._style,i=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),i?n.expand(B._getStrokePadding(i,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var r=e._radius;if(!r.isZero())for(var i=e._size.divide(2),s=1;s<=4;s++){var a=new f(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(i),l=o.subtract(a.multiply(r));if(new v(n?o.add(a.multiply(n)):o,l).contains(t))return{point:l,quadrant:s}}}function t(e,t,n,r){var i=e.divide(t);return(!r||i.isInQuadrant(r))&&i.subtract(i.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var r=e(this,n);return r?n.subtract(r.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,s,a){var o=!1,l=this._style,u=i.stroke&&l.hasStroke(),c=i.fill&&l.hasFill();if(u||c){var h=this._type,d=this._radius,f=u?l.getStrokeWidth()/2:0,p=i._tolerancePadding.add(B._getStrokePadding(f,!l.getStrokeScaling()&&a));if("rectangle"===h){var g=p.multiply(2),m=e(this,r,g);if(m)o=t(r.subtract(m.point),d,p,m.quadrant);else{var _=new v(this._size).setCenter(0,0),y=_.expand(g),b=_.expand(g.negate());o=y._containsPoint(r)&&!b._containsPoint(r)}}else o=t(r,d,p)}return o?new M(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,r,i){var a=s.create(D.prototype);return a._type=e,a._size=n,a._radius=r,a._initialize(s.getNamed(i),t),a}return{Circle:function(){var t=arguments,n=f.readNamed(t,"center"),r=s.readNamed(t,"radius");return e("circle",n,new g(2*r),r,t)},Rectangle:function(){var t=arguments,n=v.readNamed(t,"rectangle"),r=g.min(g.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),r,t)},Ellipse:function(){var t=arguments,n=D._readEllipse(t),r=n.radius;return e("ellipse",n.center,r.multiply(2),r,t)},_readEllipse:function(e){var t,n;if(s.hasNamed(e,"radius"))t=f.readNamed(e,"center"),n=g.readNamed(e,"radius");else{var r=v.readNamed(e,"rectangle");t=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),E=w.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==n&&f.read(arguments))){var r,s=typeof e,a="string"===s?i.getElementById(e):"object"===s?e:null;if(a&&a!==w.NO_INSERT)if(a.getContext||null!=a.naturalHeight)r=a;else if(a){var o=g.read(arguments);o.isZero()||(r=re.getCanvas(o))}r?this.setImage(r):this.setSource(e)}this._size||(this._size=new g,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=re.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new m(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var n=g.read(arguments);if(n.equals(this._size))t&&this.clear();else if(n.width>0&&n.height>0){var r=!t&&this.getElement();this._setImage(re.getCanvas(n)),r&&this.getContext(!0).drawImage(r,0,0,n.width,n.height)}else this._canvas&&re.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new f(0,0).transform(e),n=new f(1,0).transform(e).subtract(t),r=new f(0,1).transform(e).subtract(t);return new g(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(e){var n=t.getView(),r=e&&e.type||"load";n&&t.responds(r)&&(oe=n._scope,t.emit(r,new K(e)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&W.add(e,{load:function(r){t._setImage(e),n(r)},error:n})},_setImage:function(e){this._canvas&&re.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new g(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=re.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){re.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var n=new t.Image,r=this._crossOrigin;r&&(n.crossOrigin=r),e&&(n.src=e),this.setImage(n)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing="string"==typeof e?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=v.read(arguments),t=re.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=v.read(arguments),t=new E(w.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=f.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof P?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new v(e):"x"in e&&(t=new v(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=Math.min(t.width,32),i=Math.min(t.height,32),a=E._sampleContext;a?a.clearRect(0,0,33,33):a=E._sampleContext=re.getContext(new g(32)),a.save();var o=(new y).scale(r/t.width,i/t.height).translate(-t.x,-t.y);o.applyToContext(a),n&&n.draw(a,new s({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var l=this.getElement(),u=this._size;l&&a.drawImage(l,-u.width/2,-u.height/2),a.restore();for(var c=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(i)).data,h=[0,0,0],d=0,f=0,p=c.length;f<p;f+=4){var m=c[f+3];d+=m,m/=255,h[0]+=c[f]*m,h[1]+=c[f+1]*m,h[2]+=c[f+2]*m}for(f=0;f<3;f++)h[f]/=d;return d?V.read(h):null},getPixel:function(){var e=f.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new V("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=f.read(e),n=V.read(e),r=n._convert("rgb"),i=n._alpha,s=this.getContext(!0),a=s.createImageData(1,1),o=a.data;o[0]=255*r[0],o[1]=255*r[1],o[2]=255*r[2],o[3]=null!=i?255*i:255,s.putImageData(a,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=g.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=v.read(arguments);return e.isEmpty()&&(e=new v(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=f.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var n=new v(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new M("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var r=this.getElement();if(r&&r.width>0&&r.height>0){e.globalAlpha=h.clamp(this._opacity,0,1),this._setStyles(e,t,n);var i=this._smoothing,s="off"===i;Y.setPrefixed(e,s?"imageSmoothingEnabled":"imageSmoothingQuality",!s&&i),e.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),A=w.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==n&&f.read(arguments,1))||this.setDefinition(e instanceof k?e:new k(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var r=t.extend({all:!1}),i=this._definition._item._hitTest(e,r,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),k=s.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=d.get(),this.project=oe.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,function(){return s.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){8&e&&w._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new f),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new A(this,e)},clone:function(){return new k(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),M=s.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&s.read(e);return new s({type:null,tolerance:oe.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),T=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,r,i,s,a){var o,l,u,c,h=arguments.length;h>0&&(null==e||"object"==typeof e?1===h&&e&&"point"in e?(o=e.point,l=e.handleIn,u=e.handleOut,c=e.selection):(o=e,l=t,u=r,c=i):(o=[e,t],l=r!==n?[r,i]:null,u=s!==n?[s,a]:null)),new I(o,this,"_point"),new I(l,this,"_handleIn"),new I(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(e,t){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),s.serialize(i,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,r=t._curves,i=this._index;r&&((!e||e===this._point||e===this._handleIn)&&(n=i>0?r[i-1]:t._closed?r[r.length-1]:null)&&n._changed(),(!e||e===this._point||e===this._handleOut)&&(n=r[i])&&n._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(f.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(f.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(f.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new L(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,r){var i=e||{},s=i.type,a=i.factor,o=this.getPrevious(),l=this.getNext(),u=(o||this)._point,c=this._point,h=(l||this)._point,d=u.getDistance(c),p=c.getDistance(h);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&l){var g=u.subtract(h),m=a===n?.4:a,v=m*d/(d+p);t||this.setHandleIn(g.multiply(v)),r||this.setHandleOut(g.multiply(v-m))}}else{var _=a===n?.5:a,y=Math.pow(d,_),b=y*y,x=Math.pow(p,_),w=x*x;if(!t&&o){var S=2*w+3*x*y+b,C=3*x*(x+y);this.setHandleIn(0!==C?new f((w*u._x+S*c._x-b*h._x)/C-c._x,(w*u._y+S*c._y-b*h._y)/C-c._y):new f)}!r&&l&&(S=2*b+3*y*x+w,C=3*y*(y+x),this.setHandleOut(0!==C?new f((b*h._x+S*c._x-w*u._x)/C-c._x,(b*h._y+S*c._y-w*u._y)/C-c._y):new f))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new T(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new T(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,i=n,s=e._point,a=t._point,o=e._handleIn,l=t._handleIn,u=t._handleOut,c=e._handleOut;this._point._set(r*s._x+i*a._x,r*s._y+i*a._y,!0),this._handleIn._set(r*o._x+i*l._x,r*o._y+i*l._y,!0),this._handleOut._set(r*c._x+i*u._x,r*c._y+i*u._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,a=r._x,o=r._y,l=2;return t[0]=a,t[1]=o,i&&(t[l++]=i._x+a,t[l++]=i._y+o),s&&(t[l++]=s._x+a,t[l++]=s._y+o),e&&(e._transformCoordinates(t,t,l/2),a=t[0],o=t[1],n?(r._x=a,r._y=o,l=2,i&&(i._x=t[l++]-a,i._y=t[l++]-o),s&&(s._x=t[l++]-a,s._y=t[l++]-o)):(i||(t[l++]=a,t[l++]=o),s||(t[l++]=a,t[l++]=o))),t}}),I=f.extend({initialize:function(e,t,r){var i,s,a;if(e)if((i=e[0])!==n)s=e[1];else{var o=e;(i=o.x)===n&&(i=(o=f.read(arguments)).x),s=o.y,a=o.selected}else i=s=0;this._x=i,this._y=s,this._owner=t,t[r]=this,a&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=h.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),O=s.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,r,i,s,a,o){var l,u,c,h,d,f,p=arguments.length;3===p?(this._path=e,l=t,u=n):p?1===p?"segment1"in e?(l=new T(e.segment1),u=new T(e.segment2)):"point1"in e?(c=e.point1,d=e.handle1,f=e.handle2,h=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],h=[e[6],e[7]],d=[e[2]-e[0],e[3]-e[1]],f=[e[4]-e[6],e[5]-e[7]]):2===p?(l=new T(e),u=new T(t)):4===p?(c=e,d=t,f=n,h=r):8===p&&(c=[e,t],h=[a,o],d=[n-e,r-t],f=[i-a,s-o]):(l=new T,u=new T),this._segment1=l||new T(c,null,d),this._segment2=u||new T(h,f,null)},_serialize:function(e,t){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=n},clone:function(){return new O(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return O.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(f.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(f.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(f.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(f.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return O.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new f(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=O.getLength(this.getValues(),0,1)),this._length},getArea:function(){return O.getArea(this.getValues())},getLine:function(){return new b(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new O(O.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return O.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=null;if(e>=1e-8&&e<=.99999999){var r=O.subdivide(this.getValues(),e),i=r[0],s=r[1],a=t||this.hasHandles(),o=this._segment1,l=this._segment2,u=this._path;a&&(o._handleOut._set(i[2]-i[0],i[3]-i[1]),l._handleIn._set(s[4]-s[6],s[5]-s[7]));var c=i[6],h=i[7],d=new T(new f(c,h),a&&new f(i[4]-c,i[5]-h),a&&new f(s[2]-c,s[3]-h));u?(u.insert(o._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new O(d,l))}return n},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===n?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===n?.5:t?e:this.getTimeAt(e))},reversed:function(){return new O(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,r){var i=e._point,s=e._handleOut,a=t._handleIn,o=t._point,l=i.x,u=i.y,c=o.x,h=o.y,d=r?[l,u,l,u,c,h,c,h]:[l,u,l+s._x,u+s._y,c+a._x,h+a._y,c,h];return n&&n._transformCoordinates(d,d,4),d},subdivide:function(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7];t===n&&(t=.5);var h=1-t,d=h*r+t*s,f=h*i+t*a,p=h*s+t*o,g=h*a+t*l,m=h*o+t*u,v=h*l+t*c,_=h*d+t*p,y=h*f+t*g,b=h*p+t*m,x=h*g+t*v,w=h*_+t*b,S=h*y+t*x;return[[r,i,d,f,_,y,w,S],[w,S,b,x,m,v,u,c]]},getMonoCurves:function(e,t){var n=[],r=t?0:1,i=e[r+0],s=e[r+2],a=e[r+4],o=e[r+6];if(i>=s==s>=a&&s>=a==a>=o||O.isStraight(e))n.push(e);else{var l=3*(s-a)-i+o,u=2*(i+a)-4*s,c=s-i,d=[],f=h.solveQuadratic(l,u,c,d,1e-8,.99999999);if(f){d.sort();var p=d[0],g=O.subdivide(e,p);n.push(g[0]),f>1&&(p=(d[1]-p)/(1-p),g=O.subdivide(g[1],p),n.push(g[0])),n.push(g[1])}else n.push(e)}return n},solveCubic:function(e,t,n,r,i,s){var a=e[t],o=e[t+2],l=e[t+4],u=e[t+6],c=0;if(!(a<n&&u<n&&o<n&&l<n||a>n&&u>n&&o>n&&l>n)){var d=3*(o-a),f=3*(l-o)-d,p=u-a-d-f;c=h.solveCubic(p,f,d,a-n,r,i,s)}return c},getTimeOf:function(e,t){var n=new f(e[0],e[1]),r=new f(e[6],e[7]),i=1e-7;if(null===(t.isClose(n,1e-12)?0:t.isClose(r,1e-12)?1:null))for(var s=[t.x,t.y],a=[],o=0;o<2;o++)for(var l=O.solveCubic(e,o,s[o],a,0,1),u=0;u<l;u++){var c=a[u];if(t.isClose(O.getPoint(e,c),i))return c}return t.isClose(n,i)?0:t.isClose(r,i)?1:null},getNearestTime:function(e,t){if(O.isStraight(e)){var n=e[0],r=e[1],i=e[6]-n,s=e[7]-r,a=i*i+s*s;if(0===a)return 0;var o=((t.x-n)*i+(t.y-r)*s)/a;return o<1e-12?0:o>.999999999999?1:O.getTimeOf(e,new f(n+o*i,r+o*s))}var l=1/0,u=0;function c(n){if(n>=0&&n<=1){var r=t.getDistance(O.getPoint(e,n),!0);if(r<l)return l=r,u=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var d=.005;d>1e-8;)!c(u-d)&&!c(u+d)&&(d/=2);return u},getPart:function(e,t,n){var r=t>n;if(r){var i=t;t=n,n=i}return t>0&&(e=O.subdivide(e,t)[1]),n<1&&(e=O.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=3*i-2*n-l,h=3*s-2*r-u,d=3*a-2*l-n,f=3*o-2*u-r;return Math.max(c*c,d*d)+Math.max(h*h,f*f)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7];return 3*((l-n)*(r+s)-(o-t)*(i+a)+i*(t-s)-r*(n-a)+l*(s+t/3)-o*(a+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],i=0;i<2;i++)O._addBounds(e[i],e[i+2],e[i+4],e[i+6],i,0,t,n,r);return new v(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,i,s,a,o,l){function u(e,t){var n=e-t,r=e+t;n<a[i]&&(a[i]=n),r>o[i]&&(o[i]=r)}s/=2;var c=a[i]+s,d=o[i]-s;if(e<c||t<c||n<c||r<c||e>d||t>d||n>d||r>d)if(t<e!=t<r&&n<e!=n<r)u(e,0),u(r,0);else{var f=3*(t-n)-e+r,p=2*(e+n)-4*t,g=t-e,m=h.solveQuadratic(f,p,g,l);u(r,0);for(var v=0;v<m;v++){var _=l[v],y=1-_;1e-8<=_&&_<=.99999999&&u(y*y*y*e+3*y*y*_*t+3*y*_*_*n+_*_*_*r,s)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=B[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),s.each({isStraight:function(e,t,n,r){if(t.isZero()&&n.isZero())return!0;var i=r.subtract(e);if(i.isZero())return!1;if(i.isCollinear(t)&&i.isCollinear(n)){var s=new b(e,r);if(s.getDistance(e.add(t))<1e-7&&s.getDistance(r.add(n))<1e-7){var a=i.dot(i),o=i.dot(t)/a,l=i.dot(n)/a;return o>=0&&o<=1&&l<=0&&l>=-1}}return!1},isLinear:function(e,t,n,r){var i=r.subtract(e).divide(3);return t.equals(i)&&n.negate().equals(i)}},function(e,t){this[t]=function(t){var n=this._segment1,r=this._segment2;return e(n._point,n._handleOut,r._handleIn,r._point,t)},this.statics[t]=function(t,n){var r=t[0],i=t[1],s=t[6],a=t[7];return e(new f(r,i),new f(t[2]-r,t[3]-i),new f(t[4]-s,t[5]-a),new f(s,a),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new L(this,e):null},getTimeAt:function(e,t){return O.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=f.read(arguments);return e.isZero()?[]:O.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(f.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return O.getTimeOf(this.getValues(),f.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=f.read(arguments),t=this.getValues(),n=O.getNearestTime(t,e),r=O.getPoint(t,n);return new L(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(e,function(e){this[e+"At"]=function(t,n){var r=this.getValues();return O[e](r,n?t:O.getTimeAt(r,t))},this[e+"AtTime"]=function(t){return O[e](this.getValues(),t)}},{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=9*(r-s)+3*(o-t),c=6*(t+s)-12*r,h=3*(r-t),d=9*(i-a)+3*(l-n),f=6*(n+a)-12*i,p=3*(i-n);return function(e){var t=(u*e+c)*e+h,n=(d*e+f)*e+p;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function r(e,t,n,r){if(null==t||t<0||t>1)return null;var i=e[0],s=e[1],a=e[2],o=e[3],l=e[4],u=e[5],c=e[6],d=e[7],p=h.isZero;p(a-i)&&p(o-s)&&(a=i,o=s),p(l-c)&&p(u-d)&&(l=c,u=d);var g,m,v=3*(a-i),_=3*(l-a)-v,y=c-i-v-_,b=3*(o-s),x=3*(u-o)-b,w=d-s-b-x;if(0===n)g=0===t?i:1===t?c:((y*t+_)*t+v)*t+i,m=0===t?s:1===t?d:((w*t+x)*t+b)*t+s;else{var S=1e-8,C=1-S;if(t<S?(g=v,m=b):t>C?(g=3*(c-l),m=3*(d-u)):(g=(3*y*t+2*_)*t+v,m=(3*w*t+2*x)*t+b),r){0===g&&0===m&&(t<S||t>C)&&(g=l-a,m=u-o);var D=Math.sqrt(g*g+m*m);D&&(g/=D,m/=D)}if(3===n){l=6*y*t+2*_,u=6*w*t+2*x;var E=Math.pow(g*g+m*m,1.5);g=0!==E?(g*u-m*l)/E:0,m=0}}return 2===n?new f(m,-g):new f(g,m)}return{statics:{classify:function(e){var t=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=i*(r-u)+s*(l-t)+t*u-r*l,d=3*(a*(s-r)+o*(t-i)+i*r-s*t),f=d-c,p=f-c+(t*(u-o)+r*(a-l)+l*o-u*a),g=Math.sqrt(p*p+f*f+d*d),m=0!==g?1/g:0,v=h.isZero,_="serpentine";function y(e,t,r){var i=t!==n,s=i&&t>0&&t<1,a=i&&r>0&&r<1;return i&&(!(s||a)||"loop"===e&&!(s&&a))&&(e="arch",s=a=!1),{type:e,roots:s||a?s&&a?t<r?[t,r]:[r,t]:[s?t:r]:null}}if(f*=m,d*=m,v(p*=m))return v(f)?y(v(d)?"line":"quadratic"):y(_,d/(3*f));var b=3*f*f-4*p*d;if(v(b))return y("cusp",f/(2*p));var x=b>0?Math.sqrt(b/3):Math.sqrt(-b),w=2*p;return y(b>0?_:"loop",(f+x)/w,(f-x)/w)},getLength:function(r,i,s,a){if(i===n&&(i=0),s===n&&(s=1),O.isStraight(r)){var o=r;s<1&&(o=O.subdivide(o,s)[0],i/=s),i>0&&(o=O.subdivide(o,i)[1]);var l=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(l*l+u*u)}return h.integrate(a||e(r),i,s,t(i,s))},getTimeAt:function(r,i,s){if(s===n&&(s=i<0?1:0),0===i)return s;var a=Math.abs,o=i>0,l=o?s:0,u=o?1:s,c=e(r),d=O.getLength(r,l,u,c),f=a(i)-d;if(a(f)<1e-12)return o?u:l;if(f>1e-12)return null;var p=i/d,g=0;return h.findRoot(function(e){return g+=h.integrate(c,s,e,t(s,e)),s=e,g-i},c,s+p,l,u,32,1e-12)},getPoint:function(e,t){return r(e,t,0,!1)},getTangent:function(e,t){return r(e,t,1,!0)},getWeightedTangent:function(e,t){return r(e,t,1,!1)},getNormal:function(e,t){return r(e,t,2,!0)},getWeightedNormal:function(e,t){return r(e,t,2,!1)},getCurvature:function(e,t){return r(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=3*r-t-3*s+e[6],l=3*t-6*r+3*s,u=-3*t+3*r,c=3*i-n-3*a+e[7],d=3*n-6*i+3*a,f=-3*n+3*i,p=[];return h.solveCubic(9*(o*o+c*c),9*(o*l+d*c),2*(l*l+d*d)+3*(u*o+f*c),u*l+d*f,p,1e-8,.99999999),p.sort()}}}},new function(){function e(e,t,n,r,i,s,a){var o=!a&&n.getPrevious()===i,l=!a&&n!==i&&n.getNext()===i,u=1e-8,c=1-u;if(null!==r&&r>=(o?u:0)&&r<=(l?c:1)&&null!==s&&s>=(l?u:0)&&s<=(o?c:1)){var h=new L(n,r,null,a),d=new L(i,s,null,a);h._intersection=d,d._intersection=h,(!t||t(h))&&L.insert(e,h,!0)}}function t(r,i,s,a,o,l,u,c,h,d,f,p,g){if(++h>=4096||++c>=40)return h;var m,v,_=i[0],y=i[1],x=i[6],w=i[7],S=b.getSignedDistance,C=S(_,y,x,w,i[2],i[3]),D=S(_,y,x,w,i[4],i[5]),E=C*D>0?3/4:4/9,A=E*Math.min(0,C,D),k=E*Math.max(0,C,D),M=S(_,y,x,w,r[0],r[1]),T=S(_,y,x,w,r[2],r[3]),I=S(_,y,x,w,r[4],r[5]),L=S(_,y,x,w,r[6],r[7]),P=function(e,t,n,r){var i,s=[0,e],a=[1/3,t],o=[2/3,n],l=[1,r],u=t-(2*e+r)/3,c=n-(e+2*r)/3;if(u*c<0)i=[[s,a,l],[s,o,l]];else{var h=u/c;i=[h>=2?[s,a,l]:h<=.5?[s,o,l]:[s,a,o,l],[s,l]]}return(u||c)<0?i.reverse():i}(M,T,I,L),B=P[0],N=P[1];if(0===C&&0===D&&0===M&&0===T&&0===I&&0===L||null==(m=n(B,N,A,k))||null==(v=n(B.reverse(),N.reverse(),A,k)))return h;var R=d+(f-d)*m,F=d+(f-d)*v;if(Math.max(g-p,F-R)<1e-9){var z=(R+F)/2,j=(p+g)/2;e(o,l,u?a:s,u?j:z,u?s:a,u?z:j)}else{r=O.getPart(r,m,v);var V=g-p;if(v-m>.8)if(F-R>V)z=(R+F)/2,h=t(i,(U=O.subdivide(r,.5))[0],a,s,o,l,!u,c,h,p,g,R,z),h=t(i,U[1],a,s,o,l,!u,c,h,p,g,z,F);else{var U;j=(p+g)/2,h=t((U=O.subdivide(i,.5))[0],r,a,s,o,l,!u,c,h,p,j,R,F),h=t(U[1],r,a,s,o,l,!u,c,h,j,g,R,F)}else h=0===V||V>=1e-9?t(i,r,a,s,o,l,!u,c,h,p,g,R,F):t(r,i,s,a,o,l,u,c,h,R,F,p,g)}return h}function n(e,t,n,i){return e[0][1]<n?r(e,!0,n):t[0][1]>i?r(t,!1,i):e[0][0]}function r(e,t,n){for(var r=e[0][0],i=e[0][1],s=1,a=e.length;s<a;s++){var o=e[s][0],l=e[s][1];if(t?l>=n:l<=n)return l===n?o:r+(n-i)*(o-r)/(l-i);r=o,i=l}return null}function i(e,t,n,r,i){var s=h.isZero;if(s(r)&&s(i)){var a=O.getTimeOf(e,new f(t,n));return null===a?[]:[a]}for(var o=Math.atan2(-i,r),l=Math.sin(o),u=Math.cos(o),c=[],d=[],p=0;p<8;p+=2){var g=e[p]-t,m=e[p+1]-n;c.push(g*u-m*l,g*l+m*u)}return O.solveCubic(c,1,0,d,0,1),d}function s(t,n,r,s,a,o,l){for(var u=n[0],c=n[1],h=i(t,u,c,n[6]-u,n[7]-c),d=0,f=h.length;d<f;d++){var p=h[d],g=O.getPoint(t,p),m=O.getTimeOf(n,g);null!==m&&e(a,o,l?s:r,l?m:p,l?r:s,l?p:m)}}function a(t,n,r,i,s,a){var o=b.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);o&&e(s,a,r,O.getTimeOf(t,o),i,O.getTimeOf(n,o))}function o(n,r,i,o,l,u){var h=1e-12,d=Math.min,p=Math.max;if(p(n[0],n[2],n[4],n[6])+h>d(r[0],r[2],r[4],r[6])&&d(n[0],n[2],n[4],n[6])-h<p(r[0],r[2],r[4],r[6])&&p(n[1],n[3],n[5],n[7])+h>d(r[1],r[3],r[5],r[7])&&d(n[1],n[3],n[5],n[7])-h<p(r[1],r[3],r[5],r[7])){var g=c(n,r);if(g)for(var m=0;m<2;m++){var v=g[m];e(l,u,i,v[0],o,v[1],!0)}else{var _=O.isStraight(n),y=O.isStraight(r),b=_&&y,x=_&&!y,w=l.length;if((b?a:_||y?s:t)(x?r:n,x?n:r,x?o:i,x?i:o,l,u,x,0,0,0,1,0,1),!b||l.length===w)for(m=0;m<4;m++){var S=m>>1,C=1&m,D=6*S,E=6*C,A=new f(n[D],n[D+1]),k=new f(r[E],r[E+1]);A.isClose(k,h)&&e(l,u,i,S,o,C)}}}return l}function l(t,n,r,i){var s=O.classify(t);if("loop"===s.type){var a=s.roots;e(r,i,n,a[0],n,a[1])}return r}function c(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var r=Math.abs,i=b.getDistance,s=1e-7,a=O.isStraight(e),o=O.isStraight(t),l=a&&o,u=n(e)<n(t),c=u?t:e,h=u?e:t,d=c[0],p=c[1],g=c[6]-d,m=c[7]-p;if(i(d,p,g,m,h[0],h[1],!0)<s&&i(d,p,g,m,h[6],h[7],!0)<s)!l&&i(d,p,g,m,c[2],c[3],!0)<s&&i(d,p,g,m,c[4],c[5],!0)<s&&i(d,p,g,m,h[2],h[3],!0)<s&&i(d,p,g,m,h[4],h[5],!0)<s&&(a=o=l=!0);else if(l)return null;if(a^o)return null;for(var v=[e,t],_=[],y=0;y<4&&_.length<2;y++){var x=1&y,w=1^x,S=y>>1,C=O.getTimeOf(v[x],new f(v[w][S?6:0],v[w][S?7:1]));if(null!=C){var D=x?[S,C]:[C,S];(!_.length||r(D[0]-_[0][0])>1e-8&&r(D[1]-_[0][1])>1e-8)&&_.push(D)}if(y>2&&!_.length)break}if(2!==_.length)_=null;else if(!l){var E=O.getPart(e,_[0][0],_[1][0]),A=O.getPart(t,_[0][1],_[1][1]);(r(A[2]-E[2])>s||r(A[3]-E[3])>s||r(A[4]-E[4])>s||r(A[5]-E[5])>s)&&(_=null)}return _}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?o(t,n,this,e,[]):l(t,this,[])},statics:{getOverlaps:c,getIntersections:function(e,t,n,r,i,s){var a=!t;a&&(t=e);for(var c=e.length,h=t.length,d=new Array(c),f=a?d:new Array(h),p=[],g=0;g<c;g++)d[g]=e[g].getValues(r);if(!a)for(g=0;g<h;g++)f[g]=t[g].getValues(i);for(var m=u.findCurveBoundsCollisions(d,f,1e-7),v=0;v<c;v++){var _=e[v],y=d[v];a&&l(y,_,p,n);var b=m[v];if(b)for(var x=0;x<b.length;x++){if(s&&p.length)return p;var w=b[x];if(!a||w>v){var S=t[w];o(y,f[w],_,S,p,n)}}}return p},getCurveLineIntersections:i,getTimesWithTangent:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=t.normalize(),d=c.x,f=c.y,p=3*l-9*a+9*i-3*n,g=3*u-9*o+9*s-3*r,m=6*a-12*i+6*n,v=6*o-12*s+6*r,_=3*i-3*n,y=3*s-3*r,b=2*p*f-2*g*d,x=[];if(Math.abs(b)<h.CURVETIME_EPSILON){if(0!=(b=p*v-g*m)){var w=-(p*y-g*_)/b;w>=0&&w<=1&&x.push(w)}}else{var S=(m*m-4*p*_)*f*f+(-2*m*v+4*g*_+4*p*y)*d*f+(v*v-4*g*y)*d*d,C=m*f-v*d;if(S>=0&&0!=b){var D=Math.sqrt(S),E=-(C+D)/b,A=(-C+D)/b;E>=0&&E<=1&&x.push(E),A>=0&&A<=1&&x.push(A)}}return x}}}}),L=s.extend({_class:"CurveLocation",initialize:function(e,t,n,r,i){if(t>=.99999999){var s=e.getNext();s&&(t=0,e=s)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function n(e){var n=e&&e.getCurve();if(n&&null!=(t._time=n.getTimeOf(t._point)))return t._setCurve(n),n}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var r=t.getCurves(),i=0;i<n;i++)e+=r[i].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof L){var r=this.getCurve(),i=e.getCurve(),s=r._path;if(s===i._path){var a=Math.abs,o=a(this.getOffset()-e.getOffset()),l=!t&&this._intersection,u=!t&&e._intersection;n=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=c.instance;t&&e.push("point: "+t);var r=this.getIndex();null!=r&&e.push("index: "+r);var i=this.getTime();return null!=i&&e.push("time: "+n.number(i)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),r=1e-8,i=1-r,s=t>=r&&t<=i,a=n>=r&&n<=i;if(s&&a)return!this.isTouching();var o=this.getCurve(),l=o&&t<r?o.getPrevious():o,u=e.getCurve(),c=u&&n<r?u.getPrevious():u;if(t>i&&(o=o.getNext()),n>i&&(u=u.getNext()),!l||!o||!c||!u)return!1;var h=[];function d(e,t){var n=e.getValues(),r=O.classify(n).roots||O.getPeaks(n),i=r.length,s=O.getLength(n,t&&i?r[i-1]:0,!t&&i?r[0]:1);h.push(i?s:s/32)}function f(e,t,n){return t<n?e>t&&e<n:e>t||e<n}s||(d(l,!0),d(o,!1)),a||(d(c,!0),d(u,!1));var p=this.getPoint(),g=Math.min.apply(Math,h),m=s?o.getTangentAtTime(t):o.getPointAt(g).subtract(p),v=s?m.negate():l.getPointAt(-g).subtract(p),_=a?u.getTangentAtTime(n):u.getPointAt(g).subtract(p),y=a?_.negate():c.getPointAt(-g).subtract(p),b=v.getAngle(),x=m.getAngle(),w=y.getAngle(),S=_.getAngle();return!!(s?f(b,w,S)^f(x,w,S)&&f(b,S,w)^f(x,S,w):f(w,b,x)^f(S,b,x)&&f(w,x,b)^f(S,x,b))},hasOverlap:function(){return!!this._overlap}},s.each(O._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}},{preserve:!0}),new function(){function e(e,t,n){var r=e.length,i=0,s=r-1;function a(n,i){for(var s=n+i;s>=-1&&s<=r;s+=i){var a=e[(s%r+r)%r];if(!t.getPoint().isClose(a.getPoint(),1e-7))break;if(t.equals(a))return a}return null}for(;i<=s;){var o,l=i+s>>>1,u=e[l];if(n&&(o=t.equals(u)?u:a(l,-1)||a(l,1)))return t._overlap&&(o._overlap=o._intersection._overlap=!0),o;var c=t.getPath(),h=u.getPath();(c!==h?c._id-h._id:t.getIndex()+t.getTime()-(u.getIndex()+u.getTime()))<0?s=l-1:i=l+1}return e.splice(i,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),P=w.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,r;if(s.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"==typeof e&&(t=e),n){var i=n[0];r=i&&Array.isArray(i[0])}else t&&(r=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(r?N:B)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t,n,r,i=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,a=new f,o=new f;function l(e,n){var r=+t[e];return s&&(r+=a[n]),r}function u(e){return new f(l(e,"x"),l(e+1,"y"))}this.clear();for(var c=0,h=i&&i.length;c<h;c++){var d=i[c],p=d[0],m=p.toLowerCase(),v=(t=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&t.length;switch(s=p===m,"z"===n&&!/[mz]/.test(m)&&this.moveTo(a),m){case"m":case"l":for(var _="m"===m,y=0;y<v;y+=2)this[_?"moveTo":"lineTo"](a=u(y)),_&&(o=a,_=!1);r=a;break;case"h":case"v":var b="h"===m?"x":"y";for(a=a.clone(),y=0;y<v;y++)a[b]=l(y,b),this.lineTo(a);r=a;break;case"c":for(y=0;y<v;y+=6)this.cubicCurveTo(u(y),r=u(y+2),a=u(y+4));break;case"s":for(y=0;y<v;y+=4)this.cubicCurveTo(/[cs]/.test(n)?a.multiply(2).subtract(r):a,r=u(y),a=u(y+2)),n=m;break;case"q":for(y=0;y<v;y+=4)this.quadraticCurveTo(r=u(y),a=u(y+2));break;case"t":for(y=0;y<v;y+=2)this.quadraticCurveTo(r=/[qt]/.test(n)?a.multiply(2).subtract(r):a,a=u(y)),n=m;break;case"a":for(y=0;y<v;y+=7)this.arcTo(a=u(y+5),new g(+t[y],+t[y+1]),+t[y+2],+t[y+4],+t[y+3]);break;case"z":this.closePath(1e-12),a=o}n=m}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,r){var i=this===e||!e,s=this._matrix._orNullIfIdentity(),a=i?s:(n||e._matrix)._orNullIfIdentity();return i||this.getBounds(s).intersects(e.getBounds(a),1e-12)?O.getIntersections(this.getCurves(),!i&&e.getCurves(),t,s,a,r):[]},getCrossings:function(e){return this.getIntersections(e,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var e=f.read(arguments),t=this.getCurves(),n=1/0,r=null,i=0,s=t.length;i<s;i++){var a=t[i].getNearestLocation(e);a._distance<n&&(n=a._distance,r=a)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,n){var r=!this._children,i=r?"_segments":"_children",s=e[i],a=t[i],o=this[i];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=o.length,u=a.length;if(l<u)for(var c=r?T:B,h=l;h<u;h++)this.add(new c);else l>u&&this[r?"removeSegments":"removeChildren"](u,l);for(h=0;h<u;h++)o[h].interpolate(s[h],a[h],n);r&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],r=e._children?e._children.slice():[e],i=n.length,s=r.length,a=[],o=0;t=!0;for(var l=u.findItemBoundsCollisions(n,r,h.GEOMETRIC_EPSILON),c=i-1;c>=0&&t;c--){var d=n[c];t=!1;var f=l[c];if(f)for(var p=f.length-1;p>=0&&!t;p--)d.compare(r[f[p]])&&(a[f[p]]||(a[f[p]]=!0,o++),t=!0)}t=t&&o===s}return t}}),B=P.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,r=Array.isArray(e)?"object"==typeof e[0]?e:t:!e||e.size!==n||e.x===n&&e.point===n?null:t;r&&r.length>0?this.setSegments(r):(this._curves=n,this._segmentSelection=0,!r&&"string"==typeof e&&(this.setPathData(e),e=null)),this._initialize(!r&&e)},_equals:function(e){return this._closed===e._closed&&s.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=n,32&t)this._version++;else if(this._curves)for(var r=0,i=this._curves.length;r<i;r++)this._curves[r]._changed()}else 64&t&&(this._bounds=n)},getStyle:function(){var e=this._parent;return(e instanceof N?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),r=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,r){var i=e[r-1];"boolean"==typeof i&&(this.setClosed(i),r--),this._add(T.readList(e,0,{},r))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new O(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new O(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n,r,i,s,a,o,l,u,h=this._segments,d=h.length,f=new c(t),p=new Array(6),g=!0,m=[];function v(t,c){if(t._transformCoordinates(e,p),n=p[0],r=p[1],g)m.push("M"+f.pair(n,r)),g=!1;else if(a=p[2],o=p[3],a===n&&o===r&&l===i&&u===s){if(!c){var h=n-i,d=r-s;m.push(0===h?"v"+f.number(d):0===d?"h"+f.number(h):"l"+f.pair(h,d))}}else m.push("c"+f.pair(l-i,u-s)+" "+f.pair(a-i,o-s)+" "+f.pair(n-i,r-s));i=n,s=r,l=p[4],u=p[5]}if(!d)return"";for(var _=0;_<d;_++)v(h[_]);return this._closed&&d>0&&(v(h[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,i=t.length;r<i;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,r=this._curves,i=e.length,a=null==t,o=(t=a?n.length:t,0);o<i;o++){var l=e[o];l._path&&(l=e[o]=l.clone()),l._path=this,l._index=t+o,l._selection&&this._updateSelection(l,0,l._selection)}if(a)s.push(n,e);else{n.splice.apply(n,[t,0].concat(e)),o=t+i;for(var u=n.length;o<u;o++)n[o]._index=o}if(r){var c=this._countCurves(),h=t>0&&t+i-1===c?t-1:t,d=h,f=Math.min(h+i,c);for(e._curves&&(r.splice.apply(r,[h,0].concat(e._curves)),d+=e._curves.length),o=d;o<f;o++)r.splice(o,0,new O(this,null,null));this._adjustCurves(h,f)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n,r=this._segments,i=this._curves,s=e;s<t;s++)(n=i[s])._path=this,n._segment1=r[s],n._segment2=r[s+1]||r[0],n._changed();(n=i[this._closed&&!e?r.length-1:e-1])&&(n._segment2=r[e]||r[0],n._changed()),(n=i[t])&&(n._segment1=r[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!=typeof e?this._add(T.readList(t)):this._add([T.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&"number"!=typeof t?this._add(T.readList(n,1),e):this._add([T.read(n,1)],e)[0]},addSegment:function(){return this._add([T.read(arguments)])[0]},insertSegment:function(e){return this._add([T.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(T.readList(e))},insertSegments:function(e,t){return this._add(T.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=s.pick(t,this._segments.length);var r=this._segments,i=this._curves,a=r.length,o=r.splice(e,t-e),l=o.length;if(!l)return o;for(var u=0;u<l;u++){var c=o[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}u=e;for(var h=r.length;u<h;u++)r[u]._index=u;if(i){var d=e>0&&t===a+(this._closed?1:0)?e-1:e;for(u=(i=i.splice(d,l)).length-1;u>=0;u--)i[u]._path=null;n&&(o._curves=i.slice(1)),this._adjustCurves(d,d)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var r=0,i=t.length;r<i;r++){var s=r+1===i;e+=O.getArea(O.getValues(t[r],t[s?0:r+1],null,s&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)t[i]._selection=r},_updateSelection:function(e,t,n){e._selection=n,(this._segmentSelection+=n-t)>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,r=t&&t.time;r>.99999999&&(n++,r=0);var i=this.getCurves();if(n>=0&&n<i.length){r>=1e-8&&i[n++].divideAtTime(r);var s,a=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new B(w.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(e,t){var r,i=t===n?e:(r=this.getCurves()[e])&&r.getLocationAtTime(t);return null!=i?this.splitAt(i):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,i=this.getLastSegment(),s=e.getLastSegment();if(!s)return this;i&&i._point.isClose(s._point,n)&&e.reverse();var a=e.getFirstSegment();if(i&&i._point.isClose(a._point,n))i.setHandleOut(a._handleOut),this._add(r.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,n)&&e.reverse(),s=e.getLastSegment(),o&&o._point.isClose(s._point,n)?(o.setHandleIn(s._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?1e-7:0,i=t.length-1;i>=0;i--){var s=t[i];!s.hasHandles()&&(!s.hasLength(r)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new R(this,e||.25,256,!0).parts,n=t.length,r=[],i=0;i<n;i++)r.push(new T(t[i].curve.slice(0,2)));!this._closed&&n>0&&r.push(new T(t[n-1].curve.slice(6))),this.setSegments(r)},simplify:function(e){var t=new F(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,r=e||{},i=r.type||"asymmetric",s=this._segments,a=s.length,o=this._closed;function l(e,n){var r=e&&e.index;if(null!=r){var i=e.path;if(i&&i!==t)throw new Error(e._class+" "+r+" of "+i+" is not part of "+t);n&&e instanceof O&&r++}else r="number"==typeof e?e:n;return Math.min(r<0&&o?r%a:r<0?r+a:r,a-1)}var u=o&&r.from===n&&r.to===n,c=l(r.from,0),h=l(r.to,a-1);if(c>h)if(o)c-=a;else{var d=c;c=h,h=d}if(/^(?:asymmetric|continuous)$/.test(i)){var f="asymmetric"===i,p=Math.min,g=h-c+1,m=g-1,v=u?p(g,4):1,_=v,y=v,b=[];if(o||(_=p(1,c),y=p(1,a-h-1)),(m+=_+y)<=1)return;for(var x=0,w=c-_;x<=m;x++,w++)b[x]=s[(w<0?w+a:w)%a]._point;var S=b[0]._x+2*b[1]._x,C=b[0]._y+2*b[1]._y,D=2,E=m-1,A=[S],k=[C],M=[D],T=[],I=[];for(x=1;x<m;x++){var L=x<E,P=L?4:f?2:7,B=L?4:f?3:8,N=L?2:f?0:1,R=(L||f?1:2)/D;D=M[x]=P-R,S=A[x]=B*b[x]._x+N*b[x+1]._x-R*S,C=k[x]=B*b[x]._y+N*b[x+1]._y-R*C}for(T[E]=A[E]/M[E],I[E]=k[E]/M[E],x=m-2;x>=0;x--)T[x]=(A[x]-T[x+1])/M[x],I[x]=(k[x]-I[x+1])/M[x];T[m]=(3*b[m]._x-T[E])/2,I[m]=(3*b[m]._y-I[E])/2,x=_;var F=m-y;for(w=c;x<=F;x++,w++){var z=s[w<0?w+a:w],j=z._point,V=T[x]-j._x,U=I[x]-j._y;(u||x<F)&&z.setHandleOut(V,U),(u||x>_)&&z.setHandleIn(-V,-U)}}else for(x=c;x<=h;x++)s[x<0?x+a:x].smooth(r,!u&&x===c,!u&&x===h)},toShape:function(e){if(!this._closed)return null;var t,r,i,s,a=this._segments;function o(e,t){var n=a[e],r=n.getNext(),i=a[t],s=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&s._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(s._point.subtract(i._point))}function l(e){var t=a[e],n=t.getNext(),r=t._handleOut,i=n._handleIn,s=.5522847498307936;if(r.isOrthogonal(i)){var o=t._point,l=n._point,u=new b(o,r,!0).intersect(new b(l,i,!0),!0);return u&&h.isZero(r.getLength()/u.subtract(o).getLength()-s)&&h.isZero(i.getLength()/u.subtract(l).getLength()-s)}return!1}function u(e,t){return a[e]._point.getDistance(a[t]._point)}if(!this.hasHandles()&&4===a.length&&o(0,2)&&o(1,3)&&function(e){var t=a[e],n=t.getPrevious(),r=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&r._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(r._point.subtract(t._point))}(1)?(t=D.Rectangle,r=new g(u(0,3),u(0,1)),s=a[1]._point.add(a[2]._point).divide(2)):8===a.length&&l(0)&&l(2)&&l(4)&&l(6)&&o(1,5)&&o(3,7)?(t=D.Rectangle,i=(r=new g(u(1,6),u(0,3))).subtract(new g(u(0,7),u(1,2))).divide(2),s=a[3]._point.add(a[4]._point).divide(2)):4===a.length&&l(0)&&l(1)&&l(2)&&l(3)&&(h.isZero(u(0,2)-u(1,3))?(t=D.Circle,i=u(0,2)/2):(t=D.Ellipse,i=new g(u(2,0)/2,u(3,1)/2)),s=a[1]._point),t){var c=this.getPosition(!0),d=new t({center:c,size:r,radius:i,insert:!1});return d.copyAttributes(this,!0),d._matrix.prepend(this._matrix),d.rotate(s.subtract(c).getAngle()+90),(e===n||e)&&d.insertAbove(this),d}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof N)return e.base.call(this,t);var n=this.getCurves(),r=t.getCurves(),i=n.length,s=r.length;if(!i||!s)return i==s;for(var a,o,l=n[0].getValues(),u=[],c=0,h=0,d=0;d<s;d++){var f=r[d].getValues();if(u.push(f),m=O.getOverlaps(l,f)){a=!d&&m[0][0]>0?s-1:d,o=m[0][1];break}}var p,g=Math.abs;for(f=u[a];l&&f;){var m;if((m=O.getOverlaps(l,f))&&g(m[0][0]-h)<1e-8){1===(h=m[1][0])&&(l=++c<i?n[c].getValues():null,h=0);var v=m[0][1];if(g(v-o)<1e-8){if(p||(p=[a,v]),1===(o=m[1][1])&&(++a>=s&&(a=0),f=u[a]||r[a].getValues(),o=0),!l)return p[0]===a&&p[1]===o;continue}}break}return!1},_hitTestSelf:function(e,t,n,r){var i,s,a,o,l,u,c=this,h=this.getStyle(),d=this._segments,f=d.length,p=this._closed,g=t._tolerancePadding,m=g,v=t.stroke&&h.hasStroke(),_=t.fill&&h.hasFill(),y=t.curves,b=v?h.getStrokeWidth()/2:_&&t.tolerance>0||y?0:null;function x(t,n){return e.subtract(t).divide(n).length<=1}function w(e,n,r){if(!t.selected||n.isSelected()){var i=e._point;if(n!==i&&(n=n.add(i)),x(n,m))return new M(r,c,{segment:e,point:n})}}function S(e,n){return(n||t.segments)&&w(e,e._point,"segment")||!n&&t.handles&&(w(e,e._handleIn,"handle-in")||w(e,e._handleOut,"handle-out"))}function C(e){o.add(e)}function D(t){var n,l=p||t._index>0&&t._index<f-1;return"round"===(l?i:s)?x(t._point,m):(o=new B({internal:!0,closed:!0}),l?t.isSmooth()||B._addBevelJoin(t,i,b,a,null,r,C,!0):"square"===s&&B._addSquareCap(t,s,b,null,r,C,!0),o.isEmpty()?void 0:o.contains(e)||(n=o.getNearestLocation(e))&&x(n.getPoint(),g))}if(null!==b&&(b>0?(i=h.getStrokeJoin(),s=h.getStrokeCap(),a=h.getMiterLimit(),m=m.add(B._getStrokePadding(b,r))):i=s="round"),!t.ends||t.segments||p){if(t.segments||t.handles)for(var E=0;E<f;E++)if(u=S(d[E]))return u}else if(u=S(d[0],!0)||S(d[f-1],!0))return u;if(null!==b){if(l=this.getNearestLocation(e)){var A=l.getTime();0===A||1===A&&f>1?D(l.getSegment())||(l=null):x(l.getPoint(),m)||(l=null)}if(!l&&"miter"===i&&f>1)for(E=0;E<f;E++){var k=d[E];if(e.getDistance(k._point)<=a*b&&D(k)){l=k.getLocation();break}}}return!l&&_&&this._contains(e)||l&&!v&&!y?new M("fill",this):l?new M(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},s.each(O._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=f.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var i=t[n].getLocationOf(e);if(i)return i}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),n=0,r=0,i=t.length;r<i;r++){var s=n,a=t[r];if((n+=a.getLength())>e)return a.getLocationAt(e-s)}if(t.length>0&&e<=this.getLength())return new L(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=f.read(arguments);if(e.isZero())return[];for(var t=[],n=0,r=this.getCurves(),i=0,s=r.length;i<s;i++){for(var a=r[i],o=a.getTimesWithTangent(e),l=0,u=o.length;l<u;l++){var c=n+a.getOffsetAtTime(o[l]);t.indexOf(c)<0&&t.push(c)}n+=a.length}return t}}),new function(){function e(e,t,n){var r,i,s,a,o,l,u,c,h=t._segments,d=h.length,f=new Array(6),p=!0;function g(t){if(n)t._transformCoordinates(n,f),r=f[0],i=f[1];else{var h=t._point;r=h._x,i=h._y}if(p)e.moveTo(r,i),p=!1;else{if(n)o=f[2],l=f[3];else{var d=t._handleIn;o=r+d._x,l=i+d._y}o===r&&l===i&&u===s&&c===a?e.lineTo(r,i):e.bezierCurveTo(u,c,o,l,r,i)}s=r,a=i,n?(u=f[4],c=f[5]):(d=t._handleOut,u=s+d._x,c=a+d._y)}for(var m=0;m<d;m++)g(h[m]);t._closed&&d>0&&g(h[0])}return{_draw:function(t,n,r,i){var s=n.dontStart,a=n.dontFinish||n.clip,o=this.getStyle(),l=o.hasFill(),u=o.hasStroke(),c=o.getDashArray(),h=!oe.support.nativeDash&&u&&c&&c.length;function d(e){return c[(e%h+h)%h]}if(s||t.beginPath(),(l||u&&!h||a)&&(e(t,this,i),this._closed&&t.closePath()),!a&&(l||u)&&(this._setStyles(t,n,r),l&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(h){s||t.beginPath();for(var f,p=new R(this,.25,32,!1,i),g=p.length,m=-o.getDashOffset(),v=0;m>0;)m-=d(v--)+d(v--);for(;m<g;)f=m+d(v++),(m>0||f>0)&&p.drawPart(t,Math.max(m,0),Math.max(f,0)),m=f+d(v++)}t.stroke()}},_drawSelected:function(t,n){t.beginPath(),e(t,this,n),t.stroke(),function(e,t,n,r){if(!(r<=0))for(var i,s,a=r/2,o=r-2,l=a-1,u=new Array(6),c=0,h=t.length;c<h;c++){var d=t[c],f=d._selection;if(d._transformCoordinates(n,u),i=u[0],s=u[1],2&f&&g(2),4&f&&g(4),e.fillRect(i-a,s-a,r,r),o>0&&!(1&f)){var p=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(i-l,s-l,o,o),e.fillStyle=p}}function g(t){var n=u[t],r=u[t+1];(i!=n||s!=r)&&(e.beginPath(),e.moveTo(i,s),e.lineTo(n,r),e.stroke(),e.beginPath(),e.arc(n,r,a,0,2*Math.PI,!0),e.fill())}}(t,this._segments,n,oe.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new T(f.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new T(f.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=f.read(t),r=f.read(t),i=f.read(t),s=e(this);s.setHandleOut(n.subtract(s._point)),this._add([new T(i,r.subtract(i))])},quadraticCurveTo:function(){var t=arguments,n=f.read(t),r=f.read(t),i=e(this)._point;this.cubicCurveTo(n.add(i.subtract(n).multiply(1/3)),n.add(r.subtract(n).multiply(1/3)),r)},curveTo:function(){var t=arguments,n=f.read(t),r=f.read(t),i=s.pick(s.read(t),.5),a=1-i,o=e(this)._point,l=n.subtract(o.multiply(a*a)).subtract(r.multiply(i*i)).divide(2*i*a);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(l,r)},arcTo:function(){var t,n,r,i,a=arguments,o=Math.abs,l=Math.sqrt,u=e(this),c=u._point,d=f.read(a),p=s.peek(a);if("boolean"==typeof(w=s.pick(p,!0)))var m=(C=c.add(d).divide(2)).add(C.subtract(c).rotate(w?-90:90));else if(s.remain(a)<=2)m=d,d=f.read(a);else if(!c.equals(d)){var v=g.read(a),_=h.isZero;if(_(v.width)||_(v.height))return this.lineTo(d);var x=s.read(a),w=!!s.read(a),S=!!s.read(a),C=c.add(d).divide(2),D=(q=c.subtract(C).rotate(-x)).x,E=q.y,A=o(v.width),k=o(v.height),M=A*A,I=k*k,O=D*D,L=E*E,P=l(O/M+L/I);if(P>1&&(M=(A*=P)*A,I=(k*=P)*k),o(P=(M*I-M*L-I*O)/(M*L+I*O))<1e-12&&(P=0),P<0)throw new Error("Cannot create an arc with the given arguments");t=new f(A*E/k,-k*D/A).multiply((S===w?-1:1)*l(P)).rotate(x).add(C),n=(r=(i=(new y).translate(t).rotate(x).scale(A,k))._inverseTransform(c)).getDirectedAngle(i._inverseTransform(d)),!w&&n>0?n-=360:w&&n<0&&(n+=360)}if(m){var B=new b(c.add(m).divide(2),m.subtract(c).rotate(90),!0),N=new b(m.add(d).divide(2),d.subtract(m).rotate(90),!0),R=new b(c,d),F=R.getSide(m);if(!(t=B.intersect(N,!0))){if(!F)return this.lineTo(d);throw new Error("Cannot create an arc with the given arguments")}n=(r=c.subtract(t)).getDirectedAngle(d.subtract(t));var z=R.getSide(t,!0);0===z?n=F*o(n):F===z&&(n+=n<0?360:-360)}if(n){for(var j=o(n),V=j>=360?4:Math.ceil((j-1e-5)/90),U=n/V,H=U*Math.PI/360,G=4/3*Math.sin(H)/(1+Math.cos(H)),Y=[],W=0;W<=V;W++){var q=d,Z=null;if(W<V&&(Z=r.rotate(90).multiply(G),i?(q=i._transformPoint(r),Z=i._transformPoint(r.add(Z)).subtract(q)):q=t.add(r)),W){var K=r.rotate(-90).multiply(G);i&&(K=i._transformPoint(r.add(K)).subtract(q)),Y.push(new T(q,K,Z))}else u.setHandleOut(Z);r=r.rotate(U)}this._add(Y)}},lineBy:function(){var t=f.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=f.read(t),r=f.read(t),i=s.read(t),a=e(this)._point;this.curveTo(a.add(n),a.add(r),i)},cubicCurveBy:function(){var t=arguments,n=f.read(t),r=f.read(t),i=f.read(t),s=e(this)._point;this.cubicCurveTo(s.add(n),s.add(r),s.add(i))},quadraticCurveBy:function(){var t=arguments,n=f.read(t),r=f.read(t),i=e(this)._point;this.quadraticCurveTo(i.add(n),i.add(r))},arcBy:function(){var t=arguments,n=e(this)._point,r=n.add(f.read(t)),i=s.pick(s.peek(t),!0);"boolean"==typeof i?this.arcTo(r,i):this.arcTo(r,n.add(f.read(t)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return B[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,i,s){var a=e[0];if(!a)return new v;var o=new Array(6),l=a._transformCoordinates(r,new Array(6)),u=l.slice(0,2),c=u.slice(),h=new Array(2);function d(e){e._transformCoordinates(r,o);for(var t=0;t<2;t++)O._addBounds(l[t],l[t+4],o[t+2],o[t],t,s?s[t]:0,u,c,h);var n=l;l=o,o=n}for(var f=1,p=e.length;f<p;f++)d(e[f]);return t&&d(a),new v(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(e,t,n,r,i){var s=n.getStyle(),a=s.hasStroke(),o=s.getStrokeWidth(),l=a&&n._getStrokeMatrix(r,i),u=a&&B._getStrokePadding(o,l),c=B.getBounds(e,t,n,r,i,u);if(!a)return c;var h=o/2,d=s.getStrokeJoin(),f=s.getStrokeCap(),p=s.getMiterLimit(),m=new v(new g(u));function _(e){c=c.include(e)}function y(e){c=c.unite(m.setCenter(e._point.transform(r)))}function b(e,t){"round"===t||e.isSmooth()?y(e):B._addBevelJoin(e,t,h,p,r,l,_)}function x(e,t){"round"===t?y(e):B._addSquareCap(e,t,h,r,l,_)}var w=e.length-(t?0:1);if(w>0){for(var S=1;S<w;S++)b(e[S],d);t?b(e[0],d):(x(e[0],f),x(e[e.length-1],f))}return c},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new f(e,0).transform(t),r=new f(0,e).transform(t),i=n.getAngleInRadians(),s=n.getLength(),a=r.getLength(),o=Math.sin(i),l=Math.cos(i),u=Math.tan(i),c=Math.atan2(a*u,s),h=Math.atan2(a,u*s);return[Math.abs(s*Math.cos(c)*l+a*Math.sin(c)*o),Math.abs(a*Math.sin(h)*l+s*Math.cos(h)*o)]},_addBevelJoin:function(e,t,n,r,i,s,a,o){var l=e.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(i),h=u.getNormalAtTime(1).multiply(n).transform(s),d=l.getNormalAtTime(0).multiply(n).transform(s),p=h.getDirectedAngle(d);if((p<0||p>=180)&&(h=h.negate(),d=d.negate()),o&&a(c),a(c.add(h)),"miter"===t){var g=new b(c.add(h),new f(-h.y,h.x),!0).intersect(new b(c.add(d),new f(-d.y,d.x),!0),!0);g&&c.getDistance(g)<=r*n&&a(g)}a(c.add(d))},_addSquareCap:function(e,t,n,r,i,s,a){var o=e._point.transform(r),l=e.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(i);"square"===t&&(a&&(s(o.subtract(u)),s(o.add(u))),o=o.add(u.rotate(-90))),s(o.add(u)),s(o.subtract(u))},getHandleBounds:function(e,t,n,r,i){var s,a,o=n.getStyle();if(i.stroke&&o.hasStroke()){var l=n._getStrokeMatrix(r,i),u=o.getStrokeWidth()/2,c=u;"miter"===o.getStrokeJoin()&&(c=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),s=B._getStrokePadding(u,l),a=B._getStrokePadding(c,l)}for(var h=new Array(6),d=1/0,f=-d,p=d,g=f,m=0,_=e.length;m<_;m++){e[m]._transformCoordinates(r,h);for(var y=0;y<6;y+=2){var b=y?s:a,x=b?b[0]:0,w=b?b[1]:0,S=h[y],C=h[y+1],D=S-x,E=S+x,A=C-w,k=C+w;D<d&&(d=D),E>f&&(f=E),A<p&&(p=A),k>g&&(g=k)}}return new v(d,p,f-d,g-p)}}});B.inject({statics:new function(){var e=.5522847498307936,t=[new T([-1,0],[0,e],[0,-e]),new T([0,-1],[-e,0],[e,0]),new T([1,0],[0,-e],[0,e]),new T([0,1],[e,0],[-e,0])];function n(e,t,n){var r=s.getNamed(n),i=new B(r&&(1==r.insert?w.INSERT:0==r.insert?w.NO_INSERT:null));return i._add(e),i._closed=t,i.set(r,w.INSERT)}function r(e,r,i){for(var s=new Array(4),a=0;a<4;a++){var o=t[a];s[a]=new T(o._point.multiply(r).add(e),o._handleIn.multiply(r),o._handleOut.multiply(r))}return n(s,!0,i)}return{Line:function(){var e=arguments;return n([new T(f.readNamed(e,"from")),new T(f.readNamed(e,"to"))],!1,e)},Circle:function(){var e=arguments,t=f.readNamed(e,"center"),n=s.readNamed(e,"radius");return r(t,new g(n),e)},Rectangle:function(){var t,r=arguments,i=v.readNamed(r,"rectangle"),s=g.readNamed(r,"radius",0,{readNull:!0}),a=i.getBottomLeft(!0),o=i.getTopLeft(!0),l=i.getTopRight(!0),u=i.getBottomRight(!0);if(!s||s.isZero())t=[new T(a),new T(o),new T(l),new T(u)];else{var c=(s=g.min(s,i.getSize(!0).divide(2))).width,h=s.height,d=c*e,f=h*e;t=[new T(a.add(c,0),null,[-d,0]),new T(a.subtract(0,h),[0,f]),new T(o.add(0,h),null,[0,-f]),new T(o.add(c,0),[-d,0],null),new T(l.subtract(c,0),null,[d,0]),new T(l.add(0,h),[0,-f],null),new T(u.subtract(0,h),null,[0,f]),new T(u.subtract(c,0),[d,0])]}return n(t,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=arguments,t=D._readEllipse(e);return r(t.center,t.radius,e)},Oval:"#Ellipse",Arc:function(){var e=arguments,t=f.readNamed(e,"from"),n=f.readNamed(e,"through"),r=f.readNamed(e,"to"),i=s.getNamed(e),a=new B(i&&0==i.insert&&w.NO_INSERT);return a.moveTo(t),a.arcTo(n,r),a.set(i)},RegularPolygon:function(){for(var e=arguments,t=f.readNamed(e,"center"),r=s.readNamed(e,"sides"),i=s.readNamed(e,"radius"),a=360/r,o=r%3===0,l=new f(0,o?-i:i),u=o?-1:.5,c=new Array(r),h=0;h<r;h++)c[h]=new T(t.add(l.rotate((h+u)*a)));return n(c,!0,e)},Star:function(){for(var e=arguments,t=f.readNamed(e,"center"),r=2*s.readNamed(e,"points"),i=s.readNamed(e,"radius1"),a=s.readNamed(e,"radius2"),o=360/r,l=new f(0,-1),u=new Array(r),c=0;c<r;c++)u[c]=new T(t.add(l.rotate(o*c).multiply(c%2?a:i)));return n(u,!0,e)}}}});var N=P.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var r=n,i=r[0];i&&"number"==typeof i[0]&&(r=[r]);for(var a=n.length-1;a>=0;a--){var o=r[a];r===n&&!(o instanceof B)&&(r=s.slice(r)),Array.isArray(o)?r[a]=new B({segments:o,insert:!1}):o instanceof N&&(r.splice.apply(r,[a,1].concat(o.removeChildren())),o.remove())}return e.base.call(this,t,r)},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--)(i=n[r].reduce(t)).isEmpty()&&i.remove();var i;return n.length?e.base.call(this):((i=new B(w.NO_INSERT)).copyAttributes(this),i.insertAbove(this),this.remove(),i)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)s.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,r=[],i=0,s=n.length;i<s;i++){var a=n[i],o=a._matrix;r.push(a.getPathData(e&&!o.isIdentity()?e.appended(o):e,t))}return r.join("")},_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===B||"path"===n.type?n:s.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var i=this._children;if(i.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var s=0,a=i.length;s<a;s++)i[s].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var o=this._style;o.hasFill()&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,i=0,s=r.length;i<s;i++){var a=r[i],o=a._matrix;n[a._id]||a._drawSelected(e,o.isIdentity()?t:t.appended(o))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new B(w.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=f.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},s.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n,r=this._children,i=0,s=r.length;i<s;i++)n=r[i][e](t)||n;return n}},{}));P.inject(new function(){var e=Math.min,t=Math.max,r=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function a(e){return e._children||[e]}function o(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(t){for(var r=a(n),i=0,s=r.length;i<s;i++)!(e=r[i])._closed&&!e.isEmpty()&&(e.closePath(1e-12),e.getFirstSegment().setHandleIn(0,0),e.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function l(e,t,n,r,i){var s=new N(w.NO_INSERT);return s.addChildren(e,!0),s=s.reduce({simplify:t}),i&&0==i.insert||s.insertAbove(r&&n.isSibling(r)&&n.getIndex()<r.getIndex()?r:n),s.copyAttributes(n,!0),s}function c(e){return e.hasOverlap()||e.isCrossing()}function d(e,t,n,r){if(r&&(0==r.trace||r.stroke)&&/^(subtract|intersect)$/.test(n))return f(e,t,n);var h=o(e,!0),d=t&&e!==t&&o(t,!0),p=i[n];p[n]=!0,d&&(p.subtract||p.exclude)^d.isClockwise()^h.isClockwise()&&d.reverse();var g,_=v(L.expand(h.getIntersections(d,c))),x=a(h),w=d&&a(d),S=[],C=[];function D(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];s.push(S,r._segments),s.push(C,r.getCurves()),r._overlapsOnly=!0}}function E(e){for(var t=[],n=0,r=e&&e.length;n<r;n++)t.push(C[e[n]]);return t}if(_.length){D(x),w&&D(w);for(var A=new Array(C.length),k=0,M=C.length;k<M;k++)A[k]=C[k].getValues();var T=u.findCurveBoundsCollisions(A,A,0,!0),I={};for(k=0;k<C.length;k++){var O=C[k],P=O._path._id;(I[P]=I[P]||{})[O.getIndex()]={hor:E(T[k].hor),ver:E(T[k].ver)}}for(k=0,M=_.length;k<M;k++)y(_[k]._segment,h,d,I,p);for(k=0,M=S.length;k<M;k++){var B=S[k],N=B._intersection;B._winding||y(B,h,d,I,p),N&&N._overlap||(B._path._overlapsOnly=!1)}g=b(S,p)}else g=m(w?x.concat(w):x.slice(),function(e){return!!p[e]});return l(g,!0,e,t,r)}function f(e,t,n){var r=o(e),i=o(t),s=r.getIntersections(i,c),a="subtract"===n,u="divide"===n,h={},d=[];function f(e){if(!h[e._id]&&(u||i.contains(e.getPointAt(e.getLength()/2))^a))return d.unshift(e),h[e._id]=!0}for(var p=s.length-1;p>=0;p--){var g=s[p].split();g&&(f(g)&&g.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return f(r),l(d,!1,e,t)}function p(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function g(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function m(e,t,n){var i=e&&e.length;if(i){var a=s.each(e,function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}},{}),o=e.slice().sort(function(e,t){return r(t.getArea())-r(e.getArea())}),l=o[0],c=u.findItemBoundsCollisions(o,null,h.GEOMETRIC_EPSILON);null==n&&(n=l.isClockwise());for(var d=0;d<i;d++){var f=o[d],p=a[f._id],g=0,m=c[d];if(m)for(var v=null,_=m.length-1;_>=0;_--)if(m[_]<d){v=v||f.getInteriorPoint();var y=o[m[_]];if(y.contains(v)){var b=a[y._id];g=b.winding,p.winding+=g,p.container=b.exclude?b.container:y;break}}if(t(p.winding)===t(g))p.exclude=!0,e[p.index]=null;else{var x=p.container;f.setClockwise(x?!x.isClockwise():n)}}}return e}function v(e,t,n){var r,i,s,a=t&&[],o=1e-8,l=1-o,u=!1,c=n||[],h=n&&{};function d(e){return e._path._id+"."+e._segment1._index}for(var f=(n&&n.length)-1;f>=0;f--)(m=n[f])._path&&(h[d(m)]=!0);for(f=e.length-1;f>=0;f--){var m,v,_=e[f],y=_._time,b=y,x=t&&!t(_);if((m=_._curve)&&(m!==i?(u=!m.hasHandles()||h&&h[d(m)],r=[],s=null,i=m):s>=o&&(y/=s)),x)r&&r.push(_);else{if(t&&a.unshift(_),s=b,y<o)v=m._segment1;else if(y>l)v=m._segment2;else{var w=m.divideAtTime(y,!0);u&&c.push(m,w),v=w._segment1;for(var S=r.length-1;S>=0;S--){var C=r[S];C._time=(C._time-y)/(1-y)}}_._setSegment(v);var D=v._intersection,E=_._intersection;if(D){p(D,E);for(var A=D;A;)p(A._intersection,D),A=A._next}else v._intersection=E}}return n||g(c),a||e}function _(n,i,s,a,o){var l,u,c=Array.isArray(i)?i:i[s?"hor":"ver"],h=s?1:0,d=1^h,f=[n.x,n.y],p=f[h],g=f[d],m=1e-6,v=p-1e-9,y=p+1e-9,b=0,x=0,w=0,S=0,C=!1,D=!1,E=1,A=[];function k(r){var u=r[d+0],c=r[d+6];if(!(g<e(u,c)||g>t(u,c))){var f=r[h+0],b=r[h+2],x=r[h+4],D=r[h+6];if(u===c)return void((f<y&&D>v||D<y&&f>v)&&(C=!0));var k=g===u?0:g===c||v>t(f,b,x,D)||y<e(f,b,x,D)?1:O.solveCubic(r,d,g,A,0,1)>0?A[0]:1,M=0===k?f:1===k?D:O.getPoint(r,k)[s?"y":"x"],T=u>c?1:-1,I=l[d]>l[d+6]?1:-1,L=l[h+6];return g!==u?(M<v?w+=T:M>y?S+=T:C=!0,M>p-m&&M<p+m&&(E/=2)):(T!==I?f<v?w+=T:f>y&&(S+=T):f!=L&&(L<y&&M>y?(S+=T,C=!0):L>v&&M<v&&(w+=T,C=!0)),E/=4),l=r,!o&&M>v&&M<y&&0===O.getTangent(r,k)[s?"x":"y"]&&_(n,i,!s,a,!0)}}function M(n){var r=n[d+0],i=n[d+2],a=n[d+4],o=n[d+6];if(g<=t(r,i,a,o)&&g>=e(r,i,a,o))for(var l,u=n[h+0],c=n[h+2],f=n[h+4],p=n[h+6],m=v>t(u,c,f,p)||y<e(u,c,f,p)?[n]:O.getMonoCurves(n,s),_=0,b=m.length;_<b;_++)if(l=k(m[_]))return l}for(var T=0,I=c.length;T<I;T++){var L,P=c[T],B=P._path,N=P.getValues();if((!T||c[T-1]._path!==B)&&(l=null,B._closed||(u=O.getValues(B.getLastCurve().getSegment2(),P.getSegment1(),null,!a))[d]!==u[d+6]&&(l=u),!l)){l=N;for(var R=B.getLastCurve();R&&R!==P;){var F=R.getValues();if(F[d]!==F[d+6]){l=F;break}R=R.getPrevious()}}if(L=M(N))return L;if(T+1===I||c[T+1]._path!==B){if(u&&(L=M(u)))return L;C&&!w&&!S&&(w=S=B.isClockwise(a)^s?1:-1),b+=w,x+=S,w=S=0,C&&(D=!0,C=!1),u=null}}return b=r(b),x=r(x),{winding:t(b,x),windingL:b,windingR:x,quality:E,onPath:D}}function y(e,t,n,i,s){var a=[],o=e,l=0;do{if(y=e.getCurve()){var u=y.getLength();a.push({segment:e,curve:y,length:u}),l+=u}e=e.getNext()}while(e&&!e._intersection&&e!==o);for(var c=[.5,.25,.75],d={winding:0,quality:-1},f=0;f<c.length&&d.quality<.5;f++){u=l*c[f];for(var p=0,g=a.length;p<g;p++){var m=a[p],v=m.length;if(u<=v){var y,b=(y=m.curve)._path,x=b._parent,w=x instanceof N?x:b,S=h.clamp(y.getTimeAt(u),.001,.999),C=y.getPointAtTime(S),D=r(y.getTangentAtTime(S).y)<Math.SQRT1_2,E=null;if(s.subtract&&n){var A=(w===t?n:t)._getWinding(C,D,!0);if(w===t&&A.winding||w===n&&!A.winding){if(A.quality<1)continue;E={winding:0,quality:1}}}(E=E||_(C,i[b._id][y.getIndex()],D,!0)).quality>d.quality&&(d=E);break}u-=v}}for(p=a.length-1;p>=0;p--)a[p].segment._winding=d}function b(e,t){var n,r=[];function i(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function s(e){if(e)for(var t=0,r=n.length;t<r;t++)if(e===n[t])return!0;return!1}function a(e){for(var t=e._segments,n=0,r=t.length;n<r;n++)t[n]._visited=!0}function o(e,t){var r=e._intersection,a=r,o=[];function l(r,a){for(;r&&r!==a;){var l=r._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),h=c._intersection;l!==e&&(s(l)||s(c)||c&&i(l)&&(i(c)||h&&i(h._segment)))&&o.push(l),t&&n.push(l)}r=r._next}}if(t&&(n=[e]),r){for(l(r);r&&r._previous;)r=r._previous;l(r,a)}return o}e.sort(function(e,t){var n=e._intersection,r=t._intersection,i=!(!n||!n._overlap),s=!(!r||!r._overlap),a=e._path,o=t._path;return i^s?i?1:-1:!n^!r?n?1:-1:a!==o?a._id-o._id:e._index-t._index});for(var l=0,u=e.length;l<u;l++){var c,h,d,f=e[l],p=i(f),g=null,m=!1,v=!0,_=[];if(p&&f._path._overlapsOnly){var y=f._path,b=f._intersection._segment._path;y.compare(b)&&(y.getArea()&&r.push(y.clone(!1)),a(y),a(b),p=!1)}for(;p;){var x=!g,S=o(f,x),C=S.shift(),D=!(m=!x&&(s(f)||s(C)))&&C;if(x&&(g=new B(w.NO_INSERT),c=null),m){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(D&&c&&(_.push(c),c=null),c||(D&&S.push(f),c={start:g._segments.length,crossings:S,visited:h=[],handleIn:d}),D&&(f=C),!i(f)){g.removeSegments(c.start);for(var E=0,A=h.length;E<A;E++)h[E]._visited=!1;h.length=0;do{(!(f=c&&c.crossings.shift())||!f._path)&&(f=null,(c=_.pop())&&(h=c.visited,d=c.handleIn))}while(c&&!i(f));if(!f)break}var k=f.getNext();g.add(new T(f._point,d,k&&f._handleOut)),f._visited=!0,h.push(f),f=k||f._path.getFirstSegment(),d=k&&k._handleIn}m&&(v&&(g.getFirstSegment().setHandleIn(d),g.setClosed(v)),0!==g.getArea()&&r.push(g))}return r}return{_getWinding:function(e,t,n){return _(e,this.getCurves(),t,n)},unite:function(e,t){return d(this,e,"unite",t)},intersect:function(e,t){return d(this,e,"intersect",t)},subtract:function(e,t){return d(this,e,"subtract",t)},exclude:function(e,t){return d(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?f(this,e,"divide"):l([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){var e=this._children,t=e||[this];function n(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var r=!1,i=!1,a=this.getIntersections(null,function(e){return e.hasOverlap()&&(r=!0)||e.isCrossing()&&(i=!0)}),o=r&&i&&[];if(a=L.expand(a),r)for(var l=v(a,function(e){return e.hasOverlap()},o),u=l.length-1;u>=0;u--){var c=l[u],h=c._path,d=c._segment,f=d.getPrevious(),p=d.getNext();n(f,h)&&n(p,h)&&(d.remove(),f._handleOut._set(0,0),p._handleIn._set(0,0),f!==d&&!f.getCurve().hasLength()&&(p._handleIn.set(f._handleIn),f.remove()))}i&&(v(a,r&&function(e){var t=e.getCurve(),n=e.getSegment(),r=e._intersection,i=r._curve,s=r._segment;if(t&&i&&t._path&&i._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},o),o&&g(o),t=b(s.each(t,function(e){s.push(this,e._segments)},[])));var m,_=t.length;return _>1&&e?(t!==e&&this.setChildren(t),m=this):1===_&&!e&&(t[0]!==this&&this.setSegments(t[0].removeSegments()),m=this),m||((m=new N(w.NO_INSERT)).addChildren(t),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(e,t){var r=this._children;return r&&r.length?this.setChildren(m(this.removeChildren(),function(t){return!!(e?t:1&t)},t)):t!==n&&this.setClockwise(t),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var r=this.getCurves(),i=n.y,s=[],a=[],o=0,l=r.length;o<l;o++){var u=r[o].getValues(),c=u[1],h=u[3],d=u[5],f=u[7];if(i>=e(c,h,d,f)&&i<=t(c,h,d,f))for(var p=O.getMonoCurves(u),g=0,m=p.length;g<m;g++){var v=p[g],_=v[1],y=v[7];if(_!==y&&(i>=_&&i<=y||i>=y&&i<=_)){var b=i===_?v[0]:i===y?v[6]:1===O.solveCubic(v,1,i,a,0,1)?O.getPoint(v,a[0]).x:(v[0]+v[6])/2;s.push(b)}}}s.length>1&&(s.sort(function(e,t){return e-t}),n.x=(s[0]+s[1])/2)}return n}}});var R=s.extend({_class:"PathFlattener",initialize:function(e,t,n,r,i){var s,a=[],o=[],l=0,u=1/(n||32),c=e._segments,h=c[0];function d(e,t){var n=O.getValues(e,t,i);a.push(n),f(n,e._index,0,1)}function f(e,n,i,s){if(!(s-i>u)||r&&O.isStraight(e)||O.isFlatEnough(e,t||.25)){var a=e[6]-e[0],c=e[7]-e[1],h=Math.sqrt(a*a+c*c);h>0&&(l+=h,o.push({offset:l,curve:e,index:n,time:s}))}else{var d=O.subdivide(e,.5),p=(i+s)/2;f(d[0],n,i,p),f(d[1],n,p,s)}}for(var p=1,g=c.length;p<g;p++)d(h,s=c[p]),h=s;e._closed&&d(s||h,c[0]),this.curves=a,this.parts=o,this.length=l,this.index=0},_get:function(e){for(var t,n=this.parts,r=n.length,i=this.index;t=i,i&&!(n[--i].offset<e););for(;t<r;t++){var s=n[t];if(s.offset>=e){this.index=t;var a=n[t-1],o=a&&a.index===s.index?a.time:0,l=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(e-l)/(s.offset-l)}}}return{index:n[r-1].index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),i=this._get(n),s=r.index,a=i.index;s<=a;s++){var o=O.getPart(this.curves[s],s===r.index?r.time:0,s===i.index?i.time:1);s===r.index&&e.moveTo(o[0],o[1]),e.bezierCurveTo.apply(e,o.slice(2))}}},s.each(O._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return O[e](this.curves[n.index],n.time)}},{})),F=s.extend({initialize:function(e){for(var t,n=this.points=[],r=e._segments,i=e._closed,s=0,a=r.length;s<a;s++){var o=r[s].point;(!t||!t.equals(o))&&n.push(t=o.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new T(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,i,s){var a=this.points;if(r-n!==1){for(var o,l=this.chordLengthParameterize(n,r),u=Math.max(t,t*t),c=!0,h=0;h<=4;h++){var d=this.generateBezier(n,r,l,i,s),f=this.findMaxError(n,r,d,l);if(f.error<t&&c)return void this.addCurve(e,d);if(o=f.index,f.error>=u)break;c=this.reparameterize(n,r,l,d),u=f.error}var p=a[o-1].subtract(a[o+1]);this.fitCubic(e,t,n,o,i,p),this.fitCubic(e,t,o,r,p.negate(),s)}else{var g=a[n],m=a[r],v=g.getDistance(m)/3;this.addCurve(e,[g,g.add(i.normalize(v)),m.add(s.normalize(v)),m])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new T(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,i){for(var s=1e-12,a=Math.abs,o=this.points,l=o[e],u=o[t],c=[[0,0],[0,0]],h=[0,0],d=0,f=t-e+1;d<f;d++){var p=n[d],g=1-p,m=3*p*g,v=g*g*g,_=m*g,y=m*p,b=p*p*p,x=r.normalize(_),w=i.normalize(y),S=o[e+d].subtract(l.multiply(v+_)).subtract(u.multiply(y+b));c[0][0]+=x.dot(x),c[0][1]+=x.dot(w),c[1][0]=c[0][1],c[1][1]+=w.dot(w),h[0]+=x.dot(S),h[1]+=w.dot(S)}var C,D,E=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(a(E)>s){var A=c[0][0]*h[1]-c[1][0]*h[0];C=(h[0]*c[1][1]-h[1]*c[0][1])/E,D=A/E}else{var k=c[0][0]+c[0][1],M=c[1][0]+c[1][1];C=D=a(k)>s?h[0]/k:a(M)>s?h[1]/M:0}var T,I,O=u.getDistance(l),L=s*O;if(C<L||D<L)C=D=O/3;else{var P=u.subtract(l);T=r.normalize(C),I=i.normalize(D),T.dot(P)-I.dot(P)>O*O&&(C=D=O/3,T=I=null)}return[l,l.add(T||r.normalize(C)),u.add(I||i.normalize(D)),u]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e]);i=1;for(var s=n.length;i<s;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],i=[],s=0;s<=2;s++)r[s]=e[s+1].subtract(e[s]).multiply(3);for(s=0;s<=1;s++)i[s]=r[s+1].subtract(r[s]).multiply(2);var a=this.evaluate(3,e,n),o=this.evaluate(2,r,n),l=this.evaluate(1,i,n),u=a.subtract(t),c=o.dot(o)+u.dot(l);return h.isMachineZero(c)?n:n-u.dot(o)/c},evaluate:function(e,t,n){for(var r=t.slice(),i=1;i<=e;i++)for(var s=0;s<=e-i;s++)r[s]=r[s].multiply(1-n).add(r[s+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){for(var i=Math.floor((t-e+1)/2),s=0,a=e+1;a<t;a++){var o=this.evaluate(3,n,r[a-e]).subtract(this.points[a]),l=o.x*o.x+o.y*o.y;l>=s&&(s=l,i=a)}return{error:s,index:i}}}),z=w.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&s.isPlainObject(e)&&e.x===n&&e.y===n;this._initialize(t&&e,!t&&f.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),j=z.extend({_class:"PointText",initialize:function(){z.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new p(e.x,e.y,this,"setPoint")},setPoint:function(){var e=f.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,i=this._style,s=i.hasFill(),a=i.hasStroke(),o=i.getLeading(),l=e.shadowColor;e.font=i.getFontStyle(),e.textAlign=i.getJustification();for(var u=0,c=r.length;u<c;u++){e.shadowColor=l;var h=r[u];s&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),a&&e.strokeText(h,0,0),e.translate(0,o)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,i=r.length,s=n.getJustification(),a=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),r),l=0;"left"!==s&&(l-=o/("center"===s?2:1));var u=new v(l,i?-.75*a:0,o,i*a);return e?e._transformBounds(u,u):u}}),V=s.extend(new function(){var e,t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]},a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(e,t,n){var r=Math.max(e,t,n),i=r-Math.min(e,t,n);return[0===i?0:60*(r==e?(t-n)/i+(t<n?6:0):r==t?(n-e)/i+2:(e-t)/i+4),0===r?0:i/r,r]},"hsb-rgb":function(e,t,n){var r,i=(e=(e/60%6+6)%6)-(r=Math.floor(e)),s=[n,n*(1-t),n*(1-t*i),n*(1-t*(1-i))];return[s[(r=a[r])[0]],s[r[1]],s[r[2]]]},"rgb-hsl":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),s=r-i,a=0===s,o=(r+i)/2;return[a?0:60*(r==e?(t-n)/s+(t<n?6:0):r==t?(n-e)/s+2:(e-t)/s+4),a?0:o<.5?s/(r+i):s/(2-r-i),o]},"hsl-rgb":function(e,t,n){if(0===t)return[n,n,n];for(var r=[(e=(e/360%1+1)%1)+1/3,e,e-1/3],i=n<.5?n*(1+t):n+t-n*t,s=2*n-i,a=[],o=0;o<3;o++){var l=r[o];l<0&&(l+=1),l>1&&(l-=1),a[o]=6*l<1?s+6*(i-s)*l:2*l<1?i:3*l<2?s+(i-s)*(2/3-l)*6:s}return a},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(t,function(e,r){n[r]=[],s.each(e,function(e,i){var a=s.capitalize(e),o=/^(hue|saturation)$/.test(e),l=n[r][i]="gradient"===r?"gradient"===e?function(e){var t=this._components[0];return t!==(e=U.read(Array.isArray(e)?e:arguments,0,{readNull:!0}))&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:function(){return f.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:+e};this["get"+a]=function(){return this._type===r||o&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(r)[i]},this["set"+a]=function(e){this._type!==r&&!(o&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(r),this._properties=t[r],this._type=r),this._components[i]=l.call(this,e),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function a(o){var l,u,c,h,d=arguments,f=this.__read,p=0;Array.isArray(o)&&(o=(d=o)[0]);var g=null!=o&&typeof o;if("string"===g&&o in t&&(l=o,o=d[1],Array.isArray(o)?(u=o,c=d[2]):(f&&(p=1),d=s.slice(d,1),g=typeof o)),!u){if(h="number"===g?d:"object"===g&&null!=o.length?o:null){l||(l=h.length>=3?"rgb":"gray");var m=t[l].length;c=h[m],f&&(p+=h===arguments?m+(null!=c?1:0):1),h.length>m&&(h=s.slice(h,0,m))}else if("string"===g){var v=function(t){var n,s=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(s){var o=s[4]?4:3;n=new Array(o);for(var l=0;l<o;l++){var u=s[l+1];n[l]=parseInt(1==u.length?u+u:u,16)/255}}else if(s=t.match(/^(rgb|hsl)a?\((.*)\)$/)){a=s[1],n=s[2].trim().split(/[,\s]+/g);for(var c="hsl"===a,h=(l=0,Math.min(n.length,4));l<h;l++){var d=n[l];if(u=parseFloat(d),c)if(0===l){var f=d.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[f]||1}else l<3&&(u/=100);else l<3&&(u/=/%$/.test(d)?100:255);n[l]=u}}else{var p=i[t];if(!p)if(r){e||((e=re.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var g=e.getImageData(0,0,1,1).data;p=i[t]=[g[0]/255,g[1]/255,g[2]/255]}else p=[0,0,0];n=p.slice()}return[a,n]}(o);l=v[0],4===(u=v[1]).length&&(c=u[3],u.length--)}else if("object"===g)if(o.constructor===a){if(l=o._type,u=o._components.slice(),c=o._alpha,"gradient"===l)for(var _=1,y=u.length;_<y;_++){var b=u[_];b&&(u[_]=b.clone())}}else if(o.constructor===U)l="gradient",h=d;else{var x=t[l="hue"in o?"lightness"in o?"hsl":"hsb":"gradient"in o||"stops"in o||"radial"in o?"gradient":"gray"in o?"gray":"rgb"],w=n[l];for(this._components=u=[],_=0,y=x.length;_<y;_++)null==(S=o[x[_]])&&!_&&"gradient"===l&&"stops"in o&&(S={stops:o.stops,radial:o.radial}),null!=(S=w[_].call(this,S))&&(u[_]=S);c=o.alpha}f&&l&&(p=1)}if(this._type=l||"rgb",!u)for(this._components=u=[],_=0,y=(w=n[this._type]).length;_<y;_++){var S;null!=(S=w[_].call(this,h&&h[_]))&&(u[_]=S)}return this._components=u,this._properties=t[this._type],this._alpha=c,f&&(this.__read=p),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(e){var t;return this._type===e?this._components.slice():(t=o[this._type+"-"+e])?t.apply(this,this._components):o["rgb-"+e].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new V(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=s.isPlainValue(e,!0)?V.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&s.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,r=c.instance,i=0,s=e.length;i<s;i++){var a=this._components[i];null!=a&&t.push(e[i]+": "+(n?a:r.number(a)))}return null!=this._alpha&&t.push("alpha: "+r.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||null==this._alpha?1:this._alpha;function r(e){return Math.round(255*(e<0?0:e>1?1:e))}return t=[r(t[0]),r(t[1]),r(t[2])],n<1&&t.push(n<0?0:n),e?"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1):(4==t.length?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,r=this._components,i=r[0],s=i._stops,a=r[1],o=r[2],l=r[3],u=t&&t.inverted();if(u&&(a=u._transformPoint(a),o=u._transformPoint(o),l&&(l=u._transformPoint(l))),i._radial){var c=o.getDistance(a);if(l){var h=l.subtract(a);h.getLength()>c&&(l=a.add(h.normalize(c-.1)))}var d=l||a;n=e.createRadialGradient(d.x,d.y,0,a.x,a.y,c)}else n=e.createLinearGradient(a.x,a.y,o.x,o.y);for(var f=0,p=s.length;f<p;f++){var g=s[f],m=g._offset;n.addColorStop(null!==m&&void 0!==m?m:f/(p-1),g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,r=t.length;n<r;n++){var i=t[n];e._transformPoint(i,i,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new V(e(),e(),e())},_setOwner:function(e,t,n){return e&&(e._owner&&t&&e._owner!==t&&(e=e.clone()),!e._owner^!t&&(e._owner=t||null,e._setter=n||null)),e}}})},new function(){return s.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},function(e,t){this[t]=function(t){t=V.read(arguments);for(var n=this._type,r=this._components,i=t._convert(n),s=0,a=r.length;s<a;s++)i[s]=e(r[s],i[s]);return new V(n,i,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}},{})}),U=s.extend({_class:"Gradient",initialize:function(e,t){this._id=d.get(),e&&s.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,function(){return s.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=n))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new U(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var r=0,i=t.length;r<i;r++)t[r]._owner=n;for(r=0,i=(t=this._stops=H.readList(e,0,{clone:!0})).length;r<i;r++)t[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var i=0;i<r;i++)if(!t[i].equals(n[i]))return!1;return!0}}return!1}}),H=s.extend({_class:"GradientStop",initialize:function(e,t){var r=e,i=t;"object"==typeof e&&t===n&&(Array.isArray(e)&&"number"!=typeof e[0]?(r=e[0],i=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(r=e.color,i=e.offset||e.rampPoint||0)),this.setColor(r),this.setOffset(i)},clone:function(){return new H(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return s.serialize(null==r?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){V._setOwner(this._color,null),this._color=V._setOwner(V.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),G=s.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new f,selectedColor:null},t=s.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=s.set({},t,{fillColor:new V}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(n,i,s){this._values={},this._owner=i,this._project=i&&i._project||s||oe.project,this._defaults=!i||i instanceof S?t:i instanceof z?r:e,n&&this.set(n)}};return s.each(t,function(e,t){var r=/Color$/.test(t),l="shadowOffset"===t,u=s.capitalize(t),c=i[t],h="set"+u,d="get"+u;o[h]=function(e){var n=this._owner,i=n&&n._children,s=i&&i.length>0&&!(n instanceof N);if(s)for(var a=0,o=i.length;a<o;a++)i[a]._style[h](e);if(("selectedColor"===t||!s)&&t in this._defaults){var l=this._values[t];l!==e&&(r&&(l&&(V._setOwner(l,null),l._canvasStyle=null),e&&e.constructor===V&&(e=V._setOwner(e,n,s&&h))),this._values[t]=e,n&&n._changed(c||129))}},o[d]=function(e){var i=this._owner,a=i&&i._children,o=a&&a.length>0&&!(i instanceof N);if(o&&!e)for(var u=0,c=a.length;u<c;u++){var p=a[u]._style[d]();if(u){if(!s.equals(g,p))return n}else g=p}else if(t in this._defaults){var g;if((g=this._values[t])===n)(g=this._defaults[t])&&g.clone&&(g=g.clone());else{var m=r?V:l?f:null;m&&(!g||g.constructor!==m)&&(this._values[t]=g=m.read([g],0,{readNull:!0,clone:!0}))}}return g&&r&&(g=V._setOwner(g,i,o&&h)),g},a[d]=function(e){return this._style[d](e)},a[h]=function(e){this._style[h](e)}}),s.each({Font:"FontFamily",WindingRule:"FillRule"},function(e,t){var n="get"+t,r="set"+t;o[n]=a[n]="#get"+e,o[r]=a[r]="#set"+e}),w.inject(a),o},{set:function(e){var t=e instanceof G,n=t?e._values:e;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&t&&i.clone?i.clone():i}},equals:function(e){function t(e,t,r){var i=e._values,a=t._values,o=t._defaults;for(var l in i){var u=i[l],c=a[l];if((!r||!(l in a))&&!s.equals(u,c===n?o[l]:c))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!==t&&void 0!==t?t:1.2*n}}),Y=new function(){function e(e,t,n,r){for(var i=["","webkit","moz","Moz","ms","o"],s=t[0].toUpperCase()+t.substring(1),a=0;a<6;a++){var o=i[a],l=o?o+s:t;if(l in e){if(!n)return e[l];e[l]=r;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,r=e.ownerDocument,i=r.body,s=r.documentElement;try{n=e.getBoundingClientRect()}catch(u){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||i.clientLeft||0),o=n.top-(s.clientTop||i.clientTop||0);if(!t){var l=r.defaultView;a+=l.pageXOffset||s.scrollLeft||i.scrollLeft,o+=l.pageYOffset||s.scrollTop||i.scrollTop}return new v(a,o,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement;return new v(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(e,t){return Y.getBounds(e,t).getPoint()},getSize:function(e){return Y.getBounds(e,!0).getSize()},isInvisible:function(e){return Y.getSize(e).equals(new g(0,0))},isInView:function(e){return!Y.isInvisible(e)&&Y.getViewportBounds(e).intersects(Y.getBounds(e,!0))},isInserted:function(e){return i.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if("object"==typeof n)for(var i in n)e(t,i,!0,n[i]);else e(t,n,!0,r)}}},W={add:function(e,t){if(e)for(var n in t)for(var r=t[n],s=n.split(/[\s,]+/g),a=0,o=s.length;a<o;a++){var l=s[a],u=e===i&&("touchstart"===l||"touchmove"===l)&&{passive:!1};e.addEventListener(l,r,u)}},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),s=0,a=i.length;s<a;s++)e.removeEventListener(i[s],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new f(t.pageX||t.clientX+i.documentElement.scrollLeft,t.pageY||t.clientY+i.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return W.getPoint(e).subtract(Y.getOffset(t||W.getTarget(e)))}};W.requestAnimationFrame=new function(){var e,t=Y.getPrefixed(r,"requestAnimationFrame"),n=!1,i=[];function s(){var e=i;i=[];for(var r=0,a=e.length;r<a;r++)e[r]();(n=t&&i.length)&&t(s)}return function(r){i.push(r),t?n||(t(s),n=!0):e||(e=setInterval(s,1e3/60))}};var q=s.extend(a,{_class:"View",initialize:function e(t,n){function s(e){return n[e]||parseInt(n.getAttribute(e),10)}function a(){var e=Y.getSize(n);return e.isNaN()||e.isZero()?new g(s("width"),s("height")):e}var l;if(r&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+e._id++),W.add(n,this._viewEvents);var u="none";if(Y.setPrefixed(n.style,{userDrag:u,userSelect:u,touchCallout:u,contentZooming:u,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(n,"resize")){var c=this;W.add(r,this._windowEvents={resize:function(){c.setViewSize(a())}})}if(l=a(),o.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var h=this._stats.domElement,d=h.style,f=Y.getOffset(n);d.position="absolute",d.left=f.x+"px",d.top=f.y+"px",i.body.appendChild(h)}}else l=new g(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new y)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!oe.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;q._focused===this&&(q._focused=null),q._views.splice(q._views.indexOf(this),1),delete q._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),W.remove(this._element,this._viewEvents),W.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(w._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;W.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!Y.getPrefixed(i,"hidden")||"true"===o.getAttribute(t,"keepalive"))&&Y.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){oe=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new s({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new s(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new m(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=g.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new f,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Y.isInView(this._element)},isInserted:function(){return Y.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var r=n.parentNode,s=i.createElement("div");s.style.fontSize=e,r.appendChild(s),t=parseFloat(Y.getStyles(s).fontSize),r.removeChild(s)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},s.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=arguments,r=(t?s:f).read(n),i=f.read(n,0,{readNull:!0});return this.transform((new y)[e](r,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new y;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=f.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new y).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new p(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=f.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(f.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(f.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(f.read(arguments))},getEventPoint:function(e){return this.viewToProject(W.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return i&&"string"==typeof t&&(t=i.getElementById(t)),new(r?Z:q)(e,t)}}},new function(){if(r){var e,t,n,s,a,o=!1,l=!1,u=r.navigator;u.pointerEnabled||u.msPointerEnabled?(n="pointerdown MSPointerDown",s="pointermove MSPointerMove",a="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",s="touchmove",a="touchend touchcancel","ontouchstart"in r&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",s+=" mousemove",a+=" mouseup"));var c={},h={mouseout:function(e){var t=q._focused,n=W.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var r=W.getOffset(e,t._element),i=r.x,s=Math.abs,a=s(i),o=a-(1<<25);r.x=s(o)<a?o*(i<0?-1:1):i,A(t,e,t.viewToProject(r))}},scroll:E};c[n]=function(e){var t=q._focused=D(e);o||(o=!0,t._handleMouseEvent("mousedown",e))},h[s]=function(n){var r=q._focused;if(!l){var i=D(n);i?r!==i&&(r&&A(r,n),e||(e=r),r=q._focused=t=i):t&&t===r&&(e&&!e.isInserted()&&(e=null),r=q._focused=e,e=null,E())}r&&A(r,n)},h[n]=function(){l=!0},h[a]=function(e){var t=q._focused;t&&o&&t._handleMouseEvent("mouseup",e),l=o=!1},W.add(i,h),W.add(r,{load:E});var d,f,p,g,m,v,_,y,b=!1,x=!1,w={doubleclick:"click",mousedrag:"mousemove"},S=!1,C={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(e,t,n){var r=this._itemEvents,i=r.native[e],s="mousemove"===e,a=this._scope.tool,l=this;function u(e){return r.virtual[e]||l.responds(e)||a&&a.responds(e)}s&&o&&u("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var c=this.getBounds().contains(n),h=i&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,C=!1,D={};if(D[e.substr(5)]=!0,i&&w!==g&&(g&&k(g,null,"mouseleave",t,n),w&&k(w,null,"mouseenter",t,n),g=w),S^c&&(k(this,null,c?"mouseenter":"mouseleave",t,n),C=!0),(c||D.drag)&&!n.equals(f)&&(M(this,w,s?e:"mousemove",t,n,f),C=!0),S=c,D.down&&c||D.up&&d){if(M(this,w,e,t,n,d),D.down){if(y=w===v&&Date.now()-_<300,p=v=w,!x&&w){for(var E=w;E&&!E.responds("mousedrag");)E=E._parent;E&&(m=w)}d=n}else D.up&&(!x&&w===p&&(_=Date.now(),M(this,w,y?"doubleclick":"click",t,n,d),y=!1),p=m=null);S=!1,C=!0}f=n,C&&a&&(b=a._handleMouseEvent(e,t,n,D)||b),!1!==t.cancelable&&(b&&!D.move||D.down&&u("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,r){var i,s=this._scope,a=s.tool;function o(a){a.responds(e)&&(oe=s,a.emit(e,i=i||new X(e,t,n,r)))}this.isVisible()&&(o(this),a&&a.responds(e)&&o(a))},_countItemEvent:function(e,t){var n=this._itemEvents,r=n.native,i=n.virtual;for(var s in C)r[s]=(r[s]||0)+(C[s][e]||0)*t;i[e]=(i[e]||0)+t},statics:{updateFocus:E,_resetState:function(){o=l=b=S=!1,e=t=d=f=p=g=m=v=_=y=null}}}}function D(e){var t=W.getTarget(e);return t.getAttribute&&q._viewsById[t.getAttribute("id")]}function E(){var e=q._focused;if(!e||!e.isVisible())for(var n=0,r=q._views.length;n<r;n++)if((e=q._views[n]).isVisible()){q._focused=t=e;break}}function A(e,t,n){e._handleMouseEvent("mousemove",t,n)}function k(e,t,n,r,i,s,a){var o,l=!1;function u(e,n){if(e.responds(n)){if(o||(o=new $(n,r,i,t||e,s?i.subtract(s):null)),e.emit(n,o)&&(b=!0,o.prevented&&(x=!0),o.stopped))return l=!0}else{var a=w[n];if(a)return u(e,a)}}for(;e&&e!==a&&!u(e,n);)e=e._parent;return l}function M(e,t,n,r,i,s){return e._project.removeOn(n),x=b=!1,m&&k(m,null,n,r,i,s)||t&&t!==m&&!t.isDescendant(m)&&k(t,null,"mousedrag"===n?"mousemove":n,r,i,s,m)||k(e,m||t||e,n,r,i,s)}}),Z=q.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof r.HTMLCanvasElement)){var n=g.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));t=re.getCanvas(n)}var i=this._context=t.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(t,"hidpi"))){var a=r.devicePixelRatio||1,l=Y.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=a/l}q.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),1!==r){var i=this._element,s=this._context;if(!o.hasAttribute(i,"resize")){var a=i.style;a.width=t+"px",a.height=n+"px"}s.restore(),s.save(),s.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function e(t){var n,r=oe.agent;if(r&&r.firefox)n=e.base.call(this,t);else{var i=this._context,s=i.font;i.font=t+" serif",n=parseFloat(i.font),i.font=s}return n},getTextWidth:function(e,t){var n=this._context,r=n.font,i=0;n.font=e;for(var s=0,a=t.length;s<a;s++)i=Math.max(i,n.measureText(t[s]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),K=s.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return J.modifiers}}),X=K.extend({_class:"KeyEvent",initialize:function(e,t,n,r){this.type=e,this.event=t,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),J=new function(){var e,t,a={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},o={tab:"\t",space:" ",enter:"\r"},l={},u={},c=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=oe&&oe.agent;return e&&e.mac?this.meta:this.control}}});function h(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t||t===n?String.fromCharCode(e.keyCode):t,a[t]||(t.length>1?s.hyphenate(t):t.toLowerCase())}function d(t,n,r,i){var a,o=q._focused;if(l[n]=t,t?u[n]=r:delete u[n],n.length>1&&(a=s.camelize(n))in c){c[a]=t;var h=oe&&oe.agent;if("meta"===a&&h&&h.mac)if(t)e={};else{for(var f in e)f in u&&d(!1,f,e[f],i);e=null}}else t&&e&&(e[n]=r);o&&o._handleKeyEvent(t?"keydown":"keyup",i,n,r)}return W.add(i,{keydown:function(e){var n=h(e),r=oe&&oe.agent;n.length>1||r&&r.chrome&&(e.altKey||r.mac&&e.metaKey||!r.mac&&e.ctrlKey)?d(!0,n,o[n]||(n.length>1?"":n),e):t=n},keypress:function(e){if(t){var n=h(e),r=e.charCode,i=r>=32?String.fromCharCode(r):n.length>1?"":n;n!==t&&(n=i.toLowerCase()),d(!0,n,i,e),t=null}},keyup:function(e){var t=h(e);t in u&&d(!1,t,u[t],e)}}),W.add(r,{blur:function(e){for(var t in u)d(!1,t,u[t],e)}}),{modifiers:c,isDown:function(e){return!!l[e]}}},$=K.extend({_class:"MouseEvent",initialize:function(e,t,n,r,i){this.type=e,this.event=t,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Q=K.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ee=l.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){l.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){oe=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var i=r.move||r.drag,s=this.responds(e),a=this.minDistance,o=this.maxDistance,l=!1,u=this;function c(e,t){var s=n,a=i?u._point:u._downPoint||s;if(i){if(u._moveCount>=0&&s.equals(a))return!1;if(a&&(null!=e||null!=t)){var o=s.subtract(a),l=o.getLength();if(l<(e||0))return!1;t&&(s=a.add(o.normalize(Math.min(l,t))))}u._moveCount++}return u._point=s,u._lastPoint=a||s,r.down&&(u._moveCount=-1,u._downPoint=s,u._downCount++),!0}function h(){s&&(l=u.emit(e,new Q(u,e,t))||l)}if(r.down)c(),h();else if(r.up)c(null,o),h();else if(s)for(;c(a,o);)h();return l}}),te=s.extend(a,{_class:"Tween",statics:{easings:new s({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,n,r,i,s,a){this.object=t;var o=typeof s,l="function"===o;this.type=l?o:"string"===o?s:"linear",this.easing=l?s:e.easings[this.type],this.duration=i,this.running=!1,this._then=null,this._startTime=null;var u=n||r;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(r),!1!==a&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,r=function(n){return"function"==typeof n?n(t,e):n},i=0,a=n&&n.length;i<a;i++){var o=n[i],l=r(this._from[o]),u=r(this._to[o]),c=l&&u&&l.__add&&u.__add?u.__subtract(l).__multiply(t).__add(l):(u-l)*t+l;this._setProperty(this._parsedKeys[o],c)}this.responds("update")&&this.emit("update",new s({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},r=0,i=t.length;r<i;r++){var s,a=t[r],o=this._parsedKeys[a],l=this._getProperty(o);if(e){var u=this._resolveValue(l,e[a]);this._setProperty(o,u),s=(s=this._getProperty(o))&&s.clone?s.clone():s,this._setProperty(o,l)}else s=l&&l.clone?l.clone():l;n[a]=s}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}if("string"==typeof t){var r=t.match(/^[+\-*/]=(.*)/);if(r){var i=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],i)}}}return t},_calculate:function(e,t,n){return oe.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n],s=i.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[i]=s.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,r=0,i=e.length-(t||0);r<i&&n;r++)n=n[e[r]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),ne=function(e){var n=new t.XMLHttpRequest;return n.open((e.method||"get").toUpperCase(),e.url,s.pick(e.async,!0)),e.mimeType&&n.overrideMimeType(e.mimeType),n.onload=function(){var t=n.status;0===t||200===t?e.onLoad&&e.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var t=n.status,r='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(r);e.onError(r,t)},n.send(null)},re=s.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,n){if(!r)return null;var s,a=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?s=this.canvases.pop():(s=i.createElement("canvas"),a=!1);var o=s.getContext("2d",n||{});if(!o)throw new Error("Canvas "+s+" is unable to provide a 2D context.");return s.width===e&&s.height===t?a&&o.clearRect(0,0,e+1,t+1):(s.width=e,s.height=t),o.save(),s},getContext:function(e,t,n){var r=this.getCanvas(e,t,n);return r?r.getContext("2d",n||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ie=new function(){var e,t,n,r,i,a,o,l,u,c,h,d=Math.min,f=Math.max,p=Math.abs;function g(e,t,n){return.2989*e+.587*t+.114*n}function m(e,t,n,r){var i=r-g(e,t,n),s=(r=g(u=e+i,c=t+i,h=n+i),d(u,c,h)),a=f(u,c,h);if(s<0){var o=r-s;u=r+(u-r)*r/o,c=r+(c-r)*r/o,h=r+(h-r)*r/o}if(a>255){var l=255-r,p=a-r;u=r+(u-r)*l/p,c=r+(c-r)*l/p,h=r+(h-r)*l/p}}function v(e,t,n){return f(e,t,n)-d(e,t,n)}function _(e,t,n,r){var i,s=[e,t,n],a=f(e,t,n),o=d(e,t,n);i=0===d(o=o===e?0:o===t?1:2,a=a===e?0:a===t?1:2)?1===f(o,a)?2:1:0,s[a]>s[o]?(s[i]=(s[i]-s[o])*r/(s[a]-s[o]),s[a]=r):s[i]=s[a]=0,s[o]=0,u=s[0],c=s[1],h=s[2]}var y={multiply:function(){u=i*e/255,c=a*t/255,h=o*n/255},screen:function(){u=i+e-i*e/255,c=a+t-a*t/255,h=o+n-o*n/255},overlay:function(){u=i<128?2*i*e/255:255-2*(255-i)*(255-e)/255,c=a<128?2*a*t/255:255-2*(255-a)*(255-t)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var r=e*i/255;u=r+i*(255-(255-i)*(255-e)/255-r)/255,c=(r=t*a/255)+a*(255-(255-a)*(255-t)/255-r)/255,h=(r=n*o/255)+o*(255-(255-o)*(255-n)/255-r)/255},"hard-light":function(){u=e<128?2*e*i/255:255-2*(255-e)*(255-i)/255,c=t<128?2*t*a/255:255-2*(255-t)*(255-a)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===i?0:255===e?255:d(255,255*i/(255-e)),c=0===a?0:255===t?255:d(255,255*a/(255-t)),h=0===o?0:255===n?255:d(255,255*o/(255-n))},"color-burn":function(){u=255===i?255:0===e?0:f(0,255-255*(255-i)/e),c=255===a?255:0===t?0:f(0,255-255*(255-a)/t),h=255===o?255:0===n?0:f(0,255-255*(255-o)/n)},darken:function(){u=i<e?i:e,c=a<t?a:t,h=o<n?o:n},lighten:function(){u=i>e?i:e,c=a>t?a:t,h=o>n?o:n},difference:function(){(u=i-e)<0&&(u=-u),(c=a-t)<0&&(c=-c),(h=o-n)<0&&(h=-h)},exclusion:function(){u=i+e*(255-i-i)/255,c=a+t*(255-a-a)/255,h=o+n*(255-o-o)/255},hue:function(){_(e,t,n,v(i,a,o)),m(u,c,h,g(i,a,o))},saturation:function(){_(i,a,o,v(e,t,n)),m(u,c,h,g(i,a,o))},luminosity:function(){m(i,a,o,g(e,t,n))},color:function(){m(e,t,n,g(i,a,o))},add:function(){u=d(i+e,255),c=d(a+t,255),h=d(o+n,255)},subtract:function(){u=f(i-e,0),c=f(a-t,0),h=f(o-n,0)},average:function(){u=(i+e)/2,c=(a+t)/2,h=(o+n)/2},negation:function(){u=255-p(255-e-i),c=255-p(255-t-a),h=255-p(255-n-o)}},b=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(e){this[e]=!0},{}),x=re.getContext(1,1,{willReadFrequently:!0});x&&(s.each(y,function(e,t){var n="darken"===t,r=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=t,x.globalCompositeOperation===t&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),r=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}x.restore(),b[t]=r}),re.release(x)),this.process=function(s,d,f,p,g){var m=d.canvas,v="normal"===s;if(v||b[s])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,v||(f.globalCompositeOperation=s),f.drawImage(m,g.x,g.y),f.restore();else{var _=y[s];if(!_)return;for(var x=f.getImageData(g.x,g.y,m.width,m.height),w=x.data,S=d.getImageData(0,0,m.width,m.height).data,C=0,D=w.length;C<D;C+=4){e=S[C],i=w[C],t=S[C+1],a=w[C+1],n=S[C+2],o=w[C+2],r=S[C+3],l=w[C+3],_();var E=r*p/255,A=1-E;w[C]=E*u+A*i,w[C+1]=E*c+A*a,w[C+2]=E*h+A*o,w[C+3]=r*p+A*l}f.putImageData(x,g.x,g.y)}}},se=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function s(e,t,n){for(var i in t){var s=t[i],a=r[i];"number"==typeof s&&n&&(s=n.number(s)),a?e.setAttributeNS(a,i,s):e.setAttribute(i,s)}return e}return{svg:e,xmlns:t,xlink:n,create:function(t,n,r){return s(i.createElementNS(e,t),n,r)},get:function(e,t){var n=r[t],i=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===i?null:i},set:s}},ae=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof P||e instanceof D||e instanceof z)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=s.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&s.each(r,function(e,t){this[e]=t},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});new function(){var e;function n(t,n,r){var i,a=new s,o=t.getTranslation();if(n&&(t.isInvertible()?(i=(t=t._shiftless())._inverseTransform(o),o=null):i=new f,a[r?"cx":"x"]=i.x,a[r?"cy":"y"]=i.y),!t.isIdentity()){var l=t.decompose();if(l){var u=[],c=l.rotation,d=l.scaling,p=l.skewing;o&&!o.isZero()&&u.push("translate("+e.point(o)+")"),c&&u.push("rotate("+e.number(c)+")"),(!h.isZero(d.x-1)||!h.isZero(d.y-1))&&u.push("scale("+e.point(d)+")"),p.x&&u.push("skewX("+e.number(p.x)+")"),p.y&&u.push("skewY("+e.number(p.y)+")"),a.transform=u.join(" ")}else a.transform="matrix("+t.getValues().join(",")+")"}return a}function r(t,r){for(var i=n(t._matrix),s=t._children,a=se.create("g",i,e),o=0,l=s.length;o<l;o++){var u=s[o],c=m(u,r);if(c)if(u.isClipMask()){var h=se.create("clipPath");h.appendChild(c),p(u,h,"clip"),se.set(a,{"clip-path":"url(#"+h.id+")"})}else a.appendChild(c)}return a}function i(t){var r=t._type,i=t._radius,s=n(t._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var a=t._size,o=a.width,l=a.height;s.x-=o/2,s.y-=l/2,s.width=o,s.height=l,i.isZero()&&(i=null)}return i&&("circle"===r?s.r=i:(s.rx=i.width,s.ry=i.height)),se.create(r,s,e)}var a,o={Group:r,Layer:r,Raster:function(t,r){var i=n(t._matrix,!0),s=t.getSize(),a=t.getImage();return i.x-=s.width/2,i.y-=s.height/2,i.width=s.width,i.height=s.height,i.href=0==r.embedImages&&a&&a.src||t.toDataURL(),se.create("image",i,e)},Path:function(t,r){var s=r.matchShapes;if(s){var a=t.toShape(!1);if(a)return i(a)}var o,l=t._segments,u=l.length,c=n(t._matrix);if(s&&u>=2&&!t.hasHandles())if(u>2){o=t._closed?"polygon":"polyline";for(var h=[],d=0;d<u;d++)h.push(e.point(l[d]._point));c.points=h.join(" ")}else{o="line";var f=l[0]._point,p=l[1]._point;c.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else o="path",c.d=t.getPathData(null,r.precision);return se.create(o,c,e)},Shape:i,CompoundPath:function(t,r){var i=n(t._matrix),s=t.getPathData(null,r.precision);return s&&(i.d=s),se.create("path",i,e)},SymbolItem:function(t,r){var i=n(t._matrix,!0),s=t._definition,a=u(s,"symbol"),o=s._item,l=o.getStrokeBounds();return a||((a=se.create("symbol",{viewBox:e.rectangle(l)})).appendChild(m(o,r)),p(s,a,"symbol")),i.href="#"+a.id,i.x+=l.x,i.y+=l.y,i.width=l.width,i.height=l.height,i.overflow="visible",se.create("use",i,e)},PointText:function(t){var r=se.create("text",n(t._matrix,!0),e);return r.textContent=t._content,r}};function l(t,n,r){var i={},a=!r&&t.getParent(),o=[];return null!=t._name&&(i.id=t._name),s.each(ae,function(n){var r=n.get,l=n.type,c=t[r]();if(n.exportFilter?n.exportFilter(t,c):!a||!s.equals(a[r](),c)){if("color"===l&&null!=c){var h=c.getAlpha();h<1&&(i[n.attribute+"-opacity"]=h)}"style"===l?o.push(n.attribute+": "+c):i[n.attribute]=null==c?"none":"color"===l?c.gradient?function(t){var n=u(t,"color");if(!n){var r,i=t.getGradient(),s=i._radial,a=t.getOrigin(),o=t.getDestination();if(s){r={cx:a.x,cy:a.y,r:a.getDistance(o)};var l=t.getHighlight();l&&(r.fx=l.x,r.fy=l.y)}else r={x1:a.x,y1:a.y,x2:o.x,y2:o.y};r.gradientUnits="userSpaceOnUse",n=se.create((s?"radial":"linear")+"Gradient",r,e);for(var c=i._stops,h=0,d=c.length;h<d;h++){var f=c[h],g=f._color,m=g.getAlpha(),v=f._offset;r={offset:null!==v&&void 0!==v?v:h/(d-1)},g&&(r["stop-color"]=g.toCSS(!0)),m<1&&(r["stop-opacity"]=m),n.appendChild(se.create("stop",r,e))}p(t,n,"color")}return"url(#"+n.id+")"}(c):c.toCSS(!0):"array"===l?c.join(","):"lookup"===l?n.toSVG[c]:c}}),o.length&&(i.style=o.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),se.set(n,i,e)}function u(e,t){return a||(a={ids:{},svgs:{}}),e&&a.svgs[t+"-"+(e._id||e.__id||(e.__id=d.get("svg")))]}function p(e,t,n){a||u();var r=a.ids[n]=(a.ids[n]||0)+1;t.id=n+"-"+r,a.svgs[n+"-"+(e._id||e.__id)]=t}function g(e,n){var r=e,i=null;if(a){for(var s in r="svg"===e.nodeName.toLowerCase()&&e,a.svgs)i||(r||(r=se.create("svg")).appendChild(e),i=r.insertBefore(se.create("defs"),r.firstChild)),i.appendChild(a.svgs[s]);a=null}return n.asString?(new t.XMLSerializer).serializeToString(r):r}function m(e,t,n){var r=o[e._class],i=r&&r(e,t);if(i){var s=t.onExport;s&&(i=s(e,i,t)||i);var a=JSON.stringify(e._data);a&&"{}"!==a&&"null"!==a&&i.setAttribute("data-paper-data",a)}return i&&l(e,i,n)}function _(t){return t||(t={}),e=new c(t.precision),t}w.inject({exportSVG:function(e){return g(m(this,e=_(e),!0),e)}}),x.inject({exportSVG:function(t){t=_(t);var r=this._children,i=this.getView(),a=s.pick(t.bounds,"view"),o=t.matrix||"view"===a&&i._matrix,l=o&&y.read([o]),u="view"===a?new v([0,0],i.getViewSize()):"content"===a?w._getBounds(r,l,{stroke:!0}).rect:v.read([a],0,{readNull:!0}),c={version:"1.1",xmlns:se.svg,"xmlns:xlink":se.xlink};u&&(c.width=u.width,c.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(c.viewBox=e.rectangle(u)));var h=se.create("svg",c,e),d=h;l&&!l.isIdentity()&&(d=h.appendChild(se.create("g",n(l),e)));for(var f=0,p=r.length;f<p;f++)d.appendChild(m(r[f],t,!0));return g(h,t)}})},new function(){var e,a={};function o(t,n,r,i,s,a){var o=se.get(t,n)||a,l=null==o?i?null:r?"":0:r?o:parseFloat(o);return/%\s*$/.test(o)?l/100*(s?1:e[/x|^width/.test(n)?"width":"height"]):l}function l(e,t,n,r,i,s,a){return t=o(e,t||"x",!1,r,i,s),n=o(e,n||"y",!1,r,i,a),!r||null!=t&&null!=n?new f(t,n):null}function u(e,t,n,r,i){return t=o(e,t||"width",!1,r,i),n=o(e,n||"height",!1,r,i),!r||null!=t&&null!=n?new g(t,n):null}function c(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?T(e)||e:"lookup"===t?n[e]:e}function h(e,t,n,r){var i=e.childNodes,s="clippath"===t,a="defs"===t,o=new S,l=o._project,u=l._currentStyle,c=[];if(!s&&!a&&(o=M(o,e,r),l._currentStyle=o._style.clone()),r)for(var h=e.querySelectorAll("defs"),d=0,f=h.length;d<f;d++)I(h[d],n,!1);for(d=0,f=i.length;d<f;d++){var p,g=i[d];1===g.nodeType&&!/^defs$/i.test(g.nodeName)&&(p=I(g,n,!1))&&!(p instanceof k)&&c.push(p)}return o.addChildren(c),s&&(o=M(o.reduce(),e,r)),l._currentStyle=u,(s||a)&&(o.remove(),o=null),o}function d(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,s=n.length;i<s;i+=2)r.push(new f(parseFloat(n[i]),parseFloat(n[i+1])));var a=new B(r);return"polygon"===t&&a.closePath(),a}function p(e,t){var n,r=(o(e,"href",!0)||"").substring(1),i="radialgradient"===t;if(r)(n=a[r].getGradient())._radial^i&&((n=n.clone())._radial=i);else{for(var s=e.childNodes,u=[],c=0,h=s.length;c<h;c++){var d=s[c];1===d.nodeType&&u.push(M(new H,d))}n=new U(u,i)}var f,p,g,m="userSpaceOnUse"!==o(e,"gradientUnits",!0);return i?(p=(f=l(e,"cx","cy",!1,m,"50%","50%")).add(o(e,"r",!1,!1,m,"50%"),0),g=l(e,"fx","fy",!0,m)):(f=l(e,"x1","y1",!1,m,"0%","0%"),p=l(e,"x2","y2",!1,m,"100%","0%")),M(new V(n,f,p,g),e)._scaleToBounds=m,null}var m={"#document":function(e,t,n,r){for(var i=e.childNodes,s=0,a=i.length;s<a;s++){var o=i[s];if(1===o.nodeType)return I(o,n,r)}},g:h,svg:h,clippath:h,polygon:d,polyline:d,path:function(e){return P.create(e.getAttribute("d"))},lineargradient:p,radialgradient:p,image:function(e){var t=new E(o(e,"href",!0));return t.on("load",function(){var t=u(e);this.setSize(t);var n=l(e).add(t.divide(2));this._matrix.append((new y).translate(n))}),t},symbol:function(e,t,n,r){return new k(h(e,t,n,r),!0)},defs:h,use:function(e){var t=(o(e,"href",!0)||"").substring(1),n=a[t],r=l(e);return n?n instanceof k?n.place(r):n.clone().translate(r):null},circle:function(e){return new D.Circle(l(e,"cx","cy"),o(e,"r"))},ellipse:function(e){return new D.Ellipse({center:l(e,"cx","cy"),radius:u(e,"rx","ry")})},rect:function(e){return new D.Rectangle(new v(l(e),u(e)),u(e,"rx","ry"))},line:function(e){return new B.Line(l(e,"x1","y1"),l(e,"x2","y2"))},text:function(e){var t=new j(l(e).add(l(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t},switch:h};function _(e,t,n,r){if(e.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),s=new y,a=0,o=i.length;a<o;a++){var l=i[a];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),d=0,f=h.length;d<f;d++)h[d]=parseFloat(h[d]);switch(c){case"matrix":s.append(new y(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":s.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":s.translate(h[0],h[1]||0);break;case"scale":s.scale(h);break;case"skewX":s.skew(h[0],0);break;case"skewY":s.skew(0,h[0])}}e.transform(s)}}function b(e,t,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=e[r]&&e[r]();i&&i.setAlpha(parseFloat(t))}var C=s.set(s.each(ae,function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](c(n,e.type,e.fromSVG)),"color"===e.type)){var r=t[e.get]();if(r&&r._scaleToBounds){var i=t.getBounds();r.transform((new y).translate(i.getPoint()).scale(i.getSize()))}}}},{}),{id:function(e,t){a[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=T(t);if(n){if((n=n.clone()).setClipMask(!0),!(e instanceof S))return new S(n,e);e.insertChild(0,n)}},gradientTransform:_,transform:_,"fill-opacity":b,"stroke-opacity":b,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,r,i){var s,a=new v(c(t,"array")),o=u(r,null,null,!0);if(e instanceof S){var l=o?o.divide(a.getSize()):1,h=(new y).scale(l).translate(a.getPoint().negate());s=e}else e instanceof k&&(o&&a.setSize(o),s=e._item);if(s){if("visible"!==A(r,"overflow",i)){var d=new D.Rectangle(a);d.setClipMask(!0),s.addChild(d)}h&&s.transform(h)}}});function A(e,t,r){var i=e.attributes[t],a=i&&i.value;if(!a&&e.style){var o=s.camelize(t);!(a=e.style[o])&&r.node[o]!==r.parent[o]&&(a=r.node[o])}return a?"none"===a?null:a:n}function M(e,t,r){var i=t.parentNode,a={node:Y.getStyles(t)||{},parent:!r&&!/^defs$/i.test(i.tagName)&&Y.getStyles(i)||{}};return s.each(C,function(r,i){var s=A(t,i,a);e=s!==n&&r(e,s,i,t,a)||e}),e}function T(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/),n=t&&t[1],i=n&&a[r?n.replace(r.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function I(t,n,r){var o,l,c,h=t.nodeName.toLowerCase(),d="#document"!==h,f=i.body;r&&d&&(e=oe.getView().getSize(),e=u(t,null,null,!0)||e,o=se.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),l=t.parentNode,c=t.nextSibling,o.appendChild(t),f.appendChild(o));var p=oe.settings,g=p.applyMatrix,v=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var _=m[h],y=_&&_(t,h,n,r)||null;if(p.insertItems=v,p.applyMatrix=g,y){d&&!(y instanceof S)&&(y=M(y,t,r));var b=n.onImport,x=d&&t.getAttribute("data-paper-data");b&&(y=b(t,y,n)||y),n.expandShapes&&y instanceof D&&(y.remove(),y=y.toPath()),x&&(y._data=JSON.parse(x))}return o&&(f.removeChild(o),l&&(c?l.insertBefore(t,c):l.appendChild(t))),r&&(a={},y&&s.pick(n.applyMatrix,g)&&y.matrix.apply(!0,!0)),y}function O(e,r,s){if(!e)return null;r="function"==typeof r?{onLoad:r}:r||{};var a=oe,o=null;function l(i){try{var l="object"==typeof i?i:(new t.DOMParser).parseFromString(i.trim(),"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+e);oe=a,o=I(l,r,!0),(!r||!1!==r.insert)&&s._insertItem(n,o);var c=r.onLoad;c&&c(o,i)}catch(h){u(h)}}function u(e,t){var n=r.onError;if(!n)throw new Error(e);n(e,t)}if("string"!=typeof e||/^[\s\S]*</.test(e)){if(typeof File<"u"&&e instanceof File){var c=new FileReader;return c.onload=function(){l(c.result)},c.onerror=function(){u(c.error)},c.readAsText(e)}l(e)}else{var h=i.getElementById(e);h?l(h):ne({url:e,async:!0,onLoad:l,onError:u})}return o}w.inject({importSVG:function(e,t){return O(e,t,this)}}),x.inject({importSVG:function(e,t){return this.activate(),O(e,t,this)}})},s.exports.PaperScript=function(){var e,n,a=this,l=a.acorn;if(!l)try{l=Ui()}catch(x){}function u(e,t){return(a.acorn||l).parse(e,t)}l||(l=e={},n=function(e){var t,n,r,i;e.version="0.5.0",e.parse=function(e,i){return n=String(e),r=n.length,a(i),We(),function(e){v=_=o,t.locations&&(y=new Ye),b=w=null,x=[],$e();var n=e||ct(),r=!0;for(e||(n.body=[]);d!==T;){var i=wt();n.body.push(i),r&&ft(i)&&ot(!0),r=!1}return dt(n,"Program")}(t.program)};var s=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function a(e){for(var n in t=e||{},s)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=s[n]);i=t.sourceFile||null}var o,l,u,c,h,d,f,p,g,m,v,_,y,b,x,w,S=e.getLineInfo=function(e,t){for(var n=1,r=0;;){Ue.lastIndex=r;var i=Ue.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}};function C(e,t){var r=S(n,e);t+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=r,i.raisedAt=o,i}e.tokenize=function(e,i){n=String(e),r=n.length,a(i),We();var s={};function v(e){return _=u,$e(e),s.start=l,s.end=u,s.startLoc=c,s.endLoc=h,s.type=d,s.value=f,s}return v.jumpTo=function(e,r){if(o=e,t.locations){g=1,m=Ue.lastIndex=0;for(var i;(i=Ue.exec(n))&&i.index<e;)++g,m=i.index+i[0].length}p=r,Xe()},v};var D=[],E={type:"num"},A={type:"regexp"},k={type:"string"},M={type:"name"},T={type:"eof"},I={keyword:"break"},O={keyword:"case",beforeExpr:!0},L={keyword:"catch"},P={keyword:"continue"},B={keyword:"debugger"},N={keyword:"default"},R={keyword:"do",isLoop:!0},F={keyword:"else",beforeExpr:!0},z={keyword:"finally"},j={keyword:"for",isLoop:!0},V={keyword:"function"},U={keyword:"if"},H={keyword:"return",beforeExpr:!0},G={keyword:"switch"},Y={keyword:"throw",beforeExpr:!0},W={keyword:"try"},q={keyword:"var"},Z={keyword:"while",isLoop:!0},K={keyword:"with"},X={keyword:"new",beforeExpr:!0},J={keyword:"this"},$={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:I,case:O,catch:L,continue:P,debugger:B,default:N,do:R,else:F,finally:z,for:j,function:V,if:U,return:H,switch:G,throw:Y,try:W,var:q,while:Z,with:K,null:$,true:Q,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:J,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},re={type:"[",beforeExpr:!0},ie={type:"]"},se={type:"{",beforeExpr:!0},ae={type:"}"},oe={type:"(",beforeExpr:!0},le={type:")"},ue={type:",",beforeExpr:!0},ce={type:";",beforeExpr:!0},he={type:":",beforeExpr:!0},de={type:"."},fe={type:"?",beforeExpr:!0},pe={binop:10,beforeExpr:!0},ge={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},ve={postfix:!0,prefix:!0,isUpdate:!0},_e={prefix:!0,beforeExpr:!0},ye={binop:1,beforeExpr:!0},be={binop:2,beforeExpr:!0},xe={binop:3,beforeExpr:!0},we={binop:4,beforeExpr:!0},Se={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},De={binop:7,beforeExpr:!0},Ee={binop:8,beforeExpr:!0},Ae={binop:9,prefix:!0,beforeExpr:!0},ke={binop:10,beforeExpr:!0};for(var Me in e.tokTypes={bracketL:re,bracketR:ie,braceL:se,braceR:ae,parenL:oe,parenR:le,comma:ue,semi:ce,colon:he,dot:de,question:fe,slash:pe,eq:ge,name:M,eof:T,num:E,regexp:A,string:k},ne)e.tokTypes["_"+Me]=ne[Me];function Te(e){e=e.split(" ");var t="",n=[];e:for(var r=0;r<e.length;++r){for(var i=0;i<n.length;++i)if(n[i][0].length==e[r].length){n[i].push(e[r]);continue e}n.push([e[r]])}function s(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort(function(e,t){return t.length-e.length}),t+="switch(str.length){",r=0;r<n.length;++r){var a=n[r];t+="case "+a[0].length+":",s(a)}t+="}"}else s(e);return new Function("str",t)}var Ie,Oe=Te("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Le=Te("class enum extends super const export import"),Pe=Te("implements interface let package private protected public static yield"),Be=Te("eval arguments"),Ne=Te("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Re=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Fe="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",ze=new RegExp("["+Fe+"]"),je=new RegExp("["+Fe+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Ve=/[\n\r\u2028\u2029]/,Ue=/\r\n|[\n\r\u2028\u2029]/g,He=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&ze.test(String.fromCharCode(e)))},Ge=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&je.test(String.fromCharCode(e))))};function Ye(){this.line=g,this.column=o-m}function We(){g=1,o=m=0,p=!0,Xe()}function qe(e,n){u=o,t.locations&&(h=new Ye),d=e,Xe(),f=n,p=e.beforeExpr}function Ze(){var e=t.onComment&&t.locations&&new Ye,r=o,i=n.indexOf("*/",o+=2);if(-1===i&&C(o-2,"Unterminated comment"),o=i+2,t.locations){Ue.lastIndex=r;for(var s;(s=Ue.exec(n))&&s.index<o;)++g,m=s.index+s[0].length}t.onComment&&t.onComment(!0,n.slice(r+2,i),r,o,e,t.locations&&new Ye)}function Ke(){for(var e=o,i=t.onComment&&t.locations&&new Ye,s=n.charCodeAt(o+=2);o<r&&10!==s&&13!==s&&8232!==s&&8233!==s;)++o,s=n.charCodeAt(o);t.onComment&&t.onComment(!1,n.slice(e+2,o),e,o,i,t.locations&&new Ye)}function Xe(){for(;o<r;){var e=n.charCodeAt(o);if(32===e)++o;else if(13===e)++o,10===(i=n.charCodeAt(o))&&++o,t.locations&&(++g,m=o);else if(10===e||8232===e||8233===e)++o,t.locations&&(++g,m=o);else if(e>8&&e<14)++o;else if(47===e){var i;if(42===(i=n.charCodeAt(o+1)))Ze();else{if(47!==i)break;Ke()}}else if(160===e)++o;else{if(!(e>=5760&&Re.test(String.fromCharCode(e))))break;++o}}}function Je(e){switch(e){case 46:return function(){var e=n.charCodeAt(o+1);return e>=48&&e<=57?nt(!0):(++o,qe(de))}();case 40:return++o,qe(oe);case 41:return++o,qe(le);case 59:return++o,qe(ce);case 44:return++o,qe(ue);case 91:return++o,qe(re);case 93:return++o,qe(ie);case 123:return++o,qe(se);case 125:return++o,qe(ae);case 58:return++o,qe(he);case 63:return++o,qe(fe);case 48:var i=n.charCodeAt(o+1);if(120===i||88===i)return function(){o+=2;var e=tt(16);return null==e&&C(l+2,"Expected hexadecimal number"),He(n.charCodeAt(o))&&C(o,"Identifier directly after number"),qe(E,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return nt(!1);case 34:case 39:return function(e){o++;for(var i="";;){o>=r&&C(l,"Unterminated string constant");var s=n.charCodeAt(o);if(s===e)return++o,qe(k,i);if(92===s){s=n.charCodeAt(++o);var a=/^[0-7]+/.exec(n.slice(o,o+3));for(a&&(a=a[0]);a&&parseInt(a,8)>255;)a=a.slice(0,-1);if("0"===a&&(a=null),++o,a)w&&C(o-2,"Octal literal in strict mode"),i+=String.fromCharCode(parseInt(a,8)),o+=a.length-1;else switch(s){case 110:i+="\n";break;case 114:i+="\r";break;case 120:i+=String.fromCharCode(rt(2));break;case 117:i+=String.fromCharCode(rt(4));break;case 85:i+=String.fromCharCode(rt(8));break;case 116:i+="\t";break;case 98:i+="\b";break;case 118:i+="\v";break;case 102:i+="\f";break;case 48:i+="\0";break;case 13:10===n.charCodeAt(o)&&++o;case 10:t.locations&&(m=o,++g);break;default:i+=String.fromCharCode(s)}}else(13===s||10===s||8232===s||8233===s)&&C(l,"Unterminated string constant"),i+=String.fromCharCode(s),++o}}(e);case 47:return function(){var e=n.charCodeAt(o+1);return p?(++o,et()):61===e?Qe(me,2):Qe(pe,1)}();case 37:case 42:return 61===n.charCodeAt(o+1)?Qe(me,2):Qe(ke,1);case 124:case 38:return function(e){var t=n.charCodeAt(o+1);return t===e?Qe(124===e?ye:be,2):61===t?Qe(me,2):Qe(124===e?xe:Se,1)}(e);case 94:return 61===n.charCodeAt(o+1)?Qe(me,2):Qe(we,1);case 43:case 45:return function(e){var t=n.charCodeAt(o+1);return t===e?45==t&&62==n.charCodeAt(o+2)&&Ve.test(n.slice(_,o))?(o+=3,Ke(),Xe(),$e()):Qe(ve,2):61===t?Qe(me,2):Qe(Ae,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(o+1),r=1;return t===e?(r=62===e&&62===n.charCodeAt(o+2)?3:2,61===n.charCodeAt(o+r)?Qe(me,r+1):Qe(Ee,r)):33==t&&60==e&&45==n.charCodeAt(o+2)&&45==n.charCodeAt(o+3)?(o+=4,Ke(),Xe(),$e()):(61===t&&(r=61===n.charCodeAt(o+2)?3:2),Qe(De,r))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(o+1)?Qe(Ce,61===n.charCodeAt(o+2)?3:2):Qe(61===e?ge:_e,1)}(e);case 126:return Qe(_e,1)}return!1}function $e(e){if(e?o=l+1:l=o,t.locations&&(c=new Ye),e)return et();if(o>=r)return qe(T);var i=n.charCodeAt(o);if(He(i)||92===i)return st();var s=Je(i);if(!1===s){var a=String.fromCharCode(i);if("\\"===a||ze.test(a))return st();C(o,"Unexpected character '"+a+"'")}return s}function Qe(e,t){var r=n.slice(o,o+t);o+=t,qe(e,r)}function et(){for(var e,t,i=o;;){o>=r&&C(i,"Unterminated regular expression");var s=n.charAt(o);if(Ve.test(s)&&C(i,"Unterminated regular expression"),e)e=!1;else{if("["===s)t=!0;else if("]"===s&&t)t=!1;else if("/"===s&&!t)break;e="\\"===s}++o}var a=n.slice(i,o);++o;var l=it();l&&!/^[gmsiy]*$/.test(l)&&C(i,"Invalid regexp flag");try{var u=new RegExp(a,l)}catch(c){c instanceof SyntaxError&&C(i,c.message),C(c)}return qe(A,u)}function tt(e,t){for(var r=o,i=0,s=0,a=null!==t&&void 0!==t?t:1/0;s<a;++s){var l,u=n.charCodeAt(o);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=e)break;++o,i=i*e+l}return o===r||null!=t&&o-r!==t?null:i}function nt(e){var t=o,r=!1,i=48===n.charCodeAt(o);!e&&null===tt(10)&&C(t,"Invalid number"),46===n.charCodeAt(o)&&(++o,tt(10),r=!0);var s=n.charCodeAt(o);(69===s||101===s)&&((43===(s=n.charCodeAt(++o))||45===s)&&++o,null===tt(10)&&C(t,"Invalid number"),r=!0),He(n.charCodeAt(o))&&C(o,"Identifier directly after number");var a,l=n.slice(t,o);return r?a=parseFloat(l):i&&1!==l.length?/[89]/.test(l)||w?C(t,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),qe(E,a)}function rt(e){var t=tt(16,e);return null===t&&C(l,"Bad character escape sequence"),t}function it(){Ie=!1;for(var e,t=!0,r=o;;){var i=n.charCodeAt(o);if(Ge(i))Ie&&(e+=n.charAt(o)),++o;else{if(92!==i)break;Ie||(e=n.slice(r,o)),Ie=!0,117!=n.charCodeAt(++o)&&C(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var s=rt(4),a=String.fromCharCode(s);a||C(o-1,"Invalid Unicode escape"),(t?He(s):Ge(s))||C(o-4,"Invalid Unicode escape"),e+=a}t=!1}return Ie?e:n.slice(r,o)}function st(){var e=it(),t=M;return!Ie&&Ne(e)&&(t=ne[e]),qe(t,e)}function at(){v=l,_=u,y=h,$e()}function ot(e){if(w=e,o=l,t.locations)for(;o<m;)m=n.lastIndexOf("\n",m-2)+1,--g;Xe(),$e()}function lt(){this.type=null,this.start=l,this.end=null}function ut(){this.start=c,this.end=null,null!==i&&(this.source=i)}function ct(){var e=new lt;return t.locations&&(e.loc=new ut),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[l,0]),e}function ht(e){var n=new lt;return n.start=e.start,t.locations&&(n.loc=new ut,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function dt(e,n){return e.type=n,e.end=_,t.locations&&(e.loc.end=y),t.ranges&&(e.range[1]=_),e}function ft(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function pt(e){if(d===e)return at(),!0}function gt(){return!t.strictSemicolons&&(d===T||d===ae||Ve.test(n.slice(_,l)))}function mt(){!pt(ce)&&!gt()&&_t()}function vt(e){d===e?at():_t()}function _t(){C(l,"Unexpected token")}function yt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&C(e.start,"Assigning to rvalue"),w&&"Identifier"===e.type&&Be(e.name)&&C(e.start,"Assigning to "+e.name+" in strict mode")}var bt={kind:"loop"},xt={kind:"switch"};function wt(){(d===pe||d===me&&"/="==f)&&$e(!0);var e=d,r=ct();switch(e){case I:case P:at();var i=e===I;pt(ce)||gt()?r.label=null:d!==M?_t():(r.label=Rt(),mt());for(var s=0;s<x.length;++s){var a=x[s];if((null==r.label||a.name===r.label.name)&&(null!=a.kind&&(i||"loop"===a.kind)||r.label&&i))break}return s===x.length&&C(r.start,"Unsyntactic "+e.keyword),dt(r,i?"BreakStatement":"ContinueStatement");case B:return at(),mt(),dt(r,"DebuggerStatement");case R:return at(),x.push(bt),r.body=wt(),x.pop(),vt(Z),r.test=St(),mt(),dt(r,"DoWhileStatement");case j:if(at(),x.push(bt),vt(oe),d===ce)return Dt(r,null);if(d===q){var o=ct();return at(),At(o,!0),dt(o,"VariableDeclaration"),1===o.declarations.length&&pt(te)?Et(r,o):Dt(r,o)}return o=kt(!1,!0),pt(te)?(yt(o),Et(r,o)):Dt(r,o);case V:return at(),Bt(r,!0);case U:return at(),r.test=St(),r.consequent=wt(),r.alternate=pt(F)?wt():null,dt(r,"IfStatement");case H:return!b&&!t.allowReturnOutsideFunction&&C(l,"'return' outside of function"),at(),pt(ce)||gt()?r.argument=null:(r.argument=kt(),mt()),dt(r,"ReturnStatement");case G:at(),r.discriminant=St(),r.cases=[],vt(se),x.push(xt);for(var u,c;d!=ae;)if(d===O||d===N){var h=d===O;u&&dt(u,"SwitchCase"),r.cases.push(u=ct()),u.consequent=[],at(),h?u.test=kt():(c&&C(v,"Multiple default clauses"),c=!0,u.test=null),vt(he)}else u||_t(),u.consequent.push(wt());return u&&dt(u,"SwitchCase"),at(),x.pop(),dt(r,"SwitchStatement");case Y:return at(),Ve.test(n.slice(_,l))&&C(_,"Illegal newline after throw"),r.argument=kt(),mt(),dt(r,"ThrowStatement");case W:if(at(),r.block=Ct(),r.handler=null,d===L){var p=ct();at(),vt(oe),p.param=Rt(),w&&Be(p.param.name)&&C(p.param.start,"Binding "+p.param.name+" in strict mode"),vt(le),p.guard=null,p.body=Ct(),r.handler=dt(p,"CatchClause")}return r.guardedHandlers=D,r.finalizer=pt(z)?Ct():null,!r.handler&&!r.finalizer&&C(r.start,"Missing catch or finally clause"),dt(r,"TryStatement");case q:return at(),At(r),mt(),dt(r,"VariableDeclaration");case Z:return at(),r.test=St(),x.push(bt),r.body=wt(),x.pop(),dt(r,"WhileStatement");case K:return w&&C(l,"'with' in strict mode"),at(),r.object=St(),r.body=wt(),dt(r,"WithStatement");case se:return Ct();case ce:return at(),dt(r,"EmptyStatement");default:var g=f,m=kt();if(e===M&&"Identifier"===m.type&&pt(he)){for(s=0;s<x.length;++s)x[s].name===g&&C(m.start,"Label '"+g+"' is already declared");var y=d.isLoop?"loop":d===G?"switch":null;return x.push({name:g,kind:y}),r.body=wt(),x.pop(),r.label=m,dt(r,"LabeledStatement")}return r.expression=m,mt(),dt(r,"ExpressionStatement")}}function St(){vt(oe);var e=kt();return vt(le),e}function Ct(e){var t,n=ct(),r=!0,i=!1;for(n.body=[],vt(se);!pt(ae);){var s=wt();n.body.push(s),r&&e&&ft(s)&&(t=i,ot(i=!0)),r=!1}return i&&!t&&ot(!1),dt(n,"BlockStatement")}function Dt(e,t){return e.init=t,vt(ce),e.test=d===ce?null:kt(),vt(ce),e.update=d===le?null:kt(),vt(le),e.body=wt(),x.pop(),dt(e,"ForStatement")}function Et(e,t){return e.left=t,e.right=kt(),vt(le),e.body=wt(),x.pop(),dt(e,"ForInStatement")}function At(e,t){for(e.declarations=[],e.kind="var";;){var n=ct();if(n.id=Rt(),w&&Be(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=pt(ge)?kt(!0,t):null,e.declarations.push(dt(n,"VariableDeclarator")),!pt(ue))break}return e}function kt(e,t){var n=Mt(t);if(!e&&d===ue){var r=ht(n);for(r.expressions=[n];pt(ue);)r.expressions.push(Mt(t));return dt(r,"SequenceExpression")}return n}function Mt(e){var t=function(e){var t=function(e){return Tt(It(),-1,e)}(e);if(pt(fe)){var n=ht(t);return n.test=t,n.consequent=kt(!0),vt(he),n.alternate=kt(!0,e),dt(n,"ConditionalExpression")}return t}(e);if(d.isAssign){var n=ht(t);return n.operator=f,n.left=t,at(),n.right=Mt(e),yt(t),dt(n,"AssignmentExpression")}return t}function Tt(e,t,n){var r=d.binop;if(null!=r&&(!n||d!==te)&&r>t){var i=ht(e);i.left=e,i.operator=f;var s=d;return at(),i.right=Tt(It(),r,n),Tt(dt(i,s===ye||s===be?"LogicalExpression":"BinaryExpression"),t,n)}return e}function It(){if(d.prefix){var e=ct(),t=d.isUpdate;return e.operator=f,e.prefix=!0,p=!0,at(),e.argument=It(),t?yt(e.argument):w&&"delete"===e.operator&&"Identifier"===e.argument.type&&C(e.start,"Deleting local variable in strict mode"),dt(e,t?"UpdateExpression":"UnaryExpression")}for(var n=Ot(Lt());d.postfix&&!gt();)(e=ht(n)).operator=f,e.prefix=!1,e.argument=n,yt(n),at(),n=dt(e,"UpdateExpression");return n}function Ot(e,t){var n;return pt(de)?((n=ht(e)).object=e,n.property=Rt(!0),n.computed=!1,Ot(dt(n,"MemberExpression"),t)):pt(re)?((n=ht(e)).object=e,n.property=kt(),n.computed=!0,vt(ie),Ot(dt(n,"MemberExpression"),t)):!t&&pt(oe)?((n=ht(e)).callee=e,n.arguments=Nt(le,!1),Ot(dt(n,"CallExpression"),t)):e}function Lt(){switch(d){case J:var e=ct();return at(),dt(e,"ThisExpression");case M:return Rt();case E:case k:case A:return(e=ct()).value=f,e.raw=n.slice(l,u),at(),dt(e,"Literal");case $:case Q:case ee:return(e=ct()).value=d.atomValue,e.raw=d.keyword,at(),dt(e,"Literal");case oe:var r=c,i=l;at();var s=kt();return s.start=i,s.end=u,t.locations&&(s.loc.start=r,s.loc.end=h),t.ranges&&(s.range=[i,u]),vt(le),s;case re:return e=ct(),at(),e.elements=Nt(ie,!0,!0),dt(e,"ArrayExpression");case se:return function(){var e=ct(),n=!0,r=!1;for(e.properties=[],at();!pt(ae);){if(n)n=!1;else if(vt(ue),t.allowTrailingCommas&&pt(ae))break;var i,s={key:Pt()},a=!1;if(pt(he)?(s.value=kt(!0),i=s.kind="init"):t.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=r=!0,i=s.kind=s.key.name,s.key=Pt(),d!==oe&&_t(),s.value=Bt(ct(),!1)):_t(),"Identifier"===s.key.type&&(w||r))for(var o=0;o<e.properties.length;++o){var l=e.properties[o];if(l.key.name===s.key.name){var u=i==l.kind||a&&"init"===l.kind||"init"===i&&("get"===l.kind||"set"===l.kind);u&&!w&&"init"===i&&"init"===l.kind&&(u=!1),u&&C(s.key.start,"Redefinition of property")}}e.properties.push(s)}return dt(e,"ObjectExpression")}();case V:return e=ct(),at(),Bt(e,!1);case X:return function(){var e=ct();return at(),e.callee=Ot(Lt(),!0),pt(oe)?e.arguments=Nt(le,!1):e.arguments=D,dt(e,"NewExpression")}();default:_t()}}function Pt(){return d===E||d===k?Lt():Rt(!0)}function Bt(e,t){d===M?e.id=Rt():t?_t():e.id=null,e.params=[];var n=!0;for(vt(oe);!pt(le);)n?n=!1:vt(ue),e.params.push(Rt());var r=b,i=x;if(b=!0,x=[],e.body=Ct(!0),b=r,x=i,w||e.body.body.length&&ft(e.body.body[0]))for(var s=e.id?-1:0;s<e.params.length;++s){var a=s<0?e.id:e.params[s];if((Pe(a.name)||Be(a.name))&&C(a.start,"Defining '"+a.name+"' in strict mode"),s>=0)for(var o=0;o<s;++o)a.name===e.params[o].name&&C(a.start,"Argument name clash in strict mode")}return dt(e,t?"FunctionDeclaration":"FunctionExpression")}function Nt(e,n,r){for(var i=[],s=!0;!pt(e);){if(s)s=!1;else if(vt(ue),n&&t.allowTrailingCommas&&pt(e))break;r&&d===ue?i.push(null):i.push(kt(!0))}return i}function Rt(e){var r=ct();return e&&"everywhere"==t.forbidReserved&&(e=!1),d===M?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Oe:Le)(f)||w&&Pe(f))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+f+"' is reserved"),r.name=f):e&&d.keyword?r.name=d.keyword:_t(),p=!1,at(),dt(r,"Identifier")}},n(e),l.version||(l=null));var c={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},h={"-":"__negate","+":"__self"},d=s.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(e){this["__"+e]="#"+e},{__self:function(){return this}});function p(e,t,n){var r=c[t];if(e&&e[r]){var i=e[r](n);return"!="===t?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function m(e,t){var n=h[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function v(e,n){if(!e)return"";var s=[];function a(e){for(var t=0,n=s.length;t<n;t++){var r=s[t];if(r[0]>=e)break;e+=r[1]}return e}function o(t){return e.substring(a(t.range[0]),a(t.range[1]))}function l(t,n){for(var r=a(t.range[0]),i=a(t.range[1]),o=0,l=s.length-1;l>=0;l--)if(r>s[l][0]){o=l+1;break}s.splice(o,0,[r,n.length-i+r]),e=e.substring(0,r)+n+e.substring(i)}function d(t,n){switch(t.type){case"UnaryExpression":if(t.operator in h&&"Literal"!==t.argument.type){var r=o(t.argument);l(t,'$__("'+t.operator+'", '+r+")")}break;case"BinaryExpression":if(t.operator in c&&"Literal"!==t.left.type){var i=o(t.left),s=o(t.right),u=function(t,n){return e.substring(a(t.range[1]),a(n.range[0]))}(t.left,t.right),d=t.operator;l(t,"__$__("+i+","+u.replace(new RegExp("\\"+d),'"'+d+'"')+", "+s+")")}break;case"UpdateExpression":case"AssignmentExpression":var f=n&&n.type;if(!("ForStatement"===f||"BinaryExpression"===f&&/^[=!<>]/.test(n.operator)||"MemberExpression"===f&&n.computed))if("UpdateExpression"===t.type){var p=(r=o(t.argument))+" = "+(g="__$__("+r+', "'+t.operator[0]+'", 1)');t.prefix?p="("+p+")":("AssignmentExpression"===f||"VariableDeclarator"===f||"BinaryExpression"===f)&&(o(n.left||n.id)===r&&(p=g),p=r+"; "+p),l(t,p)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){i=o(t.left),s=o(t.right);var g=i+" = __$__("+i+', "'+t.operator[0]+'", '+s+")";l(t,/^\(.*\)$/.test(o(t))?"("+g+")":g)}}}var f,p=(n=n||{}).url||"",g=n.sourceMaps,m=n.paperFeatures||{},v=n.source||e,_=n.offset||0,y=oe.agent,b=y.versionNumber,x=!1,w=/\r\n|\n|\r/gm;if(g&&(y.chrome&&b>=30||y.webkit&&b>=537.76||y.firefox&&b>=23||y.node)){if(y.node)_-=2;else if(r&&p&&!r.location.href.indexOf(p)){var S=i.getElementsByTagName("html")[0].innerHTML;_=S.substr(0,S.indexOf(e)+1).match(w).length+1}var C=["AA"+function(e){var t="";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var n=31&e;(e>>=5)&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return t}((x=_>0&&!(y.chrome&&b>=36||y.safari&&b>=600||y.firefox&&b>=40||y.node))?0:_)+"A"];C.length=(e.match(w)||[]).length+1+(x?_:0),f={version:3,file:p,names:[],mappings:C.join(";AACA"),sourceRoot:"",sources:[p],sourcesContent:[v]}}return(!1!==m.operatorOverloading||!1!==m.moduleExports)&&function e(t,n,r){if(t){for(var i in t)if("range"!==i&&"loc"!==i){var s=t[i];if(Array.isArray(s))for(var a=0,u=s.length;a<u;a++)e(s[a],t,r);else s&&"object"==typeof s&&e(s,t,r)}!1!==r.operatorOverloading&&d(t,n),!1!==r.moduleExports&&function(e){switch(e.type){case"ExportDefaultDeclaration":l({range:[e.start,e.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var t=e.declaration,n=e.specifiers;if(t){var r=t.declarations;r&&(r.forEach(function(e){l(e,"module.exports."+o(e))}),l({range:[e.start,t.start+t.kind.length]},""))}else if(n){var i=n.map(function(e){var t=o(e);return"module.exports."+t+" = "+t+"; "}).join("");i&&l(e,i)}}}(t)}}(u(e,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,m),f&&(x&&(e=new Array(_+1).join("\n")+e),/^(inline|both)$/.test(g)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+t.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),e+="\n//# sourceURL="+(p||"paperscript")),{url:p,source:v,code:e,map:f}}function _(e,t,n){oe=t;var r,a=t.getView(),o=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new ee:null,l=o?o._events:[],u=["onFrame","onResize"].concat(l),c=[],h=[],d="object"==typeof e?e:v(e,n);function g(t,n){for(var r in t)(n||!/^_/.test(r))&&new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(e)&&(c.push(r),h.push(t[r]))}e=d.code,g({__$__:p,$__:m,paper:t,tool:o},!0),g(t),e="var module = { exports: {} }; "+e,(x=s.each(u,function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(c.push(t),this.push("module.exports."+t+" = "+t+";"))},[]).join("\n"))&&(e+="\n"+x),e+="\nreturn module.exports;";var _=oe.agent;if(i&&(_.chrome||_.firefox&&_.versionNumber<40)){var y=i.createElement("script"),b=i.head||i.getElementsByTagName("head")[0];_.firefox&&(e="\n"+e),y.appendChild(i.createTextNode("document.__paperscript__ = function("+c+") {"+e+"\n}")),b.appendChild(y),r=i.__paperscript__,delete i.__paperscript__,b.removeChild(y)}else r=Function(c,e);var x,w=(x=r&&r.apply(t,h))||{};return s.each(l,function(e){var t=w[e];t&&(o[e]=t)}),a&&(w.onResize&&a.setOnResize(w.onResize),a.emit("resize",{size:a.size,delta:new f}),w.onFrame&&a.setOnFrame(w.onFrame),a.requestUpdate()),x}function y(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==o.getAttribute(e,"ignore")){var t=o.getAttribute(e,"canvas"),n=i.getElementById(t),r=e.src||e.getAttribute("data-src"),s=o.hasAttribute(e,"async"),a="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var l=o.get(n.getAttribute(a))||(new o).setup(n);return n.setAttribute(a,l._id),r?ne({url:r,async:s,mimeType:"text/plain",onLoad:function(e){_(e,l,r)}}):_(e.innerHTML,l,e.baseURI),e.setAttribute("data-paper-ignore","true"),l}}function b(){s.each(i&&i.getElementsByTagName("script"),y)}return f.inject(d),g.inject(d),V.inject(d),r&&("complete"===i.readyState?setTimeout(b):W.add(r,{load:b})),{compile:v,execute:_,load:function(e){return e?y(e):b()},parse:u,calculateBinary:p,calculateUnary:m}}.call(this);var oe=new(o.inject(s.exports,{Base:s,Numerical:h,Key:J,DomEvent:W,DomElement:Y,document:i,window:r,Symbol:k,PlacedSymbol:A}));return oe.agent.node&&zi(oe),"function"==typeof n&&n.amd?n("paper",oe):e&&(e.exports=oe),oe}).call(vr,"object"==typeof self?self:null)}(Fi);const Hi=_r(Fi.exports);function Gi(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),s=Math.round(e.b),a=e.a,o=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+s+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+s+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+s+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+s+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+s+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+s+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+o+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+o+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}var Yi=Array.prototype.forEach,Wi=Array.prototype.slice,qi={BREAK:{},extend:function(e){return this.each(Wi.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(Wi.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=Wi.call(arguments);return function(){for(var t=Wi.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(Yi&&e.forEach&&e.forEach===Yi)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var s in e)if(t.call(n,e[s],s)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,s=arguments,a=n||!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,s)},t),a&&e.apply(i,s)}},toArray:function(e){return e.toArray?e.toArray():Wi.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},Zi=[{litmus:qi.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Gi},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Gi},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Gi},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Gi}}},{litmus:qi.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:qi.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:qi.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(qi.isNumber(e.r)&&qi.isNumber(e.g)&&qi.isNumber(e.b)&&qi.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(qi.isNumber(e.r)&&qi.isNumber(e.g)&&qi.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(qi.isNumber(e.h)&&qi.isNumber(e.s)&&qi.isNumber(e.v)&&qi.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(qi.isNumber(e.h)&&qi.isNumber(e.s)&&qi.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],Ki=void 0,Xi=void 0,Ji=function(){Xi=!1;var e=arguments.length>1?qi.toArray(arguments):arguments[0];return qi.each(Zi,function(t){if(t.litmus(e))return qi.each(t.conversions,function(t,n){if(Ki=t.read(e),!1===Xi&&!1!==Ki)return Xi=Ki,Ki.conversionName=n,Ki.conversion=t,qi.BREAK}),qi.BREAK}),Xi},$i=void 0,Qi={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),l=[[n,o,s],[a,n,s],[s,n,o],[s,a,n],[o,s,n],[n,s,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),s=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/s:t===i?2+(n-e)/s:4+(e-t)/s,(a/=6)<0&&(a+=1),{h:360*a,s:s/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<($i=8*t)|e&~(255<<$i)}},es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ts=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ns=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),rs=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},is=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ss=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},as=function(){function e(){if(ts(this,e),this.__state=Ji.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return ns(e,[{key:"toString",value:function(){return Gi(this)}},{key:"toHexString",value:function(){return Gi(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function os(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||as.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(as.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function ls(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||as.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(as.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}as.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=Qi.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");qi.extend(e.__state,Qi.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},as.recalculateHSV=function(e){var t=Qi.rgb_to_hsv(e.r,e.g,e.b);qi.extend(e.__state,{s:t.s,v:t.v}),qi.isNaN(t.h)?qi.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},as.COMPONENTS=["r","g","b","h","s","v","hex","a"],os(as.prototype,"r",2),os(as.prototype,"g",1),os(as.prototype,"b",0),ls(as.prototype,"h"),ls(as.prototype,"s"),ls(as.prototype,"v"),Object.defineProperty(as.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(as.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=Qi.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var us=function(){function e(t,n){ts(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return ns(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),cs={};qi.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){qi.each(e,function(e){cs[e]=t})});var hs=/(\d+(\.\d+)?)px/;function ds(e){if("0"===e||qi.isUndefined(e))return 0;var t=e.match(hs);return qi.isNull(t)?0:parseFloat(t[1])}var fs={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;qi.isUndefined(i)&&(i=!0),qi.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},s=cs[t];if(!s)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var o=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,o,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;qi.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}qi.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),fs},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),fs},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return fs},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return fs},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return ds(t["border-left-width"])+ds(t["border-right-width"])+ds(t["padding-left"])+ds(t["padding-right"])+ds(t.width)},getHeight:function(e){var t=getComputedStyle(e);return ds(t["border-top-width"])+ds(t["border-bottom-width"])+ds(t["padding-top"])+ds(t["padding-bottom"])+ds(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},ps=function(e){function t(e,n){ts(this,t);var r=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),fs.bind(r.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return is(t,e),ns(t,[{key:"setValue",value:function(e){var n=rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(us),gs=function(e){function t(e,n,r){ts(this,t);var i=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=r,a=i;if(i.__select=document.createElement("select"),qi.isArray(s)){var o={};qi.each(s,function(e){o[e]=e}),s=o}return qi.each(s,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),i.updateDisplay(),fs.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),i.domElement.appendChild(i.__select),i}return is(t,e),ns(t,[{key:"setValue",value:function(e){var n=rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return fs.isActive(this.__select)?this:(this.__select.value=this.getValue(),rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(us),ms=function(e){function t(e,n){ts(this,t);var r=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function s(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),fs.bind(r.__input,"keyup",s),fs.bind(r.__input,"change",s),fs.bind(r.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),fs.bind(r.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return is(t,e),ns(t,[{key:"updateDisplay",value:function(){return fs.isActive(this.__input)||(this.__input.value=this.getValue()),rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(us);function vs(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var _s=function(e){function t(e,n,r){ts(this,t);var i=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=r||{};return i.__min=s.min,i.__max=s.max,i.__step=s.step,qi.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=vs(i.__impliedStep),i}return is(t,e),ns(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=vs(e),this}}]),t}(us),ys=function(e){function t(e,n,r){ts(this,t);var i=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var s=i,a=void 0;function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(e){var t=a-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),a=e.clientY}function u(){fs.unbind(window,"mousemove",l),fs.unbind(window,"mouseup",u),o()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),fs.bind(i.__input,"change",function(){var e=parseFloat(s.__input.value);qi.isNaN(e)||s.setValue(e)}),fs.bind(i.__input,"blur",function(){o()}),fs.bind(i.__input,"mousedown",function(e){fs.bind(window,"mousemove",l),fs.bind(window,"mouseup",u),a=e.clientY}),fs.bind(i.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,o())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return is(t,e),ns(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(_s);function bs(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var xs=function(e){function t(e,n,r,i,s){ts(this,t);var a=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:s})),o=a;function l(e){e.preventDefault();var t=o.__background.getBoundingClientRect();return o.setValue(bs(e.clientX,t.left,t.right,o.__min,o.__max)),!1}function u(){fs.unbind(window,"mousemove",l),fs.unbind(window,"mouseup",u),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function c(e){var t=e.touches[0].clientX,n=o.__background.getBoundingClientRect();o.setValue(bs(t,n.left,n.right,o.__min,o.__max))}function h(){fs.unbind(window,"touchmove",c),fs.unbind(window,"touchend",h),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),fs.bind(a.__background,"mousedown",function(e){document.activeElement.blur(),fs.bind(window,"mousemove",l),fs.bind(window,"mouseup",u),l(e)}),fs.bind(a.__background,"touchstart",function(e){1===e.touches.length&&(fs.bind(window,"touchmove",c),fs.bind(window,"touchend",h),c(e))}),fs.addClass(a.__background,"slider"),fs.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return is(t,e),ns(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",rs(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(_s),ws=function(e){function t(e,n,r){ts(this,t);var i=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,fs.bind(i.__button,"click",function(e){return e.preventDefault(),s.fire(),!1}),fs.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return is(t,e),ns(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(us),Ss=function(e){function t(e,n){ts(this,t);var r=ss(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new as(r.getValue()),r.__temp=new as(0);var i=r;r.domElement=document.createElement("div"),fs.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",fs.bind(r.__input,"keydown",function(e){13===e.keyCode&&c.call(this)}),fs.bind(r.__input,"blur",c),fs.bind(r.__selector,"mousedown",function(){fs.addClass(this,"drag").bind(window,"mouseup",function(){fs.removeClass(i.__selector,"drag")})}),fs.bind(r.__selector,"touchstart",function(){fs.addClass(this,"drag").bind(window,"touchend",function(){fs.removeClass(i.__selector,"drag")})});var s=document.createElement("div");function a(e){d(e),fs.bind(window,"mousemove",d),fs.bind(window,"touchmove",d),fs.bind(window,"mouseup",l),fs.bind(window,"touchend",l)}function o(e){f(e),fs.bind(window,"mousemove",f),fs.bind(window,"touchmove",f),fs.bind(window,"mouseup",u),fs.bind(window,"touchend",u)}function l(){fs.unbind(window,"mousemove",d),fs.unbind(window,"touchmove",d),fs.unbind(window,"mouseup",l),fs.unbind(window,"touchend",l),h()}function u(){fs.unbind(window,"mousemove",f),fs.unbind(window,"touchmove",f),fs.unbind(window,"mouseup",u),fs.unbind(window,"touchend",u),h()}function c(){var e=Ji(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function h(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function d(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,s=n.clientY,a=(r-t.left)/(t.right-t.left),o=1-(s-t.top)/(t.bottom-t.top);return o>1?o=1:o<0&&(o=0),a>1?a=1:a<0&&(a=0),i.__color.v=o,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return qi.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),qi.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),qi.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),qi.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),qi.extend(s.style,{width:"100%",height:"100%",background:"none"}),Ds(s,"top","rgba(0,0,0,0)","#000"),qi.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(r.__hue_field),qi.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),fs.bind(r.__saturation_field,"mousedown",a),fs.bind(r.__saturation_field,"touchstart",a),fs.bind(r.__field_knob,"mousedown",a),fs.bind(r.__field_knob,"touchstart",a),fs.bind(r.__hue_field,"mousedown",o),fs.bind(r.__hue_field,"touchstart",o),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return is(t,e),ns(t,[{key:"updateDisplay",value:function(){var e=Ji(this.getValue());if(!1!==e){var t=!1;qi.each(as.COMPONENTS,function(n){if(!qi.isUndefined(e[n])&&!qi.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&qi.extend(this.__color.__state,e)}qi.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;qi.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Ds(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),qi.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(us),Cs=["-moz-","-o-","-webkit-","-ms-",""];function Ds(e,t,n,r){e.style.background="",qi.each(Cs,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}var Es=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(s){}},As=function(e,t){var n=e[t];return qi.isArray(arguments[2])||qi.isObject(arguments[2])?new gs(e,t,arguments[2]):qi.isNumber(n)?qi.isNumber(arguments[2])&&qi.isNumber(arguments[3])?qi.isNumber(arguments[4])?new xs(e,t,arguments[2],arguments[3],arguments[4]):new xs(e,t,arguments[2],arguments[3]):qi.isNumber(arguments[4])?new ys(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new ys(e,t,{min:arguments[2],max:arguments[3]}):qi.isString(n)?new ms(e,t):qi.isFunction(n)?new ws(e,t,""):qi.isBoolean(n)?new ps(e,t):null},ks=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},Ms=function(){function e(){ts(this,e),this.backgroundElement=document.createElement("div"),qi.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),fs.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),qi.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;fs.bind(this.backgroundElement,"click",function(){t.hide()})}return ns(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),qi.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",fs.unbind(e.domElement,"webkitTransitionEnd",t),fs.unbind(e.domElement,"transitionend",t),fs.unbind(e.domElement,"oTransitionEnd",t)};fs.bind(this.domElement,"webkitTransitionEnd",t),fs.bind(this.domElement,"transitionend",t),fs.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-fs.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-fs.getHeight(this.domElement)/2+"px"}}]),e}(),Ts=function(e){if(e&&!(typeof window>"u")){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");Es(Ts);var Is="Default",Os=function(){try{return!!window.localStorage}catch(e){return!1}}(),Ls=void 0,Ps=!0,Bs=void 0,Ns=!1,Rs=[],Fs=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),fs.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=qi.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=qi.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),qi.isUndefined(r.load)?r.load={preset:Is}:r.preset&&(r.load.preset=r.preset),qi.isUndefined(r.parent)&&r.hideable&&Rs.push(this),r.resizable=qi.isUndefined(r.parent)&&r.resizable,r.autoPlace&&qi.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=Os&&"true"===localStorage.getItem(Gs(0,"isLocal")),s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,qs(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,a&&(a.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?fs.addClass(n.__ul,e.CLASS_CLOSED):fs.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(e){Os&&(i=e,e?fs.bind(window,"unload",s):fs.unbind(window,"unload",s),localStorage.setItem(Gs(0,"isLocal"),e))}}}),qi.isUndefined(r.parent)){if(this.closed=r.closed||!1,fs.addClass(this.domElement,e.CLASS_MAIN),fs.makeSelectable(this.domElement,!1),Os&&i){n.useLocalStorage=!0;var o=localStorage.getItem(Gs(0,"gui"));o&&(r.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,fs.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(fs.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(fs.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),fs.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);fs.addClass(l,"controller-name"),a=zs(n,l),fs.addClass(this.__ul,e.CLASS_CLOSED),fs.addClass(a,"title"),fs.bind(a,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),r.closed||(this.closed=!1)}r.autoPlace&&(qi.isUndefined(r.parent)&&(Ps&&(Bs=document.createElement("div"),fs.addClass(Bs,"dg"),fs.addClass(Bs,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Bs),Ps=!1),Bs.appendChild(this.domElement),fs.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||qs(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},fs.bind(window,"resize",this.__resizeHandler),fs.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),fs.bind(this.__ul,"transitionend",this.__resizeHandler),fs.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&function(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){fs.removeClass(e.__closeButton,Fs.CLASS_DRAG),fs.unbind(window,"mousemove",n),fs.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,fs.addClass(e.__closeButton,Fs.CLASS_DRAG),fs.bind(window,"mousemove",n),fs.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),qi.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),fs.bind(e.__resize_handle,"mousedown",i),fs.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),s=function(){Os&&"true"===localStorage.getItem(Gs(0,"isLocal"))&&localStorage.setItem(Gs(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,r.parent||function(){var e=n.getRoot();e.width+=1,qi.defer(function(){e.width-=1})}()};function zs(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function js(e){fs.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&fs.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function Vs(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function Us(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var s=n.load.remembered,a=void 0;if(s[e.preset])a=s[e.preset];else{if(!s[Is])return;a=s[Is]}if(a[r]&&void 0!==a[r][t.property]){var o=a[r][t.property];t.initialValue=o,t.setValue(o)}}}}function Hs(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new Ss(t,n);else{var s=[t,n].concat(r.factoryArgs);i=As.apply(e,s)}r.before instanceof us&&(r.before=r.before.__li),Us(e,i),fs.addClass(i.domElement,"c");var a=document.createElement("span");fs.addClass(a,"property-name"),a.innerHTML=i.property;var o=document.createElement("div");o.appendChild(a),o.appendChild(i.domElement);var l=zs(e,o,r.before);return fs.addClass(l,Fs.CLASS_CONTROLLER_ROW),i instanceof Ss?fs.addClass(l,"color"):fs.addClass(l,es(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,qi.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),Hs(e,n.object,n.property,{before:r,factoryArgs:[qi.toArray(arguments)]})}if(qi.isArray(t)||qi.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),Hs(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof xs){var r=new ys(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});qi.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}}),fs.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof ys){var i=function(t){if(qi.isNumber(n.__min)&&qi.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=Hs(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(r),i&&s.listen(),s}return t};n.min=qi.compose(i,n.min),n.max=qi.compose(i,n.max)}else n instanceof ps?(fs.bind(t,"click",function(){fs.fakeEvent(n.__checkbox,"click")}),fs.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof ws?(fs.bind(t,"click",function(){fs.fakeEvent(n.__button,"click")}),fs.bind(t,"mouseover",function(){fs.addClass(n.__button,"hover")}),fs.bind(t,"mouseout",function(){fs.removeClass(n.__button,"hover")})):n instanceof Ss&&(fs.addClass(t,"color"),n.updateDisplay=qi.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=qi.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&Vs(e.getRoot(),!0),t},n.setValue)}(e,l,i),e.__controllers.push(i),i}function Gs(e,t){return document.location.href+"."+t}function Ys(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Ws(e,t){t.style.display=e.useLocalStorage?"block":"none"}function qs(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Zs(e,t){var n={};return qi.each(e.__rememberedObjects,function(r,i){var s={},a=e.__rememberedObjectIndecesToControllers[i];qi.each(a,function(e,n){s[n]=t?e.initialValue:e.getValue()}),n[i]=s}),n}function Ks(e){0!==e.length&&ks.call(window,function(){Ks(e)}),qi.each(e,function(e){e.updateDisplay()})}Fs.toggleHide=function(){Ns=!Ns,qi.each(Rs,function(e){e.domElement.style.display=Ns?"none":""})},Fs.CLASS_AUTO_PLACE="a",Fs.CLASS_AUTO_PLACE_CONTAINER="ac",Fs.CLASS_MAIN="main",Fs.CLASS_CONTROLLER_ROW="cr",Fs.CLASS_TOO_TALL="taller-than-window",Fs.CLASS_CLOSED="closed",Fs.CLASS_CLOSE_BUTTON="close-button",Fs.CLASS_CLOSE_TOP="close-top",Fs.CLASS_CLOSE_BOTTOM="close-bottom",Fs.CLASS_DRAG="drag",Fs.DEFAULT_WIDTH=245,Fs.TEXT_CLOSED="Close Controls",Fs.TEXT_OPEN="Open Controls",Fs._keydownHandler=function(e){"text"!==document.activeElement.type&&(72===e.which||72===e.keyCode)&&Fs.toggleHide()},fs.bind(window,"keydown",Fs._keydownHandler,!1),qi.extend(Fs.prototype,{add:function(e,t){return Hs(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Hs(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;qi.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Bs.removeChild(this.domElement);var e=this;qi.each(this.__folders,function(t){e.removeFolder(t)}),fs.unbind(window,"keydown",Fs._keydownHandler,!1),js(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Fs(t);this.__folders[e]=n;var r=zs(this,n.domElement);return fs.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],js(e);var t=this;qi.each(e.__folders,function(t){e.removeFolder(t)}),qi.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=fs.getOffset(e.__ul).top,n=0;qi.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=fs.getHeight(t))}),window.innerHeight-t-20<n?(fs.addClass(e.domElement,Fs.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(fs.removeClass(e.domElement,Fs.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&qi.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:qi.debounce(function(){this.onResize()},50),remember:function(){if(qi.isUndefined(Ls)&&((Ls=new Ms).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;qi.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");fs.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),fs.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",fs.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",fs.addClass(r,"button"),fs.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",fs.addClass(i,"button"),fs.addClass(i,"save-as");var s=document.createElement("span");s.innerHTML="Revert",fs.addClass(s,"button"),fs.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?qi.each(e.load.remembered,function(t,n){Ys(e,n,n===e.preset)}):Ys(e,Is,!1),fs.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(s),Os){var o=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(Gs(0,"isLocal"))&&l.setAttribute("checked","checked"),Ws(e,o),fs.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,Ws(e,o)})}var u=document.getElementById("dg-new-constructor");fs.bind(u,"keydown",function(e){e.metaKey&&(67===e.which||67===e.keyCode)&&Ls.hide()}),fs.bind(n,"click",function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Ls.show(),u.focus(),u.select()}),fs.bind(r,"click",function(){e.save()}),fs.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),fs.bind(s,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&qs(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Zs(this)),e.folders={},qi.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Zs(this),Vs(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Is]=Zs(this,!0)),this.load.remembered[e]=Zs(this),this.preset=e,Ys(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){qi.each(this.__controllers,function(t){this.getRoot().load.remembered?Us(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),qi.each(this.__folders,function(e){e.revert(e)}),e||Vs(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&Ks(this.__listening)},updateDisplay:function(){qi.each(this.__controllers,function(e){e.updateDisplay()}),qi.each(this.__folders,function(e){e.updateDisplay()})}});var Xs=Fs;let Js=null;class $s{constructor(e){if(this.debug=null,this.config=null,this.updateConfig=e=>{this.config=e},Js)return Js;Js=this,this.config=e,this.init()}init(){if(this.debug)return;const e=new Xs({width:300});let t;window.parent!==window?(t=this.getExportIntegration(),e.add(t,"export").name("Save")):(t=this.getExportStandalone(),e.add(t,"export").name("Export")),this.debug=e,this.debug.domElement.style.display="none","true"===new URLSearchParams(window.location.search).get("config")&&(this.debug.open(),this.debug.domElement.style.display="block")}getExportIntegration(){return{export:()=>{const e=this.exportConfigCustmizations(this.config);window.parent.postMessage({type:"exportConfig",data:{filename:"babylon-customization.json",config:e}},"*")}}}getExportStandalone(){return{export:()=>{const e=JSON.stringify(this.exportConfigCustmizations(this.config));let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","babylon-customization.json"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}updateDisplay(e){if(e){for(var t in e.__controllers)e.__controllers[t].updateDisplay();for(var n in e.__folders)this.updateDisplay(e.__folders[n])}}exportConfigCustmizations(e){if(e&&this.debug)return e}exportCustomProperties(e){return Object.entries(e.__folders).map(e=>{let[t,n]=e;return{[t]:this.exportCustomPropertiesProps(n)}}).reduce((e,t)=>i(i({},t),e),{})}exportCustomPropertiesProps(e){const t=e.__controllers.reduce((e,t)=>i(i({},e),{},{[t.property]:t.getValue()}),{}),n=Object.entries(e.__folders).map(e=>{let[t,n]=e;return{[t]:this.exportCustomPropertiesProps(n)}}).reduce((e,t)=>i(i({},t),e),{});return i(i({},t),n)}}class Qs{constructor(e,t,n){this.gui=null,this.config=null,this.sceneHelper=null;const r=new $s(e);r.init(),this.gui=r,this.onUpdate=t,this.config=e,this.sceneHelper=n}setupGui(e){if(!this.config)return;const t=e=>{var t;this.onUpdate(e),null==(t=this.gui)||t.updateConfig(e)};this.configureGeneral(this.config,t),this.configureEnvironment(this.config,t),this.configureLights(this.config,t),this.configureCamera(this.config,t,e),this.configureShadows(this.config,t),this.configureAr(this.config,t),this.configureModel(this.config,t),this.configureAnimations(this.config,t,e)}configureModel(e,t){var n,r;if(!e.model)return;const i=null==(r=null==(n=this.gui)?void 0:n.debug)?void 0:r.addFolder("Model"),s=null==i?void 0:i.addFolder("rotation"),a=null==i?void 0:i.addFolder("config");null==s||s.add(e.model.rotation,"x",-5,5,1e-5).name("X").onChange(()=>{t(e)}),null==s||s.add(e.model.rotation,"y",-5,5,1e-5).name("Y").onChange(()=>{t(e)}),null==s||s.add(e.model.rotation,"z",-5,5,1e-5).name("Z").onChange(()=>{t(e)}),e.model.config||(e.model.config={doubleSided:!0}),null==a||a.add(e.model.config,"doubleSided").name("Double Sided").onFinishChange(()=>{t(e)})}configureShadows(e,t){var n,r;if(!e.environment||!e.environment.shadows)return;const i=null==(r=null==(n=this.gui)?void 0:n.debug)?void 0:r.addFolder("Shadows");null==i||i.add(e.environment.shadows,"enableShadows").name("Enable Shadows").onChange(()=>{t(e)}),null==i||i.addColor(e.environment.shadows,"shadowHexColor").name("Hex Color").onChange(()=>{t(e)}),null==i||i.add(e.environment.shadows,"shadowDarkness",0,1,.1).name("Transparency").onChange(()=>{t(e)}),null==i||i.add(e.environment.shadows,"groundSizeMultiplierWidth",0,5,.1).name("Ground Width").onChange(()=>{t(e)}),null==i||i.add(e.environment.shadows,"groundSizeMultiplierLength",0,5,.1).name("Ground Length").onChange(()=>{t(e)}),null==i||i.add(e.environment.shadows,"shadowMapSize",0,2048,1).name("Map Size").onChange(()=>{t(e)})}configureGeneral(e,t){var n,r;if(!e.general)return;const i=null==(r=null==(n=this.gui)?void 0:n.debug)?void 0:r.addFolder("General");null==i||i.addColor(e.general,"backgroundColor").name("Background Color").onChange(()=>{t(e)}),null==i||i.add(e.general,"removeDefaultBackground").name("Remove Background").onChange(()=>{t(e)}),e.camera&&(null==i||i.add(e.camera,"toneMappingEnabled").name("Tone Mapping Enabled").onFinishChange(()=>{t(e)}),null==i||i.add(e.camera,"toneMappingType",{Standard:0,AcesToneMapping:1}).name("Tone Mapping Type").onFinishChange(()=>{var n;null!=(n=null==e?void 0:e.camera)&&n.toneMappingType&&(e.camera.toneMappingType=Number(e.camera.toneMappingType)),t(e)}))}configureAr(e,t){var n,r,i,s,a,o,l,u,c;if(!e.general||!e.general.meshSize)return;const h=null==(o=null==(a=this.gui)?void 0:a.debug)?void 0:o.addFolder("Augmented Reality");null==h||h.add(e.general,"arEnabled").name("Enabled").onChange(()=>{t(e)}),null==h||h.add({enabled:"wall"===e.general.arAnchor},"enabled").name("Enable wall placement").onChange(n=>{e.general&&(e.general.arAnchor=n?"wall":null),t(e)}),null==h||h.add({enabled:null!==(n=e.general.arScale)&&void 0!==n&&n},"enabled").name("Resizable in AR").onChange(n=>{e.general&&(e.general.arScale=n),t(e)}),null==h||h.add({enabled:e.general.arOnTheFly},"enabled").name("Faster AR Conversion").onChange(n=>{e.general&&(e.general.arOnTheFly=n),t(e)});const d=null==h?void 0:h.addFolder("Measure Scene Ar"),f={options:{width:null!==(r=null==(l=e.general.meshSize)?void 0:l.width)&&void 0!==r&&r,height:null!==(i=null==(u=e.general.meshSize)?void 0:u.height)&&void 0!==i&&i,depth:null!==(s=null==(c=e.general.meshSize)?void 0:c.depth)&&void 0!==s&&s}};let p=(()=>{const{width:e,height:t,depth:n}=f.options;return e?"width":t?"height":n?"depth":null})();const g=t=>"none"!==t&&t?e.general&&e.general.meshSize?e.general.meshSize[t]:void 0:0;null==d||d.add(f,"options",{None:"none",Width:"width",Height:"height",Depth:"depth"}).name("Know Dimension").setValue(p).onFinishChange(n=>{p=n,"none"===n&&e.general&&e.general.meshSize&&(e.general.meshSize={width:null,height:null,depth:null},t(e)),null==m||m.setValue(g(p))});const m=null==d?void 0:d.add({size:0},"size",-500,500,1).name("Measure (cm)").setValue(g(p)).onFinishChange(n=>{e.general&&e.general.meshSize&&(Object.keys(e.general.meshSize).forEach(t=>{e.general&&e.general.meshSize&&(e.general.meshSize[t]=t!==p?null:n)}),t(e))})}configureEnvironment(e,t){var n,r;if(!e.general||!e.general.environmentOptions)return;const i=null==(r=null==(n=this.gui)?void 0:n.debug)?void 0:r.addFolder("Environment");null==i||i.add(e.general,"exposure",0,5,.1).name("Exposure").onChange(()=>{t(e)}),null==i||i.add(e.general,"contrast",0,5,.1).name("Contrast").onChange(()=>{t(e)}).isModified,null==i||i.add(e.general.environmentOptions,"rotationY",0,10,.001).name("Rotation Y").onChange(()=>{t(e)}),null==i||i.add(e.general.environmentOptions,"intensity",0,20,.1).name("Intensity").onChange(()=>{t(e)}),null==i||i.add(e.general.environmentOptions,"pbrIntensity",0,20,.1).name("PBR Intensity").onChange(()=>{t(e)})}configureCamera(e,t,n){var r,i;const s=null==n?void 0:n.cameras.find(e=>e instanceof BABYLON.ArcRotateCamera);if(!e.camera||!e.camera.position||!s)return;const a=null==(i=null==(r=this.gui)?void 0:r.debug)?void 0:i.addFolder("Camera");null==a||a.add(e.camera,"autoRotate").name("Auto Rotate").onChange(()=>{t(e)}),void 0===e.camera.zoom&&(e.camera.zoom=0),null==a||a.add(e.camera,"zoom",-50,10,.1).name("Zoom").onChange(()=>{t(e)}),null==a||a.add(e.camera.position,"fov",0,1.6,.001).name("Fov").onChange(e=>{s.fov=e,null==n||n.render()});const o=null==a?void 0:a.addFolder("position");null==o||o.add(e.camera.position,"alpha",-10,10,.01).name("X").onChange(e=>{s.alpha=e,null==n||n.render()}),null==o||o.add(e.camera.position,"beta",-3,3,.01).name("Y").onChange(e=>{s.beta=e,null==n||n.render()});const l=null==a?void 0:a.addFolder("Zoom Settings");e.camera.useMinZoomPerc=null!==e.camera.useMinZoomPerc&&e.camera.useMinZoomPerc,e.camera.useMaxZoomPerc=null!==e.camera.useMaxZoomPerc&&e.camera.useMaxZoomPerc,null==l||l.add(e.camera,"useMinZoomPerc",0,1,.01).name("Enable Max Zoom").onChange(e=>{this.sceneHelper&&this.sceneHelper.setMinZoomPerc(e)}),null==l||l.add(e.camera,"minZoomPerc",0,10,.01).name("Max Zoom").onChange(e=>{this.sceneHelper&&this.sceneHelper.setMinZoomPerc(e)}),null==l||l.add(e.camera,"useMaxZoomPerc",0,1,.01).name("Enable Min Zoom").onChange(e=>{this.sceneHelper&&this.sceneHelper.setMaxZoomPerc(e)}),null==l||l.add(e.camera,"maxZoomPerc",0,10,.01).name("Min Zoom").onChange(e=>{this.sceneHelper&&this.sceneHelper.setMaxZoomPerc(e)})}configureLights(e,t){var n,r;if(!e.lights)return;const i=null==(r=null==(n=this.gui)?void 0:n.debug)?void 0:r.addFolder("Lights");this.configureLight(i,"Directional Light Back",e.lights.directionalLightBack,e,t),this.configureLight(i,"Directional Light Left",e.lights.directionalLightLeft,e,t),this.configureLight(i,"Point Light Back",e.lights.pointLightBack,e,t),this.configureLight(i,"Point Light Front",e.lights.pointLightFront,e,t),this.configureLight(i,"Hemisphere Light",e.lights.hemisphereLight,e,t)}configureLight(e,t,n,r,i){const s=null==e?void 0:e.addFolder(t),a=null==s?void 0:s.addFolder("position"),o=null==s?void 0:s.addFolder("general");null==a||a.add(n.position,"x",-100,100,.1).name("Position X").onChange(()=>{i(r)}),null==a||a.add(n.position,"y",-100,100,.1).name("Position Y").onChange(()=>{i(r)}),null==a||a.add(n.position,"z",-100,100,.1).name("Position Z").onChange(()=>{i(r)}),null==o||o.add(n.general,"intensity",0,50,.1).name("Intensity").onChange(()=>{i(r)}),null==o||o.add(n.general,"visible").name("Visible").onChange(()=>{i(r)})}configureAnimations(e,t,n){var r,i;const s=(null==n?void 0:n.animationGroups)&&n.animationGroups.length>0;if(!e.animations||!s)return;const a=null==(i=null==(r=this.gui)?void 0:r.debug)?void 0:i.addFolder("animations");null==a||a.add(e.animations,"runAtStart").name("Run At Start").onChange(()=>t(e)),null==a||a.add(e.animations,"loop").name("Loop").onChange(()=>t(e)),null==a||a.add(e.animations,"speed",.1,5,.1).name("Speed").onChange(()=>t(e))}}var ea=(e=>(e.CameraMovement="camera-movement",e.ScriptExecution="script-execution",e.DesignChanged="design-changed",e))(ea||{});class ta{constructor(e){this._zkScene=null,this._zkModel=null,this._canvasID="zakeke-canvas-viewer3D-"+Zakeke.makeID(5),this._canvas=null,this._domElement=null,this._lastWidth=Number.MIN_VALUE,this._lastHeight=Number.MIN_VALUE,this._engine=null,this._scene=null,this._bindedResize=null,this._sceneHelper=null,this._environmentManager=null,this._glowManager=null,this._sceneActionsExecutor=null,this._renderingNeeded=!1,this._renderingPaused=!1,this._autoRender=!1,this._antialias=!0,this._postProcesses=[],this._camera=null,this._hemiLight=null,this._pointLight=null,this._highlightColor="#00ff00",this._highlightSize=2,this._highlightLayer=null,this._highlightBlurHorizontalSize=1,this._highlightBlurVerticalSize=1,this._highlightAnimationID=null,this._highlightCurrentMeshes=[],this._highlightNextMeshes=[],this._deviceType=MPlaza.DeviceType.All,this._destroyed=!1,this._sceneDesignManager=null,this._meshLocationsManager=null,this._groupPickedListeners=[],this._focusAttributesListeners=[],this._designNotifyMessageListeners=[],this._designRemoveMessageListeners=[],this._designEventMessages=[],this._onDelayLoadingStart=null,this._onDelayLoadingProgress=null,this._onDelayLoadingSuccess=null,this._onDelayLoadingError=null,this._infoPointPickedListeners=[],this._infoPointContentShownListeners=[],this._infoPointContentHiddenListeners=[],this._beginAssetsLoadingListeners=[],this._endAssetsLoadingListeners=[],this._nextSceneMeshesLoadedListeners=[],this._nextSceneTexturesLoadedListeners=[],this._beginSceneLoadingListeners=[],this._endSceneLoadingListeners=[],this._arFileUrls={},this._designTextureResolution=1024,this._configPreview=!1,this._defaultBackgroundColor=null,this._grids=[],this._dracoCompression=null,this._infoPointsManager=null,this._infoPointsManagerStyle=null,this._canShowInfoPoints=!0,this._canShowInfoPointsContent=!0,this._broadcastChannel=null,this._isHologramSource=!1,this._isHologram=!1,this._lastResizableMeshID="",this._brandLogoButton=null,this._advancedTexture=null,this._createGui=null,this._performanceInfo=null,this._currentRotation=0,this._isRotating=!1,this._isSelectionMode=!0,this.setCameraLocked=e=>{this._zkScene&&this._sceneHelper&&this._scene&&(this._sceneHelper.setupCamera(),this._camera=this._scene.activeCamera,this._camera&&(e?(this._sceneHelper.setCameraLimitLowerRadius(!0),this._sceneHelper.setMinZoomPerc(1),this._sceneHelper.setMaxZoomPerc(1)):(this._sceneHelper.setCameraLimitLowerRadius(!1),this._sceneHelper.setMinZoomPerc(1),this._sceneHelper.setMaxZoomPerc(1.5))))},null!=e&&("boolean"==typeof e?this._configPreview=e:(this._configPreview=e.configPreview,e.defaultBackgroundColor&&(this._defaultBackgroundColor=BABYLON.Color4.FromHexString(e.defaultBackgroundColor)))),this._elementSelector=new rr}get zkScene(){return this._zkScene}get zkModel(){return this._zkModel}get canvas(){return this._canvas}get engine(){return this._engine}get scene(){return this._scene}get autoRender(){return this._autoRender}set autoRender(e){this._autoRender=e}get antialias(){return this._antialias}set antialias(e){this._antialias=e}get isLowEndDevice(){return this._performanceInfo&&this._performanceInfo.isLowEndDevice}get isHologramSource(){return this.isHologramSource}get createGui(){return this._createGui}set createGui(e){this._createGui=e}set isHologramSource(e){this._isHologramSource=e,e&&(this._isHologram=!1,this.detachBroadcastChannelEventHandlers())}get isHologram(){return this._isHologram}set isHologram(e){this._isHologram=e,e?(this._isHologramSource=!1,this.attachBroadcastChannelEventHandlers()):this.detachBroadcastChannelEventHandlers(),this.refreshEnvironment()}get isSelectionMode(){return this._isSelectionMode}set isSelectionMode(e){this._isSelectionMode=e}getAntialiasEnabled(){let e=!0;if(this._zkScene){let t=this._zkScene.getAntialiasEnabled();return null!==t&&void 0!==t?t:e}return e}setAntialiasEnabled(e){this._zkScene&&(this._zkScene.setAntialiasEnabled(e),e?this.enableAntialiasing():this.disableAntialiasing())}getARScale(){let e=!0;if(this._zkScene){let t=this._zkScene.getARScale();return null!==t&&void 0!==t?t:e}return e}setARScale(e){this._zkScene&&this._zkScene.setARScale(e)}getUseMaterialOffloading(){let e=!1;if(this.zkScene){let t=this.zkScene.getUseMaterialOffloading();return null!==t&&void 0!==t?t:e}return e}setUseMaterialOffloading(e){this._zkScene&&this._zkScene.setUseMaterialOffloading(e)}getPrefetchMeshes(){if(this.zkScene){const e=this.zkScene.getPrefetchMeshes();return null===e||void 0===e||e}return!0}setPrefetchMeshes(e){this._zkScene&&this._zkScene.setPrefetchMeshes(e)}getPrefetchMaterials(){if(this.zkScene){const e=this.zkScene.getPrefetchMaterials();return null===e||void 0===e||e}return!0}setPrefetchMaterials(e){this._zkScene&&this._zkScene.setPrefetchMaterials(e)}getShowHideInfoPoints(){return this.canShowInfoPoints}setShowHideInfoPoints(e){this.canShowInfoPoints=e}get camera(){return this._camera}get deviceType(){return this._deviceType}set deviceType(e){this._deviceType=e}getDeviceType(){return this.deviceType}get highlightColor(){return this._highlightColor}set highlightColor(e){this._highlightColor=e}get highlightSize(){return this._highlightSize}set highlightSize(e){this._highlightSize=e}get destroyed(){return this._destroyed}get onDelayLoadingStart(){return this._onDelayLoadingStart}set onDelayLoadingStart(e){this._onDelayLoadingStart=e}get onDelayLoadingProgress(){return this._onDelayLoadingProgress}set onDelayLoadingProgress(e){this._onDelayLoadingProgress=e}get onDelayLoadingSuccess(){return this._onDelayLoadingSuccess}set onDelayLoadingSuccess(e){this._onDelayLoadingSuccess=e}get onDelayLoadingError(){return this._onDelayLoadingError}set onDelayLoadingError(e){this._onDelayLoadingError=e}get dracoCompression(){return this._dracoCompression||(this._dracoCompression=fi.Default),this._dracoCompression}get infoPointsShown(){return!!this._infoPointsManager&&this._infoPointsManager.infoPointsShown}get infoPointsManagerStyle(){return this._infoPointsManagerStyle}set infoPointsManagerStyle(e){this._infoPointsManagerStyle=e,this.updateInfoPointsManagerStyle()}get canShowInfoPoints(){return this._canShowInfoPoints}set canShowInfoPoints(e){this._canShowInfoPoints=e,this.refreshInfoPoints()}get canShowInfoPointsContent(){return this._canShowInfoPointsContent}set canShowInfoPointsContent(e){this._canShowInfoPointsContent=e,this._infoPointsManager&&(this._infoPointsManager.canShowInfoPointsContent=e)}static async createSceneViewerAsync(e){const t=new ta(e);return await t.initAsync(),t}dispose(){this.closeBroadcastChannel(),this.removeCanvas(),this.removeDomElement(),this.deleteScene(),this.deleteEngine()}async initAsync(){this._bindedResize=this.resize.bind(this),Zakeke.Tools.Init(),BABYLON.Geometry.onDelayLoadingStart=e=>{this._onDelayLoadingStart&&this._onDelayLoadingStart(e)},BABYLON.Geometry.onDelayLoadingProgress=e=>{this._onDelayLoadingProgress&&this._onDelayLoadingProgress(e)},BABYLON.Geometry.onDelayLoadingSuccess=e=>{this._onDelayLoadingSuccess&&this._onDelayLoadingSuccess(e)},BABYLON.Geometry.onDelayLoadingError=e=>{this._onDelayLoadingError&&this._onDelayLoadingError(e)},BABYLON.Geometry.dracoDecodingFunction=(e,t,n)=>{this.dracoDecodingFunction(e,t,n)},this.createCanvas(),this.createDOMElement(),await this.init3DEngineAsync()}async init3DEngineAsync(){this.createEngine(),await this.createEmptySceneAsync(),this._destroyed=!1}createCanvas(){return this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",this._canvasID),this._canvas.setAttribute("touch-action","none"),this._canvas.addEventListener("dblclick",e=>this.setRenderingNeeded()),this._canvas}removeCanvas(){this._canvas&&(this._canvas.remove(),this._canvas=null)}deleteEngine(){this._engine&&(this._engine.dispose(),this._engine=null),this._destroyed=!0,$(window).off("resize",this._bindedResize)}deleteScene(){this.deleteComponents(),this._scene&&(this._scene.dispose(),this._scene=null)}deleteComponents(){this.resetPerformanceInfo(),this.emptyArFileCache(),this.disposeInfoPointsManager(),this._meshLocationsManager&&(this._meshLocationsManager.dispose(),this._meshLocationsManager=null),this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this._glowManager&&(this._glowManager.dispose(),this._glowManager=null),this._sceneActionsExecutor&&(this._sceneActionsExecutor.dispose(),this._sceneActionsExecutor=null),this.disposePostProcesses()}disposeInfoPointsManager(){this._infoPointsManager&&(this._infoPointsManager.dispose(),this._infoPointsManager=null)}disposePostProcesses(){for(;this._postProcesses.length>0;){var e=this._postProcesses.pop();e&&e.dispose()}}emptyArFileCache(){this._arFileUrls={}}async resetSceneAsync(){await this.init3DEngineAsync()}replaceModel(e){this._zkModel=e,this.render()}setZkScene(e){this._zkScene=e}closeBroadcastChannel(){this._broadcastChannel&&(this._broadcastChannel.close(),this._broadcastChannel=null)}openBroadcastChannel(){if(!this._broadcastChannel&&window.BroadcastChannel)try{this._broadcastChannel=new BroadcastChannel("zakeke-broadcast-channel")}catch(e){console.error("Failed opening broadcast channel"),console.error(e)}}getOrCreateBroadcastChannel(){return this.openBroadcastChannel(),this._broadcastChannel}createEngine(){this.deleteScene(),this.deleteEngine(),this._engine=new BABYLON.Engine(this._canvas,!0,{stencil:!0,preserveDrawingBuffer:!0}),this._engine.enableOfflineSupport=!1,this._engine.disableUniformBuffers=!0,Logger.info("WebGL version: "+this._engine.webGLVersion),$(window).resize(this._bindedResize),$(window).on("orientationchange",()=>{setTimeout(()=>this._bindedResize(),100)})}createBrandLogoButton(){var e=BABYLON.GUI.Button.CreateImageOnlyButton("zakeke-logo","https://zakeke.blob.core.windows.net/files/images/logo_hq.png");return e.image.stretch=BABYLON.GUI.Image.STRETCH_UNIFORM,e.width="120px",e.height="70px",e.color="transparent",e.hoverCursor="pointer",e.onPointerClickObservable.add(function(){window.open("https://www.zakeke.com/")}),this._brandLogoButton=e,this._advancedTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI",!0,this._scene),this._advancedTexture.updateSamplingMode(BABYLON.Texture.NEAREST_NEAREST),this._advancedTexture.renderScale=2,this._advancedTexture.addControl(this._brandLogoButton),this._brandLogoButton}async createEmptySceneAsync(){this.deleteScene(),this._engine&&(this._scene=new BABYLON.Scene(this._engine),this._defaultBackgroundColor&&this._scene.clearColor.copyFrom(this._defaultBackgroundColor),await this.setupSceneAsync())}refreshLights(){var e,t,n,r,i,s;if(!this._zkScene)return;!0!==(null==(t=null==(e=this._zkScene)?void 0:e.getGeneralConfig())?void 0:t.get("preventDefaultLights"))&&(null==(n=this._sceneHelper)||n.setupLights());const a=null==(i=null==(r=this._zkScene)?void 0:r.getSceneConfig())?void 0:i.get("lights");null!=a&&a.attributes&&(null==(s=this._sceneHelper)||s.setUpCustomLights(a.attributes))}async setupSceneAsync(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,n,r,i,s,a,o,l,u,c;if(this._zkScene&&this._zkScene.get("config")&&null!=(n=null==(t=this._zkScene.get("config"))?void 0:t.get("general"))&&n.get("meshSize")){const e=null==(i=null==(r=this._zkScene.get("config"))?void 0:r.get("general"))?void 0:i.get("meshSize"),t=null==(s=this._scene)?void 0:s.meshes.find(e=>!e.parent);t&&e&&(e.width||e.height||e.depth)&&(t.metadata?t.metadata.sizecm=e:t.metadata={sizecm:e})}if(this._engine&&this._scene){this._sceneHelper=new kn(this._scene);const t=this._zkScene?this._zkScene.getCameraPositionScale():void 0,n=this._zkScene?this._zkScene.getCameraLimitLowerRadius():void 0,r=this._zkScene?this._zkScene.getCameraZoomEnabled():void 0,i=!!this._zkScene&&this._zkScene.getCameraUseMinZoomPerc(),s=this._zkScene?this._zkScene.getCameraMinZoomPerc():1,h=!!this._zkScene&&this._zkScene.getCameraUseMaxZoomPerc(),d=this._zkScene?this._zkScene.getCameraMaxZoomPerc():1.5,f=this._zkScene?this._zkScene.getCameraLowerAlphaLimit():null,p=this._zkScene?this._zkScene.getCameraUpperAlphaLimit():null,g=this._zkScene?this._zkScene.getCameraLowerBetaLimit():null,m=this._zkScene?this._zkScene.getCameraUpperBetaLimit():null,v=this._zkScene?null==(a=this._zkScene.getCameraConfig())?void 0:a.get("zoom"):null;if(null!=t&&null!=t&&this._sceneHelper.setCameraPositionScale(t,!1),null!=n&&null!=n&&this._sceneHelper.setCameraLimitLowerRadius(n,!1),null!=r&&null!=r&&this._sceneHelper.setZoomEnabled(r),this._sceneHelper.setCameraZoom(v),this._sceneHelper.setupCamera(),this._camera=this._scene.activeCamera,this._camera&&e&&(i?this._sceneHelper.setMinZoomPerc(s):this._sceneHelper.setMinZoomPerc(null),h?this._sceneHelper.setMaxZoomPerc(d):this._sceneHelper.setMaxZoomPerc(null),this._sceneHelper.setCameraAlphaLimits(f,p),this._sceneHelper.setCameraBetaLimits(g,m),this._camera.onViewMatrixChangedObservable.add(()=>{this.notifyCameraMovement()}),this._camera.onRestoreStateObservable.add(()=>{this.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded()}),this.refreshCameraPosition()),null==(o=this._sceneHelper)||o.setupAnimations(this._zkScene),this.refreshModel(),null==(l=this._sceneHelper)||l.setupShadows(this._zkScene),this.refreshLights(),this.createHighlightLayer(),await this.refreshEnvironment(),await this.fixEnvironmentTexture(),this.setupGlowManager(),this._zkScene&&(this._meshLocationsManager=new or,this._meshLocationsManager.setModelAndScene(this._zkScene,this._scene),this._meshLocationsManager.addMeshAnimationCompletedListener(()=>this.setRenderingNeeded())),await this.setupSceneActionsExecutorAsync(),this.setRenderingOnDelayLoaded(),this.setupAntialiasPostProcesses(),this._scene.onPointerDown=(e,t)=>this.onPointerDown(e,t),this._scene.registerBeforeRender(()=>{this.onBeforeRender()}),this.refreshInfoPoints(),this.refreshModel(),this.refreshPBRMaterials(),this._zkScene){const e=null==(c=null==(u=this._zkScene)?void 0:u.getGeneralConfig())?void 0:c.get("removeDefaultBackground");this._sceneHelper.removeDefaultBackground(e),this._sceneHelper.setUpSceneToneMapping(this._zkScene)}this._engine.stopRenderLoop(),this.render(),this._engine.runRenderLoop(()=>{this.checkRendering()})}}onBeforeRender(){if(this._scene&&this._sceneHelper){if(this._camera){const e=this._sceneHelper.getDefaultPointLight();e&&(e.position=this._camera.position)}this._scene.meshes.forEach(e=>{e.mustDepthSortFacets&&e.isFacetDataEnabled&&e.updateFacetData()})}}render(){this._scene&&!this._scene.isDisposed&&!this._renderingPaused&&this._scene.render()}checkRendering(){this._scene&&(this._autoRender||this._renderingNeeded||0!==this._scene._activeAnimatables.length||this._sceneHelper&&this._sceneHelper.userIsMoving()?(this.checkPerformance(),this.isLowEndDevice||this._autoRender||0!==this._scene._activeAnimatables.length||this._sceneHelper&&this._sceneHelper.userIsMoving()?this.disableAntialiasing():this.enableAntialiasing(),this.render(),this._renderingNeeded&&(this._renderingNeeded=!1)):!this._scene.postProcessesEnabled&&this.canEnableAntialiasing()&&(this.enableAntialiasing(),this.render()),this._infoPointsManager&&this._infoPointsManager.updateInfoPointsVisibility()&&this.render())}resetPerformanceInfo(){this._performanceInfo=null}checkPerformance(){if(this._performanceInfo||(this._performanceInfo={totalFPS:0,countFPS:0,isLowEndDevice:!1,chekDone:!1}),this._engine&&!this._performanceInfo.chekDone){this._performanceInfo.totalFPS+=this._engine.getFps(),this._performanceInfo.countFPS++;const e=this._performanceInfo.totalFPS/this._performanceInfo.countFPS;this._performanceInfo.countFPS>30&&(this._performanceInfo.isLowEndDevice=e<=30,this._performanceInfo.chekDone=!0)}}setupAntialiasPostProcesses(){this._antialias&&this.getAntialiasEnabled()&&this.createAntialiasPostProcesses()}createAntialiasPostProcesses(){this._camera&&0===this._postProcesses.length&&(/firefox/i.test(navigator.userAgent)||this._postProcesses.push(new BABYLON.PassPostProcess("scale_pass",4,this._camera,BABYLON.Texture.BILINEAR_SAMPLINGMODE)),this._postProcesses.push(new BABYLON.PassPostProcess("scale_pass",2,this._camera,BABYLON.Texture.BILINEAR_SAMPLINGMODE)),this._postProcesses.push(new BABYLON.PassPostProcess("scale_pass",1,this._camera,BABYLON.Texture.BILINEAR_SAMPLINGMODE)))}canEnableAntialiasing(){return this._scene&&this._antialias&&this.getAntialiasEnabled()}enableAntialiasing(){this._scene&&this.canEnableAntialiasing()&&(this.createAntialiasPostProcesses(),this._scene.postProcessesEnabled=!0)}disableAntialiasing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._scene&&this._antialias&&(this._scene.postProcessesEnabled=!1),e&&this.disposePostProcesses()}getDAMMainMesh(){var e,t;return null==(t=null==(e=this._sceneHelper)?void 0:e.getVTOMeshes().userMeshes.filter(e=>!e.parent))?void 0:t[0]}setRenderingNeeded(){this._renderingNeeded=!0}setLongRenderingNeeded(){this.setRenderingNeeded();for(let e=50;e<=1e3;e+=200)setTimeout(()=>this.setRenderingNeeded(),e)}refreshRendering(){this.setLongRenderingNeeded()}pauseRendering(){this._renderingPaused=!0}resumeRendering(){this._renderingPaused=!1,this.setRenderingNeeded()}setLoadingScreen(e){this._engine&&(this._engine.loadingScreen=e)}setRenderingOnDelayLoaded(){if(this._scene){var e=this;this._scene.getGeometries().forEach(function(t){var n=t.onGeometryUpdated;t.onGeometryUpdated=function(t,r){e.setLongRenderingNeeded(),n&&n.apply(this,[t,r])}})}}createHighlightLayer(){this._scene&&(this._highlightLayer=new BABYLON.HighlightLayer("hl1",this._scene),this.updateHighlightLayerExcludedDesignMeshes(),this.setupHighlightLayerIntensity())}setupHighlightLayerIntensity(){this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=this._highlightSize,this._highlightLayer.blurVerticalSize=this._highlightSize,this._highlightBlurHorizontalSize=this._highlightSize,this._highlightBlurVerticalSize=this._highlightSize)}updateHighlightLayerExcludedDesignMeshes(){this.scene&&this._sceneHelper&&this._highlightLayer&&(this._highlightLayer.removeAllMeshes(),this.scene.meshes.filter(this._sceneHelper.isCanvasMesh).forEach(e=>this._highlightLayer.addExcludedMesh(e)))}createDOMElement(){this._canvas&&(this._domElement=document.createElement("div"),this._domElement.setAttribute("id","zakeke-canvas-viewer3D-div-"+Zakeke.makeID(5)),this._domElement.appendChild(this._canvas),this._domElement.style.position="absolute",this._domElement.style.width="100%",this._domElement.style.height="100%",this._domElement.style.left="0",this._domElement.style.top="0")}removeDomElement(){this._domElement&&(this.detach(),this._domElement.remove(),this._domElement=null)}appendTo(e){this._domElement&&(e.firstChild?e.insertBefore(this._domElement,e.firstChild):e.appendChild(this._domElement),e.appendChild(this._domElement),this.resize(),this.resize())}detach(){this._domElement&&this._domElement.parentNode&&this._domElement.parentNode.removeChild(this._domElement)}updateView(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.resize(t),e&&this._scene&&this.adjustCamera(!1)}resize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._canvas){this.disableAntialiasing(!0);var t=this._canvas.parentNode;if(t&&t instanceof HTMLElement){var n=t.offsetWidth,r=t.offsetHeight;(n!=this._lastWidth||r!=this._lastHeight||e)&&(this._canvas.style.width="100%",this._canvas.style.height="100%",this._engine&&(this._engine.resize(),this._brandLogoButton&&(this._brandLogoButton.left=100-this._canvas.width+"px",this._brandLogoButton.top=50-this._canvas.height+"px",console.group("BrandLogoButton","left: "+this._brandLogoButton.left+" - top: "+this._brandLogoButton.top),console.groupEnd()),this.setRenderingNeeded())),this._lastWidth=n,this._lastHeight=r,this.enableAntialiasing()}}}switchFullScreen(e){this._sceneHelper&&this._sceneHelper.switchFullScreen(e)}setupGlowManager(){this._glowManager&&(this._glowManager.dispose(),this._glowManager=null),this._zkScene&&this._scene&&(this._glowManager=new lr(this._zkScene,this._scene),this._glowManager.update(),this.setRenderingNeeded())}async setupSceneActionsExecutorAsync(){this._zkScene&&this._scene&&(this._sceneActionsExecutor=new ar(this._zkScene,this._scene),this._sceneActionsExecutor.deviceType=this.deviceType,this._sceneActionsExecutor.useMaterialOffloading=!this._configPreview&&this.getUseMaterialOffloading(),this._sceneActionsExecutor.prefetchMeshes=this.getPrefetchMeshes(),this._sceneActionsExecutor.prefetchMaterials=this.getPrefetchMaterials(),this._sceneActionsExecutor.addMeshDesignRefreshRequiredListeners(async e=>{await this.refreshMeshesDesignAsync(e.meshes,e.effect)}),this._sceneActionsExecutor.addBeginAssetsLoadingListener(()=>this.fireBeginAssetsLoadingEvent()),this._sceneActionsExecutor.addEndAssetsLoadingListener(()=>this.fireEndAssetsLoadingEvent()))}restoreCameraState(){this._sceneHelper&&(this._sceneHelper.restoreCameraState(),this._sceneHelper.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded())}async fixEnvironmentTexture(){if(this._scene&&this._scene.environmentTexture&&this._scene.environmentTexture.url&&"string"==typeof this._scene.environmentTexture.url){const e=this._scene.environmentTexture.url,t=(e.match(/http/g)||[]).length;let n,r,i,s=e;if(t>1){let t=e.lastIndexOf("http");t>=0&&(s=e.substring(t))}else if(0==t&&this._zkScene){let t=this._zkScene.get("rootUrl");if(t){const n=t.endsWith("/")?"":"/";s=t+n+e}}this._scene&&this._scene.metadata&&(void 0!==this._scene.metadata.environmentTextureRotationY&&"number"==typeof this._scene.metadata.environmentTextureRotationY&&(n=this._scene.metadata.environmentTextureRotationY),this._scene.metadata.environmentTextureExtensions&&(r=this._scene.metadata.environmentTextureExtensions),this._scene.metadata.environmentTextureFiles&&(i=this._scene.metadata.environmentTextureFiles)),await this.setSceneEnvironmentTexture(s,n,r,i)}else await this.checkSceneEmptyEnvironmentTexture()}async checkSceneEmptyEnvironmentTexture(){this._scene&&this._sceneHelper&&this._sceneHelper.containsPBRMaterials()&&!this._scene.environmentTexture&&await this.setDefaultSceneEnvironmentTexture()}async setDefaultSceneEnvironmentTexture(){const e=Sn.Environment.EnvironmentTextureCDNUrl;await this.setSceneEnvironmentTexture(e)}async setSceneEnvironmentTexture(e,t,n,r,i,s){return new Promise(t=>{if(this._scene&&this._sceneHelper){if(this._scene.environmentTexture&&this._sceneHelper.isTextureWithUrl(this._scene.environmentTexture)&&this._scene.environmentTexture.url&&this._scene.environmentTexture.url!=e&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null),this._scene&&this._sceneHelper){this._scene.environmentTexture&&this._sceneHelper.isTextureWithUrl(this._scene.environmentTexture)&&this._scene.environmentTexture.url&&this._scene.environmentTexture.url!=e&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null);const t=()=>{i&&i(),this.setLongRenderingNeeded()};this._scene.metadata||(this._scene.metadata={}),delete this._scene.metadata.environmentTextureType,delete this._scene.metadata.environmentTextureSize,delete this._scene.metadata.environmentTextureExtensions,delete this._scene.metadata.environmentTextureFiles;let a=null;e.endsWith(".dds")?a=BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):e.endsWith(".hdr")?(a=new BABYLON.HDRCubeTexture(e,this._scene,128,(null==s?void 0:s.get("mipMaps"))||void 0,(null==s?void 0:s.get("generateHarmonics"))||void 0,(null==s?void 0:s.get("gammaSpace"))||void 0,(null==s?void 0:s.get("prefilterOnLoad"))||void 0,t),this._scene.metadata.environmentTextureType="BABYLON.HDRCubeTexture",this._scene.metadata.environmentTextureSize=128):e.endsWith(".env")?a=new BABYLON.CubeTexture(e,this._scene,null,!1,null,t,null,void 0,!0,void 0,!0):e.endsWith(".basis")?a=BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):n&&6===n.length&&r&&6===r.length&&(a=new BABYLON.CubeTexture(e,this._scene,n,!1,r,t),this._scene.metadata.environmentTextureExtensions=n,this._scene.metadata.environmentTextureFiles=r),a&&kn.whenTextureIsReadyAsync(a).then(()=>{var e,t,n,r,i,s,o,l;if(a&&this._scene){const u=null==(r=null==(n=null==(t=null==(e=this._zkScene)?void 0:e.get("config"))?void 0:t.get("general"))?void 0:n.get("environmentOptions"))?void 0:r.get("intensity"),c=null==(l=null==(o=null==(s=null==(i=this._zkScene)?void 0:i.get("config"))?void 0:s.get("general"))?void 0:o.get("environmentOptions"))?void 0:l.get("rotationY");u&&(a.level=u),c?a.rotationY=c:this._scene.metadata&&null!=this._scene.metadata.environmentTextureRotationY&&delete this._scene.metadata.environmentTextureRotationY,this._scene.environmentTexture=a,this.setRenderingNeeded()}})}t()}})}async loadSceneFromModelAsync(e,t,n){if(e&&e instanceof MPlaza.Model&&(this._zkModel=e),t&&t instanceof Zakeke.Scene){this._zkScene=t,this.checkSceneShaderMaterials(t);const e=t.get("rootUrl"),r=t.get("sceneFileName");e&&r&&await this.loadSceneFromRemoteFilesAsync(e,r,n)}}async loadSceneFromModelDataAsync(e,t,n,r){if(e&&e instanceof MPlaza.Model&&(this._zkModel=e),t&&t instanceof Zakeke.Scene){this._zkScene=t,this.checkSceneShaderMaterials(t);var i="data:"+n;const e=t.get("rootUrl");e&&await this.loadSceneFromRemoteFilesAsync(e,i,r)}}preSceneFileLoading(){}postSceneFileLoading(){}async loadSceneFromRemoteFilesAsync(e,t,n){if(!this._engine)throw new Error("Unable to load scene when the 3D engine is null");try{this.fireBeginSceneLoadingEvent(),this.preSceneFileLoading(),this.pauseRendering(),this._engine.sceneFileRootUrl=e;let i=await BABYLON.SceneLoader.LoadAsync(e,t,this._engine,n);if(this._destroyed)return Logger.info("Loading scene engine destroyed"),void i.dispose();if(await new Promise(e=>i.executeWhenReady(()=>e())),this._destroyed)throw Logger.info("Loading scene engine destroyed"),i.dispose(),new Error("Engine destroyed while loading scene");const s=kn.visibleMeshesRequireDelayedLoading(i);s&&this.fireBeginAssetsLoadingEvent();const a=i.meshes.filter(e=>e.isVisible);for(let e=0;e<a.length;e++)await this.fireNextSceneMeshesLoadedEvent(e+1,a.length),await new Promise(e=>{setTimeout(()=>{e()},10)});await kn.whenAllVisibleMeshesAreReadyAsync(a),s&&this.fireEndAssetsLoadingEvent(),this.deleteScene(),this._scene=i;let o=[];for(let e=0;e<this._scene.textures.length;e++){const t=this._scene.textures[e];o.push(t.name),t instanceof BABYLON.Texture&&t.onLoadObservable&&t.onLoadObservable.add(e=>{this.setLongRenderingNeeded()})}if(this._scene&&this._scene.metadata&&!this._scene.metadata.delayedMaterials)for(let e=0;e<this._scene.textures.length;e++)await this.fireNextSceneTextureLoadedEvent(e+1,this._scene.textures.length),await new Promise(e=>{setTimeout(()=>{e()},10)});if(await this.setupSceneAsync(),this._sceneHelper){this._configPreview&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&await this._sceneHelper.loadAllDelayedMaterialsAsync(e,this.fireNextSceneTextureLoadedEvent.bind(this)),this._configPreview&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._sceneHelper.loadAllOffloadedMaterials(e),this._configPreview&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials&&this._sceneHelper.unsetAllDummyMaterials(),this._sceneHelper.setupShaderMaterialsCameraPosition();try{await this.reloadAllLoadingErrorTexturesAsync()}catch(r){console.error(r)}}if(this._environmentManager){const e=this._environmentManager.getSkyboxTexture();e&&await kn.whenTextureIsReadyAsync(e)}}finally{this.resumeRendering(),this.postSceneFileLoading(),this.fireEndSceneLoadingEvent()}}getSkyboxTexture(){var e;return null==(e=this._environmentManager)?void 0:e.getSkyboxTexture()}async loadSceneFromRemoteFilesAsync_OLD(e,t,n){return new Promise(async(r,i)=>{this._engine||i(),this.preSceneFileLoading(),this._engine.sceneFileRootUrl=e;let s=await BABYLON.SceneLoader.LoadAsync(e,t,this._engine,n);if(this._destroyed)return Logger.info("Loading scene engine destroyed"),void s.dispose();s.executeWhenReady(async()=>{this._destroyed&&(Logger.info("Loading scene engine destroyed"),s.dispose(),i());const t=s.meshes.filter(e=>e.isVisible),n=kn.visibleMeshesRequireDelayedLoading(s);n&&this.fireBeginAssetsLoadingEvent(),await kn.whenAllVisibleMeshesAreReadyAsync(t),n&&this.fireEndAssetsLoadingEvent(),this.deleteScene(),this._scene=s;for(let e=0;e<this._scene.textures.length;e++){const t=this._scene.textures[e];t instanceof BABYLON.Texture&&t.onLoadObservable&&t.onLoadObservable.add(e=>{this.setLongRenderingNeeded()})}await this.setupSceneAsync(),this._sceneHelper&&(this._configPreview&&this._scene.metadata&&this._scene.metadata.delayedMaterials&&await this._sceneHelper.loadAllDelayedMaterialsAsync(e),this._configPreview&&this._scene.metadata&&this._scene.metadata.offloadedMaterials&&this._sceneHelper.loadAllOffloadedMaterials(e),this._configPreview&&this._scene.metadata&&this._scene.metadata.originalMeshMaterials&&this._sceneHelper.unsetAllDummyMaterials(),this._sceneHelper.setupShaderMaterialsCameraPosition()),this.postSceneFileLoading(),r()})})}checkSceneShaderMaterials(e){if(e instanceof Zakeke.Scene&&e.get("shaderMaterials"))for(let t=0;t<e.get("shaderMaterials").length;t++){const n=e.get("shaderMaterials").at(t),r=n.get("name"),i=n.get("vertex"),s=n.get("fragment");if(r&&i&&s){const e={name:r,vertex:i,fragment:s};this.setupShadersStore(e)}}}checkShaderMaterial(e){if(e&&e instanceof Zakeke.Material&&e.get("shaders")){const t=e.get("shaders").get("name"),n=e.get("shaders").get("vertex"),r=e.get("shaders").get("fragment");if(t&&n&&r){const e={name:t,vertex:n,fragment:r};this.setupShadersStore(e)}}}setupShadersStore(e){if(e&&e.hasOwnProperty("name")&&e.hasOwnProperty("vertex")&&e.hasOwnProperty("fragment")){var t=e.name+"VertexShader",n=e.name+"FragmentShader";BABYLON.Effect.ShadersStore[t]=e.vertex,BABYLON.Effect.ShadersStore[n]=e.fragment}}isRealMesh(e){return!!this._sceneHelper&&this._sceneHelper.isRealMesh(e)}countSceneMeshes(){return this._sceneHelper?this._sceneHelper.countSceneMeshes():0}getVisibleMeshes(){return this._sceneHelper?this._sceneHelper.getVisibleMeshes():[]}getSceneBoundingInfo(){return this._sceneHelper?this._sceneHelper.getSceneBoundingInfo():null}selectMesh(e){this.selectUnselectMesh(e,!0)}unselectMesh(e){this.selectUnselectMesh(e,!1)}unselectAllMeshes(){this._scene&&(this._scene.meshes.forEach(e=>this.unselectSingleMesh(e)),this.fireFocusAttributesEvent({groups:[]}))}selectUnselectMesh(e,t){if(this._scene&&(this._scene.meshes.forEach(e=>this.unselectSingleMesh(e)),t)){let t=e=>{this.selectSingleMesh(e);const n=e.getChildMeshes();n&&n.forEach(e=>t(e))};const r=this._scene.getMeshByID(e);if(r){t(r);const e=this.getGroupForMesh(r);e&&(this.highlightGroupForMesh(r),this.fireGroupPickedEvent({groupID:e.get("groupID")}));var n=this.getVisibleHiddenAttributesForMesh(r);this.fireFocusAttributesEvent({groups:n}),n.length>0&&this.highlightMeshes([r])}}}selectSingleMesh(e){this.setRenderingNeeded(),e.selected=!0}unselectSingleMesh(e){this.setRenderingNeeded(),e.selected=!1}selectMeshesWithMaterial(e){this.selectUnselectMeshesWithMaterial(e,!0)}unselectMeshesWithMaterial(e){this.selectUnselectMeshesWithMaterial(e,!1)}selectUnselectMeshesWithMaterial(e,t){if(this._scene&&(this._scene.meshes.forEach(e=>this.unselectSingleMesh(e)),t)){let t=n=>{n.material&&n.material.id===e&&this.selectSingleMesh(n);const r=n.getChildMeshes();r&&r.forEach(e=>{t(e)})};this._scene.meshes.forEach(e=>{t(e)})}}onPointerDown(e,t){t.hit&&t.pickedMesh?this.selectMesh(t.pickedMesh.id):this.unselectAllMeshes()}getSelectedRootMesh(){if(this._scene)for(let e=0;e<this._scene.meshes.length;e++){const t=this._scene.meshes[e];if(t.selected){const e=t.parent;if(!e||!e.selected)return t}}return null}getMeshByID(e){return this._scene?this._scene.getMeshByID(e):null}getMeshByName(e){return this._scene?this._scene.getMeshByName(e):null}getMaterialByID(e){return this._scene?this._scene.getMaterialByID(e):null}setCameraLocation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._zkScene&&this._sceneHelper){const r=this._zkScene.getCameraLocation(e);if(r){const e=new BABYLON.Vector3(r.get("px"),r.get("py"),r.get("pz")),i=new BABYLON.Vector3(r.get("tx"),r.get("ty"),r.get("tz"));if(n)if(t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const t=this._sceneHelper.computeCameraAngleOfView(i,e);this._sceneHelper.animateCameraToFinalParamters(t.alpha,t.beta,this._camera.radius,this._camera.target,.5)}}else this._sceneHelper.animateCamera(i,e,.5);else if(t){if(this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const t=this._sceneHelper.computeCameraAngleOfView(i,e);this._sceneHelper.moveCameraToFinalParameters(t.alpha,t.beta,this._camera.radius,this._camera.target)}}else this._sceneHelper.moveCamera(i,e)}}this.setRenderingNeeded()}adjustCamera(e){this._sceneHelper&&(null!=e&&null!=e&&"boolean"==typeof e?this._sceneHelper.adjustCamera(void 0,void 0,void 0,e):this._sceneHelper.adjustCamera(),this.setupShaderMaterialsCameraPosition(),this.setRenderingNeeded())}zoomIn(){this._sceneHelper&&this._sceneHelper.zoomIn()}zoomOut(){this._sceneHelper&&this._sceneHelper.zoomOut()}zoom(e){this._sceneHelper&&this._sceneHelper.zoom(e)}setCameraPivot(e){if(this._scene&&this._sceneHelper){const t=e?this._scene.getMeshByID(e):null;this._sceneHelper.setCameraPivot(t)}}setCameraZoomEnabled(e){this._scene&&this._sceneHelper&&(this._sceneHelper.setZoomEnabled(e),this.setRenderingNeeded())}async executeScriptAsync(e){this._sceneActionsExecutor&&(await this._sceneActionsExecutor.executeScriptAsync(e),this.notifyScriptExecution(e),this.setupShaderMaterialsCameraPosition(),this.refreshInfoPoints(),this.setLongRenderingNeeded())}async executeActionsAsync(e,t,n){this._sceneActionsExecutor&&(await this._sceneActionsExecutor.executeActionsAsync(e,t,n),this.notifyActionExecution(e,t,n),this.setupShaderMaterialsCameraPosition(),this.refreshInfoPoints(),this.setLongRenderingNeeded())}async prefetchMeshesForUnselectedOptionsAsync(e){this._sceneActionsExecutor&&await this._sceneActionsExecutor.prefetchMeshesForUnselectedOptionsAsync(e)}async prefetchDataForUnselectedOptionsAsync(e){this._sceneActionsExecutor&&await this._sceneActionsExecutor.prefetchDataForUnselectedOptionsAsync(e)}async refreshPBRMaterials(){var e,t,n,r,i;const s=null==(e=this._scene)?void 0:e.materials,a=null==(n=null==(t=this._zkScene)?void 0:t.get("config"))?void 0:n.toJSON();if(!a||!s)return;const o=null==(i=null==(r=null==a?void 0:a.general)?void 0:r.environmentOptions)?void 0:i.pbrIntensity;o&&(null==s||s.forEach(e=>{e instanceof BABYLON.PBRMaterial&&(e.environmentIntensity=o)}))}async refreshModel(){var e,t,n,r,i,s,a,o;const l=null==(e=this._scene)?void 0:e.meshes,u=null==(n=null==(t=this._zkScene)?void 0:t.get("config"))?void 0:n.toJSON();if(u&&l&&(null==(a=this._sceneHelper)||a.transformEntireScene(null==(r=u.model)?void 0:r.position,null==(i=u.model)?void 0:i.rotation,null==(s=u.model)?void 0:s.scale),null!=(o=u.model)&&o.config)){const e=u.model.config.doubleSided;void 0!==e&&(null==l||l.forEach(t=>{t.material instanceof BABYLON.PBRMaterial&&t.material&&!(t instanceof BABYLON.GroundMesh)&&(t.material.backFaceCulling=!e)}))}}async refreshEnvironment(){if(this._zkScene&&this._scene){const e=this._zkScene.getOrCreateGeneralConfig().get("environmentTexture"),t=this._zkScene.getOrCreateGeneralConfig().get("environmentOptions");e&&t&&!this._scene.textures.some(t=>t.url===e)&&await this.setSceneEnvironmentTexture(e,void 0,void 0,void 0,void 0,t),(!this._environmentManager||this._environmentManager.scene!=this._scene||this._environmentManager.isHologram!=this._isHologram)&&(this._environmentManager=new pi(this._zkScene,this._scene,this._isHologram)),this._environmentManager.update(),this.setLongRenderingNeeded(),this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._autoRender=this._camera.useAutoRotationBehavior),this.setRenderingNeeded()}}highlightMeshes(e){if(!e||"[object Array]"!==Object.prototype.toString.call(e)||0==this._highlightSize)return;const t=this._highlightBlurHorizontalSize,n=this._highlightBlurVerticalSize,r=e=>{e.isVisible&&this._highlightLayer&&this._highlightLayer.addMesh(e,BABYLON.Color3.FromHexString(this._highlightColor)),e.getChildMeshes().forEach(e=>{e instanceof BABYLON.Mesh&&r(e)})},i=e=>{this._highlightLayer&&this._highlightLayer.removeMesh(e),e.getChildMeshes().forEach(e=>{e instanceof BABYLON.Mesh&&i(e)})},s=()=>{if(this._highlightAnimationID&&(clearInterval(this._highlightAnimationID),this._highlightAnimationID=null),this._highlightCurrentMeshes&&this._highlightCurrentMeshes.forEach(e=>{e instanceof BABYLON.Mesh&&i(e)}),this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=t,this._highlightLayer.blurVerticalSize=n),this._highlightNextMeshes){const e=this._highlightNextMeshes;this._highlightNextMeshes=[],this.highlightMeshes(e)}};if(this._highlightAnimationID)return this._highlightNextMeshes=e,void s();if(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer){this._highlightCurrentMeshes=e,e.forEach(e=>{e instanceof BABYLON.Mesh&&r(e)});const i=20,a=i/800;let o=t,l=n;this._highlightAnimationID=window.setInterval(()=>{this._highlightLayer&&(o-=t*a,l-=n*a,o=Math.max(0,o),l=Math.max(0,l),o>=0&&(this._highlightLayer.blurHorizontalSize=o),l>=0&&(this._highlightLayer.blurVerticalSize=l),(0==o||0==l)&&s(),this.setRenderingNeeded())},i),this.setRenderingNeeded()}}highlightGroupForMesh(e){const t=this.getGroupForMesh(e);this.highlightGroup(t)}highlightGroupByID(e){if(this._zkModel){const t=this._zkModel.get("attributeGroups").findWhere({groupID:e});t?this.highlightGroup(t):this.highlightGroup(null)}}highlightGroup(e){if(this._zkScene&&this._scene&&e){const n=e.get("meshSelector");if(n){var t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,n,MPlaza.SceneElementType.Mesh);this.highlightMeshes(t)}}}getGroupForMesh(e){if(this._zkModel&&this._zkScene&&this._scene&&e&&this._sceneHelper){const t=this._zkModel.get("attributeGroups");for(let n=0;n<t.length;n++){const r=t.at(n),i=r.get("meshSelector");if(i){const t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,i,MPlaza.SceneElementType.Mesh);for(let n=0;n<t.length;n++){let i=t[n];if(e.id==i.id||this._sceneHelper.meshHasParent(e.id,i.id))return r}}}}return null}highlightAttributeByID(e){if(this._zkModel){const t=this._zkModel.get("attributes").findWhere({attributeID:e});t?this.highlightAttribute(t):this.highlightAttribute(null)}}highlightAttribute(e){if(this._zkScene&&this._scene&&e){const n=e.get("meshSelector");if(n){var t=this._elementSelector.getMeshElements(this._zkScene,this._scene,null,n,MPlaza.SceneElementType.Mesh);this.highlightMeshes(t)}}}getVisibleHiddenAttributesForMesh(e){const t=[],n=e=>{let n=t.find(t=>t.groupId==e);return n||(n={groupId:e,visibleAttributes:[],hiddenAttributes:[]},t.push(n)),n};if(this._zkModel&&this._zkScene&&this._scene&&e){const t=this._zkModel.get("attributes");for(let r=0;r<t.length;r++){const i=t.at(r),s=i.get("attributeID"),a=i.get("meshSelector");if(a){const t=n(i.get("groupID"));this._elementSelector.getMeshElements(this._zkScene,this._scene,null,a,MPlaza.SceneElementType.Mesh).find(t=>!!this._sceneHelper&&(e.id==t.id||this._sceneHelper.meshHasParent(e.id,t.id)))?t.visibleAttributes.push(s):t.hiddenAttributes.push(s)}}}return t.filter(e=>e.visibleAttributes.length>0)}fireGroupPickedEvent(e){for(let t=0;t<this._groupPickedListeners.length;t++)this._groupPickedListeners[t](e)}addGroupPickedListener(e){this._groupPickedListeners.push(e)}fireFocusAttributesEvent(e){for(let t=0;t<this._focusAttributesListeners.length;t++)this._focusAttributesListeners[t](e)}addFocusAttributesListener(e){this._focusAttributesListeners.push(e)}addNotifyMessageListener(e){this._designNotifyMessageListeners.push(e),this._sceneDesignManager&&this._sceneDesignManager.addNotifyMessageListener(e)}addRemoveMessageListener(e){this._designRemoveMessageListeners.push(e),this._sceneDesignManager&&this._sceneDesignManager.addRemoveMessageListener(e)}setEventMessages(e){this._designEventMessages=e,this._sceneDesignManager&&this._sceneDesignManager.setEventMessages(e)}addInfoPointPickedListener(e){this._infoPointPickedListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointPickedListener(e)}addInfoPointContentShownListener(e){this._infoPointContentShownListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointContentShownListener(e)}addInfoPointContentHiddenListener(e){this._infoPointContentHiddenListeners.push(e),this._infoPointsManager&&this._infoPointsManager.addInfoPointContentHiddenListener(e)}addBeginAssetsLoadingListener(e){this._beginAssetsLoadingListeners.push(e)}fireBeginAssetsLoadingEvent(){Logger.info("Begin Assets Loading");for(let e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}addEndAssetsLoadingListener(e){this._endAssetsLoadingListeners.push(e)}fireEndAssetsLoadingEvent(){Logger.info("End Assets Loading");for(let e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}addNextSceneMeshesLoadedListeners(e){this._nextSceneMeshesLoadedListeners.push(e)}async fireNextSceneMeshesLoadedEvent(e,t){let n=[];for(let r=0;r<this._nextSceneMeshesLoadedListeners.length;++r)n.push(this._nextSceneMeshesLoadedListeners[r](e,t));await Promise.all(n)}addNextSceneTextureLoadedListeners(e){this._nextSceneTexturesLoadedListeners.push(e)}async fireNextSceneTextureLoadedEvent(e,t){let n=[];for(let r=0;r<this._nextSceneTexturesLoadedListeners.length;++r)n.push(this._nextSceneTexturesLoadedListeners[r](e,t));await Promise.all(n)}addBeginSceneLoadingListener(e){this._beginAssetsLoadingListeners.push(e)}fireBeginSceneLoadingEvent(){Logger.info("Begin Scene Loading");for(let e=0;e<this._beginAssetsLoadingListeners.length;++e)this._beginAssetsLoadingListeners[e]()}addEndSceneLoadingListener(e){this._endAssetsLoadingListeners.push(e)}fireEndSceneLoadingEvent(){Logger.info("End Scene Loading");for(let e=0;e<this._endAssetsLoadingListeners.length;++e)this._endAssetsLoadingListeners[e]()}async getSceneScreenshotAsync(e,t){return this._sceneHelper?(this.setRenderingNeeded(),await this._sceneHelper.takeScreenshotAsync(e,t)):null}async getSceneContentScreenshotAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;if(!this._sceneHelper||!this.scene||!this.zkModel||!this.zkScene)return null;this.preSceneContentScreenshot(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null),this.setRenderingNeeded();let s="";if(r)s=await this._sceneHelper.takeContentScreenshotAsync(e,t);else{const n=this._canvas;if(n){const r=n.width,a=n.height;n.width=e,n.height=t;const o=this.scene.activeCamera.position.clone(),l=this.scene.activeCamera.target.clone(),u=i?{position:new BABYLON.Vector3(i.get("px"),i.get("py"),i.get("pz")),target:new BABYLON.Vector3(i.get("tx"),i.get("ty"),i.get("tz"))}:{position:this._scene.activeCamera.position,target:this._scene.activeCamera.target};this._scene.activeCamera.position=u.position,this._scene.activeCamera.target=u.target,this._scene.render(),s=await this._sceneHelper.takeContentScreenshotAsync(e,t),this._scene.activeCamera.position=o,this._scene.activeCamera.target=l,n.width=r,n.height=a}}console.log("senza Utils");let a=await Pr(s);if(a||(console.error("Failed trimming image.",s),a=s),a=await Fr(a,e,t,n),!a)throw new Error("Failed resizing image.");return this.refreshEnvironment(),this.postSceneContentScreenshot(),a}preSceneContentScreenshot(){}postSceneContentScreenshot(){}preSceneMaterialScreenshot(){this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null)}postSceneMaterialScreenshot(){this.refreshEnvironment()}async getMaterialScreenshotAsync(e,t,n){if(!this._scene||!this._sceneHelper)return null;this.preSceneMaterialScreenshot();let r=null;const i=await this.getSceneRootUrl();if(i){const s=await Kr.getPreviewsAsync(this._scene,i,[e],{width:t,height:n,crop:!0},!1),a=Object.keys(s.previewFiles);1==a.length&&(r=s.previewFiles[a[0]])}else{const i=await this._sceneHelper.takeMaterialScreenshotAsync(e,t,n);console.log("0 TRIM IMAGE",i);const s=await Pr(i);s&&(r=s)}return this.postSceneMaterialScreenshot(),r}clearListeners(){this._groupPickedListeners=[],this._focusAttributesListeners=[]}async renderDesignAsync(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._scene&&this._zkScene&&this._zkModel&&e){if(this._sceneDesignManager&&this._sceneDesignManager.isForModels(this._scene,this._zkModel,e))this._sceneDesignManager.showDesign=t,this._sceneDesignManager.rotation=this._currentRotation,await this._sceneDesignManager.refreshAsync();else{this.emptyArFileCache(),this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this._sceneDesignManager=new si(this._scene,this._zkScene,this._zkModel,e,t),this._sceneDesignManager.addRenderingNeededListener(()=>{this.setLongRenderingNeeded(),this.notifyDesignChanged(e)}),this._sceneDesignManager.setCustomizerGrids(this._grids),this._sceneDesignManager.setEventMessages(this._designEventMessages);for(const e of this._designNotifyMessageListeners)this._sceneDesignManager.addNotifyMessageListener(e);for(const e of this._designRemoveMessageListeners)this._sceneDesignManager.addRemoveMessageListener(e);await this._sceneDesignManager.refreshAsync()}this.updateHighlightLayerExcludedDesignMeshes(),this.setLongRenderingNeeded()}}resetDesign(){this._scene&&this._zkScene&&this._zkModel&&(this._sceneDesignManager&&(this._sceneDesignManager.dispose(),this._sceneDesignManager=null),this.updateHighlightLayerExcludedDesignMeshes(),this.setLongRenderingNeeded())}clearMeshDesignManagers(){this._sceneDesignManager&&this._sceneDesignManager.clearMeshDesignManagers()}async refreshMeshesDesignAsync(e,t){e&&"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(async e=>await this.refreshMeshDesignAsync(e.id,void 0,t||void 0))}async refreshMeshDesignAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;var r;null==(r=this._sceneDesignManager)||r.refreshMeshDesignAsync(e,t,n)}setCustomizerGrids(e){var t;this._grids=e,null==(t=this._sceneDesignManager)||t.setCustomizerGrids(e)}removeDesignItem(e){var t;null==(t=this._sceneDesignManager)||t.removeItem(e)}addDesignItemText(e,t){var n;return null==(n=this._sceneDesignManager)?void 0:n.addItemText(e,t)}async addDesignItemImage(e,t){var n;await(null==(n=this._sceneDesignManager)?void 0:n.addItemImage(e,t))}getDesignItemsInfo(){var e;return(null==(e=this._sceneDesignManager)?void 0:e.getItemsInfo())||[]}setDesignItemText(e,t){var n;null==(n=this._sceneDesignManager)||n.setItemText(e,t)}setDesignItemBold(e,t){var n;null==(n=this._sceneDesignManager)||n.setItemBold(e,t)}setDesignItemItalic(e,t){var n;null==(n=this._sceneDesignManager)||n.setItemItalic(e,t)}setDesignItemColor(e,t){var n;null==(n=this._sceneDesignManager)||n.setItemColor(e,t)}setDesignItemFontFamily(e,t){var n;null==(n=this._sceneDesignManager)||n.setItemFontFamily(e,t)}async setDesignItemImage(e,t){var n;await(null==(n=this._sceneDesignManager)?void 0:n.setItemImage(e,t))}setItemTextOnPath(e,t,n){var r;null==(r=this._sceneDesignManager)||r.setItemTextOnPath(e,t,n)}removeDesignItemImage(e){var t;null==(t=this._sceneDesignManager)||t.removeItemImage(e)}setDesignVisibility(e,t){var n;null==(n=this._sceneDesignManager)||n.setDesignVisibility(e,t)}setupShaderMaterialsCameraPosition(){if(this._scene)for(let e=0;e<this._scene.materials.length;e++){const t=this._scene.materials[e];this.setupShaderMaterialCameraPosition(t)}}setupShaderMaterialCameraPosition(e){this._scene&&this._scene.activeCamera&&e&&e instanceof BABYLON.ShaderMaterial&&e.setVector3("cameraPosition",this._scene.activeCamera.position)}setMeshLocation(e){this._meshLocationsManager&&this._meshLocationsManager.setMeshLocationByID(e)}async explodeMeshes(){this._meshLocationsManager&&await this._meshLocationsManager.explodeMeshes()}async collapseMeshes(){this._meshLocationsManager&&await this._meshLocationsManager.collapseMeshes()}dracoDecodingFunction(e,t,n){this.decodeDracoFile(e,t,n)}decodeDracoFile(e,t,n){var r=(new Date).getTime(),i=new Uint8Array(t),s=msgpack.decode(i);this.dracoCompression.decodeMeshAsync(s.data,s.attributes).then(function(i){let s={};i&&(i.indices&&(s.indices=i.indices),i.positions&&(s.positions=i.positions),i.normals&&(s.normals=i.normals),i.tangents&&(s.tangents=i.tangents),i.uvs&&(s.uvs=i.uvs),i.uvs2&&(s.uv2s=i.uvs2),i.uvs3&&(s.uv3s=i.uvs3),i.uvs4&&(s.uv4s=i.uvs4),i.uvs5&&(s.uv5s=i.uvs5),i.uvs6&&(s.uv6s=i.uvs6));var a=new Date,o=a.getTime()-r,l=a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+"."+a.getMilliseconds();console.log("Draco Decoding ["+l+"] - "+e+"\t"+t.byteLength+"\t"+o+" ms"),n&&n(s)})}exportSceneToBabylon(){return this._zkScene&&this._sceneHelper?this._sceneHelper.exportSceneToBabylon():null}exportVisibleMeshesToBabylon(){return this._zkScene&&this._sceneHelper?this._sceneHelper.exportVisibleMeshesToBabylon():null}async exportMeshesForTyOnToBabylon(){return this._zkScene&&this._sceneHelper?await this._sceneHelper.exportMeshesForTyOnToBabylon():null}async exportMeshToBabylon(e){if(!this._scene||!this._zkScene||!this._sceneHelper)return null;const t=this._scene.getMeshById(e);return t?await this._sceneHelper.exportMeshToBabylon(t):null}async downloadMeshToBabylon(e){if(!this._scene||!this._zkScene||!this._sceneHelper)return;const t=this._scene.getMeshById(e);t&&await this._sceneHelper.downloadMeshBabylonAsync(t)}async saveSceneOnDatabaseAsync(e){const t=this.exportSceneToBabylon();if(t){const n=new Bi;await n.openAsync(),await n.saveFileAsync(e,t)}}async saveVisibleMeshesOnDatabaseAsync(e){const t=await this.exportMeshesForTyOnToBabylon();if(t){const n=new Bi;await n.openAsync(),await n.saveFileAsync(e,t)}}async saveGlbOnDatabaseAsync(e){let t=null;if(t=await this.exportSceneToLocalGLBAsync(),t){const n=new Bi;await n.openAsync(),await n.saveFileAsync(e,t)}}getArFileUrlCacheKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"usdz",r="scene_"+e;if(t&&(r+="_code_"+t),this._sceneDesignManager){var i=this._sceneDesignManager.getDesignItemsJson();if(i){var s=CryptoJS.SHA1(i).toString();r+="_design_"+this._sceneDesignManager.getDesignID()+"_"+s}}return r+="_"+n,r}getCachedArFileUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"usdz";var r=this.getArFileUrlCacheKey(e,t,n);return this._arFileUrls.hasOwnProperty(r)?this._arFileUrls[r]:null}cacheArFileUrl(e,t,n,r){if(r){var i=this.getArFileUrlCacheKey(e,t||void 0,n);this._arFileUrls[i]=r}}async exportMeshToGLBBlob(e){if(!this._scene||!this._zkScene||!this._sceneHelper)return null;let t=null;const n=this._zkScene.get("rootUrl");return n&&(t=n),this._sceneHelper.exportMeshToGLBBlob(t,e)}async exportSceneToUsdzAsync(e,t,n){var r,i,s,a;if(!this._zkScene||!this._sceneHelper)return null;const o="usdz";let l=null;if(e&&(!this._sceneDesignManager||n)&&(l=this.getCachedArFileUrl(e,t,o)),l)return l;let u=null,c=null;const h=this._zkScene.get("name");h&&(u=h);const d=this._zkScene.get("rootUrl");return d&&(c=d),this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),l=await this._sceneHelper.exportSceneToUsdzAsync(u,c,this._sceneDesignManager&&!n?void 0:e,this._sceneDesignManager&&!n?void 0:t,null!==(r=null==(s=this.zkScene)?void 0:s.getARMeshSize())&&void 0!==r?r:null,null!==(i=this.getDAMMainMesh())&&void 0!==i?i:null,null==(a=this._zkScene)?void 0:a.getARScale()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),l&&e&&!this._sceneDesignManager&&this.cacheArFileUrl(e,t||null,o,l),l}async exportMeshToUsdzAsync(e){var t;const n=this.getMeshByID(e);if(n&&this._zkScene&&this._sceneHelper){var r,i;let e=null;const s=this._zkScene.get("rootUrl");s&&(e=s);const a=await this._sceneHelper.exportMeshToUsdzAsync(e,n,null!==(r=null==(t=this.zkScene)?void 0:t.getARMeshSize())&&void 0!==r?r:null,null!==(i=this.getDAMMainMesh())&&void 0!==i?i:null,this.getARScale());return Logger.info("USDZ: "+a),a}return null}async exportSceneToRemoteGlTFAsync(e,t,n){var r,i,s,a;if(!this._sceneHelper)return null;const o="glTF";let l=null;if(e&&(!this._sceneDesignManager||n)&&(l=this.getCachedArFileUrl(e,t,o)),l)return l;let u=null,c=null;if(this._zkScene){const e=this._zkScene.get("name");e&&(u=e);const t=this._zkScene.get("rootUrl");t&&(c=t)}return this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),l=await this._sceneHelper.exportSceneToRemoteGlTFAsync(u,c,this._sceneDesignManager&&!n?void 0:e,this._sceneDesignManager&&!n?void 0:t,null!==(r=null==(s=this.zkScene)?void 0:s.getARMeshSize())&&void 0!==r?r:null,null!==(i=this.getDAMMainMesh())&&void 0!==i?i:null,null==(a=this._zkScene)?void 0:a.getARScale()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),l&&e&&!this._sceneDesignManager&&this.cacheArFileUrl(e,t||null,o,l),Logger.info("GlTF: "+l),l}async exportMeshToRemoteGlTFAsync(e){var t;const n=this.getMeshByID(e);if(n&&this._zkScene&&this._sceneHelper){var r,i;let e=null;const s=this._zkScene.get("rootUrl");s&&(e=s);const a=await this._sceneHelper.exportMeshToRemoteGlTFAsync(e,n,null!==(r=null==(t=this.zkScene)?void 0:t.getARMeshSize())&&void 0!==r?r:null,null!==(i=this.getDAMMainMesh())&&void 0!==i?i:null,this.getARScale());return Logger.info("GlTF: "+a),a}return null}async exportSceneToRemoteGLBAsync(e,t,n){var r,i,s,a;if(!this._sceneHelper)return null;let o=null;if(e&&(!this._sceneDesignManager||n)&&(o=this.getCachedArFileUrl(e,t,"glb")),o)return o;let l=null,u=null;if(this._zkScene){const e=this._zkScene.get("name");e&&(l=e);const t=this._zkScene.get("rootUrl");t&&(u=t)}return this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),o=await this._sceneHelper.exportSceneToRemoteGLBAsync(l,u,this._sceneDesignManager&&!n?void 0:e,this._sceneDesignManager&&!n?void 0:t,null!==(r=null==(s=this.zkScene)?void 0:s.getARMeshSize())&&void 0!==r?r:null,null!==(i=this.getDAMMainMesh())&&void 0!==i?i:null,null==(a=this._zkScene)?void 0:a.getARScale()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),o&&e&&!this._sceneDesignManager&&this.cacheArFileUrl(e,t||null,"glb",o),Logger.info("GLB: "+o),o}async exportMeshToRemoteGLBAsync(e){var t;const n=this.getMeshByID(e);if(n&&this._zkScene&&this._sceneHelper){var r,i;let e=null;const s=this._zkScene.get("rootUrl");s&&(e=s);const a=await this._sceneHelper.exportMeshToRemoteGLBAsync(e,n,null!==(r=null==(t=this.zkScene)?void 0:t.getARMeshSize())&&void 0!==r?r:null,null!==(i=this.getDAMMainMesh())&&void 0!==i?i:null,this.getARScale());return Logger.info("GlTF: "+a),a}return null}async exportSceneToARAsync(e,t){let n=[];if(!this._sceneHelper)return n;let r=null,i=null;if(this._zkScene){const e=this._zkScene.get("name");e&&(r=e);const t=this._zkScene.get("rootUrl");t&&(i=t)}return this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),n=await this._sceneHelper.exportSceneToARMultiformatAsync(r,i,["usdz","glb"],e,t),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),n}async exportMeshToARAsync(e){var t;let n=[];const r=this.getMeshByID(e);if(r&&this._zkScene&&this._sceneHelper){var i,s;let e=null;const a=this._zkScene.get("rootUrl");a&&(e=a),n=await this._sceneHelper.exportMeshToARMultiformatAsync(e,r,["usdz","glb"],null!==(i=null==(t=this.zkScene)?void 0:t.getARMeshSize())&&void 0!==i?i:null,null!==(s=this.getDAMMainMesh())&&void 0!==s?s:null,this.getARScale())}return n}isAREnabled(){if(!this._zkScene)return!1;let e=this._zkScene.getAREnabled();return null!=e&&e&&null!=this._sceneHelper&&this._sceneHelper.checkMaterialsForAR()}async exportSceneToLocalGLBAsync(){this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes();let e=null;return this._sceneHelper&&(e=await this._sceneHelper.exportSceneToLocalGLBBlobAsync()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),e}async downloadSceneLocalGLBAsync(){this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),this._sceneHelper&&await this._sceneHelper.downloadSceneLocalGLBAsync(),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes()}async exportSceneToLocalUSDZAsync(){this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes();let e=null;return this._sceneHelper&&(e=await this._sceneHelper.exportSceneToLocalUSDZUrlAsync()),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes(),e}async downloadSceneLocalUSDZAsync(){this._sceneDesignManager&&this._sceneDesignManager.expandCanvasMeshes(),this._sceneHelper&&await this._sceneHelper.downloadSceneLocalUSDZAsync(),this._sceneDesignManager&&this._sceneDesignManager.contractCanvasMeshes()}getSceneRootUrl(){return new Promise((e,t)=>{let n=null;this._zkScene?(n=this._zkScene.get("rootUrl")||null,n?e(n):jQuery.ajax({url:this._zkScene.getSceneRootUrlApiUrl(),type:"GET",success:function(t){n=t,e(n)},error:function(e,n,r){t(r)}})):e(n)})}isTryOnMeshVisibleEnabledToShow(){const e=this.getVisibleMeshes();for(const t of e){const e=t.getChildren();if(e.length>0&&e.find(e=>this._sceneHelper.isTryOnEnabledForMesh(e))&&this._sceneHelper.isTryOnEnabledForMesh(t))return!0}return!1}getTryOnMeshVisible(){const e=this.getVisibleMeshes();for(let t of e){const e=t.getChildren();if(e.length>0&&!t.parent&&e.find(e=>{var t;return null==(t=this._sceneHelper)?void 0:t.isTryOnEnabledForMesh(e)}))return t}return null}getFrameDAMSettings(){if(this._zkScene){var e;const t=null!==(e=this._zkScene.getFrameDAMSettings())&&void 0!==e?e:null;if(t)return JSON.parse(t)}return null}getMeshFineTuningData(e){const t="string"==typeof e?this.getMeshByID(e):e;return t&&t.metadata&&t.metadata.tryOnFineTuningSettings?t.metadata.tryOnFineTuningSettings:null}getDAMFineTuningData(){var e,t;return null!=(e=this.zkScene)&&e.getFrameDAMSettings()&&(null==(t=this.getFrameDAMSettings())?void 0:t.finetuning)||null}getTryOnFineTuningMeshVisible(){var e;const t=this.getVisibleMeshes();for(const n of t){const t=n.getChildren();if(t.length>0&&t.find(e=>{var t;return null==(t=this._sceneHelper)?void 0:t.isTryOnEnabledForMesh(e)})&&null!=(e=null==n?void 0:n.metadata)&&e.tryOnFineTuningSettings)return n}return null}refreshInfoPoints(){if(!(this._zkScene&&this._zkScene.getInfoPointsEnabled()&&this.canShowInfoPoints))return this.disposeInfoPointsManager(),void this.setLongRenderingNeeded();const e=this.getInfoPointsManagerStyle();let t=null;this._infoPointsManager||this._scene&&this._zkScene&&(this._infoPointsManager=new Si(this._zkScene,this._scene,e),this._infoPointPickedListeners&&this._infoPointPickedListeners.length>0&&this._infoPointsManager.addInfoPointPickedListenerRange(this._infoPointPickedListeners),this._infoPointContentShownListeners&&this._infoPointContentShownListeners.length>0&&this._infoPointsManager.addInfoPointContentShownListenerRange(this._infoPointContentShownListeners),this._infoPointContentHiddenListeners&&this._infoPointContentHiddenListeners.length>0&&this._infoPointsManager.addInfoPointContentHiddenListenerRange(this._infoPointContentHiddenListeners),this._infoPointsManager.onBeforeShowImages=()=>{null===t&&(t=this.antialias),this.antialias=!1,this.disableAntialiasing()},this._infoPointsManager.onAfterShowImages=()=>{this.antialias=t,t=null,this.enableAntialiasing(),this.setLongRenderingNeeded()},this._infoPointsManager.addRenderingNeededListener(()=>this.setRenderingNeeded())),this._infoPointsManager&&(this.updateInfoPointsManagerStyle(),this._infoPointsManager.canShowInfoPointsContent=this.canShowInfoPointsContent,this._infoPointsManager.refresh()),this.setLongRenderingNeeded()}getInfoPointsManagerStyle(){const e=this._infoPointsManagerStyle?this._infoPointsManagerStyle:{};if(this._zkScene){const t=this._zkScene.getInfoPointsStyleConfig();t&&(e.infoPointsStyle||(e.infoPointsStyle={}),t.get("borderColor")&&(e.infoPointsStyle.borderColor=t.get("borderColor")),t.get("innerPointColor")&&(e.infoPointsStyle.innerPointColor=t.get("innerPointColor")),t.get("color")&&(e.infoPointsStyle.color=t.get("color")),t.get("highlightColor")&&(e.infoPointsStyle.highlightColor=t.get("highlightColor")))}return e}updateInfoPointsManagerStyle(){if(this._infoPointsManager){const e=this.getInfoPointsManagerStyle();this._infoPointsManager.applyStyle(e)}}showInfoPoints(){this._infoPointsManager&&(this._infoPointsManager.showInfoPoints(),this.render(),this.setRenderingNeeded())}hideInfoPoints(){this._infoPointsManager&&(this._infoPointsManager.hideInfoPoints(),this.render(),this.setRenderingNeeded())}async reloadAllLoadingErrorTexturesAsync(){if(this._zkScene&&this._sceneHelper){const e=this._zkScene.get("rootUrl");e&&await this._sceneHelper.reloadAllLoadingErrorTexturesAsync(e)}}async reloadMaterialLoadingErrorTexturesAsync(e){if(this._zkScene&&this._sceneHelper){const t=this._zkScene.get("rootUrl");t&&await this._sceneHelper.reloadMaterialLoadingErrorTexturesAsync(t,e)}}async reloadLoadingErrorTextureAsync(e){if(this._zkScene&&this._sceneHelper){const t=this._zkScene.get("rootUrl");t&&await this._sceneHelper.reloadLoadingErrorTextureAsync(t,e)}}isTextureLoadingError(e){return!!this._sceneHelper&&this._sceneHelper.isTextureLoadingError(e)}materialHasLoadingErrorTextues(e){return!!this._sceneHelper&&this._sceneHelper.materialHasLoadingErrorTextues(e)}notifyCameraMovement(){if(this._isHologramSource&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){let e=this.getOrCreateBroadcastChannel();if(!e)return;e.postMessage({type:"camera-movement",target:{x:this._camera.target.x,y:this._camera.target.y,z:this._camera.target.z},alpha:this._camera.alpha,beta:this._camera.beta,radius:this._camera.radius})}}notifyScriptExecution(e){if(this._isHologramSource){const t=e.map(e=>({attributeID:e.attributeID,selectedValue:e.selectedValue,actions:e.actions.map(e=>e.toJSON())}));let n=this.getOrCreateBroadcastChannel();if(!n)return;n.postMessage({type:"script-execution",script:t})}}notifyDesignChanged(e){if(this._isHologramSource){let t=this.getOrCreateBroadcastChannel();if(!t)return;t.postMessage({type:"design-changed",design:e.toJSON()})}}notifyActionExecution(e,t,n){this.notifyScriptExecution([{attributeID:e,selectedValue:t,actions:n}])}attachBroadcastChannelEventHandlers(){if(this._isHologram&&!this._isHologramSource){var e=this.getOrCreateBroadcastChannel();if(!e)return;e.onmessage=e=>this.onBroadcastMessageReceived(e)}}detachBroadcastChannelEventHandlers(){this._broadcastChannel&&(this._broadcastChannel.onmessage=null)}onBroadcastMessageReceived(e){this._isHologram&&e&&e.data&&e.data.type&&("camera-movement"===e.data.type?this.processCameraMovementEvent(e):"script-execution"===e.data.type?this.processScriptExecution(e):"design-changed"===e.data.type&&this.processDesignChanged(e))}processCameraMovementEvent(e){this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&e&&e.data&&(this._camera.target=new BABYLON.Vector3(e.data.target.x,e.data.target.y,e.data.target.z),this._camera.alpha=e.data.alpha,this._camera.beta=e.data.beta,this._camera.radius=e.data.radius,this.setRenderingNeeded())}processScriptExecution(e){if(e&&e.data&&e.data.script&&"[object Array]"===Object.prototype.toString.call(e.data.script)){var t=e.data.script.map(e=>({attributeID:e.attributeID,selectedValue:e.selectedValue,actions:e.actions.map(e=>new MPlaza.AttributeSceneAction(e))}));this.executeScriptAsync(t)}}processDesignChanged(e){if(e&&e.data&&e.data.design){let t=new MPlaza.Design(e.data.design);this.renderDesignAsync(t)}}loadSceneConfig(e){const t=new Zakeke.SceneConfig(e);if(this._zkScene&&!this._zkScene.get("config"))this._zkScene.set("config",t);else{const e=new Zakeke.Scene;e.set("config",t),this._zkScene=e}this.checkSceneShaderMaterials(this._zkScene)}updateFromConfig(e,t){var n,r;if(this._zkScene){let i=null==(r=null==(n=this._zkScene)?void 0:n.get("config"))?void 0:r.toJSON();const s=Ri.merge(i,e),a=new Zakeke.SceneConfig(s);if(this._zkScene.set("config",a),!0===(null==t?void 0:t.preventRefresh))return;this.setupSceneAsync(!0===(null==t?void 0:t.updateCamera))}}refreshCameraPosition(){var e,t,n;const r=null==(t=null==(e=this._zkScene)?void 0:e.get("config"))?void 0:t.toJSON(),i=null==r?void 0:r.camera;i&&null!=i&&i.position&&(null==(n=this._sceneHelper)||n.setUpCameraByOptions(i.position))}setupDebugGUI(){var e;const t=null==(e=this._zkScene)?void 0:e.get("config"),n=e=>{this.updateFromConfig(e,{updateCamera:!1})};this._createGui=new Qs(t.toJSON(),e=>n(e),this._sceneHelper),this._createGui.setupGui(this._scene)}async setUpEmptyScene(e){this._scene&&(e&&this.loadSceneConfig(e),await this.setupSceneAsync(),this.setRenderingNeeded())}async loadFromSceneUrl(e,t,n){await this.loadSceneFromRemoteFilesAsync(e,t),n&&this.loadSceneConfig(n),await this.setupSceneAsync(),this.setRenderingNeeded()}async loadFromGlbUrl(e,t){var n,r,i;const s=void 0===(null==(n=null==t?void 0:t.camera)?void 0:n.animateIntro)||(null==(r=null==t?void 0:t.camera)?void 0:r.animateIntro);await(null==(i=this._sceneHelper)?void 0:i.importMeshesFromUrlAsync(e,null,void 0,s,".glb")),t&&this.loadSceneConfig(t),await this.setupSceneAsync(),this.updateView(!1,!0)}async loadFromFile(e,t){var n,r;void 0!==(null==(n=null==t?void 0:t.camera)?void 0:n.animateIntro)&&(null==(r=null==t?void 0:t.camera)||r.animateIntro);try{await BABYLON.SceneLoader.AppendAsync(e.name,e,this._scene)}catch(i){console.log("dropObjectIntoScene: ",i)}t&&this.loadSceneConfig(t),await this.setupSceneAsync(),this.updateView(!0,!0),this.setRenderingNeeded()}async showResizableCanvasModel(e){if(this._scene&&this._zkScene&&this._zkModel&&this._sceneHelper){const t=await this._sceneHelper.showResizableCanvas(e.width,e.height,e.depth,e.borderRadius,e.type,e.borderColor,e.columns,e.rows,e.ppcm);if(!t)return{meshes:[],matrixJson:""};const n=new Hi.PaperScope;n.setup(new n.Size(1,1));const r=new n.Matrix,i=ii.DEFAULT_SIZE;return r.translate(i/2,i/2),r.scale(i/e.width,i/e.height),{meshes:t,matrixJson:JSON.stringify(r.values)}}return{meshes:[],matrixJson:""}}async showResizableCanvasPerCurrentSide(e){console.log("showResizableCanvasPerCurrentSide",e);const t="resizable-canvas-".concat(e.width,"-").concat(e.height,"-").concat(e.colorId,"-").concat(e.currentSideId,"-").concat(e.columns,"-").concat(e.rows,"-").concat(e.type,"-").concat(e.borderColor);if(this._lastResizableMeshID===t)return;this._lastResizableMeshID=t;const n=await this.showResizableCanvasModel(e);if(0===n.meshes.length)return;const r=this._zkModel.get("scenes").at(0).get("meshSides");r.filter(e=>e.get("isResizable")).forEach(e=>r.remove(e));const i="mirrored"===e.type?["front","borders"]:["front"];let s=0;for(const a of n.meshes)if(a&&i.includes(a.name)){a.id=t.replace("sideIdPlaceholder",e.currentSideId.toString())+s++;const i=new MPlaza.ModelSceneMeshSide({sideID:e.currentSideId,meshID:a.id,uvChannel:0,percWidth:1,percHeight:1,subMeshID:0,matrix:n.matrixJson,isResizable:!0});r.push(i)}console.log({meshSides:r}),setTimeout(()=>this.adjustCamera(!1),100)}async showResizableCanvasPerVariant(e){if(console.log("showResizableCanvasPerVariant",e),!this.zkModel)return;const t="resizable-canvas-".concat(e.width,"-").concat(e.height,"-").concat(e.colorId,"-sideIdPlaceholder-").concat(e.columns,"-").concat(e.rows,"-").concat(e.type,"-").concat(e.borderColor);if(this._lastResizableMeshID===t)return;this._lastResizableMeshID=t;const n=await this.showResizableCanvasModel(e);if(0===n.meshes.length)return;let r=0;const i=e.sidesIds.length>1;let s=["front","back","borders"];"colored"===e.type?s=i?["front","back"]:["front"]:"mirrored"===e.type&&(s=i?["front","back","borders"]:["front","borders"]);const a=this._zkModel.get("scenes").at(0).get("meshSides");a.filter(e=>e.get("isResizable")).forEach(e=>a.remove(e));for(const o of n.meshes)if(o&&s.includes(o.name)){const s=i&&"front"!==o.name?e.sidesIds[1]:e.sidesIds[0];o.id=t.replace("sideIdPlaceholder",s.toString())+r++;const l=new MPlaza.ModelSceneMeshSide({sideID:s,meshID:o.id,uvChannel:0,percWidth:1,percHeight:1,subMeshID:0,matrix:n.matrixJson,isResizable:!0});a.push(l)}setTimeout(()=>this.adjustCamera(!1),100)}clearResizableProduct(){var e;null==(e=this._sceneHelper)||e.clearResizableMeshes()}switchMode(e){var t;"upload"===e&&(this._lastResizableMeshID=""),null==(t=this._sceneHelper)||t.switchMode(e),setTimeout(()=>this.adjustCamera(!1),100)}async setCanvasRotation(e,t){var n;if(e%=360,this._isRotating||!this._zkModel||!this._sceneHelper||!this._sceneDesignManager||this._currentRotation===e)return;const r=this._zkModel.get("scenes").at(0).get("meshSides");if(0===r.length)return;const i=r.at(0).get("meshID"),s=this.getMeshByID(i);if(!s)return;const a=s.getFacetNormal(0);this._isRotating=!0,await(null==(n=this._sceneHelper)?void 0:n.rotate(this._currentRotation-e,a,t)),this._currentRotation=e,this._isRotating=!1,this._sceneDesignManager.rotation=this._currentRotation,await this._sceneDesignManager.refreshAsync(),this.setRenderingNeeded()}getFitToScreenMargin(){return this._zkScene?this._zkScene.getFitToScreenMargin():1}setFitToScreenMargin(e){this._zkScene&&this._zkScene.setFitToScreenMargin(e)}}class na{constructor(e){this.materials=[],this.guid=Zakeke.generateUUID(),this.groupName=e}}var ra=(e=>(e[e.uploading=0]="uploading",e[e.progress=1]="progress",e[e.checking=2]="checking",e[e.success=3]="success",e[e.completed_success=4]="completed_success",e[e.completed_error=5]="completed_error",e))(ra||{});const ia=class e extends ta{constructor(e){super({configPreview:!0}),this._dracoEnabled=!0,this._dracoEncodingSpeed=5,this._dracoDecodingSpeed=5,this._envMode=c.Editor,this._selectOnPick=!0,this._showBoundingBox=!1,this._editorBackgroundColor="#444444",this._showGround=!0,this._ground=null,this._showLights=!1,this._lightsLayer=null,this._showAxes=!1,this._axesLayer=null,this._showFineTuning=!1,this._fineTuningModelLoaded=!1,this._showHighlight=!0,this._highlightOver=!0,this._highlightOverColor="#0082ff",this._editingMode=h.None,this._manipulatedNode=null,this._oldManipulatedNode=null,this._EditControl=org.ssatguru.babylonjs.component.EditControl,this._editControl=null,this._editControlVisible=!1,this._shiftPressed=!1,this._ctrlPressed=!1,this._realMeshVisibility={},this._sceneSourceTasks=[],this._isLoadingSourceFiles=!1,this._authorizationToken="",this._incrementalWorkersScriptsUrls=[],this._preUpdateListeners=[],this._postUpdateListeners=[],this._meshSelectedListeners=[],this._selectionChangedListeners=[],this._lightSelectedListeners=[],this._sceneCreatedListeners=[],this._cameraLocationCreatedListeners=[],this._sceneSourceTaskSuccessListeners=[],this._sceneSourceTaskErrorListeners=[],this._sceneSourceTasksCheckListeners=[],this._meshesUpdateListeners=[],this._materialsUpdateListeners=[],this._lightsUpdateListeners=[],this._cameraLocationsUpdateListeners=[],this._meshLocationCreatedListeners=[],this._meshLocationsUpdateListeners=[],this._arTaskSuccessListeners=[],this._arTaskErrorListeners=[],this._arTasksCheckListeners=[],this._tryOnFineTuningSettingListeners=[],this._tryOnFineTuningCloseListeners=[],this._pickedProvider=Di.NotSelected,this._providerData={mesh:new Blob},this._sessionTryOnEnabled=!1,this._tryOnInfoLoading=!0,this._initialMeshMaterials={},this._initialSubMeshMaterials={},this._lastMeshMaterials={},this._lastSubMeshMaterials={},this._meshOver=null,this._incrementalFilesMaker=null,this._sceneToBlobs=null,this._showMeasurements=!1,this._modelMeasurements=BABYLON.Vector3.Zero(),e&&(this._incrementalWorkersScriptsUrls=e.incrementalWorkersScriptsUrls,this._authorizationToken=e.authorizationToken,null!=e.showGround&&null!=e.showGround&&(this._showGround=e.showGround),void 0!==e.editorBackgroundColor&&null!==e.editorBackgroundColor&&(this._editorBackgroundColor=e.editorBackgroundColor),void 0!==e.showHighlight&&null!==e.showHighlight&&(this._showHighlight=e.showHighlight),void 0!==e.highlightColor&&null!==e.highlightColor&&(this._highlightColor=e.highlightColor),void 0!==e.highlightOver&&null!=e.highlightOver&&(this._highlightOver=e.highlightOver),void 0!==e.highlightOverColor&&null!=e.highlightOverColor&&(this._highlightOverColor=e.highlightOverColor))}get realMeshVisibility(){return this._realMeshVisibility}get environmentManager(){return this._environmentManager}get envMode(){return this._envMode}get sceneSourceTasks(){return this._sceneSourceTasks}set envMode(e){this._envMode!=e&&(this._envMode=e,this.refreshEnvironment())}get selectOnPick(){return this._selectOnPick}set seletOnPick(e){this._selectOnPick!=e&&(this._selectOnPick=e)}get showBoundingBox(){return this._showBoundingBox}set showBoundingBox(e){this._showBoundingBox!=e&&(this._showBoundingBox=e,this.updateBoundingBox(),this.setRenderingNeeded())}get editorBackgroundColor(){return this._editorBackgroundColor}set editorBackgroundColor(e){this._editorBackgroundColor!=e&&this.setEditorBackgroundColor(e)}get showGround(){return this._showGround}set showGround(e){this._showGround!=e&&(this._showGround=e,this.refreshGround())}get showLights(){return this._showLights}set showLights(e){this._showLights!=e&&(this._showLights=e,this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded())}get showAxes(){return this._showAxes}set showAxes(e){this._showAxes!=e&&(this._showAxes=e,this._axesLayer&&this._axesLayer.refresh(),this.setRenderingNeeded())}get showFineTuning(){return this._showFineTuning}set showFineTuning(e){this._showFineTuning=e,this._fineTuningModelLoaded=!1}set fineTuningModelLoaded(e){this._fineTuningModelLoaded=e}get fineTuningModelLoaded(){return this._fineTuningModelLoaded}get sessionTryOnEnabled(){return this._sessionTryOnEnabled}set sessionTryOnEnabled(e){this._sessionTryOnEnabled=e}get tryOnInfoLoading(){return this._tryOnInfoLoading}set tryOnInfoLoading(e){this._tryOnInfoLoading=e}get showHighlight(){return this._showHighlight}set showHighlight(e){this._showHighlight!=e&&(this._showHighlight=e)}get highlightOver(){return this._highlightOver}set highlightOver(e){this._highlightOver!=e&&(this._highlightOver=e)}get highlightOverColor(){return this._highlightOverColor}set highlightOverColor(e){this._highlightOverColor!=e&&(this._highlightOverColor=e)}get editingMode(){return this._editingMode}set editingMode(e){this._editingMode!=e&&this.setEditingMode(e)}get editControlVisible(){return this._editControlVisible}set editControlVisible(e){this._editControlVisible!=e&&this.showHideEditControl(e)}get selectedProvider(){return this._pickedProvider}get selectedProviderFineTuningData(){return this._providerData}get modelMeasurements(){return this._modelMeasurements}set modelMeasurements(e){this._modelMeasurements=e}get showMeasurements(){return this._showMeasurements}fireHideMeasurementsEvent(){this._showMeasurements=!1}fireShowMeasurementsEvent(){this._showMeasurements=!0}static async createSceneEditorAsync(t){const n=new e(t);return await n.initAsync(),n.checkSceneSourceTasks(),n}createCanvas(){const e=super.createCanvas();return e.addEventListener("keydown",e=>{this._shiftPressed="Shift"==e.key,this._ctrlPressed="Control"==e.key},!1),e.addEventListener("keyup",e=>{this._shiftPressed="Shift"!=e.key,this._ctrlPressed="Control"!=e.key},!1),e.addEventListener("dblclick",e=>{this.setRenderingNeeded()}),e}deleteComponents(){super.deleteComponents(),this._editControl&&(this._editControl.detach(),this._editControl=null),this._lightsLayer&&(this._lightsLayer.dispose(),this._lightsLayer=null),this._axesLayer&&(this._axesLayer.dispose(),this._axesLayer=null)}dispose(){super.dispose(),this._incrementalFilesMaker&&(this._incrementalFilesMaker.dispose(),delete this._incrementalFilesMaker),this._sceneToBlobs&&(this._sceneToBlobs.dispose(),delete this._sceneToBlobs)}createEngine(){super.createEngine(),BABYLON.SceneLoader.ForceFullSceneLoadingForIncremental=!0}async createEmptySceneAsync(){await super.createEmptySceneAsync(),this._engine&&this.fireSceneCreatedEvent()}async setupSceneAsync(){await super.setupSceneAsync(),this._engine&&this._scene&&(this._scene.setRenderingAutoClearDepthStencil(1,!0,!0,!1),this._scene.setRenderingAutoClearDepthStencil(2,!0,!0,!1),this._lightsLayer=new Ti(this),this._lightsLayer.addLightSelectedListener(e=>{this.lightsLayer_onLightSelected(e)}),this.setupAxes(),this._zkModel&&this._meshLocationsManager&&(this._meshLocationsManager.addBeforeSaveMeshLocationListener(()=>this.onBeforeSaveMeshLocation()),this._meshLocationsManager.addAfterSaveMeshLocationListener(()=>this.onAfterSaveMeshLocation())),this._scene.onPointerMove=(e,t)=>this.onPointerMove(e,t))}render(){this.firePreUpdateEvent(),super.render(),this._lightsLayer&&this._lightsLayer.render(),this._axesLayer&&this._axesLayer.render(),this.firePostUpdateEvent()}deleteHighlightLayer(){this._highlightLayer&&(this._highlightLayer.dispose(),this._highlightLayer=null),this.setRenderingNeeded()}setupAntialiasPostProcesses(){this.antialias&&this.getAntialiasEnabled()&&(this.createAntialiasPostProcesses(),this.disableAntialiasing())}canEnableAntialiasing(){return this._scene&&this._antialias&&this.getAntialiasEnabled()&&this.envMode===c.Viewer}setupHighlightLayerIntensity(){this._highlightLayer&&(this._highlightLayer.blurHorizontalSize=this._highlightBlurHorizontalSize,this._highlightLayer.blurVerticalSize=this._highlightBlurVerticalSize)}setupAxes(){this._axesLayer=new Mi(this)}getMatchSameNameTextures(){if(this._zkScene){let e=this._zkScene.getMatchSameNameTextures();return null!==e&&void 0!==e&&e}return!1}setMatchSameNameTextures(e){this._zkScene&&this._zkScene.setMatchSameNameTextures(e)}getAREnabled(){let e=!1;if(this._zkScene){let t=this._zkScene.getAREnabled();return null!==t&&void 0!==t?t:e}return e}setAREnabled(e){this._zkScene&&this._zkScene.setAREnabled(e)}getAROnTheFly(){let e=!1;if(this._zkScene){let t=this._zkScene.getAROnTheFly();return null!==t&&void 0!==t?t:e}return e}setAROnTheFly(e){this._zkScene&&this._zkScene.setAROnTheFly(e)}setARAnchor(e){this._zkScene&&this._zkScene.setARAnchor(e)}getTryOnEnabled(){let e=!1;if(this._zkScene){let t=this._zkScene.getTryOnEnabled();return null!==t&&void 0!==t?t:e}return e}setTryOnEnabled(e){this._zkScene&&this._zkScene.setTryOnEnabled(e)}setTryOnSelectedType(e){if(this._zkScene){const t=this.getTryOnDefaultTypeSettings(),n=this._zkScene.getTryOnSettings()||t;n.type=e,this.setTryOnTypeSettings(n)}}setFrameDAMSettings(e){this._zkScene&&this._zkScene.setFrameDAMSettings("string"==typeof e?e:JSON.stringify(e))}getForceDracoCompression(){let e=!1;if(this._zkScene){let t=this._zkScene.getForceDracoCompression();return null!==t&&void 0!==t?t:e}return e}setForceDracoCompression(e){this._zkScene&&this._zkScene.setForceDracoCompression(e)}getWebPEnabled(){return!!this._zkScene&&this._zkScene.getWebPEnabled()}setWebPEnabled(e){this._zkScene&&this._zkScene.setWebPEnabled(e)}getWebPType(){return this._zkScene?this._zkScene.getWebPType():"Lossless"}setWebPType(e){this._zkScene&&this._zkScene.setWebPType(e)}getWebPQuality(){return this._zkScene?this._zkScene.getWebPQuality():80}setWebPQuality(e){this._zkScene&&this._zkScene.setWebPQuality(e)}setProvider(e){this._pickedProvider=e}setProviderFineTuningData(e){this._providerData={mesh:e.mesh?e.mesh:this._providerData.mesh,settings:e.settings?e.settings:this._providerData.settings}}resetProviderFineTuningData(){var e;null==(e=this._scene)||e.meshes.forEach(e=>{e.metadata&&e.metadata.tryOnFineTuningSettings&&(e.metadata.tryOnFineTuningSettings=null)}),this._providerData={}}setMeshFineTuningData(e,t){const n="string"==typeof e?this.getMeshByID(e):e;n&&(n.metadata||(n.metadata={}),n.metadata.tryOnFineTuningSettings=t)}setDAMFineTuningData(e){const t={finetuning:e};this.setFrameDAMSettings(t)}getTryOnSelectedType(){if(this._zkScene){let e=this._zkScene.getTryOnSettings();if(e&&e.type)return e.type}return null}getTryOnSettings(){const e=this.getTryOnDefaultTypeSettings();if(this._zkScene){let e=this._zkScene.getTryOnSettings();if(e)return e}return e}getTryOnSetting(e){if(this._zkScene){let t=this._zkScene.getTryOnSettings();if(t&&e in t.typeSettings&&t.typeSettings[e]&&"boolean"==typeof t.typeSettings[e])return t.typeSettings[e]}return!1}setTryOnSetting(e,t){let n=this.getTryOnDefaultTypeSettings();if(this._zkScene){let r=this._zkScene.getTryOnSettings();if(!r){switch(e){case Ei.GlassPupillaryDistanceTool:case Ei.VirtualTryOn:case Ei.MandatoryPupillaryDistance:n.typeSettings[e]=t;break;case Ei.StyleButton:n.styleButton=t}return void this.setTryOnTypeSettings(n)}switch(e){case Ei.GlassPupillaryDistanceTool:r.typeSettings.pd=t;break;case Ei.VirtualTryOn:r.typeSettings.try_on=t;break;case Ei.MandatoryPupillaryDistance:r.typeSettings.mandatoryPD=t;break;case Ei.StyleButton:r.styleButton=t}r.typeSettings.pd&&r.typeSettings.try_on||(r.styleButton="single"),this._zkScene.setTryOnSettings(r)}}setTryOnTypeSettings(e){this._zkScene&&this._zkScene.setTryOnSettings(e)}getTryOnDefaultTypeSettings(){var e;return{type:Ci.NotSelected,styleButton:"single",buttonCustomizations:[{image:"base",textLabel:"Virtual Try-on",textColor:null,backgroundColor:null,borderColor:null,borderWidth:0,borderRadius:0}],typeSettings:{try_on:!0,pd:!1,active:null!==(e=this.getTryOnEnabled())&&void 0!==e&&e}}}setTryOnDefaultTypeSettings(){let e=this.getTryOnDefaultTypeSettings();this.setTryOnTypeSettings(e)}getUseDelayedMaterialLoading(){let e=!1;if(this.zkScene){let t=this.zkScene.getUseDelayedMaterialLoading();return null!==t&&void 0!==t?t:e}return e}setUseDelayedMaterialLoading(e){this._zkScene&&this._zkScene.setUseDelayedMaterialLoading(e)}getUseDelayedTextureLoading(){if(this._zkScene){let e=this._zkScene.getUseDelayedTextureLoading();return null!==e&&void 0!==e&&e}return!1}setUseDelayedTextureLoading(e){this._zkScene&&this._zkScene.setUseDelayedTextureLoading(e)}getGlowEnabled(){return!!this._glowManager&&this._glowManager.enabled}setGlowEnabled(e){this._glowManager&&(this._glowManager.enabled=e,this.setRenderingNeeded())}getGlowIntensity(){return this._glowManager?this._glowManager.intensity:1}setGlowIntensity(e){this._glowManager&&(this._glowManager.intensity=e,this.setRenderingNeeded())}getGlowBlurSize(){return this._glowManager?this._glowManager.blurSize:16}setGlowBlurSize(e){this._glowManager&&(this._glowManager.blurSize=e,this.setRenderingNeeded())}getInfoPointsEnabled(){let e=!1;if(this._zkScene){let t=this._zkScene.getInfoPointsEnabled();return null!==t&&void 0!==t?t:e}return e}setInfoPointsEnabled(e){this._zkScene&&this._zkScene.setInfoPointsEnabled(e),this.refreshInfoPoints()}getInfoPointsBorderColor(){if(this._zkScene){const e=this._zkScene.getInfoPointsBorderColor();return null!==e&&void 0!==e?e:""}return""}setInfoPointsBorderColor(e){this._zkScene&&(this._zkScene.setInfoPointsBorderColor(e),this.refreshInfoPoints())}getInfoPointsInnerPointColor(){if(this._zkScene){const e=this._zkScene.getInfoPointsInnerPointColor();return null!==e&&void 0!==e?e:""}return""}setInfoPointsInnerPointColor(e){this._zkScene&&(this._zkScene.setInfoPointsInnerPointColor(e),this.refreshInfoPoints())}getInfoPointsColor(){if(this._zkScene){const e=this._zkScene.getInfoPointsColor();return null!==e&&void 0!==e?e:""}return""}setInfoPointsColor(e){this._zkScene&&(this._zkScene.setInfoPointsColor(e),this.refreshInfoPoints())}getInfoPointsHighlightColor(){if(this._zkScene){const e=this._zkScene.getInfoPointsHighlightColor();return null!==e&&void 0!==e?e:""}return""}setInfoPointsHighlightColor(e){this._zkScene&&(this._zkScene.setInfoPointsHighlightColor(e),this.refreshInfoPoints())}enableGlowForMesh(e){this._glowManager&&this._glowManager.enableGlowForMesh(e)}disableGlowForMesh(e){this._glowManager&&(this._glowManager.disableGlowForMesh(e),this.setRenderingNeeded())}enableARForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.AR=!0)}disableARForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.AR=!1)}disableTryOnForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.TryOn=!1,e.getChildMeshes().forEach(e=>this.disableTryOnForMesh(e)))}enableTryOnForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.TryOn=!0,e.getChildMeshes().forEach(e=>this.enableTryOnForMesh(e)))}enableInfoPointsForMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.showInfoPoints=!0,this.refreshInfoPoints())}disableInfoPointsForMesh(e){e&&e.metadata&&void 0!==e.metadata.showInfoPoints&&null!==e.metadata.showInfoPoints&&(delete e.metadata.showInfoPoints,this.refreshInfoPoints())}enableForcedInfoPointsVisibilityOnMesh(e){e&&(e.metadata||(e.metadata={}),e.metadata.forceShowInfoPoints=!0,this.refreshInfoPoints())}disableForcedInfoPointsVisibilityOnMesh(e){e&&e.metadata&&void 0!==e.metadata.forceShowInfoPoints&&null!==e.metadata.forceShowInfoPoints&&(delete e.metadata.forceShowInfoPoints,this.refreshInfoPoints())}setEditorBackgroundColor(e){this._editorBackgroundColor=e,this.refreshEnvironment()}setViewerBackgroundAlpha(e){this._zkScene&&(this._zkScene.getOrCreateGeneralConfig().set("backgroundAlpha",e),this.refreshEnvironment())}setViewerBackgroundColor(e){this._zkScene&&(this._zkScene.getOrCreateGeneralConfig().set("backgroundColor",e),this.refreshEnvironment())}setViewerEnvironmentSizeAuto(e){this._zkScene&&(this._zkScene.getOrCreateEnvironmentConfig().set("sizeAuto",e),this.refreshEnvironment())}setViewerEnvironmentMainColor(e){this._zkScene&&(this._zkScene.getOrCreateEnvironmentConfig().set("mainColor",e),this.refreshEnvironment())}setViewerSkyboxCreateSkybox(e){this._zkScene&&(this._zkScene.getOrCreateSkyboxConfig().set("createSkybox",e),this.refreshEnvironment())}setViewerSkyboxSize(e){this._zkScene&&(this._zkScene.getOrCreateSkyboxConfig().set("size",e),this.refreshEnvironment())}setViewerSkyboxBlur(e){if(this._zkScene){let t=e>=0?e:0;this._zkScene.getOrCreateSkyboxConfig().set("blur",t),this.refreshEnvironment()}}setViewerSkyboxTexture(e,t,n){if(this._zkScene&&null!=e&&"string"==typeof e){const r=this._zkScene.getOrCreateSkyboxConfig();r.set("texture",e),r.set("extensions",t),r.set("files",n),this.refreshEnvironment()}}removeViewerSkyboxTexture(){if(this._zkScene){const e=this._zkScene.getSkyboxConfig();e&&null!=e.get("texture")&&(e.unset("texture"),this.refreshEnvironment())}}setViewerSkyboxColor(e){this._zkScene&&null!=e&&"string"==typeof e&&(this._zkScene.getOrCreateSkyboxConfig().set("color",e),this.refreshEnvironment())}setViewerGroundCreateGround(e){this._zkScene&&null!=e&&"boolean"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("createGround",e),this.refreshEnvironment())}setViewerGroundSize(e){this._zkScene&&(this._zkScene.getOrCreateGroundConfig().set("size",e),this.refreshEnvironment())}setViewerGroundTexture(e){this._zkScene&&null!=e&&"string"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("texture",e),this.refreshEnvironment())}removeViewerGroundTexture(){if(this._zkScene){const e=this._zkScene.getGroundConfig();e&&null!=e.get("texture")&&(e.unset("texture"),this.refreshEnvironment())}}setViewerGroundColor(e){this._zkScene&&null!=e&&"string"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("color",e),this.refreshEnvironment())}setViewerGroundOpacity(e){this._zkScene&&null!=e&&"number"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("opacity",e),this.refreshEnvironment())}setViewerGroundEnableShadow(e){this._zkScene&&null!=e&&"boolean"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("enableShadow",e),this.refreshEnvironment())}setViewerGroundShadowLevel(e){this._zkScene&&null!=e&&"number"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("shadowLevel",e),this.refreshEnvironment())}setViewerGroundEnableMirror(e){this._zkScene&&null!=e&&"boolean"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("enableMirror",e),this.refreshEnvironment())}setViewerGroundMirrorBlur(e){this._zkScene&&null!=e&&"number"==typeof e&&(this._zkScene.getOrCreateGroundConfig().set("mirrorBlurKernel",e),this.refreshEnvironment())}setViewerCameraAutoRotate(e){this._zkScene&&null!=e&&"boolean"==typeof e&&(this._zkScene.getOrCreateCameraConfig().set("autoRotate",e),this.autoRender=e,this.refreshEnvironment())}setViewerCameraContrast(e){this._zkScene&&null!=e&&"number"==typeof e&&(this._zkScene.getOrCreateCameraConfig().set("contrast",e),this.refreshEnvironment())}setViewerCameraExposure(e){this._zkScene&&null!=e&&"number"==typeof e&&(this._zkScene.getOrCreateCameraConfig().set("exposure",e),this.refreshEnvironment())}setViewerCameraUpperAlphaLimit(e){var t;if(this._zkScene&&null!=e&&"number"==typeof e){const n=this._zkScene.getOrCreateCameraConfig().get("lowerAlphaLimit");this._zkScene.setCameraUpperAlphaLimit(Math.max(e,null!==n&&void 0!==n?n:e)),null==(t=this._sceneHelper)||t.setCameraUpperAlphaLimit(Math.max(e,null!==n&&void 0!==n?n:e)),this.setRenderingNeeded()}}setViewerCameraLowerAlphaLimit(e){var t;if(this._zkScene&&null!=e&&"number"==typeof e){const n=this._zkScene.getOrCreateCameraConfig().get("upperAlphaLimit");this._zkScene.setCameraLowerAlphaLimit(Math.min(e,null!==n&&void 0!==n?n:e)),null==(t=this._sceneHelper)||t.setCameraLowerAlphaLimit(Math.min(e,null!==n&&void 0!==n?n:e)),this.setRenderingNeeded()}}setViewerCameraLowerBetaLimit(e){var t;if(this._zkScene&&null!=e&&"number"==typeof e){const n=this._zkScene.getOrCreateCameraConfig().get("upperBetaLimit");this._zkScene.setCameraLowerBetaLimit(Math.min(e,null!==n&&void 0!==n?n:e)),null==(t=this._sceneHelper)||t.setCameraLowerBetaLimit(Math.min(e,null!==n&&void 0!==n?n:e)),this.setRenderingNeeded()}}setViewerCameraUpperBetaLimit(e){var t;if(this._zkScene&&null!=e&&"number"==typeof e){const n=this._zkScene.getOrCreateCameraConfig().get("lowerBetaLimit");this._zkScene.setCameraUpperBetaLimit(Math.max(e,null!==n&&void 0!==n?n:e)),null==(t=this._sceneHelper)||t.setCameraUpperBetaLimit(Math.max(e,null!==n&&void 0!==n?n:e)),this.setRenderingNeeded()}}setViewerCameraToneMappingEnabled(e){this._zkScene&&null!=e&&"boolean"==typeof e&&(this._zkScene.getOrCreateCameraConfig().set("toneMappingEnabled",e),this.refreshEnvironment())}serializeFromVector(e){return e?{x:e.x,y:e.y,z:e.z}:null}setModelTransformsFromDAMMesh(){var e;const t=this.getDAMMainMesh();if(t){const n=t.position,r=t.rotation,i=t.scaling,s=null==(e=this._zkScene)?void 0:e.getOrCreateModelConfig();s.set("position",this.serializeFromVector(n)),s.set("rotation",this.serializeFromVector(r)),s.set("scale",this.serializeFromVector(i))}}resetEditorEnvironment(){this.resetEditorBackground(),this.resetEditorCamera(),this.setRenderingNeeded()}resetEditorBackground(){this._scene&&(this._scene.clearColor=BABYLON.Color3.FromHexString(this._editorBackgroundColor).toColor4(),this.refreshGround(),this.setRenderingNeeded())}resetEditorCamera(){if(this._scene){const e=this._scene.activeCamera;e instanceof BABYLON.ArcRotateCamera&&(e.useAutoRotationBehavior=!1),this._autoRender=!1,this.setRenderingNeeded()}}preSceneContentScreenshot(){this.resetEditorEnvironment(),this.removeGround()}postSceneContentScreenshot(){}preSceneMaterialScreenshot(){super.preSceneMaterialScreenshot(),this.adjustSceneForSerialization()}postSceneMaterialScreenshot(){super.postSceneMaterialScreenshot()}sceneReadyForSave(){if(this._scene)for(let e=0;e<this._scene.meshes.length;e++)if(!this._scene.meshes[e].isReady())return!1;return!0}isCurrentCameraPivot(e){if(this._sceneHelper){const t=this._sceneHelper.getCameraPivot();return t&&t.id===e}return!1}getCurrentCameraPivotID(){if(this._scene&&this._sceneHelper){const e=this._sceneHelper.getCameraPivot();if(e){const t=this._scene.getMeshByID(e.id);if(t)return t.id}}return null}setCameraPivot(e){if(this._scene&&this._sceneHelper){for(let e=0;e<this._scene.meshes.length;e++){var t=this._scene.meshes[e];t.metadata&&null!=t.metadata.isCameraPivot&&delete t.metadata.isCameraPivot}if(e){const t=this._scene.getMeshByID(e);t&&(t.metadata=t.metadata||{},t.metadata.isCameraPivot=!0),this._sceneHelper.setCameraPivot(t||null)}else this._sceneHelper.setCameraPivot(null)}}async getBlobFromEmbeddedTextureAsync(e){let t=null;if(e.url){const s=e.url;var n="data:"===s.substring(0,5),r="blob:"===s.substring(0,5),i=n&&-1!==s.indexOf(";base64,");if(n&&e._buffer&&(e._buffer instanceof ArrayBuffer||e._buffer instanceof Uint8Array||e._buffer instanceof Blob))e._buffer instanceof Blob?t=e._buffer:e._buffer instanceof Uint8Array?t=new Blob([e._buffer],{type:e.mimeType}):e._buffer instanceof ArrayBuffer&&(t=new Blob([new Uint8Array(e._buffer)],{type:e.mimeType}));else if(r)await new Promise(e=>{var t=new XMLHttpRequest;t.open("GET",s,!0),t.responseType="blob",t.onload=function(t){200==this.status&&e(this.response)},t.send()});else if(i){const n=new Uint8Array(BABYLON.Tools.DecodeBase64(s));t=new Blob([n],{type:e.mimeType})}}return t}async uploadEmbeddedTexturesAsync(e){const t=[];if(this._zkScene&&this._scene&&this._sceneHelper){this._scene,this._zkScene;const e=this._sceneHelper;this.getAllMaterials().forEach(n=>{n.getActiveTextures().filter(e=>e instanceof BABYLON.Texture).forEach(r=>{if(r.url){var i="data:"===r.url.substring(0,5),s="blob:"===r.url.substring(0,5),a=i&&-1!==r.url.indexOf(";base64,");if(i||s||a){const i=e.getMaterialTextureType(n,r);i&&t.push({texture:r,material:n,type:i})}}})})}for(let n=0;n<t.length;n++){const r=t[n],i=r.texture,s=await this.getBlobFromEmbeddedTextureAsync(i);if(s){let a=".png";"image/jpeg"===i.mimeType&&(a=".jpg");const o="".concat(r.type.replace(" ","_")).concat(a);let l=new File([s],o);const u=await this.uploadTextureFileAsync(l,r.material);if(u){const e=u.get("url");e&&await new Promise((t,n)=>{i.updateURL(e,void 0,()=>t(),void 0,()=>n())})}e&&e(n/t.length*100,"textures")}}}useIncrementalLoading(){return!!(this._sceneHelper&&this._sceneHelper.getTotalVertices()+this._sceneHelper.getTotalIndices()>=1e3)}updateSceneModel(e,t,n,r){if(this._zkScene&&this._scene){this._scene;const i=this._zkScene;this.resetRealVisibility();const s=this.infoPointsShown;s&&this.hideInfoPoints(),this.uploadEmbeddedTexturesAsync((e,t)=>{n&&n(e,t)}).then(()=>{this.getSceneScreenshotAsync(500,450).then(a=>{s&&this.showInfoPoints(),i.set("imageData",a),i.set("version",i.get("version")+1),this.useIncrementalLoading()?this.uploadSceneIncrementalFiles(t=>{this.onUploadScenFileSuccess(t),e&&e()},e=>{t&&t(e)},e=>{n&&n(e)},r):this.uploadSceneFile(t=>{this.onUploadScenFileSuccess(t),e&&e()},e=>{t&&t(e)},(e,t)=>{n&&n(e,t)})})}).catch(e=>{t&&t(e)})}}onUploadScenFileSuccess(e){this._zkScene&&e&&(e.hasOwnProperty("fileObjectID")||e.hasOwnProperty("fileLength"))&&e.hasOwnProperty("rootUrl")&&e.hasOwnProperty("sceneFileName")&&(e.hasOwnProperty("manifestFileObjectID")||e.hasOwnProperty("manifestFileLength"))&&(e.hasOwnProperty("incrementalsFileObjectID")||e.hasOwnProperty("incrementalsFileLength"))?(this._zkScene.set("fileObjectID",e.fileObjectID),this._zkScene.set("fileLength",e.fileLength),this._zkScene.set("url",e.url),this._zkScene.set("rootUrl",e.rootUrl),this._zkScene.set("sceneFileName",e.sceneFileName),this._zkScene.set("manifestFileObjectID",e.manifestFileObjectID),this._zkScene.set("manifestFileLength",e.manifestFileLength),this._zkScene.set("manifestFileUrl",e.manifestFileUrl),this._zkScene.set("incrementalsFileObjectID",e.incrementalsFileObjectID),this._zkScene.set("incrementalsFileLength",e.incrementalsFileLength),this._zkScene.set("incrementalsFileUrl",e.incrementalsFileUrl)):Logger.info("le informazioni sul file di scena salvato sono vuote o incorrette")}uploadSceneFile(e,t,n){if(!this._scene||!this._zkScene)return void(t&&t("No scene to upload"));this._scene;const r=this._zkScene,i=r.get("version"),s=this.getSceneJson();this.getSceneFileBlobsAsync(s,i,e=>{n&&n(e,"optimize")}).then(n=>{const i=new FormData;for(let e=0;e<n.length;e++){const t=n[e];i.append("file_"+e,t.blob,t.name)}fetch(r.getSceneIncrementalFileUploadUrl(),{method:"POST",body:i,headers:{Authorization:"Bearer "+this._authorizationToken}}).then(e=>{if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()}).then(t=>{e&&e(t)}).catch(e=>{t&&t(e.message)})})}async getSceneFileBlobsAsync(e,t,n){let r=[];return this._sceneToBlobs||(this._sceneToBlobs=new xi(this._incrementalWorkersScriptsUrls)),this._sceneToBlobs&&(await this._sceneToBlobs.whenReadyAsync(),r=await this._sceneToBlobs.getSceneBlobsAsync(e,t,n)),r}getSceneJson(){var e;let t="";if(this._scene&&this._sceneHelper){const n=this._envMode;this.setEnvironmentMode(c.Editor),this.disableAntialiasing(!0);const r=this.resetCameraRotationLimits();this.deleteHighlightLayer();const i=this._manipulatedNode;this.setManipulatedNode(null),this.getUseMaterialOffloading()&&!this.getUseDelayedMaterialLoading()&&this._sceneHelper.offloadAllUnusedMaterials(),this._sceneHelper.setDummyMaterialToInvisibleMeshes(),this.adjustSceneForSerialization();const s=BABYLON.SceneSerializer.Serialize(this._scene);if(s.postProcesses=[],t=JSON.stringify(s),this.getUseMaterialOffloading()&&!this.getUseDelayedMaterialLoading()){const t=null==(e=this._zkScene)?void 0:e.get("rootUrl");t&&this._sceneHelper.loadAllOffloadedMaterials(t)}this._sceneHelper.unsetAllDummyMaterials(),n!=c.Editor&&this.setEnvironmentMode(n),this.enableAntialiasing(),this.createHighlightLayer(),this.setManipulatedNode(i),this.setCameraRotationLimits(r)}return t}resetCameraRotationLimits(){const e={lowerAlphaLimit:null,upperAlphaLimit:null,lowerBetaLimit:null,upperBetaLimit:null};return this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(e.lowerAlphaLimit=this._camera.lowerAlphaLimit,e.upperAlphaLimit=this._camera.upperAlphaLimit,e.lowerBetaLimit=this._camera.lowerBetaLimit,e.upperBetaLimit=this._camera.upperBetaLimit,this._camera.lowerAlphaLimit=null,this._camera.upperAlphaLimit=null,this._camera.lowerBetaLimit=.01,this._camera.upperBetaLimit=Math.PI-.01),e}setCameraRotationLimits(e){e=e||{lowerAlphaLimit:null,upperAlphaLimit:null,lowerBetaLimit:.01,upperBetaLimit:Math.PI-.01},this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this._camera.lowerAlphaLimit=e.lowerAlphaLimit,this._camera.upperAlphaLimit=e.upperAlphaLimit,this._camera.lowerBetaLimit=e.lowerBetaLimit||.01,this._camera.upperBetaLimit=e.upperBetaLimit||Math.PI-.01)}adjustSceneForSerialization(){if(this._scene&&this._sceneHelper&&this._zkScene){const e=this._sceneHelper;this.removeDisabledFresnelParameters();let t=!1;null!=this._zkScene.getUseDelayedTextureLoading()&&(t=this._zkScene.getUseDelayedTextureLoading()),this._scene.useDelayedTextureLoading=t;const n=this.getMatchSameNameTextures(),r=this._zkScene.getSourcesIDs();this._zkScene.getLibraryMaterialIDs();const i={},s={},a=[],o=[],l=[],u=e.getTextureUrl(this._scene.environmentTexture),c=null!==u&&u.endsWith(Sn.Environment.EnvironmentTextureName);if(this._zkScene.set("useDefaultEnvironmentTexture",c),this._scene.environmentTexture&&(this._scene.environmentTexture instanceof BABYLON.CubeTexture||this._scene.environmentTexture instanceof BABYLON.HDRCubeTexture)){const e=this._scene.environmentTexture.rotationY;this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.environmentTextureRotationY=e}this._scene.textures.forEach(t=>{if(!e.isTextureWithUrl(t))return;let u=t.url;if(t.getInternalTexture){const e=t.getInternalTexture();e&&e.url&&(u=e.url)}if(u){let e=u;if(e===Sn.Environment.EnvironmentTextureCDNUrl)return t.url="textures/"+Zakeke.getEmptyUUID().replace(/-/g,"")+"/"+Sn.Environment.EnvironmentTextureName,void(t.name=t.url);if(e==Sn.Environment.SkyboxTextureCDNUrl||e==Sn.Environment.GroundTextureCDNUrl)return;let c=!1;e.startsWith("blob:")&&t.metadata&&t.metadata.fileUrl&&(e=t.metadata.fileUrl);for(let n=0;n<r.length;n++){let i=r[n].replace(/-/g,""),s=e.indexOf(i);if(-1!=s){c=!0,t.name=e.substring(s),t.url=t.name,Logger.info("texture url: "+t.url);break}}let h=!1;if(t.materialMapping){h=!0;let r=t.materialMapping.libraryMaterialID.replace(/-/g,""),s=t.materialMapping.sceneMaterialID.replace(/-/g,""),o=e,l=t.name,u=e.indexOf(r);if(-1!=u){let c=e.replace(new RegExp(r,"g"),s);o=c,l=c;let h={};if(i.hasOwnProperty(r)?h=i[r]:i[r]=h,u=c.lastIndexOf("/"),-1!==u){let e=c.substring(u+1);h.hasOwnProperty(e)?(o=h[e],l=o,Mr(a,o)||a.push(o)):(u=c.lastIndexOf("/",u-1),-1!==u&&(u=c.lastIndexOf("/",u-1),-1!=u&&(o=c.substring(u+1),l=o,Mr(a,o)||a.push(o),n&&(h[e]=o))))}t.name=l,t.url=o}}if(!c&&!h){const r=this.extractTextureNameAndUrl(e,n,s);if(r.url&&r.name&&(t.url=r.url,t.name=r.name,Mr(a,t.url)||a.push(t.url)),t.metadata&&t.metadata.mobileUrl){const e=this.extractTextureNameAndUrl(t.metadata.mobileUrl,n,s);e.url&&e.name&&(t.metadata.mobileUrl=e.url,Mr(a,t.metadata.mobileUrl)||a.push(t.metadata.mobileUrl),Mr(l,t.metadata.mobileUrl)||l.push(t.metadata.mobileUrl),Mr(o,t.url)||o.push(t.url))}}}});const h=["px","py","pz","nx","ny","nz"],d=e=>{let t=e.lastIndexOf("."),n=e;if(-1!==t){let r=e.substring(0,t);for(let e=0;e<h.length;e++){const i=h[e];if(t=r.lastIndexOf("_"+i),-1!=t){n=r.substring(0,t);break}}}return n},f=e=>{const t=d(e);for(let n=0;n<a.length;n++){const e=a[n];if(t.endsWith(e))return!0}return!1},p=e=>{const t=d(e);for(let n=0;n<o.length;n++){const e=o[n];if(t.endsWith(e))return!0}return!1},g=e=>{const t=d(e);for(let n=0;n<l.length;n++){const e=l[n];if(t.endsWith(e))return!0}return!1},m=[];for(let v=0;v<this._zkScene.get("textures").length;v++){const e=this._zkScene.get("textures").at(v),t=e.get("url");t&&f(t)?p(t)?e.set("usage",Zakeke.TextureUsage.Desktop):g(t)?e.set("usage",Zakeke.TextureUsage.Mobile):e.set("usage",Zakeke.TextureUsage.Any):m.push(e)}m.length>0&&this._zkScene.get("textures").remove(m),this._zkScene.set("usedTextureUrls",a)}}extractTextureNameAndUrl(e,t,n){const r={name:"",url:""};let i=e.lastIndexOf("/");if(-1!==i){const s=e.substring(i+1);if(n.hasOwnProperty(s))r.url=n[s],r.name=r.url;else if(i=e.lastIndexOf("/",i-1),-1!==i&&(i=e.lastIndexOf("/",i-1),-1!==i)){const a=e.substring(i+1);r.url=a,r.name=a,t&&(n[s]=a)}}return r}removeDisabledFresnelParameters(){const e=function(e){return e&&null!=e.isEnabled&&!e.isEnabled&&null!=e.leftColor&&null!=e.leftColor&&e.leftColor instanceof BABYLON.Color3&&e.leftColor.equals(BABYLON.Color3.White())&&null!=e.rightColor&&null!=e.rightColor&&e.rightColor instanceof BABYLON.Color3&&e.rightColor.equals(BABYLON.Color3.Black())&&null!=e.bias&&0==e.bias&&null!=e.power&&1==e.power};this._scene&&this._scene.materials.forEach(function(t){t instanceof BABYLON.StandardMaterial?(t.diffuseFresnelParameters&&e(t.diffuseFresnelParameters)&&(t.diffuseFresnelParameters=new BABYLON.FresnelParameters,t.diffuseFresnelParameters.isEnabled=!1),t.emissiveFresnelParameters&&e(t.emissiveFresnelParameters)&&(t.emissiveFresnelParameters=new BABYLON.FresnelParameters,t.emissiveFresnelParameters.isEnabled=!1),t.opacityFresnelParameters&&e(t.opacityFresnelParameters)&&(t.opacityFresnelParameters=new BABYLON.FresnelParameters,t.opacityFresnelParameters.isEnabled=!1),t.reflectionFresnelParameters&&e(t.reflectionFresnelParameters)&&(t.reflectionFresnelParameters=new BABYLON.FresnelParameters,t.reflectionFresnelParameters.isEnabled=!1),t.refractionFresnelParameters&&e(t.refractionFresnelParameters)&&(t.refractionFresnelParameters=new BABYLON.FresnelParameters,t.refractionFresnelParameters.isEnabled=!1)):t instanceof BABYLON.PBRMaterial||t instanceof Zakeke.PBRMaterial&&t.opacityFresnelParameters&&e(t.opacityFresnelParameters)&&(t.opacityFresnelParameters=void 0)})}uploadSceneIncrementalFiles(e,t,n,r){var i;if(!this._scene||!this._zkScene||!this._sceneHelper)return void(t&&t("No scene to upload"));const s=this._zkScene,a=this._sceneHelper;let o=s.get("version"),l=this.envMode;this.setEnvironmentMode(c.Editor),this.disableAntialiasing(!0);let u=this.resetCameraRotationLimits();this.deleteHighlightLayer(),this.adjustSceneForSerialization(),a.setDummyMaterialToInvisibleMeshes();let h=this.getUseDelayedMaterialLoading(),d=this.getUseMaterialOffloading(),f={},p={};h?this.getAllMaterials().forEach(e=>{const t=this.getMeshesUsingMaterial(e.id);"default material"!==e.id&&0===t.length&&(f[e.id]={name:e.name,file:"material_"+o+"_"+e.id.replace(/[^a-z0-9]/gi,"_").toLowerCase()+".json"})}):d&&this.getAllMaterials().forEach(e=>{const t=this.getMeshesUsingMaterial(e.id);"default material"!==e.id&&0===t.length&&(p[e.id]=a.getOffloadedMaterialInfo(e))}),this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.offloadedMaterials=p,this._scene.metadata.delayedMaterials=f;let g=BABYLON.SceneSerializer.Serialize(this._scene);if(g.postProcesses=[],g.metadata&&g.metadata.originalMeshMaterials){const e=JSON.parse(JSON.stringify(g.metadata.originalMeshMaterials));a.unsetAllDummyMaterials(),g.metadata.originalMeshMaterials=e}const m={useDraco:this._dracoEnabled,forceDraco:null!==(i=s.getForceDracoCompression())&&void 0!==i&&i,dracoEncodingSpeed:this._dracoEncodingSpeed,dracoDecodingSpeed:this._dracoDecodingSpeed,excludedMeshes:[],delayMatarialLoading:Object.keys(f),offloadedMaterialIDs:Object.keys(p)};console.log(m),this.getSceneIncrementalFilesAsync(o,g,m,n).then(n=>{let r=new FormData;for(let e=0;e<n.length;e++){const t=n[e];let s,a=t.name,o=t.data,l=!1;if(!t.dracoEncoded&&t.data.length>180&&t.data.length<45e4&&(Logger.info("Uncompressed file length: "+t.data.length),o=LZString.compressToUint8Array(t.data),Logger.info("Compressed file length: "+o.length),a="compressed_"+t.name,l=!0),t.dracoEncoded||l){var i=o.buffer;s=new Blob([i])}else s=new Blob([o],{type:"text/plain"});r.append("file_"+e,s,a)}fetch(s.getSceneIncrementalFileUploadUrl(),{method:"POST",headers:{Authorization:"Bearer "+this._authorizationToken},body:r}).then(e=>{if(!e.ok)throw new Error("HTTP error "+e.status);return e.json()}).then(t=>{e&&e(t)}).catch(function(e){t&&t(e.message)}),l!=c.Editor&&this.setEnvironmentMode(l),this.enableAntialiasing(),this.createHighlightLayer(),this.setCameraRotationLimits(u)})}async getSceneIncrementalFilesAsync(e,t,n,r){let i=[];return this._incrementalFilesMaker||(this._incrementalFilesMaker=new mr(this._incrementalWorkersScriptsUrls)),this._incrementalFilesMaker&&(await this._incrementalFilesMaker.whenReadyAsync(),i=await this._incrementalFilesMaker.getIncrementalFilesAsync(t,e,n)),i}async setNewSceneModelAsync(e,t){this._zkModel=e,this._zkScene=t,await this.init3DEngineAsync(),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),this.fireCameraLocationsUpdateEvent()}getSceneConfig(){var e,t;return null!==(e=null==(t=this._zkScene)?void 0:t.getSceneConfig())&&void 0!==e?e:null}preSceneFileLoading(){this.resetRealVisibility()}postSceneFileLoading(){this.fireSceneCreatedEvent(),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),this.fireCameraLocationsUpdateEvent()}loadSceneSourceFiles(e,t,n,r){if(this._zkScene){const l=this._zkScene,u=new FormData;if(t)u.append("url",t);else if(e){for(let t=0;t<e.length;t++)u.append("file-"+t,e[t]);var i=this._zkScene.getTexturesConfig();if(i){var s=new Zakeke.SceneSourceTaskOptions;s.set("textures",i);var a=JSON.stringify(s),o=new Blob([a],{type:"application/json"});u.append("task-options",o,"task-options.json")}}const c={downloadProgress:0,uploadProgress:0,status:0,message:"",sceneSourceInfo:{},taskID:void 0,sourceID:void 0,meshes:[]};this._sceneSourceTasks.push(c);const h=l.getSourceTasksUrl(),d=new Request(h,{method:"POST",headers:{Authorization:"Bearer "+this._authorizationToken},body:u}),f=e=>{const t=e.loaded/e.total;c.uploadProgress=100*t,this.fireSceneSourceTaskCheckEvent()},p=e=>{const t=e.loaded/e.total;c.downloadProgress=100*t,this.fireSceneSourceTaskCheckEvent()},g=new XMLHttpRequest;g.upload.addEventListener("progress",f),g.addEventListener("progress",p),d.signal.addEventListener("fetch",()=>g.send()),fetch(d).then(e=>e.json()).then(e=>{e&&e.hasOwnProperty("taskID")&&e.hasOwnProperty("sourceID")?(c.taskID=e.taskID,c.sourceID=e.sourceID,c.status=1,this.fireSceneSourceTaskCheckEvent()):Logger.info("task creation process did not go well"),n&&n(c)}).catch(e=>{this._sceneSourceTasks=this._sceneSourceTasks.filter(e=>{}),this.fireSceneSourceTaskCheckEvent(),r&&r(e)}),this.fireSceneSourceTaskCheckEvent()}}checkSceneSourceTasks(){if(this._scene&&this._zkScene&&this._sceneSourceTasks&&this._sceneSourceTasks.length>0){const e=this._zkScene;for(let t=0;t<this._sceneSourceTasks.length;t++){let n=this._sceneSourceTasks[t];if(5!=n.status&&4!=n.status){if(2!=n.status&&0!=n.status){if(1==n.status){n.status=2;const t=e=>{e.status=5,this.fireSceneSourceTaskErrorEvent(e.taskID),this.fireSceneSourceTaskCheckEvent()};(async n=>{try{const r=await fetch(e.getSourceTaskResultUrl(n.taskID),{method:"GET",cache:"no-cache",headers:{Authorization:"Bearer "+this._authorizationToken}});if(r.ok){const e=await r.json();if(e&&e.hasOwnProperty("taskID")&&e.hasOwnProperty("state")&&e.hasOwnProperty("message")&&e.hasOwnProperty("sourceFile"))if(2==e.state){n.sceneSourceInfo={sourceID:e.sourceFile.sourceID,fileObjectID:e.sourceFile.fileObjectID,fileLength:e.sourceFile.fileLength,url:e.sourceFile.url,rootUrl:e.sourceFile.rootUrl,sceneFileName:e.sourceFile.sceneFileName,textureFiles:[]};for(let t=0;t<e.sourceFile.textureFiles.length;t++)n.sceneSourceInfo.textureFiles.push({textureID:e.sourceFile.textureFiles[t].textureID,fileObjectID:e.sourceFile.textureFiles[t].fileObjectID,fileLength:e.sourceFile.textureFiles[t].fileLength,url:e.sourceFile.textureFiles[t].url});n.status=3}else 3==e.state?t(n):n.status=1;else t(n)}else t(n)}catch(r){t(n)}})(n)}3==n.status&&(this._isLoadingSourceFiles||(this._isLoadingSourceFiles=!0,n.sceneSourceInfo.rootUrl&&n.sceneSourceInfo.sceneFileName?(this.updateSceneModelFromSourceTask(n),this.loadMeshesFromRemoteFiles(n.sceneSourceInfo.rootUrl,n.sceneSourceInfo.sceneFileName,e=>{e&&"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(e=>{e.isPickable=!0}),this._isLoadingSourceFiles=!1,this.fireSceneSourceTaskSuccessEvent(e),this.fireMeshesUpdateEvent(),this.fireMaterialsUpdateEvent(),this.fireLightsUpdateEvent(),n.meshes=e,n.status=4},e=>{Logger.info("Errore nel caricamento delle mesh: "+e),this._isLoadingSourceFiles=!1,this.fireSceneSourceTaskErrorEvent(n.taskID),n.status=5})):(Logger.info("Risultato del task di caricamento non valido"),this._isLoadingSourceFiles=!1,this.fireSceneSourceTaskErrorEvent(n.taskID),n.status=5),this.fireSceneSourceTaskCheckEvent()))}}else this._sceneSourceTasks.splice(t--,1),this.fireSceneSourceTaskCheckEvent()}}setTimeout(()=>this.checkSceneSourceTasks(),500)}updateSceneModelFromSourceTask(e){if(this._zkScene){const t=new Zakeke.SceneSource;t.set("sourceID",e.sceneSourceInfo.sourceID),t.set("fileObjectID",e.sceneSourceInfo.fileObjectID),t.set("fileLength",e.sceneSourceInfo.fileLength),t.set("url",e.sceneSourceInfo.url),t.set("rootUrl",e.sceneSourceInfo.rootUrl),t.set("sceneFileName",e.sceneSourceInfo.sceneFileName);for(let n=0;n<e.sceneSourceInfo.textureFiles.length;n++){const r=e.sceneSourceInfo.textureFiles[n];if(r.textureID&&(r.fileObjectID||r.fileLength)&&r.url){const e=new Zakeke.SceneSourceTexture;e.set("textureID",r.textureID),e.set("fileObjectID",r.fileObjectID),e.set("fileLength",r.fileLength),e.set("url",r.url),t.get("textures").push(e)}}this._zkScene.get("sources").push(t)}}loadMeshesFromRemoteFiles(e,t,n,r){if(!this._scene||!this._sceneHelper)return void(r&&r("No scene to fill with imported meshes"));this._scene;let i=e+t;this._sceneHelper.importMeshesFromUrlAsync(i,null,void 0).then(async e=>(Logger.info("Uploading embedded textures..."),await this.uploadEmbeddedTexturesAsync(),e)).then(e=>(Logger.info("File imported successfully."),this.checkSceneEmptyEnvironmentTexture(),this.refreshEnvironment(),e)).then(e=>{Logger.info("Operation completed successfully."),null==n||n(e)}).catch(e=>{Logger.info("Error loading file"),r&&r(e)}),Logger.info("loading finished")}loadMeshesFromRemoteFiles_OLD(e,t,n,r){if(!this._scene||!this._sceneHelper)return void(r&&r("No scene to fill with imported meshes"));const i=this._scene,s=this._sceneHelper;let a=t,o=t.lastIndexOf(".");-1!==o&&(a=t.substr(0,o));const l=this._scene.materials.map(e=>e.id);let u;BABYLON.GLTFFileLoader.IncrementalLoading=!1,BABYLON.SceneLoader.OnPluginActivatedObservable.add(e=>{u=e.name});const c=new BABYLON.AssetsManager(this._scene),h=c.addMeshTask("mesh-task","",e,t);h.onSuccess=e=>{Logger.info("task completed successfully");const t=e.loadedMeshes,r=new BABYLON.Mesh(a,i);r.id=Zakeke.generateUUID(),r.metadata={isRealMesh:!0,isGroup:!0},t.forEach(e=>{e.parent||(e.parent=r),e.material||(e.material=new BABYLON.StandardMaterial(e.name+"Mat",i)),e.id=Zakeke.generateUUID()}),i.materials.forEach(e=>{Mr(l,e.id)||(e.id=Zakeke.generateUUID())}),this.checkSceneEmptyEnvironmentTexture(),this.refreshEnvironment(),s.adjustCamera(u,!1,!1),s.setupShaderMaterialsCameraPosition(),n&&n(t)},h.onError=(e,t,n)=>{Logger.info("task completed with errors"),r&&r(t)},c.onFinish=function(){Logger.info("loading finished")},c.load()}isRealMesh(e){return!!this._sceneHelper&&this._sceneHelper.isRealMesh(e)}onMeshChanged(e){this.updateBoundingBox(),this.setRenderingNeeded()}onSubMeshChanged(e){this.updateBoundingBox(),this.setRenderingNeeded()}onMaterialChanged(e){this.setRenderingNeeded()}onLightChanged(e){this.setRenderingNeeded()}getSceneMeshesByName(e){return this._sceneHelper?this._sceneHelper.getSceneMeshesByName(e):[]}getSceneMeshes(){return this._sceneHelper?this._sceneHelper.getSceneMeshes():[]}getMeshesUsingMaterial(e){return this._sceneHelper?this._sceneHelper.getMeshesUsingMaterial(e):[]}getMeshesMaterials(e){return this._sceneHelper?this._sceneHelper.getMeshesMaterials(e):[]}getMeshMaterials(e){return this._sceneHelper?this._sceneHelper.getMeshMaterials(e):[]}getAllMaterials(){return this._sceneHelper?this._sceneHelper.getAllMaterials():[]}getGroupedMaterials(){const e=[],t={},n=this.getAllMaterials();for(let r=0;r<n.length;r++){let i=n[r];if("groundMaterial"==i.id)continue;const s=this.getMaterialGroup(i.id);let a=null;t.hasOwnProperty(s)?a=t[s]:(a=new na(s),e.push(a),t[s]=a),a&&a.materials.push(i)}return e.sort(function(e,t){var n=e.groupName.toLowerCase(),r=t.groupName.toLowerCase();return n<r?-1:n>r?1:0})}setMaterialsGroup(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(let r=0;r<e.length;r++){const i=e[r];this.setMaterialGroup(i,t,n)}}setMaterialGroup(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!this._scene||!this._scene.getMaterialByID(e)||(this._scene.metadata||(this._scene.metadata={}),this._scene.metadata.groups||(this._scene.metadata.groups={}),this._scene.metadata.groups[e]=t,n&&this.fireMaterialsUpdateEvent())}getMaterialGroup(t){return this._scene&&this._scene.metadata&&this._scene.metadata.groups&&this._scene.metadata.groups.hasOwnProperty(t)?this._scene.metadata.groups[t]:e.EmptyGroupName}removeMaterialGroup(e){this._scene&&this._scene.metadata&&this._scene.metadata.groups&&this._scene.metadata.groups.hasOwnProperty(e)&&(delete this._scene.metadata.groups[e],this.fireMaterialsUpdateEvent())}getMaterialsByGroup(t){const n=[],r=t||e.EmptyGroupName;return this._scene&&this._sceneHelper&&this._sceneHelper.getAllMaterials().forEach(e=>{this.getMaterialGroup(e.id)===r&&n.push(e)}),n}getGroupCenter(e){return this._sceneHelper?this._sceneHelper.getMeshHierarchyCenter(e):null}getGroupBoundingInfo(e){let t=e.getHierarchyBoundingVectors(!0);return new BABYLON.BoundingInfo(t.min,t.max)}showHideBoundingBox(e){this._showBoundingBox=e,this.updateBoundingBox(),this.setRenderingNeeded()}updateBoundingBox(){this.deleteBoundingBox(),this.showBoundingBox&&this.createSceneBoundingBox(!0)}deleteBoundingBox(){let e=this.getSceneBoundingBox();e&&e.dispose()}setCameraPositionScale(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraPositionScale(e),this._sceneHelper.setCameraPositionScale(e,!0),this.setRenderingNeeded())}setCameraLimitLowerRadius(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLimitLowerRadius(e),this._sceneHelper.setCameraLimitLowerRadius(e,!0),this.setRenderingNeeded())}setCameraZoomEnabled(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraZoomEnabled(e),this._sceneHelper.setZoomEnabled(e),this.setRenderingNeeded())}setCameraUseMinZoomPercentage(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUseMinZoomPerc(e),this._sceneHelper.setMinZoomPerc(e?this._zkScene.getCameraMinZoomPerc():void 0),this.setRenderingNeeded())}setCameraMinZoomPercentage(e){if(this._zkScene&&this._sceneHelper){this._zkScene.setCameraMinZoomPerc(e);var t=this._zkScene.getCameraUseMinZoomPerc();this._sceneHelper.setMinZoomPerc(t?e:void 0),this.setRenderingNeeded()}}setCameraUseMaxZoomPercentage(e){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUseMaxZoomPerc(e),this._sceneHelper.setMaxZoomPerc(e?this._zkScene.getCameraMaxZoomPerc():void 0),this.setRenderingNeeded())}setCameraMaxZoomPercentage(e){if(this._zkScene&&this._sceneHelper){this._zkScene.setCameraMaxZoomPerc(e);const t=this._zkScene.getCameraUseMaxZoomPerc();this._sceneHelper.setMaxZoomPerc(t?e:void 0),this.setRenderingNeeded()}}lockCameraAlphaAngle(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e;const t=null!==(e=this._camera.alpha)&&void 0!==e?e:0;this._zkScene.setCameraLowerAlphaLimit(t),this._zkScene.setCameraUpperAlphaLimit(t),this._sceneHelper.setCameraAlphaLimits(t,t),this.setRenderingNeeded()}}unlockCameraAlphaAngle(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerAlphaLimit(null),this._zkScene.setCameraUpperAlphaLimit(null),this._sceneHelper.setCameraAlphaLimits(null,null),this.setRenderingNeeded())}lockCameraBetaAngle(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e,t=null!==(e=this._camera.beta)&&void 0!==e?e:-1.57;this._zkScene.setCameraLowerBetaLimit(t),this._zkScene.setCameraUpperBetaLimit(t),this._sceneHelper.setCameraBetaLimits(t,t),this.setRenderingNeeded()}}unlockCameraBetaAngle(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerBetaLimit(null),this._zkScene.setCameraUpperBetaLimit(null),this._sceneHelper.setCameraBetaLimits(null,null),this.setRenderingNeeded())}setCameraLowerAlphaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const e=this._camera.alpha;this._zkScene.setCameraLowerAlphaLimit(e),this._sceneHelper.setCameraLowerAlphaLimit(e),this.setRenderingNeeded()}}unsetCameraLowerAlphaLimit(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerAlphaLimit(null),this._sceneHelper.setCameraLowerAlphaLimit(null),this.setRenderingNeeded())}setCameraUpperAlphaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){var e=this._camera.alpha;this._zkScene.setCameraUpperAlphaLimit(e),this._sceneHelper.setCameraUpperAlphaLimit(e),this.setRenderingNeeded()}}unsetCameraUpperAlphaLimit(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUpperAlphaLimit(null),this._sceneHelper.setCameraUpperAlphaLimit(null),this.setRenderingNeeded())}setCameraLowerBetaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const e=this._camera.beta;this._zkScene.setCameraLowerBetaLimit(e),this._sceneHelper.setCameraLowerBetaLimit(e),this.setRenderingNeeded()}}unsetCameraLowerBetaLimit(){this._zkScene&&this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraLowerBetaLimit(null),this._sceneHelper.setCameraLowerBetaLimit(null),this.setRenderingNeeded())}setCameraUpperBetaLimit(){if(this._zkScene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const e=this._camera.beta;this._zkScene.setCameraUpperBetaLimit(e),this._sceneHelper.setCameraUpperBetaLimit(e),this.setRenderingNeeded()}}unsetCameraUpperBetaLimit(){this._zkScene&&this._sceneHelper&&(this._zkScene.setCameraUpperBetaLimit(null),this._sceneHelper.setCameraUpperBetaLimit(null),this.setRenderingNeeded())}selectMesh(e){this.selectUnselectMesh(e,!0)}unselectMesh(e){this.selectUnselectMesh(e,!1)}unselectAllMeshes(){this._scene&&this._scene.meshes.forEach(e=>this.unselectSingleMesh(e))}selectUnselectMesh(e,t){if(this._scene){if(this.deleteBoundingBox(),this.unselectAllMeshes(),t){var n;const t=e=>{this.selectSingleMesh(e),e.getChildMeshes().forEach(e=>t(e))};let r=this._scene.getMeshByID(e);this._isSelectionMode||(r=null!==(n=this.getDAMMainMesh())&&void 0!==n?n:r),r&&t(r),this.setManipulatedNode(r)}else this.setManipulatedNode(null);this.fireSelectionChangedEvent()}}selectSingleMesh(e){e.selected=!0,this.highlightMesh(e,!0),this.setRenderingNeeded()}unselectSingleMesh(e){e.selected=!1,this.highlightMesh(e,!1),this.setRenderingNeeded()}isMeshSelected(e){return e&&null!=e.selected&&e.selected}showMesh(e){this.resetRealVisibility(),this.showHideMesh(e,!0,!0)}hideMesh(e){this.resetRealVisibility(),this.showHideMesh(e,!1,!0)}showHideMesh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var r;if(this._scene&&this._sceneHelper&&this._camera){this._scene;const i=this._sceneHelper,s=this._camera,a=(e,t)=>{e.isVisible=t,Logger.info(e.name),e.getChildMeshes().forEach(e=>a(e,t))},o=(e,t)=>{a(e,t),!(i&&s&&e.metadata&&e.metadata.isGroup&&0===e.getChildMeshes().length)&&t&&!s.isCompletelyInFrustum(e)&&(i.adjustCamera(void 0,!1,!1),i.setupShaderMaterialsCameraPosition()),n&&this.fireMeshesUpdateEvent(),this.setRenderingNeeded()},l=this._scene.getMeshByID(e);if(l){const e=null==(r=this._zkScene)?void 0:r.get("rootUrl");e?i.unsetMeshDummyMaterialAsync(l,e,!0).then(()=>o(l,t)):o(l,t)}this.refreshInfoPoints()}}setTemporaryExclusivelyVisible(e){this._scene&&(this.resetRealVisibility(),this._realMeshVisibility={},this._scene.meshes.forEach(e=>{this._realMeshVisibility[e.id]=e.isVisible,this.isRealMesh(e)&&(e.isVisible=!1)}),this.showHideMesh(e,!0,!1))}resetRealVisibility(){this._scene&&this._sceneHelper&&this._realMeshVisibility&&(this._sceneHelper.getSceneMeshes().forEach(e=>{this._realMeshVisibility.hasOwnProperty(e.id)&&(e.isVisible=this._realMeshVisibility[e.id])}),this.setRenderingNeeded())}changeMaterialColor(e,t,n){this._sceneHelper&&this._sceneHelper.changeMaterialColor(e,t,n)}renameMesh(e,t){if(this._scene){const n=this._scene.getMeshByID(e);n&&(n.name=t,this.fireMeshesUpdateEvent())}}firePreUpdateEvent(){this._preUpdateListeners.forEach(e=>e())}addPreUpdateListener(e){this._preUpdateListeners.push(e)}removePreUpdateListener(e){for(let t=0;t<this._preUpdateListeners.length;t++)if(this._preUpdateListeners[t]==e){this._preUpdateListeners.splice(t--,1);break}}firePostUpdateEvent(){this._postUpdateListeners.forEach(e=>e())}addPostUpdateListener(e){this._postUpdateListeners.push(e)}removePostUpdateListener(e){for(let t=0;t<this._postUpdateListeners.length;t++)if(this._postUpdateListeners[t]==e){this._postUpdateListeners.splice(t--,1);break}}fireMeshSelectedEvent(e){this._meshSelectedListeners.forEach(t=>t(e))}addMeshSelectedListener(e){this._meshSelectedListeners.push(e)}removeMeshSelectedListener(e){const t=this._meshSelectedListeners.indexOf(e);-1!=t&&this._meshSelectedListeners.splice(t,1)}fireSelectionChangedEvent(){this._selectionChangedListeners.forEach(e=>e())}addSelectionChangedListener(e){this._selectionChangedListeners.push(e)}removeSelectionChangedListener(e){const t=this._selectionChangedListeners.indexOf(e);-1!=t&&this._selectionChangedListeners.splice(t,1)}fireLightSelectedEvent(e){this._lightSelectedListeners.forEach(t=>t(e))}addLightSelectedListener(e){this._lightSelectedListeners.push(e)}fireSceneCreatedEvent(){this._sceneCreatedListeners.forEach(e=>e())}addSceneCreatedListener(e){this._sceneCreatedListeners.push(e)}fireCameraLocationCreatedEvent(e){this._cameraLocationCreatedListeners.forEach(t=>t(e))}addCameraLocationCreatedListener(e){this._cameraLocationCreatedListeners.push(e)}fireCameraLocationsUpdateEvent(e){if(!e&&this._scene&&(e=this.getAllCameraLocations()),!e)throw"Failed firing positions update event: lights are null and no scene present";this._cameraLocationsUpdateListeners.forEach(t=>t(e))}addCameraLocationsUpdateListener(e){this._cameraLocationsUpdateListeners.push(e)}fireSceneSourceTaskSuccessEvent(e){this._sceneSourceTaskSuccessListeners.forEach(t=>t(e))}addSceneSourceTaskSuccessListener(e){this._sceneSourceTaskSuccessListeners.push(e)}fireSceneSourceTaskErrorEvent(e){this._sceneSourceTaskErrorListeners.forEach(t=>t(e))}addSceneSourceTaskErrorListener(e){this._sceneSourceTaskErrorListeners.push(e)}removeSceneSourceTaskErrorListener(e){const t=this._sceneSourceTaskErrorListeners.indexOf(e);-1!=t&&this._sceneSourceTaskErrorListeners.splice(t,1)}fireSceneSourceTaskCheckEvent(){this._sceneSourceTasksCheckListeners.forEach(e=>e())}addSceneSourceTaskCheckListener(e){this._sceneSourceTasksCheckListeners.push(e)}removeSceneSourceTaskCheckListener(e){const t=this._sceneSourceTasksCheckListeners.indexOf(e);-1!=t&&this._sceneSourceTasksCheckListeners.splice(t,1)}fireMeshesUpdateEvent(e){if(!e&&this._scene&&(e=this.getSceneMeshes()),!e)throw"Failed firing mesh update event: meshes are null and no scene present";this._meshesUpdateListeners.forEach(t=>t(e))}addMeshesUpdateListener(e){this._meshesUpdateListeners.push(e)}removeMeshesUpdateListener(e){const t=this._meshesUpdateListeners.indexOf(e);-1!=t&&this._meshesUpdateListeners.splice(t,1)}fireMaterialsUpdateEvent(e){if(!e&&this._scene&&(e=this.getGroupedMaterials()),!e)throw"Failed firing materials update event: materials are null and no scene present";this._materialsUpdateListeners.forEach(t=>t(e))}addMaterialsUpdateListener(e){this._materialsUpdateListeners.push(e)}fireLightsUpdateEvent(e){if(!e&&this._scene&&(e=this.getAllLights()),!e)throw"Failed firing lights update event: lights are null and no scene present";this._lightsUpdateListeners.forEach(t=>t(e))}addLightsUpdateListener(e){this._lightsUpdateListeners.push(e)}fireMeshLocationCreatedEvent(e){this._meshLocationCreatedListeners.forEach(t=>t(e))}addMeshLocationCreatedListener(e){this._meshLocationCreatedListeners.push(e)}fireMeshLocationsUpdateEvent(e){if(!e&&this._scene&&(e=this.getAllMeshLocations()),!e)throw"Failed firing mesh positions update event: positions are null and no scene present";this._meshLocationsUpdateListeners.forEach(t=>t(e))}addMeshLocatonsUpdateListener(e){this._meshLocationsUpdateListeners.push(e)}fireArTaskSuccessEvent(){this._arTaskSuccessListeners.forEach(e=>e())}addArTaskSuccessListener(e){this._arTaskSuccessListeners.push(e)}fireArTaskErrorEvent(){this._arTaskErrorListeners.forEach(e=>e())}addArTaskErrorListener(e){this._arTaskErrorListeners.push(e)}fireArTaskCheckEvent(){this._arTasksCheckListeners.forEach(e=>e())}addArTaskCheckListener(e){this._arTasksCheckListeners.push(e)}fireFineTuningSettingEvent(e){this._tryOnFineTuningSettingListeners.forEach(t=>t(e))}addFineTuningSettingListener(e){return this._tryOnFineTuningSettingListeners.push(e),this._tryOnFineTuningSettingListeners.length-1}removeFineTuningSettingListener(e){this._tryOnFineTuningSettingListeners.splice(e,1)}removeAllFineTuningSettingListeners(){this._tryOnFineTuningSettingListeners=[]}fireFineTuningCloseEvent(){this._tryOnFineTuningCloseListeners.forEach(e=>e())}addFineTuningCloseListener(e){this._tryOnFineTuningCloseListeners.push(e)}clearListeners(){this._meshSelectedListeners=[],this._selectionChangedListeners=[],this._lightSelectedListeners=[],this._sceneCreatedListeners=[],this._cameraLocationCreatedListeners=[],this._sceneSourceTaskSuccessListeners=[],this._sceneSourceTaskErrorListeners=[],this._sceneSourceTasksCheckListeners=[],this._meshesUpdateListeners=[],this._materialsUpdateListeners=[],this._lightsUpdateListeners=[],this._cameraLocationsUpdateListeners=[],this._meshLocationCreatedListeners=[],this._meshLocationsUpdateListeners=[],this._arTaskSuccessListeners=[],this._arTaskErrorListeners=[],this._arTasksCheckListeners=[],this._tryOnFineTuningSettingListeners=[],this._tryOnFineTuningCloseListeners=[]}onPointerDown(e,t){if(this._scene&&this._sceneHelper&&this._envMode==c.Editor&&this._selectOnPick&&t&&t.hit&&t.pickedMesh&&t.pickedMesh!==this._ground){this.selectMesh(t.pickedMesh.id);const e=this.convertSceneToScreenPoint(this._scene.pointerX,this._scene.pointerY);if(e){const n={name:t.pickedMesh.name,id:t.pickedMesh.id,scenePointerX:this._scene.pointerX,scenePointerY:this._scene.pointerY,screenPointerX:e.X,screenPointerY:e.Y};this.fireMeshSelectedEvent(n)}}}onPointerMove(e,t){if(!this._scene||!this._sceneHelper||this._envMode!=c.Editor)return;if(this.highlightMeshOver(!1),!this._highlightOver)return void(this._meshOver=null);const n=this._scene.pick(this._scene.pointerX,this._scene.pointerY);n&&n.hit&&n.pickedMesh&&this._sceneHelper.isRealMesh(n.pickedMesh)&&(this._meshOver=n.pickedMesh,this.highlightMeshOver(!0))}getSubMesh(e,t){return this._sceneHelper?this._sceneHelper.getSubMesh(e,t):null}getLightByID(e){return this._scene?this._scene.getLightByID(e):null}applyMaterialByName(e,t){this._sceneHelper&&this._sceneHelper.applyMaterialByName(e,t)}applyMaterial(e,t){this._sceneHelper&&(this._sceneHelper.applyMaterial(e,t),this.setLongRenderingNeeded())}applyMaterialToSubMeshByName(e,t,n){this._sceneHelper&&this._sceneHelper.applyMaterialToSubMeshByName(e,t,n)}applyMaterialToSubMesh(e,t,n){this._sceneHelper&&this._sceneHelper.applyMaterialToSubMesh(e,t,n)}resetMeshMaterial(e,t){t?this._initialMeshMaterials:this._lastMeshMaterials}resetSubMeshMaterial(e,t,n){const r=n?this._initialSubMeshMaterials:this._lastSubMeshMaterials;if(e&&t&&e.material instanceof BABYLON.MultiMaterial){const n=t.materialIndex;if(n>=0&&n<e.material.subMaterials.length){const t="".concat(e.id,"_").concat(n);if(r.hasOwnProperty(t)){const i=r[t],s=this.getMaterialByID(i);s&&(e.material.subMaterials[n]=s)}}}this.setRenderingNeeded()}getExtension(e){var t=e.lastIndexOf(".");if(-1!==t)return e.substring(t).toLowerCase()}loadMobileTextureFilesAsync(e,t,n,r){return new Promise((i,s)=>{this.loadMobileTextureFiles(e,t,n,r,()=>i(),e=>s())})}loadMobileTextureFiles(e,t,n,r,i,s){const a=6===e.length||".dds"===this.getExtension(e[0].name)||".hdr"===this.getExtension(e[0].name)||".env"===this.getExtension(e[0].name)||".basis"===this.getExtension(e[0].name);this.uploadTextureFiles(e,t,n,e=>{e.length>0&&(a?this.setMobileCubeTextureImages(e,t,n):this.setMobileTextureImage(e[0],t,n,r)),i&&i()},s,!1)}loadTextureFilesAsync(e,t,n,r){return new Promise((i,s)=>{this.loadTextureFiles(e,t,n,r,()=>i(),e=>s(e))})}loadTextureFiles(e,t,n,r,i,s){const a=6===e.length||".dds"===this.getExtension(e[0].name)||".hdr"===this.getExtension(e[0].name)||".env"===this.getExtension(e[0].name)||".basis"===this.getExtension(e[0].name);this.uploadTextureFiles(e,t,n,async o=>{o.length>0&&(a?await this.setCubeTextureImages(o,t,n):(await this.setTextureImage(o[0],t,n,r),(!n.includes("sheen")&&!n.includes("clearCoat")&&!n.includes("subSurface")&&!n.includes("anisotropy")&&(!t[n+"Texture"].metadata||!t[n+"Texture"].metadata.mobileUrl)||!t[n.split("_")[0]][n.toLowerCase().includes("texture")?"texture":n.split("_")[1]+"Texture"].metadata||!t[n.split("_")[0]][n.toLowerCase().includes("texture")?"texture":n.split("_")[1]+"Texture"].metadata.mobileUrl)&&await new Promise(async i=>{this.uploadTextureFiles(e,t,n,async e=>{this.setMobileTextureImage(e[0],t,n,r),i()},s,!0)})),i&&i())},s,!1)}getRecursiveBoundingBox(e){this.calculateRecursiveBoundingBox(e);const t=e.getBoundingInfo().boundingBox.scale(2);return e.setBoundingInfo(new BABYLON.BoundingInfo(BABYLON.Vector3.Zero(),BABYLON.Vector3.Zero())),new BABYLON.BoundingBox(t.minimum,t.maximum)}calculateRecursiveBoundingBox(e){const t=e=>{e.refreshBoundingInfo();for(const n of e.getChildMeshes(!0))t(n)};t(e);const n=e.getHierarchyBoundingVectors(!0);e.setBoundingInfo(new BABYLON.BoundingInfo(n.min,n.max))}calculateBoundingBox(e){let{min:t,max:n}=e[0].getHierarchyBoundingVectors(!1);for(let r=1;r<e.length;r++){const i=e[r].getHierarchyBoundingVectors(!1);t=BABYLON.Vector3.Minimize(t,i.min),n=BABYLON.Vector3.Maximize(n,i.max)}return new BABYLON.BoundingBox(t,n).extendSizeWorld.length()}checkMeshHiddenByMeshes(e,t,n,r){const i=this.calculateBoundingBox(t),s=this.calculateBoundingBox(e);return s-s*n>i?1:s+s*r<i?-1:0}uploadTextureFileAsync(e,t){return new Promise((n,r)=>{if(!this._scene||!this._zkScene||!e)return void n(null);const i=t?t.id:Zakeke.getEmptyUUID(),s=e=>{if(this._zkScene&&e&&e.textureID&&e.materialID&&(e.fileObjectID||e.fileLength)&&e.url){const t=new Zakeke.SceneTexture;return t.set("textureID",e.textureID),t.set("materialID",e.materialID),t.set("fileObjectID",e.fileObjectID),t.set("fileLength",e.fileLength),t.set("url",e.url),this._zkScene.get("textures").push(t),t}return null},a=new FormData;a.append("file",e);const o={method:"POST",headers:{Authorization:"Bearer ".concat(this._authorizationToken)},body:a};fetch(this.getTexturesUploadUrl(i),o).then(e=>{if(e.ok)return e.json();throw new Error("An error occurred")}).then(e=>{if(Array.isArray(e)){const t=s(e[0]);t?n(t):r("Invalid image")}else r("Invalid image")}).catch(e=>{r("An error occurred: "+e.message)})})}async uploadTextureFiles(e,t,n,r,i,s){if(!this._scene||!this._zkScene||!e||0==e.length)return;const a=t?t.id:Zakeke.getEmptyUUID(),o=e=>{if(this._zkScene&&e&&e.textureID&&e.materialID&&(e.fileObjectID||e.fileLength)&&e.url){const t=new Zakeke.SceneTexture;return t.set("textureID",e.textureID),t.set("materialID",e.materialID),t.set("fileObjectID",e.fileObjectID),t.set("fileLength",e.fileLength),t.set("url",e.url),this._zkScene.get("textures").push(t),t}return null},l=(e,t)=>{const n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)},u=(e=>{const t=e.lastIndexOf(".");return-1!==t?e.substring(t):null})(e[0].name),c=[];if(!this.canLoadCubemap(t,n)||6!=e.length&&".dds"!==u&&".hdr"!==u&&".env"!==u&&".basis"!==u||6!=e.length)c.push(e[0]);else{const t=["px","py","pz","nx","ny","nz"];for(let n=0;n<e.length;n++){const r=e[n];let i=-1;for(let e=0;e<t.length;e++)if(l(r.name,t[e])){c.push(r),i=e;break}-1!==i&&t.splice(i,1)}if(0!=t.length){const e="Immagini per la cube map non valide";return i&&i(e),void Logger.info(e)}}const h=new FormData;for(let m=0;m<c.length;m++)h.append("file-"+m,c[m]);var d=this._zkScene.getTexturesConfig();if(d){var f=JSON.stringify(d),p=new Blob([f],{type:"application/json"});h.append("options",p,"options.json")}h.forEach(e=>console.log("File: ",e));const g={method:"POST",headers:{Authorization:"Bearer ".concat(this._authorizationToken)},body:h};fetch(this.getTexturesUploadUrl(a)+"?resize="+s,g).then(e=>{if(!e.ok)throw new Error("An error occurred: "+e.status);return e.json()}).then(e=>{const t=[];if("[object Array]"===Object.prototype.toString.call(e))for(let n=0;n<e.length;n++){const r=o(e[n]);if(!r&&i)return void i("Immagini non valide");r&&t.push(r)}r&&r(t)}).catch(e=>{const t="An error occurred: "+e.message;i&&i(t)})}getTexturesUploadUrl(e){return this._zkScene?this._zkScene.getTexturesUrl(e):""}removeAllMaterialPhotos(e){if(this._zkScene){const t=[];for(let n=0;n<this._zkScene.get("materialPhotos").length;n++)this._zkScene.get("materialPhotos").at(n).get("materialID")===e.id&&t.push(this._zkScene.get("materialPhotos").at(n));t.length>0&&this._zkScene.get("materialPhotos").remove(t)}}removeMaterialPhotoAtIndex(e,t){if(this._zkScene){const n=[];for(let t=0;t<this._zkScene.get("materialPhotos").length;t++)this._zkScene.get("materialPhotos").at(t).get("materialID")===e.id&&n.push(this._zkScene.get("materialPhotos").at(t));if(n.length>0){const e=n[t];this._zkScene.get("materialPhotos").remove(e)}}}loadMaterialPhotoFiles(e,t,n,r){this.uploadMaterialPhotoFiles(e,t,e=>{this.refreshInfoPoints(),n&&n()},r)}uploadMaterialPhotoFiles(e,t,n,r){if(!this._scene||!this._zkScene||!e||0===e.length)return;const i=t.id,s=e=>{if(this._zkScene&&e&&e.photoID&&e.materialID&&(e.fileObjectID||e.fileLength)&&e.url){const t=new Zakeke.SceneMaterialPhoto;return t.set("photoID",e.photoID),t.set("materialID",e.materialID),t.set("fileObjectID",e.fileObjectID),t.set("fileLength",e.fileLength),t.set("url",e.url),this._zkScene.get("materialPhotos").push(t),t}return null},a=e=>{const t=e.lastIndexOf(".");return-1!==t?e.substring(t):null},o=new FormData;for(let l=0;l<e.length;l++){const t=a(e[l].name);(".png"===t||".jpg"===t)&&o.append("file-"+l,e[l])}jQuery.ajax({url:this.getMaterialPhotosUploadUrl(i),data:o,cache:!1,contentType:!1,processData:!1,type:"POST",success:e=>{const t=[];if("[object Array]"===Object.prototype.toString.call(e))for(let n=0;n<e.length;n++){const i=s(e[n]);if(!i&&r)return void r("Immagini non valide");i&&t.push(i)}n&&n(t)},error:(e,t,n)=>{r&&r("An error occurred: "+t+" Error: "+n)}})}getMaterialPhotosUploadUrl(e){return this._zkScene?this._zkScene.getMaterialPhotosUrl(e):""}canLoadCubemap(e,t){return e?e instanceof BABYLON.StandardMaterial&&("reflection"==t||"refraction"==t)||(e instanceof BABYLON.PBRMetallicRoughnessMaterial||e instanceof BABYLON.PBRSpecularGlossinessMaterial?"environment"===t:e instanceof BABYLON.PBRMaterial||e instanceof Zakeke.PBRMaterial?"reflection"===t:e instanceof BABYLON.ShaderMaterial):"environment"==t||"skybox"==t}setEnvironmentTexture(e,t,n,r,i){"environment"===t?this.setSceneEnvironmentTexture(e,void 0,n,r,i):"skybox"===t?this.setViewerSkyboxTexture(e,n,r):"ground"===t&&this.setViewerGroundTexture(e)}removeSceneEnvironmentTexture(){this._scene&&this._scene.environmentTexture&&(this._scene.environmentTexture.dispose(),this._scene.environmentTexture=null,this._scene.metadata&&null!=this._scene.metadata.environmentTextureRotationY&&delete this._scene.metadata.environmentTextureRotationY),this.setRenderingNeeded()}setSceneEnvironmentTextureRotationY(e){this._scene&&this._scene.environmentTexture&&(this._scene.environmentTexture instanceof BABYLON.CubeTexture||this._scene.environmentTexture instanceof BABYLON.HDRCubeTexture)&&(this._scene.environmentTexture.rotationY=e*Math.PI/180,this.setLongRenderingNeeded())}async setTextureImage(e,t,n,r){return new Promise(i=>{if(this._scene&&e&&e instanceof Zakeke.SceneTexture){const s=e.get("url");if(s)if(t){const e=this.getMaterialTexture(t,n);let a=!0;e&&e instanceof BABYLON.Texture&&(a=e.invertY);const o=new BABYLON.Texture(s,this._scene,r,a,void 0,()=>this.setRenderingNeeded());e&&e instanceof BABYLON.Texture&&(o.uScale=e.uScale,o.vScale=e.vScale,o.uOffset=e.uOffset,o.vOffset=e.vOffset,o.uAng=e.uAng,o.vAng=e.vAng,o.level=e.level,o.coordinatesIndex=e.coordinatesIndex,o.coordinatesMode=e.coordinatesMode,o.hasAlpha=e.hasAlpha,o.wrapU=e.wrapU,o.wrapV=e.wrapV,o.gammaSpace=e.gammaSpace),kn.whenTextureIsReadyAsync(o).then(()=>{this.applyTexture(o,t,n),e&&!this.isTextureUsed(e)&&e.dispose(),this.setRenderingNeeded(),i()})}else this.setEnvironmentTexture(s,n)}})}async setCubeTextureImages(e,t,n){return new Promise(r=>{(!this._scene||"[object Array]"!=Object.prototype.toString.call(e))&&r();for(let t=0;t<e.length;t++){const n=e[t];(!n||!(n instanceof Zakeke.SceneTexture))&&r()}const i=()=>this.setLongRenderingNeeded();let s=null;const a=this.getCubeTextureInfo(e);if(a.url&&this._scene)if(1===e.length){const e=a.url;e&&(t?e.endsWith(".dds")?s=BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene):e.endsWith(".hdr")?s=new BABYLON.HDRCubeTexture(e,this._scene,128,void 0,void 0,void 0,void 0,i):e.endsWith(".env")?s=new BABYLON.CubeTexture(e,this._scene,null,!1,null,i,null,void 0,!0,void 0,!0):e.endsWith(".basis")&&(s=BABYLON.CubeTexture.CreateFromPrefilteredData(e,this._scene)):this.setEnvironmentTexture(e,n))}else 6===e.length&&6===a.files.length&&6===a.extensions.length&&(t?s=new BABYLON.CubeTexture(a.url,this._scene,a.extensions,!1,a.files,i):this.setEnvironmentTexture(a.url,n,a.extensions,a.files,i));s?kn.whenTextureIsReadyAsync(s).then(()=>{if(t){const e=this.getMaterialTexture(t,n);this.applyTexture(s,t,n),e&&!this.isTextureUsed(e)&&e.dispose(),this.setRenderingNeeded(),r()}}):r()})}setMobileTextureImage(e,t,n,r){if(this._scene&&this._sceneHelper){const r=e.get("url");if(r){let e=null;e=t?this.getMaterialTexture(t,n):this._scene.environmentTexture,null!==e&&this._sceneHelper.isTextureWithUrl(e)&&(e.metadata||(e.metadata={}),e.metadata.mobileUrl=r)}}}setMobileCubeTextureImages(e,t,n){if(!this._scene||"[object Array]"!=Object.prototype.toString.call(e))return;for(let i=0;i<e.length;i++){const t=e[i];if(!t||!(t instanceof Zakeke.SceneTexture))return}const r=this.getCubeTextureInfo(e);if(r.url){let e=null;e=t?this.getMaterialTexture(t,n):this._scene.environmentTexture,e&&e instanceof BABYLON.CubeTexture&&(e.metadata||(e.metadata={}),e.metadata.mobileUrl=r.url,6===r.files.length&&(e.metadata.mobileFiles=r.files,e.metadata.mobileExtensions=r.extensions))}}getCubeTextureInfo(e){const t={url:null,files:[],extensions:[]};if(1===e.length)t.url=e[0].get("url")||null;else if(6===e.length){const n=["px","py","pz","nx","ny","nz"];let r=null;const i=[],s=[],a=(e,t)=>{const n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)},o=(e,t)=>{const n=e.lastIndexOf(".");if(-1!==n){const r=e.substring(0,n);if(r.endsWith("_"+t))return r.substring(0,r.length-("_"+t).length)}return null},l=(e,t)=>{const n=e.lastIndexOf("_"+t);return-1!==n?e.substr(n):null};for(let t=0;t<n.length;t++){const u=n[t];for(let t=0;t<e.length;t++){const n=e[t].get("url");if(n&&a(n,u)){i.push(n);const e=l(n,u);e&&s.push(e),r||(r=o(n,u));break}}}t.url=r,t.files=i,t.extensions=s}return t}isTextureUsed(e){if(this._scene&&e)for(let t=0;t<this._scene.materials.length;t++){const n=this._scene.materials[t].getActiveTextures();for(let t=0;t<n.length;t++)if(n[t].uid===e.uid)return!0}return!1}async changeTextureInvertYAsync(e,t,n){if(this._scene&&this._sceneHelper){var r=this._sceneHelper.getMaterialTexture(e,t);if(r&&r instanceof BABYLON.Texture&&r.invertY!=n){let s=r.url;if(s){let a=s;if(!/^(?:\/|[a-z]+:\/\/)/.test(s)){var i=await this.getSceneRootUrl();i&&(a=i+s)}const o=new BABYLON.Texture(a,this._scene,void 0,n,void 0,()=>this.setRenderingNeeded());r&&r instanceof BABYLON.Texture&&(o.uScale=r.uScale,o.vScale=r.vScale,o.uOffset=r.uOffset,o.vOffset=r.vOffset,o.uAng=r.uAng,o.vAng=r.vAng,o.level=r.level,o.coordinatesIndex=r.coordinatesIndex,o.coordinatesMode=r.coordinatesMode,o.hasAlpha=r.hasAlpha,o.wrapU=r.wrapU,o.wrapV=r.wrapV,o.gammaSpace=r.gammaSpace),await kn.whenTextureIsReadyAsync(o),this.applyTexture(o,e,t),r&&!this.isTextureUsed(r)&&r.dispose(),this.setRenderingNeeded()}}}}applyTextureByName(e,t,n){if(this._scene){const r=this._scene.textures.find(t=>t.name===e);r&&this.applyTexture(r,t,n)}}applyTexture(e,t,n){if(e&&"lightmap"==n&&(e.coordinatesIndex=1,(t instanceof BABYLON.StandardMaterial||t instanceof BABYLON.PBRMaterial||t instanceof BABYLON.PBRBaseSimpleMaterial)&&(t.useLightmapAsShadowmap=!0)),t instanceof BABYLON.StandardMaterial)switch(n){case"diffuse":t.diffuseTexture=e;break;case"emissive":t.emissiveTexture=e;break;case"ambient":t.ambientTexture=e;break;case"lightmap":t.lightmapTexture=e;break;case"opacity":t.opacityTexture=e;break;case"specular":t.specularTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"refraction":t.refractionTexture=e;break;case"bump":t.bumpTexture=e}else if(t instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"base":case"metallicRoughness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(n){case"environment":case"normal":case"emissive":case"occlusion":case"diffuse":case"specularGlossiness":t["".concat(n,"Texture")]=e}else if(t instanceof BABYLON.PBRMaterial)switch(n){case"cameraColorGrading":t.cameraColorGradingTexture=e;break;case"albedo":case"ambient":case"opacity":case"reflection":case"emissive":case"reflectivity":case"metallic":case"microSurface":case"bump":case"lightmap":t["".concat(n,"Texture")]=e;break;case"refraction":t.refractionTexture=e;break;case"environmentBRDF":t.environmentBRDFTexture=e;break;case"clearCoat_texture":t.clearCoat.texture=e;break;case"clearCoat_bump":t.clearCoat.bumpTexture=e;break;case"clearCoat_tint":t.clearCoat.tintTexture=e;break;case"clearCoat_textureRoughness":t.clearCoat.textureRoughness=e;break;case"anisotropy_texture":t.anisotropy.texture=e;break;case"sheen_texture":t.sheen.texture=e;break;case"sheen_textureRoughness":t.sheen.textureRoughness=e;break;case"subSurface_thickness":t.subSurface.thicknessTexture=e;break;case"subSurface_translucencyIntensity":t.subSurface.translucencyIntensityTexture=e;break;case"subSurface_refractionIntensity":t.subSurface.refractionIntensityTexture=e}else if(t instanceof BABYLON.ShaderMaterial)e&&e instanceof BABYLON.Texture?t.setTexture(n,e):t.removeTexture(n);else if(t instanceof Zakeke.PBRMaterial)switch(n){case"albedo":t.albedoTexture=e;break;case"bump":t.bumpTexture=e;break;case"reflection":t.reflectionTexture=e;break;case"matCapReflection":t.matCapReflectionTexture=e;break;case"reflectivity":t.reflectivityTexture=e;break;case"microsurface":t.microsurfaceTexture=e;break;case"ambient":t.ambientTexture=e;break;case"ao":t.aoTexture=e;break;case"opacity":t.opacityTexture=e}this.setLongRenderingNeeded()}getMaterialTexture(e,t){if(e instanceof BABYLON.StandardMaterial)switch(t){case"diffuse":return e.diffuseTexture;case"emissive":return e.emissiveTexture;case"ambient":return e.ambientTexture;case"lightmap":return e.lightmapTexture;case"opacity":return e.opacityTexture;case"specular":return e.specularTexture;case"reflection":return e.reflectionTexture;case"refraction":return e.refractionTexture;case"bump":return e.bumpTexture}else if(e instanceof BABYLON.PBRMetallicRoughnessMaterial)switch(t){case"environment":return e.environmentTexture;case"normal":return e.normalTexture;case"emissive":return e.emissiveTexture;case"occlusion":return e.occlusionTexture;case"base":return e.baseTexture;case"metallicRoughness":return e.metallicRoughnessTexture}else if(e instanceof BABYLON.PBRSpecularGlossinessMaterial)switch(t){case"environment":return e.environmentTexture;case"normal":return e.normalTexture;case"emissive":return e.emissiveTexture;case"occlusion":return e.occlusionTexture;case"diffuse":return e.diffuseTexture;case"specularGlossiness":return e.specularGlossinessTexture}else if(e instanceof BABYLON.PBRMaterial)switch(t){case"cameraColorGrading":return e.cameraColorGradingTexture;case"albedo":return e.albedoTexture;case"ambient":return e.ambientTexture;case"opacity":return e.opacityTexture;case"reflection":return e.reflectionTexture;case"emissive":return e.emissiveTexture;case"reflectivity":return e.reflectivityTexture;case"metallic":return e.metallicTexture;case"microSurface":return e.microSurfaceTexture;case"bump":return e.bumpTexture;case"lightmap":return e.lightmapTexture;case"refraction":return e.refractionTexture;case"clearCoat":case"clearCoat_texture":return e.clearCoat.texture;case"clearCoat_bump":return e.clearCoat.bumpTexture;case"clearCoat_tint":return e.clearCoat.tintTexture;case"clearCoat_textureRoughness":return e.clearCoat.textureRoughness;case"anisotropy_texture":return e.anisotropy.texture;case"sheen_texture":return e.sheen.texture;case"sheen_textureRoughness":return e.sheen.textureRoughness;case"subSurface_thickness":return e.subSurface.thicknessTexture;case"subSurface_refractionIntensity":return e.subSurface.refractionIntensityTexture;case"subSurface_translucencyIntensity":return e.subSurface.translucencyIntensityTexture}else if(e instanceof Zakeke.PBRMaterial)switch(t){case"albedo":return e.albedoTexture;case"bump":return e.bumpTexture;case"reflection":return e.reflectionTexture;case"matCapReflection":return e.matCapReflectionTexture;case"reflectivity":return e.reflectivityTexture;case"microsurface":return e.microsurfaceTexture;case"ambient":return e.ambientTexture;case"ao":return e.aoTexture;case"opacity":return e.opacityTexture}return null}removeMaterialTexture(e,t){this.applyTexture(null,e,t)}removeMaterialMobileTexture(e,t){const n=this.getMaterialTexture(e,t);n&&n.metadata&&n.metadata.mobileUrl&&(delete n.metadata.mobileUrl,n.metadata.hasOwnProperty("mobileFiles")&&delete n.metadata.mobileFiles,n.metadata.hasOwnProperty("mobileExtensions")&&delete n.metadata.mobileExtensions,0===Object.keys(n.metadata).length&&n.metadata.constructor===Object&&delete n.metadata)}createGroup(e,t,n){if(this._scene){const r=new BABYLON.Mesh(t,this._scene);if(r.id=Zakeke.generateUUID(),r.metadata={isRealMesh:!0,isGroup:!0},e){const t=this._scene.getMeshByID(e);t&&(r.parent=t)}return n&&n.forEach(e=>e.parent=r),this.fireMeshesUpdateEvent(),r}return null}deleteMesh(e,t){const n={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){const r=this._scene,i=this._sceneHelper,s=this._zkScene,a=r.getMeshByID(e);if(a){const r=e=>{const t=this.getMeshMaterials(e);for(let r=0;r<t.length;r++){const e=t[r];if(!e)continue;const s=this.getMeshesUsingMaterial(e.id);1===s.length&&s.every(e=>i.meshHasParent(e.id,a.id))&&(n.materialIDs.push(t[r].id),t[r].dispose())}e.getChildMeshes().forEach(e=>r(e))};t&&(r(a),this.fireMaterialsUpdateEvent());const s=i.getCameraPivot();s&&s===a&&this.setCameraPivot(null),this.isMeshSelected(a)&&this.unselectMesh(a.id),a.dispose(),n.meshIDs.push(e)}this.fireMeshesUpdateEvent(),this.setRenderingNeeded(),n.materialIDs.forEach(e=>{const t=s.getLibraryShaderMaterialIDForSceneMaterial(e);t&&s.unregisterShaderMaterial(t)})}return n}deleteAllMeshes(){if(this._scene&&this._sceneHelper){for(let e=0;e<this._scene.meshes.length;e++){const t=this._scene.meshes[e];this._sceneHelper.isRealMesh(t)&&(this._scene.meshes.splice(e--,1),t.dispose())}this.setCameraPivot(null),this.setRenderingNeeded()}}deleteDuplicatedMeshesWithDifferentParent(e,t){const n={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){const r=this._scene,i=this._sceneHelper,s=this._zkScene,a=r=>{const s=this.getSceneMeshesByName(r.name);let o=!1;for(let a=0;a<s.length;a++){var l=s[a];if(l.id!=r.id&&!i.meshHasParent(l.id,e)){if(t){const e=this.getMeshMaterials(l);for(let t=0;t<e.length;t++)1==this.getMeshesUsingMaterial(e[t].id).length&&(n.materialIDs.push(e[t].id),e[t].dispose())}n.meshIDs.push(l.id),l.dispose(),s.splice(a--,1),o=!0;break}}o||r.getChildMeshes().forEach(e=>a(e))},o=r.getMeshByID(e);o&&o.getChildMeshes().forEach(e=>a(e)),this.setRenderingNeeded(),n.materialIDs.forEach(e=>{const t=s.getLibraryShaderMaterialIDForSceneMaterial(e);t&&s.unregisterShaderMaterial(t)})}return n}deleteDuplicatedChildMeshes(e,t){const n={meshIDs:[],materialIDs:[]};if(this._scene&&this._sceneHelper&&this._zkScene){const r=this._scene,i=this._sceneHelper,s=this._zkScene,a=r=>{const s=this.getSceneMeshesByName(r.name);let o=!1;for(let a=0;a<s.length;a++){const l=s[a];if(l.id!=r.id&&!i.meshHasParent(l.id,e)){if(t){const e=this.getMeshMaterials(r);for(let t=0;t<e.length;t++)1==this.getMeshesUsingMaterial(e[t].id).length&&(n.materialIDs.push(e[t].id),e[t].dispose())}n.meshIDs.push(r.id),r.dispose(),o=!0;break}}if(!o){const e=r.getChildMeshes();for(let t=0;t<e.length;t++)a(e[t])}},o=r.getMeshByID(e);o&&o.getChildMeshes().forEach(e=>a(e)),this.setRenderingNeeded(),n.materialIDs.forEach(e=>{const t=s.getLibraryShaderMaterialIDForSceneMaterial(e);t&&s.unregisterShaderMaterial(t)})}return n}deleteMaterial(e){if(this._scene&&this._sceneHelper){const t=this._scene.getMaterialByID(e);t&&(this.deleteMaterialInternal(t),this.fireMaterialsUpdateEvent(),this.setRenderingNeeded())}}deleteMaterialInternal(e){if(this._scene&&this._sceneHelper&&e){const t=e.id;if(this._zkScene){const t=this._zkScene.getLibraryShaderMaterialIDForSceneMaterial(e.id);t&&this._zkScene.unregisterShaderMaterial(t)}const n=this._sceneHelper.getTexturesExclusivelyForMaterial(e);e.dispose();for(let e=0;e<n.length;e++)n[e].dispose();this._sceneHelper.removeSceneMaterialMetadata(t)}}deleteAllMaterials(){if(this._scene){for(;this._scene.materials.length>0;){const e=this._scene.materials.pop();e&&this.deleteMaterialInternal(e)}this.fireMaterialsUpdateEvent(),this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}}renameMaterial(e,t){if(this._scene){const n=this._scene.getMaterialByID(e);n&&(n.name=t),this.fireMaterialsUpdateEvent()}}cloneMesh(e){let t=null;return this._scene&&this._sceneHelper&&(t=this._sceneHelper.cloneMesh(e,!1,!1),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()),t}duplicateMesh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;return this._scene&&this._sceneHelper&&(n=this._sceneHelper.cloneMesh(e,!0,t),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()),n}cloneMaterial(e,t,n){let r=null;if(this._scene&&this._sceneHelper){const s=this._scene.getMaterialById(e);if(s){const e=n||s.name+" - clone";if(r=s.clone(e),r){const e=t||Zakeke.generateUUID();if(r.id=e,this._zkScene){const e=this._zkScene.getMappingForSceneMaterial(s.id);if(e){var i=e.get("libraryMaterialID");this._zkScene.mapLibraryMaterial(i,r.id);const t=this._sceneHelper.getTexturesForMaterial(r),n=this._sceneHelper.getTexturesForMaterial(r);for(let e=0;e<n.length;e++){const r=n[e],i=t[e];r.materialMapping=i.materialMapping}}}}}this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}return r}createMaterial(e,t,n){let r=null;if(this._scene){const i=e||"new material",s=t||"Standard";"Standard"===s?r=new BABYLON.StandardMaterial(i,this._scene):"PBRMetallicRoughness"===s?(r=new BABYLON.PBRMetallicRoughnessMaterial(i,this._scene),r.subSurface.indexOfRefraction=1,r._imageProcessingConfiguration.contrast=1):"PBRSpecularGlossiness"===s?r=new BABYLON.PBRSpecularGlossinessMaterial(i,this._scene):"PBR"===s?(r=new BABYLON.PBRMaterial(i,this._scene),r.enableSpecularAntiAliasing=!0,r.metallic=.9,r.roughness=.3,r.indexOfRefraction=1.5):"NewPBR"===s&&(r=new Zakeke.PBRMaterial(i,this._scene)),r&&(r.id=Zakeke.generateUUID(),n&&(r.metadata||(r.metadata={}),r.metadata.group=n)),this.checkSceneEmptyEnvironmentTexture(),this.setRenderingNeeded(),this.fireMaterialsUpdateEvent()}return r}changeMeshParent(e,t){if(this._scene){const n=this._scene.getMeshById(e);if(n&&(!n.parent||n.parent.id!=t)){const e=this._scene.getMeshById(t);n.setParent(e),this.setRenderingNeeded(),this.fireMeshesUpdateEvent()}}}removeMeshParent(e){if(this._scene){const t=this._scene.getMeshByID(e);t&&(t.parent=null,this.fireMeshesUpdateEvent())}}setManipulatedNode(e){e!==this._manipulatedNode&&(this._manipulatedNode=e,this.showHideEditControl(this._editControlVisible),this.setRenderingNeeded())}importLibraryMaterial(e){if(this._scene&&this._sceneHelper&&this._zkScene&&e&&e instanceof Zakeke.Material){e.get("shaders")&&this.checkShaderMaterial(e);const t=e.get("JSON")||e.get("json"),n=e.get("rootUrl");if(t&&n){const r=JSON.parse(t),i=BABYLON.Material.Parse(r,this._scene,n);if(i){if(i.id=Zakeke.generateUUID(),this._zkScene.mapLibraryMaterial(e.getMaterialID(),i.id),e.get("shaders")){const t=e.get("shaders"),n=t.get("name"),r=t.get("vertex"),s=t.get("fragment");n&&r&&s&&this._zkScene.registerShaderMaterial(e.getMaterialID(),n,r,s),this.setupShaderMaterialCameraPosition(i)}const t=this._sceneHelper.getTexturesForMaterial(i);for(let r=0;r<t.length;r++)t[r].materialMapping={libraryMaterialRootUrl:n,libraryMaterialID:e.getMaterialID(),sceneMaterialID:i.id}}}this.fireMaterialsUpdateEvent(),this.setRenderingNeeded()}}getTexturesForMaterial(e){return this._sceneHelper?this._sceneHelper.getTexturesForMaterial(e):[]}getStandardMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getStandardMaterialTextures(e):[]}getPBRBaseSimpleMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRBaseSimpleMaterialTextures(e):[]}getPBRMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRMaterialTextures(e):[]}getNewPBRMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getNewPBRMaterialTextures(e):[]}getPBRMetallicRoughnessMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRMetallicRoughnessMaterialTextures(e):[]}getPBRSpecularGlossinessMaterialTextures(e){return this._sceneHelper?this._sceneHelper.getPBRSpecularGlossinessMaterialTextures(e):[]}removeCameraLocation(e){var t;null==(t=this._zkScene)||t.get("cameraLocations").remove(e),this.fireCameraLocationsUpdateEvent()}saveCameraLocation(e){if(this._zkScene&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const t=this._camera.position,n=this._camera.target,r=new Zakeke.SceneCameraLocation;r.set("name",e),r.set("px",t.x),r.set("py",t.y),r.set("pz",t.z),r.set("tx",n.x),r.set("ty",n.y),r.set("tz",n.z),this._zkScene.get("cameraLocations").push(r),this.fireCameraLocationCreatedEvent(r),this.fireCameraLocationsUpdateEvent()}}clearCameraLocations(){if(this._zkScene){const e=this._zkScene.get("cameraLocations");for(;e.length>0;)e.remove(e.at(0));this.fireCameraLocationsUpdateEvent()}}getAllCameraLocations(){const e=[];if(this._zkScene)for(let t=0;t<this._zkScene.get("cameraLocations").length;t++)e.push(this._zkScene.get("cameraLocations").at(t));return e}saveMeshLocation(e){this._meshLocationsManager&&this._meshLocationsManager.saveMeshLocation(e)}saveExplodedMeshLocation(){this._meshLocationsManager&&this._meshLocationsManager.saveExplodedMeshLocation()}saveCollapsedMeshLocation(){this._meshLocationsManager&&this._meshLocationsManager.saveCollapsedMeshLocation()}onBeforeSaveMeshLocation(){this._oldManipulatedNode=this._manipulatedNode,this.setManipulatedNode(null)}onAfterSaveMeshLocation(){this.fireMeshLocationsUpdateEvent(),this.setManipulatedNode(this._oldManipulatedNode)}clearMeshLocations(){this._meshLocationsManager&&this._meshLocationsManager.clearMeshLocations()}getAllMeshLocations(){const e=[];if(this._zkScene)for(let t=0;t<this._zkScene.get("meshLocations").length;t++)e.push(this._zkScene.get("meshLocations").at(t));return e}makeLibraryMaterial(e,t){return new Promise((n,r)=>{this.getMaterialScreenShotForLibrary(e,i=>{i?this.createLibraryMaterial(e,t,i,n):r("No data generated for screenshot")})})}getMaterialScreenShotForLibrary(e,t){if(this._scene&&this._sceneHelper){this.resetEditorEnvironment(),this.removeGround(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null);const n=500,r=500;this._sceneHelper.takeMaterialScreenshotAsync(e,n,r).then(e=>{Lr(e,n,r,e=>{this.refreshEnvironment(),t&&t(e)})})}else t&&t(null)}createLibraryMaterial(e,t,n,r){let i=null;const s=()=>{i&&this.deleteMaterial(i.id),r&&r()};if(!this._scene||!this._sceneHelper||!this._zkScene)return void s();const a=this._scene,o=this._sceneHelper,l=this._zkScene;if(!a.getMaterialByID(e))return void s();const u=new Zakeke.Material;u.set("name",t),u.set("imageData",n);let c=e,h=c.replace(/-/g,"");const d=u.getMaterialID(),f=d.replace(/-/g,"");if(i=this.cloneMaterial(e,d,t),!i)return void s();const p=l.getSourcesIDs();l.getLibraryMaterialIDs();const g=o.getTexturesForMaterial(i),m=[];for(let w=0;w<g.length;w++){const e=g[w];if(e.materialMapping){const t=e.materialMapping.libraryMaterialID;t&&m.push(t)}}let v=new Zakeke.Materials;const _=["px","py","pz","nx","ny","nz"],y=(e,t)=>function(e){const t=e.lastIndexOf(".");if(-1!==t){const n=e.substring(0,t);if(_.some(e=>n.endsWith("_"+e)))return n.substring(0,n.length-3)}return e}(e).endsWith(t),b=()=>{for(let t=0;t<g.length;t++){const n=g[t];if(n&&o.isTextureWithUrl(n)&&n.url){let t=null,r=null;for(let e=0;e<p.length;e++){const i=p[e].replace(/-/g,"");if(-1!=n.url.indexOf(i)){t=p[e],r=i;break}}const i=[];for(let e=0;e<l.get("textures").length;e++){const t=l.get("textures").at(e);t.get("url")&&y(t.get("url"),n.url)&&i.push({fileObjectID:t.get("fileObjectID"),url:t.get("url"),fileLength:t.get("fileLength")})}for(let e=0;e<i.length;e++){const n=new Zakeke.MaterialSourceTextureImage;n.set("fileObjectID",i[e].fileObjectID),n.set("url",i[e].url||""),n.set("fileLength",i[e].fileLength||-1),t?(n.set("sceneID",l.getSceneID()),n.set("sourceID",t)):(n.set("sceneID",l.getSceneID()),n.set("materialID",c)),u.get("sourceTextureImages").push(n)}let s="",a="",o=n.name;if(t&&r){const e=n.url.indexOf(r);-1!=e&&(o=n.url.substring(e)),s=r,a="textures/"+f,n.name=o.replace(new RegExp(s,"g"),a)}else{var e=n.url.lastIndexOf("/");-1!==e&&-1!==(e=n.url.lastIndexOf("/",e-1))&&-1!=(e=n.url.lastIndexOf("/",e-1))&&(o=n.url.substring(e+1)),s=h,a=f,n.name=o.replace(new RegExp("textures/([A-Za-z0-9]*)/(.*)","g"),"textures/"+a+"/$2")}n.url=n.name}}if(i){const e=i.serialize(),t=JSON.stringify(e);u.set("JSON",t),u.save(null,{success:function(e,t,n){s()},error:function(e,t,n){s()}})}else s()};if(m.length>0){const e={ids:m.join(",")};try{v.fetch({success:(e,t,n)=>{v=e,b()},error:(e,t,n)=>{Logger.info("Errore nel salvataggio del materiale di libreria"),s()},data:e})}catch(x){}}else b()}lightsLayer_onLightSelected(e){this.fireLightSelectedEvent(e)}isDefaultLight(e){return!!this._sceneHelper&&this._sceneHelper.isDefaultLight(e)}createLight(e,t){let n=null;if(this._scene){const r=e||"new light",i=t||"Point",s=BABYLON.Vector3.Zero(),a=BABYLON.Vector3.Zero(),o=25*Math.PI/180,l=2;"Point"==i?n=new BABYLON.PointLight(r,s,this._scene):"Directional"==i?n=new BABYLON.DirectionalLight(r,a,this._scene):"Spot"==i?n=new BABYLON.SpotLight(r,s,a,o,l,this._scene):"Hemispheric"==i&&(n=new BABYLON.HemisphericLight(r,a,this._scene)),n&&(n.id=Zakeke.generateUUID()),this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded(),this.fireLightsUpdateEvent()}return n}cloneLight(e,t,n){let r=null;if(this._scene){const i=this._scene.getLightByID(e);if(i){const e=n||i.name+" - clone";if(r=i.clone(e),r){r.name=e;const n=t||Zakeke.generateUUID();r.id=n,this._lightsLayer&&this._lightsLayer.refresh()}}this.setRenderingNeeded(),this.fireLightsUpdateEvent()}return r}renameLight(e,t){if(this._scene){const n=this._scene.getLightByID(e);n&&(n.name=t,this._lightsLayer&&this._lightsLayer.refresh()),this.fireLightsUpdateEvent()}}deleteLight(e){if(this._scene){const t=this._scene.getLightByID(e);t&&(t.dispose(),this._scene.meshes.forEach(e=>e._markSubMeshesAsLightDirty()),this._lightsLayer&&this._lightsLayer.refresh()),this.setRenderingNeeded(),this.fireLightsUpdateEvent()}}getAllLights(){return this._scene?this._scene.lights:[]}canShowLights(){return this._showLights&&this._envMode==c.Editor}showHideLights(e){this._showLights=e,this._lightsLayer&&this._lightsLayer.refresh(),this.setRenderingNeeded()}canShowGround(){return this._showGround&&this._envMode==c.Editor}removeGround(){this._ground&&(this._ground.dispose(),this._ground=null),this.setRenderingNeeded()}refreshGround(){if(!this._scene)return;if(this.removeGround(),!this.canShowGround())return void this.setRenderingNeeded();const e=this._scene.clearColor,t=e.toHexString(),n=Ir(t)?.8:-.5,r=BABYLON.Color3.FromHexString(Or(t,n));let i=1e3,s=1;if(this.countSceneMeshes()>0){const e=this._scene.getWorldExtends(e=>this.isRealMesh(e)),t=1.5*e.max.subtract(e.min).length();isFinite(t)&&(i=20*t,s=i/100)}this._ground=BABYLON.Mesh.CreateGround("ground",i,i,10,this._scene),this._ground.doNotSerialize=!0,this._ground.isVisible=this.showGround,this._ground.isPickable=!1,this._ground.metadata={isRealMesh:!1,isGround:!0};const a=new BABYLON.GridMaterial("groundMaterial",this._scene);a.doNotSerialize=!0,a.backFaceCulling=!1,a.mainColor=new BABYLON.Color3(e.r,e.g,e.b),a.opacity=1,a.gridRatio=s,a.lineColor=r,a.metadata={isRealMaterial:!1},this._ground.material=a,this.setRenderingNeeded()}showHideGround(e){this.showGround=e,this.refreshGround()}canShowAxes(){return this._showAxes&&this._envMode==c.Editor}showHideAxes(e){this._showAxes=e,this._axesLayer&&this._axesLayer.refresh(),this.setRenderingNeeded()}showHideHighlight(e){this._showHighlight=e;const t=this.getSelectedRootMesh();this.highlightMesh(t,e),this.setRenderingNeeded()}setHighlightOver(e){this._highlightOver=e}highlightMesh(e,t){this._showHighlight&&this._envMode==c.Editor?(e&&e instanceof BABYLON.Mesh&&(t?(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer&&this._highlightLayer.addMesh(e,BABYLON.Color3.FromHexString(this._highlightColor))):this._highlightLayer&&this._highlightLayer.removeMesh(e)),this.setLongRenderingNeeded()):this.deleteHighlightLayer()}highlightMeshOver(e){this._showHighlight&&this._envMode==c.Editor?(this._meshOver&&this._meshOver instanceof BABYLON.Mesh&&!this.isMeshSelected(this._meshOver)&&(e&&this._highlightOver?(this._highlightLayer||this.createHighlightLayer(),this._highlightLayer&&!this._highlightLayer.hasMesh(this._meshOver)&&this._highlightLayer.addMesh(this._meshOver,BABYLON.Color3.FromHexString(this.highlightOverColor))):this._highlightLayer&&this._highlightLayer.removeMesh(this._meshOver)),this.setLongRenderingNeeded()):this.deleteHighlightLayer()}showHideEditControl(e){this._scene&&this._camera&&this._canvas&&(this._editControlVisible=e,this._editControl&&(!e||null==this._manipulatedNode)&&(this._editControl.detach(),this._editControl=null),e&&this._manipulatedNode&&(this._editControl?this._editControl.switchTo(this._manipulatedNode):(this._editControl=new this._EditControl(this._manipulatedNode,this._camera,this._canvas,.75,!0),this._editControl.setRotSnapValue(3.14/18),this._editControl.setTransSnapValue(.5),this._editControl.setScaleSnapValue(.25),this._editControl.addActionEndListener(e=>{this.fireMeshesUpdateEvent()})),this.setEditingMode(this._editingMode)),this.setRenderingNeeded())}setEditingMode(e){this._editingMode=e,this._editControl&&(e===h.Translate?this._editControl.enableTranslation():e===h.Rotate?this._editControl.enableRotation():e===h.Scaling&&this._editControl.enableScaling()),this.setRenderingNeeded()}undoEditing(){this._editControl&&this._editControl.undo()}redoEditing(){this._editControl&&this._editControl.redo()}setEnvironmentMode(e){e!=this._envMode&&(this._envMode=e,this.refreshEnvironment())}async refreshEnvironment(){this._scene&&(this.setRenderingNeeded(),this._envMode==c.Editor?(this.disableAntialiasing(),this.resetEditorEnvironment(),this._environmentManager&&(this._environmentManager.dispose(),this._environmentManager=null)):(this.deleteHighlightLayer(),this.refreshGround(),this._zkScene&&((!this._environmentManager||this._environmentManager.scene!=this._scene)&&(this._environmentManager=new pi(this._zkScene,this._scene)),this._environmentManager.update(),this.setLongRenderingNeeded())),this.refreshGround(),this._lightsLayer&&this._lightsLayer.refresh(),this._axesLayer&&this._axesLayer.refresh(),this._camera&&this._camera instanceof BABYLON.ArcRotateCamera&&(this.autoRender=this._camera.useAutoRotationBehavior),this.setRenderingNeeded())}zoomOnMesh(e){this._sceneHelper&&this._sceneHelper.zoomOnMesh(e)}moveCameraToMeshPosition(e){if(this._scene&&this._sceneHelper&&this._camera&&this._camera instanceof BABYLON.ArcRotateCamera){const n=this._sceneHelper.getMeshHierarchyCenter(e),r=this._camera.target,i=this._camera.radius,s=n.subtract(r),a=s.length();if(isFinite(a)){let n=s.normalize(),a=r.add(n.scale(i));const o=new BABYLON.Ray(a,n.scale(-1),i),l=this._scene.pickWithRay(o,t=>t===e);if(l&&l.hit){const s=new BABYLON.Vector3,o=new BABYLON.Quaternion,u=new BABYLON.Vector3;e.getWorldMatrix().decompose(s,o,u),s.length(),l.pickedPoint;var t=l.getNormal();t&&(n=t.normalize(),a=r.add(n.scale(i)))}this._sceneHelper.animateCamera(r,a,1)}this.setRenderingNeeded()}}exportMeshToOBJ(e){if(!this._scene)return;const t=this._scene.getMeshByID(e);if(!t||!(t instanceof BABYLON.Mesh))return;const n=BABYLON.OBJExport.OBJ([t]);this.saveTextAsFile(n,t.name+".obj")}exportMeshGeometryToJson(e){if(!this._scene)return;const t=this._scene.getMeshByID(e);if(!t||!(t instanceof BABYLON.Mesh))return;const n={positions:t.getVerticesData(BABYLON.VertexBuffer.PositionKind),normals:t.getVerticesData(BABYLON.VertexBuffer.NormalKind),colors:t.getVerticesData(BABYLON.VertexBuffer.ColorKind),uvs:t.getVerticesData(BABYLON.VertexBuffer.UVKind),uvs2:t.getVerticesData(BABYLON.VertexBuffer.UV2Kind),indices:t.getIndices()},r=JSON.stringify(n,null,0);this.saveTextAsFile(r,t.name+".json")}enableDisableARForMesh(e,t){const n=this.getMeshByID(e);n&&(n.metadata||(n.metadata={}),n.metadata.AR=t)}isAREnabledForMesh(e){const t=this.getMeshByID(e);return!(!t||!t.metadata)&&(void 0===t.metadata.AR||t.metadata.AR)}enableDisableTryOnForMesh(e,t){const n=this.getMeshByID(e);n&&(n.metadata||(n.metadata={}),n.metadata.AR=t)}isTryOnEnabledForMesh(e){const t=this.getMeshByID(e);return!(!t||!t.metadata)&&(void 0===t.metadata.TryOn||t.metadata.TryOn)}splitSubMeshes(e){if(this._scene&&this._sceneHelper){const t=this._scene.getMeshByID(e);t&&this._sceneHelper.createMeshesFromSubMeshes(t)}}flipMeshFaces(e){const t=this.getMeshByID(e);if(!t)return;const n=e=>{e instanceof BABYLON.Mesh&&e.flipFaces(!0),e.getChildMeshes().forEach(e=>n(e))};n(t)}convertSceneToScreenPoint(e,t){if(this._canvas){let n=0,r=0,i=this._canvas;do{n+=i.offsetLeft,r+=i.offsetTop,i=i.offsetParent}while(i);return{X:e+n,Y:t+r}}return null}saveTextAsFile(e,t){const n=new Blob([e],{type:"text/plain"}),r=window.URL.createObjectURL(n),i=t;this.downloadFile(i,r)}saveBytesAsFile(e,t){const n=new Blob([e]),r=window.URL.createObjectURL(n);this.downloadFile(t,r)}saveBlobAsFile(e,t,n){let r=null;r=n?window.URL.createObjectURL(new Blob([e],{type:n})):window.URL.createObjectURL(new Blob([e])),this.downloadFile(t,r)}downloadFile(e,t){var n=document.createElement("a");n.download=e,n.innerHTML="Download File",n.href=t,n.onclick=e=>{document.body.removeChild(n)},n.style.display="none",document.body.appendChild(n),n.click()}exportDracoEncodedToFile(e){if(!this._scene)return;const t=this._scene.getMeshByID(e);if(!t)return;const n=this.getDracoEncodedGeometry(t);n&&this.saveBytesAsFile(n,t.name+"_draco.dat")}getDracoEncodedGeometry(e){let t=null;if(this._scene&&e&&e instanceof BABYLON.Mesh){const r=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),i=e.getVerticesData(BABYLON.VertexBuffer.NormalKind),s=e.getVerticesData(BABYLON.VertexBuffer.ColorKind),a=e.getVerticesData(BABYLON.VertexBuffer.UVKind),o=e.getVerticesData(BABYLON.VertexBuffer.UV2Kind),l=e.getIndices(),u={};l&&(u.indices=new Uint32Array(l)),r&&(u.positions=new Float32Array(r)),i&&(u.normals=new Float32Array(i)),a&&(u.uvs=new Float32Array(a)),o&&(u.uvs2=new Float32Array(o)),s&&(u.colors=new Uint32Array(s));const c=DracoEncoderModule(),h=new c.Encoder,d=new c.MeshBuilder,f=new c.Mesh,p=u.indices.length/3,g=u.positions.length/3;d.AddFacesToMesh(f,p,u.indices),d.AddFloatAttributeToMesh(f,c.POSITION,g,3,u.positions),u.normals&&d.AddFloatAttributeToMesh(f,c.NORMAL,g,3,u.normals),u.colors&&d.AddFloatAttributeToMesh(f,c.COLOR,g,4,u.colors),u.uvs&&d.AddFloatAttributeToMesh(f,c.TEX_COORD,g,2,u.uvs),u.uvs2&&d.AddFloatAttributeToMesh(f,c.TEX_COORD,g,2,u.uvs2),h.SetSpeedOptions(5,5),h.SetAttributeQuantization(c.POSITION,14),h.SetAttributeQuantization(c.TEX_COORD,12),h.SetAttributeQuantization(c.NORMAL,10),h.SetAttributeQuantization(c.COLOR,10),h.SetAttributeQuantization(c.GENERIC,8),h.SetEncodingMethod(c.MESH_EDGEBREAKER_ENCODING);const m=new c.DracoInt8Array,v=h.EncodeMeshToDracoBuffer(f,m);t=new ArrayBuffer(v);var n=new Int8Array(t);for(let e=0;e<v;++e)n[e]=m.GetValue(e);c.destroy(f),c.destroy(m),c.destroy(h),c.destroy(d)}return t}createCustomMesh(){let e=null;if(this._scene){e=new BABYLON.Mesh("custom",this._scene);var t=[-5,2,-3,-7,-2,-3,-3,-2,-3,5,2,3,7,-2,3,3,-2,3],n=[0,1,2,3,4,5],r=[];BABYLON.VertexData.ComputeNormals(t,n,r);const i=new BABYLON.VertexData;i.positions=t,i.indices=n,i.colors=[1,0,0,1,1,0,0,1,1,0,0,1,0,1,0,0,0,1,1,0,0,1,0,1],i.normals=r,i.uvs=[0,1,0,0,1,0],i.applyToMesh(e)}return e}createBox(e,t){let n=null,r=null;return this._scene&&this._sceneHelper&&(e&&(r=this._scene.getMeshByID(e)),n=this._sceneHelper.createBox(r,t),this.setLongRenderingNeeded()),n}getSceneBoundingBox(){let e=null;if(this._scene)for(let t=0;t<this._scene.meshes.length;t++){const n=this._scene.meshes[t];if(n&&n.metadata&&n.metadata.sceneBoundingBox){e=n;break}}return e}getOrCreateSceneBoundingBox(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getSceneBoundingBox();return t||(t=this.createBoundingBox(null,"SceneBoundingBox",e),t&&(t.metadata||(t.metadata={}),t.metadata.boundingBox=!0,t.metadata.sceneBoundingBox=!0)),t}createSceneBoundingBox(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getSceneBoundingBox();return t?t.isVisible=e:(t=this.createBoundingBox(null,"SceneBoundingBox",e),t&&(t.metadata||(t.metadata={}),t.metadata.boundingBox=!0,t.metadata.sceneBoundingBox=!0)),t}createBoundingBox(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;if(e&&(r=this.getMeshByID(e)),this._sceneHelper){var i=this._sceneHelper.createBoundingBox(r,t);return i&&(i.isVisible=n),this.setLongRenderingNeeded(),i}return null}createSphere(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createSphere(r,t),this.setLongRenderingNeeded()),n}createPlane(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createPlane(r,t),this.setLongRenderingNeeded()),n}createDisc(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createDisc(r,t),this.setLongRenderingNeeded()),n}createCylinder(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createCylinder(r,t),this.setLongRenderingNeeded()),n}createTorus(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createTorus(r,t),this.setLongRenderingNeeded()),n}createKnot(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createKnot(r,t),this.setLongRenderingNeeded()),n}createRibbon(e,t){let n=null,r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=this._sceneHelper.createRibbon(r,t),this.setLongRenderingNeeded()),n}async createRoundedCubeAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createRoundedCubeAsync(r,t),this.setLongRenderingNeeded()),n}async createRoundedCylinderAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createRoundedCylinderAsync(r,t),this.setLongRenderingNeeded()),n}async createMatBallAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createMatBallAsync(r,t),this.setLongRenderingNeeded()),n}async createMaleHeadAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createMaleHeadAsync(r,t),this.setLongRenderingNeeded()),n}async createFemaleHeadAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createFemaleHeadAsync(r,t),this.setLongRenderingNeeded()),n}async createPokemonBallAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createPokemonBallAsync(r,t),this.setLongRenderingNeeded()),n}async createShaderBallAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createShaderBallAsync(r,t),this.setLongRenderingNeeded()),n}async createBootsAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createBootsAsync(r,t),this.setLongRenderingNeeded()),n}async createSuzanneAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createSuzanneAsync(r,t),this.setLongRenderingNeeded()),n}async createStepPyramidAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createStepPyramidAsync(r,t),this.setLongRenderingNeeded()),n}async createTeapotAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createTeapotAsync(r,t),this.setLongRenderingNeeded()),n}async createAlloyWheelAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createAlloyWheelAsync(r,t),this.setLongRenderingNeeded()),n}async createTryonReferenceGlassesFrameAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.createTryonReferenceGlassesFrameAsync(r,t),this.setLongRenderingNeeded()),n}removeAllVTOReferenceMeshes(){if(!this.scene)return[];const e=[],t=[...this.scene.meshes];for(const n of t)n.name&&n.name.toLowerCase().includes("vto_reference")?n.dispose(!1,!0):e.push(n);return e}hideAllVTOFiles(e){for(const t of e)t.name&&t.name.toLowerCase().includes("vto_reference")&&(t.metadata||(t.metadata={}),t.metadata.TryOn=!1)}async createTryOnReferenceModelsAsync(e,t,n){let r=null,i=[];return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(i=await this._sceneHelper.createTryOnReferenceModelsAsync(r,t,n),this.fireMeshesUpdateEvent(),this.setRenderingNeeded(),this.hideAllVTOFiles(i)),i}setTryOnReferenceVisible(e){this._sceneHelper&&(this._sceneHelper.setTryOnReferenceVisible(e),this.setRenderingNeeded())}isTryOnReferenceVisible(){return!!this._sceneHelper&&this._sceneHelper.isTryOnReferenceVisible()}scaleSceneToTryonReferenceModels(){var e;this._sceneHelper&&(this._sceneHelper.scaleSceneToTryonReferenceModels(),null==(e=this._sceneHelper)||e.setupShadows(this._zkScene),this.setRenderingNeeded())}getSceneScalingPercentageForVTO(){return this._sceneHelper?this._sceneHelper.getSceneScalingPercentageForVTO():100}setSceneScalePercentageForVTO(e){var t;this._sceneHelper&&(this._sceneHelper.setSceneScalePercentageForVTO(e),null==(t=this._sceneHelper)||t.setupShadows(this._zkScene),this.setRenderingNeeded())}getScenePositionPercentageForVTO(){return this._sceneHelper?this._sceneHelper.getScenePositionPercentageForVTO():{x:0,y:0,z:0}}setScenePositionPercentageForVTO(e,t,n){var r;this._sceneHelper&&(this._sceneHelper.setScenePositionPercentageForVTO(e,t,n),null==(r=this._sceneHelper)||r.setupShadows(this._zkScene),this.setRenderingNeeded())}getSceneRotationForVTO(){return this._sceneHelper?this._sceneHelper.getSceneRotationForVTO():{x:0,y:0,z:0}}setSceneRotationForVTO(e,t,n){var r;this._sceneHelper&&(this._sceneHelper.setSceneRotationForVTO(e,t,n),null==(r=this._sceneHelper)||r.setupShadows(this._zkScene),this.setRenderingNeeded())}setVTOReferenceVisible(e){this._sceneHelper&&(this._sceneHelper.setVTOReferenceVisible(e),this.setRenderingNeeded())}setShadowsVisibility(e){var t;this._sceneHelper&&(this._sceneHelper.setShadowsVisibility(e),null==(t=this._sceneHelper)||t.setupShadows(this._zkScene),this.setRenderingNeeded())}async importMeshesFromUrlAsync(e,t){let n=[],r=null;return this._scene&&e&&(r=this._scene.getMeshById(e)),this._sceneHelper&&(n=await this._sceneHelper.importMeshesFromUrlAsync(t,r),this.checkSceneEmptyEnvironmentTexture(),this.setLongRenderingNeeded()),n}async connectMeshToModelSideAsync(e,t,n){this._sceneDesignManager&&this._sceneDesignManager.connectMeshToModelSideAsync(e,t,n)}clearMeshDesignManagers(){this._sceneDesignManager&&this._sceneDesignManager.clearMeshDesignManagers()}getMeshDesignMananger(e,t){var n;return this._sceneDesignManager&&this.scene?null==(n=this._sceneDesignManager)?void 0:n.getMeshDesignMananger(e,t):null}translateDesignView(e,t,n,r){this._sceneDesignManager&&this._sceneDesignManager.translateDesignView(e,t,n,r)}rotateDesignView(e,t,n,r,i){this._sceneDesignManager&&this._sceneDesignManager.rotateDesignView(e,t,n,r,i)}scaleDesignView(e,t,n,r,i,s){this._sceneDesignManager&&this._sceneDesignManager.scaleDesignView(e,t,n,r,i,s)}async setDesignViewTextureUVChannelAsync(e,t,n){this._sceneDesignManager&&await this._sceneDesignManager.setDesignViewTextureUVChannelAsync(e,t,n)}async setDesignViewFormFactorAsync(e,t,n,r){this._sceneDesignManager&&await this._sceneDesignManager.setDesignViewFormFactorAsync(e,t,n,r)}getCurrentARMeshUsedForMeasure(){var e;return null==(e=this.scene)?void 0:e.meshes.find(e=>e.metadata&&e.metadata.sizecm)}getCurrentARSizeCm(){var e;const t=this.getCurrentARMeshUsedForMeasure();return null==(e=null==t?void 0:t.metadata)?void 0:e.sizecm}setSceneSizeCm(e,t){const n=this.getOrCreateSceneBoundingBox(!1);n&&this.setMeshSizeCm(n.id,e,t)}getSceneWidthCm(){const e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.width?e.metadata.sizecm.width:null}getSceneHeightCm(){const e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.height?e.metadata.sizecm.height:null}getSceneDepthCm(){const e=this.getSceneBoundingBox();return e&&e.metadata&&e.metadata.sizecm&&e.metadata.sizecm.depth?e.metadata.sizecm.depth:null}setMeshSizeCm(e,t,n){const r=this.getMeshByID(e);if(r){let e=null;t&&"number"==typeof t&&!isNaN(t)&&("width"===n?e={width:t}:"height"===n?e={height:t}:"depth"===n&&(e={depth:t})),r.metadata||(r.metadata={}),r.metadata.sizecm=e}}getMeshWidthCm(e){const t=this.getMeshByID(e);return t&&t.metadata&&t.metadata.sizecm&&t.metadata.sizecm.width?t.metadata.sizecm.width:null}getMeshHeightCm(e){const t=this.getMeshByID(e);return t&&t.metadata&&t.metadata.sizecm&&t.metadata.sizecm.height?t.metadata.sizecm.height:null}getMeshDepthCm(e){const t=this.getMeshByID(e);return t&&t.metadata&&t.metadata.sizecm&&t.metadata.sizecm.depth?t.metadata.sizecm.depth:null}async getMaterialsPreviewsAsync(e,t,n,r){const i=[];if(this._scene&&this._sceneHelper&&this._zkScene){const r=await this.getSceneRootUrl();if(r){const a=await Kr.getPreviewsAsync(this._scene,r,e,{width:t,height:n},!0);for(var s in a.previewFiles)i.push(a.previewFiles[s])}}return i}async getAllMaterialsPreviewsAsync(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this._scene&&this._sceneHelper&&this._zkScene){const i=this._sceneHelper.getAllMaterials().map(e=>e.id);return this.getMaterialsPreviewsAsync(i,e,t,n,r)}return[]}async downloadMaterialsPreviewsAsync(e,t,n,r){if(this._scene&&this._sceneHelper&&this._zkScene){const i=await this.getSceneRootUrl();i&&await Kr.downloadPreviewsAsync(this._scene,i,e,{width:t,height:n,crop:r})}}async downloadAllMaterialsPreviewsAsync(e,t,n){if(this._scene&&this._sceneHelper&&this._zkScene){const r=this._sceneHelper.getAllMaterials().map(e=>e.id);await this.downloadMaterialsPreviewsAsync(r,e,t,n)}}createEnvelopeMesh(e){if(this._scene&&this._sceneHelper){const t=this._scene.getMeshByID(e);if(t&&t instanceof BABYLON.Mesh)return this._sceneHelper.createEnvelopeMesh(t)}return null}expandMesh(e,t){if(this._scene&&this._sceneHelper){const n=this._scene.getMeshByID(e);n&&n instanceof BABYLON.Mesh&&this._sceneHelper.expandMesh(n,t)}}enableDisableMeshFacetData(e,t){if(this._scene&&this._sceneHelper){const n=this._scene.getMeshByID(e);n&&(t?n.updateFacetData():n.disableFacetData())}}enableDisableDepthSortFacets(e,t){if(this._scene&&this._sceneHelper){const n=this._scene.getMeshByID(e);n&&(n.mustDepthSortFacets=t)}}};ia.EmptyGroupName="_dummy_";let sa=ia;var aa=(e=>(e[e.Box=0]="Box",e[e.RoundedBox=1]="RoundedBox",e[e.Sphere=2]="Sphere",e[e.Plane=3]="Plane",e[e.Cylinder=4]="Cylinder",e[e.RoundedCylinder=5]="RoundedCylinder",e[e.Torus=6]="Torus",e[e.Knot=7]="Knot",e[e.Ribbon=8]="Ribbon",e[e.Custom=9]="Custom",e))(aa||{});class oa extends sa{constructor(e){super(e),this._zkMaterial=null,this._material=null,this._meshType=0,this._mesh=null,this._materialCreatedListeners=[],this._filesInput=null}get zkMaterial(){return this._zkMaterial}get material(){return this._material}static async createMaterialEditorAsync(e){e||(e={authorizationToken:"",showGround:!1,editorBackgroundColor:"#33334c",showHighlight:!1,incrementalWorkersScriptsUrls:[]});const t=new oa(e);return await t.initAsync(),t}deleteComponents(){super.deleteComponents(),this.deleteEditorMaterial(),this.deleteEditorMesh()}deleteEditorMaterial(){this._material&&(this._material.dispose(),this._material=null,this.fireMaterialCreatedEvent())}deleteEditorMesh(){this._mesh&&(this._mesh.dispose(),this._mesh=null),this._scene&&this._sceneHelper&&this._sceneHelper.getSceneMeshes().forEach(e=>e.dispose())}dispose(){super.dispose()}async createEmptySceneAsync(){await super.createEmptySceneAsync(),this.createEditorMaterial(void 0,"Standard"),await this.createEditorMeshAsync()}createEditorMaterial(e,t,n){let r=null;return"ShaderMaterial"!=t?r=super.createMaterial(e,t,n):(r=this.createShaderMaterial(),r&&(r.id=Zakeke.generateUUID(),this.checkSceneEmptyEnvironmentTexture())),this._material=r,this.setRenderingNeeded(),this.fireMaterialCreatedEvent(),r}applyEditorMaterial(){this._material&&this._mesh&&this.applyMaterial(this._material,this._mesh)}async replaceSceneAsync(e){var t=null,n=null;this._material&&this._zkMaterial&&(t=this._material.serialize(),n=this._zkMaterial.get("rootUrl")),this.deleteScene(),this._scene=e,await this.setupSceneAsync(),t&&n?(this._material=BABYLON.Material.Parse(t,this._scene,n),this.fireMaterialCreatedEvent()):this.createEditorMaterial(void 0,"Standard"),this.applyEditorMaterial(),this.adjustCamera(!1)}createShaderMaterial(){let e=null;if(this._scene&&this._zkMaterial&&this._zkMaterial.get("shaders")){const n=this._zkMaterial.get("name")||"ShaderMaterial - "+Zakeke.makeID(5);var t={vertex:this._zkMaterial.get("shaders").get("name"),fragment:this._zkMaterial.get("shaders").get("name")};const r={attributes:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Attribute),uniforms:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Uniform),samplers:this._zkMaterial.getShaderAttributeOptions(Zakeke.ShaderOptionType.Sampler)};e=new BABYLON.ShaderMaterial(n,this._scene,t,r),this.setupShaderMaterialCameraPosition(e)}return e}createEditorMaterialFromJson(e,t){if(this._scene){var n=JSON.parse(e);this._material=BABYLON.Material.Parse(n,this._scene,t),this._material&&this.setupShaderMaterialCameraPosition(this._material),this.checkSceneEmptyEnvironmentTexture(),this.fireMaterialCreatedEvent()}}async createEditorMeshAsync(){switch(this.deleteEditorMesh(),this._meshType){case 0:this._mesh=this.createBox(null,"box");break;case 1:{const e=await this.createRoundedCubeAsync(null,"rounded box");1==e.length?this._mesh=e[0]:this._mesh=this.createGroup(null,"rounded box group",e)}break;case 2:this._mesh=this.createSphere(null,"sphere");break;case 3:this._mesh=this.createPlane(null,"plane");break;case 4:this._mesh=this.createCylinder(null,"cylinder");break;case 5:{const e=await this.createRoundedCylinderAsync(null,"rounded cylinder");1==e.length?this._mesh=e[0]:(this._mesh=this.createGroup(null,"rounded cylinder group"),e.forEach(e=>e.parent=this._mesh))}break;case 6:this._mesh=this.createTorus(null,"torus");break;case 7:this._mesh=this.createKnot(null,"knot");break;case 8:this._mesh=this.createRibbon(null,"ribbon")}this.applyEditorMaterial(),this.adjustCamera(!1)}async setEditorMeshType(e){this._meshType=e,await this.createEditorMeshAsync()}async updateMaterialModelAsync(){if(this._zkMaterial&&this._material&&this._sceneHelper){const t=await this._sceneHelper.takeMaterialScreenshotAsync(this._material.id,500,450);this._zkMaterial.set("imageData",t);const n=this._zkMaterial.get("name");n&&n!=this._material.name&&(this._material.name=n);var e=this.getEditorMaterialJson();e&&this._zkMaterial.set("JSON",e)}}getEditorMaterialJson(){if(this._scene&&this._sceneHelper&&this._material){const t=this._sceneHelper;this._scene.textures.forEach(e=>{if(t.isTextureWithUrl(e)&&e.url){var n=e.url.lastIndexOf("/");if(-1!==n&&-1!==(n=e.url.lastIndexOf("/",n-1))&&-1!=(n=e.url.lastIndexOf("/",n-1))){var r=e.url.substring(n+1);e.name=r,e.url=e.name}}});var e=this._material.serialize();return JSON.stringify(e)}return null}setMaterialModel(e,t){if(this._zkMaterial=e,this.deleteEditorMaterial(),this._zkMaterial&&this._zkMaterial instanceof Zakeke.Material){const e=this._zkMaterial.get("shaders");if(e){const t=e.get("name"),n=e.get("vertex"),r=e.get("fragment");t&&n&&r&&this.setupShadersStore({name:t,vertex:n,fragment:r})}var n=this._zkMaterial.get("JSON"),r=this._zkMaterial.get("rootUrl");n&&r?this.createEditorMaterialFromJson(n,r):this.createEditorMaterial(this._zkMaterial.get("name")||void 0,t),this._material&&(this._material.id=this._zkMaterial.getMaterialID())}else this.createEditorMaterial(void 0,t);this.applyEditorMaterial(),this.adjustCamera(!1),this.setupShaderMaterialsCameraPosition()}getTexturesUploadUrl(e){return this._zkMaterial?this._zkMaterial.getTexturesUrl():""}loadEditorMaterialTextureFiles__(e,t,n,r){this.loadTextureFiles(e,this._material,t,!1,n,r)}loadEditorMaterialTextureFiles(e,t,n,r){if(!this._material)return;const i=e=>{let t=e.lastIndexOf(".");if(-1!==t)return e.substring(t)},s=(e,t)=>{const n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)};if(e&&0!=e.length){var a=this.canLoadCubemap(this._material,t)&&(6==e.length||".dds"==i(e[0].name)||".hdr"==i(e[0].name)),o=[];if(a&&6==e.length){var l=["px","py","pz","nx","ny","nz"];for(let t=0;t<e.length;t++){const n=e[t];let r=-1;for(var u=0;u<l.length;u++)if(s(n.name,l[u])){o.push(n),r=u;break}-1!==r&&l.splice(r,1)}if(0!=l.length){var c="Immagini per la cube map non valide";return r&&r(c),void Logger.info(c)}}else o.push(e[0]);var h=new FormData;for(let e=0;e<o.length;e++)h.append("file-"+e,o[e]);jQuery.ajax({url:this.getTexturesUploadUrl(this._material.id),data:h,cache:!1,contentType:!1,processData:!1,type:"POST",success:e=>{"[object Array]"===Object.prototype.toString.call(e)&&(a?this.setEditorMaterialCubeTextureImages(e,t):this.setEditorMaterialTextureImage(e[0],t)),n&&n()},error:(e,t,n)=>{r&&r("An error occurred: "+t+"nError: "+n)}})}}setEditorMaterialTextureImage(e,t){if(this._scene&&this._zkMaterial&&this._material&&e&&e.imageUrl&&e.fileObjectID){const n=new Zakeke.MaterialTextureImage;n.set("textureImageID",Zakeke.generateUUID()),n.set("fileObjectID",e.fileObjectID),n.set("imageUrl",e.imageUrl),this._zkMaterial.get("textureImages").push(n);const r=e.imageUrl,i=new BABYLON.Texture(r,this._scene),s=this.getMaterialTexture(this._material,t);s&&s instanceof BABYLON.Texture&&(i.uScale=s.uScale,i.vScale=s.vScale,i.uOffset=s.uOffset,i.vOffset=s.vOffset,i.uAng=s.uAng,i.vAng=s.vAng,i.level=s.level,i.coordinatesIndex=s.coordinatesIndex,i.coordinatesMode=s.coordinatesMode,i.hasAlpha=s.hasAlpha,i.wrapU=s.wrapU,i.wrapV=s.wrapV),this.applyTexture(i,this._material,t),s&&!this.isTextureUsed(s)&&s.dispose()}}setEditorMaterialCubeTextureImages(e,t){if(!this._scene||!this._zkMaterial||!this._material||"[object Array]"!=Object.prototype.toString.call(e))return;let n=null;const r=()=>this.setRenderingNeeded();if(1==e.length){let t=e[0];if(t.imageUrl&&t.fileObjectID){t.imageUrl.endsWith(".dds")?n=BABYLON.CubeTexture.CreateFromPrefilteredData(t.imageUrl,this._scene):t.imageUrl.endsWith(".hdr")&&(n=new BABYLON.HDRCubeTexture(t.imageUrl,this._scene,512,void 0,void 0,void 0,void 0,r));var i=new Zakeke.MaterialTextureImage;i.set("textureImageID",Zakeke.generateUUID()),i.set("fileObjectID",t.fileObjectID),i.set("imageUrl",t.imageUrl),this._zkMaterial.get("textureImages").push(i)}}else if(6==e.length){const t=["px","py","pz","nx","ny","nz"];let r="";const i=[],l=[],u=(e,t)=>{var n=e.lastIndexOf(".");return-1!==n&&e.substring(0,n).endsWith("_"+t)},c=(e,t)=>{const n=e.lastIndexOf(".");if(-1!==n){var r=e.substring(0,n);if(r.endsWith("_"+t))return r.substring(0,r.length-("_"+t).length)}return null},h=(e,t)=>{const n=e.lastIndexOf("_"+t);return-1!==n?e.substr(n):null};for(let n=0;n<t.length;n++){var s=t[n];for(let t=0;t<e.length;t++){const n=e[t].imageUrl;if(n&&u(n,s)){var a,o;i.push(n),l.push(null!==(a=h(n,s))&&void 0!==a?a:""),r||(r=null!==(o=c(n,s))&&void 0!==o?o:"");break}}}for(let n=0;n<e.length;n++){const t=e[n];if(t.imageUrl&&null!=t.fileObjectID){const e=t.imageUrl,n=t.fileObjectID,r=new Zakeke.MaterialTextureImage;r.set("textureImageID",Zakeke.generateUUID()),r.set("fileObjectID",n),r.set("imageUrl",e),this._zkMaterial.get("textureImages").push(r)}}n=new BABYLON.CubeTexture(r,this._scene,l,!1,i)}if(n){var l=this.getMaterialTexture(this._material,t);this.applyTexture(n,this._material,t),l&&!this.isTextureUsed(l)&&l.dispose()}}fireMaterialCreatedEvent(){for(let e=0;e<this._materialCreatedListeners.length;++e)this._materialCreatedListeners[e]()}addMaterialCreatedListener(e){this._materialCreatedListeners.push(e)}loadFiles(e,t,n){if(!this._engine||!this._scene||!this._sceneHelper)return;const r=this._engine,i=this._scene,s=this._sceneHelper;this._filesInput||(this._filesInput=new BABYLON.FilesInput(r,i,async(e,n)=>{await this.replaceSceneAsync(n);const r=s.getSceneMeshes();this._meshType=9,this._mesh=this.createGroup(null,"group",r),this.applyEditorMaterial(),t&&t()},null,null,null,null,null,(e,t,r)=>{n&&n(r)})),this._filesInput&&this._filesInput.loadFiles(e)}}const la={general:{backgroundAlpha:1,backgroundColor:"#ffffff",removeDefaultBackground:!0,environmentTexture:"https://3dviewer-img.stg.futurefashionsolution.com/ECOALF/Ecoalf-Sneaker-Red/environmentMap.hdr",matchSameNameTextures:null,antialiasEnabled:null,tryOnEnabled:null,tryOnSettings:null,arEnabled:!0,arOnTheFly:!1,arAnchor:null,arScale:null,meshSize:{height:null,width:null,depth:null},frameDAMSettings:null,useDelayedTextureLoading:null,useDelayedMaterialLoading:null,useMaterialOffloading:null,prefetchMeshes:null,prefetchMaterials:null,exposure:1,contrast:1,preventDefaultLights:!0,forceDracoCompression:null,fitToScreenMargin:1,environmentOptions:{mipMaps:!1,generateHarmonics:!1,gammaSpace:!0,prefilterOnLoad:!0,rotationY:1.57,intensity:1,pbrIntensity:1}},environment:{sizeAuto:null,mainColor:"#CB0E00",backgroundColor:"#5CA0B5",skybox:{createSkybox:!1,size:null,texture:null,extensions:null,files:null,color:null,blur:0},ground:{createGround:!1,size:null,texture:null,color:null,opacity:null,enableShadow:!1,shadowLevel:null,enableMirror:!0,mirrorBlurKernel:null},shadows:{enableShadows:!1,groundSizeMultiplierWidth:1.2,groundSizeMultiplierLength:1.5,shadowMapSize:51,shadowHexColor:"#454545",contactHardeningUVRatio:.4,useContactHardeningShadow:!0,useBlurCloseExponentialShadowMap:!1,usePercentageCloserFiltering:!1,useKernelBlur:!0,usePoissonSampling:!1,blurBoxOffset:10,blurScale:4,blurKernel:10,depthScale:1,shadowDarkness:.3}},camera:{autoRotate:!1,rotationSpeed:.2,changeRotationDirection:!1,contrast:1.6,exposure:.8,toneMappingEnabled:!1,toneMappingType:0,setInitialZoomToBoundingBox:!0,initialZoomToBBInertiaDamping:.9,initialZoomToBBModelSizeRadius:.7,initialZoomToBBScrollZoomEnabled:!0,initialZoomToBBScrollLowerLimit:2,initialZoomToBBScrollUpperLimit:2,positionScale:null,limitLowerRadius:!0,zoomEnabled:null,useMinZoomPerc:!0,minZoomPerc:.5,useMaxZoomPerc:!0,maxZoomPerc:1.5,lowerAlphaLimit:null,upperAlphaLimit:null,fixedAlphaAngle:null,fixedBetaAngle:null,useLowerAlphaLimit:null,lowerBetaLimit:0,upperBetaLimit:3,useLowerBetaLimit:null,useUpperAlphaLimit:null,useUpperBetaLimit:null,zoom:0,position:{alpha:1.57,beta:1.55,fov:.4},animateIntro:!1},model:{rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},config:{doubleSided:!1}},glow:null,infoPoints:null,uiConfig:{urlARIcon:"",urlLoader:""},lights:{directionalLightBack:{position:{x:-1,y:0,z:-1},general:{intensity:3,visible:!0}},directionalLightLeft:{position:{x:0,y:0,z:1},general:{intensity:1.2,visible:!0}},pointLightBack:{position:{x:1,y:.5,z:.5},general:{intensity:2,visible:!1}},pointLightFront:{position:{x:-1,y:.5,z:-.5},general:{intensity:2,visible:!1}},hemisphereLight:{position:{x:0,y:30.76964,z:0},general:{intensity:.5,visible:!1}}},textures:null,animations:{runAtStart:!0,loop:!0,speed:1}}},"./node_modules/axios/lib/adapters/adapters.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/null.js"),s=n("./node_modules/axios/lib/adapters/xhr.js"),a=n("./node_modules/axios/lib/core/AxiosError.js");const o={http:i.default,xhr:s.default};r.default.forEach(o,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const l={getAdapter:e=>{e=r.default.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let s=0;s<t&&(n=e[s],!(i=r.default.isString(n)?o[n.toLowerCase()]:n));s++);if(!i){if(!1===i)throw new a.default("Adapter ".concat(n," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(r.default.hasOwnProp(o,n)?"Adapter '".concat(n,"' is not available in the build"):"Unknown adapter '".concat(n,"'"))}if(!r.default.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:o}},"./node_modules/axios/lib/adapters/xhr.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/settle.js"),s=n("./node_modules/axios/lib/helpers/cookies.js"),a=n("./node_modules/axios/lib/helpers/buildURL.js"),o=n("./node_modules/axios/lib/core/buildFullPath.js"),l=n("./node_modules/axios/lib/helpers/isURLSameOrigin.js"),u=n("./node_modules/axios/lib/defaults/transitional.js"),c=n("./node_modules/axios/lib/core/AxiosError.js"),h=n("./node_modules/axios/lib/cancel/CanceledError.js"),d=n("./node_modules/axios/lib/helpers/parseProtocol.js"),f=n("./node_modules/axios/lib/platform/browser/index.js"),p=n("./node_modules/axios/lib/core/AxiosHeaders.js"),g=n("./node_modules/axios/lib/helpers/speedometer.js");function m(e,t){let n=0;const r=(0,g.default)(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-n,l=r(o);n=s;const u={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const v="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){let g=e.data;const v=p.default.from(e.headers).normalize(),_=e.responseType;let y;function b(){e.cancelToken&&e.cancelToken.unsubscribe(y),e.signal&&e.signal.removeEventListener("abort",y)}r.default.isFormData(g)&&(f.default.isStandardBrowserEnv||f.default.isStandardBrowserWebWorkerEnv)&&v.setContentType(!1);let x=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.set("Authorization","Basic "+btoa(t+":"+n))}const w=(0,o.default)(e.baseURL,e.url);function S(){if(!x)return;const r=p.default.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),s={data:_&&"text"!==_&&"json"!==_?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x};(0,i.default)(function(e){t(e),b()},function(e){n(e),b()},s),x=null}if(x.open(e.method.toUpperCase(),(0,a.default)(w,e.params,e.paramsSerializer),!0),x.timeout=e.timeout,"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(S)},x.onabort=function(){x&&(n(new c.default("Request aborted",c.default.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new c.default("Network Error",c.default.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||u.default;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new c.default(t,r.clarifyTimeoutError?c.default.ETIMEDOUT:c.default.ECONNABORTED,e,x)),x=null},f.default.isStandardBrowserEnv){const t=(e.withCredentials||(0,l.default)(w))&&e.xsrfCookieName&&s.default.read(e.xsrfCookieName);t&&v.set(e.xsrfHeaderName,t)}void 0===g&&v.setContentType(null),"setRequestHeader"in x&&r.default.forEach(v.toJSON(),function(e,t){x.setRequestHeader(t,e)}),r.default.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),_&&"json"!==_&&(x.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&x.addEventListener("progress",m(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&x.upload&&x.upload.addEventListener("progress",m(e.onUploadProgress)),(e.cancelToken||e.signal)&&(y=t=>{x&&(n(!t||t.type?new h.default(null,e,x):t),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(y),e.signal&&(e.signal.aborted?y():e.signal.addEventListener("abort",y)));const C=(0,d.default)(w);C&&-1===f.default.protocols.indexOf(C)?n(new c.default("Unsupported protocol "+C+":",c.default.ERR_BAD_REQUEST,e)):x.send(g||null)})}},"./node_modules/axios/lib/axios.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/bind.js"),s=n("./node_modules/axios/lib/core/Axios.js"),a=n("./node_modules/axios/lib/core/mergeConfig.js"),o=n("./node_modules/axios/lib/defaults/index.js"),l=n("./node_modules/axios/lib/helpers/formDataToJSON.js"),u=n("./node_modules/axios/lib/cancel/CanceledError.js"),c=n("./node_modules/axios/lib/cancel/CancelToken.js"),h=n("./node_modules/axios/lib/cancel/isCancel.js"),d=n("./node_modules/axios/lib/env/data.js"),f=n("./node_modules/axios/lib/helpers/toFormData.js"),p=n("./node_modules/axios/lib/core/AxiosError.js"),g=n("./node_modules/axios/lib/helpers/spread.js"),m=n("./node_modules/axios/lib/helpers/isAxiosError.js"),v=n("./node_modules/axios/lib/core/AxiosHeaders.js"),_=n("./node_modules/axios/lib/helpers/HttpStatusCode.js");const y=function e(t){const n=new s.default(t),o=(0,i.default)(s.default.prototype.request,n);return r.default.extend(o,s.default.prototype,n,{allOwnKeys:!0}),r.default.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e((0,a.default)(t,n))},o}(o.default);y.Axios=s.default,y.CanceledError=u.default,y.CancelToken=c.default,y.isCancel=h.default,y.VERSION=d.VERSION,y.toFormData=f.default,y.AxiosError=p.default,y.Cancel=y.CanceledError,y.all=function(e){return Promise.all(e)},y.spread=g.default,y.isAxiosError=m.default,y.mergeConfig=a.default,y.AxiosHeaders=v.default,y.formToJSON=e=>(0,l.default)(r.default.isHTMLForm(e)?new FormData(e):e),y.HttpStatusCode=_.default,y.default=y;const b=y},"./node_modules/axios/lib/cancel/CancelToken.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/axios/lib/cancel/CanceledError.js");class i{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,i,s){n.reason||(n.reason=new r.default(e,i,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new i(function(t){e=t}),cancel:e}}}const s=i},"./node_modules/axios/lib/cancel/CanceledError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/axios/lib/core/AxiosError.js");function i(e,t,n){r.default.call(this,null==e?"canceled":e,r.default.ERR_CANCELED,t,n),this.name="CanceledError"}n("./node_modules/axios/lib/utils.js").default.inherits(i,r.default,{__CANCEL__:!0});const s=i},"./node_modules/axios/lib/cancel/isCancel.js":(e,t,n)=>{"use strict";function r(e){return!(!e||!e.__CANCEL__)}n.r(t),n.d(t,{default:()=>r})},"./node_modules/axios/lib/core/Axios.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/buildURL.js"),s=n("./node_modules/axios/lib/core/InterceptorManager.js"),a=n("./node_modules/axios/lib/core/dispatchRequest.js"),o=n("./node_modules/axios/lib/core/mergeConfig.js"),l=n("./node_modules/axios/lib/core/buildFullPath.js"),u=n("./node_modules/axios/lib/helpers/validator.js"),c=n("./node_modules/axios/lib/core/AxiosHeaders.js");const h=u.default.validators;class d{constructor(e){this.defaults=e,this.interceptors={request:new s.default,response:new s.default}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=(0,o.default)(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;let l;void 0!==n&&u.default.assertOptions(n,{silentJSONParsing:h.transitional(h.boolean),forcedJSONParsing:h.transitional(h.boolean),clarifyTimeoutError:h.transitional(h.boolean)},!1),null!=i&&(r.default.isFunction(i)?t.paramsSerializer={serialize:i}:u.default.assertOptions(i,{encode:h.function,serialize:h.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),l=s&&r.default.merge(s.common,s[t.method]),l&&r.default.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=c.default.concat(l,s);const d=[];let f=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(f=f&&e.synchronous,d.unshift(e.fulfilled,e.rejected))});const p=[];let g;this.interceptors.response.forEach(function(e){p.push(e.fulfilled,e.rejected)});let m,v=0;if(!f){const e=[a.default.bind(this),void 0];for(e.unshift.apply(e,d),e.push.apply(e,p),m=e.length,g=Promise.resolve(t);v<m;)g=g.then(e[v++],e[v++]);return g}m=d.length;let _=t;for(v=0;v<m;){const e=d[v++],t=d[v++];try{_=e(_)}catch(y){t.call(this,y);break}}try{g=a.default.call(this,_)}catch(y){return Promise.reject(y)}for(v=0,m=p.length;v<m;)g=g.then(p[v++],p[v++]);return g}getUri(e){e=(0,o.default)(this.defaults,e);const t=(0,l.default)(e.baseURL,e.url);return(0,i.default)(t,e.params,e.paramsSerializer)}}r.default.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(t,n){return this.request((0,o.default)(n||{},{method:e,url:t,data:(n||{}).data}))}}),r.default.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request((0,o.default)(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)});const f=d},"./node_modules/axios/lib/core/AxiosError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/axios/lib/utils.js");function i(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.default.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:r.default.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const s=i.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{a[e]={value:e}}),Object.defineProperties(i,a),Object.defineProperty(s,"isAxiosError",{value:!0}),i.from=(e,t,n,a,o,l)=>{const u=Object.create(s);return r.default.toFlatObject(e,u,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),i.call(u,e.message,t,n,a,o),u.cause=e,u.name=e.name,l&&Object.assign(u,l),u};const o=i},"./node_modules/axios/lib/core/AxiosHeaders.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/parseHeaders.js");const s=Symbol("internals");function a(e){return e&&String(e).trim().toLowerCase()}function o(e){return!1===e||null==e?e:r.default.isArray(e)?e.map(o):String(e)}function l(e,t,n,i,s){return r.default.isFunction(i)?i.call(this,t,n):(s&&(t=n),r.default.isString(t)?r.default.isString(i)?-1!==t.indexOf(i):r.default.isRegExp(i)?i.test(t):void 0:void 0)}class u{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function l(e,t,n){const i=a(t);if(!i)throw new Error("header name must be a non-empty string");const l=r.default.findKey(s,i);(!l||void 0===s[l]||!0===n||void 0===n&&!1!==s[l])&&(s[l||t]=o(e))}const u=(e,t)=>r.default.forEach(e,(e,n)=>l(e,n,t));return r.default.isPlainObject(e)||e instanceof this.constructor?u(e,t):r.default.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?u((0,i.default)(e),t):null!=e&&l(t,e,n),this}get(e,t){if(e=a(e)){const n=r.default.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(r.default.isFunction(t))return t.call(this,e,n);if(r.default.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=a(e)){const n=r.default.findKey(this,e);return!(!n||void 0===this[n]||t&&!l(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function s(e){if(e=a(e)){const s=r.default.findKey(n,e);!s||t&&!l(0,n[s],s,t)||(delete n[s],i=!0)}}return r.default.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!l(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return r.default.forEach(this,(i,s)=>{const a=r.default.findKey(n,s);if(a)return t[a]=o(i),void delete t[s];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();l!==s&&delete t[s],t[l]=o(i),n[l]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return r.default.forEach(this,(n,i)=>{null!=n&&!1!==n&&(t[i]=e&&r.default.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[s]=this[s]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=a(e);t[i]||(function(e,t){const n=r.default.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[i]=!0)}return r.default.isArray(e)?e.forEach(i):i(e),this}}u.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),r.default.freezeMethods(u.prototype),r.default.freezeMethods(u);const c=u},"./node_modules/axios/lib/core/InterceptorManager.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/utils.js");const i=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){r.default.forEach(this.handlers,function(t){null!==t&&e(t)})}}},"./node_modules/axios/lib/core/buildFullPath.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/axios/lib/helpers/isAbsoluteURL.js"),i=n("./node_modules/axios/lib/helpers/combineURLs.js");function s(e,t){return e&&!(0,r.default)(t)?(0,i.default)(e,t):t}},"./node_modules/axios/lib/core/dispatchRequest.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n("./node_modules/axios/lib/core/transformData.js"),i=n("./node_modules/axios/lib/cancel/isCancel.js"),s=n("./node_modules/axios/lib/defaults/index.js"),a=n("./node_modules/axios/lib/cancel/CanceledError.js"),o=n("./node_modules/axios/lib/core/AxiosHeaders.js"),l=n("./node_modules/axios/lib/adapters/adapters.js");function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a.default(null,e)}function c(e){return u(e),e.headers=o.default.from(e.headers),e.data=r.default.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),l.default.getAdapter(e.adapter||s.default.adapter)(e).then(function(t){return u(e),t.data=r.default.call(e,e.transformResponse,t),t.headers=o.default.from(t.headers),t},function(t){return(0,i.default)(t)||(u(e),t&&t.response&&(t.response.data=r.default.call(e,e.transformResponse,t.response),t.response.headers=o.default.from(t.response.headers))),Promise.reject(t)})}},"./node_modules/axios/lib/core/mergeConfig.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/AxiosHeaders.js");const s=e=>e instanceof i.default?e.toJSON():e;function a(e,t){t=t||{};const n={};function i(e,t,n){return r.default.isPlainObject(e)&&r.default.isPlainObject(t)?r.default.merge.call({caseless:n},e,t):r.default.isPlainObject(t)?r.default.merge({},t):r.default.isArray(t)?t.slice():t}function a(e,t,n){return r.default.isUndefined(t)?r.default.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function o(e,t){if(!r.default.isUndefined(t))return i(void 0,t)}function l(e,t){return r.default.isUndefined(t)?r.default.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function u(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(e,t)=>a(s(e),s(t),!0)};return r.default.forEach(Object.keys(e).concat(Object.keys(t)),function(i){const s=c[i]||a,o=s(e[i],t[i],i);r.default.isUndefined(o)&&s!==u||(n[i]=o)}),n}},"./node_modules/axios/lib/core/settle.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/core/AxiosError.js");function i(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r.default("Request failed with status code "+n.status,[r.default.ERR_BAD_REQUEST,r.default.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},"./node_modules/axios/lib/core/transformData.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/defaults/index.js"),s=n("./node_modules/axios/lib/core/AxiosHeaders.js");function a(e,t){const n=this||i.default,a=t||n,o=s.default.from(a.headers);let l=a.data;return r.default.forEach(e,function(e){l=e.call(n,l,o.normalize(),t?t.status:void 0)}),o.normalize(),l}},"./node_modules/axios/lib/defaults/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/AxiosError.js"),s=n("./node_modules/axios/lib/defaults/transitional.js"),a=n("./node_modules/axios/lib/helpers/toFormData.js"),o=n("./node_modules/axios/lib/helpers/toURLEncodedForm.js"),l=n("./node_modules/axios/lib/platform/browser/index.js"),u=n("./node_modules/axios/lib/helpers/formDataToJSON.js");const c={"Content-Type":void 0},h={transitional:s.default,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=r.default.isObject(e);if(s&&r.default.isHTMLForm(e)&&(e=new FormData(e)),r.default.isFormData(e))return i&&i?JSON.stringify((0,u.default)(e)):e;if(r.default.isArrayBuffer(e)||r.default.isBuffer(e)||r.default.isStream(e)||r.default.isFile(e)||r.default.isBlob(e))return e;if(r.default.isArrayBufferView(e))return e.buffer;if(r.default.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return(0,o.default)(e,this.formSerializer).toString();if((l=r.default.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return(0,a.default)(l?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,n){if(r.default.isString(e))try{return(t||JSON.parse)(e),r.default.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||h.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(e&&r.default.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(n){if("SyntaxError"===a.name)throw i.default.from(a,i.default.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:l.default.classes.FormData,Blob:l.default.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.default.forEach(["delete","get","head"],function(e){h.headers[e]={}}),r.default.forEach(["post","put","patch"],function(e){h.headers[e]=r.default.merge(c)});const d=h},"./node_modules/axios/lib/defaults/transitional.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},"./node_modules/axios/lib/env/data.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{VERSION:()=>r});const r="1.3.6"},"./node_modules/axios/lib/helpers/AxiosURLSearchParams.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/axios/lib/helpers/toFormData.js");function i(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function s(e,t){this._pairs=[],e&&(0,r.default)(e,this,t)}const a=s.prototype;a.append=function(e,t){this._pairs.push([e,t])},a.toString=function(e){const t=e?function(t){return e.call(this,t,i)}:i;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const o=s},"./node_modules/axios/lib/helpers/HttpStatusCode.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(r).forEach(e=>{let[t,n]=e;r[n]=t});const i=r},"./node_modules/axios/lib/helpers/bind.js":(e,t,n)=>{"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/axios/lib/helpers/buildURL.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/AxiosURLSearchParams.js");function s(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function a(e,t,n){if(!t)return e;const a=n&&n.encode||s,o=n&&n.serialize;let l;if(l=o?o(t,n):r.default.isURLSearchParams(t)?t.toString():new i.default(t,n).toString(a),l){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}},"./node_modules/axios/lib/helpers/combineURLs.js":(e,t,n)=>{"use strict";function r(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}n.r(t),n.d(t,{default:()=>r})},"./node_modules/axios/lib/helpers/cookies.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/utils.js");const i=n("./node_modules/axios/lib/platform/browser/index.js").default.isStandardBrowserEnv?{write:function(e,t,n,i,s,a){const o=[];o.push(e+"="+encodeURIComponent(t)),r.default.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.default.isString(i)&&o.push("path="+i),r.default.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},"./node_modules/axios/lib/helpers/formDataToJSON.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/utils.js");const i=function(e){function t(e,n,i,s){let a=e[s++];const o=Number.isFinite(+a),l=s>=e.length;return a=!a&&r.default.isArray(i)?i.length:a,l?(r.default.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):(i[a]&&r.default.isObject(i[a])||(i[a]=[]),t(e,n,i[a],s)&&r.default.isArray(i[a])&&(i[a]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(i[a])),!o)}if(r.default.isFormData(e)&&r.default.isFunction(e.entries)){const n={};return r.default.forEachEntry(e,(e,i)=>{t(function(e){return r.default.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),i,n,0)}),n}return null}},"./node_modules/axios/lib/helpers/isAbsoluteURL.js":(e,t,n)=>{"use strict";function r(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}n.r(t),n.d(t,{default:()=>r})},"./node_modules/axios/lib/helpers/isAxiosError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/utils.js");function i(e){return r.default.isObject(e)&&!0===e.isAxiosError}},"./node_modules/axios/lib/helpers/isURLSameOrigin.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/utils.js");const i=n("./node_modules/axios/lib/platform/browser/index.js").default.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=r.default.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0}},"./node_modules/axios/lib/helpers/null.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=null},"./node_modules/axios/lib/helpers/parseHeaders.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const r=n("./node_modules/axios/lib/utils.js").default.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),i=e=>{const t={};let n,i,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!n||t[n]&&r[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t}},"./node_modules/axios/lib/helpers/parseProtocol.js":(e,t,n)=>{"use strict";function r(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}n.r(t),n.d(t,{default:()=>r})},"./node_modules/axios/lib/helpers/speedometer.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),u=r[a];i||(i=l),n[s]=o,r[s]=l;let c=a,h=0;for(;c!==s;)h+=n[c++],c%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const d=u&&l-u;return d?Math.round(1e3*h/d):void 0}}},"./node_modules/axios/lib/helpers/spread.js":(e,t,n)=>{"use strict";function r(e){return function(t){return e.apply(null,t)}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/axios/lib/helpers/toFormData.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/core/AxiosError.js"),s=n("./node_modules/axios/lib/helpers/null.js");function a(e){return r.default.isPlainObject(e)||r.default.isArray(e)}function o(e){return r.default.endsWith(e,"[]")?e.slice(0,-2):e}function l(e,t,n){return e?e.concat(t).map(function(e,t){return e=o(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const u=r.default.toFlatObject(r.default,{},null,function(e){return/^is[A-Z]/.test(e)}),c=function(e,t,n){if(!r.default.isObject(e))throw new TypeError("target must be an object");t=t||new(s.default||FormData);const c=(n=r.default.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!r.default.isUndefined(t[e])})).metaTokens,h=n.visitor||m,d=n.dots,f=n.indexes,p=(n.Blob||"undefined"!==typeof Blob&&Blob)&&r.default.isSpecCompliantForm(t);if(!r.default.isFunction(h))throw new TypeError("visitor must be a function");function g(e){if(null===e)return"";if(r.default.isDate(e))return e.toISOString();if(!p&&r.default.isBlob(e))throw new i.default("Blob is not supported. Use a Buffer instead.");return r.default.isArrayBuffer(e)||r.default.isTypedArray(e)?p&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function m(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(r.default.endsWith(n,"{}"))n=c?n:n.slice(0,-2),e=JSON.stringify(e);else if(r.default.isArray(e)&&function(e){return r.default.isArray(e)&&!e.some(a)}(e)||(r.default.isFileList(e)||r.default.endsWith(n,"[]"))&&(s=r.default.toArray(e)))return n=o(n),s.forEach(function(e,i){!r.default.isUndefined(e)&&null!==e&&t.append(!0===f?l([n],i,d):null===f?n:n+"[]",g(e))}),!1;return!!a(e)||(t.append(l(i,n,d),g(e)),!1)}const v=[],_=Object.assign(u,{defaultVisitor:m,convertValue:g,isVisitable:a});if(!r.default.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!r.default.isUndefined(n)){if(-1!==v.indexOf(n))throw Error("Circular reference detected in "+i.join("."));v.push(n),r.default.forEach(n,function(n,s){!0===(!(r.default.isUndefined(n)||null===n)&&h.call(t,n,r.default.isString(s)?s.trim():s,i,_))&&e(n,i?i.concat(s):[s])}),v.pop()}}(e),t}},"./node_modules/axios/lib/helpers/toURLEncodedForm.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/axios/lib/utils.js"),i=n("./node_modules/axios/lib/helpers/toFormData.js"),s=n("./node_modules/axios/lib/platform/browser/index.js");function a(e,t){return(0,i.default)(e,new s.default.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return s.default.isNode&&r.default.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}},"./node_modules/axios/lib/helpers/validator.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/axios/lib/env/data.js"),i=n("./node_modules/axios/lib/core/AxiosError.js");const s={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{s[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const a={};s.transitional=function(e,t,n){function s(e,t){return"[Axios v"+r.VERSION+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,o)=>{if(!1===e)throw new i.default(s(r," has been removed"+(t?" in "+t:"")),i.default.ERR_DEPRECATED);return t&&!a[r]&&(a[r]=!0,console.warn(s(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}};const o={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i.default("options must be an object",i.default.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],o=t[a];if(o){const t=e[a],n=void 0===t||o(t,a,e);if(!0!==n)throw new i.default("option "+a+" must be "+n,i.default.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new i.default("Unknown option "+a,i.default.ERR_BAD_OPTION)}},validators:s}},"./node_modules/axios/lib/platform/browser/classes/Blob.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r="undefined"!==typeof Blob?Blob:null},"./node_modules/axios/lib/platform/browser/classes/FormData.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r="undefined"!==typeof FormData?FormData:null},"./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/axios/lib/helpers/AxiosURLSearchParams.js");const i="undefined"!==typeof URLSearchParams?URLSearchParams:r.default},"./node_modules/axios/lib/platform/browser/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n("./node_modules/axios/lib/platform/browser/classes/URLSearchParams.js"),i=n("./node_modules/axios/lib/platform/browser/classes/FormData.js"),s=n("./node_modules/axios/lib/platform/browser/classes/Blob.js");const a=(()=>{let e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!==typeof window&&"undefined"!==typeof document})(),o="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,l={isBrowser:!0,classes:{URLSearchParams:r.default,FormData:i.default,Blob:s.default},isStandardBrowserEnv:a,isStandardBrowserWebWorkerEnv:o,protocols:["http","https","file","blob","url","data"]}},"./node_modules/axios/lib/utils.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var i=r("./node_modules/axios/lib/helpers/bind.js");const{toString:s}=Object.prototype,{getPrototypeOf:a}=Object,o=(l=Object.create(null),e=>{const t=s.call(e);return l[t]||(l[t]=t.slice(8,-1).toLowerCase())});var l;const u=e=>(e=e.toLowerCase(),t=>o(t)===e),c=e=>t=>typeof t===e,{isArray:h}=Array,d=c("undefined"),f=u("ArrayBuffer"),p=c("string"),g=c("function"),m=c("number"),v=e=>null!==e&&"object"===typeof e,_=e=>{if("object"!==o(e))return!1;const t=a(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},y=u("Date"),b=u("File"),x=u("Blob"),w=u("FileList"),S=u("URLSearchParams");function C(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),h(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let a;for(n=0;n<s;n++)a=r[n],t.call(null,e[a],a,e)}}function D(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const E="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,A=e=>!d(e)&&e!==E,k=(M="undefined"!==typeof Uint8Array&&a(Uint8Array),e=>M&&e instanceof M);var M;const T=u("HTMLFormElement"),I=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),O=u("RegExp"),L=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};C(n,(n,i)=>{!1!==t(n,i,e)&&(r[i]=n)}),Object.defineProperties(e,r)},P="abcdefghijklmnopqrstuvwxyz",B="0123456789",N={DIGIT:B,ALPHA:P,ALPHA_DIGIT:P+P.toUpperCase()+B},R={isArray:h,isArrayBuffer:f,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&g(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||g(e.append)&&("formdata"===(t=o(e))||"object"===t&&g(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&f(e.buffer),t},isString:p,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:v,isPlainObject:_,isUndefined:d,isDate:y,isFile:b,isBlob:x,isRegExp:O,isFunction:g,isStream:e=>v(e)&&g(e.pipe),isURLSearchParams:S,isTypedArray:k,isFileList:w,forEach:C,merge:function e(){const{caseless:t}=A(this)&&this||{},n={},r=(r,i)=>{const s=t&&D(n,i)||i;_(n[s])&&_(r)?n[s]=e(n[s],r):_(r)?n[s]=e({},r):h(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&C(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return C(t,(t,r)=>{n&&g(t)?e[r]=(0,i.default)(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==n&&a(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!m(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:T,hasOwnProperty:I,hasOwnProp:I,reduceDescriptors:L,freezeMethods:e=>{L(e,(t,n)=>{if(g(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];g(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return h(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:D,global:E,isContextDefined:A,ALPHABET:N,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&g(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(v(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=h(e)?[]:{};return C(e,(e,t)=>{const s=n(e,r+1);!d(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}return a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a("./src/index.tsx")})(),e.exports=r(n(43),n(9))},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function _(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var b=y.prototype=new _;b.constructor=y,g(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+k(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),M(a,t,i,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var u=0;u<e.length;u++){var c=s+k(o=e[u],u);l+=M(o,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=M(o=o.value,t,i,c=s+k(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},L={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};function B(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=y,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=B,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=B,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},219:(e,t,n)=>{"use strict";var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?a:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var o=l(t),g=l(n),m=0;m<a.length;++m){var v=a[m];if(!s[v]&&(!r||!r[v])&&(!g||!g[v])&&(!o||!o[v])){var _=d(n,v);try{u(t,v,_)}catch(y){}}}}return t}},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,b(e),!g)if(null!==r(u))g=!0,L(w);else{var t=r(c);null!==t&&P(x,t.startTime-e)}}function w(e,n){g=!1,m&&(m=!1,_(E),E=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!M());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&P(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,D=null,E=-1,A=5,k=-1;function M(){return!(t.unstable_now()-k<A)}function T(){if(null!==D){var e=t.unstable_now();k=e;var n=!0;try{n=D(!0,e)}finally{n?S():(C=!1,D=null)}}else C=!1}if("function"===typeof y)S=function(){y(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=T,S=function(){O.postMessage(null)}}else S=function(){v(T,0)};function L(e){D=e,C||(C=!0,S())}function P(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(_(E),E=-1):m=!0,P(x,s-a))):(e.sortIndex=o,n(u,e),g||p||(g=!0,L(w))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var u=s[l];if(!o(u))return!1;var c=e[u],h=t[u];if(!1===(i=n?n.call(r,c,h,u):void 0)||void 0===i&&c!==h)return!1}return!0}},330:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return o(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),a(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},367:function(e,t){!function(e){"use strict";var t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],n=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],r="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0897-\u089f\u08ca-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3c\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0cf3\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ece\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u180f-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf-\u1ace\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\u30fb\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f\uff65",i="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u0870-\u0887\u0889-\u088e\u08a0-\u08c9\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c5d\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cdd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u1711\u171f-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4c\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c8a\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7cd\ua7d0\ua7d1\ua7d3\ua7d5-\ua7dc\ua7f2-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",s={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},a="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",o={5:a,"5module":a+" export import",6:a+" const class extends export import super"},l=/^in(stanceof)?$/,u=new RegExp("["+i+"]"),c=new RegExp("["+i+r+"]");function h(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}return!1}function d(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&h(e,n)))}function f(e,r){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==r&&(h(e,n)||h(e,t)))))}var p=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function g(e,t){return new p(e,{beforeExpr:!0,binop:t})}var m={beforeExpr:!0},v={startsExpr:!0},_={};function y(e,t){return void 0===t&&(t={}),t.keyword=e,_[e]=new p(e,t)}var b={num:new p("num",v),regexp:new p("regexp",v),string:new p("string",v),name:new p("name",v),privateId:new p("privateId",v),eof:new p("eof"),bracketL:new p("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new p("]"),braceL:new p("{",{beforeExpr:!0,startsExpr:!0}),braceR:new p("}"),parenL:new p("(",{beforeExpr:!0,startsExpr:!0}),parenR:new p(")"),comma:new p(",",m),semi:new p(";",m),colon:new p(":",m),dot:new p("."),question:new p("?",m),questionDot:new p("?."),arrow:new p("=>",m),template:new p("template"),invalidTemplate:new p("invalidTemplate"),ellipsis:new p("...",m),backQuote:new p("`",v),dollarBraceL:new p("${",{beforeExpr:!0,startsExpr:!0}),eq:new p("=",{beforeExpr:!0,isAssign:!0}),assign:new p("_=",{beforeExpr:!0,isAssign:!0}),incDec:new p("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new p("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new p("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new p("**",{beforeExpr:!0}),coalesce:g("??",1),_break:y("break"),_case:y("case",m),_catch:y("catch"),_continue:y("continue"),_debugger:y("debugger"),_default:y("default",m),_do:y("do",{isLoop:!0,beforeExpr:!0}),_else:y("else",m),_finally:y("finally"),_for:y("for",{isLoop:!0}),_function:y("function",v),_if:y("if"),_return:y("return",m),_switch:y("switch"),_throw:y("throw",m),_try:y("try"),_var:y("var"),_const:y("const"),_while:y("while",{isLoop:!0}),_with:y("with"),_new:y("new",{beforeExpr:!0,startsExpr:!0}),_this:y("this",v),_super:y("super",v),_class:y("class",v),_extends:y("extends",m),_export:y("export"),_import:y("import",v),_null:y("null",v),_true:y("true",v),_false:y("false",v),_in:y("in",{beforeExpr:!0,binop:7}),_instanceof:y("instanceof",{beforeExpr:!0,binop:7}),_typeof:y("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:y("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:y("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},x=/\r\n?|\n|\u2028|\u2029/,w=new RegExp(x.source,"g");function S(e){return 10===e||13===e||8232===e||8233===e}function C(e,t,n){void 0===n&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(S(i))return r<n-1&&13===i&&10===e.charCodeAt(r+1)?r+2:r+1}return-1}var D=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,E=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,A=Object.prototype,k=A.hasOwnProperty,M=A.toString,T=Object.hasOwn||function(e,t){return k.call(e,t)},I=Array.isArray||function(e){return"[object Array]"===M.call(e)},O=Object.create(null);function L(e){return O[e]||(O[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function P(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}var B=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,N=function(e,t){this.line=e,this.column=t};N.prototype.offset=function(e){return new N(this.line,this.column+e)};var R=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function F(e,t){for(var n=1,r=0;;){var i=C(e,r,t);if(i<0)return new N(n,t-r);++n,r=i}}var z={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},j=!1;function V(e){var t={};for(var n in z)t[n]=e&&T(e,n)?e[n]:z[n];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!j&&"object"===typeof console&&console.warn&&(j=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14),I(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return I(t.onComment)&&(t.onComment=U(t,t.onComment)),t}function U(e,t){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new R(this,a,o)),e.ranges&&(l.range=[i,s]),t.push(l)}}var H=1,G=2,Y=4,W=8,q=16,Z=32,K=64,X=128,J=256,$=512,Q=H|G|J;function ee(e,t){return G|(e?Y:0)|(t?W:0)}var te=0,ne=1,re=2,ie=3,se=4,ae=5,oe=function(e,t,n){this.options=e=V(e),this.sourceFile=e.sourceFile,this.keywords=L(o[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=s[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=L(r);var i=(r?r+" ":"")+s.strict;this.reservedWordsStrict=L(i),this.reservedWordsStrictBind=L(i+" "+s.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(x).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(H),this.regexpState=null,this.privateNameStack=[]},le={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};oe.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},le.inFunction.get=function(){return(this.currentVarScope().flags&G)>0},le.inGenerator.get=function(){return(this.currentVarScope().flags&W)>0},le.inAsync.get=function(){return(this.currentVarScope().flags&Y)>0},le.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e].flags;if(t&(J|$))return!1;if(t&G)return(t&Y)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},le.allowSuper.get=function(){return(this.currentThisScope().flags&K)>0||this.options.allowSuperOutsideMethod},le.allowDirectSuper.get=function(){return(this.currentThisScope().flags&X)>0},le.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},le.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e].flags;if(t&(J|$)||t&G&&!(t&q))return!0}return!1},le.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&J)>0},oe.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},oe.parse=function(e,t){return new this(t,e).parse()},oe.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},oe.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(oe.prototype,le);var ue=oe.prototype,ce=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;ue.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){E.lastIndex=e,e+=E.exec(this.input)[0].length;var t=ce.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){E.lastIndex=e+t[0].length;var n=E.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return";"===i||"}"===i||x.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||"!"===i&&"="===this.input.charAt(r+1))}e+=t[0].length,E.lastIndex=e,e+=E.exec(this.input)[0].length,";"===this.input[e]&&e++}},ue.eat=function(e){return this.type===e&&(this.next(),!0)},ue.isContextual=function(e){return this.type===b.name&&this.value===e&&!this.containsEsc},ue.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},ue.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},ue.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||x.test(this.input.slice(this.lastTokEnd,this.start))},ue.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ue.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},ue.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},ue.expect=function(e){this.eat(e)||this.unexpected()},ue.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};var he=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ue.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}},ue.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},ue.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ue.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var de=oe.prototype;de.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var fe={kind:"loop"},pe={kind:"switch"};de.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;E.lastIndex=this.pos;var t=E.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r||92===r)return!0;if(e)return!1;if(123===r||r>55295&&r<56320)return!0;if(d(r,!0)){for(var i=n+1;f(r=this.input.charCodeAt(i),!0);)++i;if(92===r||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!l.test(s))return!0}return!1},de.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;E.lastIndex=this.pos;var e,t=E.exec(this.input),n=this.pos+t[0].length;return!x.test(this.input.slice(this.pos,n))&&"function"===this.input.slice(n,n+8)&&(n+8===this.input.length||!(f(e=this.input.charCodeAt(n+8))||e>55295&&e<56320))},de.isUsingKeyword=function(e,t){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;E.lastIndex=this.pos;var n=E.exec(this.input),r=this.pos+n[0].length;if(x.test(this.input.slice(this.pos,r)))return!1;if(e){var i,s=r+5;if("using"!==this.input.slice(r,s)||s===this.input.length||f(i=this.input.charCodeAt(s))||i>55295&&i<56320)return!1;E.lastIndex=s;var a=E.exec(this.input);if(a&&x.test(this.input.slice(s,s+a[0].length)))return!1}if(t){var o,l=r+2;if("of"===this.input.slice(r,l)&&(l===this.input.length||!f(o=this.input.charCodeAt(l))&&!(o>55295&&o<56320)))return!1}var u=this.input.charCodeAt(r);return d(u,!0)||92===u},de.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)},de.isUsing=function(e){return this.isUsingKeyword(!1,e)},de.parseStatement=function(e,t,n){var r,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(s,i.keyword);case b._debugger:return this.parseDebuggerStatement(s);case b._do:return this.parseDoStatement(s);case b._for:return this.parseForStatement(s);case b._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case b._class:return e&&this.unexpected(),this.parseClass(s,!0);case b._if:return this.parseIfStatement(s);case b._return:return this.parseReturnStatement(s);case b._switch:return this.parseSwitchStatement(s);case b._throw:return this.parseThrowStatement(s);case b._try:return this.parseTryStatement(s);case b._const:case b._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(s,r);case b._while:return this.parseWhileStatement(s);case b._with:return this.parseWithStatement(s);case b.braceL:return this.parseBlock(!0,s);case b.semi:return this.parseEmptyStatement(s);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){E.lastIndex=this.pos;var a=E.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(40===l||46===l)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var u=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(u)return t&&"script"===this.options.sourceType&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),"await using"===u&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(s,!1,u),this.semicolon(),this.finishNode(s,"VariableDeclaration");var c=this.value,h=this.parseExpression();return i===b.name&&"Identifier"===h.type&&this.eat(b.colon)?this.parseLabeledStatement(s,c,h,e):this.parseExpressionStatement(s,h)}},de.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(b.semi)||this.insertSemicolon()?e.label=null:this.type!==b.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},de.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},de.parseDoStatement=function(e){return this.next(),this.labels.push(fe),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},de.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(fe),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),this.parseForAfterInit(e,r,t)}var s=this.isContextual("let"),a=!1,o=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(o){var l=this.startNode();return this.next(),"await using"===o&&this.next(),this.parseVar(l,!0,o),this.finishNode(l,"VariableDeclaration"),this.parseForAfterInit(e,l,t)}var u=this.containsEsc,c=new he,h=this.start,d=t>-1?this.parseExprSubscripts(c,"await"):this.parseExpression(!0,c);return this.type===b._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===b._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(d.start!==h||u||"Identifier"!==d.type||"async"!==d.name?this.options.ecmaVersion>=9&&(e.await=!1):this.unexpected()),s&&a&&this.raise(d.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(d,!1,c),this.checkLValPattern(d),this.parseForIn(e,d)):(this.checkExpressionErrors(c,!0),t>-1&&this.unexpected(t),this.parseFor(e,d))},de.parseForAfterInit=function(e,t,n){return(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===t.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?n>-1&&this.unexpected(n):e.await=n>-1),this.parseForIn(e,t)):(n>-1&&this.unexpected(n),this.parseFor(e,t))},de.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,me|(n?0:ve),!1,t)},de.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},de.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},de.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(b.braceL),this.labels.push(pe),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(b.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},de.parseThrowStatement=function(e){return this.next(),x.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var ge=[];de.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t="Identifier"===e.type;return this.enterScope(t?Z:0),this.checkLValPattern(e,t?se:re),this.expect(b.parenR),e},de.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===b._catch){var t=this.startNode();this.next(),this.eat(b.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(b._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},de.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")},de.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(fe),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},de.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},de.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},de.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===b._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},de.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},de.parseBlock=function(e,t,n){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(b.braceL),e&&this.enterScope(0);this.type!==b.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},de.parseFor=function(e,t){return e.init=t,this.expect(b.semi),e.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),e.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},de.parseForIn=function(e,t){var n=this.type===b._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},de.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(b.eq)?i.init=this.parseMaybeAssign(t):r||"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?r||"using"!==n&&"await using"!==n||!(this.options.ecmaVersion>=17)||this.type===b._in||this.isContextual("of")?r||"Identifier"===i.id.type||t&&(this.type===b._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.raise(this.lastTokEnd,"Missing initializer in "+n+" declaration"):this.unexpected(),e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(b.comma))break}return e},de.parseVarId=function(e,t){e.id="using"===t||"await using"===t?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?ne:re,!1)};var me=1,ve=2,_e=4;function ye(e,t){var n=t.key.name,r=e[n],i="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(i=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===i||"iset"===r&&"iget"===i||"sget"===r&&"sset"===i||"sset"===r&&"sget"===i?(e[n]="true",!1):!!r||(e[n]=i,!1)}function be(e,t){var n=e.computed,r=e.key;return!n&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}de.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&t&ve&&this.unexpected(),e.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&me&&(e.id=t&_e&&this.type!==b.name?null:this.parseIdent(),!e.id||t&ve||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?ne:re:ie));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ee(e.async,e.generator)),t&me||(e.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&me?"FunctionDeclaration":"FunctionExpression")},de.parseFunctionParams=function(e){this.expect(b.parenL),e.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},de.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(b.braceL);this.type!==b.braceR;){var a=this.parseClassElement(null!==e.superClass);a&&(i.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&ye(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},de.parseClassElement=function(e){if(this.eat(b.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(b.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===b.star?o=!0:r="static"}if(n.static=o,!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==b.star||this.canInsertSemicolon()?r="async":s=!0),!r&&(t>=9||!s)&&this.eat(b.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===b.parenL||"method"!==a||i||s){var u=!n.static&&be(n,"constructor"),c=u&&e;u&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n},de.isClassElementNameStart=function(){return this.type===b.name||this.type===b.privateId||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword},de.parseClassElementName=function(e){this.type===b.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},de.parseClassMethod=function(e,t,n,r){var i=e.key;"constructor"===e.kind?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&be(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return"get"===e.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===e.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},de.parseClassField=function(e){return be(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&be(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(b.eq)?(this.enterScope($|K),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},de.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(J|K);this.type!==b.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},de.parseClassId=function(e,t){this.type===b.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,re,!1)):(!0===t&&this.unexpected(),e.id=null)},de.parseClassSuper=function(e){e.superClass=this.eat(b._extends)?this.parseExprSubscripts(null,!1):null},de.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},de.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=0===r?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var a=n[s];T(t,a.name)||(i?i.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},de.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},de.parseExport=function(e,t){if(this.next(),this.eat(b.star))return this.parseExportAllDeclaration(e,t);if(this.eat(b._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),"Literal"===i.local.type&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},de.parseExportDeclaration=function(e){return this.parseStatement(null)},de.parseExportDefaultDeclaration=function(){var e;if(this.type===b._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,me|_e,!1,e)}if(this.type===b._class){var n=this.startNode();return this.parseClass(n,"nullableID")}var r=this.parseMaybeAssign();return this.semicolon(),r},de.checkExport=function(e,t,n){e&&("string"!==typeof t&&(t="Identifier"===t.type?t.name:t.value),T(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},de.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if("ArrayPattern"===n)for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n&&this.checkPatternExport(e,t.argument)},de.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},de.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},de.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},de.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;t.push(this.parseExportSpecifier(e))}return t},de.parseImport=function(e){return this.next(),this.type===b.string?(e.specifiers=ge,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},de.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,re),this.finishNode(e,"ImportSpecifier")},de.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,re),this.finishNode(e,"ImportDefaultSpecifier")},de.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,re),this.finishNode(e,"ImportNamespaceSpecifier")},de.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===b.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(b.comma)))return e;if(this.type===b.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(b.braceL);!this.eat(b.braceR);){if(t)t=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;e.push(this.parseImportSpecifier())}return e},de.parseWithClause=function(){var e=[];if(!this.eat(b._with))return e;this.expect(b.braceL);for(var t={},n=!0;!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.parseImportAttribute(),i="Identifier"===r.key.type?r.key.name:r.key.value;T(t,i)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+i+"'"),t[i]=!0,e.push(r)}return e},de.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved),this.expect(b.colon),this.type!==b.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},de.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===b.string){var e=this.parseLiteral(this.value);return B.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},de.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},de.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var xe=oe.prototype;xe.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},xe.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},xe.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},xe.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},xe.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},xe.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(b.comma),t&&this.type===b.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===b.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}i.push(this.parseAssignableListItem(r))}return i},xe.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},xe.parseBindingListItem=function(e){return e},xe.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},xe.checkLValSimple=function(e,t,n){void 0===t&&(t=te);var r=t!==te;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===re&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(T(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==ae&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},xe.checkLValPattern=function(e,t,n){switch(void 0===t&&(t=te),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}},xe.checkLValInnerPattern=function(e,t,n){switch(void 0===t&&(t=te),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var we=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},Se={b_stat:new we("{",!1),b_expr:new we("{",!0),b_tmpl:new we("${",!1),p_stat:new we("(",!1),p_expr:new we("(",!0),q_tmpl:new we("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new we("function",!1),f_expr:new we("function",!0),f_expr_gen:new we("function",!0,!1,null,!0),f_gen:new we("function",!1,!1,null,!0)},Ce=oe.prototype;Ce.initialContext=function(){return[Se.b_stat]},Ce.curContext=function(){return this.context[this.context.length-1]},Ce.braceIsBlock=function(e){var t=this.curContext();return t===Se.f_expr||t===Se.f_stat||(e!==b.colon||t!==Se.b_stat&&t!==Se.b_expr?e===b._return||e===b.name&&this.exprAllowed?x.test(this.input.slice(this.lastTokEnd,this.start)):e===b._else||e===b.semi||e===b.eof||e===b.parenR||e===b.arrow||(e===b.braceL?t===Se.b_stat:e!==b._var&&e!==b._const&&e!==b.name&&!this.exprAllowed):!t.isExpr)},Ce.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},Ce.updateContext=function(e){var t,n=this.type;n.keyword&&e===b.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},Ce.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===Se.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Se.b_stat:Se.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(Se.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(e){var t=e===b._if||e===b._for||e===b._with||e===b._while;this.context.push(t?Se.p_stat:Se.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(e){!e.beforeExpr||e===b._else||e===b.semi&&this.curContext()!==Se.p_stat||e===b._return&&x.test(this.input.slice(this.lastTokEnd,this.start))||(e===b.colon||e===b.braceL)&&this.curContext()===Se.b_stat?this.context.push(Se.f_stat):this.context.push(Se.f_expr),this.exprAllowed=!1},b.colon.updateContext=function(){"function"===this.curContext().token&&this.context.pop(),this.exprAllowed=!0},b.backQuote.updateContext=function(){this.curContext()===Se.q_tmpl?this.context.pop():this.context.push(Se.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(e){if(e===b._function){var t=this.context.length-1;this.context[t]===Se.f_expr?this.context[t]=Se.f_expr_gen:this.context[t]=Se.f_gen}this.exprAllowed=!0},b.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var De=oe.prototype;function Ee(e){return"Identifier"===e.type||"ParenthesizedExpression"===e.type&&Ee(e.expression)}function Ae(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&Ae(e.expression)||"ParenthesizedExpression"===e.type&&Ae(e.expression)}De.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[s]=!0}}},De.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===b.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(b.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},De.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new he,r=!0);var o=this.start,l=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,l)),this.type.isAssign){var c=this.startNodeAt(o,l);return c.operator=this.value,this.type===b.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===b.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u},De.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(b.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(b.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},De.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},De.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==b._in)&&s>r){var a=this.type===b.logicalOR||this.type===b.logicalAND,o=this.type===b.coalesce;o&&(s=b.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),d=this.buildBinary(t,n,e,h,l,a||o);return(a&&this.type===b.coalesce||o&&(this.type===b.logicalOR||this.type===b.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e},De.buildBinary=function(e,t,n,r,i,s){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},De.parseMaybeUnary=function(e,t,n,r){var i,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)i=this.parseAwait(r),t=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===b.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&Ee(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&Ae(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,i=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==b.privateId){if(i=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(s,a);u.operator=this.value,u.prefix=!1,u.argument=i,this.checkLValSimple(i),this.next(),i=this.finishNode(u,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),i=this.parsePrivateIdent(),this.type!==b._in&&this.unexpected();return n||!this.eat(b.starstar)?i:t?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,i,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},De.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s},De.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,r,s,a,i);if(o.optional&&(a=!0),o===e||"ArrowFunctionExpression"===o.type){if(a){var l=this.startNodeAt(t,n);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}e=o}},De.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(b.arrow)},De.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)},De.parseSubscript=function(e,t,n,r,i,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(b.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(b.bracketL);if(u||l&&this.type!==b.parenL&&this.type!==b.backQuote||this.eat(b.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(b.bracketR)):this.type===b.privateId&&"Super"!==e.type?c.property=this.parsePrivateIdent():c.property=this.parseIdent("never"!==this.options.allowReserved),c.computed=!!u,o&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var h=new he,d=this.yieldPos,f=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=f,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,g,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var m=this.startNodeAt(t,n);m.callee=e,m.arguments=g,o&&(m.optional=l),e=this.finishNode(m,"CallExpression")}else if(this.type===b.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e},De.parseExprAtom=function(e,t,n){this.type===b.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(r,"Super");case b._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case b.name:var s=this.start,a=this.startLoc,o=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===l.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.overrideContext(Se.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[l],!1,t);if(this.options.ecmaVersion>=8&&"async"===l.name&&this.type===b.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return l=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[l],!0,t)}return l;case b.regexp:var u=this.value;return(r=this.parseLiteral(u.value)).regex={pattern:u.pattern,flags:u.flags},r;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(r=this.startNode()).value=this.type===b._null?null:this.type===b._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case b.parenL:var c=this.start,h=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),h;case b.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(b.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case b.braceL:return this.overrideContext(Se.b_expr),this.parseObj(!1,e);case b._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},De.parseExprAtomDefault=function(){this.unexpected()},De.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===b.parenL&&!e)return this.parseDynamicImport(t);if(this.type===b.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}this.unexpected()},De.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(b.parenR)?e.options=null:(this.expect(b.comma),this.afterTrailingComma(b.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(b.parenR)||(this.expect(b.comma),this.afterTrailingComma(b.parenR)||this.unexpected())));else if(!this.eat(b.parenR)){var t=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},De.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},De.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=null!=t.value?t.value.toString():t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},De.parseParenExpression=function(){this.expect(b.parenL);var e=this.parseExpression();return this.expect(b.parenR),e},De.shouldParseArrow=function(e){return!this.canInsertSemicolon()},De.parseParenAndDistinguishExpression=function(e,t){var n,r=this.start,i=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,l=this.startLoc,u=[],c=!0,h=!1,d=new he,f=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(c?c=!1:this.expect(b.comma),s&&this.afterTrailingComma(b.parenR,!0)){h=!0;break}if(this.type===b.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var g=this.lastTokEnd,m=this.lastTokEndLoc;if(this.expect(b.parenR),e&&this.shouldParseArrow(u)&&this.eat(b.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=p,this.parseParenArrowList(r,i,u,t);u.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=p||this.awaitPos,u.length>1?((n=this.startNodeAt(o,l)).expressions=u,this.finishNodeAt(n,"SequenceExpression",g,m)):n=u[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(r,i);return v.expression=n,this.finishNode(v,"ParenthesizedExpression")}return n},De.parseParenItem=function(e){return e},De.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var ke=[];De.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===b.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(b.parenL)?e.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):e.arguments=ke,this.finishNode(e,"NewExpression")},De.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,"\n"),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},De.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},De.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!x.test(this.input.slice(this.lastTokEnd,this.start))},De.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},De.parseProperty=function(e,t){var n,r,i,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===b.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,t),this.type===b.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(n=this.eat(b.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(a)):r=!1,this.parsePropertyValue(a,e,n,r,i,s,t,o),this.finishNode(a,"Property")},De.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var n="get"===e.kind?0:1;if(e.value.params.length!==n){var r=e.value.start;"get"===e.kind?this.raiseRecoverable(r,"getter should have no params"):this.raiseRecoverable(r,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},De.parsePropertyValue=function(e,t,n,r,i,s,a,o){(n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===b.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(n,r),e.kind="init"):t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===b.comma||this.type===b.braceR||this.type===b.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===b.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected():((n||r)&&this.unexpected(),this.parseGetterSetter(e))},De.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(b.bracketR),e.key;e.computed=!1}return e.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},De.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},De.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ee(t,r.generator)|K|(n?X:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},De.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(ee(n,!1)|q),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},De.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==b.braceL,s=this.strict,a=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,ae),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()},De.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},De.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,ne,t?null:n)}},De.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(b.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===b.comma?a=null:this.type===b.ellipsis?(a=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},De.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().flags&Q||"arguments"!==r||this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==r&&"await"!==r||this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},De.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},De.parseIdentNode=function(){var e=this.startNode();return this.type===b.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop(),this.type=b.name):this.unexpected(),e},De.parsePrivateIdent=function(){var e=this.startNode();return this.type===b.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},De.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(b.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},De.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Me=oe.prototype;Me.raise=function(e,t){var n=F(this.input,e);t+=" ("+n.line+":"+n.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Me.raiseRecoverable=Me.raise,Me.curPosition=function(){if(this.options.locations)return new N(this.curLine,this.pos-this.lineStart)};var Te=oe.prototype,Ie=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};Te.enterScope=function(e){this.scopeStack.push(new Ie(e))},Te.exitScope=function(){this.scopeStack.pop()},Te.treatFunctionsAsVarInScope=function(e){return e.flags&G||!this.inModule&&e.flags&H},Te.declareName=function(e,t,n){var r=!1;if(t===re){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&H&&delete this.undefinedExports[e]}else if(t===se)this.currentScope().lexical.push(e);else if(t===ie){var s=this.currentScope();r=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(o.flags&Z&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&o.flags&H&&delete this.undefinedExports[e],o.flags&Q)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},Te.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},Te.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Te.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(Q|$|J))return t}},Te.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(Q|$|J)&&!(t.flags&q))return t}};var Oe=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new R(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},Le=oe.prototype;function Pe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Le.startNode=function(){return new Oe(this,this.start,this.startLoc)},Le.startNodeAt=function(e,t){return new Oe(this,e,t)},Le.finishNode=function(e,t){return Pe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},Le.finishNodeAt=function(e,t,n,r){return Pe.call(this,e,t,n,r)},Le.copyNode=function(e){var t=new Oe(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Be="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ne=Be+" Extended_Pictographic",Re=Ne+" EBase EComp EMod EPres ExtPict",Fe={9:Be,10:Ne,11:Ne,12:Re,13:Re,14:Re},ze={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},je="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ve="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ue=Ve+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",He=Ue+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ge=He+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ye=Ge+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",We={9:Ve,10:Ue,11:He,12:Ge,13:Ye,14:Ye+" Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz"},qe={};function Ze(e){var t=qe[e]={binary:L(Fe[e]+" "+je),binaryOfStrings:L(ze[e]),nonBinary:{General_Category:L(je),Script:L(We[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Ke=0,Xe=[9,10,11,12,13,14];Ke<Xe.length;Ke+=1)Ze(Xe[Ke]);var Je=oe.prototype,$e=function(e,t){this.parent=e,this.base=t||this};$e.prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var n=e;n;n=n.parent)if(t.base===n.base&&t!==n)return!0;return!1},$e.prototype.sibling=function(){return new $e(this.parent,this.base)};var Qe=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=qe[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};function et(e){for(var t in e)return!0;return!1}function tt(e){return 105===e||109===e||115===e}function nt(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function rt(e){return d(e,!0)||36===e||95===e}function it(e){return f(e,!0)||36===e||95===e||8204===e||8205===e}function st(e){return e>=65&&e<=90||e>=97&&e<=122}function at(e){return e>=0&&e<=1114111}Qe.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("v"),i=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=i&&this.parser.options.ecmaVersion>=9)},Qe.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Qe.prototype.at=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var i=n.charCodeAt(e);if(!t&&!this.switchU||i<=55295||i>=57344||e+1>=r)return i;var s=n.charCodeAt(e+1);return s>=56320&&s<=57343?(i<<10)+s-56613888:i},Qe.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var i,s=n.charCodeAt(e);return!t&&!this.switchU||s<=55295||s>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2},Qe.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},Qe.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},Qe.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},Qe.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},Qe.prototype.eatChars=function(e,t){void 0===t&&(t=!1);for(var n=this.pos,r=0,i=e;r<i.length;r+=1){var s=i[r],a=this.at(n,t);if(-1===a||a!==s)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0},Je.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var a=n.charAt(s);-1===t.indexOf(a)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),"u"===a&&(r=!0),"v"===a&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")},Je.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&et(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},Je.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}},Je.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new $e(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},Je.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},Je.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},Je.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},Je.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},Je.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},Je.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},Je.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},Je.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},Je.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),r=e.eat(45);if(n||r){for(var i=0;i<n.length;i++){var s=n.charAt(i);n.indexOf(s,i+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(r){var a=this.regexp_eatModifiers(e);n||a||58!==e.current()||e.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var l=a.charAt(o);(a.indexOf(l,o+1)>-1||n.indexOf(l)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1},Je.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},Je.regexp_eatModifiers=function(e){for(var t="",n=0;-1!==(n=e.current())&&tt(n);)t+=P(n),e.advance();return t},Je.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},Je.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},Je.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!nt(t)&&(e.lastIntValue=t,e.advance(),!0)},Je.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!nt(n);)e.advance();return e.pos!==t},Je.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},Je.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1)i[r].separatedFrom(e.branchID)||e.raise("Duplicate capture group name");else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},Je.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},Je.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=P(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=P(e.lastIntValue);return!0}return!1},Je.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),rt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Je.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),it(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},Je.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},Je.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},Je.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},Je.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},Je.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},Je.regexp_eatZero=function(e){return 48===e.current()&&!mt(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},Je.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},Je.regexp_eatControlLetter=function(e){var t=e.current();return!!st(t)&&(e.lastIntValue=t%32,e.advance(),!0)},Je.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=1024*(i-55296)+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&at(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1},Je.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},Je.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1};var ot=0,lt=1,ut=2;function ct(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function ht(e){return st(e)||95===e}function dt(e){return ht(e)||mt(e)}function ft(e){return 33===e||e>=35&&e<=38||e>=42&&e<=44||46===e||e>=58&&e<=64||94===e||96===e||126===e}function pt(e){return 40===e||41===e||45===e||47===e||e>=91&&e<=93||e>=123&&e<=125}function gt(e){return 33===e||35===e||37===e||38===e||44===e||45===e||e>=58&&e<=62||64===e||96===e||126===e}function mt(e){return e>=48&&e<=57}function vt(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function _t(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function yt(e){return e>=48&&e<=55}Je.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(ct(t))return e.lastIntValue=-1,e.advance(),lt;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=80===t)||112===t)){var r;if(e.lastIntValue=-1,e.advance(),e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===ut&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return ot},Je.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),lt}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return ot},Je.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){T(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},Je.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?lt:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?ut:void e.raise("Invalid property name")},Je.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";ht(t=e.current());)e.lastStringValue+=P(t),e.advance();return""!==e.lastStringValue},Je.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";dt(t=e.current());)e.lastStringValue+=P(t),e.advance();return""!==e.lastStringValue},Je.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},Je.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ut&&e.raise("Negated character class may contain strings"),!0}return!1},Je.regexp_classContents=function(e){return 93===e.current()?lt:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),lt)},Je.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},Je.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||yt(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},Je.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},Je.regexp_classSetExpression=function(e){var t,n=lt;if(this.regexp_eatClassSetRange(e));else if(t=this.regexp_eatClassSetOperand(e)){t===ut&&(n=ut);for(var r=e.pos;e.eatChars([38,38]);)38!==e.current()&&(t=this.regexp_eatClassSetOperand(e))?t!==ut&&(n=lt):e.raise("Invalid character in character class");if(r!==e.pos)return n;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return n}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(t=this.regexp_eatClassSetOperand(e)))return n;t===ut&&(n=ut)}},Je.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return-1!==n&&-1!==r&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},Je.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?lt:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},Je.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===ut&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null},Je.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null},Je.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ut&&(t=ut);return t},Je.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?lt:ut},Je.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e))||(e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1));var n=e.current();return!(n<0||n===e.lookahead()&&ft(n))&&!pt(n)&&(e.advance(),e.lastIntValue=n,!0)},Je.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return!!gt(t)&&(e.lastIntValue=t,e.advance(),!0)},Je.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!mt(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},Je.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},Je.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;mt(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},Je.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;vt(n=e.current());)e.lastIntValue=16*e.lastIntValue+_t(n),e.advance();return e.pos!==t},Je.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},Je.regexp_eatOctalDigit=function(e){var t=e.current();return yt(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},Je.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!vt(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+_t(i),e.advance()}return!0};var bt=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new R(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},xt=oe.prototype;function wt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function St(e){return"function"!==typeof BigInt?null:BigInt(e.replace(/_/g,""))}xt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new bt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},xt.getToken=function(){return this.next(),new bt(this)},"undefined"!==typeof Symbol&&(xt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===b.eof,value:t}}}}),xt.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},xt.readToken=function(e){return d(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},xt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},xt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=C(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},xt.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!S(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},xt.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&D.test(String.fromCharCode(e))))break e;++this.pos}}},xt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},xt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},xt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},xt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=b.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(b.assign,n+1):this.finishOp(r,n)},xt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(124===e?b.logicalOR:b.logicalAND,2):61===t?this.finishOp(b.assign,2):this.finishOp(124===e?b.bitwiseOR:b.bitwiseAND,1)},xt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},xt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!x.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},xt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},xt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===e?b.eq:b.prefix,1)},xt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(b.questionDot,2)}if(63===t)return e>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(b.assign,3):this.finishOp(b.coalesce,2)}return this.finishOp(b.question,1)},xt.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,d(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(b.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+P(e)+"'")},xt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(b.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+P(e)+"'")},xt.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},xt.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(x.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Qe(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch(u){}return this.finishToken(b.regexp,{pattern:i,flags:a,value:l})},xt.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&void 0===t,i=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,l=0,u=null==t?1/0:t;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),h=void 0;if(r&&95===c)i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=c;else{if((h=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=e)break;o=c,a=a*e+h}}return r&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=t&&this.pos-s!==t?null:a},xt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=St(this.input.slice(t,this.pos)),++this.pos):d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},xt.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=St(this.input.slice(t,this.pos));return++this.pos,d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=wt(this.input.slice(t,this.pos),n);return this.finishToken(b.num,s)},xt.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},xt.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(S(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(b.string,t)};var Ct={};xt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Ct)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},xt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ct;this.raise(e,t)},xt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(b.template,e)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(S(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},xt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":"\n"===this.input[this.pos+1]&&++this.pos;case"\n":case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1}this.raise(this.start,"Unterminated template")},xt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return P(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return S(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}},xt.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},xt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(f(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?d:f)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=P(a),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},xt.readWord=function(){var e=this.readWord1(),t=b.name;return this.keywords.test(e)&&(t=_[e]),this.finishToken(t,e)};var Dt="8.15.0";function Et(e,t){return oe.parse(e,t)}function At(e,t,n){return oe.parseExpressionAt(e,t,n)}function kt(e,t){return oe.tokenizer(e,t)}oe.acorn={Parser:oe,version:Dt,defaultOptions:z,Position:N,SourceLocation:R,getLineInfo:F,Node:Oe,TokenType:p,tokTypes:b,keywordTypes:_,TokContext:we,tokContexts:Se,isIdentifierChar:f,isIdentifierStart:d,Token:bt,isNewLine:S,lineBreak:x,lineBreakG:w,nonASCIIwhitespace:D},e.Node=Oe,e.Parser=oe,e.Position=N,e.SourceLocation=R,e.TokContext=we,e.Token=bt,e.TokenType=p,e.defaultOptions=z,e.getLineInfo=F,e.isIdentifierChar=f,e.isIdentifierStart=d,e.isNewLine=S,e.keywordTypes=_,e.lineBreak=x,e.lineBreakG=w,e.nonASCIIwhitespace=D,e.parse=Et,e.parseExpressionAt=At,e.tokContexts=Se,e.tokTypes=b,e.tokenizer=kt,e.version=Dt}(t)},391:(e,t,n)=>{"use strict";var r=n(950);t.H=r.createRoot,r.hydrateRoot},443:(e,t,n)=>{"use strict";e.exports=n(717)},461:(e,t,n)=>{"use strict";e.exports=n(330)},536:function(e,t,n){var r;e=n.nmd(e),function(){var i,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,f=1/0,p=9007199254740991,g=NaN,m=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],_="[object Arguments]",y="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",C="[object GeneratorFunction]",D="[object Map]",E="[object Number]",A="[object Object]",k="[object Promise]",M="[object RegExp]",T="[object Set]",I="[object String]",O="[object Symbol]",L="[object WeakMap]",P="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",F="[object Int8Array]",z="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",H="[object Uint16Array]",G="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,X=RegExp(Z.source),J=RegExp(K.source),$=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ie.source),ae=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",De="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="['\u2019]",Oe="["+Ce+"]",Le="["+Te+"]",Pe="["+De+"]",Be="\\d+",Ne="["+Ee+"]",Re="["+Ae+"]",Fe="[^"+Ce+Te+Be+Ee+Ae+ke+"]",ze="\\ud83c[\\udffb-\\udfff]",je="[^"+Ce+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+ke+"]",Ge="\\u200d",Ye="(?:"+Re+"|"+Fe+")",We="(?:"+He+"|"+Fe+")",qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ze="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Pe+"|"+ze+")"+"?",Xe="["+Me+"]?",Je=Xe+Ke+("(?:"+Ge+"(?:"+[je,Ve,Ue].join("|")+")"+Xe+Ke+")*"),$e="(?:"+[Ne,Ve,Ue].join("|")+")"+Je,Qe="(?:"+[je+Pe+"?",Pe,Ve,Ue,Oe].join("|")+")",et=RegExp(Ie,"g"),tt=RegExp(Pe,"g"),nt=RegExp(ze+"(?="+ze+")|"+Qe+Je,"g"),rt=RegExp([He+"?"+Re+"+"+qe+"(?="+[Le,He,"$"].join("|")+")",We+"+"+Ze+"(?="+[Le,He+Ye,"$"].join("|")+")",He+"?"+Ye+"+"+qe,He+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be,$e].join("|"),"g"),it=RegExp("["+Ge+Ce+De+Me+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[N]=lt[R]=lt[F]=lt[z]=lt[j]=lt[V]=lt[U]=lt[H]=lt[G]=!0,lt[_]=lt[y]=lt[P]=lt[b]=lt[B]=lt[x]=lt[w]=lt[S]=lt[D]=lt[E]=lt[A]=lt[M]=lt[T]=lt[I]=lt[L]=!1;var ut={};ut[_]=ut[y]=ut[P]=ut[B]=ut[b]=ut[x]=ut[N]=ut[R]=ut[F]=ut[z]=ut[j]=ut[D]=ut[E]=ut[A]=ut[M]=ut[T]=ut[I]=ut[O]=ut[V]=ut[U]=ut[H]=ut[G]=!0,ut[w]=ut[S]=ut[L]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||pt||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,_t=vt&&vt.exports===mt,yt=_t&&ft.process,bt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),xt=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,St=bt&&bt.isMap,Ct=bt&&bt.isRegExp,Dt=bt&&bt.isSet,Et=bt&&bt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function Lt(e,t){return!!(null==e?0:e.length)&&Ht(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Bt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Nt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=qt("length");function Vt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ut(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Ht(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ut(e,Yt,n)}function Gt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Yt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Xt(e,t)/n:g}function qt(e){return function(t){return null==t?i:t[e]}}function Zt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Xt(e,t){for(var n,r=-1,s=e.length;++r<s;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $t(e){return e?e.slice(0,mn(e)+1).replace(ae,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return Bt(t,function(t){return e[t]})}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var sn=Zt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ct[e]}function ln(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function cn(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[i++]=n)}return s}function dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function pn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):jt(e)}function gn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var vn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _n=function e(t){var n=(t=null==t?gt:_n.defaults(gt.Object(),t,_n.pick(gt,at))).Array,r=t.Date,oe=t.Error,Ce=t.Function,De=t.Math,Ee=t.Object,Ae=t.RegExp,ke=t.String,Me=t.TypeError,Te=n.prototype,Ie=Ce.prototype,Oe=Ee.prototype,Le=t["__core-js_shared__"],Pe=Ie.toString,Be=Oe.hasOwnProperty,Ne=0,Re=function(){var e=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Oe.toString,ze=Pe.call(Ee),je=gt._,Ve=Ae("^"+Pe.call(Be).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=_t?t.Buffer:i,He=t.Symbol,Ge=t.Uint8Array,Ye=Ue?Ue.allocUnsafe:i,We=cn(Ee.getPrototypeOf,Ee),qe=Ee.create,Ze=Oe.propertyIsEnumerable,Ke=Te.splice,Xe=He?He.isConcatSpreadable:i,Je=He?He.iterator:i,$e=He?He.toStringTag:i,Qe=function(){try{var e=hs(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,ct=t.setTimeout!==gt.setTimeout&&t.setTimeout,ft=De.ceil,pt=De.floor,mt=Ee.getOwnPropertySymbols,vt=Ue?Ue.isBuffer:i,yt=t.isFinite,bt=Te.join,jt=cn(Ee.keys,Ee),Zt=De.max,yn=De.min,bn=r.now,xn=t.parseInt,wn=De.random,Sn=Te.reverse,Cn=hs(t,"DataView"),Dn=hs(t,"Map"),En=hs(t,"Promise"),An=hs(t,"Set"),kn=hs(t,"WeakMap"),Mn=hs(Ee,"create"),Tn=kn&&new kn,In={},On=Rs(Cn),Ln=Rs(Dn),Pn=Rs(En),Bn=Rs(An),Nn=Rs(kn),Rn=He?He.prototype:i,Fn=Rn?Rn.valueOf:i,zn=Rn?Rn.toString:i;function jn(e){if(eo(e)&&!Ha(e)&&!(e instanceof Gn)){if(e instanceof Hn)return e;if(Be.call(e,"__wrapped__"))return Fs(e)}return new Hn(e)}var Vn=function(){function e(){}return function(t){if(!Qa(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Un(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Kn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Ha(e),r=!n&&Ua(e),i=!n&&!r&&qa(e),s=!n&&!r&&!i&&lo(e),a=n||r||i||s,o=a?Jt(e.length,ke):[],l=o.length;for(var u in e)!t&&!Be.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_s(u,l))||o.push(u);return o}function Jn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function $n(e,t){return Ps(Mi(e),or(t,0,e.length))}function Qn(e){return Ps(Mi(e))}function er(e,t,n){(n!==i&&!za(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function tr(e,t,n){var r=e[t];Be.call(e,t)&&za(r,n)&&(n!==i||t in e)||sr(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function rr(e,t,n,r){return dr(e,function(e,i,s){t(r,e,n(e),s)}),r}function ir(e,t){return e&&Ti(t,Io(t),e)}function sr(e,t,n){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,s=t.length,a=n(s),o=null==e;++r<s;)a[r]=o?i:Eo(e,t[r]);return a}function or(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,s,a){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=s?n(e,r,s,a):n(e)),o!==i)return o;if(!Qa(e))return e;var h=Ha(e);if(h){if(o=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Be.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Mi(e,o)}else{var d=ps(e),f=d==S||d==C;if(qa(e))return Si(e,l);if(d==A||d==_||f&&!s){if(o=u||f?{}:ms(e),!l)return u?function(e,t){return Ti(e,fs(e),t)}(e,function(e,t){return e&&Ti(t,Oo(t),e)}(o,e)):function(e,t){return Ti(e,ds(e),t)}(e,ir(o,e))}else{if(!ut[d])return s?e:{};o=function(e,t,n){var r=e.constructor;switch(t){case P:return Ci(e);case b:case x:return new r(+e);case B:return function(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case R:case F:case z:case j:case V:case U:case H:case G:return Di(e,n);case D:return new r;case E:case I:return new r(e);case M:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return new r;case O:return i=e,Fn?Ee(Fn.call(i)):{}}var i}(e,d,l)}}a||(a=new Kn);var p=a.get(e);if(p)return p;a.set(e,o),so(e)?e.forEach(function(r){o.add(lr(r,t,n,r,e,a))}):to(e)&&e.forEach(function(r,i){o.set(i,lr(r,t,n,i,e,a))});var g=h?i:(c?u?is:rs:u?Oo:Io)(e);return Mt(g||e,function(r,i){g&&(r=e[i=r]),tr(o,i,lr(r,t,n,i,e,a))}),o}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var s=n[r],a=t[s],o=e[s];if(o===i&&!(s in e)||!a(o))return!1}return!0}function cr(e,t,n){if("function"!=typeof e)throw new Me(s);return Ts(function(){e.apply(i,n)},t)}function hr(e,t,n,r){var i=-1,s=Lt,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;n&&(t=Bt(t,Qt(n))),r?(s=Pt,a=!1):t.length>=200&&(s=tn,a=!1,t=new Zn(t));e:for(;++i<o;){var c=e[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else s(t,h,r)||l.push(c)}return l}jn.templateSettings={escape:$,evaluate:Q,interpolate:ee,variable:"",imports:{_:jn}},jn.prototype=Un.prototype,jn.prototype.constructor=jn,Hn.prototype=Vn(Un.prototype),Hn.prototype.constructor=Hn,Gn.prototype=Vn(Un.prototype),Gn.prototype.constructor=Gn,Yn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Mn){var n=t[e];return n===a?i:n}return Be.call(t,e)?t[e]:i},Yn.prototype.has=function(e){var t=this.__data__;return Mn?t[e]!==i:Be.call(t,e)},Yn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mn&&t===i?a:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return nr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Dn||Wn),string:new Yn}},qn.prototype.delete=function(e){var t=us(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return us(this,e).get(e)},qn.prototype.has=function(e){return us(this,e).has(e)},qn.prototype.set=function(e,t){var n=us(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,a),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Kn.prototype.get=function(e){return this.__data__.get(e)},Kn.prototype.has=function(e){return this.__data__.has(e)},Kn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var dr=Li(br),fr=Li(xr,!0);function pr(e,t){var n=!0;return dr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function gr(e,t,n){for(var r=-1,s=e.length;++r<s;){var a=e[r],o=t(a);if(null!=o&&(l===i?o===o&&!oo(o):n(o,l)))var l=o,u=a}return u}function mr(e,t){var n=[];return dr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function vr(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=vs),i||(i=[]);++s<a;){var o=e[s];t>0&&n(o)?t>1?vr(o,t-1,n,r,i):Nt(i,o):r||(i[i.length]=o)}return i}var _r=Pi(),yr=Pi(!0);function br(e,t){return e&&_r(e,t,Io)}function xr(e,t){return e&&yr(e,t,Io)}function wr(e,t){return Ot(t,function(t){return Xa(e[t])})}function Sr(e,t){for(var n=0,r=(t=yi(t,e)).length;null!=e&&n<r;)e=e[Ns(t[n++])];return n&&n==r?e:i}function Cr(e,t,n){var r=t(e);return Ha(e)?r:Nt(r,n(e))}function Dr(e){return null==e?e===i?"[object Undefined]":"[object Null]":$e&&$e in Ee(e)?function(e){var t=Be.call(e,$e),n=e[$e];try{e[$e]=i;var r=!0}catch(a){}var s=Fe.call(e);r&&(t?e[$e]=n:delete e[$e]);return s}(e):function(e){return Fe.call(e)}(e)}function Er(e,t){return e>t}function Ar(e,t){return null!=e&&Be.call(e,t)}function kr(e,t){return null!=e&&t in Ee(e)}function Mr(e,t,r){for(var s=r?Pt:Lt,a=e[0].length,o=e.length,l=o,u=n(o),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Bt(d,Qt(t))),c=yn(d.length,c),u[l]=!r&&(t||a>=120&&d.length>=120)?new Zn(l&&d):i}d=e[0];var f=-1,p=u[0];e:for(;++f<a&&h.length<c;){var g=d[f],m=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,m):s(h,m,r))){for(l=o;--l;){var v=u[l];if(!(v?tn(v,m):s(e[l],m,r)))continue e}p&&p.push(m),h.push(g)}}return h}function Tr(e,t,n){var r=null==(e=As(e,t=yi(t,e)))?e:e[Ns(Ks(t))];return null==r?i:At(r,e,n)}function Ir(e){return eo(e)&&Dr(e)==_}function Or(e,t,n,r,s){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:function(e,t,n,r,s,a){var o=Ha(e),l=Ha(t),u=o?y:ps(e),c=l?y:ps(t),h=(u=u==_?A:u)==A,d=(c=c==_?A:c)==A,f=u==c;if(f&&qa(e)){if(!qa(t))return!1;o=!0,h=!1}if(f&&!h)return a||(a=new Kn),o||lo(e)?ts(e,t,n,r,s,a):function(e,t,n,r,i,s,a){switch(n){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new Ge(e),new Ge(t)));case b:case x:case E:return za(+e,+t);case w:return e.name==t.name&&e.message==t.message;case M:case I:return e==t+"";case D:var o=un;case T:var l=1&r;if(o||(o=dn),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=ts(o(e),o(t),r,i,s,a);return a.delete(e),c;case O:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,n,r,s,a);if(!(1&n)){var p=h&&Be.call(e,"__wrapped__"),g=d&&Be.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,v=g?t.value():t;return a||(a=new Kn),s(m,v,n,r,a)}}if(!f)return!1;return a||(a=new Kn),function(e,t,n,r,s,a){var o=1&n,l=rs(e),u=l.length,c=rs(t),h=c.length;if(u!=h&&!o)return!1;var d=u;for(;d--;){var f=l[d];if(!(o?f in t:Be.call(t,f)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);var v=o;for(;++d<u;){var _=e[f=l[d]],y=t[f];if(r)var b=o?r(y,_,f,t,e,a):r(_,y,f,e,t,a);if(!(b===i?_===y||s(_,y,n,r,a):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,r,s,a)}(e,t,n,r,Or,s))}function Lr(e,t,n,r){var s=n.length,a=s,o=!r;if(null==e)return!a;for(e=Ee(e);s--;){var l=n[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var u=(l=n[s])[0],c=e[u],h=l[1];if(o&&l[2]){if(c===i&&!(u in e))return!1}else{var d=new Kn;if(r)var f=r(c,h,u,e,t,d);if(!(f===i?Or(h,c,3,r,d):f))return!1}}return!0}function Pr(e){return!(!Qa(e)||(t=e,Re&&Re in t))&&(Xa(e)?Ve:_e).test(Rs(e));var t}function Br(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Ha(e)?Vr(e[0],e[1]):jr(e):dl(e)}function Nr(e){if(!Ss(e))return jt(e);var t=[];for(var n in Ee(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Rr(e){if(!Qa(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=Ss(e),n=[];for(var r in e)("constructor"!=r||!t&&Be.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function zr(e,t){var r=-1,i=Ya(e)?n(e.length):[];return dr(e,function(e,n,s){i[++r]=t(e,n,s)}),i}function jr(e){var t=cs(e);return 1==t.length&&t[0][2]?Ds(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function Vr(e,t){return bs(e)&&Cs(t)?Ds(Ns(e),t):function(n){var r=Eo(n,e);return r===i&&r===t?Ao(n,e):Or(t,r,3)}}function Ur(e,t,n,r,s){e!==t&&_r(t,function(a,o){if(s||(s=new Kn),Qa(a))!function(e,t,n,r,s,a,o){var l=ks(e,n),u=ks(t,n),c=o.get(u);if(c)return void er(e,n,c);var h=a?a(l,u,n+"",e,t,o):i,d=h===i;if(d){var f=Ha(u),p=!f&&qa(u),g=!f&&!p&&lo(u);h=u,f||p||g?Ha(l)?h=l:Wa(l)?h=Mi(l):p?(d=!1,h=Si(u,!0)):g?(d=!1,h=Di(u,!0)):h=[]:ro(u)||Ua(u)?(h=l,Ua(l)?h=vo(l):Qa(l)&&!Xa(l)||(h=ms(u))):d=!1}d&&(o.set(u,h),s(h,u,r,a,o),o.delete(u));er(e,n,h)}(e,t,o,n,Ur,r,s);else{var l=r?r(ks(e,o),a,o+"",e,t,s):i;l===i&&(l=a),er(e,o,l)}},Oo)}function Hr(e,t){var n=e.length;if(n)return _s(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Bt(t,function(e){return Ha(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e}):[rl];var r=-1;t=Bt(t,Qt(ls()));var i=zr(e,function(e,n,i){var s=Bt(t,function(t){return t(e)});return{criteria:s,index:++r,value:e}});return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,function(e,t){return function(e,t,n){var r=-1,i=e.criteria,s=t.criteria,a=i.length,o=n.length;for(;++r<a;){var l=Ei(i[r],s[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Yr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=Sr(e,a);n(o,a)&&Qr(s,yi(a,e),o)}return s}function Wr(e,t,n,r){var i=r?Gt:Ht,s=-1,a=t.length,o=e;for(e===t&&(t=Mi(t)),n&&(o=Bt(e,Qt(n)));++s<a;)for(var l=0,u=t[s],c=n?n(u):u;(l=i(o,c,l,r))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;_s(i)?Ke.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+pt(wn()*(t-e+1))}function Kr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Is(Es(e,t,rl),e+"")}function Jr(e){return Jn(jo(e))}function $r(e,t){var n=jo(e);return Ps(n,or(t,0,n.length))}function Qr(e,t,n,r){if(!Qa(e))return e;for(var s=-1,a=(t=yi(t,e)).length,o=a-1,l=e;null!=l&&++s<a;){var u=Ns(t[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(s!=o){var h=l[u];(c=r?r(h,u,l):i)===i&&(c=Qa(h)?h:_s(t[s+1])?[]:{})}tr(l,u,c),l=l[u]}return e}var ei=Tn?function(e,t){return Tn.set(e,t),e}:rl,ti=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Ps(jo(e))}function ri(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=n(s);++i<s;)a[i]=e[i+t];return a}function ii(e,t){var n;return dr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,a=e[s];null!==a&&!oo(a)&&(n?a<=t:a<t)?r=s+1:i=s}return i}return ai(e,t,rl,n)}function ai(e,t,n,r){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=n(t))!==t,l=null===t,u=oo(t),c=t===i;s<a;){var h=pt((s+a)/2),d=n(e[h]),f=d!==i,p=null===d,g=d===d,m=oo(d);if(o)var v=r||g;else v=c?g&&(r||f):l?g&&f&&(r||!p):u?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?s=h+1:a=h}return yn(a,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n],o=t?t(a):a;if(!n||!za(o,l)){var l=o;s[i++]=0===a?0:a}}return s}function li(e){return"number"==typeof e?e:oo(e)?g:+e}function ui(e){if("string"==typeof e)return e;if(Ha(e))return Bt(e,ui)+"";if(oo(e))return zn?zn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ci(e,t,n){var r=-1,i=Lt,s=e.length,a=!0,o=[],l=o;if(n)a=!1,i=Pt;else if(s>=200){var u=t?null:Ki(e);if(u)return dn(u);a=!1,i=tn,l=new Zn}else l=t?[]:o;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),o.push(c)}else i(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function hi(e,t){return null==(e=As(e,t=yi(t,e)))||delete e[Ns(Ks(t))]}function di(e,t,n,r){return Qr(e,t,n(Sr(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ri(e,r?0:s,r?s+1:i):ri(e,r?s+1:0,r?i:s)}function pi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Rt(t,function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))},n)}function gi(e,t,r){var i=e.length;if(i<2)return i?ci(e[0]):[];for(var s=-1,a=n(i);++s<i;)for(var o=e[s],l=-1;++l<i;)l!=s&&(a[s]=hr(a[s]||o,e[l],t,r));return ci(vr(a,1),t,r)}function mi(e,t,n){for(var r=-1,s=e.length,a=t.length,o={};++r<s;){var l=r<a?t[r]:i;n(o,e[r],l)}return o}function vi(e){return Wa(e)?e:[]}function _i(e){return"function"==typeof e?e:rl}function yi(e,t){return Ha(e)?e:bs(e,t)?[e]:Bs(_o(e))}var bi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var wi=nt||function(e){return gt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var n=e.length,r=Ye?Ye(n):new e.constructor(n);return e.copy(r),r}function Ci(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Di(e,t){var n=t?Ci(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==i,r=null===e,s=e===e,a=oo(e),o=t!==i,l=null===t,u=t===t,c=oo(t);if(!l&&!c&&!a&&e>t||a&&o&&u&&!l&&!c||r&&o&&u||!n&&u||!s)return 1;if(!r&&!a&&!c&&e<t||c&&n&&s&&!r&&!a||l&&n&&s||!o&&s||!u)return-1}return 0}function Ai(e,t,r,i){for(var s=-1,a=e.length,o=r.length,l=-1,u=t.length,c=Zt(a-o,0),h=n(u+c),d=!i;++l<u;)h[l]=t[l];for(;++s<o;)(d||s<a)&&(h[r[s]]=e[s]);for(;c--;)h[l++]=e[s++];return h}function ki(e,t,r,i){for(var s=-1,a=e.length,o=-1,l=r.length,u=-1,c=t.length,h=Zt(a-l,0),d=n(h+c),f=!i;++s<h;)d[s]=e[s];for(var p=s;++u<c;)d[p+u]=t[u];for(;++o<l;)(f||s<a)&&(d[p+r[o]]=e[s++]);return d}function Mi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ti(e,t,n,r){var s=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var l=t[a],u=r?r(n[l],e[l],l,n,e):i;u===i&&(u=e[l]),s?sr(n,l,u):tr(n,l,u)}return n}function Ii(e,t){return function(n,r){var i=Ha(n)?kt:rr,s=t?t():{};return i(n,e,ls(r,2),s)}}function Oi(e){return Xr(function(t,n){var r=-1,s=n.length,a=s>1?n[s-1]:i,o=s>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(s--,a):i,o&&ys(n[0],n[1],o)&&(a=s<3?i:a,s=1),t=Ee(t);++r<s;){var l=n[r];l&&e(t,l,r,a)}return t})}function Li(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Ee(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}function Pi(e){return function(t,n,r){for(var i=-1,s=Ee(t),a=r(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===n(s[l],l,s))break}return t}}function Bi(e){return function(t){var n=ln(t=_o(t))?gn(t):i,r=n?n[0]:t.charAt(0),s=n?xi(n,1).join(""):t.slice(1);return r[e]()+s}}function Ni(e){return function(t){return Rt(Jo(Ho(t).replace(et,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return Qa(r)?r:n}}function Fi(e){return function(t,n,r){var s=Ee(t);if(!Ya(t)){var a=ls(n,3);t=Io(t),n=function(e){return a(s[e],e,s)}}var o=e(t,n,r);return o>-1?s[a?t[o]:o]:i}}function zi(e){return ns(function(t){var n=t.length,r=n,a=Hn.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new Me(s);if(a&&!l&&"wrapper"==as(o))var l=new Hn([],!0)}for(r=l?r:n;++r<n;){var u=as(o=t[r]),c="wrapper"==u?ss(o):i;l=c&&xs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[as(c[0])].apply(l,c[3]):1==o.length&&xs(o)?l[u]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Ha(r))return l.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}})}function ji(e,t,r,s,a,o,l,u,c,d){var f=t&h,p=1&t,g=2&t,m=24&t,v=512&t,_=g?i:Ri(e);return function h(){for(var y=arguments.length,b=n(y),x=y;x--;)b[x]=arguments[x];if(m)var w=os(h),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(s&&(b=Ai(b,s,a,m)),o&&(b=ki(b,o,l,m)),y-=S,m&&y<d){var C=hn(b,w);return qi(e,t,ji,h.placeholder,r,b,C,u,c,d-y)}var D=p?r:this,E=g?D[e]:e;return y=b.length,u?b=function(e,t){var n=e.length,r=yn(t.length,n),s=Mi(e);for(;r--;){var a=t[r];e[r]=_s(a,n)?s[a]:i}return e}(b,u):v&&y>1&&b.reverse(),f&&c<y&&(b.length=c),this&&this!==gt&&this instanceof h&&(E=_||Ri(E)),E.apply(D,b)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return br(e,function(e,i,s){t(r,n(e),i,s)}),r}(n,e,t(r),{})}}function Ui(e,t){return function(n,r){var s;if(n===i&&r===i)return t;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=li(n),r=li(r)),s=e(n,r)}return s}}function Hi(e){return ns(function(t){return t=Bt(t,Qt(ls())),Xr(function(n){var r=this;return e(t,function(e){return At(e,r,n)})})})}function Gi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Kr(t,e):t;var r=Kr(t,ft(e/pn(t)));return ln(t)?xi(gn(r),0,e).join(""):r.slice(0,e)}function Yi(e){return function(t,r,s){return s&&"number"!=typeof s&&ys(t,r,s)&&(r=s=i),t=fo(t),r===i?(r=t,t=0):r=fo(r),function(e,t,r,i){for(var s=-1,a=Zt(ft((t-e)/(r||1)),0),o=n(a);a--;)o[i?a:++s]=e,e+=r;return o}(t,r,s=s===i?t<r?1:-1:fo(s),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=mo(t),n=mo(n)),e(t,n)}}function qi(e,t,n,r,s,a,o,l,h,d){var f=8&t;t|=f?u:c,4&(t&=~(f?c:u))||(t&=-4);var p=[e,t,s,f?a:i,f?o:i,f?i:a,f?i:o,l,h,d],g=n.apply(i,p);return xs(e)&&Ms(g,p),g.placeholder=r,Os(g,e,t)}function Zi(e){var t=De[e];return function(e,n){if(e=mo(e),(n=null==n?0:yn(po(n),292))&&yt(e)){var r=(_o(e)+"e").split("e");return+((r=(_o(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ki=An&&1/dn(new An([,-0]))[1]==f?function(e){return new An(e)}:ll;function Xi(e){return function(t){var n=ps(t);return n==D?un(t):n==T?fn(t):function(e,t){return Bt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ji(e,t,r,a,f,p,g,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Me(s);var _=a?a.length:0;if(_||(t&=-97,a=f=i),g=g===i?g:Zt(po(g),0),m=m===i?m:po(m),_-=f?f.length:0,t&c){var y=a,b=f;a=f=i}var x=v?i:ss(e),w=[e,t,r,a,f,y,b,p,g,m];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?Ai(u,l,t[4]):l,e[4]=u?hn(e[3],o):t[4]}(l=t[5])&&(u=e[5],e[5]=u?ki(u,l,t[6]):l,e[6]=u?hn(e[5],o):t[6]);(l=t[7])&&(e[7]=l);r&h&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],a=w[3],f=w[4],!(m=w[9]=w[9]===i?v?0:e.length:Zt(w[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==l?function(e,t,r){var s=Ri(e);return function a(){for(var o=arguments.length,l=n(o),u=o,c=os(a);u--;)l[u]=arguments[u];var h=o<3&&l[0]!==c&&l[o-1]!==c?[]:hn(l,c);return(o-=h.length)<r?qi(e,t,ji,a.placeholder,i,l,h,i,i,r-o):At(this&&this!==gt&&this instanceof a?s:e,this,l)}}(e,t,m):t!=u&&33!=t||f.length?ji.apply(i,w):function(e,t,r,i){var s=1&t,a=Ri(e);return function t(){for(var o=-1,l=arguments.length,u=-1,c=i.length,h=n(c+l),d=this&&this!==gt&&this instanceof t?a:e;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++o];return At(d,s?r:this,h)}}(e,t,r,a);else var S=function(e,t,n){var r=1&t,i=Ri(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Os((x?ei:Ms)(S,w),e,t)}function $i(e,t,n,r){return e===i||za(e,Oe[n])&&!Be.call(r,n)?t:e}function Qi(e,t,n,r,s,a){return Qa(e)&&Qa(t)&&(a.set(t,e),Ur(e,t,i,Qi,a),a.delete(t)),e}function es(e){return ro(e)?i:e}function ts(e,t,n,r,s,a){var o=1&n,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(e),h=a.get(t);if(c&&h)return c==t&&h==e;var d=-1,f=!0,p=2&n?new Zn:i;for(a.set(e,t),a.set(t,e);++d<l;){var g=e[d],m=t[d];if(r)var v=o?r(m,g,d,t,e,a):r(g,m,d,e,t,a);if(v!==i){if(v)continue;f=!1;break}if(p){if(!zt(t,function(e,t){if(!tn(p,t)&&(g===e||s(g,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(g!==m&&!s(g,m,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function ns(e){return Is(Es(e,i,Gs),e+"")}function rs(e){return Cr(e,Io,ds)}function is(e){return Cr(e,Oo,fs)}var ss=Tn?function(e){return Tn.get(e)}:ll;function as(e){for(var t=e.name+"",n=In[t],r=Be.call(In,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function os(e){return(Be.call(jn,"placeholder")?jn:e).placeholder}function ls(){var e=jn.iteratee||il;return e=e===il?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function us(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function cs(e){for(var t=Io(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Cs(i)]}return t}function hs(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Pr(n)?n:i}var ds=mt?function(e){return null==e?[]:(e=Ee(e),Ot(mt(e),function(t){return Ze.call(e,t)}))}:gl,fs=mt?function(e){for(var t=[];e;)Nt(t,ds(e)),e=We(e);return t}:gl,ps=Dr;function gs(e,t,n){for(var r=-1,i=(t=yi(t,e)).length,s=!1;++r<i;){var a=Ns(t[r]);if(!(s=null!=e&&n(e,a)))break;e=e[a]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&$a(i)&&_s(a,i)&&(Ha(e)||Ua(e))}function ms(e){return"function"!=typeof e.constructor||Ss(e)?{}:Vn(We(e))}function vs(e){return Ha(e)||Ua(e)||!!(Xe&&e&&e[Xe])}function _s(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function ys(e,t,n){if(!Qa(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&_s(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function bs(e,t){if(Ha(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!oo(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ee(t))}function xs(e){var t=as(e),n=jn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=ss(n);return!!r&&e===r[0]}(Cn&&ps(new Cn(new ArrayBuffer(1)))!=B||Dn&&ps(new Dn)!=D||En&&ps(En.resolve())!=k||An&&ps(new An)!=T||kn&&ps(new kn)!=L)&&(ps=function(e){var t=Dr(e),n=t==A?e.constructor:i,r=n?Rs(n):"";if(r)switch(r){case On:return B;case Ln:return D;case Pn:return k;case Bn:return T;case Nn:return L}return t});var ws=Le?Xa:ml;function Ss(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Cs(e){return e===e&&!Qa(e)}function Ds(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ee(n)))}}function Es(e,t,r){return t=Zt(t===i?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=Zt(i.length-t,0),o=n(a);++s<a;)o[s]=i[t+s];s=-1;for(var l=n(t+1);++s<t;)l[s]=i[s];return l[t]=r(o),At(e,this,l)}}function As(e,t){return t.length<2?e:Sr(e,ri(t,0,-1))}function ks(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Ms=Ls(ei),Ts=ct||function(e,t){return gt.setTimeout(e,t)},Is=Ls(ti);function Os(e,t,n){var r=t+"";return Is(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Mt(v,function(n){var r="_."+n[0];t&n[1]&&!Lt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Ls(e){var t=0,n=0;return function(){var r=bn(),s=16-(r-n);if(n=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ps(e,t){var n=-1,r=e.length,s=r-1;for(t=t===i?r:t;++n<t;){var a=Zr(n,s),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}var Bs=function(e){var t=La(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)}),t});function Ns(e){if("string"==typeof e||oo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Rs(e){if(null!=e){try{return Pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Gn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zs=Xr(function(e,t){return Wa(e)?hr(e,vr(t,1,Wa,!0)):[]}),js=Xr(function(e,t){var n=Ks(t);return Wa(n)&&(n=i),Wa(e)?hr(e,vr(t,1,Wa,!0),ls(n,2)):[]}),Vs=Xr(function(e,t){var n=Ks(t);return Wa(n)&&(n=i),Wa(e)?hr(e,vr(t,1,Wa,!0),i,n):[]});function Us(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=Zt(r+i,0)),Ut(e,ls(t,3),i)}function Hs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r-1;return n!==i&&(s=po(n),s=n<0?Zt(r+s,0):yn(s,r-1)),Ut(e,ls(t,3),s,!0)}function Gs(e){return(null==e?0:e.length)?vr(e,1):[]}function Ys(e){return e&&e.length?e[0]:i}var Ws=Xr(function(e){var t=Bt(e,vi);return t.length&&t[0]===e[0]?Mr(t):[]}),qs=Xr(function(e){var t=Ks(e),n=Bt(e,vi);return t===Ks(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Mr(n,ls(t,2)):[]}),Zs=Xr(function(e){var t=Ks(e),n=Bt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Mr(n,i,t):[]});function Ks(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xs=Xr(Js);function Js(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var $s=ns(function(e,t){var n=null==e?0:e.length,r=ar(e,t);return qr(e,Bt(t,function(e){return _s(e,n)?+e:e}).sort(Ei)),r});function Qs(e){return null==e?e:Sn.call(e)}var ea=Xr(function(e){return ci(vr(e,1,Wa,!0))}),ta=Xr(function(e){var t=Ks(e);return Wa(t)&&(t=i),ci(vr(e,1,Wa,!0),ls(t,2))}),na=Xr(function(e){var t=Ks(e);return t="function"==typeof t?t:i,ci(vr(e,1,Wa,!0),i,t)});function ra(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,function(e){if(Wa(e))return t=Zt(e.length,t),!0}),Jt(t,function(t){return Bt(e,qt(t))})}function ia(e,t){if(!e||!e.length)return[];var n=ra(e);return null==t?n:Bt(n,function(e){return At(t,i,e)})}var sa=Xr(function(e,t){return Wa(e)?hr(e,t):[]}),aa=Xr(function(e){return gi(Ot(e,Wa))}),oa=Xr(function(e){var t=Ks(e);return Wa(t)&&(t=i),gi(Ot(e,Wa),ls(t,2))}),la=Xr(function(e){var t=Ks(e);return t="function"==typeof t?t:i,gi(Ot(e,Wa),i,t)}),ua=Xr(ra);var ca=Xr(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ia(e,n)});function ha(e){var t=jn(e);return t.__chain__=!0,t}function da(e,t){return t(e)}var fa=ns(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,s=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&_s(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:da,args:[s],thisArg:i}),new Hn(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(s)});var pa=Ii(function(e,t,n){Be.call(e,n)?++e[n]:sr(e,n,1)});var ga=Fi(Us),ma=Fi(Hs);function va(e,t){return(Ha(e)?Mt:dr)(e,ls(t,3))}function _a(e,t){return(Ha(e)?Tt:fr)(e,ls(t,3))}var ya=Ii(function(e,t,n){Be.call(e,n)?e[n].push(t):sr(e,n,[t])});var ba=Xr(function(e,t,r){var i=-1,s="function"==typeof t,a=Ya(e)?n(e.length):[];return dr(e,function(e){a[++i]=s?At(t,e,r):Tr(e,t,r)}),a}),xa=Ii(function(e,t,n){sr(e,n,t)});function wa(e,t){return(Ha(e)?Bt:zr)(e,ls(t,3))}var Sa=Ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Ca=Xr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ys(e,t[0],t[1])?t=[]:n>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,vr(t,1),[])}),Da=it||function(){return gt.Date.now()};function Ea(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Me(s);return e=po(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var ka=Xr(function(e,t,n){var r=1;if(n.length){var i=hn(n,os(ka));r|=u}return Ji(e,r,t,n,i)}),Ma=Xr(function(e,t,n){var r=3;if(n.length){var i=hn(n,os(Ma));r|=u}return Ji(t,r,e,n,i)});function Ta(e,t,n){var r,a,o,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Me(s);function g(t){var n=r,s=a;return r=a=i,h=t,l=e.apply(s,n)}function m(e){var n=e-c;return c===i||n>=t||n<0||f&&e-h>=o}function v(){var e=Da();if(m(e))return _(e);u=Ts(v,function(e){var n=t-(e-c);return f?yn(n,o-(e-h)):n}(e))}function _(e){return u=i,p&&r?g(e):(r=a=i,l)}function y(){var e=Da(),n=m(e);if(r=arguments,a=this,c=e,n){if(u===i)return function(e){return h=e,u=Ts(v,t),d?g(e):l}(c);if(f)return wi(u),u=Ts(v,t),g(c)}return u===i&&(u=Ts(v,t)),l}return t=mo(t)||0,Qa(n)&&(d=!!n.leading,o=(f="maxWait"in n)?Zt(mo(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){u!==i&&wi(u),h=0,r=c=a=u=i},y.flush=function(){return u===i?l:_(Da())},y}var Ia=Xr(function(e,t){return cr(e,1,t)}),Oa=Xr(function(e,t,n){return cr(e,mo(t)||0,n)});function La(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(La.Cache||qn),n}function Pa(e){if("function"!=typeof e)throw new Me(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}La.Cache=qn;var Ba=bi(function(e,t){var n=(t=1==t.length&&Ha(t[0])?Bt(t[0],Qt(ls())):Bt(vr(t,1),Qt(ls()))).length;return Xr(function(r){for(var i=-1,s=yn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return At(e,this,r)})}),Na=Xr(function(e,t){var n=hn(t,os(Na));return Ji(e,u,i,t,n)}),Ra=Xr(function(e,t){var n=hn(t,os(Ra));return Ji(e,c,i,t,n)}),Fa=ns(function(e,t){return Ji(e,d,i,i,i,t)});function za(e,t){return e===t||e!==e&&t!==t}var ja=Wi(Er),Va=Wi(function(e,t){return e>=t}),Ua=Ir(function(){return arguments}())?Ir:function(e){return eo(e)&&Be.call(e,"callee")&&!Ze.call(e,"callee")},Ha=n.isArray,Ga=xt?Qt(xt):function(e){return eo(e)&&Dr(e)==P};function Ya(e){return null!=e&&$a(e.length)&&!Xa(e)}function Wa(e){return eo(e)&&Ya(e)}var qa=vt||ml,Za=wt?Qt(wt):function(e){return eo(e)&&Dr(e)==x};function Ka(e){if(!eo(e))return!1;var t=Dr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ro(e)}function Xa(e){if(!Qa(e))return!1;var t=Dr(e);return t==S||t==C||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ja(e){return"number"==typeof e&&e==po(e)}function $a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function Qa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}var to=St?Qt(St):function(e){return eo(e)&&ps(e)==D};function no(e){return"number"==typeof e||eo(e)&&Dr(e)==E}function ro(e){if(!eo(e)||Dr(e)!=A)return!1;var t=We(e);if(null===t)return!0;var n=Be.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==ze}var io=Ct?Qt(Ct):function(e){return eo(e)&&Dr(e)==M};var so=Dt?Qt(Dt):function(e){return eo(e)&&ps(e)==T};function ao(e){return"string"==typeof e||!Ha(e)&&eo(e)&&Dr(e)==I}function oo(e){return"symbol"==typeof e||eo(e)&&Dr(e)==O}var lo=Et?Qt(Et):function(e){return eo(e)&&$a(e.length)&&!!lt[Dr(e)]};var uo=Wi(Fr),co=Wi(function(e,t){return e<=t});function ho(e){if(!e)return[];if(Ya(e))return ao(e)?gn(e):Mi(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=ps(e);return(t==D?un:t==T?dn:jo)(e)}function fo(e){return e?(e=mo(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function po(e){var t=fo(e),n=t%1;return t===t?n?t-n:t:0}function go(e){return e?or(po(e),0,m):0}function mo(e){if("number"==typeof e)return e;if(oo(e))return g;if(Qa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ve.test(e);return n||ye.test(e)?dt(e.slice(2),n?2:8):me.test(e)?g:+e}function vo(e){return Ti(e,Oo(e))}function _o(e){return null==e?"":ui(e)}var yo=Oi(function(e,t){if(Ss(t)||Ya(t))Ti(t,Io(t),e);else for(var n in t)Be.call(t,n)&&tr(e,n,t[n])}),bo=Oi(function(e,t){Ti(t,Oo(t),e)}),xo=Oi(function(e,t,n,r){Ti(t,Oo(t),e,r)}),wo=Oi(function(e,t,n,r){Ti(t,Io(t),e,r)}),So=ns(ar);var Co=Xr(function(e,t){e=Ee(e);var n=-1,r=t.length,s=r>2?t[2]:i;for(s&&ys(t[0],t[1],s)&&(r=1);++n<r;)for(var a=t[n],o=Oo(a),l=-1,u=o.length;++l<u;){var c=o[l],h=e[c];(h===i||za(h,Oe[c])&&!Be.call(e,c))&&(e[c]=a[c])}return e}),Do=Xr(function(e){return e.push(i,Qi),At(Po,i,e)});function Eo(e,t,n){var r=null==e?i:Sr(e,t);return r===i?n:r}function Ao(e,t){return null!=e&&gs(e,t,kr)}var ko=Vi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n},el(rl)),Mo=Vi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Be.call(e,t)?e[t].push(n):e[t]=[n]},ls),To=Xr(Tr);function Io(e){return Ya(e)?Xn(e):Nr(e)}function Oo(e){return Ya(e)?Xn(e,!0):Rr(e)}var Lo=Oi(function(e,t,n){Ur(e,t,n)}),Po=Oi(function(e,t,n,r){Ur(e,t,n,r)}),Bo=ns(function(e,t){var n={};if(null==e)return n;var r=!1;t=Bt(t,function(t){return t=yi(t,e),r||(r=t.length>1),t}),Ti(e,is(e),n),r&&(n=lr(n,7,es));for(var i=t.length;i--;)hi(n,t[i]);return n});var No=ns(function(e,t){return null==e?{}:function(e,t){return Yr(e,t,function(t,n){return Ao(e,n)})}(e,t)});function Ro(e,t){if(null==e)return{};var n=Bt(is(e),function(e){return[e]});return t=ls(t),Yr(e,n,function(e,n){return t(e,n[0])})}var Fo=Xi(Io),zo=Xi(Oo);function jo(e){return null==e?[]:en(e,Io(e))}var Vo=Ni(function(e,t,n){return t=t.toLowerCase(),e+(n?Uo(t):t)});function Uo(e){return Xo(_o(e).toLowerCase())}function Ho(e){return(e=_o(e))&&e.replace(xe,sn).replace(tt,"")}var Go=Ni(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Yo=Ni(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wo=Bi("toLowerCase");var qo=Ni(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var Zo=Ni(function(e,t,n){return e+(n?" ":"")+Xo(t)});var Ko=Ni(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Xo=Bi("toUpperCase");function Jo(e,t,n){return e=_o(e),(t=n?i:t)===i?function(e){return st.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var $o=Xr(function(e,t){try{return At(e,i,t)}catch(n){return Ka(n)?n:new oe(n)}}),Qo=ns(function(e,t){return Mt(t,function(t){t=Ns(t),sr(e,t,ka(e[t],e))}),e});function el(e){return function(){return e}}var tl=zi(),nl=zi(!0);function rl(e){return e}function il(e){return Br("function"==typeof e?e:lr(e,1))}var sl=Xr(function(e,t){return function(n){return Tr(n,e,t)}}),al=Xr(function(e,t){return function(n){return Tr(e,n,t)}});function ol(e,t,n){var r=Io(t),i=wr(t,r);null!=n||Qa(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Io(t)));var s=!(Qa(n)&&"chain"in n)||!!n.chain,a=Xa(e);return Mt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Mi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Nt([this.value()],arguments))})}),e}function ll(){}var ul=Hi(Bt),cl=Hi(It),hl=Hi(zt);function dl(e){return bs(e)?qt(Ns(e)):function(e){return function(t){return Sr(t,e)}}(e)}var fl=Yi(),pl=Yi(!0);function gl(){return[]}function ml(){return!1}var vl=Ui(function(e,t){return e+t},0),_l=Zi("ceil"),yl=Ui(function(e,t){return e/t},1),bl=Zi("floor");var xl=Ui(function(e,t){return e*t},1),wl=Zi("round"),Sl=Ui(function(e,t){return e-t},0);return jn.after=function(e,t){if("function"!=typeof t)throw new Me(s);return e=po(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Ea,jn.assign=yo,jn.assignIn=bo,jn.assignInWith=xo,jn.assignWith=wo,jn.at=So,jn.before=Aa,jn.bind=ka,jn.bindAll=Qo,jn.bindKey=Ma,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ha(e)?e:[e]},jn.chain=ha,jn.chunk=function(e,t,r){t=(r?ys(e,t,r):t===i)?1:Zt(po(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var a=0,o=0,l=n(ft(s/t));a<s;)l[o++]=ri(e,a,a+=t);return l},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Nt(Ha(r)?Mi(r):[r],vr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=ls();return e=t?Bt(e,function(e){if("function"!=typeof e[1])throw new Me(s);return[n(e[0]),e[1]]}):[],Xr(function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}})},jn.conforms=function(e){return function(e){var t=Io(e);return function(n){return ur(n,e,t)}}(lr(e,1))},jn.constant=el,jn.countBy=pa,jn.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},jn.curry=function e(t,n,r){var s=Ji(t,8,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},jn.curryRight=function e(t,n,r){var s=Ji(t,l,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},jn.debounce=Ta,jn.defaults=Co,jn.defaultsDeep=Do,jn.defer=Ia,jn.delay=Oa,jn.difference=zs,jn.differenceBy=js,jn.differenceWith=Vs,jn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:po(t))<0?0:t,r):[]},jn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:po(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0):[]},jn.fill=function(e,t,n,r){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&ys(e,t,n)&&(n=0,r=s),function(e,t,n,r){var s=e.length;for((n=po(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:po(r))<0&&(r+=s),r=n>r?0:go(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},jn.filter=function(e,t){return(Ha(e)?Ot:mr)(e,ls(t,3))},jn.flatMap=function(e,t){return vr(wa(e,t),1)},jn.flatMapDeep=function(e,t){return vr(wa(e,t),f)},jn.flatMapDepth=function(e,t,n){return n=n===i?1:po(n),vr(wa(e,t),n)},jn.flatten=Gs,jn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,f):[]},jn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:po(t)):[]},jn.flip=function(e){return Ji(e,512)},jn.flow=tl,jn.flowRight=nl,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:wr(e,Io(e))},jn.functionsIn=function(e){return null==e?[]:wr(e,Oo(e))},jn.groupBy=ya,jn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},jn.intersection=Ws,jn.intersectionBy=qs,jn.intersectionWith=Zs,jn.invert=ko,jn.invertBy=Mo,jn.invokeMap=ba,jn.iteratee=il,jn.keyBy=xa,jn.keys=Io,jn.keysIn=Oo,jn.map=wa,jn.mapKeys=function(e,t){var n={};return t=ls(t,3),br(e,function(e,r,i){sr(n,t(e,r,i),e)}),n},jn.mapValues=function(e,t){var n={};return t=ls(t,3),br(e,function(e,r,i){sr(n,r,t(e,r,i))}),n},jn.matches=function(e){return jr(lr(e,1))},jn.matchesProperty=function(e,t){return Vr(e,lr(t,1))},jn.memoize=La,jn.merge=Lo,jn.mergeWith=Po,jn.method=sl,jn.methodOf=al,jn.mixin=ol,jn.negate=Pa,jn.nthArg=function(e){return e=po(e),Xr(function(t){return Hr(t,e)})},jn.omit=Bo,jn.omitBy=function(e,t){return Ro(e,Pa(ls(t)))},jn.once=function(e){return Aa(2,e)},jn.orderBy=function(e,t,n,r){return null==e?[]:(Ha(t)||(t=null==t?[]:[t]),Ha(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},jn.over=ul,jn.overArgs=Ba,jn.overEvery=cl,jn.overSome=hl,jn.partial=Na,jn.partialRight=Ra,jn.partition=Sa,jn.pick=No,jn.pickBy=Ro,jn.property=dl,jn.propertyOf=function(e){return function(t){return null==e?i:Sr(e,t)}},jn.pull=Xs,jn.pullAll=Js,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,ls(n,2)):e},jn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},jn.pullAt=$s,jn.range=fl,jn.rangeRight=pl,jn.rearg=Fa,jn.reject=function(e,t){return(Ha(e)?Ot:mr)(e,Pa(ls(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=ls(t,3);++r<s;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return qr(e,i),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Me(s);return Xr(e,t=t===i?t:po(t))},jn.reverse=Qs,jn.sampleSize=function(e,t,n){return t=(n?ys(e,t,n):t===i)?1:po(t),(Ha(e)?$n:$r)(e,t)},jn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},jn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Qr(e,t,n,r)},jn.shuffle=function(e){return(Ha(e)?Qn:ni)(e)},jn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ys(e,t,n)?(t=0,n=r):(t=null==t?0:po(t),n=n===i?r:po(n)),ri(e,t,n)):[]},jn.sortBy=Ca,jn.sortedUniq=function(e){return e&&e.length?oi(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?oi(e,ls(t,2)):[]},jn.split=function(e,t,n){return n&&"number"!=typeof n&&ys(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=_o(e))&&("string"==typeof t||null!=t&&!io(t))&&!(t=ui(t))&&ln(e)?xi(gn(e),0,n):e.split(t,n):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Me(s);return t=null==t?0:Zt(po(t),0),Xr(function(n){var r=n[t],i=xi(n,0,t);return r&&Nt(i,r),At(e,this,i)})},jn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},jn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:po(t))<0?0:t):[]},jn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:po(t)))<0?0:t,r):[]},jn.takeRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?fi(e,ls(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Me(s);return Qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ta(e,t,{leading:r,maxWait:t,trailing:i})},jn.thru=da,jn.toArray=ho,jn.toPairs=Fo,jn.toPairsIn=zo,jn.toPath=function(e){return Ha(e)?Bt(e,Ns):oo(e)?[e]:Mi(Bs(_o(e)))},jn.toPlainObject=vo,jn.transform=function(e,t,n){var r=Ha(e),i=r||qa(e)||lo(e);if(t=ls(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:Qa(e)&&Xa(s)?Vn(We(e)):{}}return(i?Mt:br)(e,function(e,r,i){return t(n,e,r,i)}),n},jn.unary=function(e){return Ea(e,1)},jn.union=ea,jn.unionBy=ta,jn.unionWith=na,jn.uniq=function(e){return e&&e.length?ci(e):[]},jn.uniqBy=function(e,t){return e&&e.length?ci(e,ls(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ci(e,i,t):[]},jn.unset=function(e,t){return null==e||hi(e,t)},jn.unzip=ra,jn.unzipWith=ia,jn.update=function(e,t,n){return null==e?e:di(e,t,_i(n))},jn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,_i(n),r)},jn.values=jo,jn.valuesIn=function(e){return null==e?[]:en(e,Oo(e))},jn.without=sa,jn.words=Jo,jn.wrap=function(e,t){return Na(_i(t),e)},jn.xor=aa,jn.xorBy=oa,jn.xorWith=la,jn.zip=ua,jn.zipObject=function(e,t){return mi(e||[],t||[],tr)},jn.zipObjectDeep=function(e,t){return mi(e||[],t||[],Qr)},jn.zipWith=ca,jn.entries=Fo,jn.entriesIn=zo,jn.extend=bo,jn.extendWith=xo,ol(jn,jn),jn.add=vl,jn.attempt=$o,jn.camelCase=Vo,jn.capitalize=Uo,jn.ceil=_l,jn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=mo(n))===n?n:0),t!==i&&(t=(t=mo(t))===t?t:0),or(mo(e),t,n)},jn.clone=function(e){return lr(e,4)},jn.cloneDeep=function(e){return lr(e,5)},jn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},jn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},jn.conformsTo=function(e,t){return null==t||ur(e,t,Io(t))},jn.deburr=Ho,jn.defaultTo=function(e,t){return null==e||e!==e?t:e},jn.divide=yl,jn.endsWith=function(e,t,n){e=_o(e),t=ui(t);var r=e.length,s=n=n===i?r:or(po(n),0,r);return(n-=t.length)>=0&&e.slice(n,s)==t},jn.eq=za,jn.escape=function(e){return(e=_o(e))&&J.test(e)?e.replace(K,an):e},jn.escapeRegExp=function(e){return(e=_o(e))&&se.test(e)?e.replace(ie,"\\$&"):e},jn.every=function(e,t,n){var r=Ha(e)?It:pr;return n&&ys(e,t,n)&&(t=i),r(e,ls(t,3))},jn.find=ga,jn.findIndex=Us,jn.findKey=function(e,t){return Vt(e,ls(t,3),br)},jn.findLast=ma,jn.findLastIndex=Hs,jn.findLastKey=function(e,t){return Vt(e,ls(t,3),xr)},jn.floor=bl,jn.forEach=va,jn.forEachRight=_a,jn.forIn=function(e,t){return null==e?e:_r(e,ls(t,3),Oo)},jn.forInRight=function(e,t){return null==e?e:yr(e,ls(t,3),Oo)},jn.forOwn=function(e,t){return e&&br(e,ls(t,3))},jn.forOwnRight=function(e,t){return e&&xr(e,ls(t,3))},jn.get=Eo,jn.gt=ja,jn.gte=Va,jn.has=function(e,t){return null!=e&&gs(e,t,Ar)},jn.hasIn=Ao,jn.head=Ys,jn.identity=rl,jn.includes=function(e,t,n,r){e=Ya(e)?e:jo(e),n=n&&!r?po(n):0;var i=e.length;return n<0&&(n=Zt(i+n,0)),ao(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:po(n);return i<0&&(i=Zt(r+i,0)),Ht(e,t,i)},jn.inRange=function(e,t,n){return t=fo(t),n===i?(n=t,t=0):n=fo(n),function(e,t,n){return e>=yn(t,n)&&e<Zt(t,n)}(e=mo(e),t,n)},jn.invoke=To,jn.isArguments=Ua,jn.isArray=Ha,jn.isArrayBuffer=Ga,jn.isArrayLike=Ya,jn.isArrayLikeObject=Wa,jn.isBoolean=function(e){return!0===e||!1===e||eo(e)&&Dr(e)==b},jn.isBuffer=qa,jn.isDate=Za,jn.isElement=function(e){return eo(e)&&1===e.nodeType&&!ro(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Ha(e)||"string"==typeof e||"function"==typeof e.splice||qa(e)||lo(e)||Ua(e)))return!e.length;var t=ps(e);if(t==D||t==T)return!e.size;if(Ss(e))return!Nr(e).length;for(var n in e)if(Be.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Or(e,t)},jn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},jn.isError=Ka,jn.isFinite=function(e){return"number"==typeof e&&yt(e)},jn.isFunction=Xa,jn.isInteger=Ja,jn.isLength=$a,jn.isMap=to,jn.isMatch=function(e,t){return e===t||Lr(e,t,cs(t))},jn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,cs(t),n)},jn.isNaN=function(e){return no(e)&&e!=+e},jn.isNative=function(e){if(ws(e))throw new oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=no,jn.isObject=Qa,jn.isObjectLike=eo,jn.isPlainObject=ro,jn.isRegExp=io,jn.isSafeInteger=function(e){return Ja(e)&&e>=-9007199254740991&&e<=p},jn.isSet=so,jn.isString=ao,jn.isSymbol=oo,jn.isTypedArray=lo,jn.isUndefined=function(e){return e===i},jn.isWeakMap=function(e){return eo(e)&&ps(e)==L},jn.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==Dr(e)},jn.join=function(e,t){return null==e?"":bt.call(e,t)},jn.kebabCase=Go,jn.last=Ks,jn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=po(n))<0?Zt(r+s,0):yn(s,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,s):Ut(e,Yt,s,!0)},jn.lowerCase=Yo,jn.lowerFirst=Wo,jn.lt=uo,jn.lte=co,jn.max=function(e){return e&&e.length?gr(e,rl,Er):i},jn.maxBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Er):i},jn.mean=function(e){return Wt(e,rl)},jn.meanBy=function(e,t){return Wt(e,ls(t,2))},jn.min=function(e){return e&&e.length?gr(e,rl,Fr):i},jn.minBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Fr):i},jn.stubArray=gl,jn.stubFalse=ml,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=xl,jn.nth=function(e,t){return e&&e.length?Hr(e,po(t)):i},jn.noConflict=function(){return gt._===this&&(gt._=je),this},jn.noop=ll,jn.now=Da,jn.pad=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(pt(i),n)+e+Gi(ft(i),n)},jn.padEnd=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;return t&&r<t?e+Gi(t-r,n):e},jn.padStart=function(e,t,n){e=_o(e);var r=(t=po(t))?pn(e):0;return t&&r<t?Gi(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(_o(e).replace(ae,""),t||0)},jn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ys(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fo(e),t===i?(t=e,e=0):t=fo(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var s=wn();return yn(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Zr(e,t)},jn.reduce=function(e,t,n){var r=Ha(e)?Rt:Kt,i=arguments.length<3;return r(e,ls(t,4),n,i,dr)},jn.reduceRight=function(e,t,n){var r=Ha(e)?Ft:Kt,i=arguments.length<3;return r(e,ls(t,4),n,i,fr)},jn.repeat=function(e,t,n){return t=(n?ys(e,t,n):t===i)?1:po(t),Kr(_o(e),t)},jn.replace=function(){var e=arguments,t=_o(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,n){var r=-1,s=(t=yi(t,e)).length;for(s||(s=1,e=i);++r<s;){var a=null==e?i:e[Ns(t[r])];a===i&&(r=s,a=n),e=Xa(a)?a.call(e):a}return e},jn.round=wl,jn.runInContext=e,jn.sample=function(e){return(Ha(e)?Jn:Jr)(e)},jn.size=function(e){if(null==e)return 0;if(Ya(e))return ao(e)?pn(e):e.length;var t=ps(e);return t==D||t==T?e.size:Nr(e).length},jn.snakeCase=qo,jn.some=function(e,t,n){var r=Ha(e)?zt:ii;return n&&ys(e,t,n)&&(t=i),r(e,ls(t,3))},jn.sortedIndex=function(e,t){return si(e,t)},jn.sortedIndexBy=function(e,t,n){return ai(e,t,ls(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&za(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return si(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return ai(e,t,ls(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(za(e[n],t))return n}return-1},jn.startCase=Zo,jn.startsWith=function(e,t,n){return e=_o(e),n=null==n?0:or(po(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},jn.subtract=Sl,jn.sum=function(e){return e&&e.length?Xt(e,rl):0},jn.sumBy=function(e,t){return e&&e.length?Xt(e,ls(t,2)):0},jn.template=function(e,t,n){var r=jn.templateSettings;n&&ys(e,t,n)&&(t=i),e=_o(e),t=xo({},t,r,$i);var s,a,o=xo({},t.imports,r.imports,$i),l=Io(o),u=en(o,l),c=0,h=t.interpolate||we,d="__p += '",f=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,function(t,n,r,i,o,l){return r||(r=i),d+=e.slice(c,l).replace(Se,on),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var g=Be.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new oe("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(Y,""):d).replace(W,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=$o(function(){return Ce(l,p+"return "+d).apply(i,u)});if(m.source=d,Ka(m))throw m;return m},jn.times=function(e,t){if((e=po(e))<1||e>p)return[];var n=m,r=yn(e,m);t=ls(t),e-=m;for(var i=Jt(r,t);++n<e;)t(n);return i},jn.toFinite=fo,jn.toInteger=po,jn.toLength=go,jn.toLower=function(e){return _o(e).toLowerCase()},jn.toNumber=mo,jn.toSafeInteger=function(e){return e?or(po(e),-9007199254740991,p):0===e?e:0},jn.toString=_o,jn.toUpper=function(e){return _o(e).toUpperCase()},jn.trim=function(e,t,n){if((e=_o(e))&&(n||t===i))return $t(e);if(!e||!(t=ui(t)))return e;var r=gn(e),s=gn(t);return xi(r,nn(r,s),rn(r,s)+1).join("")},jn.trimEnd=function(e,t,n){if((e=_o(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=ui(t)))return e;var r=gn(e);return xi(r,0,rn(r,gn(t))+1).join("")},jn.trimStart=function(e,t,n){if((e=_o(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=ui(t)))return e;var r=gn(e);return xi(r,nn(r,gn(t))).join("")},jn.truncate=function(e,t){var n=30,r="...";if(Qa(t)){var s="separator"in t?t.separator:s;n="length"in t?po(t.length):n,r="omission"in t?ui(t.omission):r}var a=(e=_o(e)).length;if(ln(e)){var o=gn(e);a=o.length}if(n>=a)return e;var l=n-pn(r);if(l<1)return r;var u=o?xi(o,0,l).join(""):e.slice(0,l);if(s===i)return u+r;if(o&&(l+=u.length-l),io(s)){if(e.slice(l).search(s)){var c,h=u;for(s.global||(s=Ae(s.source,_o(ge.exec(s))+"g")),s.lastIndex=0;c=s.exec(h);)var d=c.index;u=u.slice(0,d===i?l:d)}}else if(e.indexOf(ui(s),l)!=l){var f=u.lastIndexOf(s);f>-1&&(u=u.slice(0,f))}return u+r},jn.unescape=function(e){return(e=_o(e))&&X.test(e)?e.replace(Z,vn):e},jn.uniqueId=function(e){var t=++Ne;return _o(e)+t},jn.upperCase=Ko,jn.upperFirst=Xo,jn.each=va,jn.eachRight=_a,jn.first=Ys,ol(jn,function(){var e={};return br(jn,function(t,n){Be.call(jn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),jn.VERSION="4.17.21",Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){jn[e].placeholder=jn}),Mt(["drop","take"],function(e,t){Gn.prototype[e]=function(n){n=n===i?1:Zt(po(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Mt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Mt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}}),Mt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}}),Gn.prototype.compact=function(){return this.filter(rl)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr(function(e,t){return"function"==typeof e?new Gn(this):this.map(function(n){return Tr(n,e,t)})}),Gn.prototype.reject=function(e){return this.filter(Pa(ls(e)))},Gn.prototype.slice=function(e,t){e=po(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=po(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(m)},br(Gn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=jn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);s&&(jn.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,l=t instanceof Gn,u=o[0],c=l||Ha(t),h=function(e){var t=s.apply(jn,Nt([e],o));return r&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,g=l&&!f;if(!a&&c){t=g?t:new Gn(this);var m=e.apply(t,o);return m.__actions__.push({func:da,args:[h],thisArg:i}),new Hn(m,d)}return p&&g?e.apply(this,o):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ha(i)?i:[],e)}return this[n](function(n){return t.apply(Ha(n)?n:[],e)})}}),br(Gn.prototype,function(e,t){var n=jn[t];if(n){var r=n.name+"";Be.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}}),In[ji(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ha(e),r=t<0,i=n?e.length:0,s=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var s=n[r],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=Zt(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=s.start,o=s.end,l=o-a,u=r?o:a-1,c=this.__iteratees__,h=c.length,d=0,f=yn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var g=-1,m=e[u+=t];++g<h;){var v=c[g],_=v.iteratee,y=v.type,b=_(m);if(2==y)m=b;else if(!b){if(1==y)continue e;break e}}p[d++]=m}return p},jn.prototype.at=fa,jn.prototype.chain=function(){return ha(this)},jn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=ho(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,n=this;n instanceof Un;){var r=Fs(n);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;n=n.__wrapped__}return s.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:da,args:[Qs],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(Qs)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Je&&(jn.prototype[Je]=function(){return this}),jn}();gt._=_n,(r=function(){return _n}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},579:(e,t,n)=>{"use strict";e.exports=n(153)},693:(e,t,n)=>{var r=n(736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},717:(e,t,n)=>{"use strict";var r=n(43),i=n(461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useSyncExternalStore,o=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return o=t}return o=e}if(t=o,s(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,o=n)}var a,o,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]);var f=a(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),c(f),f}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var N,R=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case D:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ce=null;function De(e){if(e=yi(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Ae(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function ke(e,t){return e(t)}function Me(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return ke(e,t,n)}finally{Te=!1,(null!==Se||null!==Ce)&&(Me(),Ae())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Le=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){Le=!1}function Be(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ne=!1,Re=null,Fe=!1,ze=null,je={onError:function(e){Ne=!0,Re=e}};function Ve(e,t,n,r,i,s,a,o,l){Ne=!1,Re=null,Be.apply(je,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ue(e)!==e)throw Error(s(188))}function Ye(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,Ct,Dt,Et=!1,At=[],kt=null,Mt=null,Tt=null,It=new Map,Ot=new Map,Lt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Nt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Rt(e){var t=_i(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Dt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function jt(){Et=!1,null!==kt&&Ft(kt)&&(kt=null),null!==Mt&&Ft(Mt)&&(Mt=null),null!==Tt&&Ft(Tt)&&(Tt=null),It.forEach(zt),Ot.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Ut(e){function t(t){return Vt(t,e)}if(0<At.length){Vt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Vt(kt,e),null!==Mt&&Vt(Mt,e),null!==Tt&&Vt(Tt,e),It.forEach(t),Ot.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Lt.shift()}var Ht=b.ReactCurrentBatchConfig,Gt=!0;function Yt(e,t,n,r){var i=yt,s=Ht.transition;Ht.transition=null;try{yt=1,qt(e,t,n,r)}finally{yt=i,Ht.transition=s}}function Wt(e,t,n,r){var i=yt,s=Ht.transition;Ht.transition=null;try{yt=4,qt(e,t,n,r)}finally{yt=i,Ht.transition=s}}function qt(e,t,n,r){if(Gt){var i=Kt(e,t,n,r);if(null===i)Gr(e,t,r,Zt,n),Bt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Nt(kt,e,t,n,r,i),!0;case"dragenter":return Mt=Nt(Mt,e,t,n,r,i),!0;case"mouseover":return Tt=Nt(Tt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return It.set(s,Nt(It.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Nt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Bt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=yi(i);if(null!==s&&xt(s),null===(s=Kt(e,t,n,r))&&Gr(e,t,r,Zt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Zt=null;function Kt(e,t,n,r){if(Zt=null,null!==(e=_i(e=xe(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=R({},un,{view:0,detail:0}),dn=sn(hn),fn=R({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),gn=sn(R({},fn,{dataTransfer:0})),mn=sn(R({},hn,{relatedTarget:0})),vn=sn(R({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=R({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=sn(_n),bn=sn(R({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Dn(){return Cn}var En=R({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(En),kn=sn(R({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=sn(R({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dn})),Tn=sn(R({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=R({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(In),Ln=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Bn=null;c&&"documentMode"in document&&(Bn=document.documentMode);var Nn=c&&"TextEvent"in window&&!Bn,Rn=c&&(!Pn||Bn&&8<Bn&&11>=Bn),Fn=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Yn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Zn(e){Fr(e,0)}function Kn(e){if(q(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var $n;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}$n=Qn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Yn(t,qn,e,xe(e)),Ie(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function sr(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,_r=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==Z(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&lr(_r,r)||(_r=r,0<(r=Wr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Cr={};function Dr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Dr("animationend"),Ar=Dr("animationiteration"),kr=Dr("animationstart"),Mr=Dr("transitionend"),Tr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Tr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Ir.length;Lr++){var Pr=Ir[Lr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Ar,"onAnimationIteration"),Or(kr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Mr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if(Ve.apply(this,arguments),Ne){if(!Ne)throw Error(s(198));var c=Re;Ne=!1,Re=null,Fe||(Fe=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Rr(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Rr(i,o,u),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Nr.has(t)||jr(t,!1,e),jr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var i=Yt;break;case 4:i=Wt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=_i(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ie(function(){var r=s,i=xe(n),a=[];e:{var o=Tr.get(e);if(void 0!==o){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Er:case Ar:case kr:l=vn;break;case Mr:l=Tn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Oe(p,d))&&c.push(Yr(p,g,f)))),h)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!_i(u)&&!u[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?_i(u):null)&&(u!==(h=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=kn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:bi(l),f=null==u?o:bi(u),(o=new c(g,p+"leave",l,n,i)).target=h,o.relatedTarget=f,g=null,_i(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=qr(f))p++;for(f=0,g=d;g;g=qr(g))f++;for(;0<p-f;)c=qr(c),p--;for(;0<f-p;)d=qr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=qr(c),d=qr(d)}c=null}else c=null;null!==l&&Zr(a,o,l,c,!1),null!==u&&null!==h&&Zr(a,h,u,c,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Xn;else if(Gn(o))if(Jn)m=ar;else{m=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?Yn(a,m,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,_r=null);break;case"focusout":_r=vr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(a,n,i)}var _;if(Pn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Un?jn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Rn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==y?"onCompositionEnd"===y&&Un&&(_=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Un=!0)),0<(v=Wr(r,y)).length&&(y=new bn(y,e,null,n,i),a.push({event:y,listeners:v}),_?y.data=_:null!==(_=Vn(n))&&(y.data=_))),(_=Nn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Pn&&jn(e,t)?(e=en(),Qt=$t=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=_))}Fr(a,t)})}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Yr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Yr(e,s,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Oe(n,s))&&a.unshift(Yr(n,l,o)):i||null!=(l=Oe(n,s))&&a.push(Yr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function _i(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var wi=[],Si=-1;function Ci(e){return{current:e}}function Di(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ei(e,t){Si++,wi[Si]=e.current,e.current=t}var Ai={},ki=Ci(Ai),Mi=Ci(!1),Ti=Ai;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Di(Mi),Di(ki)}function Pi(e,t,n){if(ki.current!==Ai)throw Error(s(168));Ei(ki,t),Ei(Mi,n)}function Bi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return R({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ti=ki.current,Ei(ki,e),Ei(Mi,Mi.current),!0}function Ri(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Bi(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Di(Mi),Di(ki),Ei(ki,e)):Di(Mi),Ei(Mi,n)}var Fi=null,zi=!1,ji=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Ui(){if(!ji&&null!==Fi){ji=!0;var e=0,t=yt;try{var n=Fi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe(Qe,Ui),i}finally{yt=t,ji=!1}}return null}var Hi=[],Gi=0,Yi=null,Wi=0,qi=[],Zi=0,Ki=null,Xi=1,Ji="";function $i(e,t){Hi[Gi++]=Wi,Hi[Gi++]=Yi,Yi=e,Wi=t}function Qi(e,t,n){qi[Zi++]=Xi,qi[Zi++]=Ji,qi[Zi++]=Ki,Ki=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Qi(e,1,0))}function ts(e){for(;e===Yi;)Yi=Hi[--Gi],Hi[Gi]=null,Wi=Hi[--Gi],Hi[Gi]=null;for(;e===Ki;)Ki=qi[--Zi],qi[Zi]=null,Ji=qi[--Zi],qi[Zi]=null,Xi=qi[--Zi],qi[Zi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Iu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Iu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _s(e){return(0,e._init)(e._payload)}function ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ru(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&_s(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Bu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ru(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case w:return(t=Fu(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||B(t))return(t=Bu(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||B(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function g(i,s,o,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,o[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=a(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===o.length)return n(i,h),is&&$i(i,g),u;if(null===h){for(;g<o.length;g++)null!==(h=d(i,o[g],l))&&(s=a(h,s,g),null===c?u=h:c.sibling=h,c=h);return is&&$i(i,g),u}for(h=r(i,h);g<o.length;g++)null!==(m=p(h,i,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach(function(e){return t(i,e)}),is&&$i(i,g),u}function m(i,o,l,u){var c=B(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=o,m=o=0,v=null,_=l.next();null!==g&&!_.done;m++,_=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=f(i,g,_.value,u);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(i,g),o=a(y,o,m),null===h?c=y:h.sibling=y,h=y,g=v}if(_.done)return n(i,g),is&&$i(i,m),c;if(null===g){for(;!_.done;m++,_=l.next())null!==(_=d(i,_.value,u))&&(o=a(_,o,m),null===h?c=_:h.sibling=_,h=_);return is&&$i(i,m),c}for(g=r(i,g);!_.done;m++,_=l.next())null!==(_=p(g,i,m,_.value,u))&&(e&&null!==_.alternate&&g.delete(null===_.key?m:_.key),o=a(_,o,m),null===h?c=_:h.sibling=_,h=_);return e&&g.forEach(function(e){return t(i,e)}),is&&$i(i,m),c}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&_s(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=ms(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((s=Bu(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Pu(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,s,a),l.return=r,r=l)}return o(r);case w:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fu(a,r.mode,l)).return=r,r=s}return o(r);case O:return e(r,s,(c=a._init)(a._payload),l)}if(te(a))return g(r,s,a,l);if(B(a))return m(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Ru(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=ys(!0),xs=ys(!1),ws=Ci(null),Ss=null,Cs=null,Ds=null;function Es(){Ds=Cs=Ss=null}function As(e){var t=ws.current;Di(ws),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ms(e,t){Ss=e,Ds=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ds!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Ss)throw Error(s(308));Cs=e,Ss.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Is=null;function Os(e){null===Is?Is=[e]:Is.push(e)}function Ls(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ps(e,r)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bs=!1;function Ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&kl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ps(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ps(e,n)}function js(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,r){var i=e.updateQueue;Bs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=R({},h,d);break e;case 2:Bs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Nl|=a,e.lanes=a,e.memoizedState=h}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Ys=Ci(Gs),Ws=Ci(Gs),qs=Ci(Gs);function Zs(e){if(e===Gs)throw Error(s(174));return e}function Ks(e,t){switch(Ei(qs,t),Ei(Ws,e),Ei(Ys,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Di(Ys),Ei(Ys,t)}function Xs(){Di(Ys),Di(Ws),Di(qs)}function Js(e){Zs(qs.current);var t=Zs(Ys.current),n=le(t,e.type);t!==n&&(Ei(Ws,e),Ei(Ys,n))}function $s(e){Ws.current===e&&(Di(Ys),Di(Ws))}var Qs=Ci(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ua=!1,ca=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Qa,e=n(r,i),ca){a=0;do{if(ca=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ca)}if(ra.current=Ja,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ua=!1,t)throw Error(s(300));return e}function ma(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function _a(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ya(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=_a(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((sa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,o=r):u=u.next=d,aa.lanes|=h,Nl|=h}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,or(r,t.memoizedState)||(yo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Nl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=_a(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(yo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function wa(){}function Sa(e,t){var n=aa,r=_a(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,yo=!0),r=r.queue,Ba(Ea.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ta(9,Da.bind(null,n,r,i,t),void 0,null),null===Ml)throw Error(s(349));0!==(30&sa)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Da(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&ka(e)}function Ea(e,t,n){return n(function(){Aa(t)&&ka(e)})}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function ka(e){var t=Ps(e,1);null!==t&&nu(t,e,1,-1)}function Ma(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=qa.bind(null,aa,e),[t.memoizedState,e]}function Ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ia(){return _a().memoizedState}function Oa(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Ta(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var i=_a();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Ta(t,n,s,r))}aa.flags|=e,i.memoizedState=Ta(1|t,n,s,r)}function Pa(e,t){return Oa(8390656,8,e,t)}function Ba(e,t){return La(2048,8,e,t)}function Na(e,t){return La(4,2,e,t)}function Ra(e,t){return La(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Fa.bind(null,t,e),n)}function ja(){}function Va(e,t){var n=_a();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=_a();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),aa.lanes|=n,Nl|=n,e.baseState=!0),t)}function Ga(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{yt=n,ia.transition=r}}function Ya(){return _a().memoizedState}function Wa(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Za(e))Ka(t,n);else if(null!==(n=Ls(e,t,n,r))){nu(n,e,r,eu()),Xa(n,t,r)}}function qa(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(e))Ka(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ls(e,t,i,r))&&(nu(n,e,r,i=eu()),Xa(n,t,r))}}function Za(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ka(e,t){ca=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var Ja={readContext:Ts,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:Ts,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ma,useDebugValue:ja,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ma(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ml)throw Error(s(349));0!==(30&sa)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Pa(Ea.bind(null,r,a,e),[e]),r.flags|=2048,Ta(9,Da.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Ml.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qa={readContext:Ts,useCallback:Va,useContext:Ts,useEffect:Ba,useImperativeHandle:za,useInsertionEffect:Na,useLayoutEffect:Ra,useMemo:Ua,useReducer:ba,useRef:Ia,useState:function(){return ba(ya)},useDebugValue:ja,useDeferredValue:function(e){return Ha(_a(),oa.memoizedState,e)},useTransition:function(){return[ba(ya)[0],_a().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ya,unstable_isNewReconciler:!1},eo={readContext:Ts,useCallback:Va,useContext:Ts,useEffect:Ba,useImperativeHandle:za,useInsertionEffect:Na,useLayoutEffect:Ra,useMemo:Ua,useReducer:xa,useRef:Ia,useState:function(){return xa(ya)},useDebugValue:ja,useDeferredValue:function(e){var t=_a();return null===oa?t.memoizedState=e:Ha(t,oa.memoizedState,e)},useTransition:function(){return[xa(ya)[0],_a().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ya,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(nu(t,e,i,r),js(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,i))&&(nu(t,e,i,r),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zs(e,i,r))&&(nu(t,e,r,n),js(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ai,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Oi(t)?Ti:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ai),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ns(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Oi(t)?Ti:ki.current,i.context=Ii(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Us(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Yl=r),co(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){co(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){co(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Du.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _o=b.ReactCurrentOwner,yo=!1;function bo(e,t,n,r){t.child=null===e?xs(t,null,n,r):bs(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Ms(t,i),r=ga(e,t,n,r,s,i),n=ma(),null===e||yo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function wo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Go(e,t,i)}return t.flags|=1,(e=Lu(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(yo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Go(e,t,i);0!==(131072&e.flags)&&(yo=!0)}}return Eo(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ei(Ll,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ei(Ll,Ol),Ol|=r;return bo(e,t,i,n),t.child}function Do(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,i){var s=Oi(n)?Ti:ki.current;return s=Ii(t,s),Ms(t,i),n=ga(e,t,n,r,s,i),r=ma(),null===e||yo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Go(e,t,i))}function Ao(e,t,n,r,i){if(Oi(n)){var s=!0;Ni(t)}else s=!1;if(Ms(t,i),null===t.stateNode)Ho(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ts(u):u=Ii(t,u=Oi(n)?Ti:ki.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&ao(t,a,r,u),Bs=!1;var d=t.memoizedState;a.state=d,Us(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Mi.current||Bs?("function"===typeof c&&(no(t,n,c,r),l=t.memoizedState),(o=Bs||io(t,n,o,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Rs(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:to(t.type,o),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Ii(t,l=Oi(n)?Ti:ki.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,r,l),Bs=!1,d=t.memoizedState,a.state=d,Us(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Mi.current||Bs?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(u=Bs||io(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ko(e,t,n,r,s,i)}function ko(e,t,n,r,i,s){Do(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ri(t,n,!1),Go(e,t,s);r=t.stateNode,_o.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Ri(t,n,!0),t.child}function Mo(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Ks(e,t.containerInfo)}function To(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var Io,Oo,Lo,Po,Bo={dehydrated:null,treeContext:null,retryLane:0};function No(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,n){var r,i=t.pendingProps,a=Qs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ei(Qs,1&a),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Nu(l,i,0,null),e=Bu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=No(n),t.memoizedState=Bo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Nu({mode:"visible",children:r.children},i,0,null),(a=Bu(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=No(o),t.memoizedState=Bo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=uo(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(r=Ml)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ps(e,i),nu(r,e,i,-1))}return gu(),zo(e,t,o,r=uo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Au.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(qi[Zi++]=Xi,qi[Zi++]=Ji,qi[Zi++]=Ki,Xi=e.id,Ji=e.overflow,Ki=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Lu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Lu(r,o):(o=Bu(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?No(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Bo,i}return e=(o=e.child).sibling,i=Lu(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Nu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Uo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Qs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,n,t);else if(19===e.tag)jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(Qs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Go(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Oi(t.type)&&Li(),Wo(t),null;case 3:return r=t.stateNode,Xs(),Di(Mi),Di(ki),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Oo(e,t),Wo(t),null;case 5:$s(t);var i=Zs(qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Zs(Ys.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)zr(Br[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in _e(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":W(r),Q(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)zr(Br[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":X(e,r),i=K(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in _e(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&zr("scroll",e):null!=c&&y(e,a,c,l))}switch(n){case"input":W(e),Q(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Zs(qs.current),Zs(Ys.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wo(t),null;case 13:if(Di(Qs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(au(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qs.current)?0===Pl&&(Pl=3):gu())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Xs(),Oo(e,t),null===e&&Ur(t.stateNode.containerInfo),Wo(t),null;case 10:return As(t.type._context),Wo(t),null;case 19:if(Di(Qs),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Yo(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Yo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(Qs,1&Qs.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Ul&&(t.flags|=128,r=!0,Yo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Yo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Je()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Yo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Qs.current,Ei(Qs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Zo(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Di(Mi),Di(ki),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Di(Qs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Di(Qs),null;case 4:return Xs(),null;case 10:return As(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Io=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Lo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zs(Ys.current);var s,a=null;switch(n){case"input":i=K(e,i),r=K(e,r),a=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in _e(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Qo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||Qo(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Xo&&(Qo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cu(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,dl(e,t,n),Xo=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=ku.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(a,o,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Cu(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Cu(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Qo(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Qo(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Cu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),ye(l,o);var c=ye(l,a);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):y(i,h,d,c)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Cu(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Cu(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(m){Cu(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(c=Xo)||h,gl(t,e),Xo=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for($o=e,h=e.child;null!==h;){for(d=$o=h;null!==$o;){switch(p=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Qo(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cu(r,n,m)}}break;case 5:Qo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,$o=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",o))}catch(m){Cu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Cu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Cu(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){$o=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ko;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Ko;var u=Xo;if(Ko=a,(Xo=l)&&!u)for($o=i;null!==$o;)l=(a=$o).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,$o=l):wl(i);for(;null!==s;)$o=s,yl(s,t,n),s=s.sibling;$o=i,Ko=o,Xo=u}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$o=s):bl(e)}}function bl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&il(t)}catch(f){Cu(t,t.return,f)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function xl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var s=t.return;try{il(t)}catch(l){Cu(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cu(t,a,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Sl,Cl=Math.ceil,Dl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,kl=0,Ml=null,Tl=null,Il=0,Ol=0,Ll=Ci(0),Pl=0,Bl=null,Nl=0,Rl=0,Fl=0,zl=null,jl=null,Vl=0,Ul=1/0,Hl=null,Gl=!1,Yl=null,Wl=null,ql=!1,Zl=null,Kl=0,Xl=0,Jl=null,$l=-1,Ql=0;function eu(){return 0!==(6&kl)?Je():-1!==$l?$l:$l=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Il?Il&-Il:null!==gs.transition?(0===Ql&&(Ql=gt()),Ql):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nu(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&kl)&&e===Ml||(e===Ml&&(0===(2&kl)&&(Rl|=n),4===Pl&&ou(e,Il)),ru(e,r),1===n&&0===kl&&0===(1&t.mode)&&(Ul=Je()+500,zi&&Ui()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Ml?Il:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){zi=!0,Vi(e)}(lu.bind(null,e)):Vi(lu.bind(null,e)),ai(function(){0===(6&kl)&&Ui()}),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Mu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if($l=-1,Ql=0,0!==(6&kl))throw Error(s(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=dt(e,e===Ml?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=kl;kl|=2;var a=pu();for(Ml===e&&Il===t||(Hl=null,Ul=Je()+500,du(e,t));;)try{_u();break}catch(l){fu(e,l)}Es(),Dl.current=a,kl=i,null!==Tl?t=0:(Ml=null,Il=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=su(e,i))),1===t)throw n=Bl,du(e,0),ou(e,r),ru(e,Je()),n;if(6===t)ou(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(a=pt(e))&&(r=a,t=su(e,a))),1===t))throw n=Bl,du(e,0),ou(e,r),ru(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xu(e,jl,Hl);break;case 3:if(ou(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xu.bind(null,e,jl,Hl),t);break}xu(e,jl,Hl);break;case 4:if(ou(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(xu.bind(null,e,jl,Hl),r);break}xu(e,jl,Hl);break;default:throw Error(s(329))}}}return ru(e,Je()),e.callbackNode===n?iu.bind(null,e):null}function su(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=jl,jl=n,null!==t&&au(t)),e}function au(e){null===jl?jl=e:jl.push.apply(jl,e)}function ou(e,t){for(t&=~Fl,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&kl))throw Error(s(327));wu();var t=dt(e,0);if(0===(1&t))return ru(e,Je()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Bl,du(e,0),ou(e,t),ru(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,jl,Hl),ru(e,Je()),null}function uu(e,t){var n=kl;kl|=1;try{return e(t)}finally{0===(kl=n)&&(Ul=Je()+500,zi&&Ui())}}function cu(e){null!==Zl&&0===Zl.tag&&0===(6&kl)&&wu();var t=kl;kl|=1;var n=Al.transition,r=yt;try{if(Al.transition=null,yt=1,e)return e()}finally{yt=r,Al.transition=n,0===(6&(kl=t))&&Ui()}}function hu(){Ol=Ll.current,Di(Ll)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:Xs(),Di(Mi),Di(ki),na();break;case 5:$s(r);break;case 4:Xs();break;case 13:case 19:Di(Qs);break;case 10:As(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Ml=e,Tl=e=Lu(e.current,null),Il=Ol=t,Pl=0,Bl=null,Fl=Rl=Nl=0,jl=zl=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(r=(n=Is[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Is=null}return e}function fu(e,t){for(;;){var n=Tl;try{if(Es(),ra.current=Ja,ua){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(sa=0,la=oa=aa=null,ca=!1,ha=0,El.current=null,null===n||null===n.return){Pl=1,Bl=t,Tl=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Il,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){go(a,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(u,l));break e}}a=u=lo(u,l),4!==Pl&&(Pl=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,fo(0,u,t));break e;case 1:l=u;var _=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof _.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Wl||!Wl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bu(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pu(){var e=Dl.current;return Dl.current=Ja,null===e?Ja:e}function gu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Ml||0===(268435455&Nl)&&0===(268435455&Rl)||ou(Ml,Il)}function mu(e,t){var n=kl;kl|=2;var r=pu();for(Ml===e&&Il===t||(Hl=null,du(e,t));;)try{vu();break}catch(i){fu(e,i)}if(Es(),kl=n,Dl.current=r,null!==Tl)throw Error(s(261));return Ml=null,Il=0,Pl}function vu(){for(;null!==Tl;)yu(Tl)}function _u(){for(;null!==Tl&&!Ke();)yu(Tl)}function yu(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bu(e):Tl=t,El.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Ol)))return void(Tl=n)}else{if(null!==(n=Zo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Pl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Pl&&(Pl=5)}function xu(e,t,n){var r=yt,i=Al.transition;try{Al.transition=null,yt=1,function(e,t,n,r){do{wu()}while(null!==Zl);if(0!==(6&kl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Ml&&(Tl=Ml=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Mu(tt,function(){return wu(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=yt;yt=1;var l=kl;kl|=4,El.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=o),f===a&&++h===r&&(u=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(x){Cu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Xe(),kl=l,yt=o,Al.transition=a}else e.current=n;if(ql&&(ql=!1,Zl=e,Kl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Yl,Yl=null,e;0!==(1&Kl)&&0!==e.tag&&wu(),a=e.pendingLanes,0!==(1&a)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Ui()}(e,t,n,r)}finally{Al.transition=i,yt=r}return null}function wu(){if(null!==Zl){var e=bt(Kl),t=Al.transition,n=yt;try{if(Al.transition=null,yt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,Kl=0,0!==(6&kl))throw Error(s(331));var i=kl;for(kl|=4,$o=e.current;null!==$o;){var a=$o,o=a.child;if(0!==(16&$o.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($o=c;null!==$o;){var h=$o;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,$o=d;else for(;null!==$o;){var f=(h=$o).sibling,p=h.return;if(sl(h),h===c){$o=null;break}if(null!==f){f.return=p,$o=f;break}$o=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$o=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,$o=o;else e:for(;null!==$o;){if(0!==(2048&(a=$o).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,$o=_;break e}$o=a.return}}var y=e.current;for($o=y;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=y;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Cu(l,l.return,w)}if(l===o){$o=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$o=x;break e}$o=l.return}}if(kl=i,Ui(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{yt=n,Al.transition=t}}return!1}function Su(e,t,n){e=zs(e,t=fo(0,t=lo(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=zs(t,e=po(t,e=lo(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Du(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Il&n)===n&&(4===Pl||3===Pl&&(130023424&Il)===Il&&500>Je()-Vl?du(e,0):Fl|=n),ru(e,t)}function Eu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ps(e,t))&&(vt(e,t,n),ru(e,n))}function Au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function ku(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Eu(e,n)}function Mu(e,t){return qe(e,t)}function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(e,t,n,r){return new Tu(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Iu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Ou(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Bu(n.children,i,a,t);case C:o=8,i|=8;break;case D:return(e=Iu(12,n,t,2|i)).elementType=D,e.lanes=a,e;case M:return(e=Iu(13,n,t,i)).elementType=M,e.lanes=a,e;case T:return(e=Iu(19,n,t,i)).elementType=T,e.lanes=a,e;case L:return Nu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case A:o=9;break e;case k:o=11;break e;case I:o=14;break e;case O:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Iu(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Bu(e,t,n,r){return(e=Iu(7,e,r,t)).lanes=n,e}function Nu(e,t,n,r){return(e=Iu(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Ru(e,t,n){return(e=Iu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Iu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,s,a,o,l){return e=new zu(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Iu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ns(s),e}function Vu(e){if(!e)return Ai;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Bi(e,n,t)}return t}function Uu(e,t,n,r,i,s,a,o,l){return(e=ju(n,r,!0,e,0,s,0,o,l)).context=Vu(null),n=e.current,(s=Fs(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Hu(e,t,n,r){var i=t.current,s=eu(),a=tu(i);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zs(i,t,a))&&(nu(e,i,a,s),js(e,i,a)),a}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mi.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Mo(t),fs();break;case 5:Js(t);break;case 1:Oi(t.type)&&Ni(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ws,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(Qs,1&Qs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ro(e,t,n):(Ei(Qs,1&Qs.current),null!==(e=Go(e,t,n))?e.sibling:null);Ei(Qs,1&Qs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(Qs,Qs.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Go(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,is&&0!==(1048576&t.flags)&&Qi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var i=Ii(t,ki.current);Ms(t,n),i=ga(null,t,r,e,i,n);var a=ma();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Ni(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ns(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=ko(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===I)return 14}return 2}(r),e=to(r,e),i){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Mo(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Rs(e,t),Us(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=To(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=To(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Go(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Do(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ro(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ei(ws,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Mi.current){t=Go(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Fs(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),ks(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ks(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ms(t,n),r=r(i=Ts(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),wo(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Ho(e,t),t.tag=1,Oi(r)?(e=!0,Ni(t)):e=!1,Ms(t,n),so(t,r,i),oo(t,r,i,n),ko(null,t,r,!0,e,n);case 19:return Uo(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Zu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function Qu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Gu(a);o.call(e)}}Hu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gu(a);s.call(e)}}var a=Uu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=a,e[pi]=a.current,Ur(8===e.nodeType?e.parentNode:e),cu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Gu(l);o.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[pi]=l.current,Ur(8===e.nodeType?e.parentNode:e),cu(function(){Hu(t,l,n,r)}),l}(n,t,e,i,r);return Gu(a)}Ku.prototype.render=Zu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hu(e,t,null,null)},Ku.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu(function(){Hu(null,e,null,null)}),t[pi]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Rt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),ru(t,Je()),0===(6&kl)&&(Ul=Je()+500,Ui()))}break;case 13:cu(function(){var t=Ps(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}}),Wu(e,1)}},wt=function(e){if(13===e.tag){var t=Ps(e,134217728);if(null!==t)nu(t,e,134217728,eu());Wu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Ps(e,t);if(null!==n)nu(n,e,t,eu());Wu(e,t)}},Ct=function(){return yt},Dt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));q(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=uu,Me=cu;var ec={usingClientEntryPoint:!1,Events:[yi,bi,xi,Ee,Ae,uu]},tc={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),st=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(s(299));var n=!1,r="",i=qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Zu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return Qu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ku(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return Qu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(cu(function(){Qu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Qu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,n)=>{var r=n(738).default,i=n(45);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},853:(e,t,n)=>{"use strict";e.exports=n(234)},897:(e,t,n)=>{var r=n(693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",n.nc=void 0,(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391);function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s,a,o,l,u,c,h,d,f,p,g=n(9),m=n(140);const v=g.default.ul(s||(s=i(["\n    position: relative;\n    margin: 0;\n    padding: 0;\n    display: flex;\n    margin-bottom: 17px; \n    border-radius: 50px;\n    white-space: nowrap;\n    justify-content: end;\n    flex-wrap: wrap;\n    align-items: flex-start;\n}\n\n    @media screen and (max-width: 568px) {\n        margin-bottom: 12px; \n        transform-origin: 50% 50% 0px;\n        // transform: translate3d(-186.507px, 0px, 0px) scale(1, 1);\n        position: relative;\n        // left: 50vw;\n        }\n"]))),_=g.default.ul(a||(a=i(["\n    position: relative;\n    margin: 0;\n    padding-top: 10px;\n    padding-left: 0px;\n    display: flex;\n    white-space: nowrap;\n    justify-content: end;\n    background-color: #fff;\n    flex-wrap: wrap;\n    align-items: flex-start;\n}\n\n    @media screen and (max-width: 568px) {\n        margin-bottom: 12px; \n        transform-origin: 50% 50% 0px;\n        // transform: translate3d(-186.507px, 0px, 0px) scale(1, 1);\n        position: relative;\n        // left: 50vw;\n        }\n"]))),y=(g.default.li(o||(o=i(['\n  display: flex;\n  flex-direction: column;\n  font: 300 1.1rem/1.5 "Inter";\n  align-items: center;\n  text-align: center;\n  justify-content: center;\n  padding: 0px 10px;\n  cursor: pointer;\n  margin: 0 10px;\n  width: 92px;\n  height: 16px;\n  border-color: ',";\n  white-space: nowrap;\n\n  border: 1px solid #297ca3;\n  border-radius: 4px;\n  background-color: ",";\n  color: ",';\n\n  &:hover {\n    background-color: #ffd966;\n  }\n  @media screen and (max-width: 568px) {\n    font: 500 0.8rem/1.8 "Inter";\n    margin: 0 7px;\n    padding: 0px 7px;\n    width: 132px;\n    height: 33px;\n  }\n'])),e=>e.selected?"black":"#DDD",e=>e.selected?"#297ca3":"white",e=>e.selected?"white":"#297ca3"),g.default.li(l||(l=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  justify-content: center;\n  padding: 0px 5px;\n  cursor: pointer;\n  margin: 0 3px;\n  border-radius: 100%;\n  width: 5.5em;\n  height: 5.1em;\n  white-space: nowrap;\n  font-size: 12px;\n  border-color: ",';\n\n  &:before {\n    content: "";\n    position: absolute;\n    bottom: 20%;\n    /* Additional styling for the :before pseudo-element can be added here */\n  }\n\n  &:after {\n    // content: "','";\n    position: absolute;\n    top: 110%;\n    border-bottom: 1px solid #000;\n    font-family: "Roboto", sans-serif;\n    font-size: 13px;\n  }\n\n  @media screen and (max-width: 568px) {\n    width: 39px !important;\n    height: 22px !important;\n    \n    &:after {\n      top: 73% !important;\n      width: 39px !important;\n      height: 22px !important;\n    }\n  }\n'])),e=>e.selected?"black":"#DDD",e=>e.selected?e.selectedColor:""),g.default.li(u||(u=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  justify-content: center;\n  padding: 0px 10px;\n  cursor: pointer;\n  margin: 2px;\n  width: 24px;\n  height: 24px;\n  white-space: nowrap;\n  font-size: 12px;\n  border-color: ",';\n\n  &:hover {\n    background-color: #d8d8d8;\n  }\n\n  &:before {\n    content: "";\n    position: absolute;\n    bottom: 20%;\n  }\n\n  &:after {\n    position: absolute;\n    bottom: 7%;\n  }\n\n  @media screen and (max-width: 500px) {    \n    width: 39px !important;\n    height: 22px !important;\n    object-fit: fill !important;\n  }\n'])),e=>e.selected?"black":"#DDD")),b=(g.default.img(c||(c=i(["\n  width: 4.7em;\n  height: 80px;\n  object-fit: contain;\n  margin: 0px 11px;\n  border-radius: 100%;\n  border: 1px solid rgb(229, 229, 229);\n\n  @media screen and (max-width: 568px) {\n    width: 39px !important;\n    height: 22px !important;\n    object-fit: fill;\n    // margin: 0px 8px;\n  }\n"]))),g.default.img(h||(h=i(['\n  position: relative;\n  width: 24px;\n  height: 24px;\n  object-fit: contain;\n  margin: 2px;\n  border: 1px solid #fff;\n\n  &:after {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    display: block;\n    // content: " ";\n    top: 0px;\n    left: 0px;\n    content: "yes";\n    color: #fff;\n    // background-image: url(./img/colselected3.svg);\n    background-repeat: no-repeat;\n    background-position: right bottom;\n  }\n\n  @media screen and (max-width: 568px) {\n    width: 39px;\n    height: 22px;\n    border: 1px solid rgb(201 197 197);\n    object-fit: fill;\n  }\n'])))),x=g.default.li(d||(d=i(['\n  display: flex;\n  flex-direction: column;\n  font: 300 1.1rem/1.5 "Inter";\n  align-items: center;\n  text-align: flex-end;\n  justify-content: end;\n  // padding: 10px 10px;\n  cursor: pointer;\n  margin: 0 10px;\n  width: 45px;\n  height: 45px;\n  white-space: nowrap;\n  //color: white;\n  font-style: normal;\n  font-size: 9px;\n//   background: rgba(0, 30, 60, 0.5);\n  border: 1px solid #98acd97d;\n  &:hover {\n    background-color: #ffd966;\n  }\n\n  @media screen and (max-width: 568px) {\n    // margin: 0 7px;\n    width: 39px !important;\n    height: 37px !important;\n    \n  }\n']))),w=g.default.li(f||(f=i(['\n  display: flex;\n  flex-direction: column;\n  font: 300 1.1rem/1.5 "Inter";\n  align-items: center;\n  text-align: center;\n  justify-content: center;\n  cursor: pointer;\n  margin-right: 10px;\n  margin-bottom: 10px;\n  width: 34px;\n  height: 34px;\n  white-space: nowrap;\n  font-style: normal;\n  font-size: 1px;\n\n  &:hover {\n    background-color: #ffd966;\n  }\n\n  @media screen and (max-width: 568px) {\n    // font: 500 0.8rem/1.8 "Inter";\n    // margin: 0 7px;\n    // padding: 0px 7px;\n    //  width: 12.5%;\n    // height: 33px;\n    width: 39px !important;\n    height: 23px !important;\n\n  }\n']))),S=g.default.img(p||(p=i(["\n  width: 39px;\n  height: 22px;\n  // object-fit: contain;\n  margin: 0px 11px;\n\n  @media screen and (max-width: 568px) {\n\n  }\n"])));var C,D;const E=g.default.div(C||(C=i(["\n    position: absolute;\n    width: 100%;\n    height: 100%;\n"]))),A=g.default.div(D||(D=i(["position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  backdrop-filter: blur(10px); /* Adjust the blur amount as needed */\n  background-color: rgba(255, 255, 255, 0.8); /* Adjust the background color and opacity as needed */\n  opacity: 1;\n  transition: opacity 0.5s;\n  "]))),k=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,i,s);return s},M=e=>e?k(e):k;var T=n(443);const{useDebugValue:I}=e,{useSyncExternalStoreWithSelector:O}=T;let L=!1;const P=e=>e;const B=e=>{"function"!==typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"===typeof e?M(e):e,n=(e,n)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=arguments.length>2?arguments[2]:void 0;n&&!L&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),L=!0);const r=O(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return I(r),r}(t,e,n);return Object.assign(n,t),n},N=e=>e?B(e):B;const R=N(e=>({isViewerMode:!!new URLSearchParams(window.location.href).get("viewerMode"),isDraftEditor:!!new URLSearchParams(window.location.href).get("isDraftEditor"),isEditorMode:!!new URLSearchParams(window.location.href).get("editorMode"),isMobile:window.innerWidth<=1024,setIsMobile:t=>{e({isMobile:t})},dialogs:[],addDialog:(t,n)=>{e(e=>({dialogs:[...e.dialogs,{id:t,dialog:n}]}))},removeDialog:t=>{e(e=>({dialogs:e.dialogs.filter(e=>e.id!==t)}))},isLoading:!1,setIsLoading:t=>{e({isLoading:t})},isQuoteLoading:!1,setIsQuoteLoading:t=>{e({isQuoteLoading:t})},selectedGroupId:null,setSelectedGroupId:t=>e({selectedGroupId:t}),selectedAttributeId:null,setSelectedAttributeId:t=>e({selectedAttributeId:t}),selectedStepId:null,setSelectedStepId:t=>e({selectedStepId:t}),selectedTemplateGroupId:null,setSelectedTemplateGroupId:t=>e({selectedTemplateGroupId:t}),priceFormatter:new Intl.NumberFormat("it-IT",{style:"currency",currency:"LEI"}),setPriceFormatter:t=>{e({priceFormatter:t})},undoStack:[],setUndoStack:t=>{e(e=>({undoStack:t(e.undoStack)}))},redoStack:[],setRedoStack:t=>{e(e=>({redoStack:t(e.redoStack)}))},isUndo:!1,setIsUndo:t=>{e({isUndo:t})},isRedo:!1,setIsRedo:t=>{e({isRedo:t})},lastSelectedItem:{type:"attribute",id:null},setLastSelectedItem:t=>{e({lastSelectedItem:t})}})),F=R;function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function j(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}function V(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=n(536),Y=n.n(G);class W{static _(e,t){var n;if(null!==(n=this.translations)&&void 0!==n&&n.statics){var r;const t=Array.from(null===(r=this.translations)||void 0===r?void 0:r.statics.keys());for(let n of t)if(n.toLowerCase()===e.toLowerCase())return this.translations.statics.get(n)}let i=window.gt;return i?i.dgettext(t,e):e}static _d(e){var t;let n=e;if(null!==(t=this.translations)&&void 0!==t&&t.dynamics){var r;const t=Array.from(null===(r=this.translations)||void 0===r?void 0:r.dynamics.keys());for(let r of t)r.toLowerCase()===e.toLowerCase()&&this.translations.dynamics.get(r)&&(n=this.translations.dynamics.get(r))}return n}}W.translations=null;function q(){var e,t;const{groups:n,isSceneLoading:r,product:i,isAreaVisible:s,draftCompositions:a,sellerSettings:o,items:l}=(0,m.useZakeke)();let u=n.findIndex(e=>-1===e.id);-1!==u&&n.splice(u,1);const c=null!==(t=((e,t,n,r)=>{var i,s;const{isEditorMode:a,isViewerMode:o,isDraftEditor:l}=F(),u=[],c={id:-2,guid:"0000-0000-0000-0000",name:null!==(i=null===r||void 0===r?void 0:r.customizeButtonLabel)&&void 0!==i?i:W._("Customize","Composer"),enabled:t,attributes:[],steps:[],cameraLocationId:"",displayOrder:e.length-1,direction:0,attributesAlwaysOpened:!1,imageUrl:null!==(s=null===r||void 0===r?void 0:r.customizeButtonIconUrl)&&void 0!==s?s:"",templateGroups:[]},h={id:-3,name:W._("Saved designs","Composer"),imageUrl:"../src/assets/icons/saved_designs.svg",attributes:[],steps:[],guid:"",enabled:!0,displayOrder:0,cameraLocationId:null,direction:0,attributesAlwaysOpened:!1,templateGroups:[]};let d=e.map(e=>H(H({},e),{},{templateGroups:e.templateGroups,attributes:e.attributes.filter(e=>e.enabled&&e.options.some(e=>e.enabled)).map(e=>H(H({},e),{},{options:e.options.filter(e=>e.enabled)}))}));function f(e){let t=Y().cloneDeep(e);for(let n of t)n.options=n.options.filter(e=>e.enabled);return t=t.filter(e=>e.enabled&&e.options.length>0),t}for(const p of d)if(p.enabled){let e=Y().cloneDeep(p);for(let n of e.steps)n.attributes=f(n.attributes);e.steps=e.steps.filter(e=>e.attributes.length>0||e.templateGroups.length>0),e.attributes=f(e.attributes);let t=e.steps.reduce((e,t)=>e+(t.attributes.length+t.templateGroups.length),0);t+=e.attributes.length+e.templateGroups.length,t>0&&u.push(e)}return t&&u.push(c),!n||a||o||l||u.push(h),u})(n,!(r||!i)&&i.areas.some(e=>s(e.id)),null!==(e=n&&a&&a.length>0)&&void 0!==e&&e,o))&&void 0!==t?t:[];u=c.findIndex(e=>-2===e.id),-1!==u&&c.splice(u,1);const h=(null===l||void 0===l?void 0:l.filter(e=>0===e.type).length)>0;if(l&&!h){const e=c.findIndex(e=>"OVERLAY TYPE"===e.name);e>0&&c.splice(e,1)}if(!r){const e=to(),t=no();let n=c;null===e||void 0===e||e.map(e=>{n.push({id:e.id,guid:e.cameraLocationID,name:e.name,enabled:!0,attributes:[],steps:[],cameraLocationId:e.cameraLocationID,displayOrder:3,direction:2,attributesAlwaysOpened:!1,imageUrl:"",templateGroups:[]})}),null===t||void 0===t||t.map(e=>{n.push({id:e.id,guid:e.cameraLocationID,name:e.name,enabled:!0,attributes:[],steps:[],cameraLocationId:e.cameraLocationID,displayOrder:3,direction:3,attributesAlwaysOpened:!1,imageUrl:"",templateGroups:[]})})}return c}const Z=e=>0===e?"colors":2===e?"signature":"logos";var K,X,J;const $=["title","titleId"];function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(null,arguments)}function ee(t,n){let{title:r,titleId:i}=t,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,$);return e.createElement("svg",Q({width:"800px",height:"800px",viewBox:"-3 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},s),r?e.createElement("title",{id:i},r):null,K||(K=e.createElement("g",{id:"icomoon-ignore"})),X||(X=e.createElement("path",{d:"M13.114 2.887c-7.243 0-13.114 5.871-13.114 13.113s5.871 13.113 13.114 13.113c7.242 0 13.112-5.871 13.112-13.113s-5.87-13.113-13.112-13.113zM13.114 28.064c-6.653 0-12.065-5.412-12.065-12.064s5.412-12.063 12.065-12.063c6.652 0 12.063 5.412 12.063 12.063s-5.411 12.064-12.063 12.064z",fill:"#000000"})),J||(J=e.createElement("path",{d:"M12.318 10.363l-0.742-0.742-6.379 6.379 6.379 6.379 0.742-0.742-5.113-5.113h12.726v-1.049h-12.726z",fill:"#000000"})))}const te=e.forwardRef(ee);n.p;n.p;var ne;const re=["title","titleId"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(null,arguments)}function se(t,n){let{title:r,titleId:i}=t,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,re);return e.createElement("svg",ie({fill:"#000000",width:"800px",height:"800px",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":i},s),r?e.createElement("title",{id:i},r):null,ne||(ne=e.createElement("path",{d:"M 16 1.5859375 L 10.292969 7.2929688 L 11.707031 8.7070312 L 15 5.4140625 L 15 15 L 5.4140625 15 L 8.7070312 11.707031 L 7.2929688 10.292969 L 1.5859375 16 L 7.2929688 21.707031 L 8.7070312 20.292969 L 5.4140625 17 L 15 17 L 15 26.585938 L 11.707031 23.292969 L 10.292969 24.707031 L 16 30.414062 L 21.707031 24.707031 L 20.292969 23.292969 L 17 26.585938 L 17 17 L 26.585938 17 L 23.292969 20.292969 L 24.707031 21.707031 L 30.414062 16 L 24.707031 10.292969 L 23.292969 11.707031 L 26.585938 15 L 17 15 L 17 5.4140625 L 20.292969 8.7070312 L 21.707031 7.2929688 L 16 1.5859375 z"})))}const ae=e.forwardRef(se);n.p;var oe,le;const ue=["title","titleId"];function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(null,arguments)}function he(t,n){let{title:r,titleId:i}=t,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,ue);return e.createElement("svg",ce({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":i},s),r?e.createElement("title",{id:i},r):null,oe||(oe=e.createElement("circle",{opacity:.5,cx:12,cy:12,r:10,stroke:"#1C274C",strokeWidth:1.5})),le||(le=e.createElement("path",{d:"M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15",stroke:"#1C274C",strokeWidth:1.5,strokeLinecap:"round"})))}const de=e.forwardRef(he);n.p;n.p;n.p;var fe=n(579),pe=Object.defineProperty,ge=Object.defineProperties,me=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,be=Math.pow,xe=(e,t,n)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,we=(e,t)=>{for(var n in t||(t={}))_e.call(t,n)&&xe(e,n,t[n]);if(ve)for(var n of ve(t))ye.call(t,n)&&xe(e,n,t[n]);return e},Se=(e,t)=>ge(e,me(t)),Ce=(e,t,n,r,i,s,a,o,l,u,c)=>{const h=null!=c?c:((e,t)=>"".concat(t?100/(3*e):100/e,"%"))(e,r),d=n?1:0,f="fade"===s?200:500;let p="auto";return l&&(p=u?"100%":n?"auto":"0"),{width:h,height:p,padding:"0 ".concat(i?i/2:0,"px"),transition:s?"".concat(a||f,"ms ease 0s"):void 0,transform:"zoom"===s?"scale(".concat(t&&n?1:o||.85,")"):void 0,opacity:"fade"===s?d:1}},De=t=>{let{count:n,children:r,index:i,isCurrentSlide:s,typeOfSlide:a,wrapAround:o,cellSpacing:l,slideWidth:u,animation:c,speed:h,zoomScale:d,onVisibleSlideHeightChange:f,adaptiveHeight:p,initializedAdaptiveHeight:g,updateIOEntry:m,id:v,carouselRef:_}=t;var y;const b=o?((e,t,n)=>"prev-cloned"===n?e-t:"next-cloned"===n?e+t:e)(i,n,a):i,x=(0,e.useRef)(null),w=((t,n,r)=>{const[i,s]=(0,e.useState)(),a=(0,e.useRef)(r);return(0,e.useEffect)(()=>{a.current=r},[r]),(0,e.useEffect)(()=>{const e=null==t?void 0:t.current,r=null==n?void 0:n.current;if(!window.IntersectionObserver||!e||!r)return;const i=new IntersectionObserver(e=>{e.forEach(e=>{s(e),a.current(e)})},{threshold:[.05,.95],root:r});return i.observe(e),()=>i.disconnect()},[t,n]),i})(x,_,e=>{m(v,(null==e?void 0:e.intersectionRatio)>=.95)}),S=!!(null==w?void 0:w.isIntersecting),C=(null!=(y=null==w?void 0:w.intersectionRatio)?y:1)>=.95,D=(0,e.useRef)(!1);(0,e.useEffect)(()=>{var e;const t=x.current;if(t){const n=null==(e=t.getBoundingClientRect())?void 0:e.height,r=D.current;S&&!r?f(b,n):!S&&r&&f(b,null),D.current=S}},[b,S,f]);const E=s&&C?" slide-current":"";return(0,fe.jsx)("div",Se(we({ref:x},{inert:C?void 0:"true"}),{className:"slide".concat(E).concat(a?" ".concat(a):"").concat(C?" slide-visible":""),style:Ce(n,s,C,o,l,c,h,d,p,g,u),children:r}))},Ee={position:"absolute",width:"1px",height:"1px",overflow:"hidden",padding:0,margin:"-1px",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:0},Ae=e=>{let{message:t,ariaLive:n="polite"}=e;return(0,fe.jsx)("div",{"aria-live":n,"aria-atomic":"true",style:Ee,tabIndex:-1,children:t})},ke=(e,t,n,r,i,s,a)=>t?n+i:n>=r-1||"left"===a&&n>=r-s?n:"remainder"===e&&"left"===a?Math.min(n+i,r-s):Math.min(n+i,r-1),Me=(e,t,n,r,i,s)=>t?n-r:n<=0||"right"===s&&n<=i-1?n:"remainder"===e&&"right"===s?Math.max(n-r,i-1):Math.max(n-r,0),Te=(e,t)=>(e%t+t)%t,Ie=e=>({border:0,background:"rgba(0,0,0,0.4)",color:"white",padding:10,textTransform:"uppercase",opacity:e?.3:1,cursor:e?"not-allowed":"pointer"}),Oe=e=>{let{previousSlide:t,defaultControlsConfig:{prevButtonClassName:n,prevButtonStyle:r={},prevButtonText:i,prevButtonOnClick:s},onUserNavigation:a,previousDisabled:o}=e;return(0,fe.jsx)("button",{className:n,style:we(we({},Ie(o)),r),disabled:o,onClick:e=>{null==s||s(e),e.defaultPrevented||(a(e),e.preventDefault(),t())},"aria-label":"previous",type:"button",children:i||"Prev"})},Le=e=>{let{nextSlide:t,defaultControlsConfig:{nextButtonClassName:n,nextButtonStyle:r={},nextButtonText:i,nextButtonOnClick:s},nextDisabled:a,onUserNavigation:o}=e;return(0,fe.jsx)("button",{className:n,style:we(we({},Ie(a)),r),disabled:a,onClick:e=>{null==s||s(e),e.defaultPrevented||(o(e),e.preventDefault(),t())},"aria-label":"next",type:"button",children:i||"Next"})},Pe=(e,t,n,r,i,s)=>{const a=[],o=t<=0?1:t;if(i){for(let t=0;t<e;t+=o)a.push(t);return a}if("center"===s){for(let t=0;t<e-1;t+=o)a.push(t);return e>0&&a.push(e-1),a}if("left"===s){if(r>=e)return[0];const t=e-r;for(let e=0;e<t;e+=o)a.push(e);return"remainder"===n?a.push(t):a.push(a[a.length-1]+o),a}if("right"===s){if(r>=e)return[e-1];const t=r-1;if("remainder"===n){for(let n=t;n<e-1;n+=o)a.push(n);a.push(e-1)}else{for(let n=e-1;n>t;n-=o)a.push(n);a.push(a[a.length-1]-o),a.reverse()}return a}return a},Be=t=>{let{pagingDotsIndices:n,defaultControlsConfig:{pagingDotsContainerClassName:r,pagingDotsClassName:i,pagingDotsStyle:s={},pagingDotsOnClick:a},currentSlide:o,onUserNavigation:l,slideCount:u,goToSlide:c}=t;const h=(0,e.useCallback)(e=>({cursor:"pointer",opacity:e?1:.5,background:"transparent",border:"none",fill:"black"}),[]),d=Te(o,u);return(0,fe.jsx)("ul",{className:r,style:{position:"relative",top:-10,display:"flex",margin:0,padding:0,listStyleType:"none"},children:n.map((e,t)=>{const r=d===e||d<e&&(0===t||d>n[t-1]);return(0,fe.jsx)("li",{className:r?"paging-item active":"paging-item",children:(0,fe.jsx)("button",{className:i,type:"button",style:we(we({},h(r)),s),onClick:t=>{null==a||a(t),t.defaultPrevented||(l(t),c(e))},"aria-label":"slide ".concat(e+1," bullet"),"aria-selected":r,children:(0,fe.jsx)("svg",{className:"paging-dot",width:"6",height:"6","aria-hidden":"true",focusable:"false",viewBox:"0 0 6 6",children:(0,fe.jsx)("circle",{cx:"3",cy:"3",r:"3"})})})},e)})})},Ne=(e,t,n,r,i)=>{const s=i?3*t:t,a=100/s;let o=i?-100/3:0;if("right"===r&&n>1){o+=a*(n-1)}if("center"===r&&n>1){o+=a*((n-1)/2)}return o-100/s*e},Re=e.forwardRef((t,n)=>{let{animation:r,animationDistance:i,cellAlign:s,children:a,currentSlide:o,disableAnimation:l,disableEdgeSwiping:u,draggedOffset:c,easing:h,edgeEasing:d,isDragging:f,scrollMode:p,slideCount:g,slidesToScroll:m,slidesToShow:v,speed:_,wrapAround:y,slideWidth:b,setIsAnimating:x}=t;const w=y?3*g:g,S=b?"calc(".concat(b," * ").concat(w,")"):"".concat(100*w/v,"%"),C=[g,v,s,y],D=Pe(g,m,p,v,y,s);let E="".concat(c,"px");if(f&&u&&!y){const e=[D[0],D[D.length-1]].map(e=>Ne(e,...C));E="clamp(".concat(e[1],"%, ").concat(c,"px, ").concat(e[0],"%)")}const A=Ne(o,...C),k=!u&&!y&&(o===D[0]&&i<0||o===D[D.length-1]&&i>0),{value:M,isAnimating:T}=((t,n,r,i)=>{const[s,a]=(0,e.useState)(1),o=(0,e.useRef)(Date.now()),l=(0,e.useRef)(),u=(0,e.useRef)(!0),c=(0,e.useRef)(null),h=null===c.current||c.current===r||i?s:0;return(0,e.useEffect)(()=>{if(c.current=r,u.current)return void(u.current=!1);if(i)return;o.current=Date.now(),a(0);const e=()=>{l.current=requestAnimationFrame(()=>{const n=Date.now(),r=Math.min(1,(n-o.current)/t);a(r),r<1?e():l.current=void 0})};return e(),()=>{void 0!==l.current&&(cancelAnimationFrame(l.current),a(1))}},[r,t,i]),{isAnimating:1!==h,value:n(h)}})(_,k?d:h,o+i,f||l||"fade"===r);let I;if(f||0!==A||T)if(f)I="translateX(".concat(E,")");else{const e=T?(1-M)*i:0;I="translateX(calc(".concat(A,"% - ").concat(e,"px))")}return(0,e.useEffect)(()=>{x(T)},[T,x]),(0,fe.jsx)("div",{ref:n,className:"slider-list",style:{width:S,textAlign:"left",userSelect:"auto",transform:I,display:"flex"},children:a})});Re.displayName="SliderList";var Fe,ze={position:"absolute",display:"flex",zIndex:1,top:0,left:0,bottom:0,right:0},je=[{funcName:"renderTopLeftControls",key:"TopLeft"},{funcName:"renderTopCenterControls",key:"TopCenter"},{funcName:"renderTopRightControls",key:"TopRight"},{funcName:"renderCenterLeftControls",key:"CenterLeft"},{funcName:"renderCenterCenterControls",key:"CenterCenter"},{funcName:"renderCenterRightControls",key:"CenterRight"},{funcName:"renderBottomLeftControls",key:"BottomLeft"},{funcName:"renderBottomCenterControls",key:"BottomCenter"},{funcName:"renderBottomRightControls",key:"BottomRight"}],Ve=(t,n,r,i,s,a,o)=>{if(t.withoutControls)return null;const l=Se(we({},t),{currentSlide:r,slideCount:n}),u=(e=>{let{cellAlign:t,currentSlide:n,slideCount:r,slidesToShow:i,wrapAround:s}=e;return!s&&(n>=r-1||"left"===t&&n>=r-i)})(l),c=(e=>{let{cellAlign:t,currentSlide:n,slidesToShow:r,wrapAround:i}=e;return!i&&(0===n||"right"===t&&n<=r-1)})(l),h=Pe(n,o,t.scrollMode,t.slidesToShow,t.wrapAround,t.cellAlign);return je.map(l=>{var d,f;return t[l.funcName]&&"function"===typeof t[l.funcName]?(0,fe.jsx)("div",{style:Se(we({},(f=l.key,we(we({},(e=>{let t,n;switch(e){case"TopLeft":case"TopCenter":case"TopRight":t="flex-start";break;case"CenterLeft":case"CenterCenter":case"CenterRight":t="center";break;case"BottomLeft":case"BottomCenter":case"BottomRight":t="flex-end"}switch(e){case"TopLeft":case"CenterLeft":case"BottomLeft":n="flex-start";break;case"TopCenter":case"CenterCenter":case"BottomCenter":n="center";break;case"TopRight":case"CenterRight":case"BottomRight":n="flex-end"}return{alignItems:t,justifyContent:n}})(f)),ze))),{pointerEvents:"none"}),children:(0,fe.jsx)("div",{className:["slider-control-".concat(l.key.toLowerCase()),t.defaultControlsConfig.containerClassName||""].join(" ").trim(),style:{pointerEvents:"auto"},children:null==(d=t[l.funcName])?void 0:d.call(t,{cellAlign:t.cellAlign,cellSpacing:t.cellSpacing,currentSlide:r,defaultControlsConfig:t.defaultControlsConfig||{},pagingDotsIndices:h,goToSlide:i,nextDisabled:u,nextSlide:s,onUserNavigation:t.onUserNavigation,previousDisabled:c,previousSlide:a,scrollMode:t.scrollMode,slideCount:n,slidesToScroll:o,slidesToShow:t.slidesToShow||1,vertical:t.vertical,wrapAround:t.wrapAround})})},l.funcName):(0,fe.jsx)(e.Fragment,{},l.funcName)})},Ue=e=>be(e-1,3)+1,He={adaptiveHeight:!1,adaptiveHeightAnimation:!0,afterSlide:()=>{},autoplay:!1,autoplayInterval:3e3,autoplayReverse:!1,beforeSlide:()=>{},cellAlign:"left",cellSpacing:0,defaultControlsConfig:{},disableAnimation:!1,disableEdgeSwiping:!1,dragging:!0,dragThreshold:.5,easing:Ue,edgeEasing:Ue,enableKeyboardControls:!1,frameAriaLabel:"carousel-slider",keyCodeConfig:{nextSlide:[39,68,38,87],previousSlide:[37,65,40,83],firstSlide:[81],lastSlide:[69],pause:[32]},onDragStart:()=>{},onDrag:()=>{},onDragEnd:()=>{},onUserNavigation:()=>{},pauseOnHover:!0,renderAnnounceSlideMessage:e=>{let{currentSlide:t,count:n}=e;return"Slide ".concat(t+1," of ").concat(n)},renderBottomCenterControls:e=>(0,fe.jsx)(Be,we({},e)),renderCenterLeftControls:e=>(0,fe.jsx)(Oe,we({},e)),renderCenterRightControls:e=>(0,fe.jsx)(Le,we({},e)),scrollMode:"page",slidesToScroll:1,slidesToShow:1,speed:500,style:{},swiping:!0,vertical:!1,withoutControls:!1,wrapAround:!1,children:(0,fe.jsx)(fe.Fragment,{})},Ge=(t,n,r)=>{const[i,s,a]=(t=>{const[n,r]=(0,e.useState)(t),i=(0,e.useRef)(t);return[n,(0,e.useCallback)(e=>{i.current=e,r(e)},[]),i]})([]),[o,l]=(0,e.useState)(!1);return{handleVisibleSlideHeightChange:(0,e.useCallback)((e,t)=>{const i=a.current;let o;o=null===t?i.filter(t=>t.slideIndex!==e):[...i,{slideIndex:e,height:t}],s(o),o.length>=Math.min(r,Math.ceil(n))&&l(!0)},[r,s,n,a]),frameHeight:(0,e.useMemo)(()=>{if(t){if(!o)return"auto";const e=Math.max(0,...i.map(e=>e.height));return"".concat(e,"px")}return"auto"},[t,o,i]),initializedAdaptiveHeight:o}},Ye=e.forwardRef((t,n)=>{const r=t,{adaptiveHeight:i,adaptiveHeightAnimation:s,afterSlide:a,animation:o,autoplay:l,autoplayInterval:u,autoplayReverse:c,beforeSlide:h,cellAlign:d,cellSpacing:f,children:p,className:g,disableAnimation:m,dragging:v,dragThreshold:_,enableKeyboardControls:y,frameAriaLabel:b,keyCodeConfig:x,onDrag:w,onDragEnd:S,onDragStart:C,onUserNavigation:D,pauseOnHover:E,renderAnnounceSlideMessage:A,scrollMode:k,slideIndex:M,slidesToScroll:T,slidesToShow:I,slideWidth:O,speed:L,style:P,swiping:B,wrapAround:N,zoomScale:R}=r,F=e.Children.toArray(p).filter(Boolean),z=F.length,j=O||"auto"===T?"left":d,V="auto"===T?"remainder":k,[U,H]=(0,e.useState)(new Map),G=Array.from(U).filter(e=>{let[,t]=e;return t}).length,[Y,W]=(0,e.useState)(G),q=O?Y:I,Z="fade"===o?q:"auto"===T?Math.max(Y,1):T,[K,X]=(0,e.useState)(()=>((e,t,n,r,i,s,a)=>{if(void 0!==e)return e;const o=Pe(t,r,a,n,!1,i);return s?o[o.length-1]:o[0]})(M,z,q,Z,j,c,V)),[J,$]=(0,e.useState)(!1),[Q,ee]=(0,e.useState)(!1),[te,ne]=(0,e.useState)(0),[re,ie]=(0,e.useState)(0),[se,ae]=(0,e.useState)(!1),oe=(0,e.useCallback)((e,t)=>{!!U.get(e)!==t&&H(n=>{const r=new Map(n);return r.set(e,t),r})},[U]),le=(0,e.useRef)(!1);(0,e.useEffect)(()=>{Q&&(le.current=!0),Q||se||(le.current||W(G),le.current=!1)},[se,Q,G]);const ue=(0,e.useRef)(null),ce=(0,e.useRef)(0),he=(0,e.useRef)(null),de=(0,e.useRef)(null),pe=(0,e.useRef)(),ge=(0,e.useRef)(null),me=(0,e.useRef)(!0),ve=(0,e.useCallback)(e=>{e&&e.querySelectorAll(".slider-list img").forEach(e=>e.setAttribute("draggable","false")),he.current=e},[]);(0,e.useEffect)(()=>(me.current=!0,()=>{me.current=!1}),[]);const _e=(t=>{const n=(0,e.useRef)(null);return(0,e.useEffect)(()=>{t&&("function"===typeof t?t(n.current):t.current=n.current)},[t]),n})(n),ye=_e||de,be=(0,e.useCallback)(e=>{if(!he.current||!ye.current)return;const t=Te(e,z),n=e!==K;n&&h(K,t);const r=he.current.getBoundingClientRect().left-ye.current.getBoundingClientRect().left,i=he.current.offsetWidth;let s=Ne(t,z,q,j,N)/100*i;if(N){const t=i/3;e<0&&(s+=t),e>=z&&(s-=t)}if(ie(s-r),n){X(t);setTimeout(()=>{me.current&&a(t)},m?40:L||500)}},[a,h,ye,j,K,m,L,z,q,N]),xe=(0,e.useCallback)(()=>{const e=ke(V,N,K,z,Z,q,j);K!==e&&be(e)},[j,K,be,Z,V,z,q,N]),Se=(0,e.useCallback)(()=>{const e=Me(V,N,K,Z,q,j);K!==e&&be(e)},[j,K,be,Z,V,q,N]),Ce=(0,e.useRef)(M);(0,e.useEffect)(()=>{void 0===M||M===Ce.current||c||(be(M),Ce.current=M)},[M,c,be]),(0,e.useEffect)(()=>{let e=null;return J&&(e=Date.now()),()=>{null!==e&&null!==ge.current&&(ge.current+=Date.now()-e)}},[J]),(0,e.useEffect)(()=>{if(l&&!J){const e=null!==ge.current?u-(Date.now()-ge.current):u;pe.current=setTimeout(()=>{ge.current=Date.now(),c?Se():xe()},e)}return l&&J&&clearTimeout(pe.current),()=>{clearTimeout(pe.current)}},[J,l,u,c,Se,xe]);const Ee=(0,e.useRef)([]),Ie=e=>{if(!Q||!ye.current)return;ee(!1);let t=0;if(Ee.current.length>1){const e=Ee.current[0],n=Ee.current[Ee.current.length-1],r=n.time-e.time,i=.92;let s=9*Math.abs((n.pos-e.pos)/r);for(;Math.abs(s)>1;)t+=s,s*=i}Ee.current=[];const n=Math.abs(te)+Math.abs(t);S(e),ue.current=null,ne(0);const r=ye.current.offsetWidth*Math.min(1,Z/q),i=r*_;if(n<i)return void be(K);const s=q>=2*Z?1+Math.floor((n-i)/r):1;let a=K;for(let o=0;o<s;o+=1)a=te>0?ke(V,N,a,z,Z,q,j):Me(V,N,a,Z,q,j);a!==K&&D(e),be(a)},Oe=(0,e.useCallback)(e=>{B&&he.current&&ye.current&&(ee(!0),ce.current=he.current.getBoundingClientRect().left-ye.current.getBoundingClientRect().left,C(e))},[ye,C,B]),Le=(0,e.useCallback)(e=>{if(!Q)return;const t=null===ue.current,n=null!==ue.current?e-ue.current:0,r=te+n,i=Date.now();for(;Ee.current.length>0&&!(i-Ee.current[0].time<=100);)Ee.current.shift();Ee.current.push({pos:r,time:i}),t||ne(r),ue.current=e},[Q,te]),Be=(0,e.useCallback)(e=>{if(!Q||!ye.current)return;C(e);const t=ye.current.offsetWidth-e.touches[0].pageX;Le(t)},[Q,ye,Le,C]),Fe=(0,e.useCallback)(e=>{v&&he.current&&ye.current&&(ee(!0),ce.current=he.current.getBoundingClientRect().left-ye.current.getBoundingClientRect().left,C(e))},[ye,v,C]),ze=(0,e.useCallback)(e=>{if(!Q||!ye.current)return;w(e);const t=e.clientX-ye.current.getBoundingClientRect().left,n=ye.current.offsetWidth-t;Le(n)},[ye,Q,Le,w]),je=e=>{e.preventDefault(),Ie(e)},Ue=(0,e.useCallback)(()=>{E&&$(!0)},[E]),He=(0,e.useCallback)(()=>{E&&$(!1)},[E]),{frameHeight:Ye,handleVisibleSlideHeightChange:We,initializedAdaptiveHeight:qe}=Ge(i,q,z),Ze=e=>{const t=F.map((t,n)=>(0,fe.jsx)(De,{id:"".concat(e,"-").concat(n),count:z,index:n,isCurrentSlide:K===n,typeOfSlide:e,wrapAround:N,cellSpacing:f,animation:o,speed:L,zoomScale:R,onVisibleSlideHeightChange:We,slideWidth:O,updateIOEntry:oe,adaptiveHeight:i,initializedAdaptiveHeight:qe,carouselRef:ye,children:t},"".concat(e,"-").concat(n)));return t};return(0,fe.jsxs)("div",{className:"slider-container",style:{position:"relative"},onMouseEnter:Ue,onMouseLeave:He,children:[(0,fe.jsx)(Ae,{ariaLive:l&&!J?"off":"polite",message:A({currentSlide:K,count:z})}),Ve(r,z,K,be,xe,Se,Z),(0,fe.jsx)("div",{className:["slider-frame",g||""].join(" ").trim(),style:we({overflow:"hidden",width:"100%",position:"relative",outline:"none",touchAction:"pan-y",height:Ye,transition:s?"height 300ms ease-in-out":void 0,willChange:"height",userSelect:"none"},P),"aria-label":b,role:"region",tabIndex:y?0:-1,onKeyDown:y?e=>{let t=null;if(Object.keys(x).forEach(n=>{var r;(null==(r=x[n])?void 0:r.includes(e.keyCode))&&(t=n)}),null!==t)switch(e.preventDefault(),e.stopPropagation(),t){case"nextSlide":D(e),xe();break;case"previousSlide":D(e),Se();break;case"firstSlide":case"lastSlide":{D(e);const n=Pe(z,Z,V,q,N,j);be("firstSlide"===t?n[0]:n[n.length-1]);break}case"pause":$(e=>!e)}}:void 0,ref:ye,onMouseUp:je,onMouseDown:Fe,onMouseMove:ze,onMouseLeave:je,onTouchStart:Oe,onTouchEnd:Ie,onTouchMove:Be,children:(0,fe.jsxs)(Re,{animationDistance:re,cellAlign:j,currentSlide:K,disableEdgeSwiping:r.disableEdgeSwiping,draggedOffset:ce.current-te,disableAnimation:m,easing:r.easing,edgeEasing:r.edgeEasing,isDragging:Q,ref:ve,scrollMode:V,animation:o,slideCount:z,slidesToScroll:Z,slidesToShow:q,speed:L,slideWidth:O,wrapAround:N,setIsAnimating:ae,children:[N?Ze("prev-cloned"):null,Ze(),N?Ze("next-cloned"):null]})})]})});Ye.defaultProps=He,Ye.displayName="Carousel";(0,g.default)(Ye).withConfig({displayName:"Atomic__CarouselContainer",componentId:"sc-1w70hpw-0"})(["border-bottom:2px solid #c4c4c4;position:relative;"]);const We=g.default.div.withConfig({displayName:"Atomic__Icon",componentId:"sc-1w70hpw-1"})(["display:inline-block;width:24px;height:24px;cursor:pointer;"," svg{fill:currentColor;width:100%;height:100%;we}"],e=>e.hoverable&&"\n    @media(hover) {\n      &:hover {\n        opacity: 0.5\n      }\n    }\n  "),qe=g.default.textarea.withConfig({displayName:"Atomic__TextArea",componentId:"sc-1w70hpw-2"})(["background-color:#fff;padding:6px 9px;color:#414042;font-size:15px;border:1px #fff solid;font-family:Inter,sans-serif;outline:none;resize:none;overflow:hidden !important;placeholder:'Input your text here';width:calc(100% - 66px);appearance:none;height:32px;font-size:14px;line-height:14px;margin-bottom:5px;box-shadow:none;border-width:initial;border-style:none;border-color:initial;border-image:initial;border-radius:3px;&::placeholder{font:10px;color:#999999;placeholder:'Input your text here';}&:hover{border:1px black solid;}&:focus{border:1px black solid;outline:none;}"]),Ze=(g.default.div.withConfig({displayName:"Atomic__FontTextArea",componentId:"sc-1w70hpw-3"})(["width:calc(100% - 66px);appearance:none;height:32px;font-size:14px;line-height:14px;margin-bottom:5px;box-shadow:none;border-width:initial;border-style:none;border-color:initial;border-image:initial;border-radius:3px;&::placeholder{color:#999999;font-style:italic;placeholder:'Input your text here';}&:hover{border:1px black solid;}&:focus{border:1px black solid;outline:none;}"]),g.default.div.withConfig({displayName:"Atomic__Row",componentId:"sc-1w70hpw-4"})(["margin-bottom:10px;&:last-child{margin-bottom:0;}"]),g.default.label.withConfig({displayName:"Atomic__ItemLabel",componentId:"sc-1w70hpw-5"})(["font-size:14px;display:block;margin-bottom:5px;span{float:right;color:black;cursor:pointer;&:hover{opacity:0.6;}}"]),g.default.button.withConfig({displayName:"Atomic__Button",componentId:"sc-1w70hpw-6"})(["display:flex;justify-content:center;align-items:center;width:",";background-color:",";color:",";min-height:40px;padding:",";text-align:center;text-transform:",";border:",";cursor:",";border-radius:4px;"," "," "," "," + span{margin-left:10px;}span{display:flex;text-align:center;justify-content:center;align-items:center;}"],e=>e.isFullWidth?"100%":e.outline?"60px":e.primary?"200px":e.isMoveElementButton?"138px":"60px",e=>e.primary?"#297ca3":"white",e=>e.outline?"black":e.primary?"white":"#297CA3",e=>e.outline?"":"5px 10px 5px 10px",e=>e.uppercase?"uppercase":"none",e=>(e.outline,"1px solid #297CA3"),e=>e.disabled?"auto":"pointer",e=>e.selected&&"\n    border: 1px solid black;\n  ",e=>!e.disabled&&"\n      &:hover {\n        background-color: ".concat(e.outline?"white":(e.primary,"#297ca3"),";\n        border: ").concat(e.outline?"1px solid black":"1px solid #4b6074",";\n        color: ").concat(e.outline?"black":"white",";\n      }\n  "),e=>e.disabled&&"\n      background-color: lightgray;\n      border: 1px solid gray;\n      color: #313c46;\n  ",We)),Ke=g.default.div.withConfig({displayName:"Atomic__Button_N",componentId:"sc-1w70hpw-7"})(["display:flex;justify-content:center;align-items:center;padding:",";width:",";background-color:",";color:",";text-align:center;text-transform:",";border:",";cursor:",";border-radius:4px;font-size:12px;line-height:16px;font-weight:500;height:35px;"," "," "," "," + span{margin-left:10px;}span{display:flex;text-align:center;justify-content:center;align-items:center;}"],e=>e.isMoveElementButton?"":"7px 15px",e=>(e.isMoveElementButton,"140px"),e=>e.primary?"#297ca3":"white",e=>e.outline?"black":e.primary?"white":"#297CA3",e=>e.uppercase?"uppercase":"none",e=>(e.outline,"1px solid #297CA3"),e=>e.disabled?"auto":"pointer",e=>e.selected&&"\n    border: 1px solid black;\n  ",e=>!e.disabled&&"\n      &:hover {\n        background-color: ".concat(e.outline?"white":(e.primary,"#297ca3"),";\n        border: ").concat(e.outline?"1px solid black":"1px solid #4b6074",";\n        color: ").concat(e.outline?"black":"white",";\n      }\n  "),e=>e.disabled&&"\n      background-color: lightgray;\n      border: 1px solid gray;\n      color: #313c46;\n  ",We),Xe=(g.default.div.withConfig({displayName:"Atomic__Columns",componentId:"sc-1w70hpw-8"})(["width:100%;display:grid;grid-template-columns:repeat(",",1fr);"],e=>e.columns),g.default.div.withConfig({displayName:"Atomic__Rows",componentId:"sc-1w70hpw-9"})(["width:100%;display:grid;grid-template-rows:repeat(",",1fr);"],e=>e.rows),g.default.button.withConfig({displayName:"Atomic__CloseEditorButton",componentId:"sc-1w70hpw-10"})(["position:fixed;bottom:1em;left:1em;width:92%;height:30px;padding:10px 10px;color:white;height:60px;background-color:#297ca3;height:auto;font-size:13px;font-weight:bold;z-index:11;justify-content:center;border-radius:4px;"]),(0,g.css)(Fe||(Fe=i(["\n\tposition: absolute;\n\tleft: 10px;\n\ttop: 5px;\n\tbackground-color: #f1f1f1;\n\tborder-radius: 30px;\n\twidth: 32px;\n\theight: 32px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 3;\n"])))),Je=(g.default.div.withConfig({displayName:"Atomic__ArrowLeft",componentId:"sc-1w70hpw-11"})(["",";"],Xe),g.default.div.withConfig({displayName:"Atomic__ArrowRight",componentId:"sc-1w70hpw-12"})(["",";left:auto;right:10px;"],Xe),(0,g.default)(We).withConfig({displayName:"Atomic__ArrowLeftIconStyled",componentId:"sc-1w70hpw-13"})(["font-size:22px;"]),(0,g.default)(We).withConfig({displayName:"Atomic__ArrowRightIconStyled",componentId:"sc-1w70hpw-14"})(["font-size:22px;"]),(0,g.default)(We).withConfig({displayName:"Atomic__ZoomInIcon",componentId:"sc-1w70hpw-15"})(["position:absolute;left:20px;top:calc(30%);width:32px;height:32px;z-index:3;"]),(0,g.default)(We).withConfig({displayName:"Atomic__ZoomOutIcon",componentId:"sc-1w70hpw-16"})(["position:absolute;left:20px;top:calc(30% + 50px);width:32px;height:32px;z-index:3;"]),(0,g.default)(Ze).withConfig({displayName:"Atomic__AddToCartButton",componentId:"sc-1w70hpw-17"})(["position:relative;min-width:200px;background-color:#297ca3;font-family:'Inter';display:block;font-size:18px;line-height:18px;font-weight:600;box-sizing:border-box;border-radius:3px;padding:12px 20px;"])),$e=g.default.div.withConfig({displayName:"Atomic__TooltipContent",componentId:"sc-1w70hpw-18"})(["padding:10px;"]);function Qe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var et,tt,nt=n(950);const rt=["title","titleId"];function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(null,arguments)}function st(t,n){let{title:r,titleId:i}=t,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,rt);return e.createElement("svg",it({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":i},s),r?e.createElement("title",{id:i},r):null,et||(et=e.createElement("circle",{opacity:.5,cx:12,cy:12,r:10,stroke:"#1C274C",strokeWidth:1.5})),tt||(tt=e.createElement("path",{d:"M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5",stroke:"#1C274C",strokeWidth:1.5,strokeLinecap:"round"})))}const at=e.forwardRef(st),ot=(n.p,["message","eventMessage","buttonYesLabel","buttonNoLabel","onYesClick","onNoClick"]);var lt,ut,ct,ht,dt,ft,pt,gt,mt;const vt=document.getElementById("dialogs-portal"),_t=e.createContext({dialogId:""});function yt(){const{addDialog:t,removeDialog:n}=F(),{dialogId:r}=(0,e.useContext)(_t);return{currentDialogId:r,showDialog:(e,n)=>t(e,n),closeDialog:e=>n(e)}}const bt=g.default.div(lt||(lt=i(["\n\tposition: fixed;\n\tbackground-color: rgba(0, 0, 0, 0.7);\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 40px;\n\toverflow: auto;\n\tz-index: 12;\n\t@media (max-width: 1024px) {\n\t\tpadding: 20px;\n\t}\n"]))),xt=g.default.div(ut||(ut=i(["\n\tpadding: 20px;\n\tpadding-top: 51px;\n\tbackground-color: rgb(235, 237, 242);;\n\tborder-radius: 5px;\n\tflex-basis: 529px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\tmin-width: 0;\n"]))),wt=((0,g.default)(at)(ct||(ct=i(["\n\tposition: absolute;\n\tright: 10px;\n\ttop: 10px;\n\tcursor: pointer;\n\tfont-size: 20px;\n\tz-index: 999;\n\twidth: 24px;\n\theight: 24px;\n\tbackground: tomato;\n\tcontent: 'Close'\n\t&:hover {\n\t\topacity: 0.5;\n\t}\n"]))),g.default.div(ht||(ht=i(["\n    position: absolute;\n\tright: 10px;\n\ttop: 10px;\n\tz-index: 999;\n\tcursor: pointer;\n    padding: 0px;\n    width: 84px;\n    height: 36px;\n    border-radius: 4%; \n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: tomato;\n    font-family: 'Saira', sans-serif;\n    font-size: 13px;\n    font-weight: 500;\n    color: #fff;\n    position: absolute;\n}"])))),St=e=>{let{children:t,className:n,showCloseButton:r=!0,onClose:i}=e;return(0,fe.jsxs)(xt,{className:n,children:[r&&(0,fe.jsx)(wt,{onClick:i,children:"Close X"}),t]})},Ct=g.default.div(dt||(dt=i(["\n\toverflow-y: auto;\n\tpadding: 4px;\n\tflex: 1;\n\tmin-height: 0;\n\t","\n"])),e=>e.hasTitle&&"margin-top: 20px;"),Dt=(0,g.default)(Ze)(ft||(ft=i(["\n\t",";\n\t",";\n\t",";\n\t",";\n"])),e=>!e.isSaveButton&&"min-width:200px",e=>e.isFullWidth&&"width: 100%",e=>e.upperCase&&"text-transform: uppercase",e=>e.isMobile&&"\n    flex:1;\n    width:unset;\n    font-size:12px;\n    min-width: 100px;\n    "),Et=g.default.div(pt||(pt=i(["\n\tdisplay: flex;\n\talign-items: center;\n\t",";\n\t",";\n\t",";\n\tpadding: 20px 4px 0px 4px;\n\n\t"," + "," {\n\t\tmargin-left: ",";\t\n\t}\n"])),e=>"left"===e.alignButtons&&"justify-content:flex-start",e=>"center"===e.alignButtons&&"justify-content:center",e=>("right"===e.alignButtons||!e.alignButtons)&&"justify-content:flex-end",Dt,Dt,e=>e.noMarginFooterButton?"0":e.marginButtons?e.marginButtons+"px":"20px"),At=g.default.h1(gt||(gt=i(["\n\tfont-size: 15px;\n\ttext-align: left;\n\tmargin: 0;\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tpadding: 20px;\n\twidth: 80%;\n"]))),kt=e.forwardRef((t,n)=>{const r=t.windowDecorator||St,{removeDialog:i,isMobile:s}=F(),{dialogId:a}=(0,e.useContext)(_t),o=t.onClose||(()=>i(a));return(0,fe.jsx)(bt,{children:e.createElement(r,{onClose:o,showCloseButton:t.showCloseButton},(0,fe.jsxs)(e.Fragment,{children:[t.title&&(0,fe.jsx)(At,{children:t.title}),(0,fe.jsx)(Ct,{ref:n,hasTitle:void 0!==t.title,children:(0,fe.jsx)(e.Suspense,{fallback:"Loading...",children:t.children})}),t.buttons&&t.buttons.length>0&&(0,fe.jsx)(Et,{isMobile:s,noMarginFooterButton:t.noMarginFooterButton,alignButtons:t.alignButtons,marginButtons:t.marginButtons,children:t.buttons.map(e=>(0,fe.jsx)(Dt,{isMobile:s,isFullWidth:e.isFullWidth,upperCase:e.upperCase,isSaveButton:e.isSaveButton,disabled:e.disabled,primary:!e.secondary,onClick:()=>{var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:e.label},e.label))})]}))})}),Mt=e=>{const{dialogs:t}=F();return(0,fe.jsx)(fe.Fragment,{children:(0,nt.createPortal)(t.map(e=>(0,fe.jsx)(_t.Provider,{value:{dialogId:e.id},children:e.dialog},e.id)),vt)})},Tt=(0,g.default)(St)(mt||(mt=i(["\n\tmax-width: 600px;\n"]))),It=t=>{let{message:n,eventMessage:r,buttonYesLabel:i,buttonNoLabel:s,onYesClick:a,onNoClick:o}=t,l=Qe(t,ot);const{closeDialog:u}=yt(),{dialogId:c}=(0,e.useContext)(_t);return(0,fe.jsxs)(kt,H(H({windowDecorator:Tt,buttons:[{label:i||"Yes",onClick:a||(()=>u(c))},{label:s||"No",secondary:!0,onClick:o||(()=>u(c))}]},l),{},{children:[n&&(0,fe.jsx)("p",{children:n}),r&&(0,fe.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})]}))};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(null,arguments)}var Lt=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),Pt=Math.abs,Bt=String.fromCharCode,Nt=Object.assign;function Rt(e){return e.trim()}function Ft(e,t,n){return e.replace(t,n)}function zt(e,t){return e.indexOf(t)}function jt(e,t){return 0|e.charCodeAt(t)}function Vt(e,t,n){return e.slice(t,n)}function Ut(e){return e.length}function Ht(e){return e.length}function Gt(e,t){return t.push(e),e}var Yt=1,Wt=1,qt=0,Zt=0,Kt=0,Xt="";function Jt(e,t,n,r,i,s,a){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Yt,column:Wt,length:a,return:""}}function $t(e,t){return Nt(Jt("",null,null,"",null,null,0),e,{length:-e.length},t)}function Qt(){return Kt=Zt>0?jt(Xt,--Zt):0,Wt--,10===Kt&&(Wt=1,Yt--),Kt}function en(){return Kt=Zt<qt?jt(Xt,Zt++):0,Wt++,10===Kt&&(Wt=1,Yt++),Kt}function tn(){return jt(Xt,Zt)}function nn(){return Zt}function rn(e,t){return Vt(Xt,e,t)}function sn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function an(e){return Yt=Wt=1,qt=Ut(Xt=e),Zt=0,[]}function on(e){return Xt="",e}function ln(e){return Rt(rn(Zt-1,hn(91===e?e+2:40===e?e+1:e)))}function un(e){for(;(Kt=tn())&&Kt<33;)en();return sn(e)>2||sn(Kt)>3?"":" "}function cn(e,t){for(;--t&&en()&&!(Kt<48||Kt>102||Kt>57&&Kt<65||Kt>70&&Kt<97););return rn(e,nn()+(t<6&&32==tn()&&32==en()))}function hn(e){for(;en();)switch(Kt){case e:return Zt;case 34:case 39:34!==e&&39!==e&&hn(Kt);break;case 40:41===e&&hn(e);break;case 92:en()}return Zt}function dn(e,t){for(;en()&&e+Kt!==57&&(e+Kt!==84||47!==tn()););return"/*"+rn(t,Zt-1)+"*"+Bt(47===e?e:en())}function fn(e){for(;!sn(tn());)en();return rn(e,Zt)}var pn="-ms-",gn="-moz-",mn="-webkit-",vn="comm",_n="rule",yn="decl",bn="@keyframes";function xn(e,t){for(var n="",r=Ht(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function wn(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case yn:return e.return=e.return||e.value;case vn:return"";case bn:return e.return=e.value+"{"+xn(e.children,r)+"}";case _n:e.value=e.props.join(",")}return Ut(n=xn(e.children,r))?e.return=e.value+"{"+n+"}":""}function Sn(e){return on(Cn("",null,null,null,[""],e=an(e),0,[0],e))}function Cn(e,t,n,r,i,s,a,o,l){for(var u=0,c=0,h=a,d=0,f=0,p=0,g=1,m=1,v=1,_=0,y="",b=i,x=s,w=r,S=y;m;)switch(p=_,_=en()){case 40:if(108!=p&&58==jt(S,h-1)){-1!=zt(S+=Ft(ln(_),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:S+=ln(_);break;case 9:case 10:case 13:case 32:S+=un(p);break;case 92:S+=cn(nn()-1,7);continue;case 47:switch(tn()){case 42:case 47:Gt(En(dn(en(),nn()),t,n),l);break;default:S+="/"}break;case 123*g:o[u++]=Ut(S)*v;case 125*g:case 59:case 0:switch(_){case 0:case 125:m=0;case 59+c:-1==v&&(S=Ft(S,/\f/g,"")),f>0&&Ut(S)-h&&Gt(f>32?An(S+";",r,n,h-1):An(Ft(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(Gt(w=Dn(S,t,n,u,c,i,o,y,b=[],x=[],h),s),123===_)if(0===c)Cn(S,t,w,w,b,s,h,o,x);else switch(99===d&&110===jt(S,3)?100:d){case 100:case 108:case 109:case 115:Cn(e,w,w,r&&Gt(Dn(e,w,w,0,0,i,o,y,i,b=[],h),x),i,x,h,o,r?b:x);break;default:Cn(S,w,w,w,[""],x,0,o,x)}}u=c=f=0,g=v=1,y=S="",h=a;break;case 58:h=1+Ut(S),f=p;default:if(g<1)if(123==_)--g;else if(125==_&&0==g++&&125==Qt())continue;switch(S+=Bt(_),_*g){case 38:v=c>0?1:(S+="\f",-1);break;case 44:o[u++]=(Ut(S)-1)*v,v=1;break;case 64:45===tn()&&(S+=ln(en())),d=tn(),c=h=Ut(y=S+=fn(nn())),_++;break;case 45:45===p&&2==Ut(S)&&(g=0)}}return s}function Dn(e,t,n,r,i,s,a,o,l,u,c){for(var h=i-1,d=0===i?s:[""],f=Ht(d),p=0,g=0,m=0;p<r;++p)for(var v=0,_=Vt(e,h+1,h=Pt(g=a[p])),y=e;v<f;++v)(y=Rt(g>0?d[v]+" "+_:Ft(_,/&\f/g,d[v])))&&(l[m++]=y);return Jt(e,t,n,0===i?_n:o,l,u,c)}function En(e,t,n){return Jt(e,t,n,vn,Bt(Kt),Vt(e,2,-2),0)}function An(e,t,n,r){return Jt(e,t,n,yn,Vt(e,0,r),Vt(e,r+1,-1),r)}var kn=function(e,t,n){for(var r=0,i=0;r=i,i=tn(),38===r&&12===i&&(t[n]=1),!sn(i);)en();return rn(e,Zt)},Mn=function(e,t){return on(function(e,t){var n=-1,r=44;do{switch(sn(r)){case 0:38===r&&12===tn()&&(t[n]=1),e[n]+=kn(Zt-1,t,n);break;case 2:e[n]+=ln(r);break;case 4:if(44===r){e[++n]=58===tn()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Bt(r)}}while(r=en());return e}(an(e),t))},Tn=new WeakMap,In=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Tn.get(n))&&!r){Tn.set(e,!0);for(var i=[],s=Mn(t,i),a=n.props,o=0,l=0;o<s.length;o++)for(var u=0;u<a.length;u++,l++)e.props[l]=i[o]?s[o].replace(/&\f/g,a[u]):a[u]+" "+s[o]}}},On=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Ln(e,t){switch(function(e,t){return 45^jt(e,0)?(((t<<2^jt(e,0))<<2^jt(e,1))<<2^jt(e,2))<<2^jt(e,3):0}(e,t)){case 5103:return mn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return mn+e+gn+e+pn+e+e;case 6828:case 4268:return mn+e+pn+e+e;case 6165:return mn+e+pn+"flex-"+e+e;case 5187:return mn+e+Ft(e,/(\w+).+(:[^]+)/,mn+"box-$1$2"+pn+"flex-$1$2")+e;case 5443:return mn+e+pn+"flex-item-"+Ft(e,/flex-|-self/,"")+e;case 4675:return mn+e+pn+"flex-line-pack"+Ft(e,/align-content|flex-|-self/,"")+e;case 5548:return mn+e+pn+Ft(e,"shrink","negative")+e;case 5292:return mn+e+pn+Ft(e,"basis","preferred-size")+e;case 6060:return mn+"box-"+Ft(e,"-grow","")+mn+e+pn+Ft(e,"grow","positive")+e;case 4554:return mn+Ft(e,/([^-])(transform)/g,"$1"+mn+"$2")+e;case 6187:return Ft(Ft(Ft(e,/(zoom-|grab)/,mn+"$1"),/(image-set)/,mn+"$1"),e,"")+e;case 5495:case 3959:return Ft(e,/(image-set\([^]*)/,mn+"$1$`$1");case 4968:return Ft(Ft(e,/(.+:)(flex-)?(.*)/,mn+"box-pack:$3"+pn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mn+e+e;case 4095:case 3583:case 4068:case 2532:return Ft(e,/(.+)-inline(.+)/,mn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ut(e)-1-t>6)switch(jt(e,t+1)){case 109:if(45!==jt(e,t+4))break;case 102:return Ft(e,/(.+:)(.+)-([^]+)/,"$1"+mn+"$2-$3$1"+gn+(108==jt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~zt(e,"stretch")?Ln(Ft(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==jt(e,t+1))break;case 6444:switch(jt(e,Ut(e)-3-(~zt(e,"!important")&&10))){case 107:return Ft(e,":",":"+mn)+e;case 101:return Ft(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mn+(45===jt(e,14)?"inline-":"")+"box$3$1"+mn+"$2$3$1"+pn+"$2box$3")+e}break;case 5936:switch(jt(e,t+11)){case 114:return mn+e+pn+Ft(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return mn+e+pn+Ft(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return mn+e+pn+Ft(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return mn+e+pn+e+e}return e}var Pn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case yn:e.return=Ln(e.value,e.length);break;case bn:return xn([$t(e,{value:Ft(e.value,"@","@"+mn)})],r);case _n:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xn([$t(e,{props:[Ft(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return xn([$t(e,{props:[Ft(t,/:(plac\w+)/,":"+mn+"input-$1")]}),$t(e,{props:[Ft(t,/:(plac\w+)/,":-moz-$1")]}),$t(e,{props:[Ft(t,/:(plac\w+)/,pn+"input-$1")]})],r)}return""})}}],Bn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var r,i,s=e.stylisPlugins||Pn,a={},o=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;o.push(e)});var l,u,c=[wn,(u=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=Ht(e);return function(n,r,i,s){for(var a="",o=0;o<t;o++)a+=e[o](n,r,i,s)||"";return a}}([In,On].concat(s,c));i=function(e,t,n,r){l=n,function(e){xn(Sn(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Lt({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return d.sheet.hydrate(o),d};var Nn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var Rn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Fn=n(918),zn=/[A-Z]|^ms/g,jn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Vn=function(e){return 45===e.charCodeAt(1)},Un=function(e){return null!=e&&"boolean"!==typeof e},Hn=(0,Fn.A)(function(e){return Vn(e)?e:e.replace(zn,"-$&").toLowerCase()}),Gn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(jn,function(e,t,n){return Wn={name:t,styles:n,next:Wn},t})}return 1===Rn[e]||Vn(e)||"number"!==typeof t||0===t?t:t+"px"};function Yn(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Wn={name:i.name,styles:i.styles,next:Wn},i.name;var s=n;if(void 0!==s.styles){var a=s.next;if(void 0!==a)for(;void 0!==a;)Wn={name:a.name,styles:a.styles,next:Wn},a=a.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Yn(e,t,n[i])+";";else for(var s in n){var a=n[s];if("object"!==typeof a){var o=a;null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":Un(o)&&(r+=Hn(s)+":"+Gn(s,o)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=Yn(e,t,a);switch(s){case"animation":case"animationName":r+=Hn(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var u=0;u<a.length;u++)Un(a[u])&&(r+=Hn(s)+":"+Gn(s,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=Wn,l=n(e);return Wn=o,Yn(e,t,l)}}var u=n;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var Wn,qn=/label:\s*([^\s;{]+)\s*(;|$)/g;function Zn(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Wn=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=Yn(n,t,s)):i+=s[0];for(var a=1;a<e.length;a++){if(i+=Yn(n,t,e[a]),r)i+=s[a]}qn.lastIndex=0;for(var o,l="";null!==(o=qn.exec(i));)l+="-"+o[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:Wn}}var Kn=!!t.useInsertionEffect&&t.useInsertionEffect,Xn=Kn||function(e){return e()},Jn=(Kn||e.useLayoutEffect,e.createContext("undefined"!==typeof HTMLElement?Bn({key:"css"}):null)),$n=(Jn.Provider,function(t){return(0,e.forwardRef)(function(n,r){var i=(0,e.useContext)(Jn);return t(n,i,r)})}),Qn=e.createContext({});var er={}.hasOwnProperty,tr="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nr=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Nn(t,n,r),Xn(function(){return function(e,t,n){Nn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)}),null},rr=$n(function(t,n,r){var i=t.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var s=t[tr],a=[i],o="";"string"===typeof t.className?o=function(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")}),r}(n.registered,a,t.className):null!=t.className&&(o=t.className+" ");var l=Zn(a,void 0,e.useContext(Qn));o+=n.key+"-"+l.name;var u={};for(var c in t)er.call(t,c)&&"css"!==c&&c!==tr&&(u[c]=t[c]);return u.className=o,r&&(u.ref=r),e.createElement(e.Fragment,null,e.createElement(nr,{cache:n,serialized:l,isStringTag:"string"===typeof s}),e.createElement(s,u))}),ir=rr,sr=(n(219),function(t,n){var r=arguments;if(null==n||!er.call(n,"css"))return e.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=ir,s[1]=function(e,t){var n={};for(var r in t)er.call(t,r)&&(n[r]=t[r]);return n[tr]=e,n}(t,n);for(var a=2;a<i;a++)s[a]=r[a];return e.createElement.apply(null,s)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(sr||(sr={}));function ar(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zn(t)}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lr(e,t){if(e){if("string"==typeof e)return or(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(e,t):void 0}}function ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}(e,t)||lr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const cr=Math.min,hr=Math.max,dr=Math.round,fr=Math.floor,pr=e=>({x:e,y:e});function gr(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function mr(){return"undefined"!==typeof window}function vr(e){return br(e)?(e.nodeName||"").toLowerCase():"#document"}function _r(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function yr(e){var t;return null==(t=(br(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function br(e){return!!mr()&&(e instanceof Node||e instanceof _r(e).Node)}function xr(e){return!!mr()&&(e instanceof Element||e instanceof _r(e).Element)}function wr(e){return!!mr()&&(e instanceof HTMLElement||e instanceof _r(e).HTMLElement)}function Sr(e){return!(!mr()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof _r(e).ShadowRoot)}const Cr=new Set(["inline","contents"]);function Dr(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Cr.has(i)}function Er(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ar=new Set(["html","body","#document"]);function kr(e){return Ar.has(vr(e))}function Mr(e){return _r(e).getComputedStyle(e)}function Tr(e){if("html"===vr(e))return e;const t=e.assignedSlot||e.parentNode||Sr(e)&&e.host||yr(e);return Sr(t)?t.host:t}function Ir(e){const t=Tr(e);return kr(t)?e.ownerDocument?e.ownerDocument.body:e.body:wr(t)&&Dr(t)?t:Ir(t)}function Or(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Ir(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),a=_r(i);if(s){const e=Lr(a);return t.concat(a,a.visualViewport||[],Dr(i)?i:[],e&&n?Or(e):[])}return t.concat(i,Or(i,[],n))}function Lr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Pr(e){const t=Mr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=wr(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=dr(n)!==s||dr(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function Br(e){return xr(e)?e:e.contextElement}function Nr(e){const t=Br(e);if(!wr(t))return pr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Pr(t);let a=(s?dr(n.width):n.width)/r,o=(s?dr(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const Rr=pr(0);function Fr(e){const t=_r(e);return Er()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Rr}function zr(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=Br(e);let a=pr(1);t&&(r?xr(r)&&(a=Nr(r)):a=Nr(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==_r(e))&&t}(s,n,r)?Fr(s):pr(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,c=i.width/a.x,h=i.height/a.y;if(s){const e=_r(s),t=r&&xr(r)?_r(r):r;let n=e,i=Lr(n);for(;i&&r&&t!==n;){const e=Nr(i),t=i.getBoundingClientRect(),r=Mr(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,h*=e.y,l+=s,u+=a,n=_r(i),i=Lr(n)}}return gr({width:c,height:h,x:l,y:u})}function jr(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Vr(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:o="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,u=Br(e),c=i||s?[...u?Or(u):[],...Or(t)]:[];c.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)});const h=u&&o?function(e,t){let n,r=null;const i=yr(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();const u=e.getBoundingClientRect(),{left:c,top:h,width:d,height:f}=u;if(o||t(),!d||!f)return;const p={rootMargin:-fr(h)+"px "+-fr(i.clientWidth-(c+d))+"px "+-fr(i.clientHeight-(h+f))+"px "+-fr(c)+"px",threshold:hr(0,cr(1,l))||1};let g=!0;function m(t){const r=t[0].intersectionRatio;if(r!==l){if(!g)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||jr(u,e.getBoundingClientRect())||a(),g=!1}try{r=new IntersectionObserver(m,H(H({},p),{},{root:i.ownerDocument}))}catch(v){r=new IntersectionObserver(m,p)}r.observe(e)}(!0),s}(u,n):null;let d,f=-1,p=null;a&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),u&&!l&&p.observe(u),p.observe(t));let g=l?zr(e):null;return l&&function t(){const r=zr(e);g&&!jr(g,r)&&n();g=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach(e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(d)}}var Ur=e.useLayoutEffect,Hr=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Gr=function(){};function Yr(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function Wr(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&s.push("".concat(Yr(e,a)));return s.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var qr=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===z(e)&&null!==e?[e]:[];var t},Zr=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,H({},Qe(e,Hr))},Kr=function(e,t,n){var r=e.cx,i=e.getStyles,s=e.getClassNames,a=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},s(t,e),a)}};function Xr(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Jr(e){return Xr(e)?window.pageYOffset:e.scrollTop}function $r(e,t){Xr(e)?window.scrollTo(0,t):e.scrollTop=t}function Qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gr,i=Jr(e),s=t-i,a=0;!function t(){var o=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(a+=10,i,s,n);$r(e,o),a<n?window.requestAnimationFrame(t):r(e)}()}function ei(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?$r(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&$r(e,Math.max(t.offsetTop-i,0))}function ti(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var ni=!1,ri={get passive(){return ni=!0}},ii="undefined"!==typeof window?window:{};ii.addEventListener&&ii.removeEventListener&&(ii.addEventListener("p",Gr,ri),ii.removeEventListener("p",Gr,!1));var si=ni;function ai(e){return null!=e}function oi(e,t,n){return e?t:n}var li=["children","innerProps"],ui=["children","innerProps"];function ci(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,s=e.shouldScroll,a=e.isFixedPosition,o=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),u={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return u;var c,h=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),f=d.bottom,p=d.height,g=d.top,m=n.offsetParent.getBoundingClientRect().top,v=a?window.innerHeight:Xr(c=l)?window.innerHeight:c.clientHeight,_=Jr(l),y=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),x=m-b,w=v-g,S=x+_,C=h-_-g,D=f-v+_+y,E=_+g-b,A=160;switch(i){case"auto":case"bottom":if(w>=p)return{placement:"bottom",maxHeight:t};if(C>=p&&!a)return s&&Qr(l,D,A),{placement:"bottom",maxHeight:t};if(!a&&C>=r||a&&w>=r)return s&&Qr(l,D,A),{placement:"bottom",maxHeight:a?w-y:C-y};if("auto"===i||a){var k=t,M=a?x:S;return M>=r&&(k=Math.min(M-y-o,t)),{placement:"top",maxHeight:k}}if("bottom"===i)return s&&$r(l,D),{placement:"bottom",maxHeight:t};break;case"top":if(x>=p)return{placement:"top",maxHeight:t};if(S>=p&&!a)return s&&Qr(l,E,A),{placement:"top",maxHeight:t};if(!a&&S>=r||a&&x>=r){var T=t;return(!a&&S>=r||a&&x>=r)&&(T=a?x-b:S-b),s&&Qr(l,E,A),{placement:"top",maxHeight:T}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}var hi,di=function(e){return"auto"===e?"bottom":e},fi=(0,e.createContext)(null),pi=function(t){var n=t.children,r=t.minMenuHeight,i=t.maxMenuHeight,s=t.menuPlacement,a=t.menuPosition,o=t.menuShouldScrollIntoView,l=t.theme,u=((0,e.useContext)(fi)||{}).setPortalPlacement,c=(0,e.useRef)(null),h=ur((0,e.useState)(i),2),d=h[0],f=h[1],p=ur((0,e.useState)(null),2),g=p[0],m=p[1],v=l.spacing.controlHeight;return Ur(function(){var e=c.current;if(e){var t="fixed"===a,n=ci({maxHeight:i,menuEl:e,minHeight:r,placement:s,shouldScroll:o&&!t,isFixedPosition:t,controlHeight:v});f(n.maxHeight),m(n.placement),null===u||void 0===u||u(n.placement)}},[i,s,a,o,r,u,v]),n({ref:c,placerProps:H(H({},t),{},{placement:g||di(s),maxHeight:d})})},gi=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return sr("div",Ot({},Kr(e,"menu",{menu:!0}),{ref:n},r),t)},mi=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return H({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},vi=mi,_i=mi,yi=["size"],bi=["innerProps","isRtl","size"];var xi={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},wi=function(e){var t=e.size,n=Qe(e,yi);return sr("svg",Ot({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:xi},n))},Si=function(e){return sr(wi,Ot({size:20},e),sr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Ci=function(e){return sr(wi,Ot({size:20},e),sr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Di=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,s=r.colors;return H({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*i,":hover":{color:n?s.neutral80:s.neutral40}})},Ei=Di,Ai=Di,ki=function(){var e=ar.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(hi||(hi=i(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),Mi=function(e){var t=e.delay,n=e.offset;return sr("span",{css:ar({animation:"".concat(ki," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Ti=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,s=e.innerProps,a=e.menuIsOpen;return sr("div",Ot({ref:i},Kr(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":a}),s,{"aria-disabled":n||void 0}),t)},Ii=["data"],Oi=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,s=e.Heading,a=e.headingProps,o=e.innerProps,l=e.label,u=e.theme,c=e.selectProps;return sr("div",Ot({},Kr(e,"group",{group:!0}),o),sr(s,Ot({},a,{selectProps:c,theme:u,getStyles:r,getClassNames:i,cx:n}),l),sr("div",null,t))},Li=["innerRef","isDisabled","isHidden","inputClassName"],Pi={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Bi={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":H({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Pi)},Ni=function(e){return H({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Pi)},Ri=function(e){var t=e.children,n=e.innerProps;return sr("div",n,t)};var Fi,zi,ji=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,s=e.isDisabled,a=e.removeProps,o=e.selectProps,l=n.Container,u=n.Label,c=n.Remove;return sr(l,{data:r,innerProps:H(H({},Kr(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),i),selectProps:o},sr(u,{data:r,innerProps:H({},Kr(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),sr(c,{data:r,innerProps:H(H({},Kr(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:o}))},Vi={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return sr("div",Ot({},Kr(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||sr(Si,null))},Control:Ti,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return sr("div",Ot({},Kr(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||sr(Ci,null))},DownChevron:Ci,CrossIcon:Si,Group:Oi,GroupHeading:function(e){var t=Zr(e);t.data;var n=Qe(t,Ii);return sr("div",Ot({},Kr(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return sr("div",Ot({},Kr(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return sr("span",Ot({},t,Kr(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=Zr(e),i=r.innerRef,s=r.isDisabled,a=r.isHidden,o=r.inputClassName,l=Qe(r,Li);return sr("div",Ot({},Kr(e,"input",{"input-container":!0}),{"data-value":n||""}),sr("input",Ot({className:t({input:!0},o),ref:i,style:Ni(a),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,s=Qe(e,bi);return sr("div",Ot({},Kr(H(H({},s),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),sr(Mi,{delay:0,offset:n}),sr(Mi,{delay:160,offset:!0}),sr(Mi,{delay:320,offset:!n}))},Menu:gi,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return sr("div",Ot({},Kr(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(t){var n=t.appendTo,r=t.children,i=t.controlElement,s=t.innerProps,a=t.menuPlacement,o=t.menuPosition,l=(0,e.useRef)(null),u=(0,e.useRef)(null),c=ur((0,e.useState)(di(a)),2),h=c[0],d=c[1],f=(0,e.useMemo)(function(){return{setPortalPlacement:d}},[]),p=ur((0,e.useState)(null),2),g=p[0],m=p[1],v=(0,e.useCallback)(function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===o?0:window.pageYOffset,n=e[h]+t;n===(null===g||void 0===g?void 0:g.offset)&&e.left===(null===g||void 0===g?void 0:g.rect.left)&&e.width===(null===g||void 0===g?void 0:g.rect.width)||m({offset:n,rect:e})}},[i,o,h,null===g||void 0===g?void 0:g.offset,null===g||void 0===g?void 0:g.rect.left,null===g||void 0===g?void 0:g.rect.width]);Ur(function(){v()},[v]);var _=(0,e.useCallback)(function(){"function"===typeof u.current&&(u.current(),u.current=null),i&&l.current&&(u.current=Vr(i,l.current,v,{elementResize:"ResizeObserver"in window}))},[i,v]);Ur(function(){_()},[_]);var y=(0,e.useCallback)(function(e){l.current=e,_()},[_]);if(!n&&"fixed"!==o||!g)return null;var b=sr("div",Ot({ref:y},Kr(H(H({},t),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),s),r);return sr(fi.Provider,{value:f},n?(0,nt.createPortal)(b,n):b)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=Qe(e,ui);return sr("div",Ot({},Kr(H(H({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=Qe(e,li);return sr("div",Ot({},Kr(H(H({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:ji,MultiValueContainer:Ri,MultiValueLabel:Ri,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return sr("div",Ot({role:"button"},n),t||sr(Si,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,s=e.innerRef,a=e.innerProps;return sr("div",Ot({},Kr(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:s,"aria-disabled":n},a),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return sr("div",Ot({},Kr(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return sr("div",Ot({},Kr(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return sr("div",Ot({},Kr(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return sr("div",Ot({},Kr(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}};const Ui=g.default.div(Fi||(Fi=i(["\n  padding: 0px 0px;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 3px;\n"]))),Hi=g.default.div(zi||(zi=i(["\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n  align-items: flex-start;\n  grid-gap: 5px;\n  margin-bottom: 10px;\n"]))),Gi=e=>{let{label:t,rightComponent:n,children:r}=e;return(0,fe.jsxs)(Hi,{children:[(0,fe.jsxs)(Ui,{children:[(0,fe.jsx)("span",{children:t}),n]}),r]})};function Yi(){return(Yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wi(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(i[n]=e[n]);return i}function qi(t){var n=(0,e.useRef)(t),r=(0,e.useRef)(function(e){n.current&&n.current(e)});return n.current=t,r.current}var Zi=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},Ki=function(e){return"touches"in e},Xi=function(e){return e&&e.ownerDocument.defaultView||self},Ji=function(e,t,n){var r=e.getBoundingClientRect(),i=Ki(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:Zi((i.pageX-(r.left+Xi(e).pageXOffset))/r.width),top:Zi((i.pageY-(r.top+Xi(e).pageYOffset))/r.height)}},$i=function(e){!Ki(e)&&e.preventDefault()},Qi=e.memo(function(t){var n=t.onMove,r=t.onKey,i=Wi(t,["onMove","onKey"]),s=(0,e.useRef)(null),a=qi(n),o=qi(r),l=(0,e.useRef)(null),u=(0,e.useRef)(!1),c=(0,e.useMemo)(function(){var e=function(e){$i(e),(Ki(e)?e.touches.length>0:e.buttons>0)&&s.current?a(Ji(s.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,i=Xi(s.current),a=n?i.addEventListener:i.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=s.current;if(r&&($i(t),!function(e,t){return t&&!Ki(e)}(t,u.current)&&r)){if(Ki(t)){u.current=!0;var i=t.changedTouches||[];i.length&&(l.current=i[0].identifier)}r.focus(),a(Ji(r,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]},[o,a]),h=c[0],d=c[1],f=c[2];return(0,e.useEffect)(function(){return f},[f]),e.createElement("div",Yi({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:s,onKeyDown:d,tabIndex:0,role:"slider"}))}),es=function(e){return e.filter(Boolean).join(" ")},ts=function(t){var n=t.color,r=t.left,i=t.top,s=void 0===i?.5:i,a=es(["react-colorful__pointer",t.className]);return e.createElement("div",{className:a,style:{top:100*s+"%",left:100*r+"%"}},e.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},ns=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},rs=(Math.PI,function(e){return hs(is(e))}),is=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?ns(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?ns(parseInt(e.substring(6,8),16)/255,2):1}},ss=function(e){return cs(ls(e))},as=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:ns(e.h),s:ns(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:ns(i/2),a:ns(r,2)}},os=function(e){var t=as(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},ls=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),a=r*(1-n),o=r*(1-(t-s)*n),l=r*(1-(1-t+s)*n),u=s%6;return{r:ns(255*[r,o,a,a,l,r][u]),g:ns(255*[l,r,r,o,a,a][u]),b:ns(255*[a,a,l,r,r,o][u]),a:ns(i,2)}},us=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},cs=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=i<1?us(ns(255*i)):"";return"#"+us(t)+us(n)+us(r)+s},hs=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=Math.max(t,n,r),a=s-Math.min(t,n,r),o=a?s===t?(n-r)/a:s===n?2+(r-t)/a:4+(t-n)/a:0;return{h:ns(60*(o<0?o+6:o)),s:ns(s?a/s*100:0),v:ns(s/255*100),a:i}},ds=e.memo(function(t){var n=t.hue,r=t.onChange,i=es(["react-colorful__hue",t.className]);return e.createElement("div",{className:i},e.createElement(Qi,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:Zi(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":ns(n),"aria-valuemax":"360","aria-valuemin":"0"},e.createElement(ts,{className:"react-colorful__hue-pointer",left:n/360,color:os({h:n,s:100,v:100,a:1})})))}),fs=e.memo(function(t){var n=t.hsva,r=t.onChange,i={backgroundColor:os({h:n.h,s:100,v:100,a:1})};return e.createElement("div",{className:"react-colorful__saturation",style:i},e.createElement(Qi,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:Zi(n.s+100*e.left,0,100),v:Zi(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ns(n.s)+"%, Brightness "+ns(n.v)+"%"},e.createElement(ts,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:os(n)})))}),ps=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},gs=function(e,t){return e.toLowerCase()===t.toLowerCase()||ps(is(e),is(t))};function ms(t,n,r){var i=qi(r),s=(0,e.useState)(function(){return t.toHsva(n)}),a=s[0],o=s[1],l=(0,e.useRef)({color:n,hsva:a});(0,e.useEffect)(function(){if(!t.equal(n,l.current.color)){var e=t.toHsva(n);l.current={hsva:e,color:n},o(e)}},[n,t]),(0,e.useEffect)(function(){var e;ps(a,l.current.hsva)||t.equal(e=t.fromHsva(a),l.current.color)||(l.current={hsva:a,color:e},i(e))},[a,t,i]);var u=(0,e.useCallback)(function(e){o(function(t){return Object.assign({},t,e)})},[]);return[a,u]}var vs,_s,ys="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,bs=new Map,xs=function(e){ys(function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!bs.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',bs.set(t,r);var i=vs||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}},[])},ws=function(t){var n=t.className,r=t.colorModel,i=t.color,s=void 0===i?r.defaultColor:i,a=t.onChange,o=Wi(t,["className","colorModel","color","onChange"]),l=(0,e.useRef)(null);xs(l);var u=ms(r,s,a),c=u[0],h=u[1],d=es(["react-colorful",n]);return e.createElement("div",Yi({},o,{ref:l,className:d}),e.createElement(fs,{hsva:c,onChange:h}),e.createElement(ds,{hue:c.h,onChange:h,className:"react-colorful__last-control"}))},Ss={defaultColor:"000",toHsva:rs,fromHsva:function(e){return ss({h:e.h,s:e.s,v:e.v,a:1})},equal:gs},Cs=function(t){return e.createElement(ws,Yi({},t,{colorModel:Ss}))},Ds=/^#?([0-9A-F]{3,8})$/i,Es=function(t){var n=t.color,r=void 0===n?"":n,i=t.onChange,s=t.onBlur,a=t.escape,o=t.validate,l=t.format,u=t.process,c=Wi(t,["color","onChange","onBlur","escape","validate","format","process"]),h=(0,e.useState)(function(){return a(r)}),d=h[0],f=h[1],p=qi(i),g=qi(s),m=(0,e.useCallback)(function(e){var t=a(e.target.value);f(t),o(t)&&p(u?u(t):t)},[a,u,o,p]),v=(0,e.useCallback)(function(e){o(e.target.value)||f(a(r)),g(e)},[r,a,o,g]);return(0,e.useEffect)(function(){f(a(r))},[r,a]),e.createElement("input",Yi({},c,{value:l?l(d):d,spellCheck:"false",onChange:m,onBlur:v}))},As=function(e){return"#"+e};const ks=g.default.div(_s||(_s=i(["\n\tposition: fixed;\n\tleft: ","px;\n\ttop: ","px;\n\theight: auto;\n\tbackground: white;\n\tborder: 1px #ddd solid;\n\tborder-radius: 5px;\n\tbox-shadow: 0px 3px 5px rgba(0, 0, 0, 0.1);\n\tz-index: 3;\n\tvisibility: hidden;\n\n\t","\n"])),e=>e.x,e=>e.y,e=>e.visible&&"\n        visibility: visible;\n    "),Ms=t=>{let{buttonRef:n,anchor:r,alignment:i,children:s}=t;const a=(0,e.useRef)(null),[o,l]=(0,e.useState)(0),[u,c]=(0,e.useState)(0),h=(e,t)=>{if(!a.current)return[0,0];const r=a.current.getBoundingClientRect().width,i=a.current.getBoundingClientRect().height;let s=n.getBoundingClientRect().x,o=n.getBoundingClientRect().y,l=n.getBoundingClientRect().width,u=n.getBoundingClientRect().height,c=s,h=o;switch(e){case"top":h=o-i,"right"===t&&(c=s+l-r);break;case"bottom":h=o+u,"right"===t&&(c=s+l-r);break;case"left":c=s-r,"bottom"===t&&(h=o+u-i);break;case"right":c=s+l,"bottom"===t&&(h=o+u-i)}return[c,h]};return(0,e.useLayoutEffect)(()=>{if(!a.current)return;const e=a.current.getBoundingClientRect().width,t=a.current.getBoundingClientRect().height;let n=r,s=i,[o,u]=h(n,s);o+e>window.innerWidth&&("right"===n?([o,u]=h("left",s),n="left"):([o,u]=h(n,"right"),s="right")),o<0&&("left"===n?([o,u]=h("right",s),n="right"):([o,u]=h(n,"left"),s="left")),u+t>window.innerHeight&&("bottom"===n?([o,u]=h("top",s),n="right"):([o,u]=h(n,"bottom"),s="bottom")),u+t>window.innerHeight&&("bottom"===n?([o,u]=h("top",s),n="right"):([o,u]=h(n,"bottom"),s="bottom")),l(o),c(u)},[n,r,i,a.current]),(0,fe.jsx)(ks,{onClick:e=>e.nativeEvent.stopPropagation(),ref:a,x:o,y:u,visible:null!==a.current,children:s})},Ts=()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)("bottom"),[s,a]=(0,e.useState)("left"),o=(0,e.useRef)(null);(0,e.useEffect)(()=>{const e=e=>{o.current&&o.current.contains(e.target)||n(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const l=(0,e.memo)(e=>{let{children:t}=e;return o.current&&(0,fe.jsx)(Ms,{buttonRef:o.current,anchor:r,alignment:s,children:t})}),u=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";n(!(arguments.length>3?arguments[3]:void 0)||!t),a(s),i(r),o.current=e},c=()=>{n(!1)};return(0,e.useMemo)(()=>[u,c,t,l],[r,s,t])};var Is,Os,Ls,Ps,Bs,Ns,Rs,Fs;const zs=g.default.div(Is||(Is=i(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 10px;\n    background-color: white;\n    z-index: 2;\n    border-radius: 5px;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n    padding: 10px;\n"]))),js=g.default.div(Os||(Os=i(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),Vs=g.default.div(Ls||(Ls=i(["\n  display: flex;\n  align-items: center;\n  grid-gap: 5px;\n"]))),Us=g.default.span(Ps||(Ps=i(["\n  font-size: 14px;\n"]))),Hs=g.default.div(Bs||(Bs=i(["\n  width: 200px;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-gap: 5px;\n"]))),Gs=(0,g.default)(function(t){var n=t.prefixed,r=t.alpha,i=Wi(t,["prefixed","alpha"]),s=(0,e.useCallback)(function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,r?8:6)},[r]),a=(0,e.useCallback)(function(e){return function(e,t){var n=Ds.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,r)},[r]);return e.createElement(Es,Yi({},i,{escape:s,format:n?As:void 0,process:As,validate:a}))})(Ns||(Ns=i(['\n    font-size: 12px;\n    padding: 2px;\n    width: 100%;\n    display: block;   \n    \n    background-color: transparent;\n    color: #414042;\n    border: 1px #f4f4f4 solid;\n    font-family: "Montserrat",sans-serif;\n    outline:none;\n    resize: none;\n\n    &:hover{\n        border: 1px black solid;\n    }\n\n    &:focus{\n        border: 1px black solid;\n        outline:none;\n    }\n']))),Ys=g.default.input(Rs||(Rs=i(['\n    font-size: 12px;\n    padding: 2px;\n    width: 100%;\n    display: block;\n    text-align: center;\n    \n    background-color: transparent;\n    color: #414042;\n    border: 1px #f4f4f4 solid;\n    font-family: "Montserrat",sans-serif;\n    outline:none;\n    resize: none;\n\n    &:hover{\n        border: 1px black solid;\n    }\n\n    &:focus{\n        border: 1px black solid;\n        outline:none;\n    }\n']))),Ws=e=>{var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},qs=e=>{var t=e.toString(16);return 1===t.length?"0"+t:t},Zs=e=>{let t=parseInt(e,10);return isNaN(t)&&(t=0),t<0&&(t=0),t>255&&(t=255),t},Ks=e=>{let t=parseInt(e,10);return!isNaN(t)&&t<0?"0":!isNaN(t)&&t>255?"255":e},Xs=t=>{let{color:n,onChange:r}=t;const[i,s]=(0,e.useState)(!0),[a,o]=(0,e.useState)(Ws(null!==n&&void 0!==n?n:"#000000").r.toString()),[l,u]=(0,e.useState)(Ws(null!==n&&void 0!==n?n:"#000000").g.toString()),[c,h]=(0,e.useState)(Ws(null!==n&&void 0!==n?n:"#000000").b.toString());(0,e.useEffect)(()=>{s(!1)},[]),(0,e.useEffect)(()=>{if(!i){const e={r:Zs(a),g:Zs(l),b:Zs(c)};f(e)}s(!1)},[a,l,c]),(0,e.useEffect)(()=>{i||n&&7===n.length&&(s(!0),o(Ws(n).r.toString()),u(Ws(n).g.toString()),h(Ws(n).b.toString()))},[n]);const d=(0,e.useCallback)((0,G.debounce)(e=>{f(e)},100),[]),f=e=>{var t;r("object"===typeof e?"#"+qs((t=e).r)+qs(t.g)+qs(t.b):e)};return(0,fe.jsx)(zs,{children:(0,fe.jsxs)(js,{children:[(0,fe.jsx)(Cs,{color:null!==n&&void 0!==n?n:"#000000",onChange:d}),(0,fe.jsxs)(Vs,{children:[(0,fe.jsx)(Us,{children:"HEX"}),(0,fe.jsx)(Gs,{color:null!==n&&void 0!==n?n:"#000000",prefixed:!0,onChange:d})]}),(0,fe.jsxs)(Hs,{children:[(0,fe.jsxs)(Vs,{children:[(0,fe.jsx)(Us,{children:"R"}),(0,fe.jsx)(Ys,{type:"number",value:a,min:0,max:255,onChange:e=>{o(Ks(e.currentTarget.value))}})]}),(0,fe.jsxs)(Vs,{children:[(0,fe.jsx)(Us,{children:"G"}),(0,fe.jsx)(Ys,{type:"number",value:l,maxLength:3,onChange:e=>{u(Ks(e.currentTarget.value))}})]}),(0,fe.jsxs)(Vs,{children:[(0,fe.jsx)(Us,{children:"B"}),(0,fe.jsx)(Ys,{type:"number",value:c,maxLength:3,onChange:e=>{h(Ks(e.currentTarget.value))}})]})]})]})})},Js=g.default.div(Fs||(Fs=i(["\n    width: 100%;\n    height: 40px;\n    border: 1px solid #DDD;\n    background-color: ",";\n    cursor: pointer;\n\n    @media(hover) {\n        &:hover {\n            opacity: 0.7;\n        }\n    }\n"])),e=>e.color),$s=t=>{let{color:n,onChange:r}=t;const[i,,s,a]=Ts(),o=(0,e.useRef)(null);return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(Js,{ref:o,color:n,onClick:()=>i(o.current,"bottom","right")}),s&&(0,fe.jsx)(a,{children:(0,fe.jsx)(Xs,{color:n,onChange:r})})]})},Qs=e=>{var t;let{fontSelectorVisible:n,togglerFontSelectorVisible:r,item:i}=e;const{setItemFontFamily:s,fonts:a,translations:o}=(0,m.useZakeke)(),l=null===o||void 0===o?void 0:o.dynamics;return(0,fe.jsxs)("div",{className:"fselector",style:{display:n?"block":"none"},children:[(0,fe.jsxs)("div",{className:"donebut fsclose",onClick:()=>r(n),children:[null!==(t=null===l||void 0===l?void 0:l.get("Close"))&&void 0!==t?t:"Close"," X"]}),(0,fe.jsxs)("div",{id:"fontList",children:[(0,fe.jsxs)("div",{className:"chead",children:["Select",(0,fe.jsx)("span",{style:{color:"rgb(255, 255, 255)",fontWeight:"500",paddingLeft:"8px"},children:"Font"})]}),(0,fe.jsx)("div",{style:{color:"white",fontSize:"11px"},children:"Please select a font"}),(0,fe.jsx)("div",{children:a.map(e=>(0,fe.jsx)("div",{className:"fsamp",onClick:()=>{s(i.guid,e.name)},children:(0,fe.jsx)("img",{src:e.imageUrl})},e.fontFamilyGuid))})]})]})},ea=["#000000","#FFFFFF"];const ta=g.default.div.withConfig({displayName:"ItemText__ItemTextContainer",componentId:"sc-17nsj9a-0"})([""]),na=(g.default.div.withConfig({displayName:"ItemText__TextToolsContainer",componentId:"sc-17nsj9a-1"})(["display:flex;flex-direction:row;grid-gap:10px;flex-wrap:wrap;"]),g.default.div.withConfig({displayName:"ItemText__TextButtonsContainer",componentId:"sc-17nsj9a-2"})(["width:50%;display:grid;grid-template-columns:1fr 1fr;grid-gap:5px;"]),g.default.div.withConfig({displayName:"ItemText__ColorPickerContainer",componentId:"sc-17nsj9a-3"})(["margin-right:5px;width:calc(50% - 30px);"])),ra=g.default.div.withConfig({displayName:"ItemText__ColorsContainer",componentId:"sc-17nsj9a-4"})(["width:100% display:flex;flex-direction:row;padding-bottom:20px;border-bottom:1px #ccc dotted;"]),ia=g.default.div.withConfig({displayName:"ItemText__SinglePaletteItem",componentId:"sc-17nsj9a-5"})(["width:22px;height:22px;background-color:",";border:1px white solid;cursor:pointer;"," &:hover{opacity:0.6;}@media screen and (max-width:568px){width:39px;height:22px;}"],e=>e.color,e=>e.selected&&"border: 1px black solid;"),sa=g.default.div.withConfig({displayName:"ItemText__TextColorsContainer",componentId:"sc-17nsj9a-6"})(["display:grid;",";width:220px;@media screen and (max-width:568px){width:82vw;grid-gap:10px 22px;}"],e=>!e.isDefaultPalette&&"\n    grid-template-columns: repeat(auto-fill,minmax(20px,1fr));\n    grid-gap: 7px;\n    "),aa=((0,g.default)(Vi.Option).withConfig({displayName:"ItemText__OptionContainer",componentId:"sc-17nsj9a-7"})(["background-color:white !important;&:hover{background-color:#ddd !important;}img{max-width:100%;height:22px;object-fit:contain;}"]),(0,g.default)(Vi.SingleValue).withConfig({displayName:"ItemText__SingleValueContainer",componentId:"sc-17nsj9a-8"})(["img{max-width:100%;height:22px;object-fit:contain;}"]),g.default.div.withConfig({displayName:"ItemText__Cusimg_embu",componentId:"sc-17nsj9a-9"})(["width:78px;display:block;position:relative;float:right;font-size:12px;line-height:16px;font-weight:500;box-sizing:border-box;cursor:pointer;user-select:none;color:rgb(0,69,140);text-align:center;padding:7px 3px;border-radius:3px;border-width:1px;border-style:solid;border-color:rgb(109,207,246);border-image:initial;"])),oa=t=>{var n,r,i,s;let{item:a,handleItemPropChange:o,hideRemoveButton:l}=t;const{removeItem:u,fonts:c,disableTextColors:h,textColors:d,translations:f}=(0,m.useZakeke)(),p=null===f||void 0===f?void 0:f.dynamics,g=a.constraints,v=null===(n=null===g||void 0===g?void 0:g.canEdit)||void 0===n||n,_=(a.isTextOnPath,null!==(r=null===g||void 0===g?void 0:g.toUppercase)&&void 0!==r&&r),[y,b]=(0,e.useState)(a.fillColor),[x,w]=(0,e.useState)(!1),S=e=>{w(!e)};(0,e.useCallback)((0,G.debounce)(e=>{o(a,"font-color",e)},500),[]);return a?(0,fe.jsxs)(ta,{children:[(0,fe.jsxs)(Gi,{label:a.name,rightComponent:!l&&a.constraints.canDelete&&(0,fe.jsx)(We,{onClick:()=>u(a.guid),children:(0,fe.jsx)(at,{})}),children:[(0,fe.jsx)(aa,{onClick:()=>S(x),children:null!==(i=null===p||void 0===p?void 0:p.get("Font"))&&void 0!==i?i:"Font"}),(0,fe.jsx)(qe,{placeholder:"Name",value:_?a.text.toUpperCase():a.text,onChange:e=>{o&&o(a,"text",_?e.currentTarget.value.toUpperCase():e.currentTarget.value)},maxLength:a.constraints&&a.constraints.maxNrChars||null,disabled:!v})]}),(0,fe.jsx)(Qs,{fontSelectorVisible:x,togglerFontSelectorVisible:S,item:a}),(!h||!(h&&1===d.length))&&!(null===(s=a.constraints)||void 0===s||!s.canChangeFontColor)&&(0,fe.jsx)(Gi,{label:"Color",children:(0,fe.jsxs)(ra,{children:[!h&&(0,fe.jsx)(na,{children:(0,fe.jsx)($s,{color:y,onChange:e=>{o(a,"font-color",e),b(e)}})}),!h&&(0,fe.jsx)(sa,{children:ea.map(e=>(0,fe.jsx)(ia,{onClick:()=>{o(a,"font-color",e),b(e)},selected:e===y,color:e},e))}),h&&(0,fe.jsx)(sa,{children:d.map(e=>(0,fe.jsx)(ia,{onClick:()=>{o(a,"font-color",e.colorCode),b(e.colorCode)},selected:e.colorCode===y,color:e.colorCode},e.colorCode))})]})})]}):null};var la;const ua=g.default.div(la||(la=i(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n"]))),ca=e=>{let{error:t,onCloseClick:n}=e;return(0,fe.jsx)(kt,{alignButtons:"center",buttons:[{label:"Close",onClick:n}],children:(0,fe.jsx)(ua,{children:(0,fe.jsx)("span",{children:t})})})};var ha={"aria-busy":!0,role:"status"};var da=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},fa=242.776657104492,pa=(0,g.keyframes)(ga||(ga=da(["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"],["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"])),.14*fa,fa,.11*fa,.35*fa,fa,.35*fa,.01*fa,fa,.99*fa);g.default.path(ma||(ma=da(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"],["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),.01*fa,fa,pa,1.6);var ga,ma;const va=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof n[e])return n[e];if(e&&e.indexOf(".")>0){for(var r=e.split("."),i=r.length,s=n[r[0]],a=1;null!=s&&a<i;)s=s[r[a]],a+=1;if("undefined"!==typeof s)return s}return t}};var _a,ya,ba,xa=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},wa=(0,g.keyframes)(_a||(_a=xa(["\n to {\n    transform: rotate(360deg);\n  }\n"],["\n to {\n    transform: rotate(360deg);\n  }\n"])));g.default.svg(ya||(ya=xa(["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"],["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"])),wa,va("speed","0.75")),g.default.polyline(ba||(ba=xa(["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"],["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),function(e){return e.width});var Sa=function(e){return{display:e?"flex":"none"}},Ca=function(){return Ca=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ca.apply(this,arguments)};const Da=function(t){var n=t.height,r=void 0===n?80:n,i=t.width,s=void 0===i?80:i,a=t.strokeWidth,o=void 0===a?2:a,l=t.radius,u=void 0===l?1:l,c=t.color,h=void 0===c?"#4fa94d":c,d=t.ariaLabel,f=void 0===d?"tail-spin-loading":d,p=t.wrapperStyle,g=t.wrapperClass,m=t.visible,v=void 0===m||m,_=parseInt(String(o)),y=_+36,b=_/2,x=b+parseInt(String(u))-1;return e.createElement("div",Ca({style:Ca(Ca({},Sa(v)),p),className:g,"data-testid":"tail-spin-loading","aria-label":f},ha),e.createElement("svg",{width:s,height:r,viewBox:"0 0 ".concat(y," ").concat(y),xmlns:"http://www.w3.org/2000/svg","data-testid":"tail-spin-svg"},e.createElement("defs",null,e.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},e.createElement("stop",{stopColor:h,stopOpacity:"0",offset:"0%"}),e.createElement("stop",{stopColor:h,stopOpacity:".631",offset:"63.146%"}),e.createElement("stop",{stopColor:h,offset:"100%"}))),e.createElement("g",{fill:"none",fillRule:"evenodd"},e.createElement("g",{transform:"translate(".concat(b," ").concat(b,")")},e.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:h,strokeWidth:o},e.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),e.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:x},e.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}))))))};var Ea=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Aa=(0,g.keyframes)(ka||(ka=Ea(["\n to {\n    stroke-dashoffset: 136;\n  }\n"],["\n to {\n    stroke-dashoffset: 136;\n  }\n"])));g.default.polygon(Ma||(Ma=Ea(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"],["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),Aa),g.default.svg(Ta||(Ta=Ea(["\n  transform-origin: 50% 65%;\n"],["\n  transform-origin: 50% 65%;\n"])));var ka,Ma,Ta;var Ia,Oa,La,Pa,Ba,Na,Ra,Fa;const za=(0,g.default)(St)(Ia||(Ia=i(["\n    flex-basis: 400px;\n    background: linear-gradient(to right, rgba(10, 70, 140, 0.9), rgb(41, 56, 132)) !important;\n    color: #fff;\n    font-family: Saira, sans-serif;\n    height: 100vh;\n    position: absolute;\n    right: 0;\n    top: 50%;\n    transform: translateY(-50%);\n"]))),ja=g.default.ul(Oa||(Oa=i(["\n    max-height:300px;\n    padding: 0;\n    margin: 0;\n    overflow:auto;\n    margin-top: 20px;\n"]))),Va=g.default.li(La||(La=i(["\n    height: 70px;\n    min-width:200px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: linear-gradient(to right, rgba(10, 70, 140, 0.9), rgb(41, 56, 132));\n    // background-color: #eee;\n    cursor: pointer;\n    margin-bottom: 10px;\n    color: #313c46;\n    &:hover{\n        background-color: #313c46;\n        color: white;\n    }\n"]))),Ua=g.default.ul(Pa||(Pa=i(["\n    max-height100vh;\n    padding-left:0px;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    display: grid;\n    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);\n    grid-gap: 10px;\n    overflow:auto;\n\n"]))),Ha=g.default.li(Ba||(Ba=i(["\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    border: 1px black solid;\n    padding: 10px;\n    cursor: pointer;\n    border-radius: 7%;\n    &:hover {\n        border: 1px black solid;\n    }\n\n    img {\n        width: 100%;\n        height: 80px;\n        display: block;\n        object-fit: contain;\n        margin-bottom: 5px;\n        background-color: #fff;\n    }\n\n    span {\n        font-size: 12px;\n    }\n"]))),Ga=g.default.div(Na||(Na=i(["\n    display: flex;\n    justify-content: center;\n"]))),Ya=(0,g.default)(Da)(Ra||(Ra=i(["\n    margin: auto;\n    display: block;\n    width: 48px;\n    height: 48px;\n"]))),Wa=g.default.div(Fa||(Fa=i(["\n    text-align: center;\n    padding: 10px;\n    font-size: 14px;\n    cursor: pointer;\n\n    @media(hover) {\n        &:hover {\n            opacity: 0.8;\n        }\n    }\n"]))),qa=t=>{let{onClose:n,onImageSelected:r}=t;const{getMacroCategories:i,getImages:s}=(0,m.useZakeke)(),[a,o]=(0,e.useState)(!1),[l,u]=(0,e.useState)([]),[c,h]=(0,e.useState)(null),[d,f]=(0,e.useState)(),[p,g]=(0,e.useState)();(0,e.useEffect)(()=>{v()},[]);const v=async()=>{try{o(!0);let e=await i();o(!1),u(e),1===e.length&&_(e[0])}catch(e){console.error(e)}},_=async e=>{h(e),1===e.categories.length&&y(e.categories[0])},y=async e=>{try{o(!0),f(e);const t=await s(e.categoryID);o(!1),g(t)}catch(t){console.error(t)}};return(0,fe.jsxs)(kt,{windowDecorator:za,title:W._("Image gallery","Composer"),children:[a&&(0,fe.jsx)(Ga,{children:(0,fe.jsx)(Ya,{color:"#000000",height:48,width:48})}),!a&&(0,fe.jsxs)(fe.Fragment,{children:[!c&&(0,fe.jsx)(ja,{children:l.map(e=>(0,fe.jsx)(Va,{onClick:()=>_(e),children:e.name},e.macroCategoryID.toString()))}),c&&!d&&(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(Wa,{onClick:()=>h(null),children:W._("Return to macro categories","Composer")}),(0,fe.jsx)(ja,{children:c.categories.map(e=>(0,fe.jsx)(Va,{onClick:()=>y(e),children:e.name},e.categoryID.toString()))})]}),c&&d&&p&&(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(Wa,{onClick:()=>f(null),children:W._("Return to categories","Composer")}),(0,fe.jsx)(Ua,{children:p.map(e=>(0,fe.jsxs)(Ha,{onClick:()=>r(e),children:[(0,fe.jsx)("img",{style:{borderRadius:"5%"},src:e.choiceUrl,alt:e.name}),(0,fe.jsx)("span",{children:e.name})]},e.imageID.toString()))})]})]})]})};var Za,Ka,Xa;const Ja=g.default.div(Za||(Za=i(["\n    display: grid;\n    grid-template-columns: 2fr 1fr;\n    grid-column-gap: 20px;\n    input{\n    display:none;\n  }\n"]))),$a=g.default.div(Ka||(Ka=i(["\n    border: 5px #f4f4f4 solid;\n    padding: 4px;\n    height: 130px;\n    img{\n        display: block;\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n    }\n"]))),Qa=g.default.div(Xa||(Xa=i(["\n    display:flex;\n    flex-direction:column;\n    justify-content:space-between;\n    padding:20px 0px;\n    \n"]))),eo=e=>{let{item:t,handleItemPropChange:n,currentTemplateArea:r,uploadImgDisabled:i}=e;const{removeItem:s}=(0,m.useZakeke)();let a;const o=t.constraints,l=!o||o.canEdit,u=(!r||r.uploadRestrictions.isUserImageAllowed)&&l,c=(!r||!r.disableSellerImages)&&l;return(0,fe.jsx)(Gi,{label:t.name||W._("Image","Composer"),rightComponent:o.canDelete&&(0,fe.jsx)(We,{onClick:()=>s(t.guid),children:(0,fe.jsx)(at,{})}),children:(0,fe.jsxs)(Ja,{children:[(0,fe.jsx)($a,{children:(0,fe.jsx)("img",{src:t.url,alt:""})}),(0,fe.jsxs)(Qa,{children:[u&&(0,fe.jsx)(Ze,{disabled:i,isFullWidth:!0,onClick:()=>a.click(),children:W._("Incarc\u0103","Composer")}),c&&(0,fe.jsx)(Ze,{isFullWidth:!0,onClick:()=>n(t,"image-gallery"),children:W._("Galerie","Composer")})]}),(0,fe.jsx)("input",{type:"file",ref:e=>a=e,onChange:e=>{e.currentTarget.files&&e.currentTarget.files.length>0&&n(t,"image-upload",e.currentTarget.files[0]),a.value=""}})]})})};function to(){const{currentTemplate:e,items:t,isAreaVisible:n,product:r,templates:i,setTemplate:s,isSceneLoading:a}=(0,m.useZakeke)();if(!a&&r){var o;const e=null!==(o=null===r||void 0===r?void 0:r.areas.filter(e=>n(e.id)))&&void 0!==o?o:[];let t=i[0].areas.filter(e=>!0===e.canAddText).map(e=>({id:e.id}));const s=[];return e.forEach(e=>{t.some(t=>t.id===e.id)&&s.push(e)}),s}}function no(){const{currentTemplate:e,items:t,isAreaVisible:n,product:r,templates:i,setTemplate:s,isSceneLoading:a}=(0,m.useZakeke)();if(!a&&r){var o;const e=null!==(o=null===r||void 0===r?void 0:r.areas.filter(e=>n(e.id)))&&void 0!==o?o:[];let t=i[0].areas.filter(e=>!0===e.canAddImage).map(e=>({id:e.id}));const s=[];return e.forEach(e=>{t.some(t=>t.id===e.id)&&s.push(e)}),s}}const ro=e=>{var t,n,r,i;let{groupNameList:s,filteredAreas:a,toggleFunc:o,UpdateGroupId:l,updCurrentIndex:u,selectedTray:c,selectStepName:h}=e;const{addItemText:d,fonts:f,defaultColor:p,items:g,groups:v,translations:_}=(0,m.useZakeke)(),y=(null===_||void 0===_||_.statics,null===_||void 0===_?void 0:_.dynamics),b=(null===g||void 0===g?void 0:g.filter(e=>0===e.type).length)>0;s.findIndex(e=>"OVERLAY TYPE"===e.name.toUpperCase());if(g&&!b){const e=s.findIndex(e=>"OVERLAY TYPE"===e.name);e>0&&s.splice(e,1)}else{const e=s.findIndex(e=>"OVERLAY TYPE"===e.name.toUpperCase());if(e<0){const e=v.findIndex(e=>"OVERLAY TYPE"===e.name.toUpperCase()),t=v[e];s.push({id:t.id,name:t.name,imageUrl:t.imageUrl})}}const x=to(),w=no(),S=e=>{l(e.target.id,"colors"),o("colors")};return(0,fe.jsx)("div",{style:{transition:"all 0.6s cubic-bezier(0.075, 0.82, 0.165, 1) 0s"},children:s&&(0,fe.jsx)("div",{children:(0,fe.jsxs)("div",{className:"full-tray",children:[(0,fe.jsx)("div",{className:"tray-mc-header",children:(0,fe.jsxs)("button",{className:"tray-trigger-close-button",onClick:()=>o(null),children:[null!==(t=null===y||void 0===y?void 0:y.get("Close"))&&void 0!==t?t:"Close",(0,fe.jsx)("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 25 25",role:"img",width:"25px",height:"25px",fill:"none",children:(0,fe.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M18.973 5.027L5.028 18.972M5.027 5.027l13.945 13.945"})})]})}),(0,fe.jsx)("div",{className:"tray-mc-content",children:(0,fe.jsxs)("div",{className:"tray-mc-list-wrapper",children:[(0,fe.jsxs)("div",{className:"mc-list-title",children:[" ",null!==(n=null===y||void 0===y?void 0:y.get("Select Colors"))&&void 0!==n?n:"Select Colors"," "]}),(0,fe.jsx)("div",{className:"tray-mc-grid",children:s.map((e,t)=>(0,fe.jsx)("div",{className:"heading",id:e.name,children:(0,fe.jsxs)("div",{className:"sitems",style:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,justifyContent:"flex-start"},onClick:S,id:e.id,children:[(0,fe.jsx)("img",{className:"tray-image",id:e.id,style:{width:"69px",height:"76px",borderRadius:"4px 4px 0px 0px"},src:e.imageUrl}),(0,fe.jsx)("div",{id:e.id,className:"slabel",children:(0,fe.jsx)("span",{id:e.id,style:{fontSize:"9px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.name})})]})}))})]})}),(0,fe.jsx)("div",{className:"tray-mc-content signature",children:(0,fe.jsxs)("div",{className:"tray-mc-list-wrapper",children:[(0,fe.jsx)("div",{className:"mc-list-title",children:null!==(r=null===y||void 0===y?void 0:y.get("Select Signature"))&&void 0!==r?r:"Select Signature"}),(0,fe.jsx)("div",{className:"tray-mc-grid",children:x.map((e,t)=>(0,fe.jsx)("div",{className:"heading",id:e.id,children:(0,fe.jsx)("div",{className:"sitems",style:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,justifyContent:"flex-start"},onClick:()=>(e=>{var t;const n={guid:"",name:"",text:"".concat(null!==(t=null===y||void 0===y?void 0:y.get("Enter Your Name"))&&void 0!==t?t:"Enter Your Name"),fillColor:p,fontFamily:f[0].name,fontSize:48,fontWeight:"normal normal",isTextOnPath:!1,constraints:null,placeholder:"Input your text here",backgroundColor:"rgb(235, 237, 242)"};l(e,"signature"),d(n,e),o("signature"),h("")})(e.id),id:e.id,children:(0,fe.jsx)("div",{id:e.id,className:"slabel",children:(0,fe.jsx)("span",{id:e.id,style:{fontSize:"9px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.name})})})},t))})]})}),(0,fe.jsx)("div",{className:"tray-mc-content logos",children:(0,fe.jsxs)("div",{className:"tray-mc-list-wrapper",children:[(0,fe.jsx)("div",{className:"mc-list-title",children:null!==(i=null===y||void 0===y?void 0:y.get("Select Logos"))&&void 0!==i?i:"Select Logos"}),(0,fe.jsx)("div",{className:"tray-mc-grid",children:w.map((e,t)=>(0,fe.jsx)("div",{className:"heading",id:e.id,children:(0,fe.jsx)("div",{className:"sitems",style:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,justifyContent:"flex-start"},onClick:()=>{return t=e.id,h(""),l(t,"logos"),void o("logos");var t},id:e.id,children:(0,fe.jsx)("div",{id:e.id,className:"slabel",children:(0,fe.jsx)("span",{id:e.id,style:{fontSize:"9px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.name})})})}))})]})})]})})})},io=g.default.div.withConfig({displayName:"ProgressBar__LoadingLabel",componentId:"sc-r5187z-0"})(['color:#000;font-size:12px;font-family:"Inter";font-style:normal;font-weight:700;line-height:16px;']),so=g.default.div.withConfig({displayName:"ProgressBar__LoaderContainer",componentId:"sc-r5187z-1"})(["height:8px;width:600px;border-radius:4px;background-color:#dbe2e6;@media screen and (max-width:766px){width:310px;}"]),ao=g.default.span.withConfig({displayName:"ProgressBar__LoadingPercentageLabel",componentId:"sc-r5187z-2"})(['color:#8fa4ae;font-weight:400;font-size:12px;line-height:16px;font-style:normal;font-family:"Inter";']),oo=g.default.div.withConfig({displayName:"ProgressBar__LoadingPercentageandIconContainer",componentId:"sc-r5187z-3"})(["display:flex;justify-content:space-between;"]),lo=g.default.div.withConfig({displayName:"ProgressBar__LoaderFill",componentId:"sc-r5187z-4"})(["height:100%;border-radius:4px;margin:7px 0px;width:",';background-color:#008556;border-radius:"inherit";'],e=>{let{completed:t}=e;return t&&"".concat(t,"%")}),uo=e=>{let{bgColor:t,completed:n}=e;const{isSceneLoading:r,translations:i}=(0,m.useZakeke)(),s=null===i||void 0===i?void 0:i.dynamics;return(0,fe.jsxs)("div",{children:[(0,fe.jsx)(io,{children:null===s||void 0===s?void 0:s.get("Loading...")}),(0,fe.jsxs)(so,{children:[(0,fe.jsx)(lo,{completed:r?n:100,bgColor:t,isCompleted:!r}),(0,fe.jsx)(oo,{children:(0,fe.jsx)(ao,{children:r?"".concat(n,"%"):"100%"})})]}),(0,fe.jsxs)("div",{style:{paddingTop:"32px",fontSize:"13px"},children:[(0,fe.jsx)("strong",{children:"Welcome to the unique 3D equipment customizer! \ud83c\udfa8\u2728"}),(0,fe.jsxs)("ul",{children:[(0,fe.jsx)("li",{children:"Perfect Customization: Create the perfect gear for yourself. \ud83d\udee0\ufe0f"}),(0,fe.jsx)("li",{children:"Order with Confidence: Your product will be made to order exactly to your preferences. \ud83d\uded2"}),(0,fe.jsx)("li",{children:"Fast Delivery: Receive your order under 20 working days. \ud83d\ude9a"}),(0,fe.jsx)("li",{children:"Pre-select Size: Choose your size before customizing. \ud83d\udccf "}),(0,fe.jsx)("li",{children:"Simple Payment: Easily pay with multiple payment options. \ud83d\udcb3"}),(0,fe.jsx)("li",{children:"No Regrets: For customized equipment, there is no exchange or return option. \u274c\ud83d\udd04"}),(0,fe.jsx)("li",{children:"Move Forward with Inspiration: Let's be creative and make something unique! \ud83c\udf1f\ud83d\udca1"})]})]})]})},co=g.default.div.withConfig({displayName:"ProgressBarLoadingOverlay__ProgressBarLoadingBackground",componentId:"sc-10czhi1-0"})(["left:0;top:0;width:100%;height:100%;position:fixed;display:flex;align-items:center;justify-content:center;z-index:12;"]),ho=g.default.div.withConfig({displayName:"ProgressBarLoadingOverlay__ProgressBarLoadingContainer",componentId:"sc-10czhi1-1"})(["width:650px;height:19em;padding:10px;display:inline-flex;padding:48px 24px;flex-direction:column;align-items:flex-start;gap:8px;border-radius:4px;background:var(--surface-default,#fff);box-shadow:0px 4px 20px 0px rgba(0,0,0,0.15),0px 0px 3px 0px rgba(0,0,0,0.1);@media screen and (max-width:766px){font-size:10px;width:350px;height:50em;}"]),fo=()=>{const{isSceneLoading:t}=(0,m.useZakeke)(),[n,r]=(0,e.useState)(0);return(0,e.useEffect)(()=>{let e=0;if(t){if(t){const t=setInterval(()=>{e+=.3,r(Math.round(Math.atan(e/2)/(Math.PI/2)*100*100)/100)},50);return()=>clearInterval(t)}}else r(100)},[t]),(0,fe.jsx)(co,{children:(0,fe.jsx)(ho,{children:(0,fe.jsx)(uo,{bgColor:"#F46200",completed:n})})})};var po=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function go(t){var n=t.defaultInputValue,r=void 0===n?"":n,i=t.defaultMenuIsOpen,s=void 0!==i&&i,a=t.defaultValue,o=void 0===a?null:a,l=t.inputValue,u=t.menuIsOpen,c=t.onChange,h=t.onInputChange,d=t.onMenuClose,f=t.onMenuOpen,p=t.value,g=Qe(t,po),m=ur((0,e.useState)(void 0!==l?l:r),2),v=m[0],_=m[1],y=ur((0,e.useState)(void 0!==u?u:s),2),b=y[0],x=y[1],w=ur((0,e.useState)(void 0!==p?p:o),2),S=w[0],C=w[1],D=(0,e.useCallback)(function(e,t){"function"===typeof c&&c(e,t),C(e)},[c]),E=(0,e.useCallback)(function(e,t){var n;"function"===typeof h&&(n=h(e,t)),_(void 0!==n?n:e)},[h]),A=(0,e.useCallback)(function(){"function"===typeof f&&f(),x(!0)},[f]),k=(0,e.useCallback)(function(){"function"===typeof d&&d(),x(!1)},[d]),M=void 0!==l?l:v,T=void 0!==u?u:b,I=void 0!==p?p:S;return H(H({},g),{},{inputValue:M,menuIsOpen:T,onChange:D,onInputChange:E,onMenuClose:k,onMenuOpen:A,value:I})}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function vo(e,t){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vo(e,t)}function _o(e){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_o(e)}function yo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(yo=function(){return!!e})()}function bo(e,t){if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xo(e){return function(e){if(Array.isArray(e))return or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wo=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function So(e,t){return e===t||!(!wo(e)||!wo(t))}function Co(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!So(e[n],t[n]))return!1;return!0}for(var Do={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Eo=function(e){return sr("span",Ot({css:Do},e))},Ao={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,i=e.context,s=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,s=void 0===i?"":i,a=e.selectValue,o=e.isDisabled,l=e.isSelected,u=e.isAppleDevice,c=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&a)return"value ".concat(s," focused, ").concat(c(a,n),".");if("menu"===t&&u){var h=o?" disabled":"",d="".concat(l?" selected":"").concat(h);return"".concat(s).concat(d,", ").concat(c(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},ko=function(t){var n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,s=t.focusableOptions,a=t.isFocused,o=t.selectValue,l=t.selectProps,u=t.id,c=t.isAppleDevice,h=l.ariaLiveMessages,d=l.getOptionLabel,f=l.inputValue,p=l.isMulti,g=l.isOptionDisabled,m=l.isSearchable,v=l.menuIsOpen,_=l.options,y=l.screenReaderStatus,b=l.tabSelectsValue,x=l.isLoading,w=l["aria-label"],S=l["aria-live"],C=(0,e.useMemo)(function(){return H(H({},Ao),h||{})},[h]),D=(0,e.useMemo)(function(){var e,t="";if(n&&C.onChange){var r=n.option,i=n.options,s=n.removedValue,a=n.removedValues,l=n.value,u=s||r||(e=l,Array.isArray(e)?null:e),c=u?d(u):"",h=i||a||void 0,f=h?h.map(d):[],p=H({isDisabled:u&&g(u,o),label:c,labels:f},n);t=C.onChange(p)}return t},[n,C,g,o,d]),E=(0,e.useMemo)(function(){var e="",t=r||i,n=!!(r&&o&&o.includes(r));if(t&&C.onFocus){var a={focused:t,label:d(t),isDisabled:g(t,o),isSelected:n,options:s,context:t===r?"menu":"value",selectValue:o,isAppleDevice:c};e=C.onFocus(a)}return e},[r,i,d,g,C,s,o,c]),A=(0,e.useMemo)(function(){var e="";if(v&&_.length&&!x&&C.onFilter){var t=y({count:s.length});e=C.onFilter({inputValue:f,resultsMessage:t})}return e},[s,f,v,C,_,y,x]),k="initial-input-focus"===(null===n||void 0===n?void 0:n.action),M=(0,e.useMemo)(function(){var e="";if(C.guidance){var t=i?"value":v?"menu":"input";e=C.guidance({"aria-label":w,context:t,isDisabled:r&&g(r,o),isMulti:p,isSearchable:m,tabSelectsValue:b,isInitialFocus:k})}return e},[w,r,i,p,g,m,v,C,o,b,k]),T=sr(e.Fragment,null,sr("span",{id:"aria-selection"},D),sr("span",{id:"aria-focused"},E),sr("span",{id:"aria-results"},A),sr("span",{id:"aria-guidance"},M));return sr(e.Fragment,null,sr(Eo,{id:u},k&&T),sr(Eo,{"aria-live":S,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!k&&T))},Mo=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],To=new RegExp("["+Mo.map(function(e){return e.letters}).join("")+"]","g"),Io={},Oo=0;Oo<Mo.length;Oo++)for(var Lo=Mo[Oo],Po=0;Po<Lo.letters.length;Po++)Io[Lo.letters[Po]]=Lo.base;var Bo=function(e){return e.replace(To,function(e){return Io[e]})},No=function(e,t){void 0===t&&(t=Co);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var s=e.apply(this,r);return n={lastResult:s,lastArgs:r,lastThis:this},s}return r.clear=function(){n=null},r}(Bo),Ro=function(e){return e.replace(/^\s+|\s+$/g,"")},Fo=function(e){return"".concat(e.label," ").concat(e.value)},zo=["innerRef"];function jo(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter(function(e){var t=ur(e,1)[0];return!n.includes(t)});return i.reduce(function(e,t){var n=ur(t,2),r=n[0],i=n[1];return e[r]=i,e},{})}(Qe(e,zo),"onExited","in","enter","exit","appear");return sr("input",Ot({ref:t},n,{css:ar({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Vo=["boxSizing","height","overflow","paddingRight","position"],Uo={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Ho(e){e.cancelable&&e.preventDefault()}function Go(e){e.stopPropagation()}function Yo(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Wo(){return"ontouchstart"in window||navigator.maxTouchPoints}var qo=!("undefined"===typeof window||!window.document||!window.document.createElement),Zo=0,Ko={capture:!1,passive:!1};var Xo=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Jo={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function $o(t){var n=t.children,r=t.lockEnabled,i=t.captureEnabled,s=function(t){var n=t.isEnabled,r=t.onBottomArrive,i=t.onBottomLeave,s=t.onTopArrive,a=t.onTopLeave,o=(0,e.useRef)(!1),l=(0,e.useRef)(!1),u=(0,e.useRef)(0),c=(0,e.useRef)(null),h=(0,e.useCallback)(function(e,t){if(null!==c.current){var n=c.current,u=n.scrollTop,h=n.scrollHeight,d=n.clientHeight,f=c.current,p=t>0,g=h-d-u,m=!1;g>t&&o.current&&(i&&i(e),o.current=!1),p&&l.current&&(a&&a(e),l.current=!1),p&&t>g?(r&&!o.current&&r(e),f.scrollTop=h,m=!0,o.current=!0):!p&&-t>u&&(s&&!l.current&&s(e),f.scrollTop=0,m=!0,l.current=!0),m&&function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}(e)}},[r,i,s,a]),d=(0,e.useCallback)(function(e){h(e,e.deltaY)},[h]),f=(0,e.useCallback)(function(e){u.current=e.changedTouches[0].clientY},[]),p=(0,e.useCallback)(function(e){var t=u.current-e.changedTouches[0].clientY;h(e,t)},[h]),g=(0,e.useCallback)(function(e){if(e){var t=!!si&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",f,t),e.addEventListener("touchmove",p,t)}},[p,f,d]),m=(0,e.useCallback)(function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",p,!1))},[p,f,d]);return(0,e.useEffect)(function(){if(n){var e=c.current;return g(e),function(){m(e)}}},[n,g,m]),function(e){c.current=e}}({isEnabled:void 0===i||i,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),a=function(t){var n=t.isEnabled,r=t.accountForScrollbars,i=void 0===r||r,s=(0,e.useRef)({}),a=(0,e.useRef)(null),o=(0,e.useCallback)(function(e){if(qo){var t=document.body,n=t&&t.style;if(i&&Vo.forEach(function(e){var t=n&&n[e];s.current[e]=t}),i&&Zo<1){var r=parseInt(s.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,o=window.innerWidth-a+r||0;Object.keys(Uo).forEach(function(e){var t=Uo[e];n&&(n[e]=t)}),n&&(n.paddingRight="".concat(o,"px"))}t&&Wo()&&(t.addEventListener("touchmove",Ho,Ko),e&&(e.addEventListener("touchstart",Yo,Ko),e.addEventListener("touchmove",Go,Ko))),Zo+=1}},[i]),l=(0,e.useCallback)(function(e){if(qo){var t=document.body,n=t&&t.style;Zo=Math.max(Zo-1,0),i&&Zo<1&&Vo.forEach(function(e){var t=s.current[e];n&&(n[e]=t)}),t&&Wo()&&(t.removeEventListener("touchmove",Ho,Ko),e&&(e.removeEventListener("touchstart",Yo,Ko),e.removeEventListener("touchmove",Go,Ko)))}},[i]);return(0,e.useEffect)(function(){if(n){var e=a.current;return o(e),function(){l(e)}}},[n,o,l]),function(e){a.current=e}}({isEnabled:r});return sr(e.Fragment,null,r&&sr("div",{onClick:Xo,css:Jo}),n(function(e){s(e),a(e)}))}var Qo={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},el=function(e){var t=e.name,n=e.onFocus;return sr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:Qo,value:"",onChange:function(){}})};function tl(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function nl(){return tl(/^Mac/i)}function rl(){return tl(/^iPhone/i)||tl(/^iPad/i)||nl()&&navigator.maxTouchPoints>1}var il=function(e){return e.label},sl=function(e){return e.value},al={clearIndicator:Ai,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,s=i.colors,a=i.borderRadius;return H({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:r?s.primary:s.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:r?s.primary:s.neutral30}})},dropdownIndicator:Ei,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return H({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,s=r.colors;return H({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,s=i.spacing,a=i.colors;return H(H({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},Bi),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:a.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,s=i.colors,a=i.spacing.baseUnit;return H({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*a})},loadingMessage:_i,menu:function(e,t){var n,r=e.placement,i=e.theme,s=i.borderRadius,a=i.spacing,o=i.colors;return H((V(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),V(n,"position","absolute"),V(n,"width","100%"),V(n,"zIndex",1),n),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return H({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,s=n.colors;return H({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,s=e.cropWithEllipsis;return H({overflow:"hidden",textOverflow:s||void 0===s?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,s=n.colors,a=e.isFocused;return H({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:a?s.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:vi,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,s=e.theme,a=s.spacing,o=s.colors;return H({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?o.primary:r?o.primary25:"transparent",color:n?o.neutral20:i?o.neutral0:"inherit",padding:"".concat(2*a.baseUnit,"px ").concat(3*a.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?o.primary:o.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return H({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,s=r.colors;return H({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?s.neutral40:s.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,s=e.selectProps.controlShouldRenderValue;return H({alignItems:"center",display:r&&i&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var ol,ll={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},ul={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ti(),captureMenuScroll:!ti(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=H({ignoreCase:!0,ignoreAccents:!0,stringify:Fo,trim:!0,matchFrom:"any"},ol),r=n.ignoreCase,i=n.ignoreAccents,s=n.stringify,a=n.trim,o=n.matchFrom,l=a?Ro(t):t,u=a?Ro(s(e)):s(e);return r&&(l=l.toLowerCase(),u=u.toLowerCase()),i&&(l=No(l),u=Bo(u)),"start"===o?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:il,getOptionValue:sl,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function cl(e,t,n,r){return{type:"option",data:t,isDisabled:_l(e,t,n),isSelected:yl(e,t,n),label:ml(e,t),value:vl(e,t),index:r}}function hl(e,t){return e.options.map(function(n,r){if("options"in n){var i=n.options.map(function(n,r){return cl(e,n,t,r)}).filter(function(t){return pl(e,t)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=cl(e,n,t,r);return pl(e,s)?s:void 0}).filter(ai)}function dl(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,xo(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function fl(e,t){return e.reduce(function(e,n){return"group"===n.type?e.push.apply(e,xo(n.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}}))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e},[])}function pl(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,s=t.isSelected,a=t.label,o=t.value;return(!xl(e)||!s)&&bl(e,{label:a,value:o,data:i},r)}var gl=function(e,t){var n;return(null===(n=e.find(function(e){return e.data===t}))||void 0===n?void 0:n.id)||null},ml=function(e,t){return e.getOptionLabel(t)},vl=function(e,t){return e.getOptionValue(t)};function _l(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function yl(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=vl(e,t);return n.some(function(t){return vl(e,t)===r})}function bl(e,t,n){return!e.filterOption||e.filterOption(t,n)}var xl=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},wl=1,Sl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}(r,t);var n=function(e){var t=yo();return function(){var n,r=_o(e);if(t){var i=_o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bo(this,n)}}(r);function r(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,s=r.name;n.name=s,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,s=i.closeMenuOnSelect,a=i.isMulti,o=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:o}),s&&(t.setState({inputIsHiddenAfterUpdate:!a}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,s=n.name,a=t.state.selectValue,o=i&&t.isOptionSelected(e,a),l=t.isOptionDisabled(e,a);if(o){var u=t.getOptionValue(e);t.setValue(a.filter(function(e){return t.getOptionValue(e)!==u}),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:s});i?t.setValue([].concat(xo(a),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),s=r.filter(function(e){return t.getOptionValue(e)!==i}),a=oi(n,s,s[0]||null);t.onChange(a,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(oi(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),s=oi(e,i,i[0]||null);r&&t.onChange(s,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return gl(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return fl(hl(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wr.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return ml(t.props,e)},t.getOptionValue=function(e){return vl(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=al[e](n,r);i.boxSizing="border-box";var s=t.props.styles[e];return s?s(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,H(H({},Vi),e.components);var e},t.buildCategorizedOptions=function(){return hl(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return dl(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:H({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout(function(){return t.focusInput()}))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&Xr(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),s=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||s>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return xl(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,s=n.escapeClearsValue,a=n.inputValue,o=n.isClearable,l=n.isDisabled,u=n.menuIsOpen,c=n.onKeyDown,h=n.tabSelectsValue,d=n.openMenuOnFocus,f=t.state,p=f.focusedOption,g=f.focusedValue,m=f.selectValue;if(!l&&("function"!==typeof c||(c(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||a)return;t.focusValue("previous");break;case"ArrowRight":if(!r||a)return;t.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(g)t.removeValue(g);else{if(!i)return;r?t.popValue():o&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!u||!h||!p||d&&t.isOptionSelected(p,m))return;t.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(u){if(!p)return;if(t.isComposing)return;t.selectOption(p);break}return;case"Escape":u?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:a}),t.onMenuClose()):o&&s&&t.clearValue();break;case" ":if(a)return;if(!u){t.openMenu("first");break}if(!p)return;t.selectOption(p);break;case"ArrowUp":u?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":u?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!u)return;t.focusOption("pageup");break;case"PageDown":if(!u)return;t.focusOption("pagedown");break;case"Home":if(!u)return;t.focusOption("first");break;case"End":if(!u)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++wl),t.state.selectValue=qr(e.value),e.menuIsOpen&&t.state.selectValue.length){var i=t.getFocusableOptionsWithIds(),s=t.buildFocusableOptions(),a=s.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=i,t.state.focusedOption=s[a],t.state.focusedOptionId=gl(i,s[a])}return t}return function(e,t,n){t&&mo(e.prototype,t),n&&mo(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&ei(this.menuListRef,this.focusedOptionRef),(nl()||rl())&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(ei(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,s=this.buildFocusableOptions(),a="first"===e?0:s.length-1;if(!this.props.isMulti){var o=s.indexOf(r[0]);o>-1&&(a=o)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:s[a],focusedOptionId:this.getFocusedOptionId(s[a])},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var s=n.length-1,a=-1;if(n.length){switch(e){case"previous":a=0===i?0:-1===i?s:i-1;break;case"next":i>-1&&i<s&&(a=i+1)}this.setState({inputIsHidden:-1!==a,focusedValue:n[a]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,s=r.indexOf(n);n||(s=-1),"up"===e?i=s>0?s-1:r.length-1:"down"===e?i=(s+1)%r.length:"pageup"===e?(i=s-t)<0&&(i=0):"pagedown"===e?(i=s+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(ll):H(H({},ll),this.props.theme):ll}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,s=this.selectOption,a=this.setValue,o=this.props,l=o.isMulti,u=o.isRtl,c=o.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:u,options:c,selectOption:s,selectProps:o,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return _l(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return yl(this.props,e,t)}},{key:"filterOption",value:function(e,t){return bl(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,n=t.isDisabled,r=t.isSearchable,i=t.inputId,s=t.inputValue,a=t.tabIndex,o=t.form,l=t.menuIsOpen,u=t.required,c=this.getComponents().Input,h=this.state,d=h.inputIsHidden,f=h.ariaSelection,p=this.commonProps,g=i||this.getElementId("input"),m=H(H(H({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":u,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===f||void 0===f?void 0:f.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?e.createElement(c,Ot({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:g,innerRef:this.getInputRef,isDisabled:n,isHidden:d,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:a,form:o,type:"text",value:s},m)):e.createElement(jo,Ot({id:g,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Gr,onFocus:this.onInputFocus,disabled:n,tabIndex:a,inputMode:"none",form:o,value:""},m))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,s=n.MultiValueLabel,a=n.MultiValueRemove,o=n.SingleValue,l=n.Placeholder,u=this.commonProps,c=this.props,h=c.controlShouldRenderValue,d=c.isDisabled,f=c.isMulti,p=c.inputValue,g=c.placeholder,m=this.state,v=m.selectValue,_=m.focusedValue,y=m.isFocused;if(!this.hasValue()||!h)return p?null:e.createElement(l,Ot({},u,{key:"placeholder",isDisabled:d,isFocused:y,innerProps:{id:this.getElementId("placeholder")}}),g);if(f)return v.map(function(n,o){var l=n===_,c="".concat(t.getOptionLabel(n),"-").concat(t.getOptionValue(n));return e.createElement(r,Ot({},u,{components:{Container:i,Label:s,Remove:a},isFocused:l,isDisabled:d,key:c,index:o,removeProps:{onClick:function(){return t.removeValue(n)},onTouchEnd:function(){return t.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),t.formatOptionLabel(n,"value"))});if(p)return null;var b=v[0];return e.createElement(o,Ot({},u,{data:b,isDisabled:d}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,s=r.isLoading,a=this.state.isFocused;if(!this.isClearable()||!t||i||!this.hasValue()||s)return null;var o={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return e.createElement(t,Ot({},n,{innerProps:o,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,s=r.isLoading,a=this.state.isFocused;if(!t||!s)return null;return e.createElement(t,Ot({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:a}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),n=t.DropdownIndicator,r=t.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,s=this.props.isDisabled,a=this.state.isFocused;return e.createElement(r,Ot({},i,{isDisabled:s,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents().DropdownIndicator;if(!t)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,s={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return e.createElement(t,Ot({},n,{innerProps:s,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var t=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,s=n.Menu,a=n.MenuList,o=n.MenuPortal,l=n.LoadingMessage,u=n.NoOptionsMessage,c=n.Option,h=this.commonProps,d=this.state.focusedOption,f=this.props,p=f.captureMenuScroll,g=f.inputValue,m=f.isLoading,v=f.loadingMessage,_=f.minMenuHeight,y=f.maxMenuHeight,b=f.menuIsOpen,x=f.menuPlacement,w=f.menuPosition,S=f.menuPortalTarget,C=f.menuShouldBlockScroll,D=f.menuShouldScrollIntoView,E=f.noOptionsMessage,A=f.onMenuScrollToTop,k=f.onMenuScrollToBottom;if(!b)return null;var M,T=function(n,r){var i=n.type,s=n.data,a=n.isDisabled,o=n.isSelected,l=n.label,u=n.value,f=d===s,p=a?void 0:function(){return t.onOptionHover(s)},g=a?void 0:function(){return t.selectOption(s)},m="".concat(t.getElementId("option"),"-").concat(r),v={id:m,onClick:g,onMouseMove:p,onMouseOver:p,tabIndex:-1,role:"option","aria-selected":t.state.isAppleDevice?void 0:o};return e.createElement(c,Ot({},h,{innerProps:v,data:s,isDisabled:a,isSelected:o,key:m,label:l,type:i,value:u,isFocused:f,innerRef:f?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())M=this.getCategorizedOptions().map(function(n){if("group"===n.type){var s=n.data,a=n.options,o=n.index,l="".concat(t.getElementId("group"),"-").concat(o),u="".concat(l,"-heading");return e.createElement(r,Ot({},h,{key:l,data:s,options:a,Heading:i,headingProps:{id:u,data:n.data},label:t.formatGroupLabel(n.data)}),n.options.map(function(e){return T(e,"".concat(o,"-").concat(e.index))}))}if("option"===n.type)return T(n,"".concat(n.index))});else if(m){var I=v({inputValue:g});if(null===I)return null;M=e.createElement(l,h,I)}else{var O=E({inputValue:g});if(null===O)return null;M=e.createElement(u,h,O)}var L={minMenuHeight:_,maxMenuHeight:y,menuPlacement:x,menuPosition:w,menuShouldScrollIntoView:D},P=e.createElement(pi,Ot({},h,L),function(n){var r=n.ref,i=n.placerProps,o=i.placement,l=i.maxHeight;return e.createElement(s,Ot({},h,L,{innerRef:r,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:m,placement:o}),e.createElement($o,{captureEnabled:p,onTopArrive:A,onBottomArrive:k,lockEnabled:C},function(n){return e.createElement(a,Ot({},h,{innerRef:function(e){t.getMenuListRef(e),n(e)},innerProps:{role:"listbox","aria-multiselectable":h.isMulti,id:t.getElementId("listbox")},isLoading:m,maxHeight:l,focusedOption:d}),M)}))});return S||"fixed"===w?e.createElement(o,Ot({},h,{appendTo:S,controlElement:this.controlRef,menuPlacement:x,menuPosition:w}),P):P}},{key:"renderFormField",value:function(){var t=this,n=this.props,r=n.delimiter,i=n.isDisabled,s=n.isMulti,a=n.name,o=n.required,l=this.state.selectValue;if(o&&!this.hasValue()&&!i)return e.createElement(el,{name:a,onFocus:this.onValueInputFocus});if(a&&!i){if(s){if(r){var u=l.map(function(e){return t.getOptionValue(e)}).join(r);return e.createElement("input",{name:a,type:"hidden",value:u})}var c=l.length>0?l.map(function(n,r){return e.createElement("input",{key:"i-".concat(r),name:a,type:"hidden",value:t.getOptionValue(n)})}):e.createElement("input",{name:a,type:"hidden",value:""});return e.createElement("div",null,c)}var h=l[0]?this.getOptionValue(l[0]):"";return e.createElement("input",{name:a,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,s=n.focusedValue,a=n.isFocused,o=n.selectValue,l=this.getFocusableOptions();return e.createElement(ko,Ot({},t,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:s,isFocused:a,selectValue:o,focusableOptions:l,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var t=this.getComponents(),n=t.Control,r=t.IndicatorsContainer,i=t.SelectContainer,s=t.ValueContainer,a=this.props,o=a.className,l=a.id,u=a.isDisabled,c=a.menuIsOpen,h=this.state.isFocused,d=this.commonProps=this.getCommonProps();return e.createElement(i,Ot({},d,{className:o,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:u,isFocused:h}),this.renderLiveRegion(),e.createElement(n,Ot({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:u,isFocused:h,menuIsOpen:c}),e.createElement(s,Ot({},d,{isDisabled:u}),this.renderPlaceholderOrValue(),this.renderInput()),e.createElement(r,Ot({},d,{isDisabled:u}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,s=t.ariaSelection,a=t.isFocused,o=t.prevWasFocused,l=t.instancePrefix,u=e.options,c=e.value,h=e.menuIsOpen,d=e.inputValue,f=e.isMulti,p=qr(c),g={};if(n&&(c!==n.value||u!==n.options||h!==n.menuIsOpen||d!==n.inputValue)){var m=h?function(e,t){return dl(hl(e,t))}(e,p):[],v=h?fl(hl(e,p),"".concat(l,"-option")):[],_=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,p):null,y=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,m);g={selectValue:p,focusedOption:y,focusedOptionId:gl(v,y),focusableOptionsWithIds:v,focusedValue:_,clearFocusValueOnUpdate:!1}}var b=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},x=s,w=a&&o;return a&&!w&&(x={value:oi(f,p,p[0]||null),options:p,action:"initial-input-focus"},w=!o),"initial-input-focus"===(null===s||void 0===s?void 0:s.action)&&(x=null),H(H(H({},g),b),{},{prevProps:e,ariaSelection:x,prevWasFocused:w})}}]),r}(e.Component);Sl.defaultProps=ul;var Cl=(0,e.forwardRef)(function(t,n){var r=go(t);return e.createElement(Sl,Ot({ref:n},r))});g.default.div.withConfig({displayName:"LayoutStyled__GroupItem",componentId:"sc-jotodi-0"})(["display:flex;flex-flow:column;justify-content:center;align-items:center;height:100px;width:100px;margin-bottom:20px;text-align:center;cursor:pointer;padding:0px 10px 0px 10px;&:hover{background-color:white;}&.selected{background-color:white;}span{font-size:12px;}@media (max-width:1025px){min-width:90px;padding-right:5px;}@media (max-width:1024px){min-width:110px;margin-bottom:0;margin-right:10px;}@media (max-width:42px){min-width:100px;}"]),g.default.img.withConfig({displayName:"LayoutStyled__GroupIcon",componentId:"sc-jotodi-1"})(["width:100%;height:40px;object-fit:contain;margin-bottom:10px;"]);const Dl=g.default.div.withConfig({displayName:"LayoutStyled__TemplatesContainer",componentId:"sc-jotodi-2"})(["display:flex;flex-direction:row;grid-gap:5px;align-items:flex-start;margin-bottom:40px;overflow:hidden;min-height:0;"]),El=g.default.div.withConfig({displayName:"LayoutStyled__Template",componentId:"sc-jotodi-3"})(["padding:10px;cursor:pointer;&:hover{background-color:#f4f4f4;}",""],e=>e.selected&&"\n       background-color: #f4f4f4;\n    "),Al=g.default.div.withConfig({displayName:"LayoutStyled__SelectContainer",componentId:"sc-jotodi-4"})(["margin-bottom:30px;padding-bottom:30px;border-bottom:1px #ccc dotted;position:relative;span{margin-bottom:10px;font-size:16px;display:block;}"]),kl=g.default.div.withConfig({displayName:"LayoutStyled__Center",componentId:"sc-jotodi-5"})(["text-align:center;font-size:18px;padding:30px;"]),Ml=((0,g.default)(St).withConfig({displayName:"LayoutStyled__CustomQuotationConfirmMessage",componentId:"sc-jotodi-6"})(["display:flex;align-items:center;justify-content:center;"]),(0,g.default)(We).withConfig({displayName:"LayoutStyled__ZoomInIcon",componentId:"sc-jotodi-7"})(["position:absolute;left:20px;width:32px;height:32px;z-index:3;"," @media (max-height:550px){top:calc(5%);}"],e=>e.isMobile?"\n\t\ttop: calc(20%);\n\t\t":"top: calc(30%);")),Tl=(0,g.default)(We).withConfig({displayName:"LayoutStyled__ZoomOutIcon",componentId:"sc-jotodi-8"})(["position:absolute;left:20px;width:32px;height:32px;z-index:3;",";@media (max-height:550px){top:calc(5% + 40px);}"],e=>e.isMobile?"\n\t\ttop: calc(20% + 50px);\n\t\t":"top: calc(30% + 50px);"),Il=g.default.span.withConfig({displayName:"LayoutStyled__SupportedFormatsList",componentId:"sc-jotodi-9"})(["font-size:12px;font-weight:700px;font-style:italic;text-align:center;color:#313c46;padding-top:5px;"]),Ol=g.default.div.withConfig({displayName:"LayoutStyled__ZakekeDesignerContainer",componentId:"sc-jotodi-10"})(["border-radius:1%;height:50vh;width:120%;position:relative;display:flex;flex-direction:column;background:rgb(255 255 255 / 57%);border:1px solid #1387efbd;background:linear-gradient(to bottom,rgb(56 177 162 / 0%) 0%,rgb(233 229 229) 100%);",""],e=>e.isMobile&&"position:fixed;\n\t    background: white !important;\n\t\tjustify-content: center;\n\t\talign-items: center;\n        inset:0;\n        z-index:13;\n\t\theight: 94%;\n\t\twidth: 99%;\n    "),Ll=g.default.div.withConfig({displayName:"LayoutStyled__ZakekeDesignerContainer_button",componentId:"sc-jotodi-11"})(["","\t"],e=>e.isMobile&&"position: absolute; \n\t top: 29px;\n\t width: 19%; \n\t height: 12%; \n\t right: 17px;\n\t\n"),Pl=(g.default.div.withConfig({displayName:"LayoutStyled__IconsAndDesignerContainer",componentId:"sc-jotodi-12"})(["position:absolute;left:0;top:calc(50% - 30px);z-index:2;display:flex;flex-direction:column;"]),g.default.span.withConfig({displayName:"LayoutStyled__ItemName",componentId:"sc-jotodi-13"})(["font-size:12px;font-weight:600;"]),g.default.div.withConfig({displayName:"LayoutStyled__SelectorMobileContainer",componentId:"sc-jotodi-14"})(["display:flex;flex-direction:column;justify-content:flex-end;width:100%;position:relative;overflow:auto;"]),g.default.div.withConfig({displayName:"LayoutStyled__StepsMobileContainer",componentId:"sc-jotodi-15"})(["border-top:1px #fff solid;height:45px;"]),g.default.div.withConfig({displayName:"LayoutStyled__MobileItemContainer",componentId:"sc-jotodi-16"})(["color:#297ca3;align-items:center;justify-content:center;min-width:140px;max-width:140px;width:140px;height:140px;min-height:140px;max-height:140px;flex:1;display:flex;flex-direction:column;border-right:2px #fff solid;position:relative;",""],e=>e.selected&&"background-color: rgb(235 227 227);"),g.default.div.withConfig({displayName:"LayoutStyled__StepsContainer",componentId:"sc-jotodi-17"})(["position:relative;padding:0px 20px 20px 20px;@media (max-width:1024px){width:100%;height:50%;flex-direction:column;position:relative;}"]),g.default.img.withConfig({displayName:"LayoutStyled__MenuItemImage",componentId:"sc-jotodi-18"})(["width:47px;height:47px;object-fit:",";margin-bottom:20px;border-radius:",";border:1px solid rgb(239 233 233);"],e=>e.isRound?"cover":"contain",e=>e.isRound?"64px!important":"0"),g.default.div.withConfig({displayName:"LayoutStyled__MenuItemImagesWrapper",componentId:"sc-jotodi-19"})(["display:grid;grid-template-columns:1fr 1fr;position:relative;top:-10px;"]),g.default.div.withConfig({displayName:"LayoutStyled__MenuItemImagesImageWrapper",componentId:"sc-jotodi-20"})(["width:35px;height:35px;&:nth-child(1){border-right:1px #ddd dotted;border-bottom:1px #ddd dotted;}&:nth-child(2){border-bottom:1px #ddd dotted;}&:nth-child(3){border-right:1px #ddd dotted;}"]),g.default.span.withConfig({displayName:"LayoutStyled__MenuItemLabel",componentId:"sc-jotodi-21"})(["font-size:13px;font-weight:400;position:absolute;bottom:2px;left:0;right:0;text-align:center;overflow:hidden;text-overflow:ellipsis;"]),g.default.img.withConfig({displayName:"LayoutStyled__MenuItemImagesImage",componentId:"sc-jotodi-22"})(["width:100%;height:100%;object-fit:cover;padding:3px;border:1px solid rgb(239,233,233);border-radius:",";"],e=>e.isRound?"64px!important":"0"),g.default.div.withConfig({displayName:"LayoutStyled__MenuItemIcon",componentId:"sc-jotodi-23"})(["display:flex;align-items:center;justify-content:center;font-size:40px;margin-bottom:20px;width:64px;height:64px;"]),g.default.div.withConfig({displayName:"LayoutStyled__ExtensionFieldsContainer",componentId:"sc-jotodi-24"})(["margin:0px auto;display:flex;flex-direction:row;"]),g.default.div.withConfig({displayName:"LayoutStyled__ExtensionFieldItem",componentId:"sc-jotodi-25"})(["border-right:1px solid black;padding:0px 5px;text-align:right;"]),g.default.div.withConfig({displayName:"LayoutStyled__QuantityContainer",componentId:"sc-jotodi-26"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;height:70px;background-color:white;padding-left:10px;color:#313c46;grid-gap:10px;"])),Bl=g.default.div.withConfig({displayName:"LayoutStyled__FooterContainer",componentId:"sc-jotodi-27"})(["position:absolute;top:calc(70% - 15px);right:1%;background-color:transparent;display:flex;flex-direction:row;height:70px;padding-top:0px;margin-right:15em;width:26px;padding-right:5em;@media screen and (max-width:568){height:70px;}"]),Nl=g.default.div.withConfig({displayName:"LayoutStyled__FooterRightElementsContainer",componentId:"sc-jotodi-28"})(["background:transparent;display:flex;justify-content:start;width:100%;height:70px;min-height:70px;background-color:transparent;flex-direction:column;grid-gap:10px;align-items:flex-start;padding:0px 0px 0px 0em;font-size:14px;width:14em;@media (max-width:1024px){min-height:70px;}"]),Rl=(g.default.div.withConfig({displayName:"LayoutStyled__PriceContainer",componentId:"sc-jotodi-29"})(["font-size:20px;font-weight:600;color:#313c46;margin-right:20px;",";"],e=>e.isMobile&&"\n    margin-right: 0px;\n    color:rgb(41, 124, 163);"),g.default.div.withConfig({displayName:"LayoutStyled__FooterMobileContainer",componentId:"sc-jotodi-30"})(["position:absolute;bottom:-55px;width:100vw;justify-content:center;height:140px;display:flex;font-size:12px;margin-top:4px;border-top:1px #fff solid;grid-template-areas:'cart';",";"],e=>e.isQuoteEnable&&"\n\t// grid-template-columns: repeat(1, 1fr);\n\t// grid-template-areas: 'back pdf save share cart quote' \n\t")),Fl=(g.default.div.withConfig({displayName:"LayoutStyled__BottomRightIcons",componentId:"sc-jotodi-31"})(["position:absolute;right:10px;bottom:40px;display:flex;flex-direction:row;align-items:center;justify-content:center;z-index:3;gap:20px;@media (max-height:550px){bottom:20px;}"]),(0,g.default)(We).withConfig({displayName:"LayoutStyled__CollapseIcon",componentId:"sc-jotodi-32"})(["width:32px;height:32px;"]),(0,g.default)(We).withConfig({displayName:"LayoutStyled__ExplodeIcon",componentId:"sc-jotodi-33"})(["width:32px;height:32px;"]),(0,g.default)(We).withConfig({displayName:"LayoutStyled__FullscreenIcon",componentId:"sc-jotodi-34"})(["width:32px;height:32px;"]),(0,g.default)(We).withConfig({displayName:"LayoutStyled__SecondScreenIcon",componentId:"sc-jotodi-35"})(["width:32px;height:32px;"]),(0,g.default)(We).withConfig({displayName:"LayoutStyled__RecapPanelIcon",componentId:"sc-jotodi-36"})(["position:absolute;left:20px;bottom:40px;width:32px;height:32px;z-index:3;@media (max-height:550px){bottom:20px;}"]),g.default.div.withConfig({displayName:"LayoutStyled__TopRightIcons",componentId:"sc-jotodi-37"})(["position:absolute;right:10px;top:10px;display:flex;flex-direction:row;align-items:center;justify-content:center;z-index:3;gap:20px;"]),g.default.div.withConfig({displayName:"LayoutStyled__ViewerContainer",componentId:"sc-jotodi-38"})(["position:relative;min-height:0;font-family:'Inter',sans-serif;@media (max-width:1024px){height:100%;}"]),(0,g.default)(Ml).withConfig({displayName:"DesignerSignature__ZoomIconIn",componentId:"sc-133fs7-0"})(["left:0px;"]),(0,g.default)(Tl).withConfig({displayName:"DesignerSignature__ZoomIconOut",componentId:"sc-133fs7-1"})(["left:0px;"]),(0,g.default)(Ke).withConfig({displayName:"DesignerSignature__MoveElementButton",componentId:"sc-133fs7-2"})([""])),zl=g.default.div.withConfig({displayName:"DesignerSignature__DesignerContainer",componentId:"sc-133fs7-3"})(["display:flex;flex-flow:column;user-select:none;width:100%;padding:10px 10px;height:23em;overflow-y:auto;font-family:Inter,sans-serif;border-radius:23px;overflow-x:hidden;",""],e=>e.isMobile&&"\n    height: 15em;\n    overflow-y: auto;\n        // position:fixed;\n        // top:0;\n        // left:0;\n        // width:100%;\n        // height:100%;\n        // z-index:11;\n        // background-color:#ffffff;\n        // overflow-y:scroll;\n    "),jl=(g.default.div.withConfig({displayName:"DesignerSignature__DesignerContainerHeader",componentId:"sc-133fs7-4"})(["display:flex;flex-flow:row;"]),g.default.div.withConfig({displayName:"DesignerSignature__UploadButtons",componentId:"sc-133fs7-5"})(["display:flex;flex-direction:column;grid-gap:5px;margin:7px 0px;"])),Vl=(g.default.div.withConfig({displayName:"DesignerSignature__Area",componentId:"sc-133fs7-6"})(["display:flex;flex-direction:center;justify-content:space-around;align-items:left;height:60px;min-width:34px;width:34%;cursor:pointer;padding:1px 34x;text-align:center;margin:0;margin-bottom:18px;color:black;word-break:break-all;overflow-wrap:break-word;font-weight:300;text-transform:uppercase;letter-spacing:0px;word-spacing:1px;border:1px solid #297CA3;font-size:10px;border-radius:4px;background-color:white;color:#297CA3;&:hover{border:3px solid #297CA3;}",""],e=>e.selected&&"\n\tborder: 4px solid #297CA3;\n    "),(0,g.default)(Vi.Option).withConfig({displayName:"DesignerSignature__OptionContainer",componentId:"sc-133fs7-7"})(["border:1px solid #297ca3;background-color:white !important;display:flex !important;align-items:center !important;justify-content:center !important;span{color:#297ca3;}&:hover{background-color:#ddd !important;}"])),Ul=(0,g.default)(Vi.SingleValue).withConfig({displayName:"DesignerSignature__SingleValueContainer",componentId:"sc-133fs7-8"})(["border:1px solid none;display:flex;align-items:center;justify-content:center;span{color:#297ca3;}"]),Hl=t=>{var n,r,i;let{onCloseClick:s,togglePersonalize:a,selectedAreaID:o}=t;const{showDialog:l,closeDialog:u}=yt(),[c,h]=(0,e.useState)(!1),{setIsLoading:d,isMobile:f}=F(),{currentTemplate:p,items:g,isAreaVisible:v,product:_,templates:y,setTemplate:b,setCamera:x,removeItem:w,setItemText:S,setItemItalic:C,setItemBold:D,setItemColor:E,setItemFontFamily:A,setItemTextOnPath:k,addItemText:M,translations:T,fonts:I,defaultColor:O}=(0,m.useZakeke)(),[L,P]=(0,e.useState)({guid:"",name:"",text:"",fillColor:O,fontFamily:I[0].name,fontSize:48,fontWeight:"normal normal",isTextOnPath:!1,constraints:null,placeholder:"Input your text here",backgroundColor:"rgb(235, 237, 242)"}),B=null===T||void 0===T?void 0:T.dynamics,N=null===T||void 0===T?void 0:T.statics,R=(0,e.useRef)(null),[z,j]=(0,e.useState)(0),V=null!==(n=null===_||void 0===_?void 0:_.areas.filter(e=>v(e.id)))&&void 0!==n?n:[];let U=[];const[G,Y]=(0,e.useState)(!1);let q=y.map(e=>({id:e.id,name:e.name,areas:e.areas})),Z=null===p||void 0===p?void 0:p.id,K=(r=null===p||void 0===p?void 0:p.name,null===p||void 0===p||p.areas,V.map(e=>({id:e.id,name:e.name})));V.length>0&&V.forEach(e=>{let t=p.areas.find(t=>t.id===e.id),n=g.filter(t=>t.areaId===e.id);const r=!n.some(e=>!e.constraints||e.constraints.canMove||e.constraints.canRotate||e.constraints.canResize||e.constraints.canEdit);(!r||!t||null!==t&&void 0!==t&&t.canAddText)&&U.push(e)});const[X,J]=(0,e.useState)(U&&U.length>0?U[0].id:0);let $=p.areas.find(e=>e.id===X),Q=g.filter(e=>e.areaId===X);const ee=!Q.some(e=>!e.constraints||e.constraints.canMove||e.constraints.canRotate||e.constraints.canResize),te=!$||$.canAddText,ne=!$||$.canAddImage&&$.uploadRestrictions.isUserImageAllowed;window.innerWidth;(0,e.useEffect)(()=>{y.length>0&&!p&&b(y[0].id)},[y]),(0,e.useEffect)(()=>{const e=V.filter(e=>e.id===X);e&&e.length>0&&x(e[0].cameraLocationID)},[X]),(0,e.useEffect)(()=>{o&&J(o)},[U]);const re=(e,t,n)=>{switch(t){case"remove":r=e.guid,w(r);break;case"text":S(e.guid,n);break;case"font-italic":C(e.guid,n);break;case"font-bold":D(e.guid,n);break;case"font-color":E(e.guid,n);break;case"font-family":A(e.guid,n);break;case"text-path":k(e.guid,X,n),setTimeout(()=>h(!c),100)}var r};return(0,fe.jsxs)(fe.Fragment,{children:[!G&&(0,fe.jsxs)(zl,{isMobile:f,children:[f&&q.length>1&&(0,fe.jsxs)(Al,{children:[(0,fe.jsx)("span",{children:"Templates"}),(0,fe.jsx)(Cl,{styles:{container:e=>H(H({},e),{},{minWidth:300})},isSearchable:!1,options:q,menuPosition:"fixed",components:{Option:e=>(0,fe.jsx)(Vl,H(H({},e),{},{children:(0,fe.jsx)("span",{children:e.data.name})})),SingleValue:e=>(0,fe.jsx)(Ul,H(H({},e),{},{children:(0,fe.jsx)("span",{children:e.data.name})}))},value:q.find(e=>e.id===Z),onChange:e=>{b(e.id)}})]}),f&&K.length>1&&(0,fe.jsx)(fe.Fragment,{}),0===Q.length&&!(te||ne)&&(0,fe.jsx)(kl,{children:"No customizable items"}),Q.map(e=>0===e.type&&((e,t)=>{if(!e.constraints)return!1;let{canEdit:n,canMove:r,canRotate:i,canResize:s,canDelete:a,canChangeFontColor:o,canChangeFontFamily:l,canChangeFontWeight:u,isPrintable:c}=e.constraints;if(!c)return!1;let h=n||r||i||s||a,d=o||l||u,f=n||t&&(t.uploadRestrictions.isUserImageAllowed||!t.disableSellerImages);return 0===e.type?h||d:h||f})(e,$)?(0,fe.jsx)(oa,{handleItemPropChange:re,item:e},e.guid):null),(te||ne)&&(0,fe.jsx)(jl,{children:(0,fe.jsx)(fe.Fragment,{children:te&&(0,fe.jsxs)(Ke,{isFullWidth:!0,onClick:()=>{var e;const t={guid:"",name:"",text:"".concat(null!==(e=null===B||void 0===B?void 0:B.get("Enter Your Name"))&&void 0!==e?e:"Enter Your Name"),fillColor:O,fontFamily:I[0].name,fontSize:48,fontWeight:"normal normal",isTextOnPath:!1,constraints:null,placeholder:"Input your text here",backgroundColor:"rgb(235, 237, 242)"};M(t,X)},children:[(0,fe.jsx)(We,{children:(0,fe.jsx)(de,{})}),(0,fe.jsxs)("span",{children:[null!==(i=null===N||void 0===N?void 0:N.get("Text"))&&void 0!==i?i:"Text","   "]})]})})}),Q.length>0&&!ee&&(0,fe.jsxs)(Fl,{isFullWidth:!0,isMoveElementButton:!0,outline:!0,onClick:()=>Y(!0),children:[(0,fe.jsx)(We,{children:(0,fe.jsx)(ae,{})}),(0,fe.jsxs)("span",{children:[W._("Move elements","Composer")," "]})]})]}),G&&(0,fe.jsxs)(Ol,{isMobile:f,className:"zakeke-container",children:[(0,fe.jsx)("div",{className:"wrapper",style:{height:"100%"},children:(0,fe.jsx)(m.ZakekeDesigner,{ref:R,areaId:X})}),(0,fe.jsx)(Ll,{isMobile:f,children:(0,fe.jsx)(Ze,{isFullWidth:!0,primary:!0,onClick:()=>Y(!1),children:"Close X"})})]})]})},Gl=((0,g.default)(Ml).withConfig({displayName:"DesignerLogo__ZoomIconIn",componentId:"sc-1ay2nkj-0"})(["left:0px;"]),(0,g.default)(Tl).withConfig({displayName:"DesignerLogo__ZoomIconOut",componentId:"sc-1ay2nkj-1"})(["left:0px;"]),(0,g.default)(Ke).withConfig({displayName:"DesignerLogo__MoveElementButton",componentId:"sc-1ay2nkj-2"})([""])),Yl=g.default.div.withConfig({displayName:"DesignerLogo__DesignerContainer",componentId:"sc-1ay2nkj-3"})(["display:flex;flex-flow:column;user-select:none;width:100%;padding:10px 10px;height:23em;overflow-y:auto;font-family:Inter,sans-serif;border-radius:23px;overflow-x:hidden;",""],e=>e.isMobile&&"   height: 9em !important;\n        // position:fixed;\n        // top:0;\n        // left:0;\n        width:100%;\n        // z-index:11;\n        // background-color:#ffffff;\n        overflow-y:scroll;\n    "),Wl=(g.default.div.withConfig({displayName:"DesignerLogo__DesignerContainerHeader",componentId:"sc-1ay2nkj-4"})(["display:flex;flex-flow:row;"]),g.default.div.withConfig({displayName:"DesignerLogo__UploadButtons",componentId:"sc-1ay2nkj-5"})(["justify-content:center;display:flex;flex-direction:row;grid-gap:5px;margin:20px 0px;"])),ql=(g.default.div.withConfig({displayName:"DesignerLogo__Area",componentId:"sc-1ay2nkj-6"})(["display:flex;flex-direction:center;justify-content:space-around;align-items:left;height:60px;min-width:34px;width:34%;cursor:pointer;padding:1px 34x;text-align:center;margin:0;margin-bottom:18px;color:black;word-break:break-all;overflow-wrap:break-word;font-weight:300;text-transform:uppercase;letter-spacing:0px;word-spacing:1px;border:1px solid #297CA3;font-size:10px;border-radius:4px;background-color:white;color:#297CA3;&:hover{border:3px solid #297CA3;}",""],e=>e.selected&&"\n\tborder: 4px solid #297CA3;\n    "),(0,g.default)(Vi.Option).withConfig({displayName:"DesignerLogo__OptionContainer",componentId:"sc-1ay2nkj-7"})(["border:1px solid #297ca3;background-color:white !important;display:flex !important;align-items:center !important;justify-content:center !important;span{color:#297ca3;}&:hover{background-color:#ddd !important;}"]),(0,g.default)(Vi.SingleValue).withConfig({displayName:"DesignerLogo__SingleValueContainer",componentId:"sc-1ay2nkj-8"})(["border:1px solid none;display:flex;align-items:center;justify-content:center;span{color:#297ca3;}"]),g.default.div.withConfig({displayName:"DesignerLogo__CopyrightMessage",componentId:"sc-1ay2nkj-9"})(["display:flex;flex-direction:column;"]),g.default.div.withConfig({displayName:"DesignerLogo__CopyrightMandatoryMessageContainer",componentId:"sc-1ay2nkj-10"})(["display:grid;grid-template-columns:20px auto;grid-gap:5px;"]),g.default.input.withConfig({displayName:"DesignerLogo__CopyrightCheckbox",componentId:"sc-1ay2nkj-11"})(["width:13px;"]),g.default.div.withConfig({displayName:"DesignerLogo__CopyrightMandatoryMessage",componentId:"sc-1ay2nkj-12"})([""]),t=>{var n,r;let{onCloseClick:i,togglePersonalize:s,selectedAreaID:a}=t;const{showDialog:o,closeDialog:l}=yt(),[u,c]=(0,e.useState)(!1),{setIsLoading:h,isMobile:d}=F(),[f,p]=(0,e.useState)(!1),{currentTemplate:g,items:v,isAreaVisible:_,product:y,templates:b,setTemplate:x,setCamera:w,removeItem:S,setItemImageFromFile:C,setItemImage:D,setItemText:E,setItemItalic:A,setItemBold:k,setItemColor:M,setItemFontFamily:T,setItemTextOnPath:I,addItemText:O,addItemImage:L,createImage:P,getTemplateUploadRestrictictions:B,eventMessages:N,setCopyrightMessageAccepted:R,getCopyrightMessageAccepted:z,translations:j,fonts:V,defaultColor:U}=(0,m.useZakeke)(),[H,G]=(0,e.useState)({guid:"",name:"",text:"",fillColor:U,fontFamily:V[0].name,fontSize:48,fontWeight:"normal normal",isTextOnPath:!1,constraints:null,placeholder:"Input your text here",backgroundColor:"rgb(235, 237, 242)"}),Y=(null===j||void 0===j||j.dynamics,(0,e.useRef)(null)),[q,Z]=(0,e.useState)(0),K=null!==(n=null===y||void 0===y?void 0:y.areas.filter(e=>_(e.id)))&&void 0!==n?n:[];let X=[];const[J,$]=(0,e.useState)(!1);b.map(e=>({id:e.id,name:e.name,areas:e.areas})),null===g||void 0===g||g.id,r=null===g||void 0===g?void 0:g.name,null===g||void 0===g||g.areas,K.map(e=>({id:e.id,name:e.name}));K.length>0&&K.forEach(e=>{let t=g.areas.find(t=>t.id===e.id),n=v.filter(t=>t.areaId===e.id);const r=!n.some(e=>!e.constraints||e.constraints.canMove||e.constraints.canRotate||e.constraints.canResize||e.constraints.canEdit);(!r||!t||null!==t&&void 0!==t&&t.canAddImage)&&X.push(e)});const[Q,ee]=(0,e.useState)(X&&X.length>0?X[0].id:0);let te=g.areas.find(e=>e.id===Q),ne=v.filter(e=>e.areaId===Q);const re=!ne.some(e=>!e.constraints||e.constraints.canMove||e.constraints.canRotate||e.constraints.canResize),ie=!te||te.canAddImage&&te.uploadRestrictions.isUserImageAllowed,se=!te||te.canAddImage&&!te.disableSellerImages,oe=he(g.id,Q).join(", "),[le,ue]=(0,e.useState)(z()),ce=N&&N.find(e=>8===e.eventID);window.innerWidth;function he(e,t){const n=B(e,t),r=[];return n.isJpgAllowed&&r.push(".jpg",".jpeg"),n.isPngAllowed&&r.push(".png"),n.isSvgAllowed&&r.push(".svg"),n.isEpsAllowed&&r.push(".eps"),n.isPdfAllowed&&r.push(".pdf"),r}(0,e.useEffect)(()=>{b.length>0&&!g&&x(b[0].id)},[b]),(0,e.useEffect)(()=>{const e=K.filter(e=>e.id===Q);e&&e.length>0&&w(e[0].cameraLocationID)},[Q]),(0,e.useEffect)(()=>{a&&ee(a)},[X]);const de=(e,t)=>{if(!e.constraints)return!1;let{canEdit:n,canMove:r,canRotate:i,canResize:s,canDelete:a,isPrintable:o}=e.constraints;if(!o)return!1;let l=n||r||i||s||a,u=n||t&&(t.uploadRestrictions.isUserImageAllowed||!t.disableSellerImages);return 0===e.type?l:l||u},pe=(e,t,n)=>{switch(t){case"remove":r=e.guid,S(r);break;case"image-upload":(async(e,t)=>{try{h(!0),await C(e.guid,t)}catch(n){console.error(n)}finally{h(!1)}})(e,n);break;case"image-gallery":(async e=>{o("add-image",(0,fe.jsx)(qa,{onClose:()=>l("add-image"),onImageSelected:async t=>{l("add-image");try{h(!0),await D(e.guid,t.imageID)}catch(n){console.error(n)}finally{h(!1)}}}))})(e);break;case"text":E(e.guid,n);break;case"font-italic":A(e.guid,n);break;case"font-bold":k(e.guid,n);break;case"font-color":M(e.guid,n);break;case"font-family":T(e.guid,n);break;case"text-path":I(e.guid,Q,n),setTimeout(()=>c(!u),100)}var r};return(0,fe.jsxs)(fe.Fragment,{children:[!J&&(0,fe.jsxs)(Yl,{isMobile:d,children:[b.length>1&&(0,fe.jsx)(Dl,{children:b.map(e=>(0,fe.jsx)(El,{selected:g===e,onClick:()=>{x(e.id)},children:e.name},e.id))}),0===ne.length&&!(ie||se)&&(0,fe.jsx)(kl,{children:"No customizable items"}),ne.map(e=>0===e.type&&de(e,te)?(0,fe.jsx)(oa,{handleItemPropChange:pe,item:e},e.guid):1===e.type&&de(e,te)?(0,fe.jsx)(eo,{uploadImgDisabled:!(!ce||!ce.additionalData.enabled)&&!le,handleItemPropChange:pe,item:e,currentTemplateArea:te},e.guid):null),(ie||se)&&(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)(Wl,{children:[se&&(0,fe.jsx)(Ke,{isFullWidth:!0,onClick:async()=>{o("add-image",(0,fe.jsx)(qa,{onClose:()=>l("add-image"),onImageSelected:e=>{L(e.imageID,Q),l("add-image")}}))},children:(0,fe.jsx)("span",{children:W._("Logo","Composer")})}),ie&&(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)(Ke,{disabled:!(!ce||!ce.additionalData.enabled)&&!le,isFullWidth:!0,onClick:()=>(async(e,t)=>{if(g&&Q){const n=he(g.id,Q);let r=document.createElement("input");r.setAttribute("accept",n.join(",")),r.setAttribute("type","file"),r.addEventListener("change",async n=>{const i=n.currentTarget.files;if(i&&i.length>0&&Q){h(!0);try{const n=await t(i[0],e=>console.log(e));e(n.imageID,Q),r.remove()}catch(s){console.error(s),o("error",(0,fe.jsx)(ca,{error:"Failed uploading image.",onCloseClick:()=>l("error")}))}finally{h(!1)}}}),document.body.appendChild(r),r.click()}})(L,P),children:(0,fe.jsxs)("span",{children:[" ",(0,fe.jsxs)("span",{style:{wordBreak:"break-all"},children:[ne.some(e=>1===e.type&&de(e,te))?W._("Upload another image","Composer"):W._("Image","Composer")," "]})]})})})]}),(0,fe.jsx)(Il,{children:W._("Supported file formats:","Composer")+" "+oe})]}),ne.length>0&&!re&&(0,fe.jsxs)(Gl,{isFullWidth:!0,outline:!0,isMoveElementButton:!0,onClick:()=>$(!0),children:[(0,fe.jsx)(We,{children:(0,fe.jsx)(ae,{})}),(0,fe.jsxs)("span",{children:[W._("Move elements","Composer")," "]})]})]}),J&&(0,fe.jsxs)(Ol,{isMobile:d,className:"zakeke-container",children:[(0,fe.jsx)(m.ZakekeDesigner,{ref:Y,areaId:Q}),(0,fe.jsx)("div",{style:{position:"relative",top:"26px"},children:(0,fe.jsx)(Ze,{isFullWidth:!0,primary:!0,onClick:()=>$(!1),children:(0,fe.jsxs)("span",{children:["OK"," "]})})})]})]})});var Zl=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],Kl=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),r=String(t.getOptionValue(e)).toLowerCase(),i=String(t.getOptionLabel(e)).toLowerCase();return r===n||i===n},Xl={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some(function(t){return Kl(e,t,r)})||n.some(function(t){return Kl(e,t,r)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};var Jl,$l,Ql,eu,tu,nu,ru=(0,e.forwardRef)(function(t,n){var r=function(t){var n=t.allowCreateWhileLoading,r=void 0!==n&&n,i=t.createOptionPosition,s=void 0===i?"last":i,a=t.formatCreateLabel,o=void 0===a?Xl.formatCreateLabel:a,l=t.isValidNewOption,u=void 0===l?Xl.isValidNewOption:l,c=t.getNewOptionData,h=void 0===c?Xl.getNewOptionData:c,d=t.onCreateOption,f=t.options,p=void 0===f?[]:f,g=t.onChange,m=Qe(t,Zl),v=m.getOptionValue,_=void 0===v?sl:v,y=m.getOptionLabel,b=void 0===y?il:y,x=m.inputValue,w=m.isLoading,S=m.isMulti,C=m.value,D=m.name,E=(0,e.useMemo)(function(){return u(x,qr(C),p,{getOptionValue:_,getOptionLabel:b})?h(x,o(x)):void 0},[o,h,b,_,x,u,p,C]),A=(0,e.useMemo)(function(){return!r&&w||!E?p:"first"===s?[E].concat(xo(p)):[].concat(xo(p),[E])},[r,s,w,E,p]),k=(0,e.useCallback)(function(e,t){if("select-option"!==t.action)return g(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==E)g(e,t);else if(d)d(x);else{var r=h(x,x),i={action:"create-option",name:D,option:r};g(oi(S,[].concat(xo(qr(C)),[r]),r),i)}},[h,x,S,D,E,d,g,C]);return H(H({},m),{},{options:A,onChange:k})}(go(t));return e.createElement(Sl,Ot({ref:n},r))}),iu=ru;const su=(0,g.default)(St)(Jl||(Jl=i(["\n    flex-basis: 450px;\n"]))),au=(0,g.default)(Da)($l||($l=i(["\n    margin: auto;\n    display: block;\n    width: 48px;\n    height: 48px;\n"]))),ou=g.default.img(Ql||(Ql=i(["\n    max-height: 165px;\n    max-width: 100%;\n    margin: 18px auto 10px auto !important;\n    background-color: #f2f2f2;\n"]))),lu=g.default.div(eu||(eu=i(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    text-align: left;\n    grid-gap: 8px;\n"]))),uu=g.default.span(tu||(tu=i(["\n    width: 100%;  \n"]))),cu=g.default.input(nu||(nu=i(["\n    width:100%;   \n    height: 40px;\n    margin-bottom: 15px;\n    border: 1px solid lightgray; \n"]))),hu=t=>{let{onCloseClick:n}=t;const{getOnlineScreenshot:r,saveDraftsComposition:i,currentCompositionInfo:s}=(0,m.useZakeke)(),{setIsLoading:a,isLoading:o}=F(),[l,u]=(0,e.useState)(""),[c,h]=(0,e.useState)(""),[d,f]=(0,e.useState)();(0,e.useEffect)(()=>{r(1024,1024,!1,"#FFFFFF").then(async e=>{let{rewrittenUrl:t}=e;u(t)})},[]),(0,e.useEffect)(()=>{var e;if(s&&(h(null!==(e=s.compositionName)&&void 0!==e?e:""),s.compositionTags&&s.compositionTags.length>0)){let e=[];s.compositionTags.forEach(t=>{if(t)return e.push({value:t,label:t})}),e&&e.length>0&&f(e)}},[s]);const p=async e=>{n(),a(!0);let t=[];d&&d.forEach(e=>t.push(e.value)),await i(c,t,e),a(!1)};return(0,fe.jsxs)(kt,{marginButtons:5,windowDecorator:su,buttons:[{label:W._("Save","Composer"),onClick:()=>p(),isSaveButton:!0},{label:W._("Save as Copy","Composer"),onClick:()=>p(!0),isSaveButton:!0}],children:[o&&(0,fe.jsx)(au,{color:"#000000",height:48,width:48}),(0,fe.jsx)(lu,{children:!o&&(0,fe.jsxs)(fe.Fragment,{children:[""===l&&(0,fe.jsx)(au,{color:"#000000",height:48,width:48}),""!==l&&(0,fe.jsx)(ou,{src:l}),(0,fe.jsx)(uu,{children:W._("Name","Composer")+" *"}),(0,fe.jsx)(cu,{defaultValue:c,onChange:e=>h(e.currentTarget.value)}),(0,fe.jsx)(uu,{children:W._("Tags","Composer")}),(0,fe.jsx)(iu,{id:"tags-input",isMulti:!0,value:d,styles:{container:e=>H(H({},e),{},{height:"fit-content",width:"100%"}),control:e=>H(H({},e),{},{height:"fit-content",width:"100%",borderRadius:"0px"})},menuPosition:"fixed",placeholder:W._("Insert tags","Composer"),noOptionsMessage:()=>W._("No tags found","Composer"),options:d&&d.map(e=>({label:e.label,value:e.value})),onChange:e=>{f(e)},formatCreateLabel:e=>"Create new... ".concat(e),components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null}})]})})]})};var du,fu,pu;const gu=["title","titleId"];function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mu.apply(null,arguments)}function vu(t,n){let{title:r,titleId:i}=t,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,gu);return e.createElement("svg",mu({width:"800px",height:"800px",viewBox:"-3 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},s),r?e.createElement("title",{id:i},r):null,du||(du=e.createElement("g",{id:"icomoon-ignore"})),fu||(fu=e.createElement("path",{d:"M13.114 2.887c-7.243 0-13.114 5.871-13.114 13.113s5.871 13.113 13.114 13.113c7.242 0 13.112-5.871 13.112-13.113s-5.87-13.113-13.112-13.113zM13.114 28.064c-6.653 0-12.065-5.412-12.065-12.064s5.412-12.063 12.065-12.063c6.652 0 12.063 5.412 12.063 12.063s-5.411 12.064-12.063 12.064z",fill:"#000000"})),pu||(pu=e.createElement("path",{d:"M12.318 10.363l-0.742-0.742-6.379 6.379 6.379 6.379 0.742-0.742-5.113-5.113h12.726v-1.049h-12.726z",fill:"#000000"})))}const _u=e.forwardRef(vu);n.p;var yu,bu;g.default.div(yu||(yu=i(["\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content:center;    \n  text-align:center;\n  background-color: white;\n  color:#465664;\n  font-size:18px;\n  padding:30px;\n  line-height:1.6;\n"]))),g.default.div(bu||(bu=i(["\n  display:flex;\n  flex-direction:column;\n  padding-bottom:30px;  \n  font-weight:500px;\n  "])));const xu=g.default.div.withConfig({displayName:"LoadingOverlay__LoadingBackground",componentId:"sc-1b9dtgi-0"})(["left:0;top:0;width:100%;height:100%;position:fixed;display:flex;align-items:center;justify-content:center;z-index:12;"]),wu=g.default.div.withConfig({displayName:"LoadingOverlay__LoadingContainer",componentId:"sc-1b9dtgi-1"})(["width:68px;height:68px;background-color:white;border-radius:5px;padding:10px;"]),Su=()=>(0,fe.jsx)(xu,{children:(0,fe.jsx)(wu,{children:(0,fe.jsx)(Da,{color:"#000000",height:48,width:48})})}),Cu=(g.default.div.withConfig({displayName:"Footer__PriceInfoTextContainer",componentId:"sc-6r4vv5-0"})(["font-size:14px;"]),(0,g.default)($e).withConfig({displayName:"Footer__OutOfStockTooltipContent",componentId:"sc-6r4vv5-1"})(["max-width:400px;"]),()=>{var t;const n=(0,e.useRef)(null),[r,i]=(0,e.useState)(!1),{useLegacyScreenshot:s,setCameraByName:a,getPDF:o,addToCart:l,isAddToCartLoading:u,sellerSettings:c,product:h,price:d,quantity:f,setQuantity:p,eventMessages:g,saveComposition:v,createQuote:_,nftSettings:y,translations:b,groups:x}=(0,m.useZakeke)(),w=null===b||void 0===b?void 0:b.dynamics,{setIsLoading:S,priceFormatter:C,isQuoteLoading:D,setIsQuoteLoading:E,isViewerMode:A,isDraftEditor:k,isEditorMode:M}=F(),{showDialog:T,closeDialog:I}=yt(),O=e=>{T("error",(0,fe.jsx)(ca,{error:e,onCloseClick:()=>I("error")}))},L=!1,P=(null===h||void 0===h||!h.quoteRule||h.quoteRule.allowAddToCart,u);return(0,fe.jsx)(Bl,{children:(0,fe.jsxs)(fe.Fragment,{children:[r&&(0,fe.jsx)(Su,{}),h&&h.quantityRule&&(0,fe.jsx)(Pl,{children:(0,fe.jsx)("label",{children:W._d("Quantity")})}),(0,fe.jsxs)(Nl,{className:"right-footer",children:[(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)("div",{className:"menu_footer",style:{position:"relative",bottom:"5px",display:"flex",justifyContent:"space-between",width:"100%"},children:(0,fe.jsxs)("div",{className:"menu_price",children:[(0,fe.jsxs)("div",{children:[null!==(t=null===w||void 0===w?void 0:w.get("Base"))&&void 0!==t?t:"Base"," :"]})," ",(0,fe.jsx)("div",{className:"price_value",children:C.format(d)})]})})}),!k&&!M&&!A&&c&&c.canSaveDraftComposition&&(0,fe.jsx)(Ze,{onClick:()=>(async()=>{T("save",(0,fe.jsx)(hu,{onCloseClick:()=>I("save")}))})(),children:(0,fe.jsx)(We,{children:(0,fe.jsx)(_u,{})})},"save"),(0,fe.jsxs)(Je,{ref:n,disabled:P,primary:!0,onClick:()=>(()=>{var e,t;const n=null===g||void 0===g?void 0:g.find(e=>4===e.eventID),r=null===b||void 0===b?void 0:b.statics,i=x.findIndex(e=>"marime"===e.name.toLowerCase()),a=!0===(null===(e=x[i])||void 0===e?void 0:e.attributes[0].options[0].selected),o=null===b||void 0===b?void 0:b.dynamics;!n||!n.visible||k||M||a?a?O("SELECTEAZA MARIME"):l([],void 0,s):T("question",(0,fe.jsx)(It,{alignButtons:"center",eventMessage:null===n||void 0===n?void 0:n.description,buttonNoLabel:null!==(t=null===o||void 0===o?void 0:o.get("Cancel"))&&void 0!==t?t:"Cancel",buttonYesLabel:null===r||void 0===r?void 0:r.get("Add to cart"),onYesClick:()=>{l([],void 0,s),I("question")}}))})(),children:[u&&(0,fe.jsx)(Da,{color:"#FFFFFF",height:"25px"}),!u&&(0,fe.jsx)("span",{children:k||M?W._("Save","Composer"):W._("Add to cart","Composer")}),!u&&L]})]})]})})});var Du,Eu,Au;const ku=g.default.div(Du||(Du=i(["\n    display:flex;\n    flex-direction:row;\n    justify-content:center;\n    align-items:center;\n    margin-left:5px;\n    border:1px solid #f4f4f4;\n    input{\n        width:50px;\n        border:1px solid transparent;\n    }\n    padding:5px 10px 5px 10px;\n"]))),Mu=g.default.div(Eu||(Eu=i(["\n    display:flex;\n    flex-direction:column;\n    div{\n        width: 15px;\n        height: 15px;\n        color:gray;\n    }\n"]))),Tu=g.default.input(Au||(Au=i(["\n"]))),Iu=e=>{let t,{value:n,readOnly:r,onInput:i,min:s,max:a,step:o}=e;return(0,fe.jsxs)(ku,{children:[(0,fe.jsx)(Tu,{value:n,readOnly:r,onInput:()=>i,min:s,max:a,step:o,ref:e=>t=e||null}),(0,fe.jsxs)(Mu,{children:[(0,fe.jsx)(We,{hoverable:!0,onClick:()=>{if(!t)return;let e=parseFloat(t.value||t.min||"0"),n=parseFloat(t.step||"1");t.value=(e+n).toString(),t.max&&parseFloat(t.value)>parseFloat(t.max)&&(t.value=t.max);const r=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value").set,i=new Event("input",{bubbles:!0});r.call(t,t.value),t.dispatchEvent(i)},children:(0,fe.jsx)(te,{})}),(0,fe.jsx)(We,{hoverable:!0,onClick:()=>{if(!t)return;let e=parseFloat(t.value||t.min||"0"),n=parseFloat(t.step||"1");t.value=(e-n).toString(),t.min&&parseFloat(t.value)<parseFloat(t.min)&&(t.value=t.min),Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value").set.call(t,t.value);var r=new Event("input",{bubbles:!0});t.dispatchEvent(r)},children:(0,fe.jsx)(te,{})})]})]})};var Ou;const Lu=(0,g.default)(St)(Ou||(Ou=i(["\n\tmax-width: unset;\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),Pu=e=>{let{quantityRule:t,onClick:n}=e;const{quantity:r,setQuantity:i,translations:s}=(0,m.useZakeke)(),a=null===s||void 0===s?void 0:s.statics;return(0,fe.jsxs)(kt,{windowDecorator:Lu,alignButtons:"center",children:[(0,fe.jsxs)(Pl,{children:[(0,fe.jsx)("label",{children:W._d("Quantity")}),(0,fe.jsx)(Iu,{value:r,readOnly:!0,onInput:e=>i(parseFloat(e.currentTarget.value)),min:null!=t.minQuantity?Math.max(t.step||1,t.minQuantity):t.step||1,max:null!=t.maxQuantity?t.maxQuantity:void 0,step:null!=t.step?t.step:void 0})]}),(0,fe.jsx)(Dt,{isFullWidth:!0,onClick:n,children:null===a||void 0===a?void 0:a.get("Add to cart")})]})};var Bu,Nu;(0,g.default)($e)(Bu||(Bu=i(["\n\tmax-width: 400px;\n"])));const Ru=g.default.div(Nu||(Nu=i(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tborder: 1px transparent solid;\n\tpadding: 10px;\n    border-radius: 6px;\n\t//color: ",";\n\tbackground-color: rgb(234 229 229 / 50%);\n\t// background-color: ",";\n\t// background-color: transparent;\n\tfont-size: 14px;\n\ttext-transform: uppercase;\n\ttext-align: center;\n\tdisplay: inline-flex;\n\tmin-height: 55px;\n\tborder: none;\n\t// border-right: 3px #f4f4f4 solid;\n\tcursor: pointer;\n\n\tsvg {\n\t\tfill: ",";\n\t\twidth: 27px;\n\t\theight: 27px;\n\t}\n\n\t",";\n\n\t",";\n\n\t","\n\t",";\n"])),e=>e.color?e.color:"#313c46",e=>e.backgroundColor?e.backgroundColor:"transparent",e=>e.iconColor&&"".concat(e.iconColor),e=>e.isHidden&&"visibility:hidden",e=>e.isCart&&"\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;",e=>e.disabled&&"\n      background-color: lightgray;\n      border: 1px solid gray;\n      color: #313c46;\n  ",e=>e.gridArea&&"grid-area:".concat(e.gridArea)),Fu=()=>{var t;const n=(0,e.useRef)(null),[r,i]=(0,e.useState)(!1),{useLegacyScreenshot:s,setCameraByName:a,getPDF:o,addToCart:l,product:u,price:c,groups:h,isSceneLoading:d,eventMessages:f,isAddToCartLoading:p,sellerSettings:g,saveComposition:v,createQuote:_,nftSettings:y,translations:b}=(0,m.useZakeke)(),{setIsLoading:x,selectedGroupId:w,setSelectedGroupId:S,selectedAttributeId:C,setSelectedTemplateGroupId:D,selectedTemplateGroupId:E,selectedStepId:A,setSelectedAttributeId:k,priceFormatter:M,setIsQuoteLoading:T,isQuoteLoading:I,isViewerMode:O,isDraftEditor:L,isEditorMode:P,isMobile:B}=F(),N=null===b||void 0===b?void 0:b.dynamics,{showDialog:R,closeDialog:z}=yt(),j=(null===u||void 0===u||!u.quoteRule||u.quoteRule.allowAddToCart,p),V=e=>{R("error",(0,fe.jsx)(ca,{error:"Additional $50",onCloseClick:()=>z("error")}))};return(0,fe.jsxs)(fe.Fragment,{children:[r&&(0,fe.jsx)(Su,{}),!d&&(0,fe.jsx)(Rl,{isQuoteEnable:null!==(null===u||void 0===u?void 0:u.quoteRule),children:(0,fe.jsxs)(Ru,{gridArea:"cart",isCart:!0,iconColor:"white",ref:n,disabled:j,onClick:j?()=>null:()=>(()=>{var e,t;const n=null===f||void 0===f?void 0:f.find(e=>4===e.eventID),r=h.findIndex(e=>"marime"===e.name.toLowerCase()),i=!0===(null===(e=h[r])||void 0===e?void 0:e.attributes[0].options[0].selected);!n||!n.visible||L||P||i?u&&u.quantityRule?R("quantity",(0,fe.jsx)(Pu,{quantityRule:u.quantityRule,onClick:()=>{z("quantity"),l([],void 0,s)}})):i?V("SELECTEAZA MARIME"):l([],void 0,s):R("question",(0,fe.jsx)(It,{alignButtons:"center",eventMessage:null===n||void 0===n?void 0:n.description,buttonNoLabel:null!==(t=null===N||void 0===N?void 0:N.get("Cancel"))&&void 0!==t?t:"Cancel",buttonYesLabel:W._("Add to cart","Composer"),onYesClick:()=>{l([],void 0,s),z("question")}}))})(),children:[(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)("div",{className:"menu_footer",style:{position:"relative",bottom:"5px",display:"flex",justifyContent:"space-between",width:"100%"},children:(0,fe.jsxs)("div",{className:"menu_price",children:[(0,fe.jsxs)("div",{children:[null!==(t=null===N||void 0===N?void 0:N.get("Base"))&&void 0!==t?t:"Base"," :"]}),(0,fe.jsx)("div",{className:"price_value",children:M.format(c)})]})})}),(0,fe.jsx)(Je,{children:(0,fe.jsx)("span",{style:{color:"white"},children:L||P?W._("Save","Composer"):W._("Add to cart","Composer")})})]})})]})},zu=e=>{var t,n,r,i,s;let{productCode:a,updateActiveColorOption:o,activeColorOption:l,selectedGroupName:u,currentAttributes:c,fitlerAttributesName:h}=e;const{translations:d}=(0,m.useZakeke)(),f=(null===d||void 0===d||d.statics,null===d||void 0===d?void 0:d.dynamics);return(0,fe.jsx)("div",{style:{width:"100%"},children:(0,fe.jsxs)("div",{className:"colsgrid",children:[(0,fe.jsx)("div",{"data-sel":"plain",className:"plain"!==l&&"Plain"!==l&&"PLAIN"!==l||"METALLIC"!==(null===h||void 0===h?void 0:h.toUpperCase())&&"FLUORESCENT"!==(null===h||void 0===h?void 0:h.toUpperCase())&&"NORMAL"!==(null===h||void 0===h?void 0:h.toUpperCase())&&"PLAIN"!==(null===h||void 0===h?void 0:h.toUpperCase())&&"MATTE"!==(null===h||void 0===h?void 0:h.toUpperCase())?"":"active",onClick:()=>o("plain"),children:1===c.length?c[0].name:null!==(t=null===f||void 0===f?void 0:f.get("PLAIN"))&&void 0!==t?t:"Plain"}),"9266890211653"!=a&&"9355839471941"!=a&&(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)("div",{"data-sel":"metallic",className:"metallic"!==l||"METALLIC"!==h.toUpperCase()&&"FLUORESCENT"!==h.toUpperCase()&&"NORMAL"!==h.toUpperCase()&&"MATTE"!==h.toUpperCase()?"":"active",onClick:()=>o("metallic"),children:null!==(n=null===f||void 0===f?void 0:f.get("METALLIC"))&&void 0!==n?n:"Metallic"}),(0,fe.jsx)("div",{"data-sel":"matte",className:"matte"!==l||"METALLIC"!==h.toUpperCase()&&"FLUORESCENT"!==h.toUpperCase()&&"NORMAL"!==h.toUpperCase()&&"MATTE"!==h.toUpperCase()?"":"active",onClick:()=>o("matte"),children:null!==(r=null===f||void 0===f?void 0:f.get("MATTE"))&&void 0!==r?r:"Matte"}),(0,fe.jsx)("div",{"data-sel":"fluorescent",className:"fluorescent"!==l||"METALLIC"!==h.toUpperCase()&&"FLUORESCENT"!==h.toUpperCase()&&"NORMAL"!==h.toUpperCase()&&"MATTE"!==h.toUpperCase()?"":"active",onClick:()=>o("fluorescent"),children:null!==(i=null===f||void 0===f?void 0:f.get("FLUORESCENT"))&&void 0!==i?i:"Fluorescent"})]}),"9266869076293"===a&&("PALM BACK"===(null===u||void 0===u?void 0:u.name.toUpperCase())||"WRIST BACK"===(null===u||void 0===u?void 0:u.name)||"STRAP"===(null===u||void 0===u?void 0:u.name)||"THUMB IN"===(null===u||void 0===u?void 0:u.name)||"PALM"===(null===u||void 0===u?void 0:u.name)||"PALMA INTERIOR"===(null===u||void 0===u?void 0:u.name))&&(0,fe.jsx)("div",{"data-sel":"knockX",className:"knockX"===l||"METALLIC"!==h&&"FLUORESCENT"!==h&&"NORMAL"!==h&&"MAT"!==h?"active":"",onClick:()=>o("knockX"),children:null!==(s=null===f||void 0===f?void 0:f.get("KNOCK-X"))&&void 0!==s?s:"Knock-X"})]})})};function ju(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function Vu(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach(n=>{"undefined"===typeof e[n]?e[n]=t[n]:ju(t[n])&&ju(e[n])&&Object.keys(t[n]).length>0&&Vu(e[n],t[n])})}const Uu={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Hu(){const e="undefined"!==typeof document?document:{};return Vu(e,Uu),e}const Gu={document:Uu,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function Yu(){const e="undefined"!==typeof window?window:{};return Vu(e,Gu),e}function Wu(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function qu(){return Date.now()}function Zu(e,t){void 0===t&&(t="x");const n=Yu();let r,i,s;const a=function(e){const t=Yu();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(e=>e.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix("none"===i?"":i)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?s.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?s.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}function Ku(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Xu(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Ju(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(void 0!==r&&null!==r&&!Xu(r)){const n=Object.keys(Object(r)).filter(e=>t.indexOf(e)<0);for(let t=0,i=n.length;t<i;t+=1){const i=n[t],s=Object.getOwnPropertyDescriptor(r,i);void 0!==s&&s.enumerable&&(Ku(e[i])&&Ku(r[i])?r[i].__swiper__?e[i]=r[i]:Ju(e[i],r[i]):!Ku(e[i])&&Ku(r[i])?(e[i]={},r[i].__swiper__?e[i]=r[i]:Ju(e[i],r[i])):e[i]=r[i])}}}return e}function $u(e,t,n){e.style.setProperty(t,n)}function Qu(e){let{swiper:t,targetPosition:n,side:r}=e;const i=Yu(),s=-t.translate;let a,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const u=n>s?"next":"prev",c=(e,t)=>"next"===u&&e>=t||"prev"===u&&e<=t,h=()=>{a=(new Date).getTime(),null===o&&(o=a);const e=Math.max(Math.min((a-o)/l,1),0),u=.5-Math.cos(e*Math.PI)/2;let d=s+u*(n-s);if(c(d,n)&&(d=n),t.wrapperEl.scrollTo({[r]:d}),c(d,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:d})}),void i.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=i.requestAnimationFrame(h)};h()}function ec(e,t){return void 0===t&&(t=""),[...e.children].filter(e=>e.matches(t))}function tc(e,t){return Yu().getComputedStyle(e,null).getPropertyValue(t)}function nc(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function rc(e,t,n){const r=Yu();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}let ic,sc,ac;function oc(){return ic||(ic=function(){const e=Yu(),t=Hu();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),ic}function lc(e){return void 0===e&&(e={}),sc||(sc=function(e){let{userAgent:t}=void 0===e?{}:e;const n=oc(),r=Yu(),i=r.navigator.platform,s=t||r.navigator.userAgent,a={ios:!1,android:!1},o=r.screen.width,l=r.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let c=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===i;let p="MacIntel"===i;return!c&&p&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(o,"x").concat(l))>=0&&(c=s.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),u&&!f&&(a.os="android",a.android=!0),(c||d||h)&&(a.os="ios",a.ios=!0),a}(e)),sc}function uc(){return ac||(ac=function(){const e=Yu();let t=!1;function n(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(n()){const n=String(e.navigator.userAgent);if(n.includes("Version/")){const[e,r]=n.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));t=e<16||16===e&&r<2}}return{isSafari:t||n(),needPerspectiveFix:t,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),ac}var cc={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach(e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)}),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function i(){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];t.apply(r,s)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach(e=>{"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)})}),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,r;for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];"string"===typeof s[0]||Array.isArray(s[0])?(t=s[0],n=s.slice(1,s.length),r=e):(t=s[0].events,n=s[0].data,r=s[0].context||e),n.unshift(r);return(Array.isArray(t)?t:t.split(" ")).forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(r,[t,...n])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(r,n)})}),e}};const hc=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":".".concat(e.params.slideClass));if(n){let t=n.querySelector(".".concat(e.params.lazyPreloaderClass));!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)):requestAnimationFrame(()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(".".concat(e.params.lazyPreloaderClass)),t&&t.remove())})),t&&t.remove()}},dc=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},fc=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const r="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),i=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=i,s=[n-t];return s.push(...Array.from({length:t}).map((e,t)=>n+r+t)),void e.slides.forEach((t,n)=>{s.includes(t.column)&&dc(e,n)})}const s=i+r-1;if(e.params.rewind||e.params.loop)for(let a=i-t;a<=s+t;a+=1){const t=(a%n+n)%n;(t<i||t>s)&&dc(e,t)}else for(let a=Math.max(i-t,0);a<=Math.min(s+t,n-1);a+=1)a!==i&&(a>s||a<i)&&dc(e,a)};var pc={updateSize:function(){const e=this;let t,n;const r=e.el;t="undefined"!==typeof e.params.width&&null!==e.params.width?e.params.width:r.clientWidth,n="undefined"!==typeof e.params.height&&null!==e.params.height?e.params.height:r.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(tc(r,"padding-left")||0,10)-parseInt(tc(r,"padding-right")||0,10),n=n-parseInt(tc(r,"padding-top")||0,10)-parseInt(tc(r,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const r=e.params,{wrapperEl:i,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=e,u=e.virtual&&r.virtual.enabled,c=u?e.virtual.slides.length:e.slides.length,h=ec(s,".".concat(e.params.slideClass,", swiper-slide")),d=u?e.virtual.slides.length:h.length;let f=[];const p=[],g=[];let m=r.slidesOffsetBefore;"function"===typeof m&&(m=r.slidesOffsetBefore.call(e));let v=r.slidesOffsetAfter;"function"===typeof v&&(v=r.slidesOffsetAfter.call(e));const _=e.snapGrid.length,y=e.slidesGrid.length;let b=r.spaceBetween,x=-m,w=0,S=0;if("undefined"===typeof a)return;"string"===typeof b&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*a:"string"===typeof b&&(b=parseFloat(b)),e.virtualSize=-b,h.forEach(e=>{o?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),r.centeredSlides&&r.cssMode&&($u(i,"--swiper-centered-offset-before",""),$u(i,"--swiper-centered-offset-after",""));const C=r.grid&&r.grid.rows>1&&e.grid;let D;C&&e.grid.initSlides(d);const E="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter(e=>"undefined"!==typeof r.breakpoints[e].slidesPerView).length>0;for(let A=0;A<d;A+=1){let i;if(D=0,h[A]&&(i=h[A]),C&&e.grid.updateSlide(A,i,d,t),!h[A]||"none"!==tc(i,"display")){if("auto"===r.slidesPerView){E&&(h[A].style[t("width")]="");const s=getComputedStyle(i),a=i.style.transform,o=i.style.webkitTransform;if(a&&(i.style.transform="none"),o&&(i.style.webkitTransform="none"),r.roundLengths)D=e.isHorizontal()?rc(i,"width",!0):rc(i,"height",!0);else{const e=n(s,"width"),t=n(s,"padding-left"),r=n(s,"padding-right"),a=n(s,"margin-left"),o=n(s,"margin-right"),l=s.getPropertyValue("box-sizing");if(l&&"border-box"===l)D=e+a+o;else{const{clientWidth:n,offsetWidth:s}=i;D=e+t+r+a+o+(s-n)}}a&&(i.style.transform=a),o&&(i.style.webkitTransform=o),r.roundLengths&&(D=Math.floor(D))}else D=(a-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(D=Math.floor(D)),h[A]&&(h[A].style[t("width")]="".concat(D,"px"));h[A]&&(h[A].swiperSlideSize=D),g.push(D),r.centeredSlides?(x=x+D/2+w/2+b,0===w&&0!==A&&(x=x-a/2-b),0===A&&(x=x-a/2-b),Math.abs(x)<.001&&(x=0),r.roundLengths&&(x=Math.floor(x)),S%r.slidesPerGroup===0&&f.push(x),p.push(x)):(r.roundLengths&&(x=Math.floor(x)),(S-Math.min(e.params.slidesPerGroupSkip,S))%e.params.slidesPerGroup===0&&f.push(x),p.push(x),x=x+D+b),e.virtualSize+=D+b,w=D,S+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+v,o&&l&&("slide"===r.effect||"coverflow"===r.effect)&&(i.style.width="".concat(e.virtualSize+b,"px")),r.setWrapperSize&&(i.style[t("width")]="".concat(e.virtualSize+b,"px")),C&&e.grid.updateWrapperSize(D,f,t),!r.centeredSlides){const t=[];for(let n=0;n<f.length;n+=1){let i=f[n];r.roundLengths&&(i=Math.floor(i)),f[n]<=e.virtualSize-a&&t.push(i)}f=t,Math.floor(e.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(e.virtualSize-a)}if(u&&r.loop){const t=g[0]+b;if(r.slidesPerGroup>1){const n=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/r.slidesPerGroup),i=t*r.slidesPerGroup;for(let e=0;e<n;e+=1)f.push(f[f.length-1]+i)}for(let n=0;n<e.virtual.slidesBefore+e.virtual.slidesAfter;n+=1)1===r.slidesPerGroup&&f.push(f[f.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===f.length&&(f=[0]),0!==b){const n=e.isHorizontal()&&o?"marginLeft":t("marginRight");h.filter((e,t)=>!(r.cssMode&&!r.loop)||t!==h.length-1).forEach(e=>{e.style[n]="".concat(b,"px")})}if(r.centeredSlides&&r.centeredSlidesBounds){let e=0;g.forEach(t=>{e+=t+(b||0)}),e-=b;const t=e-a;f=f.map(e=>e<=0?-m:e>t?t+v:e)}if(r.centerInsufficientSlides){let e=0;if(g.forEach(t=>{e+=t+(b||0)}),e-=b,e<a){const t=(a-e)/2;f.forEach((e,n)=>{f[n]=e-t}),p.forEach((e,n)=>{p[n]=e+t})}}if(Object.assign(e,{slides:h,snapGrid:f,slidesGrid:p,slidesSizesGrid:g}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){$u(i,"--swiper-centered-offset-before","".concat(-f[0],"px")),$u(i,"--swiper-centered-offset-after","".concat(e.size/2-g[g.length-1]/2,"px"));const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+n)}if(d!==c&&e.emit("slidesLengthChange"),f.length!==_&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!u&&!r.cssMode&&("slide"===r.effect||"fade"===r.effect)){const t="".concat(r.containerModifierClass,"backface-hidden"),n=e.el.classList.contains(t);d<=r.maxBackfaceHiddenSlides?n||e.el.classList.add(t):n&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,s=0;"number"===typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>r?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{n.push(e)});else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(a(e))}else n.push(a(t.activeIndex));for(i=0;i<n.length;i+=1)if("undefined"!==typeof n[i]){const e=n[i].offsetHeight;s=e>s?e:s}(s||0===s)&&(t.wrapperEl.style.height="".concat(s,"px"))},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=(e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:s}=t;if(0===r.length)return;"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;i&&(a=e),r.forEach(e=>{e.classList.remove(n.slideVisibleClass)}),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=n.spaceBetween;"string"===typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"===typeof o&&(o=parseFloat(o));for(let l=0;l<r.length;l+=1){const e=r[l];let u=e.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=r[0].swiperSlideOffset);const c=(a+(n.centeredSlides?t.minTranslate():0)-u)/(e.swiperSlideSize+o),h=(a-s[0]+(n.centeredSlides?t.minTranslate():0)-u)/(e.swiperSlideSize+o),d=-(a-u),f=d+t.slidesSizesGrid[l];(d>=0&&d<t.size-1||f>1&&f<=t.size||d<=0&&f>=t.size)&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l),r[l].classList.add(n.slideVisibleClass)),e.progress=i?-c:c,e.originalProgress=i?-h:h}},updateProgress:function(e){const t=this;if("undefined"===typeof e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:s,isEnd:a,progressLoop:o}=t;const l=s,u=a;if(0===r)i=0,s=!0,a=!0;else{i=(e-t.minTranslate())/r;const n=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;s=n||i<=0,a=o||i>=1,n&&(i=0),o&&(i=1)}if(n.loop){const n=t.getSlideIndexByData(0),r=t.getSlideIndexByData(t.slides.length-1),i=t.slidesGrid[n],s=t.slidesGrid[r],a=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=i?(l-i)/a:(l+a-s)/a,o>1&&(o-=1)}Object.assign(t,{progress:i,progressLoop:o,isBeginning:s,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),a&&!u&&t.emit("reachEnd toEdge"),(l&&!s||u&&!a)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:r,activeIndex:i}=e,s=e.virtual&&n.virtual.enabled,a=e=>ec(r,".".concat(n.slideClass).concat(e,", swiper-slide").concat(e))[0];let o;if(t.forEach(e=>{e.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)}),s)if(n.loop){let t=i-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),o=a('[data-swiper-slide-index="'.concat(t,'"]'))}else o=a('[data-swiper-slide-index="'.concat(i,'"]'));else o=t[i];if(o){o.classList.add(n.slideActiveClass);let e=function(e,t){const n=[];for(;e.nextElementSibling;){const r=e.nextElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(o,".".concat(n.slideClass,", swiper-slide"))[0];n.loop&&!e&&(e=t[0]),e&&e.classList.add(n.slideNextClass);let r=function(e,t){const n=[];for(;e.previousElementSibling;){const r=e.previousElementSibling;t?r.matches(t)&&n.push(r):n.push(r),e=r}return n}(o,".".concat(n.slideClass,", swiper-slide"))[0];n.loop&&0===!r&&(r=t[t.length-1]),r&&r.classList.add(n.slidePrevClass)}e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:a,snapIndex:o}=t;let l,u=e;const c=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if("undefined"===typeof u&&(u=function(e){const{slidesGrid:t,params:n}=e,r=e.rtlTranslate?e.translate:-e.translate;let i;for(let s=0;s<t.length;s+=1)"undefined"!==typeof t[s+1]?r>=t[s]&&r<t[s+1]-(t[s+1]-t[s])/2?i=s:r>=t[s]&&r<t[s+1]&&(i=s+1):r>=t[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||"undefined"===typeof i)&&(i=0),i}(t)),r.indexOf(n)>=0)l=r.indexOf(n);else{const e=Math.min(i.slidesPerGroupSkip,u);l=e+Math.floor((u-e)/i.slidesPerGroup)}if(l>=r.length&&(l=r.length-1),u===s)return l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")),void(t.params.loop&&t.virtual&&t.params.virtual.enabled&&(t.realIndex=c(u)));let h;h=t.virtual&&i.virtual.enabled&&i.loop?c(u):t.slides[u]?parseInt(t.slides[u].getAttribute("data-swiper-slide-index")||u,10):u,Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:a,realIndex:h,previousIndex:s,activeIndex:u}),t.initialized&&fc(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==h&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,r=n.params;let i=e.closest(".".concat(r.slideClass,", swiper-slide"));!i&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!i&&e.matches&&e.matches(".".concat(r.slideClass,", swiper-slide"))&&(i=e)});let s,a=!1;if(i)for(let o=0;o<n.slides.length;o+=1)if(n.slides[o]===i){a=!0,s=o;break}if(!i||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=s,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var gc={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:r,wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let s=Zu(i,e);return s+=this.cssOverflowAdjustment(),n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:a}=n;let o,l=0,u=0;n.isHorizontal()?l=r?-e:e:u=e,i.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:u,i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-u:i.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():u-=n.cssOverflowAdjustment(),s.style.transform="translate3d(".concat(l,"px, ").concat(u,"px, ").concat(0,"px)"));const c=n.maxTranslate()-n.minTranslate();o=0===c?0:(e-n.minTranslate())/c,o!==a&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),u=s.maxTranslate();let c;if(c=r&&e>l?l:r&&e<u?u:e,s.updateProgress(c),a.cssMode){const e=s.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-c;else{if(!s.support.smoothScroll)return Qu({swiper:s,targetPosition:-c,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(c),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(c),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}};function mc(e){let{swiper:t,runCallbacks:n,direction:r,step:i}=e;const{activeIndex:s,previousIndex:a}=t;let o=r;if(o||(o=s>a?"next":s<a?"prev":"reset"),t.emit("transition".concat(i)),n&&s!==a){if("reset"===o)return void t.emit("slideResetTransition".concat(i));t.emit("slideChangeTransition".concat(i)),"next"===o?t.emit("slideNextTransition".concat(i)):t.emit("slidePrevTransition".concat(i))}}var vc={setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration="".concat(e,"ms"),n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),mc({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),mc({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var _c={slideTo:function(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e&&(e=parseInt(e,10));const s=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:h,rtlTranslate:d,wrapperEl:f,enabled:p}=s;if(s.animating&&o.preventInteractionOnTransition||!p&&!r&&!i)return!1;const g=Math.min(s.params.slidesPerGroupSkip,a);let m=g+Math.floor((a-g)/s.params.slidesPerGroup);m>=l.length&&(m=l.length-1);const v=-l[m];if(o.normalizeSlideIndex)for(let y=0;y<u.length;y+=1){const e=-Math.floor(100*v),t=Math.floor(100*u[y]),n=Math.floor(100*u[y+1]);"undefined"!==typeof u[y+1]?e>=t&&e<n-(n-t)/2?a=y:e>=t&&e<n&&(a=y+1):e>=t&&(a=y)}if(s.initialized&&a!==h){if(!s.allowSlideNext&&(d?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate()))return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(h||0)!==a)return!1}let _;if(a!==(c||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(v),_=a>h?"next":a<h?"prev":"reset",d&&-v===s.translate||!d&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==o.effect&&s.setTranslate(v),"reset"!==_&&(s.transitionStart(n,_),s.transitionEnd(n,_)),!1;if(o.cssMode){const e=s.isHorizontal(),n=d?v:-v;if(0===t){const t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),t&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[e?"scrollLeft":"scrollTop"]=n})):f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return Qu({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,_),0===t?s.transitionEnd(n,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,_))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"string"===typeof e){e=parseInt(e,10)}const i=this;let s=e;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?s+=i.virtual.slidesBefore:s=i.getSlideIndexByData(s)),i.slideTo(s,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{enabled:i,params:s,animating:a}=r;if(!i)return r;let o=s.slidesPerGroup;"auto"===s.slidesPerView&&1===s.slidesPerGroup&&s.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:o,u=r.virtual&&s.virtual.enabled;if(s.loop){if(a&&!u&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,e,t,n)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);const r=this,{params:i,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:u}=r;if(!l)return r;const c=r.virtual&&i.virtual.enabled;if(i.loop){if(u&&!c&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}function h(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=h(o?r.translate:-r.translate),f=s.map(e=>h(e));let p=s[f.indexOf(d)-1];if("undefined"===typeof p&&i.cssMode){let e;s.forEach((t,n)=>{d>=t&&(e=n)}),"undefined"!==typeof e&&(p=s[e>0?e-1:e])}let g=0;if("undefined"!==typeof p&&(g=a.indexOf(p),g<0&&(g=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(g=g-r.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return i.loop&&0===r.activeIndex&&i.cssMode?(requestAnimationFrame(()=>{r.slideTo(g,e,t,n)}),!0):r.slideTo(g,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);const i=this;let s=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const e=i.snapGrid[o];l-e>(i.snapGrid[o+1]-e)*r&&(s+=i.params.slidesPerGroup)}else{const e=i.snapGrid[o-1];l-e<=(i.snapGrid[o]-e)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,slidesEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,s=e.clickedIndex;const a=e.isElement?"swiper-slide":".".concat(t.slideClass);if(t.loop){if(e.animating)return;i=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=e.getSlideIndex(ec(n,"".concat(a,'[data-swiper-slide-index="').concat(i,'"]'))[0]),Wu(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=e.getSlideIndex(ec(n,"".concat(a,'[data-swiper-slide-index="').concat(i,'"]'))[0]),Wu(()=>{e.slideTo(s)})):e.slideTo(s)}else e.slideTo(s)}};var yc={loopCreate:function(e){const t=this,{params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;ec(r,".".concat(n.slideClass,", swiper-slide")).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}),t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:r,setTranslate:i,activeSlideIndex:s,byController:a,byMousewheel:o}=void 0===e?{}:e;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:h,slidesEl:d,params:f}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled)return n&&(f.centeredSlides||0!==l.snapIndex?f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0):l.slideTo(l.virtual.slides.length,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=h,void l.emit("loopFix");const p="auto"===f.slidesPerView?l.slidesPerViewDynamic():Math.ceil(parseFloat(f.slidesPerView,10));let g=f.loopedSlides||p;g%f.slidesPerGroup!==0&&(g+=f.slidesPerGroup-g%f.slidesPerGroup),l.loopedSlides=g;const m=[],v=[];let _=l.activeIndex;"undefined"===typeof s?s=l.getSlideIndex(l.slides.filter(e=>e.classList.contains(f.slideActiveClass))[0]):_=s;const y="next"===r||!r,b="prev"===r||!r;let x=0,w=0;if(s<g){x=Math.max(g-s,f.slidesPerGroup);for(let e=0;e<g-s;e+=1){const t=e-Math.floor(e/u.length)*u.length;m.push(u.length-t-1)}}else if(s>l.slides.length-2*g){w=Math.max(s-(l.slides.length-2*g),f.slidesPerGroup);for(let e=0;e<w;e+=1){const t=e-Math.floor(e/u.length)*u.length;v.push(t)}}if(b&&m.forEach(e=>{l.slides[e].swiperLoopMoveDOM=!0,d.prepend(l.slides[e]),l.slides[e].swiperLoopMoveDOM=!1}),y&&v.forEach(e=>{l.slides[e].swiperLoopMoveDOM=!0,d.append(l.slides[e]),l.slides[e].swiperLoopMoveDOM=!1}),l.recalcSlides(),"auto"===f.slidesPerView&&l.updateSlides(),f.watchSlidesProgress&&l.updateSlidesOffset(),n)if(m.length>0&&b)if("undefined"===typeof t){const e=l.slidesGrid[_],t=l.slidesGrid[_+x]-e;o?l.setTranslate(l.translate-t):(l.slideTo(_+x,0,!1,!0),i&&(l.touches[l.isHorizontal()?"startX":"startY"]+=t,l.touchEventsData.currentTranslate=l.translate))}else i&&(l.slideToLoop(t,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(v.length>0&&y)if("undefined"===typeof t){const e=l.slidesGrid[_],t=l.slidesGrid[_-w]-e;o?l.setTranslate(l.translate-t):(l.slideTo(_-w,0,!1,!0),i&&(l.touches[l.isHorizontal()?"startX":"startY"]+=t,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(t,0,!1,!0);if(l.allowSlidePrev=c,l.allowSlideNext=h,l.controller&&l.controller.control&&!a){const e={slideRealIndex:t,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix(H(H({},e),{},{slideTo:t.params.slidesPerView===f.slidesPerView&&n}))}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(H(H({},e),{},{slideTo:l.controller.control.params.slidesPerView===f.slidesPerView&&n}))}l.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const r=[];e.slides.forEach(e=>{const t="undefined"===typeof e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;r[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),r.forEach(e=>{n.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}};var bc={setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}};function xc(e){const t=this,n=Hu(),r=Yu(),i=t.touchEventsData;i.evCache.push(e);const{params:s,touches:a,enabled:o}=t;if(!o)return;if(!s.simulateTouch&&"mouse"===e.pointerType)return;if(t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=e;l.originalEvent&&(l=l.originalEvent);let u=l.target;if("wrapper"===s.touchEventsTarget&&!t.wrapperEl.contains(u))return;if("which"in l&&3===l.which)return;if("button"in l&&l.button>0)return;if(i.isTouched&&i.isMoved)return;const c=!!s.noSwipingClass&&""!==s.noSwipingClass,h=e.composedPath?e.composedPath():e.path;c&&l.target&&l.target.shadowRoot&&h&&(u=h[0]);const d=s.noSwipingSelector?s.noSwipingSelector:".".concat(s.noSwipingClass),f=!(!l.target||!l.target.shadowRoot);if(s.noSwiping&&(f?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===Hu()||n===Yu())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(d,u):u.closest(d)))return void(t.allowClick=!0);if(s.swipeHandler&&!u.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,g=a.currentY,m=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,v=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(m&&(p<=v||p>=r.innerWidth-v)){if("prevent"!==m)return;e.preventDefault()}Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=g,i.touchStartTime=qu(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let _=!0;u.matches(i.focusableElements)&&(_=!1,"SELECT"===u.nodeName&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==u&&n.activeElement.blur();const y=_&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!y||u.isContentEditable||l.preventDefault(),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function wc(e){const t=Hu(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:a,enabled:o}=n;if(!o)return;if(!i.simulateTouch&&"mouse"===e.pointerType)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));const u=r.evCache.findIndex(e=>e.pointerId===l.pointerId);u>=0&&(r.evCache[u]=l);const c=r.evCache.length>1?r.evCache[0]:l,h=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper)return s.startX=h,void(s.startY=d);if(!n.allowTouchMove)return l.target.matches(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(s,{startX:h,startY:d,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:h,currentY:d}),r.touchStartTime=qu()));if(i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(d<s.startY&&n.translate<=n.maxTranslate()||d>s.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(h<s.startX&&n.translate<=n.maxTranslate()||h>s.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&l.target===t.activeElement&&l.target.matches(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=h,s.currentY=d;const f=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if("undefined"===typeof r.isScrolling){let e;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(f))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),"undefined"===typeof r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&r.evCache.length>1)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let g=n.isHorizontal()?f:p,m=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(g=Math.abs(g)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),s.diff=g,g*=i.touchRatio,a&&(g=-g,m=-m);const v=n.touchesDirection;n.swipeDirection=g>0?"prev":"next",n.touchesDirection=m>0?"prev":"next";const _=n.params.loop&&!i.cssMode,y="next"===n.swipeDirection&&n.allowSlideNext||"prev"===n.swipeDirection&&n.allowSlidePrev;if(!r.isMoved){if(_&&y&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(e)}r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let b;r.isMoved&&v!==n.touchesDirection&&_&&y&&Math.abs(g)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),b=!0),n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=g+r.startTranslate;let x=!0,w=i.resistanceRatio;if(i.touchReleaseOnEdges&&(w=0),g>0?(_&&y&&!b&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+g)**w))):g<0&&(_&&y&&!b&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===i.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-g)**w))),x&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(g)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function Sc(e){const t=this,n=t.touchEventsData,r=n.evCache.findIndex(t=>t.pointerId===e.pointerId);if(r>=0&&n.evCache.splice(r,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(e.type)){if(!(["pointercancel","contextmenu"].includes(e.type)&&(t.browser.isSafari||t.browser.isWebView)))return}const{params:i,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=t;if(!l)return;if(!i.simulateTouch&&"mouse"===e.pointerType)return;let u=e;if(u.originalEvent&&(u=u.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",u),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const c=qu(),h=c-n.touchStartTime;if(t.allowClick){const e=u.path||u.composedPath&&u.composedPath();t.updateClickedSlide(e&&e[0]||u.target,e),t.emit("tap click",u),h<300&&c-n.lastClickTime<300&&t.emit("doubleTap doubleClick",u)}if(n.lastClickTime=qu(),Wu(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||0===s.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=i.followFinger?a?t.translate:-t.translate:-n.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});let f=0,p=t.slidesSizesGrid[0];for(let y=0;y<o.length;y+=y<i.slidesPerGroupSkip?1:i.slidesPerGroup){const e=y<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;"undefined"!==typeof o[y+e]?d>=o[y]&&d<o[y+e]&&(f=y,p=o[y+e]-o[y]):d>=o[y]&&(f=y,p=o[o.length-1]-o[o.length-2])}let g=null,m=null;i.rewind&&(t.isBeginning?m=i.virtual&&i.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const v=(d-o[f])/p,_=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(h>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(v>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?g:f+_):t.slideTo(f)),"prev"===t.swipeDirection&&(v>1-i.longSwipesRatio?t.slideTo(f+_):null!==m&&v<0&&Math.abs(v)>i.longSwipesRatio?t.slideTo(m):t.slideTo(f))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(u.target===t.navigation.nextEl||u.target===t.navigation.prevEl)?u.target===t.navigation.nextEl?t.slideTo(f+_):t.slideTo(f):("next"===t.swipeDirection&&t.slideTo(null!==g?g:f+_),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:f))}}function Cc(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=a&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function Dc(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Ec(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const s=e.maxTranslate()-e.minTranslate();i=0===s?0:(e.translate-e.minTranslate())/s,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Ac(e){const t=this;hc(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}let kc=!1;function Mc(){}const Tc=(e,t)=>{const n=Hu(),{params:r,el:i,wrapperEl:s,device:a}=e,o=!!r.nested,l="on"===t?"addEventListener":"removeEventListener",u=t;i[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),n[l]("contextmenu",e.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",e.onClick,!0),r.cssMode&&s[l]("scroll",e.onScroll),r.updateOnWindowResize?e[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Cc,!0):e[u]("observerUpdate",Cc,!0),i[l]("load",e.onLoad,{capture:!0})};var Ic={attachEvents:function(){const e=this,t=Hu(),{params:n}=e;e.onTouchStart=xc.bind(e),e.onTouchMove=wc.bind(e),e.onTouchEnd=Sc.bind(e),n.cssMode&&(e.onScroll=Ec.bind(e)),e.onClick=Dc.bind(e),e.onLoad=Ac.bind(e),kc||(t.addEventListener("touchstart",Mc),kc=!0),Tc(e,"on")},detachEvents:function(){Tc(this,"off")}};const Oc=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Lc={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:r,el:i}=e,s=r.breakpoints;if(!s||s&&0===Object.keys(s).length)return;const a=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(!a||e.currentBreakpoint===a)return;const o=(a in s?s[a]:void 0)||e.originalParams,l=Oc(e,r),u=Oc(e,o),c=r.enabled;l&&!u?(i.classList.remove("".concat(r.containerModifierClass,"grid"),"".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()):!l&&u&&(i.classList.add("".concat(r.containerModifierClass,"grid")),(o.grid.fill&&"column"===o.grid.fill||!o.grid.fill&&"column"===r.grid.fill)&&i.classList.add("".concat(r.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(t=>{if("undefined"===typeof o[t])return;const n=r[t]&&r[t].enabled,i=o[t]&&o[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()});const h=o.direction&&o.direction!==r.direction,d=r.loop&&(o.slidesPerView!==r.slidesPerView||h),f=r.loop;h&&n&&e.changeDirection(),Ju(e.params,o);const p=e.params.enabled,g=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),c&&!p?e.disable():!c&&p&&e.enable(),e.currentBreakpoint=a,e.emit("_beforeBreakpoint",o),n&&(d?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!f&&g?(e.loopCreate(t),e.updateSlides()):f&&!g&&e.loopDestroy()),e.emit("breakpoint",o)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let r=!1;const i=Yu(),s="window"===t?i.innerHeight:n.clientHeight,a=Object.keys(e).map(e=>{if("string"===typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let o=0;o<a.length;o+=1){const{point:e,value:s}=a[o];"window"===t?i.matchMedia("(min-width: ".concat(s,"px)")).matches&&(r=e):s<=n.clientWidth&&(r=e)}return r||"max"}};var Pc={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,el:i,device:s}=e,a=function(e,t){const n=[];return e.forEach(e=>{"object"===typeof e?Object.keys(e).forEach(r=>{e[r]&&n.push(t+r)}):"string"===typeof e&&n.push(t+e)}),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...a),i.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e.classList.remove(...t),this.emitContainerClasses()}};var Bc={checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},Nc={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Rc(e,t){return function(n){void 0===n&&(n={});const r=Object.keys(n)[0],i=n[r];"object"===typeof i&&null!==i?(!0===e[r]&&(e[r]={enabled:!0}),"navigation"===r&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),r in e&&"enabled"in i?("object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),Ju(t,n)):Ju(t,n)):Ju(t,n)}}const Fc={eventsEmitter:cc,update:pc,translate:gc,transition:vc,slide:_c,loop:yc,grabCursor:bc,events:Ic,breakpoints:Lc,checkOverflow:Bc,classes:Pc},zc={};class jc{constructor(){let e,t;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?t=r[0]:[e,t]=r,t||(t={}),t=Ju({},t),e&&!t.el&&(t.el=e);const s=Hu();if(t.el&&"string"===typeof t.el&&s.querySelectorAll(t.el).length>1){const e=[];return s.querySelectorAll(t.el).forEach(n=>{const r=Ju({},t,{el:n});e.push(new jc(r))}),e}const a=this;a.__swiper__=!0,a.support=oc(),a.device=lc({userAgent:t.userAgent}),a.browser=uc(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const o={};a.modules.forEach(e=>{e({params:t,swiper:a,extendParams:Rc(t,o),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const l=Ju({},Nc,o);return a.params=Ju({},l,zc,t),a.originalParams=Ju({},a.params),a.passedParams=Ju({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(e=>{a.on(e,a.params.on[e])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===a.params.direction,isVertical:()=>"vertical"===a.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getSlideIndex(e){const{slidesEl:t,params:n}=this,r=nc(ec(t,".".concat(n.slideClass,", swiper-slide"))[0]);return nc(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>1*t.getAttribute("data-swiper-slide-index")===e)[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=ec(e,".".concat(t.slideClass,", swiper-slide"))}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:s,size:a,activeIndex:o}=this;let l=1;if("number"===typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=r[o]?r[o].swiperSlideSize:0;for(let n=o+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0));for(let n=o-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let u=o+1;u<r.length;u+=1){(t?i[u]+s[u]-i[o]<a:i[u]-i[o]<a)&&(l+=1)}else for(let u=o-1;u>=0;u-=1){i[o]-i[u]<a&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&hc(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)r(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(t.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||r()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove("".concat(n.params.containerModifierClass).concat(r)),n.el.classList.add("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.el.classList.remove("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"===typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&"SWIPER-CONTAINER"===n.parentNode.host.nodeName&&(t.isElement=!0);const r=()=>".".concat((t.params.wrapperClass||"").trim().split(" ").join("."));let i=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(r())}return ec(n,r())[0]})();return!i&&t.params.createElements&&(i=function(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:[t]),n}("div",t.params.wrapperClass),n.append(i),ec(n,".".concat(t.params.slideClass)).forEach(e=>{i.append(e)})),Object.assign(t,{el:n,wrapperEl:i,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:i,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===tc(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===tc(n,"direction")),wrongRTL:"-webkit-box"===tc(i,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(e=>{e.complete?hc(t,e):e.addEventListener("load",e=>{hc(t,e.target)})}),fc(t),t.initialized=!0,fc(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:r,el:i,wrapperEl:s,slides:a}=n;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttribute("style"),s.removeAttribute("style"),a&&a.length&&a.forEach(e=>{e.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(e=>{n.off(e)}),!1!==e&&(n.el.swiper=null,function(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}})}(n)),n.destroyed=!0),null}static extendDefaults(e){Ju(zc,e)}static get extendedDefaults(){return zc}static get defaults(){return Nc}static installModule(e){jc.prototype.__modules__||(jc.prototype.__modules__=[]);const t=jc.prototype.__modules__;"function"===typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(e=>jc.installModule(e)),jc):(jc.installModule(e),jc)}}Object.keys(Fc).forEach(e=>{Object.keys(Fc[e]).forEach(t=>{jc.prototype[t]=Fc[e][t]})}),jc.use([function(e){let{swiper:t,on:n,emit:r}=e;const i=Yu();let s=null,a=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",()=>{t.params.resizeObserver&&"undefined"!==typeof i.ResizeObserver?t&&!t.destroyed&&t.initialized&&(s=new ResizeObserver(e=>{a=i.requestAnimationFrame(()=>{const{width:n,height:r}=t;let i=n,s=r;e.forEach(e=>{let{contentBoxSize:n,contentRect:r,target:a}=e;a&&a!==t.el||(i=r?r.width:(n[0]||n).inlineSize,s=r?r.height:(n[0]||n).blockSize)}),i===n&&s===r||o()})}),s.observe(t.el)):(i.addEventListener("resize",o),i.addEventListener("orientationchange",l))}),n("destroy",()=>{a&&i.cancelAnimationFrame(a),s&&s.unobserve&&t.el&&(s.unobserve(t.el),s=null),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",l)})},function(e){let{swiper:t,extendParams:n,on:r,emit:i}=e;const s=[],a=Yu(),o=function(e,n){void 0===n&&(n={});const r=new(a.MutationObserver||a.WebkitMutationObserver)(e=>{if(t.__preventObserver__)return;if(1===e.length)return void i("observerUpdate",e[0]);const n=function(){i("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(n):a.setTimeout(n,0)});r.observe(e,{attributes:"undefined"===typeof n.attributes||n.attributes,childList:"undefined"===typeof n.childList||n.childList,characterData:"undefined"===typeof n.characterData||n.characterData}),s.push(r)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",()=>{if(t.params.observer){if(t.params.observeParents){const e=function(e,t){const n=[];let r=e.parentElement;for(;r;)t?r.matches(t)&&n.push(r):n.push(r),r=r.parentElement;return n}(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}}),r("destroy",()=>{s.forEach(e=>{e.disconnect()}),s.splice(0,s.length)})}]);const Vc=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Uc(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function Hc(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>n.indexOf(e)<0).forEach(n=>{"undefined"===typeof e[n]?e[n]=t[n]:Uc(t[n])&&Uc(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Hc(e[n],t[n]):e[n]=t[n]})}function Gc(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function Yc(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function Wc(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function qc(e){void 0===e&&(e="");const t=e.split(" ").map(e=>e.trim()).filter(e=>!!e),n=[];return t.forEach(e=>{n.indexOf(e)<0&&n.push(e)}),n.join(" ")}function Zc(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:"swiper-wrapper ".concat(e):"swiper-wrapper"}const Kc=["className","tag","wrapperTag","children","onSwiper"],Xc=["tag","children","className","swiper","zoom","lazy","virtualIndex","swiperSlideIndex"];function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jc.apply(this,arguments)}function $c(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function Qc(t){const n=[];return e.Children.toArray(t).forEach(e=>{$c(e)?n.push(e):e.props&&e.props.children&&Qc(e.props.children).forEach(e=>n.push(e))}),n}function eh(t){const n=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return e.Children.toArray(t).forEach(e=>{if($c(e))n.push(e);else if(e.props&&e.props.slot&&r[e.props.slot])r[e.props.slot].push(e);else if(e.props&&e.props.children){const t=Qc(e.props.children);t.length>0?t.forEach(e=>n.push(e)):r["container-end"].push(e)}else r["container-end"].push(e)}),{slides:n,slots:r}}function th(t,n){return"undefined"===typeof window?(0,e.useEffect)(t,n):(0,e.useLayoutEffect)(t,n)}const nh=(0,e.createContext)(null),rh=(0,e.createContext)(null),ih=(0,e.forwardRef)(function(t,n){let r=void 0===t?{}:t,{className:i,tag:s="div",wrapperTag:a="div",children:o,onSwiper:l}=r,u=Qe(r,Kc),c=!1;const[h,d]=(0,e.useState)("swiper"),[f,p]=(0,e.useState)(null),[g,m]=(0,e.useState)(!1),v=(0,e.useRef)(!1),_=(0,e.useRef)(null),y=(0,e.useRef)(null),b=(0,e.useRef)(null),x=(0,e.useRef)(null),w=(0,e.useRef)(null),S=(0,e.useRef)(null),C=(0,e.useRef)(null),D=(0,e.useRef)(null),{params:E,passedParams:A,rest:k,events:M}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const n={on:{}},r={},i={};Hc(n,Nc),n._emitClasses=!0,n.init=!1;const s={},a=Vc.map(e=>e.replace(/_/,"")),o=Object.assign({},e);return Object.keys(o).forEach(o=>{"undefined"!==typeof e[o]&&(a.indexOf(o)>=0?Uc(e[o])?(n[o]={},i[o]={},Hc(n[o],e[o]),Hc(i[o],e[o])):(n[o]=e[o],i[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"===typeof e[o]?t?r["".concat(o[2].toLowerCase()).concat(o.substr(3))]=e[o]:n.on["".concat(o[2].toLowerCase()).concat(o.substr(3))]=e[o]:s[o]=e[o])}),["navigation","pagination","scrollbar"].forEach(e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]}),{params:n,passedParams:i,rest:s,events:r}}(u),{slides:T,slots:I}=eh(o),O=()=>{m(!g)};Object.assign(E.on,{_containerClasses(e,t){d(t)}});const L=()=>{Object.assign(E.on,M),c=!0;const e=H({},E);if(delete e.wrapperClass,y.current=new jc(e),y.current.virtual&&y.current.params.virtual.enabled){y.current.virtual.slides=T;const e={cache:!1,slides:T,renderExternal:p,renderExternalUpdate:!1};Hc(y.current.params.virtual,e),Hc(y.current.originalParams.virtual,e)}};_.current||L(),y.current&&y.current.on("_beforeBreakpoint",O);return(0,e.useEffect)(()=>()=>{y.current&&y.current.off("_beforeBreakpoint",O)}),(0,e.useEffect)(()=>{!v.current&&y.current&&(y.current.emitSlidesClasses(),v.current=!0)}),th(()=>{if(n&&(n.current=_.current),_.current)return y.current.destroyed&&L(),function(e,t){let{el:n,nextEl:r,prevEl:i,paginationEl:s,scrollbarEl:a,swiper:o}=e;Gc(t)&&r&&i&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=i,o.originalParams.navigation.prevEl=i),Yc(t)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),Wc(t)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(n)}({el:_.current,nextEl:w.current,prevEl:S.current,paginationEl:C.current,scrollbarEl:D.current,swiper:y.current},E),l&&l(y.current),()=>{y.current&&!y.current.destroyed&&y.current.destroy(!0,!1)}},[]),th(()=>{!c&&M&&y.current&&Object.keys(M).forEach(e=>{y.current.on(e,M[e])});const e=function(e,t,n,r,i){const s=[];if(!t)return s;const a=e=>{s.indexOf(e)<0&&s.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&a("children"),r.length!==n.length&&a("children")}return Vc.filter(e=>"_"===e[0]).map(e=>e.replace(/_/,"")).forEach(n=>{if(n in e&&n in t)if(Uc(e[n])&&Uc(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?a(n):(r.forEach(r=>{e[n][r]!==t[n][r]&&a(n)}),i.forEach(r=>{e[n][r]!==t[n][r]&&a(n)}))}else e[n]!==t[n]&&a(n)}),s}(A,b.current,T,x.current,e=>e.key);return b.current=A,x.current=T,e.length&&y.current&&!y.current.destroyed&&function(e){let{swiper:t,slides:n,passedParams:r,changedParams:i,nextEl:s,prevEl:a,scrollbarEl:o,paginationEl:l}=e;const u=i.filter(e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e),{params:c,pagination:h,navigation:d,scrollbar:f,virtual:p,thumbs:g}=t;let m,v,_,y,b,x,w,S;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(m=!0),i.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(v=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(c.pagination||!1===c.pagination)&&h&&!h.el&&(_=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(c.scrollbar||!1===c.scrollbar)&&f&&!f.el&&(y=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||s)&&(c.navigation||!1===c.navigation)&&d&&!d.prevEl&&!d.nextEl&&(b=!0);const C=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),c[e].prevEl=void 0,c[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),c[e].el=void 0,t[e].el=void 0))};i.includes("loop")&&t.isElement&&(c.loop&&!r.loop?x=!0:!c.loop&&r.loop?w=!0:S=!0),u.forEach(e=>{if(Uc(c[e])&&Uc(r[e]))Hc(c[e],r[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in r[e])||r[e].enabled||C(e);else{const t=r[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?c[e]=r[e]:!1===t&&C(e)}}),u.includes("controller")&&!v&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),i.includes("children")&&n&&p&&c.virtual.enabled&&(p.slides=n,p.update(!0)),i.includes("children")&&n&&c.loop&&(S=!0),m&&g.init()&&g.update(!0);v&&(t.controller.control=c.controller.control),_&&(!t.isElement||l&&"string"!==typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(c.pagination.el=l),h.init(),h.render(),h.update()),y&&(!t.isElement||o&&"string"!==typeof o||(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(c.scrollbar.el=o),f.init(),f.updateSize(),f.setTranslate()),b&&(t.isElement&&(s&&"string"!==typeof s||(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=t.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),t.el.appendChild(s)),a&&"string"!==typeof a||(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=t.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),t.el.appendChild(a))),s&&(c.navigation.nextEl=s),a&&(c.navigation.prevEl=a),d.init(),d.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&t.changeDirection(r.direction,!1),(x||S)&&t.loopDestroy(),(w||S)&&t.loopCreate(),t.update()}({swiper:y.current,slides:T,passedParams:A,changedParams:e,nextEl:w.current,prevEl:S.current,scrollbarEl:D.current,paginationEl:C.current}),()=>{M&&y.current&&Object.keys(M).forEach(e=>{y.current.off(e,M[e])})}}),th(()=>{(e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())})(y.current)},[f]),e.createElement(s,Jc({ref:_,className:qc("".concat(h).concat(i?" ".concat(i):""))},k),e.createElement(rh.Provider,{value:y.current},I["container-start"],e.createElement(a,{className:Zc(E.wrapperClass)},I["wrapper-start"],E.virtual?function(t,n,r){if(!r)return null;const i=e=>{let t=e;return e<0?t=n.length+e:t>=n.length&&(t-=n.length),t},s=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:"".concat(r.offset,"px")}:{top:"".concat(r.offset,"px")},{from:a,to:o}=r,l=t.params.loop?-n.length:0,u=t.params.loop?2*n.length:n.length,c=[];for(let e=l;e<u;e+=1)e>=a&&e<=o&&c.push(n[i(e)]);return c.map((n,r)=>e.cloneElement(n,{swiper:t,style:s,key:"slide-".concat(r)}))}(y.current,T,f):T.map((t,n)=>e.cloneElement(t,{swiper:y.current,swiperSlideIndex:n})),I["wrapper-end"]),Gc(E)&&e.createElement(e.Fragment,null,e.createElement("div",{ref:S,className:"swiper-button-prev"}),e.createElement("div",{ref:w,className:"swiper-button-next"})),Wc(E)&&e.createElement("div",{ref:D,className:"swiper-scrollbar"}),Yc(E)&&e.createElement("div",{ref:C,className:"swiper-pagination"}),I["container-end"]))});ih.displayName="Swiper";const sh=(0,e.forwardRef)(function(t,n){let r=void 0===t?{}:t,{tag:i="div",children:s,className:a="",swiper:o,zoom:l,lazy:u,virtualIndex:c,swiperSlideIndex:h}=r,d=Qe(r,Xc);const f=(0,e.useRef)(null),[p,g]=(0,e.useState)("swiper-slide"),[m,v]=(0,e.useState)(!1);function _(e,t,n){t===f.current&&g(n)}th(()=>{if("undefined"!==typeof h&&(f.current.swiperSlideIndex=h),n&&(n.current=f.current),f.current&&o){if(!o.destroyed)return o.on("_slideClass",_),()=>{o&&o.off("_slideClass",_)};"swiper-slide"!==p&&g("swiper-slide")}}),th(()=>{o&&f.current&&!o.destroyed&&g(o.getSlideClasses(f.current))},[o]);const y={isActive:p.indexOf("swiper-slide-active")>=0,isVisible:p.indexOf("swiper-slide-visible")>=0,isPrev:p.indexOf("swiper-slide-prev")>=0,isNext:p.indexOf("swiper-slide-next")>=0},b=()=>"function"===typeof s?s(y):s;return e.createElement(i,Jc({ref:f,className:qc("".concat(p).concat(a?" ".concat(a):"")),"data-swiper-slide-index":c,onLoad:()=>{v(!0)}},d),l&&e.createElement(nh.Provider,{value:y},e.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof l?l:void 0},b(),u&&!m&&e.createElement("div",{className:"swiper-lazy-preloader"}))),!l&&e.createElement(nh.Provider,{value:y},b(),u&&!m&&e.createElement("div",{className:"swiper-lazy-preloader"})))});sh.displayName="SwiperSlide";document.getElementById("dialogs-portal");const ah=t=>{var n,r,i,s,a,o,l,u,c,h,d,f,p,g,C,D;let{trayPreviewOpenButton3DFunc:k}=t;const{isSceneLoading:M,groups:T,selectOption:I,templates:O,product:L,setTemplate:P,setCamera:B,productName:N,items:R,getOnlineScreenshot:z,productCode:j,translations:V}=(0,m.useZakeke)(),U=(null===V||void 0===V||V.statics,null===V||void 0===V?void 0:V.dynamics),{setIsLoading:H,isMobile:G}=F(),Y=q(),[W,K]=(0,e.useState)(null),[X,J]=(0,e.useState)(null),[$,Q]=(0,e.useState)(null),[ee,te]=(0,e.useState)(null),[ne,re]=(0,e.useState)(null),[ie,se]=(0,e.useState)("PRINTED"),[ae,oe]=(0,e.useState)(null),[le,ue]=(0,e.useState)(null),[ce,he]=(0,e.useState)(null),[de,pe]=(0,e.useState)(null),[ge,me]=(0,e.useState)(null),[ve,_e]=(0,e.useState)(null),[ye,be]=(0,e.useState)(!1),[xe,we]=(0,e.useState)(""),[Se,Ce]=(0,e.useState)(null),[De,Ee]=(0,e.useState)(!1),[Ae,ke]=(0,e.useState)(""),[Me,Te]=(0,e.useState)(0);const[Ie,Oe]=(0,e.useState)(window.innerWidth),[Le,Pe]=(0,e.useState)(!1),[Be,Ne]=(0,e.useState)(!1),Re=W?Y.find(e=>e.id===W):null,Fe=W?null===(n=Y.find(e=>e.id===W))||void 0===n?void 0:n.steps.find(e=>e.id===X):null,ze=Fe?Fe.attributes:Re?Re.attributes:[],je=Fe?Fe.templateGroups:Re?Re.templateGroups:[],Ve=([...ze,...je].sort((e,t)=>e.displayOrder-t.displayOrder),(0,e.useMemo)(()=>{var e,t;return null!==(e=null===(t=Fe||Re)||void 0===t?void 0:t.attributes)&&void 0!==e?e:[]},[Re,Fe])),Ue=Ve.find(e=>e.id===ee),He=Ve.filter(e=>{if(e.name===e.name.toUpperCase()&&"Select Color"!=e.name)return e});He.filter(e=>void 0!==e),(0,e.useEffect)(()=>{if(ae){const e=Y.findIndex(e=>e.id===ae);Te(e)}const e=Y.findIndex(e=>e.id===W);Te(e)},[ae,Y]);let Ge=T.findIndex(e=>-1===e.id);-1!==Ge&&T.splice(Ge,1),(0,e.useEffect)(()=>{const e=(null===R||void 0===R?void 0:R.filter(e=>0===e.type).length)>0;R&&!e&&ge&&pe(Y[ge]),R&&e&&R.filter(e=>1===e.type)},[ce,Y,R]);document.getElementById("dialogs-portal");if((0,e.useEffect)(()=>{const e=()=>{Oe(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[R]),(0,e.useEffect)(()=>{if(!Re&&Y.length>0&&(K(T[0].id),ke("plain"),O.length>0&&P(O[0].id)),Y.length>0){var e=[];T.map(t=>{e.push({id:t.id,name:t.name,imageUrl:t.imageUrl})}),_e(e)}},[T]),(0,e.useEffect)(()=>{const e={plain:0,color:0,metallic:1,matte:2,fluorescent:3,knockX:4,"knock-X":4,"KNOCK-X":4};if(Re&&Ae in e){var t;const n=e[Ae],r=null===(t=Re.attributes[0])||void 0===t?void 0:t.options[n];r?(I(r.id),Q(r.name)):Q("")}},[Ue,Ae]),(0,e.useEffect)(()=>{if(Re){const e=Re.cameraLocationId;e&&B(e)}},[W]),M||!T||0===T.length)return(0,fe.jsx)(E,{children:(0,fe.jsx)(A,{children:(0,fe.jsx)(fo,{})})});const Ye=async()=>{try{const e=await z(800,800);e&&async function(e){try{const t=e,n=await fetch(t),r=await n.blob(),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download="yourImage.jpg",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(t){console.error("Error downloading image:",t)}}(e.originalUrl)}catch(e){console.error(e)}},We=e=>{if(De&&Ee(!De),be(!ye),we(e),null===e){const e=Y.findIndex(e=>e.id===W);0==Y[e].direction?we("colors"):2==Y[e].direction?we("signature"):3==Y[e].direction&&we("logos")}},qe=()=>{Ne(!Be)};let Ze=function(e){if(e){const t=(e?e.trim():"").split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].substr(1).toLowerCase();return t.join(" ")}}(null===(r=Y[Me])||void 0===r?void 0:r.name);return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)("div",{className:"top-nav",children:[(0,fe.jsx)("div",{className:"body-3",id:"product-info",children:N}),(0,fe.jsx)("div",{className:"top-right-controls",children:(0,fe.jsx)("div",{id:"savepic","data-hasqtip":"98",title:"","aria-describedby":"qtip-98",onClick:()=>Ye(),children:(0,fe.jsx)("i",{className:"fa fa-camera",style:{color:"rgb(54, 179, 237)"}})})})]}),!G&&(0,fe.jsx)("div",{className:"iHdtWA group-item selected",style:{position:"absolute",top:"5%",right:"1%",cursor:"pointer",marginLeft:"20px",width:"270px"}}),(0,fe.jsxs)("div",{className:"animate-wrapper-0",children:[(0,fe.jsxs)("div",{style:{width:"100%"},children:[(0,fe.jsx)("div",{className:"tray-header",children:(0,fe.jsx)("div",{className:"guide",children:(0,fe.jsx)("div",{className:"tray-header-1",children:(0,fe.jsx)("div",{style:{width:"100%"},children:(0,fe.jsxs)("div",{className:"active-marketing-component-name",onClick:()=>We("null"),children:[(0,fe.jsx)("div",{className:"selectiontype",children:Ze}),(0,fe.jsx)("div",{className:"arrd",children:(0,fe.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 36 36",children:(0,fe.jsx)("path",{fill:"#ffffff",d:"M16.1,26.54l-9.29-9.29c-1.05-1.05-1.05-2.75,0-3.8l0,0c1.05-1.05,2.75-1.05,3.8,0L18,20.85l7.39-7.39\r c1.05-1.05,2.75-1.05,3.8,0l0,0c1.05,1.05,1.05,2.75,0,3.8l-9.29,9.29C18.85,27.59,17.15,27.59,16.1,26.54z"})})}),(0,fe.jsx)("div",{className:"gimg",children:(null===(i=Y[Me])||void 0===i?void 0:i.imageUrl)&&(0,fe.jsx)("img",{src:null===(s=Y[Me])||void 0===s?void 0:s.imageUrl,alt:"Group Image",style:{maxWidth:"100%",height:"auto"}})})]})})})})}),(0,fe.jsx)("br",{}),(""===xe||"null"===xe||"colors"===xe.toLowerCase())&&(0,fe.jsxs)("div",{className:"animate-wrapper".concat(ye?"-2 show":""),children:[ye&&!De&&(0,fe.jsx)(ro,{groupNameList:ve,filteredAreas:null,toggleFunc:We,UpdateGroupId:(e,t)=>{let n;oe(e),Y.filter(e=>e),n=Y.filter(t=>{if(null!==t&&void 0!==t&&t.id)return t.id==e});const r=Y.filter((t,n)=>t.id==e);if(r.length>=0){const e=r[0],t=Y.indexOf(e);Te(t)}var i;(we(t),"colors"===t)?null!==(i=n[0])&&void 0!==i&&i.id&&(K(n[0].id),Ce(n[0].id)):K(e)},updCurrentIndex:function(e){},selectedTray:xe,selectStepName:Q}),!ye&&!De&&"OVERLAY TYPE"!==Ze.toUpperCase()&&(0,fe.jsx)(zu,{productCode:j,selectedGroupName:Re,updateActiveColorOption:e=>{ke(e)},activeColorOption:Ae,currentAttributes:ze,fitlerAttributesName:null===(a=He[0])||void 0===a?void 0:a.name}),He[0]&&!De&&(0,fe.jsxs)("div",{style:{width:"100%",background:"0% 0% / 4px 4px rgba(255, 255, 255, 0.5)",borderRadius:"0px 0px 3px 3px",padding:"10px 10px 5px",borderTop:"none",boxShadow:"rgba(0, 64, 113, 0.1) 0px 3px 6px",display:ye?"none":"block"},children:[("OVERLAY TYPE"===(null===(o=He[0])||void 0===o?void 0:o.code)||"OVERLAY"===(null===(l=He[0])||void 0===l?void 0:l.code))&&(0,fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignContent:"center"},children:[(0,fe.jsx)("div",{className:"mchead",children:null!==(u=null===U||void 0===U?void 0:U.get("Overlay Type"))&&void 0!==u?u:"Overlay Type"}),(0,fe.jsx)("div",{className:"infsel",children:(0,fe.jsxs)("div",{className:"custom-dropdown",children:[(0,fe.jsxs)("button",{className:"custom-dropdown-button",onClick:()=>Pe(!Le),children:[ie," ",(0,fe.jsx)("span",{className:"dropdown-arrow",children:" \u25bc"})]}),Le&&(0,fe.jsx)("div",{className:"custom-dropdown-list",children:null===(c=He[0])||void 0===c?void 0:c.options.map(e=>(0,fe.jsx)("div",{className:"custom-dropdown-option",onClick:()=>{I(e.id),re(e.id),se(e.name),Pe(!Le)},children:e.name},e.id))})]})})]}),("METALLIC"===He[0].name.toUpperCase()||"FLUORESCENT"===He[0].name.toUpperCase()||"NORMAL"===He[0].name.toUpperCase()||"MATTE"===He[0].name.toUpperCase()||"COLOR"===He[0].name.toUpperCase()||"PLAIN"===He[0].name.toUpperCase())&&"OVERLAY TYPE"!=(null===(h=He[0])||void 0===h?void 0:h.code)&&"KNOCK-X"!==$&&(0,fe.jsx)(v,{children:!De&&He&&!ye&&(null===(d=He[0])||void 0===d?void 0:d.options.map(e=>(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)(y,{onClick:()=>{if("EMBROIDERED"===e.name||"PRINTED"===e.name){const t=T.findIndex(e=>"OVERLAY TYPE"===e.name.toUpperCase());t>0&&(K(T[t].id),"OVERLAY TYPE"===T[(null===T||void 0===T?void 0:T.length)-1].attributes[0].code.toUpperCase()&&I(e.id),re(e.id))}else I(e.id),re(e.id)},selected:e.selected,selectedColor:le,children:e.imageUrl&&(0,fe.jsx)(b,{src:e.imageUrl,onClick:()=>ue(e.name),selected:e.selected})},e.id)})))}),(0,fe.jsx)("div",{children:"METALLIC"!==He[0].name.toUpperCase()&&"FLUORESCENT"!==He[0].name.toUpperCase()&&"NORMAL"!==He[0].name.toUpperCase()&&"MATTE"!==He[0].name.toUpperCase()&&"OVERLAY TYPE"!==He[0].name.toUpperCase()&&"COLOR"!==He[0].name.toUpperCase()&&"PLAIN"!==He[0].name.toUpperCase()||"KNOCK-X"===$?(0,fe.jsxs)("div",{children:[(0,fe.jsx)("div",{className:"knockXlabel",children:null!==(f=null===U||void 0===U?void 0:U.get("SELECT DESIGN THEME"))&&void 0!==f?f:"SELECT DESIGN THEME"}),(0,fe.jsx)(ih,{spaceBetween:1,slidesPerView:2,navigation:!0,centeredSlides:!0,children:null===Re||void 0===Re||null===(p=Re.attributes[1])||void 0===p?void 0:p.options.map(e=>(0,fe.jsx)(sh,{children:(0,fe.jsx)(x,{onClick:()=>I(e.id),selected:!0,children:(0,fe.jsx)("div",{className:"scaler",children:e.name})},e.id)}))}),(0,fe.jsx)("br",{}),(0,fe.jsx)("div",{className:"knockXlabel",children:null!==(g=null===U||void 0===U?void 0:U.get("SELECT COLOR THEME"))&&void 0!==g?g:"SELECT COLOR THEME"}),(0,fe.jsx)(_,{children:He[0]&&He[0].options.map(e=>(0,fe.jsx)(w,{onClick:()=>I(e.id),selected:e.selected,children:e.imageUrl&&(0,fe.jsx)(S,{src:e.imageUrl})},e.id))})]}):(0,fe.jsx)(fe.Fragment,{})})]})]}),"signature"===xe&&(0,fe.jsx)(Hl,{togglePersonalize:qe,selectedAreaID:W}),"logos"===xe&&(0,fe.jsx)(ql,{togglePersonalize:qe,selectedAreaID:W})]}),(0,fe.jsxs)("div",{className:"gbuts",children:[(0,fe.jsx)("div",{id:"gprev",className:"mc-prev",onClick:()=>{var e;Q("");const t=(Me-1+Y.length)%Y.length,n=Y[t];we(Z(n.direction)),ke("plain"),ue(""),Te(t),K(n.id),n.steps&&J(null===(e=n.steps[0])||void 0===e?void 0:e.id)},children:null!==(C=null===U||void 0===U?void 0:U.get("Back"))&&void 0!==C?C:"Back"}),(0,fe.jsx)("div",{id:"gnext",className:"mc-next",onClick:()=>{var e;Q(""),oe(null);const t=(Me+1)%Y.length,n=Y[t];oe(null),we(Z(n.direction)),ke("plain"),ue(""),Te(t),K(n.id),n.steps&&J(null===(e=n.steps[0])||void 0===e?void 0:e.id)},children:null!==(D=null===U||void 0===U?void 0:U.get("Next"))&&void 0!==D?D:"Next"})]}),(0,fe.jsx)("div",{className:"empty-space-div"}),Ie<=460&&(0,fe.jsx)(Fu,{})]}),Ie>460&&(0,fe.jsx)(Cu,{})]})};var oh,lh;const uh=g.default.div(oh||(oh=i(["\n  // display: flex; \n  // flex  \n  // height: 50%;\n  // width: 50%\n  // padding: 40px;\n  // flex-direction: column;\n\n  position: relative;\n  display: grid;\n  grid-template-rows: 0fr auto auto;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n\n  @media screen and (max-width: 568px) {\n  grid-template-rows: 75% auto auto !important;\n  overflow: auto;\n  }\n"]))),ch=(g.default.div(lh||(lh=i(["\n  display: grid;\n  grid-template-rows: 1fr auto auto;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"]))),new m.ZakekeEnvironment),hh=()=>{const{isLoading:t,setPriceFormatter:n,setSelectedAttributeId:r,setSelectedGroupId:i,setSelectedStepId:s,isMobile:a,selectedGroupId:o,setIsMobile:l}=F(),[u,c]=(0,e.useState)(!1),h=(0,e.useRef)(!1);h.current=u;const[d,f]=(0,e.useState)(!1),p=e=>{f(e)};return(0,e.useEffect)(()=>{const e=()=>{c(!h.current)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,fe.jsx)(m.ZakekeProvider,{environment:ch,children:(0,fe.jsxs)("div",{id:"modal-container",className:"css-1q5ttm8",children:[a&&(0,fe.jsxs)(uh,{children:[(0,fe.jsx)("div",{style:{width:"100%",border:"0px solid",height:"100%"},children:(0,fe.jsx)("div",{className:"ThreeDRenderer",style:d?{width:"20vw",height:"20vh"}:{aspectRatio:"1 / 1",width:"100%",height:"100%",position:"absolute",top:"0em",bottom:"0"},children:(0,fe.jsx)(m.ZakekeViewer,{})})}),(0,fe.jsx)(ah,{trayPreviewOpenButton3DFunc:p})]}),!a&&(0,fe.jsxs)(uh,{children:[(0,fe.jsx)("div",{id:"threec",style:{display:"grid",alignItems:"center",justifyContent:"center"},children:(0,fe.jsx)("div",{className:"ThreeDRenderer",style:d?{width:"63vw",height:"67vh"}:{width:"85vw",height:"94vh",marginTop:"26px"},children:(0,fe.jsx)(m.ZakekeViewer,{})})}),(0,fe.jsx)(ah,{trayPreviewOpenButton3DFunc:p})]}),(0,fe.jsx)(Mt,{})]})})},dh=document.getElementById("root");if(dh){(0,r.H)(dh).render((0,fe.jsxs)(e.StrictMode,{children:[(0,fe.jsx)(hh,{}),(0,fe.jsx)(Mt,{})]}))}})()})();
//# sourceMappingURL=main.1a4f7db9.js.map